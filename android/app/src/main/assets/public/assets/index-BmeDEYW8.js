var Kv=e=>{throw TypeError(e)};var kp=(e,t,r)=>t.has(e)||Kv("Cannot "+r);var Ce=(e,t,r)=>(kp(e,t,"read from private field"),r?r.call(e):t.get(e)),At=(e,t,r)=>t.has(e)?Kv("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),ot=(e,t,r,s)=>(kp(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),gn=(e,t,r)=>(kp(e,t,"access private method"),r);var th=(e,t,r,s)=>({set _(a){ot(e,t,a,r)},get _(){return Ce(e,t,s)}});function T2(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const o=Object.getOwnPropertyDescriptor(s,a);o&&Object.defineProperty(e,a,o.get?o:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var ln=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function b0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Bk(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var a=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,a.get?a:{enumerable:!0,get:function(){return e[s]}})}),r}var I2={exports:{}},Zf={},R2={exports:{}},Nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wu=Symbol.for("react.element"),zk=Symbol.for("react.portal"),Uk=Symbol.for("react.fragment"),$k=Symbol.for("react.strict_mode"),qk=Symbol.for("react.profiler"),Vk=Symbol.for("react.provider"),Wk=Symbol.for("react.context"),Hk=Symbol.for("react.forward_ref"),Gk=Symbol.for("react.suspense"),Xk=Symbol.for("react.memo"),Kk=Symbol.for("react.lazy"),Yv=Symbol.iterator;function Yk(e){return e===null||typeof e!="object"?null:(e=Yv&&e[Yv]||e["@@iterator"],typeof e=="function"?e:null)}var P2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O2=Object.assign,D2={};function Dc(e,t,r){this.props=e,this.context=t,this.refs=D2,this.updater=r||P2}Dc.prototype.isReactComponent={};Dc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Dc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function M2(){}M2.prototype=Dc.prototype;function _0(e,t,r){this.props=e,this.context=t,this.refs=D2,this.updater=r||P2}var N0=_0.prototype=new M2;N0.constructor=_0;O2(N0,Dc.prototype);N0.isPureReactComponent=!0;var Qv=Array.isArray,L2=Object.prototype.hasOwnProperty,j0={current:null},F2={key:!0,ref:!0,__self:!0,__source:!0};function B2(e,t,r){var s,a={},o=null,d=null;if(t!=null)for(s in t.ref!==void 0&&(d=t.ref),t.key!==void 0&&(o=""+t.key),t)L2.call(t,s)&&!F2.hasOwnProperty(s)&&(a[s]=t[s]);var u=arguments.length-2;if(u===1)a.children=r;else if(1<u){for(var f=Array(u),p=0;p<u;p++)f[p]=arguments[p+2];a.children=f}if(e&&e.defaultProps)for(s in u=e.defaultProps,u)a[s]===void 0&&(a[s]=u[s]);return{$$typeof:wu,type:e,key:o,ref:d,props:a,_owner:j0.current}}function Qk(e,t){return{$$typeof:wu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function C0(e){return typeof e=="object"&&e!==null&&e.$$typeof===wu}function Zk(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Zv=/\/+/g;function Tp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Zk(""+e.key):t.toString(36)}function Oh(e,t,r,s,a){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(o){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case wu:case zk:d=!0}}if(d)return d=e,a=a(d),e=s===""?"."+Tp(d,0):s,Qv(a)?(r="",e!=null&&(r=e.replace(Zv,"$&/")+"/"),Oh(a,t,r,"",function(p){return p})):a!=null&&(C0(a)&&(a=Qk(a,r+(!a.key||d&&d.key===a.key?"":(""+a.key).replace(Zv,"$&/")+"/")+e)),t.push(a)),1;if(d=0,s=s===""?".":s+":",Qv(e))for(var u=0;u<e.length;u++){o=e[u];var f=s+Tp(o,u);d+=Oh(o,t,r,f,a)}else if(f=Yk(e),typeof f=="function")for(e=f.call(e),u=0;!(o=e.next()).done;)o=o.value,f=s+Tp(o,u++),d+=Oh(o,t,r,f,a);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return d}function rh(e,t,r){if(e==null)return e;var s=[],a=0;return Oh(e,s,"","",function(o){return t.call(r,o,a++)}),s}function Jk(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var kn={current:null},Dh={transition:null},eT={ReactCurrentDispatcher:kn,ReactCurrentBatchConfig:Dh,ReactCurrentOwner:j0};function z2(){throw Error("act(...) is not supported in production builds of React.")}Nt.Children={map:rh,forEach:function(e,t,r){rh(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return rh(e,function(){t++}),t},toArray:function(e){return rh(e,function(t){return t})||[]},only:function(e){if(!C0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Nt.Component=Dc;Nt.Fragment=Uk;Nt.Profiler=qk;Nt.PureComponent=_0;Nt.StrictMode=$k;Nt.Suspense=Gk;Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eT;Nt.act=z2;Nt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=O2({},e.props),a=e.key,o=e.ref,d=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,d=j0.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(f in t)L2.call(t,f)&&!F2.hasOwnProperty(f)&&(s[f]=t[f]===void 0&&u!==void 0?u[f]:t[f])}var f=arguments.length-2;if(f===1)s.children=r;else if(1<f){u=Array(f);for(var p=0;p<f;p++)u[p]=arguments[p+2];s.children=u}return{$$typeof:wu,type:e.type,key:a,ref:o,props:s,_owner:d}};Nt.createContext=function(e){return e={$$typeof:Wk,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Vk,_context:e},e.Consumer=e};Nt.createElement=B2;Nt.createFactory=function(e){var t=B2.bind(null,e);return t.type=e,t};Nt.createRef=function(){return{current:null}};Nt.forwardRef=function(e){return{$$typeof:Hk,render:e}};Nt.isValidElement=C0;Nt.lazy=function(e){return{$$typeof:Kk,_payload:{_status:-1,_result:e},_init:Jk}};Nt.memo=function(e,t){return{$$typeof:Xk,type:e,compare:t===void 0?null:t}};Nt.startTransition=function(e){var t=Dh.transition;Dh.transition={};try{e()}finally{Dh.transition=t}};Nt.unstable_act=z2;Nt.useCallback=function(e,t){return kn.current.useCallback(e,t)};Nt.useContext=function(e){return kn.current.useContext(e)};Nt.useDebugValue=function(){};Nt.useDeferredValue=function(e){return kn.current.useDeferredValue(e)};Nt.useEffect=function(e,t){return kn.current.useEffect(e,t)};Nt.useId=function(){return kn.current.useId()};Nt.useImperativeHandle=function(e,t,r){return kn.current.useImperativeHandle(e,t,r)};Nt.useInsertionEffect=function(e,t){return kn.current.useInsertionEffect(e,t)};Nt.useLayoutEffect=function(e,t){return kn.current.useLayoutEffect(e,t)};Nt.useMemo=function(e,t){return kn.current.useMemo(e,t)};Nt.useReducer=function(e,t,r){return kn.current.useReducer(e,t,r)};Nt.useRef=function(e){return kn.current.useRef(e)};Nt.useState=function(e){return kn.current.useState(e)};Nt.useSyncExternalStore=function(e,t,r){return kn.current.useSyncExternalStore(e,t,r)};Nt.useTransition=function(){return kn.current.useTransition()};Nt.version="18.3.1";R2.exports=Nt;var v=R2.exports;const $e=b0(v),E0=T2({__proto__:null,default:$e},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tT=v,rT=Symbol.for("react.element"),nT=Symbol.for("react.fragment"),sT=Object.prototype.hasOwnProperty,aT=tT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iT={key:!0,ref:!0,__self:!0,__source:!0};function U2(e,t,r){var s,a={},o=null,d=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(d=t.ref);for(s in t)sT.call(t,s)&&!iT.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:rT,type:e,key:o,ref:d,props:a,_owner:aT.current}}Zf.Fragment=nT;Zf.jsx=U2;Zf.jsxs=U2;I2.exports=Zf;var n=I2.exports,$2={exports:{}},fs={},q2={exports:{}},V2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(oe,te){var be=oe.length;oe.push(te);e:for(;0<be;){var ve=be-1>>>1,H=oe[ve];if(0<a(H,te))oe[ve]=te,oe[be]=H,be=ve;else break e}}function r(oe){return oe.length===0?null:oe[0]}function s(oe){if(oe.length===0)return null;var te=oe[0],be=oe.pop();if(be!==te){oe[0]=be;e:for(var ve=0,H=oe.length,J=H>>>1;ve<J;){var K=2*(ve+1)-1,ae=oe[K],de=K+1,se=oe[de];if(0>a(ae,be))de<H&&0>a(se,ae)?(oe[ve]=se,oe[de]=be,ve=de):(oe[ve]=ae,oe[K]=be,ve=K);else if(de<H&&0>a(se,be))oe[ve]=se,oe[de]=be,ve=de;else break e}}return te}function a(oe,te){var be=oe.sortIndex-te.sortIndex;return be!==0?be:oe.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var d=Date,u=d.now();e.unstable_now=function(){return d.now()-u}}var f=[],p=[],x=1,w=null,_=3,j=!1,N=!1,C=!1,A=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(oe){for(var te=r(p);te!==null;){if(te.callback===null)s(p);else if(te.startTime<=oe)s(p),te.sortIndex=te.expirationTime,t(f,te);else break;te=r(p)}}function T(oe){if(C=!1,b(oe),!N)if(r(f)!==null)N=!0,le(O);else{var te=r(p);te!==null&&ue(T,te.startTime-oe)}}function O(oe,te){N=!1,C&&(C=!1,S(M),M=-1),j=!0;var be=_;try{for(b(te),w=r(f);w!==null&&(!(w.expirationTime>te)||oe&&!G());){var ve=w.callback;if(typeof ve=="function"){w.callback=null,_=w.priorityLevel;var H=ve(w.expirationTime<=te);te=e.unstable_now(),typeof H=="function"?w.callback=H:w===r(f)&&s(f),b(te)}else s(f);w=r(f)}if(w!==null)var J=!0;else{var K=r(p);K!==null&&ue(T,K.startTime-te),J=!1}return J}finally{w=null,_=be,j=!1}}var L=!1,R=null,M=-1,P=5,q=-1;function G(){return!(e.unstable_now()-q<P)}function B(){if(R!==null){var oe=e.unstable_now();q=oe;var te=!0;try{te=R(!0,oe)}finally{te?V():(L=!1,R=null)}}else L=!1}var V;if(typeof k=="function")V=function(){k(B)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,X=ee.port2;ee.port1.onmessage=B,V=function(){X.postMessage(null)}}else V=function(){A(B,0)};function le(oe){R=oe,L||(L=!0,V())}function ue(oe,te){M=A(function(){oe(e.unstable_now())},te)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(oe){oe.callback=null},e.unstable_continueExecution=function(){N||j||(N=!0,le(O))},e.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<oe?Math.floor(1e3/oe):5},e.unstable_getCurrentPriorityLevel=function(){return _},e.unstable_getFirstCallbackNode=function(){return r(f)},e.unstable_next=function(oe){switch(_){case 1:case 2:case 3:var te=3;break;default:te=_}var be=_;_=te;try{return oe()}finally{_=be}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(oe,te){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var be=_;_=oe;try{return te()}finally{_=be}},e.unstable_scheduleCallback=function(oe,te,be){var ve=e.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?ve+be:ve):be=ve,oe){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=be+H,oe={id:x++,callback:te,priorityLevel:oe,startTime:be,expirationTime:H,sortIndex:-1},be>ve?(oe.sortIndex=be,t(p,oe),r(f)===null&&oe===r(p)&&(C?(S(M),M=-1):C=!0,ue(T,be-ve))):(oe.sortIndex=H,t(f,oe),N||j||(N=!0,le(O))),oe},e.unstable_shouldYield=G,e.unstable_wrapCallback=function(oe){var te=_;return function(){var be=_;_=te;try{return oe.apply(this,arguments)}finally{_=be}}}})(V2);q2.exports=V2;var oT=q2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lT=v,ds=oT;function Me(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var W2=new Set,Fd={};function ol(e,t){wc(e,t),wc(e+"Capture",t)}function wc(e,t){for(Fd[e]=t,e=0;e<t.length;e++)W2.add(t[e])}var Xa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rg=Object.prototype.hasOwnProperty,cT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jv={},ew={};function dT(e){return Rg.call(ew,e)?!0:Rg.call(Jv,e)?!1:cT.test(e)?ew[e]=!0:(Jv[e]=!0,!1)}function uT(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function hT(e,t,r,s){if(t===null||typeof t>"u"||uT(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Tn(e,t,r,s,a,o,d){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=d}var hn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){hn[e]=new Tn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];hn[t]=new Tn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){hn[e]=new Tn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){hn[e]=new Tn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){hn[e]=new Tn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){hn[e]=new Tn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){hn[e]=new Tn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){hn[e]=new Tn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){hn[e]=new Tn(e,5,!1,e.toLowerCase(),null,!1,!1)});var S0=/[\-:]([a-z])/g;function A0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(S0,A0);hn[t]=new Tn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(S0,A0);hn[t]=new Tn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(S0,A0);hn[t]=new Tn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){hn[e]=new Tn(e,1,!1,e.toLowerCase(),null,!1,!1)});hn.xlinkHref=new Tn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){hn[e]=new Tn(e,1,!1,e.toLowerCase(),null,!0,!0)});function k0(e,t,r,s){var a=hn.hasOwnProperty(t)?hn[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(hT(t,r,a,s)&&(r=null),s||a===null?dT(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,s=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var ti=lT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nh=Symbol.for("react.element"),zl=Symbol.for("react.portal"),Ul=Symbol.for("react.fragment"),T0=Symbol.for("react.strict_mode"),Pg=Symbol.for("react.profiler"),H2=Symbol.for("react.provider"),G2=Symbol.for("react.context"),I0=Symbol.for("react.forward_ref"),Og=Symbol.for("react.suspense"),Dg=Symbol.for("react.suspense_list"),R0=Symbol.for("react.memo"),wi=Symbol.for("react.lazy"),X2=Symbol.for("react.offscreen"),tw=Symbol.iterator;function sd(e){return e===null||typeof e!="object"?null:(e=tw&&e[tw]||e["@@iterator"],typeof e=="function"?e:null)}var wr=Object.assign,Ip;function xd(e){if(Ip===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Ip=t&&t[1]||""}return`
`+Ip+e}var Rp=!1;function Pp(e,t){if(!e||Rp)return"";Rp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(p){var s=p}Reflect.construct(e,[],t)}else{try{t.call()}catch(p){s=p}e.call(t.prototype)}else{try{throw Error()}catch(p){s=p}e()}}catch(p){if(p&&s&&typeof p.stack=="string"){for(var a=p.stack.split(`
`),o=s.stack.split(`
`),d=a.length-1,u=o.length-1;1<=d&&0<=u&&a[d]!==o[u];)u--;for(;1<=d&&0<=u;d--,u--)if(a[d]!==o[u]){if(d!==1||u!==1)do if(d--,u--,0>u||a[d]!==o[u]){var f=`
`+a[d].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=d&&0<=u);break}}}finally{Rp=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?xd(e):""}function fT(e){switch(e.tag){case 5:return xd(e.type);case 16:return xd("Lazy");case 13:return xd("Suspense");case 19:return xd("SuspenseList");case 0:case 2:case 15:return e=Pp(e.type,!1),e;case 11:return e=Pp(e.type.render,!1),e;case 1:return e=Pp(e.type,!0),e;default:return""}}function Mg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ul:return"Fragment";case zl:return"Portal";case Pg:return"Profiler";case T0:return"StrictMode";case Og:return"Suspense";case Dg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case G2:return(e.displayName||"Context")+".Consumer";case H2:return(e._context.displayName||"Context")+".Provider";case I0:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case R0:return t=e.displayName||null,t!==null?t:Mg(e.type)||"Memo";case wi:t=e._payload,e=e._init;try{return Mg(e(t))}catch{}}return null}function mT(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mg(t);case 8:return t===T0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function qi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function K2(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function pT(e){var t=K2(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(d){s=""+d,o.call(this,d)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(d){s=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function sh(e){e._valueTracker||(e._valueTracker=pT(e))}function Y2(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=K2(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function sf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Lg(e,t){var r=t.checked;return wr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function rw(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=qi(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Q2(e,t){t=t.checked,t!=null&&k0(e,"checked",t,!1)}function Fg(e,t){Q2(e,t);var r=qi(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Bg(e,t.type,r):t.hasOwnProperty("defaultValue")&&Bg(e,t.type,qi(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function nw(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Bg(e,t,r){(t!=="number"||sf(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var vd=Array.isArray;function Jl(e,t,r,s){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&s&&(e[r].defaultSelected=!0)}else{for(r=""+qi(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function zg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Me(91));return wr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function sw(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Me(92));if(vd(r)){if(1<r.length)throw Error(Me(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:qi(r)}}function Z2(e,t){var r=qi(t.value),s=qi(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function aw(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function J2(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ug(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?J2(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ah,e_=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ah=ah||document.createElement("div"),ah.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ah.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Bd(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var jd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gT=["Webkit","ms","Moz","O"];Object.keys(jd).forEach(function(e){gT.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),jd[t]=jd[e]})});function t_(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||jd.hasOwnProperty(e)&&jd[e]?(""+t).trim():t+"px"}function r_(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=t_(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,a):e[r]=a}}var xT=wr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $g(e,t){if(t){if(xT[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Me(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Me(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Me(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Me(62))}}function qg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vg=null;function P0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Wg=null,ec=null,tc=null;function iw(e){if(e=_u(e)){if(typeof Wg!="function")throw Error(Me(280));var t=e.stateNode;t&&(t=nm(t),Wg(e.stateNode,e.type,t))}}function n_(e){ec?tc?tc.push(e):tc=[e]:ec=e}function s_(){if(ec){var e=ec,t=tc;if(tc=ec=null,iw(e),t)for(e=0;e<t.length;e++)iw(t[e])}}function a_(e,t){return e(t)}function i_(){}var Op=!1;function o_(e,t,r){if(Op)return e(t,r);Op=!0;try{return a_(e,t,r)}finally{Op=!1,(ec!==null||tc!==null)&&(i_(),s_())}}function zd(e,t){var r=e.stateNode;if(r===null)return null;var s=nm(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Me(231,t,typeof r));return r}var Hg=!1;if(Xa)try{var ad={};Object.defineProperty(ad,"passive",{get:function(){Hg=!0}}),window.addEventListener("test",ad,ad),window.removeEventListener("test",ad,ad)}catch{Hg=!1}function vT(e,t,r,s,a,o,d,u,f){var p=Array.prototype.slice.call(arguments,3);try{t.apply(r,p)}catch(x){this.onError(x)}}var Cd=!1,af=null,of=!1,Gg=null,wT={onError:function(e){Cd=!0,af=e}};function yT(e,t,r,s,a,o,d,u,f){Cd=!1,af=null,vT.apply(wT,arguments)}function bT(e,t,r,s,a,o,d,u,f){if(yT.apply(this,arguments),Cd){if(Cd){var p=af;Cd=!1,af=null}else throw Error(Me(198));of||(of=!0,Gg=p)}}function ll(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function l_(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ow(e){if(ll(e)!==e)throw Error(Me(188))}function _T(e){var t=e.alternate;if(!t){if(t=ll(e),t===null)throw Error(Me(188));return t!==e?null:e}for(var r=e,s=t;;){var a=r.return;if(a===null)break;var o=a.alternate;if(o===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===r)return ow(a),e;if(o===s)return ow(a),t;o=o.sibling}throw Error(Me(188))}if(r.return!==s.return)r=a,s=o;else{for(var d=!1,u=a.child;u;){if(u===r){d=!0,r=a,s=o;break}if(u===s){d=!0,s=a,r=o;break}u=u.sibling}if(!d){for(u=o.child;u;){if(u===r){d=!0,r=o,s=a;break}if(u===s){d=!0,s=o,r=a;break}u=u.sibling}if(!d)throw Error(Me(189))}}if(r.alternate!==s)throw Error(Me(190))}if(r.tag!==3)throw Error(Me(188));return r.stateNode.current===r?e:t}function c_(e){return e=_T(e),e!==null?d_(e):null}function d_(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=d_(e);if(t!==null)return t;e=e.sibling}return null}var u_=ds.unstable_scheduleCallback,lw=ds.unstable_cancelCallback,NT=ds.unstable_shouldYield,jT=ds.unstable_requestPaint,Sr=ds.unstable_now,CT=ds.unstable_getCurrentPriorityLevel,O0=ds.unstable_ImmediatePriority,h_=ds.unstable_UserBlockingPriority,lf=ds.unstable_NormalPriority,ET=ds.unstable_LowPriority,f_=ds.unstable_IdlePriority,Jf=null,Ea=null;function ST(e){if(Ea&&typeof Ea.onCommitFiberRoot=="function")try{Ea.onCommitFiberRoot(Jf,e,void 0,(e.current.flags&128)===128)}catch{}}var ta=Math.clz32?Math.clz32:TT,AT=Math.log,kT=Math.LN2;function TT(e){return e>>>=0,e===0?32:31-(AT(e)/kT|0)|0}var ih=64,oh=4194304;function wd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function cf(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,a=e.suspendedLanes,o=e.pingedLanes,d=r&268435455;if(d!==0){var u=d&~a;u!==0?s=wd(u):(o&=d,o!==0&&(s=wd(o)))}else d=r&~a,d!==0?s=wd(d):o!==0&&(s=wd(o));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,o=t&-t,a>=o||a===16&&(o&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-ta(t),a=1<<r,s|=e[r],t&=~a;return s}function IT(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function RT(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var d=31-ta(o),u=1<<d,f=a[d];f===-1?(!(u&r)||u&s)&&(a[d]=IT(u,t)):f<=t&&(e.expiredLanes|=u),o&=~u}}function Xg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function m_(){var e=ih;return ih<<=1,!(ih&4194240)&&(ih=64),e}function Dp(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function yu(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ta(t),e[t]=r}function PT(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-ta(r),o=1<<a;t[a]=0,s[a]=-1,e[a]=-1,r&=~o}}function D0(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-ta(r),a=1<<s;a&t|e[s]&t&&(e[s]|=t),r&=~a}}var Gt=0;function p_(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var g_,M0,x_,v_,w_,Kg=!1,lh=[],Pi=null,Oi=null,Di=null,Ud=new Map,$d=new Map,bi=[],OT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cw(e,t){switch(e){case"focusin":case"focusout":Pi=null;break;case"dragenter":case"dragleave":Oi=null;break;case"mouseover":case"mouseout":Di=null;break;case"pointerover":case"pointerout":Ud.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":$d.delete(t.pointerId)}}function id(e,t,r,s,a,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:o,targetContainers:[a]},t!==null&&(t=_u(t),t!==null&&M0(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function DT(e,t,r,s,a){switch(t){case"focusin":return Pi=id(Pi,e,t,r,s,a),!0;case"dragenter":return Oi=id(Oi,e,t,r,s,a),!0;case"mouseover":return Di=id(Di,e,t,r,s,a),!0;case"pointerover":var o=a.pointerId;return Ud.set(o,id(Ud.get(o)||null,e,t,r,s,a)),!0;case"gotpointercapture":return o=a.pointerId,$d.set(o,id($d.get(o)||null,e,t,r,s,a)),!0}return!1}function y_(e){var t=ko(e.target);if(t!==null){var r=ll(t);if(r!==null){if(t=r.tag,t===13){if(t=l_(r),t!==null){e.blockedOn=t,w_(e.priority,function(){x_(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Mh(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Yg(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);Vg=s,r.target.dispatchEvent(s),Vg=null}else return t=_u(r),t!==null&&M0(t),e.blockedOn=r,!1;t.shift()}return!0}function dw(e,t,r){Mh(e)&&r.delete(t)}function MT(){Kg=!1,Pi!==null&&Mh(Pi)&&(Pi=null),Oi!==null&&Mh(Oi)&&(Oi=null),Di!==null&&Mh(Di)&&(Di=null),Ud.forEach(dw),$d.forEach(dw)}function od(e,t){e.blockedOn===t&&(e.blockedOn=null,Kg||(Kg=!0,ds.unstable_scheduleCallback(ds.unstable_NormalPriority,MT)))}function qd(e){function t(a){return od(a,e)}if(0<lh.length){od(lh[0],e);for(var r=1;r<lh.length;r++){var s=lh[r];s.blockedOn===e&&(s.blockedOn=null)}}for(Pi!==null&&od(Pi,e),Oi!==null&&od(Oi,e),Di!==null&&od(Di,e),Ud.forEach(t),$d.forEach(t),r=0;r<bi.length;r++)s=bi[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<bi.length&&(r=bi[0],r.blockedOn===null);)y_(r),r.blockedOn===null&&bi.shift()}var rc=ti.ReactCurrentBatchConfig,df=!0;function LT(e,t,r,s){var a=Gt,o=rc.transition;rc.transition=null;try{Gt=1,L0(e,t,r,s)}finally{Gt=a,rc.transition=o}}function FT(e,t,r,s){var a=Gt,o=rc.transition;rc.transition=null;try{Gt=4,L0(e,t,r,s)}finally{Gt=a,rc.transition=o}}function L0(e,t,r,s){if(df){var a=Yg(e,t,r,s);if(a===null)Wp(e,t,s,uf,r),cw(e,s);else if(DT(a,e,t,r,s))s.stopPropagation();else if(cw(e,s),t&4&&-1<OT.indexOf(e)){for(;a!==null;){var o=_u(a);if(o!==null&&g_(o),o=Yg(e,t,r,s),o===null&&Wp(e,t,s,uf,r),o===a)break;a=o}a!==null&&s.stopPropagation()}else Wp(e,t,s,null,r)}}var uf=null;function Yg(e,t,r,s){if(uf=null,e=P0(s),e=ko(e),e!==null)if(t=ll(e),t===null)e=null;else if(r=t.tag,r===13){if(e=l_(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return uf=e,null}function b_(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(CT()){case O0:return 1;case h_:return 4;case lf:case ET:return 16;case f_:return 536870912;default:return 16}default:return 16}}var Ti=null,F0=null,Lh=null;function __(){if(Lh)return Lh;var e,t=F0,r=t.length,s,a="value"in Ti?Ti.value:Ti.textContent,o=a.length;for(e=0;e<r&&t[e]===a[e];e++);var d=r-e;for(s=1;s<=d&&t[r-s]===a[o-s];s++);return Lh=a.slice(e,1<s?1-s:void 0)}function Fh(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ch(){return!0}function uw(){return!1}function ms(e){function t(r,s,a,o,d){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=o,this.target=d,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(r=e[u],this[u]=r?r(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ch:uw,this.isPropagationStopped=uw,this}return wr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ch)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ch)},persist:function(){},isPersistent:ch}),t}var Mc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},B0=ms(Mc),bu=wr({},Mc,{view:0,detail:0}),BT=ms(bu),Mp,Lp,ld,em=wr({},bu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:z0,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ld&&(ld&&e.type==="mousemove"?(Mp=e.screenX-ld.screenX,Lp=e.screenY-ld.screenY):Lp=Mp=0,ld=e),Mp)},movementY:function(e){return"movementY"in e?e.movementY:Lp}}),hw=ms(em),zT=wr({},em,{dataTransfer:0}),UT=ms(zT),$T=wr({},bu,{relatedTarget:0}),Fp=ms($T),qT=wr({},Mc,{animationName:0,elapsedTime:0,pseudoElement:0}),VT=ms(qT),WT=wr({},Mc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),HT=ms(WT),GT=wr({},Mc,{data:0}),fw=ms(GT),XT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},KT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QT(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=YT[e])?!!t[e]:!1}function z0(){return QT}var ZT=wr({},bu,{key:function(e){if(e.key){var t=XT[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Fh(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?KT[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:z0,charCode:function(e){return e.type==="keypress"?Fh(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Fh(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),JT=ms(ZT),eI=wr({},em,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mw=ms(eI),tI=wr({},bu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:z0}),rI=ms(tI),nI=wr({},Mc,{propertyName:0,elapsedTime:0,pseudoElement:0}),sI=ms(nI),aI=wr({},em,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),iI=ms(aI),oI=[9,13,27,32],U0=Xa&&"CompositionEvent"in window,Ed=null;Xa&&"documentMode"in document&&(Ed=document.documentMode);var lI=Xa&&"TextEvent"in window&&!Ed,N_=Xa&&(!U0||Ed&&8<Ed&&11>=Ed),pw=" ",gw=!1;function j_(e,t){switch(e){case"keyup":return oI.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function C_(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $l=!1;function cI(e,t){switch(e){case"compositionend":return C_(t);case"keypress":return t.which!==32?null:(gw=!0,pw);case"textInput":return e=t.data,e===pw&&gw?null:e;default:return null}}function dI(e,t){if($l)return e==="compositionend"||!U0&&j_(e,t)?(e=__(),Lh=F0=Ti=null,$l=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return N_&&t.locale!=="ko"?null:t.data;default:return null}}var uI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!uI[e.type]:t==="textarea"}function E_(e,t,r,s){n_(s),t=hf(t,"onChange"),0<t.length&&(r=new B0("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Sd=null,Vd=null;function hI(e){L_(e,0)}function tm(e){var t=Wl(e);if(Y2(t))return e}function fI(e,t){if(e==="change")return t}var S_=!1;if(Xa){var Bp;if(Xa){var zp="oninput"in document;if(!zp){var vw=document.createElement("div");vw.setAttribute("oninput","return;"),zp=typeof vw.oninput=="function"}Bp=zp}else Bp=!1;S_=Bp&&(!document.documentMode||9<document.documentMode)}function ww(){Sd&&(Sd.detachEvent("onpropertychange",A_),Vd=Sd=null)}function A_(e){if(e.propertyName==="value"&&tm(Vd)){var t=[];E_(t,Vd,e,P0(e)),o_(hI,t)}}function mI(e,t,r){e==="focusin"?(ww(),Sd=t,Vd=r,Sd.attachEvent("onpropertychange",A_)):e==="focusout"&&ww()}function pI(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return tm(Vd)}function gI(e,t){if(e==="click")return tm(t)}function xI(e,t){if(e==="input"||e==="change")return tm(t)}function vI(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var na=typeof Object.is=="function"?Object.is:vI;function Wd(e,t){if(na(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!Rg.call(t,a)||!na(e[a],t[a]))return!1}return!0}function yw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function bw(e,t){var r=yw(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=yw(r)}}function k_(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?k_(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function T_(){for(var e=window,t=sf();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=sf(e.document)}return t}function $0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function wI(e){var t=T_(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&k_(r.ownerDocument.documentElement,r)){if(s!==null&&$0(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,o=Math.min(s.start,a);s=s.end===void 0?o:Math.min(s.end,a),!e.extend&&o>s&&(a=s,s=o,o=a),a=bw(r,o);var d=bw(r,s);a&&d&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),o>s?(e.addRange(t),e.extend(d.node,d.offset)):(t.setEnd(d.node,d.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var yI=Xa&&"documentMode"in document&&11>=document.documentMode,ql=null,Qg=null,Ad=null,Zg=!1;function _w(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Zg||ql==null||ql!==sf(s)||(s=ql,"selectionStart"in s&&$0(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ad&&Wd(Ad,s)||(Ad=s,s=hf(Qg,"onSelect"),0<s.length&&(t=new B0("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=ql)))}function dh(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Vl={animationend:dh("Animation","AnimationEnd"),animationiteration:dh("Animation","AnimationIteration"),animationstart:dh("Animation","AnimationStart"),transitionend:dh("Transition","TransitionEnd")},Up={},I_={};Xa&&(I_=document.createElement("div").style,"AnimationEvent"in window||(delete Vl.animationend.animation,delete Vl.animationiteration.animation,delete Vl.animationstart.animation),"TransitionEvent"in window||delete Vl.transitionend.transition);function rm(e){if(Up[e])return Up[e];if(!Vl[e])return e;var t=Vl[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in I_)return Up[e]=t[r];return e}var R_=rm("animationend"),P_=rm("animationiteration"),O_=rm("animationstart"),D_=rm("transitionend"),M_=new Map,Nw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ro(e,t){M_.set(e,t),ol(t,[e])}for(var $p=0;$p<Nw.length;$p++){var qp=Nw[$p],bI=qp.toLowerCase(),_I=qp[0].toUpperCase()+qp.slice(1);ro(bI,"on"+_I)}ro(R_,"onAnimationEnd");ro(P_,"onAnimationIteration");ro(O_,"onAnimationStart");ro("dblclick","onDoubleClick");ro("focusin","onFocus");ro("focusout","onBlur");ro(D_,"onTransitionEnd");wc("onMouseEnter",["mouseout","mouseover"]);wc("onMouseLeave",["mouseout","mouseover"]);wc("onPointerEnter",["pointerout","pointerover"]);wc("onPointerLeave",["pointerout","pointerover"]);ol("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ol("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ol("onBeforeInput",["compositionend","keypress","textInput","paste"]);ol("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ol("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ol("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NI=new Set("cancel close invalid load scroll toggle".split(" ").concat(yd));function jw(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,bT(s,t,void 0,e),e.currentTarget=null}function L_(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],a=s.event;s=s.listeners;e:{var o=void 0;if(t)for(var d=s.length-1;0<=d;d--){var u=s[d],f=u.instance,p=u.currentTarget;if(u=u.listener,f!==o&&a.isPropagationStopped())break e;jw(a,u,p),o=f}else for(d=0;d<s.length;d++){if(u=s[d],f=u.instance,p=u.currentTarget,u=u.listener,f!==o&&a.isPropagationStopped())break e;jw(a,u,p),o=f}}}if(of)throw e=Gg,of=!1,Gg=null,e}function or(e,t){var r=t[nx];r===void 0&&(r=t[nx]=new Set);var s=e+"__bubble";r.has(s)||(F_(t,e,2,!1),r.add(s))}function Vp(e,t,r){var s=0;t&&(s|=4),F_(r,e,s,t)}var uh="_reactListening"+Math.random().toString(36).slice(2);function Hd(e){if(!e[uh]){e[uh]=!0,W2.forEach(function(r){r!=="selectionchange"&&(NI.has(r)||Vp(r,!1,e),Vp(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[uh]||(t[uh]=!0,Vp("selectionchange",!1,t))}}function F_(e,t,r,s){switch(b_(t)){case 1:var a=LT;break;case 4:a=FT;break;default:a=L0}r=a.bind(null,t,r,e),a=void 0,!Hg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Wp(e,t,r,s,a){var o=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var d=s.tag;if(d===3||d===4){var u=s.stateNode.containerInfo;if(u===a||u.nodeType===8&&u.parentNode===a)break;if(d===4)for(d=s.return;d!==null;){var f=d.tag;if((f===3||f===4)&&(f=d.stateNode.containerInfo,f===a||f.nodeType===8&&f.parentNode===a))return;d=d.return}for(;u!==null;){if(d=ko(u),d===null)return;if(f=d.tag,f===5||f===6){s=o=d;continue e}u=u.parentNode}}s=s.return}o_(function(){var p=o,x=P0(r),w=[];e:{var _=M_.get(e);if(_!==void 0){var j=B0,N=e;switch(e){case"keypress":if(Fh(r)===0)break e;case"keydown":case"keyup":j=JT;break;case"focusin":N="focus",j=Fp;break;case"focusout":N="blur",j=Fp;break;case"beforeblur":case"afterblur":j=Fp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=hw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=UT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=rI;break;case R_:case P_:case O_:j=VT;break;case D_:j=sI;break;case"scroll":j=BT;break;case"wheel":j=iI;break;case"copy":case"cut":case"paste":j=HT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=mw}var C=(t&4)!==0,A=!C&&e==="scroll",S=C?_!==null?_+"Capture":null:_;C=[];for(var k=p,b;k!==null;){b=k;var T=b.stateNode;if(b.tag===5&&T!==null&&(b=T,S!==null&&(T=zd(k,S),T!=null&&C.push(Gd(k,T,b)))),A)break;k=k.return}0<C.length&&(_=new j(_,N,null,r,x),w.push({event:_,listeners:C}))}}if(!(t&7)){e:{if(_=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",_&&r!==Vg&&(N=r.relatedTarget||r.fromElement)&&(ko(N)||N[Ka]))break e;if((j||_)&&(_=x.window===x?x:(_=x.ownerDocument)?_.defaultView||_.parentWindow:window,j?(N=r.relatedTarget||r.toElement,j=p,N=N?ko(N):null,N!==null&&(A=ll(N),N!==A||N.tag!==5&&N.tag!==6)&&(N=null)):(j=null,N=p),j!==N)){if(C=hw,T="onMouseLeave",S="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(C=mw,T="onPointerLeave",S="onPointerEnter",k="pointer"),A=j==null?_:Wl(j),b=N==null?_:Wl(N),_=new C(T,k+"leave",j,r,x),_.target=A,_.relatedTarget=b,T=null,ko(x)===p&&(C=new C(S,k+"enter",N,r,x),C.target=b,C.relatedTarget=A,T=C),A=T,j&&N)t:{for(C=j,S=N,k=0,b=C;b;b=Cl(b))k++;for(b=0,T=S;T;T=Cl(T))b++;for(;0<k-b;)C=Cl(C),k--;for(;0<b-k;)S=Cl(S),b--;for(;k--;){if(C===S||S!==null&&C===S.alternate)break t;C=Cl(C),S=Cl(S)}C=null}else C=null;j!==null&&Cw(w,_,j,C,!1),N!==null&&A!==null&&Cw(w,A,N,C,!0)}}e:{if(_=p?Wl(p):window,j=_.nodeName&&_.nodeName.toLowerCase(),j==="select"||j==="input"&&_.type==="file")var O=fI;else if(xw(_))if(S_)O=xI;else{O=pI;var L=mI}else(j=_.nodeName)&&j.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(O=gI);if(O&&(O=O(e,p))){E_(w,O,r,x);break e}L&&L(e,_,p),e==="focusout"&&(L=_._wrapperState)&&L.controlled&&_.type==="number"&&Bg(_,"number",_.value)}switch(L=p?Wl(p):window,e){case"focusin":(xw(L)||L.contentEditable==="true")&&(ql=L,Qg=p,Ad=null);break;case"focusout":Ad=Qg=ql=null;break;case"mousedown":Zg=!0;break;case"contextmenu":case"mouseup":case"dragend":Zg=!1,_w(w,r,x);break;case"selectionchange":if(yI)break;case"keydown":case"keyup":_w(w,r,x)}var R;if(U0)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else $l?j_(e,r)&&(M="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(M="onCompositionStart");M&&(N_&&r.locale!=="ko"&&($l||M!=="onCompositionStart"?M==="onCompositionEnd"&&$l&&(R=__()):(Ti=x,F0="value"in Ti?Ti.value:Ti.textContent,$l=!0)),L=hf(p,M),0<L.length&&(M=new fw(M,e,null,r,x),w.push({event:M,listeners:L}),R?M.data=R:(R=C_(r),R!==null&&(M.data=R)))),(R=lI?cI(e,r):dI(e,r))&&(p=hf(p,"onBeforeInput"),0<p.length&&(x=new fw("onBeforeInput","beforeinput",null,r,x),w.push({event:x,listeners:p}),x.data=R))}L_(w,t)})}function Gd(e,t,r){return{instance:e,listener:t,currentTarget:r}}function hf(e,t){for(var r=t+"Capture",s=[];e!==null;){var a=e,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=zd(e,r),o!=null&&s.unshift(Gd(e,o,a)),o=zd(e,t),o!=null&&s.push(Gd(e,o,a))),e=e.return}return s}function Cl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Cw(e,t,r,s,a){for(var o=t._reactName,d=[];r!==null&&r!==s;){var u=r,f=u.alternate,p=u.stateNode;if(f!==null&&f===s)break;u.tag===5&&p!==null&&(u=p,a?(f=zd(r,o),f!=null&&d.unshift(Gd(r,f,u))):a||(f=zd(r,o),f!=null&&d.push(Gd(r,f,u)))),r=r.return}d.length!==0&&e.push({event:t,listeners:d})}var jI=/\r\n?/g,CI=/\u0000|\uFFFD/g;function Ew(e){return(typeof e=="string"?e:""+e).replace(jI,`
`).replace(CI,"")}function hh(e,t,r){if(t=Ew(t),Ew(e)!==t&&r)throw Error(Me(425))}function ff(){}var Jg=null,ex=null;function tx(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var rx=typeof setTimeout=="function"?setTimeout:void 0,EI=typeof clearTimeout=="function"?clearTimeout:void 0,Sw=typeof Promise=="function"?Promise:void 0,SI=typeof queueMicrotask=="function"?queueMicrotask:typeof Sw<"u"?function(e){return Sw.resolve(null).then(e).catch(AI)}:rx;function AI(e){setTimeout(function(){throw e})}function Hp(e,t){var r=t,s=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){e.removeChild(a),qd(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);qd(t)}function Mi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Aw(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Lc=Math.random().toString(36).slice(2),wa="__reactFiber$"+Lc,Xd="__reactProps$"+Lc,Ka="__reactContainer$"+Lc,nx="__reactEvents$"+Lc,kI="__reactListeners$"+Lc,TI="__reactHandles$"+Lc;function ko(e){var t=e[wa];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ka]||r[wa]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Aw(e);e!==null;){if(r=e[wa])return r;e=Aw(e)}return t}e=r,r=e.parentNode}return null}function _u(e){return e=e[wa]||e[Ka],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Wl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Me(33))}function nm(e){return e[Xd]||null}var sx=[],Hl=-1;function no(e){return{current:e}}function cr(e){0>Hl||(e.current=sx[Hl],sx[Hl]=null,Hl--)}function sr(e,t){Hl++,sx[Hl]=e.current,e.current=t}var Vi={},yn=no(Vi),Vn=no(!1),qo=Vi;function yc(e,t){var r=e.type.contextTypes;if(!r)return Vi;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in r)a[o]=t[o];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Wn(e){return e=e.childContextTypes,e!=null}function mf(){cr(Vn),cr(yn)}function kw(e,t,r){if(yn.current!==Vi)throw Error(Me(168));sr(yn,t),sr(Vn,r)}function B_(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(Me(108,mT(e)||"Unknown",a));return wr({},r,s)}function pf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vi,qo=yn.current,sr(yn,e),sr(Vn,Vn.current),!0}function Tw(e,t,r){var s=e.stateNode;if(!s)throw Error(Me(169));r?(e=B_(e,t,qo),s.__reactInternalMemoizedMergedChildContext=e,cr(Vn),cr(yn),sr(yn,e)):cr(Vn),sr(Vn,r)}var $a=null,sm=!1,Gp=!1;function z_(e){$a===null?$a=[e]:$a.push(e)}function II(e){sm=!0,z_(e)}function so(){if(!Gp&&$a!==null){Gp=!0;var e=0,t=Gt;try{var r=$a;for(Gt=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}$a=null,sm=!1}catch(a){throw $a!==null&&($a=$a.slice(e+1)),u_(O0,so),a}finally{Gt=t,Gp=!1}}return null}var Gl=[],Xl=0,gf=null,xf=0,js=[],Cs=0,Vo=null,Va=1,Wa="";function bo(e,t){Gl[Xl++]=xf,Gl[Xl++]=gf,gf=e,xf=t}function U_(e,t,r){js[Cs++]=Va,js[Cs++]=Wa,js[Cs++]=Vo,Vo=e;var s=Va;e=Wa;var a=32-ta(s)-1;s&=~(1<<a),r+=1;var o=32-ta(t)+a;if(30<o){var d=a-a%5;o=(s&(1<<d)-1).toString(32),s>>=d,a-=d,Va=1<<32-ta(t)+a|r<<a|s,Wa=o+e}else Va=1<<o|r<<a|s,Wa=e}function q0(e){e.return!==null&&(bo(e,1),U_(e,1,0))}function V0(e){for(;e===gf;)gf=Gl[--Xl],Gl[Xl]=null,xf=Gl[--Xl],Gl[Xl]=null;for(;e===Vo;)Vo=js[--Cs],js[Cs]=null,Wa=js[--Cs],js[Cs]=null,Va=js[--Cs],js[Cs]=null}var ls=null,ns=null,fr=!1,Qs=null;function $_(e,t){var r=As(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Iw(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ls=e,ns=Mi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ls=e,ns=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Vo!==null?{id:Va,overflow:Wa}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=As(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ls=e,ns=null,!0):!1;default:return!1}}function ax(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ix(e){if(fr){var t=ns;if(t){var r=t;if(!Iw(e,t)){if(ax(e))throw Error(Me(418));t=Mi(r.nextSibling);var s=ls;t&&Iw(e,t)?$_(s,r):(e.flags=e.flags&-4097|2,fr=!1,ls=e)}}else{if(ax(e))throw Error(Me(418));e.flags=e.flags&-4097|2,fr=!1,ls=e}}}function Rw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ls=e}function fh(e){if(e!==ls)return!1;if(!fr)return Rw(e),fr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!tx(e.type,e.memoizedProps)),t&&(t=ns)){if(ax(e))throw q_(),Error(Me(418));for(;t;)$_(e,t),t=Mi(t.nextSibling)}if(Rw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Me(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ns=Mi(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ns=null}}else ns=ls?Mi(e.stateNode.nextSibling):null;return!0}function q_(){for(var e=ns;e;)e=Mi(e.nextSibling)}function bc(){ns=ls=null,fr=!1}function W0(e){Qs===null?Qs=[e]:Qs.push(e)}var RI=ti.ReactCurrentBatchConfig;function cd(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Me(309));var s=r.stateNode}if(!s)throw Error(Me(147,e));var a=s,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(d){var u=a.refs;d===null?delete u[o]:u[o]=d},t._stringRef=o,t)}if(typeof e!="string")throw Error(Me(284));if(!r._owner)throw Error(Me(290,e))}return e}function mh(e,t){throw e=Object.prototype.toString.call(t),Error(Me(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Pw(e){var t=e._init;return t(e._payload)}function V_(e){function t(S,k){if(e){var b=S.deletions;b===null?(S.deletions=[k],S.flags|=16):b.push(k)}}function r(S,k){if(!e)return null;for(;k!==null;)t(S,k),k=k.sibling;return null}function s(S,k){for(S=new Map;k!==null;)k.key!==null?S.set(k.key,k):S.set(k.index,k),k=k.sibling;return S}function a(S,k){return S=zi(S,k),S.index=0,S.sibling=null,S}function o(S,k,b){return S.index=b,e?(b=S.alternate,b!==null?(b=b.index,b<k?(S.flags|=2,k):b):(S.flags|=2,k)):(S.flags|=1048576,k)}function d(S){return e&&S.alternate===null&&(S.flags|=2),S}function u(S,k,b,T){return k===null||k.tag!==6?(k=eg(b,S.mode,T),k.return=S,k):(k=a(k,b),k.return=S,k)}function f(S,k,b,T){var O=b.type;return O===Ul?x(S,k,b.props.children,T,b.key):k!==null&&(k.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===wi&&Pw(O)===k.type)?(T=a(k,b.props),T.ref=cd(S,k,b),T.return=S,T):(T=Wh(b.type,b.key,b.props,null,S.mode,T),T.ref=cd(S,k,b),T.return=S,T)}function p(S,k,b,T){return k===null||k.tag!==4||k.stateNode.containerInfo!==b.containerInfo||k.stateNode.implementation!==b.implementation?(k=tg(b,S.mode,T),k.return=S,k):(k=a(k,b.children||[]),k.return=S,k)}function x(S,k,b,T,O){return k===null||k.tag!==7?(k=zo(b,S.mode,T,O),k.return=S,k):(k=a(k,b),k.return=S,k)}function w(S,k,b){if(typeof k=="string"&&k!==""||typeof k=="number")return k=eg(""+k,S.mode,b),k.return=S,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case nh:return b=Wh(k.type,k.key,k.props,null,S.mode,b),b.ref=cd(S,null,k),b.return=S,b;case zl:return k=tg(k,S.mode,b),k.return=S,k;case wi:var T=k._init;return w(S,T(k._payload),b)}if(vd(k)||sd(k))return k=zo(k,S.mode,b,null),k.return=S,k;mh(S,k)}return null}function _(S,k,b,T){var O=k!==null?k.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return O!==null?null:u(S,k,""+b,T);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case nh:return b.key===O?f(S,k,b,T):null;case zl:return b.key===O?p(S,k,b,T):null;case wi:return O=b._init,_(S,k,O(b._payload),T)}if(vd(b)||sd(b))return O!==null?null:x(S,k,b,T,null);mh(S,b)}return null}function j(S,k,b,T,O){if(typeof T=="string"&&T!==""||typeof T=="number")return S=S.get(b)||null,u(k,S,""+T,O);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case nh:return S=S.get(T.key===null?b:T.key)||null,f(k,S,T,O);case zl:return S=S.get(T.key===null?b:T.key)||null,p(k,S,T,O);case wi:var L=T._init;return j(S,k,b,L(T._payload),O)}if(vd(T)||sd(T))return S=S.get(b)||null,x(k,S,T,O,null);mh(k,T)}return null}function N(S,k,b,T){for(var O=null,L=null,R=k,M=k=0,P=null;R!==null&&M<b.length;M++){R.index>M?(P=R,R=null):P=R.sibling;var q=_(S,R,b[M],T);if(q===null){R===null&&(R=P);break}e&&R&&q.alternate===null&&t(S,R),k=o(q,k,M),L===null?O=q:L.sibling=q,L=q,R=P}if(M===b.length)return r(S,R),fr&&bo(S,M),O;if(R===null){for(;M<b.length;M++)R=w(S,b[M],T),R!==null&&(k=o(R,k,M),L===null?O=R:L.sibling=R,L=R);return fr&&bo(S,M),O}for(R=s(S,R);M<b.length;M++)P=j(R,S,M,b[M],T),P!==null&&(e&&P.alternate!==null&&R.delete(P.key===null?M:P.key),k=o(P,k,M),L===null?O=P:L.sibling=P,L=P);return e&&R.forEach(function(G){return t(S,G)}),fr&&bo(S,M),O}function C(S,k,b,T){var O=sd(b);if(typeof O!="function")throw Error(Me(150));if(b=O.call(b),b==null)throw Error(Me(151));for(var L=O=null,R=k,M=k=0,P=null,q=b.next();R!==null&&!q.done;M++,q=b.next()){R.index>M?(P=R,R=null):P=R.sibling;var G=_(S,R,q.value,T);if(G===null){R===null&&(R=P);break}e&&R&&G.alternate===null&&t(S,R),k=o(G,k,M),L===null?O=G:L.sibling=G,L=G,R=P}if(q.done)return r(S,R),fr&&bo(S,M),O;if(R===null){for(;!q.done;M++,q=b.next())q=w(S,q.value,T),q!==null&&(k=o(q,k,M),L===null?O=q:L.sibling=q,L=q);return fr&&bo(S,M),O}for(R=s(S,R);!q.done;M++,q=b.next())q=j(R,S,M,q.value,T),q!==null&&(e&&q.alternate!==null&&R.delete(q.key===null?M:q.key),k=o(q,k,M),L===null?O=q:L.sibling=q,L=q);return e&&R.forEach(function(B){return t(S,B)}),fr&&bo(S,M),O}function A(S,k,b,T){if(typeof b=="object"&&b!==null&&b.type===Ul&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case nh:e:{for(var O=b.key,L=k;L!==null;){if(L.key===O){if(O=b.type,O===Ul){if(L.tag===7){r(S,L.sibling),k=a(L,b.props.children),k.return=S,S=k;break e}}else if(L.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===wi&&Pw(O)===L.type){r(S,L.sibling),k=a(L,b.props),k.ref=cd(S,L,b),k.return=S,S=k;break e}r(S,L);break}else t(S,L);L=L.sibling}b.type===Ul?(k=zo(b.props.children,S.mode,T,b.key),k.return=S,S=k):(T=Wh(b.type,b.key,b.props,null,S.mode,T),T.ref=cd(S,k,b),T.return=S,S=T)}return d(S);case zl:e:{for(L=b.key;k!==null;){if(k.key===L)if(k.tag===4&&k.stateNode.containerInfo===b.containerInfo&&k.stateNode.implementation===b.implementation){r(S,k.sibling),k=a(k,b.children||[]),k.return=S,S=k;break e}else{r(S,k);break}else t(S,k);k=k.sibling}k=tg(b,S.mode,T),k.return=S,S=k}return d(S);case wi:return L=b._init,A(S,k,L(b._payload),T)}if(vd(b))return N(S,k,b,T);if(sd(b))return C(S,k,b,T);mh(S,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,k!==null&&k.tag===6?(r(S,k.sibling),k=a(k,b),k.return=S,S=k):(r(S,k),k=eg(b,S.mode,T),k.return=S,S=k),d(S)):r(S,k)}return A}var _c=V_(!0),W_=V_(!1),vf=no(null),wf=null,Kl=null,H0=null;function G0(){H0=Kl=wf=null}function X0(e){var t=vf.current;cr(vf),e._currentValue=t}function ox(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function nc(e,t){wf=e,H0=Kl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(qn=!0),e.firstContext=null)}function Rs(e){var t=e._currentValue;if(H0!==e)if(e={context:e,memoizedValue:t,next:null},Kl===null){if(wf===null)throw Error(Me(308));Kl=e,wf.dependencies={lanes:0,firstContext:e}}else Kl=Kl.next=e;return t}var To=null;function K0(e){To===null?To=[e]:To.push(e)}function H_(e,t,r,s){var a=t.interleaved;return a===null?(r.next=r,K0(t)):(r.next=a.next,a.next=r),t.interleaved=r,Ya(e,s)}function Ya(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var yi=!1;function Y0(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function G_(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ha(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Li(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Mt&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,Ya(e,r)}return a=s.interleaved,a===null?(t.next=t,K0(s)):(t.next=a.next,a.next=t),s.interleaved=t,Ya(e,r)}function Bh(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,D0(e,r)}}function Ow(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var d={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?a=o=d:o=o.next=d,r=r.next}while(r!==null);o===null?a=o=t:o=o.next=t}else a=o=t;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function yf(e,t,r,s){var a=e.updateQueue;yi=!1;var o=a.firstBaseUpdate,d=a.lastBaseUpdate,u=a.shared.pending;if(u!==null){a.shared.pending=null;var f=u,p=f.next;f.next=null,d===null?o=p:d.next=p,d=f;var x=e.alternate;x!==null&&(x=x.updateQueue,u=x.lastBaseUpdate,u!==d&&(u===null?x.firstBaseUpdate=p:u.next=p,x.lastBaseUpdate=f))}if(o!==null){var w=a.baseState;d=0,x=p=f=null,u=o;do{var _=u.lane,j=u.eventTime;if((s&_)===_){x!==null&&(x=x.next={eventTime:j,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var N=e,C=u;switch(_=t,j=r,C.tag){case 1:if(N=C.payload,typeof N=="function"){w=N.call(j,w,_);break e}w=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=C.payload,_=typeof N=="function"?N.call(j,w,_):N,_==null)break e;w=wr({},w,_);break e;case 2:yi=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,_=a.effects,_===null?a.effects=[u]:_.push(u))}else j={eventTime:j,lane:_,tag:u.tag,payload:u.payload,callback:u.callback,next:null},x===null?(p=x=j,f=w):x=x.next=j,d|=_;if(u=u.next,u===null){if(u=a.shared.pending,u===null)break;_=u,u=_.next,_.next=null,a.lastBaseUpdate=_,a.shared.pending=null}}while(!0);if(x===null&&(f=w),a.baseState=f,a.firstBaseUpdate=p,a.lastBaseUpdate=x,t=a.shared.interleaved,t!==null){a=t;do d|=a.lane,a=a.next;while(a!==t)}else o===null&&(a.shared.lanes=0);Ho|=d,e.lanes=d,e.memoizedState=w}}function Dw(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(Me(191,a));a.call(s)}}}var Nu={},Sa=no(Nu),Kd=no(Nu),Yd=no(Nu);function Io(e){if(e===Nu)throw Error(Me(174));return e}function Q0(e,t){switch(sr(Yd,t),sr(Kd,e),sr(Sa,Nu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ug(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ug(t,e)}cr(Sa),sr(Sa,t)}function Nc(){cr(Sa),cr(Kd),cr(Yd)}function X_(e){Io(Yd.current);var t=Io(Sa.current),r=Ug(t,e.type);t!==r&&(sr(Kd,e),sr(Sa,r))}function Z0(e){Kd.current===e&&(cr(Sa),cr(Kd))}var pr=no(0);function bf(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Xp=[];function J0(){for(var e=0;e<Xp.length;e++)Xp[e]._workInProgressVersionPrimary=null;Xp.length=0}var zh=ti.ReactCurrentDispatcher,Kp=ti.ReactCurrentBatchConfig,Wo=0,vr=null,Br=null,Yr=null,_f=!1,kd=!1,Qd=0,PI=0;function xn(){throw Error(Me(321))}function e1(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!na(e[r],t[r]))return!1;return!0}function t1(e,t,r,s,a,o){if(Wo=o,vr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,zh.current=e===null||e.memoizedState===null?LI:FI,e=r(s,a),kd){o=0;do{if(kd=!1,Qd=0,25<=o)throw Error(Me(301));o+=1,Yr=Br=null,t.updateQueue=null,zh.current=BI,e=r(s,a)}while(kd)}if(zh.current=Nf,t=Br!==null&&Br.next!==null,Wo=0,Yr=Br=vr=null,_f=!1,t)throw Error(Me(300));return e}function r1(){var e=Qd!==0;return Qd=0,e}function ma(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yr===null?vr.memoizedState=Yr=e:Yr=Yr.next=e,Yr}function Ps(){if(Br===null){var e=vr.alternate;e=e!==null?e.memoizedState:null}else e=Br.next;var t=Yr===null?vr.memoizedState:Yr.next;if(t!==null)Yr=t,Br=e;else{if(e===null)throw Error(Me(310));Br=e,e={memoizedState:Br.memoizedState,baseState:Br.baseState,baseQueue:Br.baseQueue,queue:Br.queue,next:null},Yr===null?vr.memoizedState=Yr=e:Yr=Yr.next=e}return Yr}function Zd(e,t){return typeof t=="function"?t(e):t}function Yp(e){var t=Ps(),r=t.queue;if(r===null)throw Error(Me(311));r.lastRenderedReducer=e;var s=Br,a=s.baseQueue,o=r.pending;if(o!==null){if(a!==null){var d=a.next;a.next=o.next,o.next=d}s.baseQueue=a=o,r.pending=null}if(a!==null){o=a.next,s=s.baseState;var u=d=null,f=null,p=o;do{var x=p.lane;if((Wo&x)===x)f!==null&&(f=f.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),s=p.hasEagerState?p.eagerState:e(s,p.action);else{var w={lane:x,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};f===null?(u=f=w,d=s):f=f.next=w,vr.lanes|=x,Ho|=x}p=p.next}while(p!==null&&p!==o);f===null?d=s:f.next=u,na(s,t.memoizedState)||(qn=!0),t.memoizedState=s,t.baseState=d,t.baseQueue=f,r.lastRenderedState=s}if(e=r.interleaved,e!==null){a=e;do o=a.lane,vr.lanes|=o,Ho|=o,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Qp(e){var t=Ps(),r=t.queue;if(r===null)throw Error(Me(311));r.lastRenderedReducer=e;var s=r.dispatch,a=r.pending,o=t.memoizedState;if(a!==null){r.pending=null;var d=a=a.next;do o=e(o,d.action),d=d.next;while(d!==a);na(o,t.memoizedState)||(qn=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,s]}function K_(){}function Y_(e,t){var r=vr,s=Ps(),a=t(),o=!na(s.memoizedState,a);if(o&&(s.memoizedState=a,qn=!0),s=s.queue,n1(J_.bind(null,r,s,e),[e]),s.getSnapshot!==t||o||Yr!==null&&Yr.memoizedState.tag&1){if(r.flags|=2048,Jd(9,Z_.bind(null,r,s,a,t),void 0,null),Zr===null)throw Error(Me(349));Wo&30||Q_(r,t,a)}return a}function Q_(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=vr.updateQueue,t===null?(t={lastEffect:null,stores:null},vr.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Z_(e,t,r,s){t.value=r,t.getSnapshot=s,eN(t)&&tN(e)}function J_(e,t,r){return r(function(){eN(t)&&tN(e)})}function eN(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!na(e,r)}catch{return!0}}function tN(e){var t=Ya(e,1);t!==null&&ra(t,e,1,-1)}function Mw(e){var t=ma();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zd,lastRenderedState:e},t.queue=e,e=e.dispatch=MI.bind(null,vr,e),[t.memoizedState,e]}function Jd(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=vr.updateQueue,t===null?(t={lastEffect:null,stores:null},vr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function rN(){return Ps().memoizedState}function Uh(e,t,r,s){var a=ma();vr.flags|=e,a.memoizedState=Jd(1|t,r,void 0,s===void 0?null:s)}function am(e,t,r,s){var a=Ps();s=s===void 0?null:s;var o=void 0;if(Br!==null){var d=Br.memoizedState;if(o=d.destroy,s!==null&&e1(s,d.deps)){a.memoizedState=Jd(t,r,o,s);return}}vr.flags|=e,a.memoizedState=Jd(1|t,r,o,s)}function Lw(e,t){return Uh(8390656,8,e,t)}function n1(e,t){return am(2048,8,e,t)}function nN(e,t){return am(4,2,e,t)}function sN(e,t){return am(4,4,e,t)}function aN(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function iN(e,t,r){return r=r!=null?r.concat([e]):null,am(4,4,aN.bind(null,t,e),r)}function s1(){}function oN(e,t){var r=Ps();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&e1(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function lN(e,t){var r=Ps();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&e1(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function cN(e,t,r){return Wo&21?(na(r,t)||(r=m_(),vr.lanes|=r,Ho|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,qn=!0),e.memoizedState=r)}function OI(e,t){var r=Gt;Gt=r!==0&&4>r?r:4,e(!0);var s=Kp.transition;Kp.transition={};try{e(!1),t()}finally{Gt=r,Kp.transition=s}}function dN(){return Ps().memoizedState}function DI(e,t,r){var s=Bi(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},uN(e))hN(t,r);else if(r=H_(e,t,r,s),r!==null){var a=En();ra(r,e,s,a),fN(r,t,s)}}function MI(e,t,r){var s=Bi(e),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(uN(e))hN(t,a);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var d=t.lastRenderedState,u=o(d,r);if(a.hasEagerState=!0,a.eagerState=u,na(u,d)){var f=t.interleaved;f===null?(a.next=a,K0(t)):(a.next=f.next,f.next=a),t.interleaved=a;return}}catch{}finally{}r=H_(e,t,a,s),r!==null&&(a=En(),ra(r,e,s,a),fN(r,t,s))}}function uN(e){var t=e.alternate;return e===vr||t!==null&&t===vr}function hN(e,t){kd=_f=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function fN(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,D0(e,r)}}var Nf={readContext:Rs,useCallback:xn,useContext:xn,useEffect:xn,useImperativeHandle:xn,useInsertionEffect:xn,useLayoutEffect:xn,useMemo:xn,useReducer:xn,useRef:xn,useState:xn,useDebugValue:xn,useDeferredValue:xn,useTransition:xn,useMutableSource:xn,useSyncExternalStore:xn,useId:xn,unstable_isNewReconciler:!1},LI={readContext:Rs,useCallback:function(e,t){return ma().memoizedState=[e,t===void 0?null:t],e},useContext:Rs,useEffect:Lw,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Uh(4194308,4,aN.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Uh(4194308,4,e,t)},useInsertionEffect:function(e,t){return Uh(4,2,e,t)},useMemo:function(e,t){var r=ma();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=ma();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=DI.bind(null,vr,e),[s.memoizedState,e]},useRef:function(e){var t=ma();return e={current:e},t.memoizedState=e},useState:Mw,useDebugValue:s1,useDeferredValue:function(e){return ma().memoizedState=e},useTransition:function(){var e=Mw(!1),t=e[0];return e=OI.bind(null,e[1]),ma().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=vr,a=ma();if(fr){if(r===void 0)throw Error(Me(407));r=r()}else{if(r=t(),Zr===null)throw Error(Me(349));Wo&30||Q_(s,t,r)}a.memoizedState=r;var o={value:r,getSnapshot:t};return a.queue=o,Lw(J_.bind(null,s,o,e),[e]),s.flags|=2048,Jd(9,Z_.bind(null,s,o,r,t),void 0,null),r},useId:function(){var e=ma(),t=Zr.identifierPrefix;if(fr){var r=Wa,s=Va;r=(s&~(1<<32-ta(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=Qd++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=PI++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},FI={readContext:Rs,useCallback:oN,useContext:Rs,useEffect:n1,useImperativeHandle:iN,useInsertionEffect:nN,useLayoutEffect:sN,useMemo:lN,useReducer:Yp,useRef:rN,useState:function(){return Yp(Zd)},useDebugValue:s1,useDeferredValue:function(e){var t=Ps();return cN(t,Br.memoizedState,e)},useTransition:function(){var e=Yp(Zd)[0],t=Ps().memoizedState;return[e,t]},useMutableSource:K_,useSyncExternalStore:Y_,useId:dN,unstable_isNewReconciler:!1},BI={readContext:Rs,useCallback:oN,useContext:Rs,useEffect:n1,useImperativeHandle:iN,useInsertionEffect:nN,useLayoutEffect:sN,useMemo:lN,useReducer:Qp,useRef:rN,useState:function(){return Qp(Zd)},useDebugValue:s1,useDeferredValue:function(e){var t=Ps();return Br===null?t.memoizedState=e:cN(t,Br.memoizedState,e)},useTransition:function(){var e=Qp(Zd)[0],t=Ps().memoizedState;return[e,t]},useMutableSource:K_,useSyncExternalStore:Y_,useId:dN,unstable_isNewReconciler:!1};function Ws(e,t){if(e&&e.defaultProps){t=wr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function lx(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:wr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var im={isMounted:function(e){return(e=e._reactInternals)?ll(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=En(),a=Bi(e),o=Ha(s,a);o.payload=t,r!=null&&(o.callback=r),t=Li(e,o,a),t!==null&&(ra(t,e,a,s),Bh(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=En(),a=Bi(e),o=Ha(s,a);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=Li(e,o,a),t!==null&&(ra(t,e,a,s),Bh(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=En(),s=Bi(e),a=Ha(r,s);a.tag=2,t!=null&&(a.callback=t),t=Li(e,a,s),t!==null&&(ra(t,e,s,r),Bh(t,e,s))}};function Fw(e,t,r,s,a,o,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,o,d):t.prototype&&t.prototype.isPureReactComponent?!Wd(r,s)||!Wd(a,o):!0}function mN(e,t,r){var s=!1,a=Vi,o=t.contextType;return typeof o=="object"&&o!==null?o=Rs(o):(a=Wn(t)?qo:yn.current,s=t.contextTypes,o=(s=s!=null)?yc(e,a):Vi),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=im,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function Bw(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&im.enqueueReplaceState(t,t.state,null)}function cx(e,t,r,s){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Y0(e);var o=t.contextType;typeof o=="object"&&o!==null?a.context=Rs(o):(o=Wn(t)?qo:yn.current,a.context=yc(e,o)),a.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(lx(e,t,o,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&im.enqueueReplaceState(a,a.state,null),yf(e,r,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function jc(e,t){try{var r="",s=t;do r+=fT(s),s=s.return;while(s);var a=r}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:a,digest:null}}function Zp(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function dx(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var zI=typeof WeakMap=="function"?WeakMap:Map;function pN(e,t,r){r=Ha(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){Cf||(Cf=!0,yx=s),dx(e,t)},r}function gN(e,t,r){r=Ha(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;r.payload=function(){return s(a)},r.callback=function(){dx(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){dx(e,t),typeof s!="function"&&(Fi===null?Fi=new Set([this]):Fi.add(this));var d=t.stack;this.componentDidCatch(t.value,{componentStack:d!==null?d:""})}),r}function zw(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new zI;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(r)||(a.add(r),e=eR.bind(null,e,t,r),t.then(e,e))}function Uw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function $w(e,t,r,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ha(-1,1),t.tag=2,Li(r,t,1))),r.lanes|=1),e)}var UI=ti.ReactCurrentOwner,qn=!1;function Nn(e,t,r,s){t.child=e===null?W_(t,null,r,s):_c(t,e.child,r,s)}function qw(e,t,r,s,a){r=r.render;var o=t.ref;return nc(t,a),s=t1(e,t,r,s,o,a),r=r1(),e!==null&&!qn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Qa(e,t,a)):(fr&&r&&q0(t),t.flags|=1,Nn(e,t,s,a),t.child)}function Vw(e,t,r,s,a){if(e===null){var o=r.type;return typeof o=="function"&&!h1(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,xN(e,t,o,s,a)):(e=Wh(r.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&a)){var d=o.memoizedProps;if(r=r.compare,r=r!==null?r:Wd,r(d,s)&&e.ref===t.ref)return Qa(e,t,a)}return t.flags|=1,e=zi(o,s),e.ref=t.ref,e.return=t,t.child=e}function xN(e,t,r,s,a){if(e!==null){var o=e.memoizedProps;if(Wd(o,s)&&e.ref===t.ref)if(qn=!1,t.pendingProps=s=o,(e.lanes&a)!==0)e.flags&131072&&(qn=!0);else return t.lanes=e.lanes,Qa(e,t,a)}return ux(e,t,r,s,a)}function vN(e,t,r){var s=t.pendingProps,a=s.children,o=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},sr(Ql,es),es|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,sr(Ql,es),es|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=o!==null?o.baseLanes:r,sr(Ql,es),es|=s}else o!==null?(s=o.baseLanes|r,t.memoizedState=null):s=r,sr(Ql,es),es|=s;return Nn(e,t,a,r),t.child}function wN(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ux(e,t,r,s,a){var o=Wn(r)?qo:yn.current;return o=yc(t,o),nc(t,a),r=t1(e,t,r,s,o,a),s=r1(),e!==null&&!qn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Qa(e,t,a)):(fr&&s&&q0(t),t.flags|=1,Nn(e,t,r,a),t.child)}function Ww(e,t,r,s,a){if(Wn(r)){var o=!0;pf(t)}else o=!1;if(nc(t,a),t.stateNode===null)$h(e,t),mN(t,r,s),cx(t,r,s,a),s=!0;else if(e===null){var d=t.stateNode,u=t.memoizedProps;d.props=u;var f=d.context,p=r.contextType;typeof p=="object"&&p!==null?p=Rs(p):(p=Wn(r)?qo:yn.current,p=yc(t,p));var x=r.getDerivedStateFromProps,w=typeof x=="function"||typeof d.getSnapshotBeforeUpdate=="function";w||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(u!==s||f!==p)&&Bw(t,d,s,p),yi=!1;var _=t.memoizedState;d.state=_,yf(t,s,d,a),f=t.memoizedState,u!==s||_!==f||Vn.current||yi?(typeof x=="function"&&(lx(t,r,x,s),f=t.memoizedState),(u=yi||Fw(t,r,u,s,_,f,p))?(w||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=f),d.props=s,d.state=f,d.context=p,s=u):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{d=t.stateNode,G_(e,t),u=t.memoizedProps,p=t.type===t.elementType?u:Ws(t.type,u),d.props=p,w=t.pendingProps,_=d.context,f=r.contextType,typeof f=="object"&&f!==null?f=Rs(f):(f=Wn(r)?qo:yn.current,f=yc(t,f));var j=r.getDerivedStateFromProps;(x=typeof j=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(u!==w||_!==f)&&Bw(t,d,s,f),yi=!1,_=t.memoizedState,d.state=_,yf(t,s,d,a);var N=t.memoizedState;u!==w||_!==N||Vn.current||yi?(typeof j=="function"&&(lx(t,r,j,s),N=t.memoizedState),(p=yi||Fw(t,r,p,s,_,N,f)||!1)?(x||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(s,N,f),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(s,N,f)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||u===e.memoizedProps&&_===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&_===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=N),d.props=s,d.state=N,d.context=f,s=p):(typeof d.componentDidUpdate!="function"||u===e.memoizedProps&&_===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&_===e.memoizedState||(t.flags|=1024),s=!1)}return hx(e,t,r,s,o,a)}function hx(e,t,r,s,a,o){wN(e,t);var d=(t.flags&128)!==0;if(!s&&!d)return a&&Tw(t,r,!1),Qa(e,t,o);s=t.stateNode,UI.current=t;var u=d&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&d?(t.child=_c(t,e.child,null,o),t.child=_c(t,null,u,o)):Nn(e,t,u,o),t.memoizedState=s.state,a&&Tw(t,r,!0),t.child}function yN(e){var t=e.stateNode;t.pendingContext?kw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&kw(e,t.context,!1),Q0(e,t.containerInfo)}function Hw(e,t,r,s,a){return bc(),W0(a),t.flags|=256,Nn(e,t,r,s),t.child}var fx={dehydrated:null,treeContext:null,retryLane:0};function mx(e){return{baseLanes:e,cachePool:null,transitions:null}}function bN(e,t,r){var s=t.pendingProps,a=pr.current,o=!1,d=(t.flags&128)!==0,u;if((u=d)||(u=e!==null&&e.memoizedState===null?!1:(a&2)!==0),u?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),sr(pr,a&1),e===null)return ix(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(d=s.children,e=s.fallback,o?(s=t.mode,o=t.child,d={mode:"hidden",children:d},!(s&1)&&o!==null?(o.childLanes=0,o.pendingProps=d):o=cm(d,s,0,null),e=zo(e,s,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=mx(r),t.memoizedState=fx,e):a1(t,d));if(a=e.memoizedState,a!==null&&(u=a.dehydrated,u!==null))return $I(e,t,d,s,u,a,r);if(o){o=s.fallback,d=t.mode,a=e.child,u=a.sibling;var f={mode:"hidden",children:s.children};return!(d&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=f,t.deletions=null):(s=zi(a,f),s.subtreeFlags=a.subtreeFlags&14680064),u!==null?o=zi(u,o):(o=zo(o,d,r,null),o.flags|=2),o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,d=e.child.memoizedState,d=d===null?mx(r):{baseLanes:d.baseLanes|r,cachePool:null,transitions:d.transitions},o.memoizedState=d,o.childLanes=e.childLanes&~r,t.memoizedState=fx,s}return o=e.child,e=o.sibling,s=zi(o,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function a1(e,t){return t=cm({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ph(e,t,r,s){return s!==null&&W0(s),_c(t,e.child,null,r),e=a1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function $I(e,t,r,s,a,o,d){if(r)return t.flags&256?(t.flags&=-257,s=Zp(Error(Me(422))),ph(e,t,d,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=s.fallback,a=t.mode,s=cm({mode:"visible",children:s.children},a,0,null),o=zo(o,a,d,null),o.flags|=2,s.return=t,o.return=t,s.sibling=o,t.child=s,t.mode&1&&_c(t,e.child,null,d),t.child.memoizedState=mx(d),t.memoizedState=fx,o);if(!(t.mode&1))return ph(e,t,d,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var u=s.dgst;return s=u,o=Error(Me(419)),s=Zp(o,s,void 0),ph(e,t,d,s)}if(u=(d&e.childLanes)!==0,qn||u){if(s=Zr,s!==null){switch(d&-d){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|d)?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,Ya(e,a),ra(s,e,a,-1))}return u1(),s=Zp(Error(Me(421))),ph(e,t,d,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=tR.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,ns=Mi(a.nextSibling),ls=t,fr=!0,Qs=null,e!==null&&(js[Cs++]=Va,js[Cs++]=Wa,js[Cs++]=Vo,Va=e.id,Wa=e.overflow,Vo=t),t=a1(t,s.children),t.flags|=4096,t)}function Gw(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),ox(e.return,t,r)}function Jp(e,t,r,s,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=r,o.tailMode=a)}function _N(e,t,r){var s=t.pendingProps,a=s.revealOrder,o=s.tail;if(Nn(e,t,s.children,r),s=pr.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Gw(e,r,t);else if(e.tag===19)Gw(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(sr(pr,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&bf(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Jp(t,!1,a,r,o);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&bf(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Jp(t,!0,r,null,o);break;case"together":Jp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $h(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qa(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ho|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Me(153));if(t.child!==null){for(e=t.child,r=zi(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=zi(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function qI(e,t,r){switch(t.tag){case 3:yN(t),bc();break;case 5:X_(t);break;case 1:Wn(t.type)&&pf(t);break;case 4:Q0(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;sr(vf,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(sr(pr,pr.current&1),t.flags|=128,null):r&t.child.childLanes?bN(e,t,r):(sr(pr,pr.current&1),e=Qa(e,t,r),e!==null?e.sibling:null);sr(pr,pr.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return _N(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),sr(pr,pr.current),s)break;return null;case 22:case 23:return t.lanes=0,vN(e,t,r)}return Qa(e,t,r)}var NN,px,jN,CN;NN=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};px=function(){};jN=function(e,t,r,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,Io(Sa.current);var o=null;switch(r){case"input":a=Lg(e,a),s=Lg(e,s),o=[];break;case"select":a=wr({},a,{value:void 0}),s=wr({},s,{value:void 0}),o=[];break;case"textarea":a=zg(e,a),s=zg(e,s),o=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=ff)}$g(r,s);var d;r=null;for(p in a)if(!s.hasOwnProperty(p)&&a.hasOwnProperty(p)&&a[p]!=null)if(p==="style"){var u=a[p];for(d in u)u.hasOwnProperty(d)&&(r||(r={}),r[d]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Fd.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in s){var f=s[p];if(u=a!=null?a[p]:void 0,s.hasOwnProperty(p)&&f!==u&&(f!=null||u!=null))if(p==="style")if(u){for(d in u)!u.hasOwnProperty(d)||f&&f.hasOwnProperty(d)||(r||(r={}),r[d]="");for(d in f)f.hasOwnProperty(d)&&u[d]!==f[d]&&(r||(r={}),r[d]=f[d])}else r||(o||(o=[]),o.push(p,r)),r=f;else p==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,u=u?u.__html:void 0,f!=null&&u!==f&&(o=o||[]).push(p,f)):p==="children"?typeof f!="string"&&typeof f!="number"||(o=o||[]).push(p,""+f):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Fd.hasOwnProperty(p)?(f!=null&&p==="onScroll"&&or("scroll",e),o||u===f||(o=[])):(o=o||[]).push(p,f))}r&&(o=o||[]).push("style",r);var p=o;(t.updateQueue=p)&&(t.flags|=4)}};CN=function(e,t,r,s){r!==s&&(t.flags|=4)};function dd(e,t){if(!fr)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function vn(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function VI(e,t,r){var s=t.pendingProps;switch(V0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(t),null;case 1:return Wn(t.type)&&mf(),vn(t),null;case 3:return s=t.stateNode,Nc(),cr(Vn),cr(yn),J0(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(fh(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Qs!==null&&(Nx(Qs),Qs=null))),px(e,t),vn(t),null;case 5:Z0(t);var a=Io(Yd.current);if(r=t.type,e!==null&&t.stateNode!=null)jN(e,t,r,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(Me(166));return vn(t),null}if(e=Io(Sa.current),fh(t)){s=t.stateNode,r=t.type;var o=t.memoizedProps;switch(s[wa]=t,s[Xd]=o,e=(t.mode&1)!==0,r){case"dialog":or("cancel",s),or("close",s);break;case"iframe":case"object":case"embed":or("load",s);break;case"video":case"audio":for(a=0;a<yd.length;a++)or(yd[a],s);break;case"source":or("error",s);break;case"img":case"image":case"link":or("error",s),or("load",s);break;case"details":or("toggle",s);break;case"input":rw(s,o),or("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!o.multiple},or("invalid",s);break;case"textarea":sw(s,o),or("invalid",s)}$g(r,o),a=null;for(var d in o)if(o.hasOwnProperty(d)){var u=o[d];d==="children"?typeof u=="string"?s.textContent!==u&&(o.suppressHydrationWarning!==!0&&hh(s.textContent,u,e),a=["children",u]):typeof u=="number"&&s.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&hh(s.textContent,u,e),a=["children",""+u]):Fd.hasOwnProperty(d)&&u!=null&&d==="onScroll"&&or("scroll",s)}switch(r){case"input":sh(s),nw(s,o,!0);break;case"textarea":sh(s),aw(s);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(s.onclick=ff)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{d=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=J2(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=d.createElement(r,{is:s.is}):(e=d.createElement(r),r==="select"&&(d=e,s.multiple?d.multiple=!0:s.size&&(d.size=s.size))):e=d.createElementNS(e,r),e[wa]=t,e[Xd]=s,NN(e,t,!1,!1),t.stateNode=e;e:{switch(d=qg(r,s),r){case"dialog":or("cancel",e),or("close",e),a=s;break;case"iframe":case"object":case"embed":or("load",e),a=s;break;case"video":case"audio":for(a=0;a<yd.length;a++)or(yd[a],e);a=s;break;case"source":or("error",e),a=s;break;case"img":case"image":case"link":or("error",e),or("load",e),a=s;break;case"details":or("toggle",e),a=s;break;case"input":rw(e,s),a=Lg(e,s),or("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=wr({},s,{value:void 0}),or("invalid",e);break;case"textarea":sw(e,s),a=zg(e,s),or("invalid",e);break;default:a=s}$g(r,a),u=a;for(o in u)if(u.hasOwnProperty(o)){var f=u[o];o==="style"?r_(e,f):o==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&e_(e,f)):o==="children"?typeof f=="string"?(r!=="textarea"||f!=="")&&Bd(e,f):typeof f=="number"&&Bd(e,""+f):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Fd.hasOwnProperty(o)?f!=null&&o==="onScroll"&&or("scroll",e):f!=null&&k0(e,o,f,d))}switch(r){case"input":sh(e),nw(e,s,!1);break;case"textarea":sh(e),aw(e);break;case"option":s.value!=null&&e.setAttribute("value",""+qi(s.value));break;case"select":e.multiple=!!s.multiple,o=s.value,o!=null?Jl(e,!!s.multiple,o,!1):s.defaultValue!=null&&Jl(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=ff)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return vn(t),null;case 6:if(e&&t.stateNode!=null)CN(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(Me(166));if(r=Io(Yd.current),Io(Sa.current),fh(t)){if(s=t.stateNode,r=t.memoizedProps,s[wa]=t,(o=s.nodeValue!==r)&&(e=ls,e!==null))switch(e.tag){case 3:hh(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&hh(s.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[wa]=t,t.stateNode=s}return vn(t),null;case 13:if(cr(pr),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(fr&&ns!==null&&t.mode&1&&!(t.flags&128))q_(),bc(),t.flags|=98560,o=!1;else if(o=fh(t),s!==null&&s.dehydrated!==null){if(e===null){if(!o)throw Error(Me(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Me(317));o[wa]=t}else bc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;vn(t),o=!1}else Qs!==null&&(Nx(Qs),Qs=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||pr.current&1?Ur===0&&(Ur=3):u1())),t.updateQueue!==null&&(t.flags|=4),vn(t),null);case 4:return Nc(),px(e,t),e===null&&Hd(t.stateNode.containerInfo),vn(t),null;case 10:return X0(t.type._context),vn(t),null;case 17:return Wn(t.type)&&mf(),vn(t),null;case 19:if(cr(pr),o=t.memoizedState,o===null)return vn(t),null;if(s=(t.flags&128)!==0,d=o.rendering,d===null)if(s)dd(o,!1);else{if(Ur!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(d=bf(e),d!==null){for(t.flags|=128,dd(o,!1),s=d.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)o=r,e=s,o.flags&=14680066,d=o.alternate,d===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=d.childLanes,o.lanes=d.lanes,o.child=d.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=d.memoizedProps,o.memoizedState=d.memoizedState,o.updateQueue=d.updateQueue,o.type=d.type,e=d.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return sr(pr,pr.current&1|2),t.child}e=e.sibling}o.tail!==null&&Sr()>Cc&&(t.flags|=128,s=!0,dd(o,!1),t.lanes=4194304)}else{if(!s)if(e=bf(d),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),dd(o,!0),o.tail===null&&o.tailMode==="hidden"&&!d.alternate&&!fr)return vn(t),null}else 2*Sr()-o.renderingStartTime>Cc&&r!==1073741824&&(t.flags|=128,s=!0,dd(o,!1),t.lanes=4194304);o.isBackwards?(d.sibling=t.child,t.child=d):(r=o.last,r!==null?r.sibling=d:t.child=d,o.last=d)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Sr(),t.sibling=null,r=pr.current,sr(pr,s?r&1|2:r&1),t):(vn(t),null);case 22:case 23:return d1(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?es&1073741824&&(vn(t),t.subtreeFlags&6&&(t.flags|=8192)):vn(t),null;case 24:return null;case 25:return null}throw Error(Me(156,t.tag))}function WI(e,t){switch(V0(t),t.tag){case 1:return Wn(t.type)&&mf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Nc(),cr(Vn),cr(yn),J0(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Z0(t),null;case 13:if(cr(pr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Me(340));bc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return cr(pr),null;case 4:return Nc(),null;case 10:return X0(t.type._context),null;case 22:case 23:return d1(),null;case 24:return null;default:return null}}var gh=!1,wn=!1,HI=typeof WeakSet=="function"?WeakSet:Set,Ze=null;function Yl(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){jr(e,t,s)}else r.current=null}function gx(e,t,r){try{r()}catch(s){jr(e,t,s)}}var Xw=!1;function GI(e,t){if(Jg=df,e=T_(),$0(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var d=0,u=-1,f=-1,p=0,x=0,w=e,_=null;t:for(;;){for(var j;w!==r||a!==0&&w.nodeType!==3||(u=d+a),w!==o||s!==0&&w.nodeType!==3||(f=d+s),w.nodeType===3&&(d+=w.nodeValue.length),(j=w.firstChild)!==null;)_=w,w=j;for(;;){if(w===e)break t;if(_===r&&++p===a&&(u=d),_===o&&++x===s&&(f=d),(j=w.nextSibling)!==null)break;w=_,_=w.parentNode}w=j}r=u===-1||f===-1?null:{start:u,end:f}}else r=null}r=r||{start:0,end:0}}else r=null;for(ex={focusedElem:e,selectionRange:r},df=!1,Ze=t;Ze!==null;)if(t=Ze,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ze=e;else for(;Ze!==null;){t=Ze;try{var N=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var C=N.memoizedProps,A=N.memoizedState,S=t.stateNode,k=S.getSnapshotBeforeUpdate(t.elementType===t.type?C:Ws(t.type,C),A);S.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Me(163))}}catch(T){jr(t,t.return,T)}if(e=t.sibling,e!==null){e.return=t.return,Ze=e;break}Ze=t.return}return N=Xw,Xw=!1,N}function Td(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,o!==void 0&&gx(t,r,o)}a=a.next}while(a!==s)}}function om(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function xx(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function EN(e){var t=e.alternate;t!==null&&(e.alternate=null,EN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[wa],delete t[Xd],delete t[nx],delete t[kI],delete t[TI])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function SN(e){return e.tag===5||e.tag===3||e.tag===4}function Kw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||SN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function vx(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ff));else if(s!==4&&(e=e.child,e!==null))for(vx(e,t,r),e=e.sibling;e!==null;)vx(e,t,r),e=e.sibling}function wx(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(wx(e,t,r),e=e.sibling;e!==null;)wx(e,t,r),e=e.sibling}var sn=null,Ks=!1;function di(e,t,r){for(r=r.child;r!==null;)AN(e,t,r),r=r.sibling}function AN(e,t,r){if(Ea&&typeof Ea.onCommitFiberUnmount=="function")try{Ea.onCommitFiberUnmount(Jf,r)}catch{}switch(r.tag){case 5:wn||Yl(r,t);case 6:var s=sn,a=Ks;sn=null,di(e,t,r),sn=s,Ks=a,sn!==null&&(Ks?(e=sn,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):sn.removeChild(r.stateNode));break;case 18:sn!==null&&(Ks?(e=sn,r=r.stateNode,e.nodeType===8?Hp(e.parentNode,r):e.nodeType===1&&Hp(e,r),qd(e)):Hp(sn,r.stateNode));break;case 4:s=sn,a=Ks,sn=r.stateNode.containerInfo,Ks=!0,di(e,t,r),sn=s,Ks=a;break;case 0:case 11:case 14:case 15:if(!wn&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var o=a,d=o.destroy;o=o.tag,d!==void 0&&(o&2||o&4)&&gx(r,t,d),a=a.next}while(a!==s)}di(e,t,r);break;case 1:if(!wn&&(Yl(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(u){jr(r,t,u)}di(e,t,r);break;case 21:di(e,t,r);break;case 22:r.mode&1?(wn=(s=wn)||r.memoizedState!==null,di(e,t,r),wn=s):di(e,t,r);break;default:di(e,t,r)}}function Yw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new HI),t.forEach(function(s){var a=rR.bind(null,e,s);r.has(s)||(r.add(s),s.then(a,a))})}}function Us(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var o=e,d=t,u=d;e:for(;u!==null;){switch(u.tag){case 5:sn=u.stateNode,Ks=!1;break e;case 3:sn=u.stateNode.containerInfo,Ks=!0;break e;case 4:sn=u.stateNode.containerInfo,Ks=!0;break e}u=u.return}if(sn===null)throw Error(Me(160));AN(o,d,a),sn=null,Ks=!1;var f=a.alternate;f!==null&&(f.return=null),a.return=null}catch(p){jr(a,t,p)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)kN(t,e),t=t.sibling}function kN(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Us(t,e),fa(e),s&4){try{Td(3,e,e.return),om(3,e)}catch(C){jr(e,e.return,C)}try{Td(5,e,e.return)}catch(C){jr(e,e.return,C)}}break;case 1:Us(t,e),fa(e),s&512&&r!==null&&Yl(r,r.return);break;case 5:if(Us(t,e),fa(e),s&512&&r!==null&&Yl(r,r.return),e.flags&32){var a=e.stateNode;try{Bd(a,"")}catch(C){jr(e,e.return,C)}}if(s&4&&(a=e.stateNode,a!=null)){var o=e.memoizedProps,d=r!==null?r.memoizedProps:o,u=e.type,f=e.updateQueue;if(e.updateQueue=null,f!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&Q2(a,o),qg(u,d);var p=qg(u,o);for(d=0;d<f.length;d+=2){var x=f[d],w=f[d+1];x==="style"?r_(a,w):x==="dangerouslySetInnerHTML"?e_(a,w):x==="children"?Bd(a,w):k0(a,x,w,p)}switch(u){case"input":Fg(a,o);break;case"textarea":Z2(a,o);break;case"select":var _=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var j=o.value;j!=null?Jl(a,!!o.multiple,j,!1):_!==!!o.multiple&&(o.defaultValue!=null?Jl(a,!!o.multiple,o.defaultValue,!0):Jl(a,!!o.multiple,o.multiple?[]:"",!1))}a[Xd]=o}catch(C){jr(e,e.return,C)}}break;case 6:if(Us(t,e),fa(e),s&4){if(e.stateNode===null)throw Error(Me(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(C){jr(e,e.return,C)}}break;case 3:if(Us(t,e),fa(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{qd(t.containerInfo)}catch(C){jr(e,e.return,C)}break;case 4:Us(t,e),fa(e);break;case 13:Us(t,e),fa(e),a=e.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||(l1=Sr())),s&4&&Yw(e);break;case 22:if(x=r!==null&&r.memoizedState!==null,e.mode&1?(wn=(p=wn)||x,Us(t,e),wn=p):Us(t,e),fa(e),s&8192){if(p=e.memoizedState!==null,(e.stateNode.isHidden=p)&&!x&&e.mode&1)for(Ze=e,x=e.child;x!==null;){for(w=Ze=x;Ze!==null;){switch(_=Ze,j=_.child,_.tag){case 0:case 11:case 14:case 15:Td(4,_,_.return);break;case 1:Yl(_,_.return);var N=_.stateNode;if(typeof N.componentWillUnmount=="function"){s=_,r=_.return;try{t=s,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch(C){jr(s,r,C)}}break;case 5:Yl(_,_.return);break;case 22:if(_.memoizedState!==null){Zw(w);continue}}j!==null?(j.return=_,Ze=j):Zw(w)}x=x.sibling}e:for(x=null,w=e;;){if(w.tag===5){if(x===null){x=w;try{a=w.stateNode,p?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=w.stateNode,f=w.memoizedProps.style,d=f!=null&&f.hasOwnProperty("display")?f.display:null,u.style.display=t_("display",d))}catch(C){jr(e,e.return,C)}}}else if(w.tag===6){if(x===null)try{w.stateNode.nodeValue=p?"":w.memoizedProps}catch(C){jr(e,e.return,C)}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===e)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===e)break e;for(;w.sibling===null;){if(w.return===null||w.return===e)break e;x===w&&(x=null),w=w.return}x===w&&(x=null),w.sibling.return=w.return,w=w.sibling}}break;case 19:Us(t,e),fa(e),s&4&&Yw(e);break;case 21:break;default:Us(t,e),fa(e)}}function fa(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(SN(r)){var s=r;break e}r=r.return}throw Error(Me(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(Bd(a,""),s.flags&=-33);var o=Kw(e);wx(e,o,a);break;case 3:case 4:var d=s.stateNode.containerInfo,u=Kw(e);vx(e,u,d);break;default:throw Error(Me(161))}}catch(f){jr(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function XI(e,t,r){Ze=e,TN(e)}function TN(e,t,r){for(var s=(e.mode&1)!==0;Ze!==null;){var a=Ze,o=a.child;if(a.tag===22&&s){var d=a.memoizedState!==null||gh;if(!d){var u=a.alternate,f=u!==null&&u.memoizedState!==null||wn;u=gh;var p=wn;if(gh=d,(wn=f)&&!p)for(Ze=a;Ze!==null;)d=Ze,f=d.child,d.tag===22&&d.memoizedState!==null?Jw(a):f!==null?(f.return=d,Ze=f):Jw(a);for(;o!==null;)Ze=o,TN(o),o=o.sibling;Ze=a,gh=u,wn=p}Qw(e)}else a.subtreeFlags&8772&&o!==null?(o.return=a,Ze=o):Qw(e)}}function Qw(e){for(;Ze!==null;){var t=Ze;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:wn||om(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!wn)if(r===null)s.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Ws(t.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Dw(t,o,s);break;case 3:var d=t.updateQueue;if(d!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Dw(t,d,r)}break;case 5:var u=t.stateNode;if(r===null&&t.flags&4){r=u;var f=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&r.focus();break;case"img":f.src&&(r.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var p=t.alternate;if(p!==null){var x=p.memoizedState;if(x!==null){var w=x.dehydrated;w!==null&&qd(w)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Me(163))}wn||t.flags&512&&xx(t)}catch(_){jr(t,t.return,_)}}if(t===e){Ze=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ze=r;break}Ze=t.return}}function Zw(e){for(;Ze!==null;){var t=Ze;if(t===e){Ze=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ze=r;break}Ze=t.return}}function Jw(e){for(;Ze!==null;){var t=Ze;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{om(4,t)}catch(f){jr(t,r,f)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(f){jr(t,a,f)}}var o=t.return;try{xx(t)}catch(f){jr(t,o,f)}break;case 5:var d=t.return;try{xx(t)}catch(f){jr(t,d,f)}}}catch(f){jr(t,t.return,f)}if(t===e){Ze=null;break}var u=t.sibling;if(u!==null){u.return=t.return,Ze=u;break}Ze=t.return}}var KI=Math.ceil,jf=ti.ReactCurrentDispatcher,i1=ti.ReactCurrentOwner,Ts=ti.ReactCurrentBatchConfig,Mt=0,Zr=null,Rr=null,dn=0,es=0,Ql=no(0),Ur=0,eu=null,Ho=0,lm=0,o1=0,Id=null,Un=null,l1=0,Cc=1/0,za=null,Cf=!1,yx=null,Fi=null,xh=!1,Ii=null,Ef=0,Rd=0,bx=null,qh=-1,Vh=0;function En(){return Mt&6?Sr():qh!==-1?qh:qh=Sr()}function Bi(e){return e.mode&1?Mt&2&&dn!==0?dn&-dn:RI.transition!==null?(Vh===0&&(Vh=m_()),Vh):(e=Gt,e!==0||(e=window.event,e=e===void 0?16:b_(e.type)),e):1}function ra(e,t,r,s){if(50<Rd)throw Rd=0,bx=null,Error(Me(185));yu(e,r,s),(!(Mt&2)||e!==Zr)&&(e===Zr&&(!(Mt&2)&&(lm|=r),Ur===4&&_i(e,dn)),Hn(e,s),r===1&&Mt===0&&!(t.mode&1)&&(Cc=Sr()+500,sm&&so()))}function Hn(e,t){var r=e.callbackNode;RT(e,t);var s=cf(e,e===Zr?dn:0);if(s===0)r!==null&&lw(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&lw(r),t===1)e.tag===0?II(ey.bind(null,e)):z_(ey.bind(null,e)),SI(function(){!(Mt&6)&&so()}),r=null;else{switch(p_(s)){case 1:r=O0;break;case 4:r=h_;break;case 16:r=lf;break;case 536870912:r=f_;break;default:r=lf}r=FN(r,IN.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function IN(e,t){if(qh=-1,Vh=0,Mt&6)throw Error(Me(327));var r=e.callbackNode;if(sc()&&e.callbackNode!==r)return null;var s=cf(e,e===Zr?dn:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Sf(e,s);else{t=s;var a=Mt;Mt|=2;var o=PN();(Zr!==e||dn!==t)&&(za=null,Cc=Sr()+500,Bo(e,t));do try{ZI();break}catch(u){RN(e,u)}while(!0);G0(),jf.current=o,Mt=a,Rr!==null?t=0:(Zr=null,dn=0,t=Ur)}if(t!==0){if(t===2&&(a=Xg(e),a!==0&&(s=a,t=_x(e,a))),t===1)throw r=eu,Bo(e,0),_i(e,s),Hn(e,Sr()),r;if(t===6)_i(e,s);else{if(a=e.current.alternate,!(s&30)&&!YI(a)&&(t=Sf(e,s),t===2&&(o=Xg(e),o!==0&&(s=o,t=_x(e,o))),t===1))throw r=eu,Bo(e,0),_i(e,s),Hn(e,Sr()),r;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(Me(345));case 2:_o(e,Un,za);break;case 3:if(_i(e,s),(s&130023424)===s&&(t=l1+500-Sr(),10<t)){if(cf(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){En(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=rx(_o.bind(null,e,Un,za),t);break}_o(e,Un,za);break;case 4:if(_i(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var d=31-ta(s);o=1<<d,d=t[d],d>a&&(a=d),s&=~o}if(s=a,s=Sr()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*KI(s/1960))-s,10<s){e.timeoutHandle=rx(_o.bind(null,e,Un,za),s);break}_o(e,Un,za);break;case 5:_o(e,Un,za);break;default:throw Error(Me(329))}}}return Hn(e,Sr()),e.callbackNode===r?IN.bind(null,e):null}function _x(e,t){var r=Id;return e.current.memoizedState.isDehydrated&&(Bo(e,t).flags|=256),e=Sf(e,t),e!==2&&(t=Un,Un=r,t!==null&&Nx(t)),e}function Nx(e){Un===null?Un=e:Un.push.apply(Un,e)}function YI(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],o=a.getSnapshot;a=a.value;try{if(!na(o(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _i(e,t){for(t&=~o1,t&=~lm,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ta(t),s=1<<r;e[r]=-1,t&=~s}}function ey(e){if(Mt&6)throw Error(Me(327));sc();var t=cf(e,0);if(!(t&1))return Hn(e,Sr()),null;var r=Sf(e,t);if(e.tag!==0&&r===2){var s=Xg(e);s!==0&&(t=s,r=_x(e,s))}if(r===1)throw r=eu,Bo(e,0),_i(e,t),Hn(e,Sr()),r;if(r===6)throw Error(Me(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_o(e,Un,za),Hn(e,Sr()),null}function c1(e,t){var r=Mt;Mt|=1;try{return e(t)}finally{Mt=r,Mt===0&&(Cc=Sr()+500,sm&&so())}}function Go(e){Ii!==null&&Ii.tag===0&&!(Mt&6)&&sc();var t=Mt;Mt|=1;var r=Ts.transition,s=Gt;try{if(Ts.transition=null,Gt=1,e)return e()}finally{Gt=s,Ts.transition=r,Mt=t,!(Mt&6)&&so()}}function d1(){es=Ql.current,cr(Ql)}function Bo(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,EI(r)),Rr!==null)for(r=Rr.return;r!==null;){var s=r;switch(V0(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&mf();break;case 3:Nc(),cr(Vn),cr(yn),J0();break;case 5:Z0(s);break;case 4:Nc();break;case 13:cr(pr);break;case 19:cr(pr);break;case 10:X0(s.type._context);break;case 22:case 23:d1()}r=r.return}if(Zr=e,Rr=e=zi(e.current,null),dn=es=t,Ur=0,eu=null,o1=lm=Ho=0,Un=Id=null,To!==null){for(t=0;t<To.length;t++)if(r=To[t],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,o=r.pending;if(o!==null){var d=o.next;o.next=a,s.next=d}r.pending=s}To=null}return e}function RN(e,t){do{var r=Rr;try{if(G0(),zh.current=Nf,_f){for(var s=vr.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}_f=!1}if(Wo=0,Yr=Br=vr=null,kd=!1,Qd=0,i1.current=null,r===null||r.return===null){Ur=1,eu=t,Rr=null;break}e:{var o=e,d=r.return,u=r,f=t;if(t=dn,u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var p=f,x=u,w=x.tag;if(!(x.mode&1)&&(w===0||w===11||w===15)){var _=x.alternate;_?(x.updateQueue=_.updateQueue,x.memoizedState=_.memoizedState,x.lanes=_.lanes):(x.updateQueue=null,x.memoizedState=null)}var j=Uw(d);if(j!==null){j.flags&=-257,$w(j,d,u,o,t),j.mode&1&&zw(o,p,t),t=j,f=p;var N=t.updateQueue;if(N===null){var C=new Set;C.add(f),t.updateQueue=C}else N.add(f);break e}else{if(!(t&1)){zw(o,p,t),u1();break e}f=Error(Me(426))}}else if(fr&&u.mode&1){var A=Uw(d);if(A!==null){!(A.flags&65536)&&(A.flags|=256),$w(A,d,u,o,t),W0(jc(f,u));break e}}o=f=jc(f,u),Ur!==4&&(Ur=2),Id===null?Id=[o]:Id.push(o),o=d;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var S=pN(o,f,t);Ow(o,S);break e;case 1:u=f;var k=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof k.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Fi===null||!Fi.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t;var T=gN(o,u,t);Ow(o,T);break e}}o=o.return}while(o!==null)}DN(r)}catch(O){t=O,Rr===r&&r!==null&&(Rr=r=r.return);continue}break}while(!0)}function PN(){var e=jf.current;return jf.current=Nf,e===null?Nf:e}function u1(){(Ur===0||Ur===3||Ur===2)&&(Ur=4),Zr===null||!(Ho&268435455)&&!(lm&268435455)||_i(Zr,dn)}function Sf(e,t){var r=Mt;Mt|=2;var s=PN();(Zr!==e||dn!==t)&&(za=null,Bo(e,t));do try{QI();break}catch(a){RN(e,a)}while(!0);if(G0(),Mt=r,jf.current=s,Rr!==null)throw Error(Me(261));return Zr=null,dn=0,Ur}function QI(){for(;Rr!==null;)ON(Rr)}function ZI(){for(;Rr!==null&&!NT();)ON(Rr)}function ON(e){var t=LN(e.alternate,e,es);e.memoizedProps=e.pendingProps,t===null?DN(e):Rr=t,i1.current=null}function DN(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=WI(r,t),r!==null){r.flags&=32767,Rr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ur=6,Rr=null;return}}else if(r=VI(r,t,es),r!==null){Rr=r;return}if(t=t.sibling,t!==null){Rr=t;return}Rr=t=e}while(t!==null);Ur===0&&(Ur=5)}function _o(e,t,r){var s=Gt,a=Ts.transition;try{Ts.transition=null,Gt=1,JI(e,t,r,s)}finally{Ts.transition=a,Gt=s}return null}function JI(e,t,r,s){do sc();while(Ii!==null);if(Mt&6)throw Error(Me(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Me(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(PT(e,o),e===Zr&&(Rr=Zr=null,dn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||xh||(xh=!0,FN(lf,function(){return sc(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Ts.transition,Ts.transition=null;var d=Gt;Gt=1;var u=Mt;Mt|=4,i1.current=null,GI(e,r),kN(r,e),wI(ex),df=!!Jg,ex=Jg=null,e.current=r,XI(r),jT(),Mt=u,Gt=d,Ts.transition=o}else e.current=r;if(xh&&(xh=!1,Ii=e,Ef=a),o=e.pendingLanes,o===0&&(Fi=null),ST(r.stateNode),Hn(e,Sr()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(Cf)throw Cf=!1,e=yx,yx=null,e;return Ef&1&&e.tag!==0&&sc(),o=e.pendingLanes,o&1?e===bx?Rd++:(Rd=0,bx=e):Rd=0,so(),null}function sc(){if(Ii!==null){var e=p_(Ef),t=Ts.transition,r=Gt;try{if(Ts.transition=null,Gt=16>e?16:e,Ii===null)var s=!1;else{if(e=Ii,Ii=null,Ef=0,Mt&6)throw Error(Me(331));var a=Mt;for(Mt|=4,Ze=e.current;Ze!==null;){var o=Ze,d=o.child;if(Ze.flags&16){var u=o.deletions;if(u!==null){for(var f=0;f<u.length;f++){var p=u[f];for(Ze=p;Ze!==null;){var x=Ze;switch(x.tag){case 0:case 11:case 15:Td(8,x,o)}var w=x.child;if(w!==null)w.return=x,Ze=w;else for(;Ze!==null;){x=Ze;var _=x.sibling,j=x.return;if(EN(x),x===p){Ze=null;break}if(_!==null){_.return=j,Ze=_;break}Ze=j}}}var N=o.alternate;if(N!==null){var C=N.child;if(C!==null){N.child=null;do{var A=C.sibling;C.sibling=null,C=A}while(C!==null)}}Ze=o}}if(o.subtreeFlags&2064&&d!==null)d.return=o,Ze=d;else e:for(;Ze!==null;){if(o=Ze,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Td(9,o,o.return)}var S=o.sibling;if(S!==null){S.return=o.return,Ze=S;break e}Ze=o.return}}var k=e.current;for(Ze=k;Ze!==null;){d=Ze;var b=d.child;if(d.subtreeFlags&2064&&b!==null)b.return=d,Ze=b;else e:for(d=k;Ze!==null;){if(u=Ze,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:om(9,u)}}catch(O){jr(u,u.return,O)}if(u===d){Ze=null;break e}var T=u.sibling;if(T!==null){T.return=u.return,Ze=T;break e}Ze=u.return}}if(Mt=a,so(),Ea&&typeof Ea.onPostCommitFiberRoot=="function")try{Ea.onPostCommitFiberRoot(Jf,e)}catch{}s=!0}return s}finally{Gt=r,Ts.transition=t}}return!1}function ty(e,t,r){t=jc(r,t),t=pN(e,t,1),e=Li(e,t,1),t=En(),e!==null&&(yu(e,1,t),Hn(e,t))}function jr(e,t,r){if(e.tag===3)ty(e,e,r);else for(;t!==null;){if(t.tag===3){ty(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Fi===null||!Fi.has(s))){e=jc(r,e),e=gN(t,e,1),t=Li(t,e,1),e=En(),t!==null&&(yu(t,1,e),Hn(t,e));break}}t=t.return}}function eR(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=En(),e.pingedLanes|=e.suspendedLanes&r,Zr===e&&(dn&r)===r&&(Ur===4||Ur===3&&(dn&130023424)===dn&&500>Sr()-l1?Bo(e,0):o1|=r),Hn(e,t)}function MN(e,t){t===0&&(e.mode&1?(t=oh,oh<<=1,!(oh&130023424)&&(oh=4194304)):t=1);var r=En();e=Ya(e,t),e!==null&&(yu(e,t,r),Hn(e,r))}function tR(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),MN(e,r)}function rR(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(Me(314))}s!==null&&s.delete(t),MN(e,r)}var LN;LN=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Vn.current)qn=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return qn=!1,qI(e,t,r);qn=!!(e.flags&131072)}else qn=!1,fr&&t.flags&1048576&&U_(t,xf,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;$h(e,t),e=t.pendingProps;var a=yc(t,yn.current);nc(t,r),a=t1(null,t,s,e,a,r);var o=r1();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Wn(s)?(o=!0,pf(t)):o=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Y0(t),a.updater=im,t.stateNode=a,a._reactInternals=t,cx(t,s,e,r),t=hx(null,t,s,!0,o,r)):(t.tag=0,fr&&o&&q0(t),Nn(null,t,a,r),t=t.child),t;case 16:s=t.elementType;e:{switch($h(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=sR(s),e=Ws(s,e),a){case 0:t=ux(null,t,s,e,r);break e;case 1:t=Ww(null,t,s,e,r);break e;case 11:t=qw(null,t,s,e,r);break e;case 14:t=Vw(null,t,s,Ws(s.type,e),r);break e}throw Error(Me(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Ws(s,a),ux(e,t,s,a,r);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Ws(s,a),Ww(e,t,s,a,r);case 3:e:{if(yN(t),e===null)throw Error(Me(387));s=t.pendingProps,o=t.memoizedState,a=o.element,G_(e,t),yf(t,s,null,r);var d=t.memoizedState;if(s=d.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){a=jc(Error(Me(423)),t),t=Hw(e,t,s,r,a);break e}else if(s!==a){a=jc(Error(Me(424)),t),t=Hw(e,t,s,r,a);break e}else for(ns=Mi(t.stateNode.containerInfo.firstChild),ls=t,fr=!0,Qs=null,r=W_(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(bc(),s===a){t=Qa(e,t,r);break e}Nn(e,t,s,r)}t=t.child}return t;case 5:return X_(t),e===null&&ix(t),s=t.type,a=t.pendingProps,o=e!==null?e.memoizedProps:null,d=a.children,tx(s,a)?d=null:o!==null&&tx(s,o)&&(t.flags|=32),wN(e,t),Nn(e,t,d,r),t.child;case 6:return e===null&&ix(t),null;case 13:return bN(e,t,r);case 4:return Q0(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=_c(t,null,s,r):Nn(e,t,s,r),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Ws(s,a),qw(e,t,s,a,r);case 7:return Nn(e,t,t.pendingProps,r),t.child;case 8:return Nn(e,t,t.pendingProps.children,r),t.child;case 12:return Nn(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,o=t.memoizedProps,d=a.value,sr(vf,s._currentValue),s._currentValue=d,o!==null)if(na(o.value,d)){if(o.children===a.children&&!Vn.current){t=Qa(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var u=o.dependencies;if(u!==null){d=o.child;for(var f=u.firstContext;f!==null;){if(f.context===s){if(o.tag===1){f=Ha(-1,r&-r),f.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var x=p.pending;x===null?f.next=f:(f.next=x.next,x.next=f),p.pending=f}}o.lanes|=r,f=o.alternate,f!==null&&(f.lanes|=r),ox(o.return,r,t),u.lanes|=r;break}f=f.next}}else if(o.tag===10)d=o.type===t.type?null:o.child;else if(o.tag===18){if(d=o.return,d===null)throw Error(Me(341));d.lanes|=r,u=d.alternate,u!==null&&(u.lanes|=r),ox(d,r,t),d=o.sibling}else d=o.child;if(d!==null)d.return=o;else for(d=o;d!==null;){if(d===t){d=null;break}if(o=d.sibling,o!==null){o.return=d.return,d=o;break}d=d.return}o=d}Nn(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,nc(t,r),a=Rs(a),s=s(a),t.flags|=1,Nn(e,t,s,r),t.child;case 14:return s=t.type,a=Ws(s,t.pendingProps),a=Ws(s.type,a),Vw(e,t,s,a,r);case 15:return xN(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Ws(s,a),$h(e,t),t.tag=1,Wn(s)?(e=!0,pf(t)):e=!1,nc(t,r),mN(t,s,a),cx(t,s,a,r),hx(null,t,s,!0,e,r);case 19:return _N(e,t,r);case 22:return vN(e,t,r)}throw Error(Me(156,t.tag))};function FN(e,t){return u_(e,t)}function nR(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function As(e,t,r,s){return new nR(e,t,r,s)}function h1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function sR(e){if(typeof e=="function")return h1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===I0)return 11;if(e===R0)return 14}return 2}function zi(e,t){var r=e.alternate;return r===null?(r=As(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Wh(e,t,r,s,a,o){var d=2;if(s=e,typeof e=="function")h1(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case Ul:return zo(r.children,a,o,t);case T0:d=8,a|=8;break;case Pg:return e=As(12,r,t,a|2),e.elementType=Pg,e.lanes=o,e;case Og:return e=As(13,r,t,a),e.elementType=Og,e.lanes=o,e;case Dg:return e=As(19,r,t,a),e.elementType=Dg,e.lanes=o,e;case X2:return cm(r,a,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case H2:d=10;break e;case G2:d=9;break e;case I0:d=11;break e;case R0:d=14;break e;case wi:d=16,s=null;break e}throw Error(Me(130,e==null?e:typeof e,""))}return t=As(d,r,t,a),t.elementType=e,t.type=s,t.lanes=o,t}function zo(e,t,r,s){return e=As(7,e,s,t),e.lanes=r,e}function cm(e,t,r,s){return e=As(22,e,s,t),e.elementType=X2,e.lanes=r,e.stateNode={isHidden:!1},e}function eg(e,t,r){return e=As(6,e,null,t),e.lanes=r,e}function tg(e,t,r){return t=As(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function aR(e,t,r,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dp(0),this.expirationTimes=Dp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dp(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function f1(e,t,r,s,a,o,d,u,f){return e=new aR(e,t,r,u,f),t===1?(t=1,o===!0&&(t|=8)):t=0,o=As(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Y0(o),e}function iR(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zl,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function BN(e){if(!e)return Vi;e=e._reactInternals;e:{if(ll(e)!==e||e.tag!==1)throw Error(Me(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Wn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Me(171))}if(e.tag===1){var r=e.type;if(Wn(r))return B_(e,r,t)}return t}function zN(e,t,r,s,a,o,d,u,f){return e=f1(r,s,!0,e,a,o,d,u,f),e.context=BN(null),r=e.current,s=En(),a=Bi(r),o=Ha(s,a),o.callback=t??null,Li(r,o,a),e.current.lanes=a,yu(e,a,s),Hn(e,s),e}function dm(e,t,r,s){var a=t.current,o=En(),d=Bi(a);return r=BN(r),t.context===null?t.context=r:t.pendingContext=r,t=Ha(o,d),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Li(a,t,d),e!==null&&(ra(e,a,d,o),Bh(e,a,d)),d}function Af(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ry(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function m1(e,t){ry(e,t),(e=e.alternate)&&ry(e,t)}function oR(){return null}var UN=typeof reportError=="function"?reportError:function(e){console.error(e)};function p1(e){this._internalRoot=e}um.prototype.render=p1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Me(409));dm(e,t,null,null)};um.prototype.unmount=p1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Go(function(){dm(null,e,null,null)}),t[Ka]=null}};function um(e){this._internalRoot=e}um.prototype.unstable_scheduleHydration=function(e){if(e){var t=v_();e={blockedOn:null,target:e,priority:t};for(var r=0;r<bi.length&&t!==0&&t<bi[r].priority;r++);bi.splice(r,0,e),r===0&&y_(e)}};function g1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function hm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ny(){}function lR(e,t,r,s,a){if(a){if(typeof s=="function"){var o=s;s=function(){var p=Af(d);o.call(p)}}var d=zN(t,s,e,0,null,!1,!1,"",ny);return e._reactRootContainer=d,e[Ka]=d.current,Hd(e.nodeType===8?e.parentNode:e),Go(),d}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var u=s;s=function(){var p=Af(f);u.call(p)}}var f=f1(e,0,!1,null,null,!1,!1,"",ny);return e._reactRootContainer=f,e[Ka]=f.current,Hd(e.nodeType===8?e.parentNode:e),Go(function(){dm(t,f,r,s)}),f}function fm(e,t,r,s,a){var o=r._reactRootContainer;if(o){var d=o;if(typeof a=="function"){var u=a;a=function(){var f=Af(d);u.call(f)}}dm(t,d,e,a)}else d=lR(r,t,e,a,s);return Af(d)}g_=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=wd(t.pendingLanes);r!==0&&(D0(t,r|1),Hn(t,Sr()),!(Mt&6)&&(Cc=Sr()+500,so()))}break;case 13:Go(function(){var s=Ya(e,1);if(s!==null){var a=En();ra(s,e,1,a)}}),m1(e,1)}};M0=function(e){if(e.tag===13){var t=Ya(e,134217728);if(t!==null){var r=En();ra(t,e,134217728,r)}m1(e,134217728)}};x_=function(e){if(e.tag===13){var t=Bi(e),r=Ya(e,t);if(r!==null){var s=En();ra(r,e,t,s)}m1(e,t)}};v_=function(){return Gt};w_=function(e,t){var r=Gt;try{return Gt=e,t()}finally{Gt=r}};Wg=function(e,t,r){switch(t){case"input":if(Fg(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var a=nm(s);if(!a)throw Error(Me(90));Y2(s),Fg(s,a)}}}break;case"textarea":Z2(e,r);break;case"select":t=r.value,t!=null&&Jl(e,!!r.multiple,t,!1)}};a_=c1;i_=Go;var cR={usingClientEntryPoint:!1,Events:[_u,Wl,nm,n_,s_,c1]},ud={findFiberByHostInstance:ko,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dR={bundleType:ud.bundleType,version:ud.version,rendererPackageName:ud.rendererPackageName,rendererConfig:ud.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ti.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=c_(e),e===null?null:e.stateNode},findFiberByHostInstance:ud.findFiberByHostInstance||oR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vh.isDisabled&&vh.supportsFiber)try{Jf=vh.inject(dR),Ea=vh}catch{}}fs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cR;fs.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g1(t))throw Error(Me(200));return iR(e,t,null,r)};fs.createRoot=function(e,t){if(!g1(e))throw Error(Me(299));var r=!1,s="",a=UN;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=f1(e,1,!1,null,null,r,!1,s,a),e[Ka]=t.current,Hd(e.nodeType===8?e.parentNode:e),new p1(t)};fs.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Me(188)):(e=Object.keys(e).join(","),Error(Me(268,e)));return e=c_(t),e=e===null?null:e.stateNode,e};fs.flushSync=function(e){return Go(e)};fs.hydrate=function(e,t,r){if(!hm(t))throw Error(Me(200));return fm(null,e,t,!0,r)};fs.hydrateRoot=function(e,t,r){if(!g1(e))throw Error(Me(405));var s=r!=null&&r.hydratedSources||null,a=!1,o="",d=UN;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(d=r.onRecoverableError)),t=zN(t,null,e,1,r??null,a,!1,o,d),e[Ka]=t.current,Hd(e),s)for(e=0;e<s.length;e++)r=s[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new um(t)};fs.render=function(e,t,r){if(!hm(t))throw Error(Me(200));return fm(null,e,t,!1,r)};fs.unmountComponentAtNode=function(e){if(!hm(e))throw Error(Me(40));return e._reactRootContainer?(Go(function(){fm(null,null,e,!1,function(){e._reactRootContainer=null,e[Ka]=null})}),!0):!1};fs.unstable_batchedUpdates=c1;fs.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!hm(r))throw Error(Me(200));if(e==null||e._reactInternals===void 0)throw Error(Me(38));return fm(e,t,r,!1,s)};fs.version="18.3.1-next-f1338f8080-20240426";function $N(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($N)}catch(e){console.error(e)}}$N(),$2.exports=fs;var cl=$2.exports;const qN=b0(cl);var VN,sy=cl;VN=sy.createRoot,sy.hydrateRoot;const uR=1,hR=1e6;let rg=0;function fR(){return rg=(rg+1)%Number.MAX_SAFE_INTEGER,rg.toString()}const ng=new Map,ay=e=>{if(ng.has(e))return;const t=setTimeout(()=>{ng.delete(e),Pd({type:"REMOVE_TOAST",toastId:e})},hR);ng.set(e,t)},mR=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,uR)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?ay(r):e.toasts.forEach(s=>{ay(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===r||r===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},Hh=[];let Gh={toasts:[]};function Pd(e){Gh=mR(Gh,e),Hh.forEach(t=>{t(Gh)})}function pR({...e}){const t=fR(),r=a=>Pd({type:"UPDATE_TOAST",toast:{...a,id:t}}),s=()=>Pd({type:"DISMISS_TOAST",toastId:t});return Pd({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||s()}}}),{id:t,dismiss:s,update:r}}function WN(){const[e,t]=v.useState(Gh);return v.useEffect(()=>(Hh.push(t),()=>{const r=Hh.indexOf(t);r>-1&&Hh.splice(r,1)}),[e]),{...e,toast:pR,dismiss:r=>Pd({type:"DISMISS_TOAST",toastId:r})}}function De(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function iy(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Za(...e){return t=>{let r=!1;const s=e.map(a=>{const o=iy(a,t);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let a=0;a<s.length;a++){const o=s[a];typeof o=="function"?o():iy(e[a],null)}}}}function at(...e){return v.useCallback(Za(...e),e)}function gR(e,t){const r=v.createContext(t),s=o=>{const{children:d,...u}=o,f=v.useMemo(()=>u,Object.values(u));return n.jsx(r.Provider,{value:f,children:d})};s.displayName=e+"Provider";function a(o){const d=v.useContext(r);if(d)return d;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[s,a]}function qr(e,t=[]){let r=[];function s(o,d){const u=v.createContext(d),f=r.length;r=[...r,d];const p=w=>{var S;const{scope:_,children:j,...N}=w,C=((S=_==null?void 0:_[e])==null?void 0:S[f])||u,A=v.useMemo(()=>N,Object.values(N));return n.jsx(C.Provider,{value:A,children:j})};p.displayName=o+"Provider";function x(w,_){var C;const j=((C=_==null?void 0:_[e])==null?void 0:C[f])||u,N=v.useContext(j);if(N)return N;if(d!==void 0)return d;throw new Error(`\`${w}\` must be used within \`${o}\``)}return[p,x]}const a=()=>{const o=r.map(d=>v.createContext(d));return function(u){const f=(u==null?void 0:u[e])||o;return v.useMemo(()=>({[`__scope${e}`]:{...u,[e]:f}}),[u,f])}};return a.scopeName=e,[s,xR(a,...t)]}function xR(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const d=s.reduce((u,{useScope:f,scopeName:p})=>{const w=f(o)[`__scope${p}`];return{...u,...w}},{});return v.useMemo(()=>({[`__scope${t.scopeName}`]:d}),[d])}};return r.scopeName=t.scopeName,r}function Wi(e){const t=wR(e),r=v.forwardRef((s,a)=>{const{children:o,...d}=s,u=v.Children.toArray(o),f=u.find(yR);if(f){const p=f.props.children,x=u.map(w=>w===f?v.Children.count(p)>1?v.Children.only(null):v.isValidElement(p)?p.props.children:null:w);return n.jsx(t,{...d,ref:a,children:v.isValidElement(p)?v.cloneElement(p,void 0,x):null})}return n.jsx(t,{...d,ref:a,children:o})});return r.displayName=`${e}.Slot`,r}var vR=Wi("Slot");function wR(e){const t=v.forwardRef((r,s)=>{const{children:a,...o}=r;if(v.isValidElement(a)){const d=_R(a),u=bR(o,a.props);return a.type!==v.Fragment&&(u.ref=s?Za(s,d):d),v.cloneElement(a,u)}return v.Children.count(a)>1?v.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var HN=Symbol("radix.slottable");function GN(e){const t=({children:r})=>n.jsx(n.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=HN,t}function yR(e){return v.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===HN}function bR(e,t){const r={...t};for(const s in t){const a=e[s],o=t[s];/^on[A-Z]/.test(s)?a&&o?r[s]=(...u)=>{const f=o(...u);return a(...u),f}:a&&(r[s]=a):s==="style"?r[s]={...a,...o}:s==="className"&&(r[s]=[a,o].filter(Boolean).join(" "))}return{...e,...r}}function _R(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function mm(e){const t=e+"CollectionProvider",[r,s]=qr(t),[a,o]=r(t,{collectionRef:{current:null},itemMap:new Map}),d=C=>{const{scope:A,children:S}=C,k=$e.useRef(null),b=$e.useRef(new Map).current;return n.jsx(a,{scope:A,itemMap:b,collectionRef:k,children:S})};d.displayName=t;const u=e+"CollectionSlot",f=Wi(u),p=$e.forwardRef((C,A)=>{const{scope:S,children:k}=C,b=o(u,S),T=at(A,b.collectionRef);return n.jsx(f,{ref:T,children:k})});p.displayName=u;const x=e+"CollectionItemSlot",w="data-radix-collection-item",_=Wi(x),j=$e.forwardRef((C,A)=>{const{scope:S,children:k,...b}=C,T=$e.useRef(null),O=at(A,T),L=o(x,S);return $e.useEffect(()=>(L.itemMap.set(T,{ref:T,...b}),()=>void L.itemMap.delete(T))),n.jsx(_,{[w]:"",ref:O,children:k})});j.displayName=x;function N(C){const A=o(e+"CollectionConsumer",C);return $e.useCallback(()=>{const k=A.collectionRef.current;if(!k)return[];const b=Array.from(k.querySelectorAll(`[${w}]`));return Array.from(A.itemMap.values()).sort((L,R)=>b.indexOf(L.ref.current)-b.indexOf(R.ref.current))},[A.collectionRef,A.itemMap])}return[{Provider:d,Slot:p,ItemSlot:j},N,s]}var NR=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],He=NR.reduce((e,t)=>{const r=Wi(`Primitive.${t}`),s=v.forwardRef((a,o)=>{const{asChild:d,...u}=a,f=d?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(f,{...u,ref:o})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function x1(e,t){e&&cl.flushSync(()=>e.dispatchEvent(t))}function Cr(e){const t=v.useRef(e);return v.useEffect(()=>{t.current=e}),v.useMemo(()=>(...r)=>{var s;return(s=t.current)==null?void 0:s.call(t,...r)},[])}function jR(e,t=globalThis==null?void 0:globalThis.document){const r=Cr(e);v.useEffect(()=>{const s=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[r,t])}var CR="DismissableLayer",jx="dismissableLayer.update",ER="dismissableLayer.pointerDownOutside",SR="dismissableLayer.focusOutside",oy,XN=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),dl=v.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:d,onDismiss:u,...f}=e,p=v.useContext(XN),[x,w]=v.useState(null),_=(x==null?void 0:x.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,j]=v.useState({}),N=at(t,R=>w(R)),C=Array.from(p.layers),[A]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),S=C.indexOf(A),k=x?C.indexOf(x):-1,b=p.layersWithOutsidePointerEventsDisabled.size>0,T=k>=S,O=kR(R=>{const M=R.target,P=[...p.branches].some(q=>q.contains(M));!T||P||(a==null||a(R),d==null||d(R),R.defaultPrevented||u==null||u())},_),L=TR(R=>{const M=R.target;[...p.branches].some(q=>q.contains(M))||(o==null||o(R),d==null||d(R),R.defaultPrevented||u==null||u())},_);return jR(R=>{k===p.layers.size-1&&(s==null||s(R),!R.defaultPrevented&&u&&(R.preventDefault(),u()))},_),v.useEffect(()=>{if(x)return r&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(oy=_.body.style.pointerEvents,_.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(x)),p.layers.add(x),ly(),()=>{r&&p.layersWithOutsidePointerEventsDisabled.size===1&&(_.body.style.pointerEvents=oy)}},[x,_,r,p]),v.useEffect(()=>()=>{x&&(p.layers.delete(x),p.layersWithOutsidePointerEventsDisabled.delete(x),ly())},[x,p]),v.useEffect(()=>{const R=()=>j({});return document.addEventListener(jx,R),()=>document.removeEventListener(jx,R)},[]),n.jsx(He.div,{...f,ref:N,style:{pointerEvents:b?T?"auto":"none":void 0,...e.style},onFocusCapture:De(e.onFocusCapture,L.onFocusCapture),onBlurCapture:De(e.onBlurCapture,L.onBlurCapture),onPointerDownCapture:De(e.onPointerDownCapture,O.onPointerDownCapture)})});dl.displayName=CR;var AR="DismissableLayerBranch",KN=v.forwardRef((e,t)=>{const r=v.useContext(XN),s=v.useRef(null),a=at(t,s);return v.useEffect(()=>{const o=s.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),n.jsx(He.div,{...e,ref:a})});KN.displayName=AR;function kR(e,t=globalThis==null?void 0:globalThis.document){const r=Cr(e),s=v.useRef(!1),a=v.useRef(()=>{});return v.useEffect(()=>{const o=u=>{if(u.target&&!s.current){let f=function(){YN(ER,r,p,{discrete:!0})};const p={originalEvent:u};u.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=f,t.addEventListener("click",a.current,{once:!0})):f()}else t.removeEventListener("click",a.current);s.current=!1},d=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(d),t.removeEventListener("pointerdown",o),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>s.current=!0}}function TR(e,t=globalThis==null?void 0:globalThis.document){const r=Cr(e),s=v.useRef(!1);return v.useEffect(()=>{const a=o=>{o.target&&!s.current&&YN(SR,r,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function ly(){const e=new CustomEvent(jx);document.dispatchEvent(e)}function YN(e,t,r,{discrete:s}){const a=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),s?x1(a,o):a.dispatchEvent(o)}var IR=dl,RR=KN,kr=globalThis!=null&&globalThis.document?v.useLayoutEffect:()=>{},PR="Portal",Fc=v.forwardRef((e,t)=>{var u;const{container:r,...s}=e,[a,o]=v.useState(!1);kr(()=>o(!0),[]);const d=r||a&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return d?qN.createPortal(n.jsx(He.div,{...s,ref:t}),d):null});Fc.displayName=PR;function OR(e,t){return v.useReducer((r,s)=>t[r][s]??r,e)}var Vr=e=>{const{present:t,children:r}=e,s=DR(t),a=typeof r=="function"?r({present:s.isPresent}):v.Children.only(r),o=at(s.ref,MR(a));return typeof r=="function"||s.isPresent?v.cloneElement(a,{ref:o}):null};Vr.displayName="Presence";function DR(e){const[t,r]=v.useState(),s=v.useRef(null),a=v.useRef(e),o=v.useRef("none"),d=e?"mounted":"unmounted",[u,f]=OR(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return v.useEffect(()=>{const p=wh(s.current);o.current=u==="mounted"?p:"none"},[u]),kr(()=>{const p=s.current,x=a.current;if(x!==e){const _=o.current,j=wh(p);e?f("MOUNT"):j==="none"||(p==null?void 0:p.display)==="none"?f("UNMOUNT"):f(x&&_!==j?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,f]),kr(()=>{if(t){let p;const x=t.ownerDocument.defaultView??window,w=j=>{const C=wh(s.current).includes(CSS.escape(j.animationName));if(j.target===t&&C&&(f("ANIMATION_END"),!a.current)){const A=t.style.animationFillMode;t.style.animationFillMode="forwards",p=x.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=A)})}},_=j=>{j.target===t&&(o.current=wh(s.current))};return t.addEventListener("animationstart",_),t.addEventListener("animationcancel",w),t.addEventListener("animationend",w),()=>{x.clearTimeout(p),t.removeEventListener("animationstart",_),t.removeEventListener("animationcancel",w),t.removeEventListener("animationend",w)}}else f("ANIMATION_END")},[t,f]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:v.useCallback(p=>{s.current=p?getComputedStyle(p):null,r(p)},[])}}function wh(e){return(e==null?void 0:e.animationName)||"none"}function MR(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var LR=E0[" useInsertionEffect ".trim().toString()]||kr;function sa({prop:e,defaultProp:t,onChange:r=()=>{},caller:s}){const[a,o,d]=FR({defaultProp:t,onChange:r}),u=e!==void 0,f=u?e:a;{const x=v.useRef(e!==void 0);v.useEffect(()=>{const w=x.current;w!==u&&console.warn(`${s} is changing from ${w?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),x.current=u},[u,s])}const p=v.useCallback(x=>{var w;if(u){const _=BR(x)?x(e):x;_!==e&&((w=d.current)==null||w.call(d,_))}else o(x)},[u,e,o,d]);return[f,p]}function FR({defaultProp:e,onChange:t}){const[r,s]=v.useState(e),a=v.useRef(r),o=v.useRef(t);return LR(()=>{o.current=t},[t]),v.useEffect(()=>{var d;a.current!==r&&((d=o.current)==null||d.call(o,r),a.current=r)},[r,a]),[r,s,o]}function BR(e){return typeof e=="function"}var QN=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),zR="VisuallyHidden",pm=v.forwardRef((e,t)=>n.jsx(He.span,{...e,ref:t,style:{...QN,...e.style}}));pm.displayName=zR;var UR=pm,v1="ToastProvider",[w1,$R,qR]=mm("Toast"),[ZN]=qr("Toast",[qR]),[VR,gm]=ZN(v1),JN=e=>{const{__scopeToast:t,label:r="Notification",duration:s=5e3,swipeDirection:a="right",swipeThreshold:o=50,children:d}=e,[u,f]=v.useState(null),[p,x]=v.useState(0),w=v.useRef(!1),_=v.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${v1}\`. Expected non-empty \`string\`.`),n.jsx(w1.Provider,{scope:t,children:n.jsx(VR,{scope:t,label:r,duration:s,swipeDirection:a,swipeThreshold:o,toastCount:p,viewport:u,onViewportChange:f,onToastAdd:v.useCallback(()=>x(j=>j+1),[]),onToastRemove:v.useCallback(()=>x(j=>j-1),[]),isFocusedToastEscapeKeyDownRef:w,isClosePausedRef:_,children:d})})};JN.displayName=v1;var ej="ToastViewport",WR=["F8"],Cx="toast.viewportPause",Ex="toast.viewportResume",tj=v.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:s=WR,label:a="Notifications ({hotkey})",...o}=e,d=gm(ej,r),u=$R(r),f=v.useRef(null),p=v.useRef(null),x=v.useRef(null),w=v.useRef(null),_=at(t,w,d.onViewportChange),j=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),N=d.toastCount>0;v.useEffect(()=>{const A=S=>{var b;s.length!==0&&s.every(T=>S[T]||S.code===T)&&((b=w.current)==null||b.focus())};return document.addEventListener("keydown",A),()=>document.removeEventListener("keydown",A)},[s]),v.useEffect(()=>{const A=f.current,S=w.current;if(N&&A&&S){const k=()=>{if(!d.isClosePausedRef.current){const L=new CustomEvent(Cx);S.dispatchEvent(L),d.isClosePausedRef.current=!0}},b=()=>{if(d.isClosePausedRef.current){const L=new CustomEvent(Ex);S.dispatchEvent(L),d.isClosePausedRef.current=!1}},T=L=>{!A.contains(L.relatedTarget)&&b()},O=()=>{A.contains(document.activeElement)||b()};return A.addEventListener("focusin",k),A.addEventListener("focusout",T),A.addEventListener("pointermove",k),A.addEventListener("pointerleave",O),window.addEventListener("blur",k),window.addEventListener("focus",b),()=>{A.removeEventListener("focusin",k),A.removeEventListener("focusout",T),A.removeEventListener("pointermove",k),A.removeEventListener("pointerleave",O),window.removeEventListener("blur",k),window.removeEventListener("focus",b)}}},[N,d.isClosePausedRef]);const C=v.useCallback(({tabbingDirection:A})=>{const k=u().map(b=>{const T=b.ref.current,O=[T,...s8(T)];return A==="forwards"?O:O.reverse()});return(A==="forwards"?k.reverse():k).flat()},[u]);return v.useEffect(()=>{const A=w.current;if(A){const S=k=>{var O,L,R;const b=k.altKey||k.ctrlKey||k.metaKey;if(k.key==="Tab"&&!b){const M=document.activeElement,P=k.shiftKey;if(k.target===A&&P){(O=p.current)==null||O.focus();return}const B=C({tabbingDirection:P?"backwards":"forwards"}),V=B.findIndex(ee=>ee===M);sg(B.slice(V+1))?k.preventDefault():P?(L=p.current)==null||L.focus():(R=x.current)==null||R.focus()}};return A.addEventListener("keydown",S),()=>A.removeEventListener("keydown",S)}},[u,C]),n.jsxs(RR,{ref:f,role:"region","aria-label":a.replace("{hotkey}",j),tabIndex:-1,style:{pointerEvents:N?void 0:"none"},children:[N&&n.jsx(Sx,{ref:p,onFocusFromOutsideViewport:()=>{const A=C({tabbingDirection:"forwards"});sg(A)}}),n.jsx(w1.Slot,{scope:r,children:n.jsx(He.ol,{tabIndex:-1,...o,ref:_})}),N&&n.jsx(Sx,{ref:x,onFocusFromOutsideViewport:()=>{const A=C({tabbingDirection:"backwards"});sg(A)}})]})});tj.displayName=ej;var rj="ToastFocusProxy",Sx=v.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:s,...a}=e,o=gm(rj,r);return n.jsx(pm,{tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:d=>{var p;const u=d.relatedTarget;!((p=o.viewport)!=null&&p.contains(u))&&s()}})});Sx.displayName=rj;var ju="Toast",HR="toast.swipeStart",GR="toast.swipeMove",XR="toast.swipeCancel",KR="toast.swipeEnd",nj=v.forwardRef((e,t)=>{const{forceMount:r,open:s,defaultOpen:a,onOpenChange:o,...d}=e,[u,f]=sa({prop:s,defaultProp:a??!0,onChange:o,caller:ju});return n.jsx(Vr,{present:r||u,children:n.jsx(ZR,{open:u,...d,ref:t,onClose:()=>f(!1),onPause:Cr(e.onPause),onResume:Cr(e.onResume),onSwipeStart:De(e.onSwipeStart,p=>{p.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:De(e.onSwipeMove,p=>{const{x,y:w}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","move"),p.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${x}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${w}px`)}),onSwipeCancel:De(e.onSwipeCancel,p=>{p.currentTarget.setAttribute("data-swipe","cancel"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:De(e.onSwipeEnd,p=>{const{x,y:w}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","end"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${x}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${w}px`),f(!1)})})})});nj.displayName=ju;var[YR,QR]=ZN(ju,{onClose(){}}),ZR=v.forwardRef((e,t)=>{const{__scopeToast:r,type:s="foreground",duration:a,open:o,onClose:d,onEscapeKeyDown:u,onPause:f,onResume:p,onSwipeStart:x,onSwipeMove:w,onSwipeCancel:_,onSwipeEnd:j,...N}=e,C=gm(ju,r),[A,S]=v.useState(null),k=at(t,ee=>S(ee)),b=v.useRef(null),T=v.useRef(null),O=a||C.duration,L=v.useRef(0),R=v.useRef(O),M=v.useRef(0),{onToastAdd:P,onToastRemove:q}=C,G=Cr(()=>{var X;(A==null?void 0:A.contains(document.activeElement))&&((X=C.viewport)==null||X.focus()),d()}),B=v.useCallback(ee=>{!ee||ee===1/0||(window.clearTimeout(M.current),L.current=new Date().getTime(),M.current=window.setTimeout(G,ee))},[G]);v.useEffect(()=>{const ee=C.viewport;if(ee){const X=()=>{B(R.current),p==null||p()},le=()=>{const ue=new Date().getTime()-L.current;R.current=R.current-ue,window.clearTimeout(M.current),f==null||f()};return ee.addEventListener(Cx,le),ee.addEventListener(Ex,X),()=>{ee.removeEventListener(Cx,le),ee.removeEventListener(Ex,X)}}},[C.viewport,O,f,p,B]),v.useEffect(()=>{o&&!C.isClosePausedRef.current&&B(O)},[o,O,C.isClosePausedRef,B]),v.useEffect(()=>(P(),()=>q()),[P,q]);const V=v.useMemo(()=>A?dj(A):null,[A]);return C.viewport?n.jsxs(n.Fragment,{children:[V&&n.jsx(JR,{__scopeToast:r,role:"status","aria-live":s==="foreground"?"assertive":"polite",children:V}),n.jsx(YR,{scope:r,onClose:G,children:cl.createPortal(n.jsx(w1.ItemSlot,{scope:r,children:n.jsx(IR,{asChild:!0,onEscapeKeyDown:De(u,()=>{C.isFocusedToastEscapeKeyDownRef.current||G(),C.isFocusedToastEscapeKeyDownRef.current=!1}),children:n.jsx(He.li,{tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":C.swipeDirection,...N,ref:k,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:De(e.onKeyDown,ee=>{ee.key==="Escape"&&(u==null||u(ee.nativeEvent),ee.nativeEvent.defaultPrevented||(C.isFocusedToastEscapeKeyDownRef.current=!0,G()))}),onPointerDown:De(e.onPointerDown,ee=>{ee.button===0&&(b.current={x:ee.clientX,y:ee.clientY})}),onPointerMove:De(e.onPointerMove,ee=>{if(!b.current)return;const X=ee.clientX-b.current.x,le=ee.clientY-b.current.y,ue=!!T.current,oe=["left","right"].includes(C.swipeDirection),te=["left","up"].includes(C.swipeDirection)?Math.min:Math.max,be=oe?te(0,X):0,ve=oe?0:te(0,le),H=ee.pointerType==="touch"?10:2,J={x:be,y:ve},K={originalEvent:ee,delta:J};ue?(T.current=J,yh(GR,w,K,{discrete:!1})):cy(J,C.swipeDirection,H)?(T.current=J,yh(HR,x,K,{discrete:!1}),ee.target.setPointerCapture(ee.pointerId)):(Math.abs(X)>H||Math.abs(le)>H)&&(b.current=null)}),onPointerUp:De(e.onPointerUp,ee=>{const X=T.current,le=ee.target;if(le.hasPointerCapture(ee.pointerId)&&le.releasePointerCapture(ee.pointerId),T.current=null,b.current=null,X){const ue=ee.currentTarget,oe={originalEvent:ee,delta:X};cy(X,C.swipeDirection,C.swipeThreshold)?yh(KR,j,oe,{discrete:!0}):yh(XR,_,oe,{discrete:!0}),ue.addEventListener("click",te=>te.preventDefault(),{once:!0})}})})})}),C.viewport)})]}):null}),JR=e=>{const{__scopeToast:t,children:r,...s}=e,a=gm(ju,t),[o,d]=v.useState(!1),[u,f]=v.useState(!1);return r8(()=>d(!0)),v.useEffect(()=>{const p=window.setTimeout(()=>f(!0),1e3);return()=>window.clearTimeout(p)},[]),u?null:n.jsx(Fc,{asChild:!0,children:n.jsx(pm,{...s,children:o&&n.jsxs(n.Fragment,{children:[a.label," ",r]})})})},e8="ToastTitle",sj=v.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e;return n.jsx(He.div,{...s,ref:t})});sj.displayName=e8;var t8="ToastDescription",aj=v.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e;return n.jsx(He.div,{...s,ref:t})});aj.displayName=t8;var ij="ToastAction",oj=v.forwardRef((e,t)=>{const{altText:r,...s}=e;return r.trim()?n.jsx(cj,{altText:r,asChild:!0,children:n.jsx(y1,{...s,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${ij}\`. Expected non-empty \`string\`.`),null)});oj.displayName=ij;var lj="ToastClose",y1=v.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e,a=QR(lj,r);return n.jsx(cj,{asChild:!0,children:n.jsx(He.button,{type:"button",...s,ref:t,onClick:De(e.onClick,a.onClose)})})});y1.displayName=lj;var cj=v.forwardRef((e,t)=>{const{__scopeToast:r,altText:s,...a}=e;return n.jsx(He.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...a,ref:t})});function dj(e){const t=[];return Array.from(e.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&t.push(s.textContent),n8(s)){const a=s.ariaHidden||s.hidden||s.style.display==="none",o=s.dataset.radixToastAnnounceExclude==="";if(!a)if(o){const d=s.dataset.radixToastAnnounceAlt;d&&t.push(d)}else t.push(...dj(s))}}),t}function yh(e,t,r,{discrete:s}){const a=r.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),s?x1(a,o):a.dispatchEvent(o)}var cy=(e,t,r=0)=>{const s=Math.abs(e.x),a=Math.abs(e.y),o=s>a;return t==="left"||t==="right"?o&&s>r:!o&&a>r};function r8(e=()=>{}){const t=Cr(e);kr(()=>{let r=0,s=0;return r=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(s)}},[t])}function n8(e){return e.nodeType===e.ELEMENT_NODE}function s8(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function sg(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var a8=JN,uj=tj,hj=nj,fj=sj,mj=aj,pj=oj,gj=y1;function xj(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=xj(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function vj(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=xj(e))&&(s&&(s+=" "),s+=t);return s}const dy=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,uy=vj,Cu=(e,t)=>r=>{var s;if((t==null?void 0:t.variants)==null)return uy(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:o}=t,d=Object.keys(a).map(p=>{const x=r==null?void 0:r[p],w=o==null?void 0:o[p];if(x===null)return null;const _=dy(x)||dy(w);return a[p][_]}),u=r&&Object.entries(r).reduce((p,x)=>{let[w,_]=x;return _===void 0||(p[w]=_),p},{}),f=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((p,x)=>{let{class:w,className:_,...j}=x;return Object.entries(j).every(N=>{let[C,A]=N;return Array.isArray(A)?A.includes({...o,...u}[C]):{...o,...u}[C]===A})?[...p,w,_]:p},[]);return uy(e,d,f,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),wj=(...e)=>e.filter((t,r,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var o8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l8=v.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:a="",children:o,iconNode:d,...u},f)=>v.createElement("svg",{ref:f,...o8,width:t,height:t,stroke:e,strokeWidth:s?Number(r)*24/Number(t):r,className:wj("lucide",a),...u},[...d.map(([p,x])=>v.createElement(p,x)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=(e,t)=>{const r=v.forwardRef(({className:s,...a},o)=>v.createElement(l8,{ref:o,iconNode:t,className:wj(`lucide-${i8(e)}`,s),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=Ue("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hd=Ue("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c8=Ue("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=Ue("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=Ue("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=Ue("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=Ue("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=Ue("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=Ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=Ue("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=Ue("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d8=Ue("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u8=Ue("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=Ue("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=Ue("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hy=Ue("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h8=Ue("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=Ue("CircleStop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=Ue("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=Ue("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=Ue("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=Ue("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=Ue("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f8=Ue("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m8=Ue("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=Ue("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=Ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p8=Ue("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=Ue("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=Ue("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=Ue("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=Ue("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=Ue("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=Ue("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=Ue("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=Ue("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=Ue("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=Ue("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g8=Ue("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=Ue("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x8=Ue("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=Ue("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1=Ue("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=Ue("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=Ue("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=Ue("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=Ue("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=Ue("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=Ue("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=Ue("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v8=Ue("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=Ue("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=Ue("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=Ue("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w8=Ue("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y8=Ue("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b8=Ue("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=Ue("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=Ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _8=Ue("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=Ue("Radar",[["path",{d:"M19.07 4.93A10 10 0 0 0 6.99 3.34",key:"z3du51"}],["path",{d:"M4 6h.01",key:"oypzma"}],["path",{d:"M2.29 9.62A10 10 0 1 0 21.31 8.35",key:"qzzz0"}],["path",{d:"M16.24 7.76A6 6 0 1 0 8.23 16.67",key:"1yjesh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M17.99 11.66A6 6 0 0 1 15.77 16.67",key:"1u2y91"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"m13.41 10.59 5.66-5.66",key:"mhq4k0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N8=Ue("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=Ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=Ue("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=Ue("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=Ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=Ue("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=Ue("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j8=Ue("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=Ue("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=Ue("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=Ue("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=Ue("SwitchCamera",[["path",{d:"M11 19H4a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h5",key:"mtk2lu"}],["path",{d:"M13 5h7a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-5",key:"120jsl"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"m18 22-3-3 3-3",key:"kgdoj7"}],["path",{d:"m6 2 3 3-3 3",key:"1fnbkv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=Ue("Text",[["path",{d:"M17 6.1H3",key:"wptmhv"}],["path",{d:"M21 12.1H3",key:"1j38uz"}],["path",{d:"M15.1 18H3",key:"1nb16a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=Ue("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=Ue("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=Ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C8=Ue("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=Ue("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=Ue("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=Ue("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=Ue("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=Ue("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E8=Ue("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=Ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),A1="-",S8=e=>{const t=k8(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:d=>{const u=d.split(A1);return u[0]===""&&u.length!==1&&u.shift(),Tj(u,t)||A8(d)},getConflictingClassGroupIds:(d,u)=>{const f=r[d]||[];return u&&s[d]?[...f,...s[d]]:f}}},Tj=(e,t)=>{var d;if(e.length===0)return t.classGroupId;const r=e[0],s=t.nextPart.get(r),a=s?Tj(e.slice(1),s):void 0;if(a)return a;if(t.validators.length===0)return;const o=e.join(A1);return(d=t.validators.find(({validator:u})=>u(o)))==null?void 0:d.classGroupId},vy=/^\[(.+)\]$/,A8=e=>{if(vy.test(e)){const t=vy.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},k8=e=>{const{theme:t,prefix:r}=e,s={nextPart:new Map,validators:[]};return I8(Object.entries(e.classGroups),r).forEach(([o,d])=>{Ix(d,s,o,t)}),s},Ix=(e,t,r,s)=>{e.forEach(a=>{if(typeof a=="string"){const o=a===""?t:wy(t,a);o.classGroupId=r;return}if(typeof a=="function"){if(T8(a)){Ix(a(s),t,r,s);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([o,d])=>{Ix(d,wy(t,o),r,s)})})},wy=(e,t)=>{let r=e;return t.split(A1).forEach(s=>{r.nextPart.has(s)||r.nextPart.set(s,{nextPart:new Map,validators:[]}),r=r.nextPart.get(s)}),r},T8=e=>e.isThemeGetter,I8=(e,t)=>t?e.map(([r,s])=>{const a=s.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([d,u])=>[t+d,u])):o);return[r,a]}):e,R8=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,s=new Map;const a=(o,d)=>{r.set(o,d),t++,t>e&&(t=0,s=r,r=new Map)};return{get(o){let d=r.get(o);if(d!==void 0)return d;if((d=s.get(o))!==void 0)return a(o,d),d},set(o,d){r.has(o)?r.set(o,d):a(o,d)}}},Ij="!",P8=e=>{const{separator:t,experimentalParseClassName:r}=e,s=t.length===1,a=t[0],o=t.length,d=u=>{const f=[];let p=0,x=0,w;for(let A=0;A<u.length;A++){let S=u[A];if(p===0){if(S===a&&(s||u.slice(A,A+o)===t)){f.push(u.slice(x,A)),x=A+o;continue}if(S==="/"){w=A;continue}}S==="["?p++:S==="]"&&p--}const _=f.length===0?u:u.substring(x),j=_.startsWith(Ij),N=j?_.substring(1):_,C=w&&w>x?w-x:void 0;return{modifiers:f,hasImportantModifier:j,baseClassName:N,maybePostfixModifierPosition:C}};return r?u=>r({className:u,parseClassName:d}):d},O8=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(s=>{s[0]==="["?(t.push(...r.sort(),s),r=[]):r.push(s)}),t.push(...r.sort()),t},D8=e=>({cache:R8(e.cacheSize),parseClassName:P8(e),...S8(e)}),M8=/\s+/,L8=(e,t)=>{const{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:a}=t,o=[],d=e.trim().split(M8);let u="";for(let f=d.length-1;f>=0;f-=1){const p=d[f],{modifiers:x,hasImportantModifier:w,baseClassName:_,maybePostfixModifierPosition:j}=r(p);let N=!!j,C=s(N?_.substring(0,j):_);if(!C){if(!N){u=p+(u.length>0?" "+u:u);continue}if(C=s(_),!C){u=p+(u.length>0?" "+u:u);continue}N=!1}const A=O8(x).join(":"),S=w?A+Ij:A,k=S+C;if(o.includes(k))continue;o.push(k);const b=a(C,N);for(let T=0;T<b.length;++T){const O=b[T];o.push(S+O)}u=p+(u.length>0?" "+u:u)}return u};function F8(){let e=0,t,r,s="";for(;e<arguments.length;)(t=arguments[e++])&&(r=Rj(t))&&(s&&(s+=" "),s+=r);return s}const Rj=e=>{if(typeof e=="string")return e;let t,r="";for(let s=0;s<e.length;s++)e[s]&&(t=Rj(e[s]))&&(r&&(r+=" "),r+=t);return r};function B8(e,...t){let r,s,a,o=d;function d(f){const p=t.reduce((x,w)=>w(x),e());return r=D8(p),s=r.cache.get,a=r.cache.set,o=u,u(f)}function u(f){const p=s(f);if(p)return p;const x=L8(f,r);return a(f,x),x}return function(){return o(F8.apply(null,arguments))}}const ir=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},Pj=/^\[(?:([a-z-]+):)?(.+)\]$/i,z8=/^\d+\/\d+$/,U8=new Set(["px","full","screen"]),$8=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,q8=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,V8=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,W8=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,H8=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ma=e=>ac(e)||U8.has(e)||z8.test(e),ui=e=>Uc(e,"length",eP),ac=e=>!!e&&!Number.isNaN(Number(e)),ig=e=>Uc(e,"number",ac),fd=e=>!!e&&Number.isInteger(Number(e)),G8=e=>e.endsWith("%")&&ac(e.slice(0,-1)),gt=e=>Pj.test(e),hi=e=>$8.test(e),X8=new Set(["length","size","percentage"]),K8=e=>Uc(e,X8,Oj),Y8=e=>Uc(e,"position",Oj),Q8=new Set(["image","url"]),Z8=e=>Uc(e,Q8,rP),J8=e=>Uc(e,"",tP),md=()=>!0,Uc=(e,t,r)=>{const s=Pj.exec(e);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):r(s[2]):!1},eP=e=>q8.test(e)&&!V8.test(e),Oj=()=>!1,tP=e=>W8.test(e),rP=e=>H8.test(e),nP=()=>{const e=ir("colors"),t=ir("spacing"),r=ir("blur"),s=ir("brightness"),a=ir("borderColor"),o=ir("borderRadius"),d=ir("borderSpacing"),u=ir("borderWidth"),f=ir("contrast"),p=ir("grayscale"),x=ir("hueRotate"),w=ir("invert"),_=ir("gap"),j=ir("gradientColorStops"),N=ir("gradientColorStopPositions"),C=ir("inset"),A=ir("margin"),S=ir("opacity"),k=ir("padding"),b=ir("saturate"),T=ir("scale"),O=ir("sepia"),L=ir("skew"),R=ir("space"),M=ir("translate"),P=()=>["auto","contain","none"],q=()=>["auto","hidden","clip","visible","scroll"],G=()=>["auto",gt,t],B=()=>[gt,t],V=()=>["",Ma,ui],ee=()=>["auto",ac,gt],X=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],le=()=>["solid","dashed","dotted","double","none"],ue=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],oe=()=>["start","end","center","between","around","evenly","stretch"],te=()=>["","0",gt],be=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ve=()=>[ac,gt];return{cacheSize:500,separator:":",theme:{colors:[md],spacing:[Ma,ui],blur:["none","",hi,gt],brightness:ve(),borderColor:[e],borderRadius:["none","","full",hi,gt],borderSpacing:B(),borderWidth:V(),contrast:ve(),grayscale:te(),hueRotate:ve(),invert:te(),gap:B(),gradientColorStops:[e],gradientColorStopPositions:[G8,ui],inset:G(),margin:G(),opacity:ve(),padding:B(),saturate:ve(),scale:ve(),sepia:te(),skew:ve(),space:B(),translate:B()},classGroups:{aspect:[{aspect:["auto","square","video",gt]}],container:["container"],columns:[{columns:[hi]}],"break-after":[{"break-after":be()}],"break-before":[{"break-before":be()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...X(),gt]}],overflow:[{overflow:q()}],"overflow-x":[{"overflow-x":q()}],"overflow-y":[{"overflow-y":q()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[C]}],"inset-x":[{"inset-x":[C]}],"inset-y":[{"inset-y":[C]}],start:[{start:[C]}],end:[{end:[C]}],top:[{top:[C]}],right:[{right:[C]}],bottom:[{bottom:[C]}],left:[{left:[C]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",fd,gt]}],basis:[{basis:G()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",gt]}],grow:[{grow:te()}],shrink:[{shrink:te()}],order:[{order:["first","last","none",fd,gt]}],"grid-cols":[{"grid-cols":[md]}],"col-start-end":[{col:["auto",{span:["full",fd,gt]},gt]}],"col-start":[{"col-start":ee()}],"col-end":[{"col-end":ee()}],"grid-rows":[{"grid-rows":[md]}],"row-start-end":[{row:["auto",{span:[fd,gt]},gt]}],"row-start":[{"row-start":ee()}],"row-end":[{"row-end":ee()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",gt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",gt]}],gap:[{gap:[_]}],"gap-x":[{"gap-x":[_]}],"gap-y":[{"gap-y":[_]}],"justify-content":[{justify:["normal",...oe()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...oe(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...oe(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[k]}],px:[{px:[k]}],py:[{py:[k]}],ps:[{ps:[k]}],pe:[{pe:[k]}],pt:[{pt:[k]}],pr:[{pr:[k]}],pb:[{pb:[k]}],pl:[{pl:[k]}],m:[{m:[A]}],mx:[{mx:[A]}],my:[{my:[A]}],ms:[{ms:[A]}],me:[{me:[A]}],mt:[{mt:[A]}],mr:[{mr:[A]}],mb:[{mb:[A]}],ml:[{ml:[A]}],"space-x":[{"space-x":[R]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[R]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",gt,t]}],"min-w":[{"min-w":[gt,t,"min","max","fit"]}],"max-w":[{"max-w":[gt,t,"none","full","min","max","fit","prose",{screen:[hi]},hi]}],h:[{h:[gt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[gt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[gt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[gt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",hi,ui]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ig]}],"font-family":[{font:[md]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",gt]}],"line-clamp":[{"line-clamp":["none",ac,ig]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ma,gt]}],"list-image":[{"list-image":["none",gt]}],"list-style-type":[{list:["none","disc","decimal",gt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[S]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[S]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...le(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ma,ui]}],"underline-offset":[{"underline-offset":["auto",Ma,gt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:B()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",gt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",gt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[S]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...X(),Y8]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",K8]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Z8]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[N]}],"gradient-via-pos":[{via:[N]}],"gradient-to-pos":[{to:[N]}],"gradient-from":[{from:[j]}],"gradient-via":[{via:[j]}],"gradient-to":[{to:[j]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[S]}],"border-style":[{border:[...le(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[S]}],"divide-style":[{divide:le()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...le()]}],"outline-offset":[{"outline-offset":[Ma,gt]}],"outline-w":[{outline:[Ma,ui]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[S]}],"ring-offset-w":[{"ring-offset":[Ma,ui]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",hi,J8]}],"shadow-color":[{shadow:[md]}],opacity:[{opacity:[S]}],"mix-blend":[{"mix-blend":[...ue(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ue()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[s]}],contrast:[{contrast:[f]}],"drop-shadow":[{"drop-shadow":["","none",hi,gt]}],grayscale:[{grayscale:[p]}],"hue-rotate":[{"hue-rotate":[x]}],invert:[{invert:[w]}],saturate:[{saturate:[b]}],sepia:[{sepia:[O]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[f]}],"backdrop-grayscale":[{"backdrop-grayscale":[p]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[x]}],"backdrop-invert":[{"backdrop-invert":[w]}],"backdrop-opacity":[{"backdrop-opacity":[S]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[O]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[d]}],"border-spacing-x":[{"border-spacing-x":[d]}],"border-spacing-y":[{"border-spacing-y":[d]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",gt]}],duration:[{duration:ve()}],ease:[{ease:["linear","in","out","in-out",gt]}],delay:[{delay:ve()}],animate:[{animate:["none","spin","ping","pulse","bounce",gt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[T]}],"scale-x":[{"scale-x":[T]}],"scale-y":[{"scale-y":[T]}],rotate:[{rotate:[fd,gt]}],"translate-x":[{"translate-x":[M]}],"translate-y":[{"translate-y":[M]}],"skew-x":[{"skew-x":[L]}],"skew-y":[{"skew-y":[L]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",gt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",gt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":B()}],"scroll-mx":[{"scroll-mx":B()}],"scroll-my":[{"scroll-my":B()}],"scroll-ms":[{"scroll-ms":B()}],"scroll-me":[{"scroll-me":B()}],"scroll-mt":[{"scroll-mt":B()}],"scroll-mr":[{"scroll-mr":B()}],"scroll-mb":[{"scroll-mb":B()}],"scroll-ml":[{"scroll-ml":B()}],"scroll-p":[{"scroll-p":B()}],"scroll-px":[{"scroll-px":B()}],"scroll-py":[{"scroll-py":B()}],"scroll-ps":[{"scroll-ps":B()}],"scroll-pe":[{"scroll-pe":B()}],"scroll-pt":[{"scroll-pt":B()}],"scroll-pr":[{"scroll-pr":B()}],"scroll-pb":[{"scroll-pb":B()}],"scroll-pl":[{"scroll-pl":B()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",gt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ma,ui,ig]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},sP=B8(nP);function Be(...e){return sP(vj(e))}const aP=a8,Dj=v.forwardRef(({className:e,...t},r)=>n.jsx(uj,{ref:r,className:Be("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));Dj.displayName=uj.displayName;const iP=Cu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Mj=v.forwardRef(({className:e,variant:t,...r},s)=>n.jsx(hj,{ref:s,className:Be(iP({variant:t}),e),...r}));Mj.displayName=hj.displayName;const oP=v.forwardRef(({className:e,...t},r)=>n.jsx(pj,{ref:r,className:Be("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));oP.displayName=pj.displayName;const Lj=v.forwardRef(({className:e,...t},r)=>n.jsx(gj,{ref:r,className:Be("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:n.jsx(Jr,{className:"h-4 w-4"})}));Lj.displayName=gj.displayName;const Fj=v.forwardRef(({className:e,...t},r)=>n.jsx(fj,{ref:r,className:Be("text-sm font-semibold",e),...t}));Fj.displayName=fj.displayName;const Bj=v.forwardRef(({className:e,...t},r)=>n.jsx(mj,{ref:r,className:Be("text-sm opacity-90",e),...t}));Bj.displayName=mj.displayName;function lP(){const{toasts:e}=WN();return n.jsxs(aP,{children:[e.map(function({id:t,title:r,description:s,action:a,...o}){return n.jsxs(Mj,{...o,children:[n.jsxs("div",{className:"grid gap-1",children:[r&&n.jsx(Fj,{children:r}),s&&n.jsx(Bj,{children:s})]}),a,n.jsx(Lj,{})]},t)}),n.jsx(Dj,{})]})}var yy=["light","dark"],cP="(prefers-color-scheme: dark)",dP=v.createContext(void 0),uP={setTheme:e=>{},themes:[]},hP=()=>{var e;return(e=v.useContext(dP))!=null?e:uP};v.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:s,enableColorScheme:a,defaultTheme:o,value:d,attrs:u,nonce:f})=>{let p=o==="system",x=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${u.map(N=>`'${N}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,w=a?yy.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",_=(N,C=!1,A=!0)=>{let S=d?d[N]:N,k=C?N+"|| ''":`'${S}'`,b="";return a&&A&&!C&&yy.includes(N)&&(b+=`d.style.colorScheme = '${N}';`),r==="class"?C||S?b+=`c.add(${k})`:b+="null":S&&(b+=`d[s](n,${k})`),b},j=e?`!function(){${x}${_(e)}}()`:s?`!function(){try{${x}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${p})){var t='${cP}',m=window.matchMedia(t);if(m.media!==t||m.matches){${_("dark")}}else{${_("light")}}}else if(e){${d?`var x=${JSON.stringify(d)};`:""}${_(d?"x[e]":"e",!0)}}${p?"":"else{"+_(o,!1,!1)+"}"}${w}}catch(e){}}()`:`!function(){try{${x}var e=localStorage.getItem('${t}');if(e){${d?`var x=${JSON.stringify(d)};`:""}${_(d?"x[e]":"e",!0)}}else{${_(o,!1,!1)};}${w}}catch(t){}}();`;return v.createElement("script",{nonce:f,dangerouslySetInnerHTML:{__html:j}})});var fP=e=>{switch(e){case"success":return gP;case"info":return vP;case"warning":return xP;case"error":return wP;default:return null}},mP=Array(12).fill(0),pP=({visible:e,className:t})=>$e.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},$e.createElement("div",{className:"sonner-spinner"},mP.map((r,s)=>$e.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),gP=$e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$e.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),xP=$e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},$e.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),vP=$e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),wP=$e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),yP=$e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},$e.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),$e.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),bP=()=>{let[e,t]=$e.useState(document.hidden);return $e.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},Rx=1,_P=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...s}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Rx++,o=this.toasts.find(u=>u.id===a),d=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),o?this.toasts=this.toasts.map(u=>u.id===a?(this.publish({...u,...e,id:a,title:r}),{...u,...e,id:a,dismissible:d,title:r}):u):this.addToast({title:r,...s,dismissible:d,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let s=e instanceof Promise?e:e(),a=r!==void 0,o,d=s.then(async f=>{if(o=["resolve",f],$e.isValidElement(f))a=!1,this.create({id:r,type:"default",message:f});else if(jP(f)&&!f.ok){a=!1;let p=typeof t.error=="function"?await t.error(`HTTP error! status: ${f.status}`):t.error,x=typeof t.description=="function"?await t.description(`HTTP error! status: ${f.status}`):t.description;this.create({id:r,type:"error",message:p,description:x})}else if(t.success!==void 0){a=!1;let p=typeof t.success=="function"?await t.success(f):t.success,x=typeof t.description=="function"?await t.description(f):t.description;this.create({id:r,type:"success",message:p,description:x})}}).catch(async f=>{if(o=["reject",f],t.error!==void 0){a=!1;let p=typeof t.error=="function"?await t.error(f):t.error,x=typeof t.description=="function"?await t.description(f):t.description;this.create({id:r,type:"error",message:p,description:x})}}).finally(()=>{var f;a&&(this.dismiss(r),r=void 0),(f=t.finally)==null||f.call(t)}),u=()=>new Promise((f,p)=>d.then(()=>o[0]==="reject"?p(o[1]):f(o[1])).catch(p));return typeof r!="string"&&typeof r!="number"?{unwrap:u}:Object.assign(r,{unwrap:u})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||Rx++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},zn=new _P,NP=(e,t)=>{let r=(t==null?void 0:t.id)||Rx++;return zn.addToast({title:e,...t,id:r}),r},jP=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",CP=NP,EP=()=>zn.toasts,SP=()=>zn.getActiveToasts(),W=Object.assign(CP,{success:zn.success,info:zn.info,warning:zn.warning,error:zn.error,custom:zn.custom,message:zn.message,promise:zn.promise,dismiss:zn.dismiss,loading:zn.loading},{getHistory:EP,getToasts:SP});function AP(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t==="top"&&r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}AP(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function bh(e){return e.label!==void 0}var kP=3,TP="32px",IP="16px",by=4e3,RP=356,PP=14,OP=20,DP=200;function $s(...e){return e.filter(Boolean).join(" ")}function MP(e){let[t,r]=e.split("-"),s=[];return t&&s.push(t),r&&s.push(r),s}var LP=e=>{var t,r,s,a,o,d,u,f,p,x,w;let{invert:_,toast:j,unstyled:N,interacting:C,setHeights:A,visibleToasts:S,heights:k,index:b,toasts:T,expanded:O,removeToast:L,defaultRichColors:R,closeButton:M,style:P,cancelButtonStyle:q,actionButtonStyle:G,className:B="",descriptionClassName:V="",duration:ee,position:X,gap:le,loadingIcon:ue,expandByDefault:oe,classNames:te,icons:be,closeButtonAriaLabel:ve="Close toast",pauseWhenPageIsHidden:H}=e,[J,K]=$e.useState(null),[ae,de]=$e.useState(null),[se,me]=$e.useState(!1),[Re,ze]=$e.useState(!1),[ye,Ne]=$e.useState(!1),[we,Xe]=$e.useState(!1),[_e,Qe]=$e.useState(!1),[ce,Se]=$e.useState(0),[ke,Je]=$e.useState(0),Ae=$e.useRef(j.duration||ee||by),Lt=$e.useRef(null),yt=$e.useRef(null),It=b===0,Xt=b+1<=S,xt=j.type,Wr=j.dismissible!==!1,Qt=j.className||"",Ve=j.descriptionClassName||"",Ie=$e.useMemo(()=>k.findIndex(Ge=>Ge.toastId===j.id)||0,[k,j.id]),dt=$e.useMemo(()=>{var Ge;return(Ge=j.closeButton)!=null?Ge:M},[j.closeButton,M]),it=$e.useMemo(()=>j.duration||ee||by,[j.duration,ee]),ut=$e.useRef(0),Pe=$e.useRef(0),Ot=$e.useRef(0),ht=$e.useRef(null),[Rt,Rn]=X.split("-"),Bs=$e.useMemo(()=>k.reduce((Ge,Pt,pt)=>pt>=Ie?Ge:Ge+Pt.height,0),[k,Ie]),ho=bP(),Et=j.invert||_,fn=xt==="loading";Pe.current=$e.useMemo(()=>Ie*le+Bs,[Ie,Bs]),$e.useEffect(()=>{Ae.current=it},[it]),$e.useEffect(()=>{me(!0)},[]),$e.useEffect(()=>{let Ge=yt.current;if(Ge){let Pt=Ge.getBoundingClientRect().height;return Je(Pt),A(pt=>[{toastId:j.id,height:Pt,position:j.position},...pt]),()=>A(pt=>pt.filter(Hr=>Hr.toastId!==j.id))}},[A,j.id]),$e.useLayoutEffect(()=>{if(!se)return;let Ge=yt.current,Pt=Ge.style.height;Ge.style.height="auto";let pt=Ge.getBoundingClientRect().height;Ge.style.height=Pt,Je(pt),A(Hr=>Hr.find(mn=>mn.toastId===j.id)?Hr.map(mn=>mn.toastId===j.id?{...mn,height:pt}:mn):[{toastId:j.id,height:pt,position:j.position},...Hr])},[se,j.title,j.description,A,j.id]);let Yn=$e.useCallback(()=>{ze(!0),Se(Pe.current),A(Ge=>Ge.filter(Pt=>Pt.toastId!==j.id)),setTimeout(()=>{L(j)},DP)},[j,L,A,Pe]);$e.useEffect(()=>{if(j.promise&&xt==="loading"||j.duration===1/0||j.type==="loading")return;let Ge;return O||C||H&&ho?(()=>{if(Ot.current<ut.current){let Pt=new Date().getTime()-ut.current;Ae.current=Ae.current-Pt}Ot.current=new Date().getTime()})():Ae.current!==1/0&&(ut.current=new Date().getTime(),Ge=setTimeout(()=>{var Pt;(Pt=j.onAutoClose)==null||Pt.call(j,j),Yn()},Ae.current)),()=>clearTimeout(Ge)},[O,C,j,xt,H,ho,Yn]),$e.useEffect(()=>{j.delete&&Yn()},[Yn,j.delete]);function fo(){var Ge,Pt,pt;return be!=null&&be.loading?$e.createElement("div",{className:$s(te==null?void 0:te.loader,(Ge=j==null?void 0:j.classNames)==null?void 0:Ge.loader,"sonner-loader"),"data-visible":xt==="loading"},be.loading):ue?$e.createElement("div",{className:$s(te==null?void 0:te.loader,(Pt=j==null?void 0:j.classNames)==null?void 0:Pt.loader,"sonner-loader"),"data-visible":xt==="loading"},ue):$e.createElement(pP,{className:$s(te==null?void 0:te.loader,(pt=j==null?void 0:j.classNames)==null?void 0:pt.loader),visible:xt==="loading"})}return $e.createElement("li",{tabIndex:0,ref:yt,className:$s(B,Qt,te==null?void 0:te.toast,(t=j==null?void 0:j.classNames)==null?void 0:t.toast,te==null?void 0:te.default,te==null?void 0:te[xt],(r=j==null?void 0:j.classNames)==null?void 0:r[xt]),"data-sonner-toast":"","data-rich-colors":(s=j.richColors)!=null?s:R,"data-styled":!(j.jsx||j.unstyled||N),"data-mounted":se,"data-promise":!!j.promise,"data-swiped":_e,"data-removed":Re,"data-visible":Xt,"data-y-position":Rt,"data-x-position":Rn,"data-index":b,"data-front":It,"data-swiping":ye,"data-dismissible":Wr,"data-type":xt,"data-invert":Et,"data-swipe-out":we,"data-swipe-direction":ae,"data-expanded":!!(O||oe&&se),style:{"--index":b,"--toasts-before":b,"--z-index":T.length-b,"--offset":`${Re?ce:Pe.current}px`,"--initial-height":oe?"auto":`${ke}px`,...P,...j.style},onDragEnd:()=>{Ne(!1),K(null),ht.current=null},onPointerDown:Ge=>{fn||!Wr||(Lt.current=new Date,Se(Pe.current),Ge.target.setPointerCapture(Ge.pointerId),Ge.target.tagName!=="BUTTON"&&(Ne(!0),ht.current={x:Ge.clientX,y:Ge.clientY}))},onPointerUp:()=>{var Ge,Pt,pt,Hr;if(we||!Wr)return;ht.current=null;let mn=Number(((Ge=yt.current)==null?void 0:Ge.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Or=Number(((Pt=yt.current)==null?void 0:Pt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Da=new Date().getTime()-((pt=Lt.current)==null?void 0:pt.getTime()),Dr=J==="x"?mn:Or,gs=Math.abs(Dr)/Da;if(Math.abs(Dr)>=OP||gs>.11){Se(Pe.current),(Hr=j.onDismiss)==null||Hr.call(j,j),de(J==="x"?mn>0?"right":"left":Or>0?"down":"up"),Yn(),Xe(!0),Qe(!1);return}Ne(!1),K(null)},onPointerMove:Ge=>{var Pt,pt,Hr,mn;if(!ht.current||!Wr||((Pt=window.getSelection())==null?void 0:Pt.toString().length)>0)return;let Or=Ge.clientY-ht.current.y,Da=Ge.clientX-ht.current.x,Dr=(pt=e.swipeDirections)!=null?pt:MP(X);!J&&(Math.abs(Da)>1||Math.abs(Or)>1)&&K(Math.abs(Da)>Math.abs(Or)?"x":"y");let gs={x:0,y:0};J==="y"?(Dr.includes("top")||Dr.includes("bottom"))&&(Dr.includes("top")&&Or<0||Dr.includes("bottom")&&Or>0)&&(gs.y=Or):J==="x"&&(Dr.includes("left")||Dr.includes("right"))&&(Dr.includes("left")&&Da<0||Dr.includes("right")&&Da>0)&&(gs.x=Da),(Math.abs(gs.x)>0||Math.abs(gs.y)>0)&&Qe(!0),(Hr=yt.current)==null||Hr.style.setProperty("--swipe-amount-x",`${gs.x}px`),(mn=yt.current)==null||mn.style.setProperty("--swipe-amount-y",`${gs.y}px`)}},dt&&!j.jsx?$e.createElement("button",{"aria-label":ve,"data-disabled":fn,"data-close-button":!0,onClick:fn||!Wr?()=>{}:()=>{var Ge;Yn(),(Ge=j.onDismiss)==null||Ge.call(j,j)},className:$s(te==null?void 0:te.closeButton,(a=j==null?void 0:j.classNames)==null?void 0:a.closeButton)},(o=be==null?void 0:be.close)!=null?o:yP):null,j.jsx||v.isValidElement(j.title)?j.jsx?j.jsx:typeof j.title=="function"?j.title():j.title:$e.createElement($e.Fragment,null,xt||j.icon||j.promise?$e.createElement("div",{"data-icon":"",className:$s(te==null?void 0:te.icon,(d=j==null?void 0:j.classNames)==null?void 0:d.icon)},j.promise||j.type==="loading"&&!j.icon?j.icon||fo():null,j.type!=="loading"?j.icon||(be==null?void 0:be[xt])||fP(xt):null):null,$e.createElement("div",{"data-content":"",className:$s(te==null?void 0:te.content,(u=j==null?void 0:j.classNames)==null?void 0:u.content)},$e.createElement("div",{"data-title":"",className:$s(te==null?void 0:te.title,(f=j==null?void 0:j.classNames)==null?void 0:f.title)},typeof j.title=="function"?j.title():j.title),j.description?$e.createElement("div",{"data-description":"",className:$s(V,Ve,te==null?void 0:te.description,(p=j==null?void 0:j.classNames)==null?void 0:p.description)},typeof j.description=="function"?j.description():j.description):null),v.isValidElement(j.cancel)?j.cancel:j.cancel&&bh(j.cancel)?$e.createElement("button",{"data-button":!0,"data-cancel":!0,style:j.cancelButtonStyle||q,onClick:Ge=>{var Pt,pt;bh(j.cancel)&&Wr&&((pt=(Pt=j.cancel).onClick)==null||pt.call(Pt,Ge),Yn())},className:$s(te==null?void 0:te.cancelButton,(x=j==null?void 0:j.classNames)==null?void 0:x.cancelButton)},j.cancel.label):null,v.isValidElement(j.action)?j.action:j.action&&bh(j.action)?$e.createElement("button",{"data-button":!0,"data-action":!0,style:j.actionButtonStyle||G,onClick:Ge=>{var Pt,pt;bh(j.action)&&((pt=(Pt=j.action).onClick)==null||pt.call(Pt,Ge),!Ge.defaultPrevented&&Yn())},className:$s(te==null?void 0:te.actionButton,(w=j==null?void 0:j.classNames)==null?void 0:w.actionButton)},j.action.label):null))};function _y(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function FP(e,t){let r={};return[e,t].forEach((s,a)=>{let o=a===1,d=o?"--mobile-offset":"--offset",u=o?IP:TP;function f(p){["top","right","bottom","left"].forEach(x=>{r[`${d}-${x}`]=typeof p=="number"?`${p}px`:p})}typeof s=="number"||typeof s=="string"?f(s):typeof s=="object"?["top","right","bottom","left"].forEach(p=>{s[p]===void 0?r[`${d}-${p}`]=u:r[`${d}-${p}`]=typeof s[p]=="number"?`${s[p]}px`:s[p]}):f(u)}),r}var BP=v.forwardRef(function(e,t){let{invert:r,position:s="bottom-right",hotkey:a=["altKey","KeyT"],expand:o,closeButton:d,className:u,offset:f,mobileOffset:p,theme:x="light",richColors:w,duration:_,style:j,visibleToasts:N=kP,toastOptions:C,dir:A=_y(),gap:S=PP,loadingIcon:k,icons:b,containerAriaLabel:T="Notifications",pauseWhenPageIsHidden:O}=e,[L,R]=$e.useState([]),M=$e.useMemo(()=>Array.from(new Set([s].concat(L.filter(H=>H.position).map(H=>H.position)))),[L,s]),[P,q]=$e.useState([]),[G,B]=$e.useState(!1),[V,ee]=$e.useState(!1),[X,le]=$e.useState(x!=="system"?x:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ue=$e.useRef(null),oe=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),te=$e.useRef(null),be=$e.useRef(!1),ve=$e.useCallback(H=>{R(J=>{var K;return(K=J.find(ae=>ae.id===H.id))!=null&&K.delete||zn.dismiss(H.id),J.filter(({id:ae})=>ae!==H.id)})},[]);return $e.useEffect(()=>zn.subscribe(H=>{if(H.dismiss){R(J=>J.map(K=>K.id===H.id?{...K,delete:!0}:K));return}setTimeout(()=>{qN.flushSync(()=>{R(J=>{let K=J.findIndex(ae=>ae.id===H.id);return K!==-1?[...J.slice(0,K),{...J[K],...H},...J.slice(K+1)]:[H,...J]})})})}),[]),$e.useEffect(()=>{if(x!=="system"){le(x);return}if(x==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?le("dark"):le("light")),typeof window>"u")return;let H=window.matchMedia("(prefers-color-scheme: dark)");try{H.addEventListener("change",({matches:J})=>{le(J?"dark":"light")})}catch{H.addListener(({matches:K})=>{try{le(K?"dark":"light")}catch(ae){console.error(ae)}})}},[x]),$e.useEffect(()=>{L.length<=1&&B(!1)},[L]),$e.useEffect(()=>{let H=J=>{var K,ae;a.every(de=>J[de]||J.code===de)&&(B(!0),(K=ue.current)==null||K.focus()),J.code==="Escape"&&(document.activeElement===ue.current||(ae=ue.current)!=null&&ae.contains(document.activeElement))&&B(!1)};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[a]),$e.useEffect(()=>{if(ue.current)return()=>{te.current&&(te.current.focus({preventScroll:!0}),te.current=null,be.current=!1)}},[ue.current]),$e.createElement("section",{ref:t,"aria-label":`${T} ${oe}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},M.map((H,J)=>{var K;let[ae,de]=H.split("-");return L.length?$e.createElement("ol",{key:H,dir:A==="auto"?_y():A,tabIndex:-1,ref:ue,className:u,"data-sonner-toaster":!0,"data-theme":X,"data-y-position":ae,"data-lifted":G&&L.length>1&&!o,"data-x-position":de,style:{"--front-toast-height":`${((K=P[0])==null?void 0:K.height)||0}px`,"--width":`${RP}px`,"--gap":`${S}px`,...j,...FP(f,p)},onBlur:se=>{be.current&&!se.currentTarget.contains(se.relatedTarget)&&(be.current=!1,te.current&&(te.current.focus({preventScroll:!0}),te.current=null))},onFocus:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||be.current||(be.current=!0,te.current=se.relatedTarget)},onMouseEnter:()=>B(!0),onMouseMove:()=>B(!0),onMouseLeave:()=>{V||B(!1)},onDragEnd:()=>B(!1),onPointerDown:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||ee(!0)},onPointerUp:()=>ee(!1)},L.filter(se=>!se.position&&J===0||se.position===H).map((se,me)=>{var Re,ze;return $e.createElement(LP,{key:se.id,icons:b,index:me,toast:se,defaultRichColors:w,duration:(Re=C==null?void 0:C.duration)!=null?Re:_,className:C==null?void 0:C.className,descriptionClassName:C==null?void 0:C.descriptionClassName,invert:r,visibleToasts:N,closeButton:(ze=C==null?void 0:C.closeButton)!=null?ze:d,interacting:V,position:H,style:C==null?void 0:C.style,unstyled:C==null?void 0:C.unstyled,classNames:C==null?void 0:C.classNames,cancelButtonStyle:C==null?void 0:C.cancelButtonStyle,actionButtonStyle:C==null?void 0:C.actionButtonStyle,removeToast:ve,toasts:L.filter(ye=>ye.position==se.position),heights:P.filter(ye=>ye.position==se.position),setHeights:q,expandByDefault:o,gap:S,loadingIcon:k,expanded:G,pauseWhenPageIsHidden:O,swipeDirections:e.swipeDirections})})):null}))});const zP=({...e})=>{const{theme:t="system"}=hP();return n.jsx(BP,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var UP=E0[" useId ".trim().toString()]||(()=>{}),$P=0;function un(e){const[t,r]=v.useState(UP());return kr(()=>{r(s=>s??String($P++))},[e]),t?`radix-${t}`:""}const qP=["top","right","bottom","left"],Xi=Math.min,ts=Math.max,kf=Math.round,_h=Math.floor,ka=e=>({x:e,y:e}),VP={left:"right",right:"left",bottom:"top",top:"bottom"},WP={start:"end",end:"start"};function Px(e,t,r){return ts(e,Xi(t,r))}function Ja(e,t){return typeof e=="function"?e(t):e}function ei(e){return e.split("-")[0]}function $c(e){return e.split("-")[1]}function k1(e){return e==="x"?"y":"x"}function T1(e){return e==="y"?"height":"width"}const HP=new Set(["top","bottom"]);function ja(e){return HP.has(ei(e))?"y":"x"}function I1(e){return k1(ja(e))}function GP(e,t,r){r===void 0&&(r=!1);const s=$c(e),a=I1(e),o=T1(a);let d=a==="x"?s===(r?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(d=Tf(d)),[d,Tf(d)]}function XP(e){const t=Tf(e);return[Ox(e),t,Ox(t)]}function Ox(e){return e.replace(/start|end/g,t=>WP[t])}const Ny=["left","right"],jy=["right","left"],KP=["top","bottom"],YP=["bottom","top"];function QP(e,t,r){switch(e){case"top":case"bottom":return r?t?jy:Ny:t?Ny:jy;case"left":case"right":return t?KP:YP;default:return[]}}function ZP(e,t,r,s){const a=$c(e);let o=QP(ei(e),r==="start",s);return a&&(o=o.map(d=>d+"-"+a),t&&(o=o.concat(o.map(Ox)))),o}function Tf(e){return e.replace(/left|right|bottom|top/g,t=>VP[t])}function JP(e){return{top:0,right:0,bottom:0,left:0,...e}}function zj(e){return typeof e!="number"?JP(e):{top:e,right:e,bottom:e,left:e}}function If(e){const{x:t,y:r,width:s,height:a}=e;return{width:s,height:a,top:r,left:t,right:t+s,bottom:r+a,x:t,y:r}}function Cy(e,t,r){let{reference:s,floating:a}=e;const o=ja(t),d=I1(t),u=T1(d),f=ei(t),p=o==="y",x=s.x+s.width/2-a.width/2,w=s.y+s.height/2-a.height/2,_=s[u]/2-a[u]/2;let j;switch(f){case"top":j={x,y:s.y-a.height};break;case"bottom":j={x,y:s.y+s.height};break;case"right":j={x:s.x+s.width,y:w};break;case"left":j={x:s.x-a.width,y:w};break;default:j={x:s.x,y:s.y}}switch($c(t)){case"start":j[d]-=_*(r&&p?-1:1);break;case"end":j[d]+=_*(r&&p?-1:1);break}return j}const e6=async(e,t,r)=>{const{placement:s="bottom",strategy:a="absolute",middleware:o=[],platform:d}=r,u=o.filter(Boolean),f=await(d.isRTL==null?void 0:d.isRTL(t));let p=await d.getElementRects({reference:e,floating:t,strategy:a}),{x,y:w}=Cy(p,s,f),_=s,j={},N=0;for(let C=0;C<u.length;C++){const{name:A,fn:S}=u[C],{x:k,y:b,data:T,reset:O}=await S({x,y:w,initialPlacement:s,placement:_,strategy:a,middlewareData:j,rects:p,platform:d,elements:{reference:e,floating:t}});x=k??x,w=b??w,j={...j,[A]:{...j[A],...T}},O&&N<=50&&(N++,typeof O=="object"&&(O.placement&&(_=O.placement),O.rects&&(p=O.rects===!0?await d.getElementRects({reference:e,floating:t,strategy:a}):O.rects),{x,y:w}=Cy(p,_,f)),C=-1)}return{x,y:w,placement:_,strategy:a,middlewareData:j}};async function au(e,t){var r;t===void 0&&(t={});const{x:s,y:a,platform:o,rects:d,elements:u,strategy:f}=e,{boundary:p="clippingAncestors",rootBoundary:x="viewport",elementContext:w="floating",altBoundary:_=!1,padding:j=0}=Ja(t,e),N=zj(j),A=u[_?w==="floating"?"reference":"floating":w],S=If(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(A)))==null||r?A:A.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:p,rootBoundary:x,strategy:f})),k=w==="floating"?{x:s,y:a,width:d.floating.width,height:d.floating.height}:d.reference,b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),T=await(o.isElement==null?void 0:o.isElement(b))?await(o.getScale==null?void 0:o.getScale(b))||{x:1,y:1}:{x:1,y:1},O=If(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:k,offsetParent:b,strategy:f}):k);return{top:(S.top-O.top+N.top)/T.y,bottom:(O.bottom-S.bottom+N.bottom)/T.y,left:(S.left-O.left+N.left)/T.x,right:(O.right-S.right+N.right)/T.x}}const t6=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:s,placement:a,rects:o,platform:d,elements:u,middlewareData:f}=t,{element:p,padding:x=0}=Ja(e,t)||{};if(p==null)return{};const w=zj(x),_={x:r,y:s},j=I1(a),N=T1(j),C=await d.getDimensions(p),A=j==="y",S=A?"top":"left",k=A?"bottom":"right",b=A?"clientHeight":"clientWidth",T=o.reference[N]+o.reference[j]-_[j]-o.floating[N],O=_[j]-o.reference[j],L=await(d.getOffsetParent==null?void 0:d.getOffsetParent(p));let R=L?L[b]:0;(!R||!await(d.isElement==null?void 0:d.isElement(L)))&&(R=u.floating[b]||o.floating[N]);const M=T/2-O/2,P=R/2-C[N]/2-1,q=Xi(w[S],P),G=Xi(w[k],P),B=q,V=R-C[N]-G,ee=R/2-C[N]/2+M,X=Px(B,ee,V),le=!f.arrow&&$c(a)!=null&&ee!==X&&o.reference[N]/2-(ee<B?q:G)-C[N]/2<0,ue=le?ee<B?ee-B:ee-V:0;return{[j]:_[j]+ue,data:{[j]:X,centerOffset:ee-X-ue,...le&&{alignmentOffset:ue}},reset:le}}}),r6=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,s;const{placement:a,middlewareData:o,rects:d,initialPlacement:u,platform:f,elements:p}=t,{mainAxis:x=!0,crossAxis:w=!0,fallbackPlacements:_,fallbackStrategy:j="bestFit",fallbackAxisSideDirection:N="none",flipAlignment:C=!0,...A}=Ja(e,t);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const S=ei(a),k=ja(u),b=ei(u)===u,T=await(f.isRTL==null?void 0:f.isRTL(p.floating)),O=_||(b||!C?[Tf(u)]:XP(u)),L=N!=="none";!_&&L&&O.push(...ZP(u,C,N,T));const R=[u,...O],M=await au(t,A),P=[];let q=((s=o.flip)==null?void 0:s.overflows)||[];if(x&&P.push(M[S]),w){const ee=GP(a,d,T);P.push(M[ee[0]],M[ee[1]])}if(q=[...q,{placement:a,overflows:P}],!P.every(ee=>ee<=0)){var G,B;const ee=(((G=o.flip)==null?void 0:G.index)||0)+1,X=R[ee];if(X&&(!(w==="alignment"?k!==ja(X):!1)||q.every(oe=>ja(oe.placement)===k?oe.overflows[0]>0:!0)))return{data:{index:ee,overflows:q},reset:{placement:X}};let le=(B=q.filter(ue=>ue.overflows[0]<=0).sort((ue,oe)=>ue.overflows[1]-oe.overflows[1])[0])==null?void 0:B.placement;if(!le)switch(j){case"bestFit":{var V;const ue=(V=q.filter(oe=>{if(L){const te=ja(oe.placement);return te===k||te==="y"}return!0}).map(oe=>[oe.placement,oe.overflows.filter(te=>te>0).reduce((te,be)=>te+be,0)]).sort((oe,te)=>oe[1]-te[1])[0])==null?void 0:V[0];ue&&(le=ue);break}case"initialPlacement":le=u;break}if(a!==le)return{reset:{placement:le}}}return{}}}};function Ey(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Sy(e){return qP.some(t=>e[t]>=0)}const n6=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:s="referenceHidden",...a}=Ja(e,t);switch(s){case"referenceHidden":{const o=await au(t,{...a,elementContext:"reference"}),d=Ey(o,r.reference);return{data:{referenceHiddenOffsets:d,referenceHidden:Sy(d)}}}case"escaped":{const o=await au(t,{...a,altBoundary:!0}),d=Ey(o,r.floating);return{data:{escapedOffsets:d,escaped:Sy(d)}}}default:return{}}}}},Uj=new Set(["left","top"]);async function s6(e,t){const{placement:r,platform:s,elements:a}=e,o=await(s.isRTL==null?void 0:s.isRTL(a.floating)),d=ei(r),u=$c(r),f=ja(r)==="y",p=Uj.has(d)?-1:1,x=o&&f?-1:1,w=Ja(t,e);let{mainAxis:_,crossAxis:j,alignmentAxis:N}=typeof w=="number"?{mainAxis:w,crossAxis:0,alignmentAxis:null}:{mainAxis:w.mainAxis||0,crossAxis:w.crossAxis||0,alignmentAxis:w.alignmentAxis};return u&&typeof N=="number"&&(j=u==="end"?N*-1:N),f?{x:j*x,y:_*p}:{x:_*p,y:j*x}}const a6=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,s;const{x:a,y:o,placement:d,middlewareData:u}=t,f=await s6(t,e);return d===((r=u.offset)==null?void 0:r.placement)&&(s=u.arrow)!=null&&s.alignmentOffset?{}:{x:a+f.x,y:o+f.y,data:{...f,placement:d}}}}},i6=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:s,placement:a}=t,{mainAxis:o=!0,crossAxis:d=!1,limiter:u={fn:A=>{let{x:S,y:k}=A;return{x:S,y:k}}},...f}=Ja(e,t),p={x:r,y:s},x=await au(t,f),w=ja(ei(a)),_=k1(w);let j=p[_],N=p[w];if(o){const A=_==="y"?"top":"left",S=_==="y"?"bottom":"right",k=j+x[A],b=j-x[S];j=Px(k,j,b)}if(d){const A=w==="y"?"top":"left",S=w==="y"?"bottom":"right",k=N+x[A],b=N-x[S];N=Px(k,N,b)}const C=u.fn({...t,[_]:j,[w]:N});return{...C,data:{x:C.x-r,y:C.y-s,enabled:{[_]:o,[w]:d}}}}}},o6=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:s,placement:a,rects:o,middlewareData:d}=t,{offset:u=0,mainAxis:f=!0,crossAxis:p=!0}=Ja(e,t),x={x:r,y:s},w=ja(a),_=k1(w);let j=x[_],N=x[w];const C=Ja(u,t),A=typeof C=="number"?{mainAxis:C,crossAxis:0}:{mainAxis:0,crossAxis:0,...C};if(f){const b=_==="y"?"height":"width",T=o.reference[_]-o.floating[b]+A.mainAxis,O=o.reference[_]+o.reference[b]-A.mainAxis;j<T?j=T:j>O&&(j=O)}if(p){var S,k;const b=_==="y"?"width":"height",T=Uj.has(ei(a)),O=o.reference[w]-o.floating[b]+(T&&((S=d.offset)==null?void 0:S[w])||0)+(T?0:A.crossAxis),L=o.reference[w]+o.reference[b]+(T?0:((k=d.offset)==null?void 0:k[w])||0)-(T?A.crossAxis:0);N<O?N=O:N>L&&(N=L)}return{[_]:j,[w]:N}}}},l6=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,s;const{placement:a,rects:o,platform:d,elements:u}=t,{apply:f=()=>{},...p}=Ja(e,t),x=await au(t,p),w=ei(a),_=$c(a),j=ja(a)==="y",{width:N,height:C}=o.floating;let A,S;w==="top"||w==="bottom"?(A=w,S=_===(await(d.isRTL==null?void 0:d.isRTL(u.floating))?"start":"end")?"left":"right"):(S=w,A=_==="end"?"top":"bottom");const k=C-x.top-x.bottom,b=N-x.left-x.right,T=Xi(C-x[A],k),O=Xi(N-x[S],b),L=!t.middlewareData.shift;let R=T,M=O;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(M=b),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(R=k),L&&!_){const q=ts(x.left,0),G=ts(x.right,0),B=ts(x.top,0),V=ts(x.bottom,0);j?M=N-2*(q!==0||G!==0?q+G:ts(x.left,x.right)):R=C-2*(B!==0||V!==0?B+V:ts(x.top,x.bottom))}await f({...t,availableWidth:M,availableHeight:R});const P=await d.getDimensions(u.floating);return N!==P.width||C!==P.height?{reset:{rects:!0}}:{}}}};function xm(){return typeof window<"u"}function qc(e){return $j(e)?(e.nodeName||"").toLowerCase():"#document"}function cs(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Pa(e){var t;return(t=($j(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function $j(e){return xm()?e instanceof Node||e instanceof cs(e).Node:!1}function aa(e){return xm()?e instanceof Element||e instanceof cs(e).Element:!1}function Ra(e){return xm()?e instanceof HTMLElement||e instanceof cs(e).HTMLElement:!1}function Ay(e){return!xm()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof cs(e).ShadowRoot}const c6=new Set(["inline","contents"]);function ku(e){const{overflow:t,overflowX:r,overflowY:s,display:a}=ia(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+r)&&!c6.has(a)}const d6=new Set(["table","td","th"]);function u6(e){return d6.has(qc(e))}const h6=[":popover-open",":modal"];function vm(e){return h6.some(t=>{try{return e.matches(t)}catch{return!1}})}const f6=["transform","translate","scale","rotate","perspective"],m6=["transform","translate","scale","rotate","perspective","filter"],p6=["paint","layout","strict","content"];function R1(e){const t=P1(),r=aa(e)?ia(e):e;return f6.some(s=>r[s]?r[s]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||m6.some(s=>(r.willChange||"").includes(s))||p6.some(s=>(r.contain||"").includes(s))}function g6(e){let t=Ki(e);for(;Ra(t)&&!Ac(t);){if(R1(t))return t;if(vm(t))return null;t=Ki(t)}return null}function P1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const x6=new Set(["html","body","#document"]);function Ac(e){return x6.has(qc(e))}function ia(e){return cs(e).getComputedStyle(e)}function wm(e){return aa(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ki(e){if(qc(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Ay(e)&&e.host||Pa(e);return Ay(t)?t.host:t}function qj(e){const t=Ki(e);return Ac(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ra(t)&&ku(t)?t:qj(t)}function iu(e,t,r){var s;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=qj(e),o=a===((s=e.ownerDocument)==null?void 0:s.body),d=cs(a);if(o){const u=Dx(d);return t.concat(d,d.visualViewport||[],ku(a)?a:[],u&&r?iu(u):[])}return t.concat(a,iu(a,[],r))}function Dx(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Vj(e){const t=ia(e);let r=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const a=Ra(e),o=a?e.offsetWidth:r,d=a?e.offsetHeight:s,u=kf(r)!==o||kf(s)!==d;return u&&(r=o,s=d),{width:r,height:s,$:u}}function O1(e){return aa(e)?e:e.contextElement}function ic(e){const t=O1(e);if(!Ra(t))return ka(1);const r=t.getBoundingClientRect(),{width:s,height:a,$:o}=Vj(t);let d=(o?kf(r.width):r.width)/s,u=(o?kf(r.height):r.height)/a;return(!d||!Number.isFinite(d))&&(d=1),(!u||!Number.isFinite(u))&&(u=1),{x:d,y:u}}const v6=ka(0);function Wj(e){const t=cs(e);return!P1()||!t.visualViewport?v6:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function w6(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==cs(e)?!1:t}function Yo(e,t,r,s){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),o=O1(e);let d=ka(1);t&&(s?aa(s)&&(d=ic(s)):d=ic(e));const u=w6(o,r,s)?Wj(o):ka(0);let f=(a.left+u.x)/d.x,p=(a.top+u.y)/d.y,x=a.width/d.x,w=a.height/d.y;if(o){const _=cs(o),j=s&&aa(s)?cs(s):s;let N=_,C=Dx(N);for(;C&&s&&j!==N;){const A=ic(C),S=C.getBoundingClientRect(),k=ia(C),b=S.left+(C.clientLeft+parseFloat(k.paddingLeft))*A.x,T=S.top+(C.clientTop+parseFloat(k.paddingTop))*A.y;f*=A.x,p*=A.y,x*=A.x,w*=A.y,f+=b,p+=T,N=cs(C),C=Dx(N)}}return If({width:x,height:w,x:f,y:p})}function ym(e,t){const r=wm(e).scrollLeft;return t?t.left+r:Yo(Pa(e)).left+r}function Hj(e,t){const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-ym(e,r),a=r.top+t.scrollTop;return{x:s,y:a}}function y6(e){let{elements:t,rect:r,offsetParent:s,strategy:a}=e;const o=a==="fixed",d=Pa(s),u=t?vm(t.floating):!1;if(s===d||u&&o)return r;let f={scrollLeft:0,scrollTop:0},p=ka(1);const x=ka(0),w=Ra(s);if((w||!w&&!o)&&((qc(s)!=="body"||ku(d))&&(f=wm(s)),Ra(s))){const j=Yo(s);p=ic(s),x.x=j.x+s.clientLeft,x.y=j.y+s.clientTop}const _=d&&!w&&!o?Hj(d,f):ka(0);return{width:r.width*p.x,height:r.height*p.y,x:r.x*p.x-f.scrollLeft*p.x+x.x+_.x,y:r.y*p.y-f.scrollTop*p.y+x.y+_.y}}function b6(e){return Array.from(e.getClientRects())}function _6(e){const t=Pa(e),r=wm(e),s=e.ownerDocument.body,a=ts(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),o=ts(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let d=-r.scrollLeft+ym(e);const u=-r.scrollTop;return ia(s).direction==="rtl"&&(d+=ts(t.clientWidth,s.clientWidth)-a),{width:a,height:o,x:d,y:u}}const ky=25;function N6(e,t){const r=cs(e),s=Pa(e),a=r.visualViewport;let o=s.clientWidth,d=s.clientHeight,u=0,f=0;if(a){o=a.width,d=a.height;const x=P1();(!x||x&&t==="fixed")&&(u=a.offsetLeft,f=a.offsetTop)}const p=ym(s);if(p<=0){const x=s.ownerDocument,w=x.body,_=getComputedStyle(w),j=x.compatMode==="CSS1Compat"&&parseFloat(_.marginLeft)+parseFloat(_.marginRight)||0,N=Math.abs(s.clientWidth-w.clientWidth-j);N<=ky&&(o-=N)}else p<=ky&&(o+=p);return{width:o,height:d,x:u,y:f}}const j6=new Set(["absolute","fixed"]);function C6(e,t){const r=Yo(e,!0,t==="fixed"),s=r.top+e.clientTop,a=r.left+e.clientLeft,o=Ra(e)?ic(e):ka(1),d=e.clientWidth*o.x,u=e.clientHeight*o.y,f=a*o.x,p=s*o.y;return{width:d,height:u,x:f,y:p}}function Ty(e,t,r){let s;if(t==="viewport")s=N6(e,r);else if(t==="document")s=_6(Pa(e));else if(aa(t))s=C6(t,r);else{const a=Wj(e);s={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return If(s)}function Gj(e,t){const r=Ki(e);return r===t||!aa(r)||Ac(r)?!1:ia(r).position==="fixed"||Gj(r,t)}function E6(e,t){const r=t.get(e);if(r)return r;let s=iu(e,[],!1).filter(u=>aa(u)&&qc(u)!=="body"),a=null;const o=ia(e).position==="fixed";let d=o?Ki(e):e;for(;aa(d)&&!Ac(d);){const u=ia(d),f=R1(d);!f&&u.position==="fixed"&&(a=null),(o?!f&&!a:!f&&u.position==="static"&&!!a&&j6.has(a.position)||ku(d)&&!f&&Gj(e,d))?s=s.filter(x=>x!==d):a=u,d=Ki(d)}return t.set(e,s),s}function S6(e){let{element:t,boundary:r,rootBoundary:s,strategy:a}=e;const d=[...r==="clippingAncestors"?vm(t)?[]:E6(t,this._c):[].concat(r),s],u=d[0],f=d.reduce((p,x)=>{const w=Ty(t,x,a);return p.top=ts(w.top,p.top),p.right=Xi(w.right,p.right),p.bottom=Xi(w.bottom,p.bottom),p.left=ts(w.left,p.left),p},Ty(t,u,a));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function A6(e){const{width:t,height:r}=Vj(e);return{width:t,height:r}}function k6(e,t,r){const s=Ra(t),a=Pa(t),o=r==="fixed",d=Yo(e,!0,o,t);let u={scrollLeft:0,scrollTop:0};const f=ka(0);function p(){f.x=ym(a)}if(s||!s&&!o)if((qc(t)!=="body"||ku(a))&&(u=wm(t)),s){const j=Yo(t,!0,o,t);f.x=j.x+t.clientLeft,f.y=j.y+t.clientTop}else a&&p();o&&!s&&a&&p();const x=a&&!s&&!o?Hj(a,u):ka(0),w=d.left+u.scrollLeft-f.x-x.x,_=d.top+u.scrollTop-f.y-x.y;return{x:w,y:_,width:d.width,height:d.height}}function og(e){return ia(e).position==="static"}function Iy(e,t){if(!Ra(e)||ia(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Pa(e)===r&&(r=r.ownerDocument.body),r}function Xj(e,t){const r=cs(e);if(vm(e))return r;if(!Ra(e)){let a=Ki(e);for(;a&&!Ac(a);){if(aa(a)&&!og(a))return a;a=Ki(a)}return r}let s=Iy(e,t);for(;s&&u6(s)&&og(s);)s=Iy(s,t);return s&&Ac(s)&&og(s)&&!R1(s)?r:s||g6(e)||r}const T6=async function(e){const t=this.getOffsetParent||Xj,r=this.getDimensions,s=await r(e.floating);return{reference:k6(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function I6(e){return ia(e).direction==="rtl"}const R6={convertOffsetParentRelativeRectToViewportRelativeRect:y6,getDocumentElement:Pa,getClippingRect:S6,getOffsetParent:Xj,getElementRects:T6,getClientRects:b6,getDimensions:A6,getScale:ic,isElement:aa,isRTL:I6};function Kj(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function P6(e,t){let r=null,s;const a=Pa(e);function o(){var u;clearTimeout(s),(u=r)==null||u.disconnect(),r=null}function d(u,f){u===void 0&&(u=!1),f===void 0&&(f=1),o();const p=e.getBoundingClientRect(),{left:x,top:w,width:_,height:j}=p;if(u||t(),!_||!j)return;const N=_h(w),C=_h(a.clientWidth-(x+_)),A=_h(a.clientHeight-(w+j)),S=_h(x),b={rootMargin:-N+"px "+-C+"px "+-A+"px "+-S+"px",threshold:ts(0,Xi(1,f))||1};let T=!0;function O(L){const R=L[0].intersectionRatio;if(R!==f){if(!T)return d();R?d(!1,R):s=setTimeout(()=>{d(!1,1e-7)},1e3)}R===1&&!Kj(p,e.getBoundingClientRect())&&d(),T=!1}try{r=new IntersectionObserver(O,{...b,root:a.ownerDocument})}catch{r=new IntersectionObserver(O,b)}r.observe(e)}return d(!0),o}function O6(e,t,r,s){s===void 0&&(s={});const{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:f=!1}=s,p=O1(e),x=a||o?[...p?iu(p):[],...iu(t)]:[];x.forEach(S=>{a&&S.addEventListener("scroll",r,{passive:!0}),o&&S.addEventListener("resize",r)});const w=p&&u?P6(p,r):null;let _=-1,j=null;d&&(j=new ResizeObserver(S=>{let[k]=S;k&&k.target===p&&j&&(j.unobserve(t),cancelAnimationFrame(_),_=requestAnimationFrame(()=>{var b;(b=j)==null||b.observe(t)})),r()}),p&&!f&&j.observe(p),j.observe(t));let N,C=f?Yo(e):null;f&&A();function A(){const S=Yo(e);C&&!Kj(C,S)&&r(),C=S,N=requestAnimationFrame(A)}return r(),()=>{var S;x.forEach(k=>{a&&k.removeEventListener("scroll",r),o&&k.removeEventListener("resize",r)}),w==null||w(),(S=j)==null||S.disconnect(),j=null,f&&cancelAnimationFrame(N)}}const D6=a6,M6=i6,L6=r6,F6=l6,B6=n6,Ry=t6,z6=o6,U6=(e,t,r)=>{const s=new Map,a={platform:R6,...r},o={...a.platform,_c:s};return e6(e,t,{...a,platform:o})};var $6=typeof document<"u",q6=function(){},Qh=$6?v.useLayoutEffect:q6;function Rf(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,s,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(s=r;s--!==0;)if(!Rf(e[s],t[s]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(s=r;s--!==0;)if(!{}.hasOwnProperty.call(t,a[s]))return!1;for(s=r;s--!==0;){const o=a[s];if(!(o==="_owner"&&e.$$typeof)&&!Rf(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function Yj(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Py(e,t){const r=Yj(e);return Math.round(t*r)/r}function lg(e){const t=v.useRef(e);return Qh(()=>{t.current=e}),t}function V6(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:s=[],platform:a,elements:{reference:o,floating:d}={},transform:u=!0,whileElementsMounted:f,open:p}=e,[x,w]=v.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[_,j]=v.useState(s);Rf(_,s)||j(s);const[N,C]=v.useState(null),[A,S]=v.useState(null),k=v.useCallback(oe=>{oe!==L.current&&(L.current=oe,C(oe))},[]),b=v.useCallback(oe=>{oe!==R.current&&(R.current=oe,S(oe))},[]),T=o||N,O=d||A,L=v.useRef(null),R=v.useRef(null),M=v.useRef(x),P=f!=null,q=lg(f),G=lg(a),B=lg(p),V=v.useCallback(()=>{if(!L.current||!R.current)return;const oe={placement:t,strategy:r,middleware:_};G.current&&(oe.platform=G.current),U6(L.current,R.current,oe).then(te=>{const be={...te,isPositioned:B.current!==!1};ee.current&&!Rf(M.current,be)&&(M.current=be,cl.flushSync(()=>{w(be)}))})},[_,t,r,G,B]);Qh(()=>{p===!1&&M.current.isPositioned&&(M.current.isPositioned=!1,w(oe=>({...oe,isPositioned:!1})))},[p]);const ee=v.useRef(!1);Qh(()=>(ee.current=!0,()=>{ee.current=!1}),[]),Qh(()=>{if(T&&(L.current=T),O&&(R.current=O),T&&O){if(q.current)return q.current(T,O,V);V()}},[T,O,V,q,P]);const X=v.useMemo(()=>({reference:L,floating:R,setReference:k,setFloating:b}),[k,b]),le=v.useMemo(()=>({reference:T,floating:O}),[T,O]),ue=v.useMemo(()=>{const oe={position:r,left:0,top:0};if(!le.floating)return oe;const te=Py(le.floating,x.x),be=Py(le.floating,x.y);return u?{...oe,transform:"translate("+te+"px, "+be+"px)",...Yj(le.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:te,top:be}},[r,u,le.floating,x.x,x.y]);return v.useMemo(()=>({...x,update:V,refs:X,elements:le,floatingStyles:ue}),[x,V,X,le,ue])}const W6=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:s,padding:a}=typeof e=="function"?e(r):e;return s&&t(s)?s.current!=null?Ry({element:s.current,padding:a}).fn(r):{}:s?Ry({element:s,padding:a}).fn(r):{}}}},H6=(e,t)=>({...D6(e),options:[e,t]}),G6=(e,t)=>({...M6(e),options:[e,t]}),X6=(e,t)=>({...z6(e),options:[e,t]}),K6=(e,t)=>({...L6(e),options:[e,t]}),Y6=(e,t)=>({...F6(e),options:[e,t]}),Q6=(e,t)=>({...B6(e),options:[e,t]}),Z6=(e,t)=>({...W6(e),options:[e,t]});var J6="Arrow",Qj=v.forwardRef((e,t)=>{const{children:r,width:s=10,height:a=5,...o}=e;return n.jsx(He.svg,{...o,ref:t,width:s,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:n.jsx("polygon",{points:"0,0 30,0 15,10"})})});Qj.displayName=J6;var eO=Qj;function bm(e){const[t,r]=v.useState(void 0);return kr(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const o=a[0];let d,u;if("borderBoxSize"in o){const f=o.borderBoxSize,p=Array.isArray(f)?f[0]:f;d=p.inlineSize,u=p.blockSize}else d=e.offsetWidth,u=e.offsetHeight;r({width:d,height:u})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else r(void 0)},[e]),t}var D1="Popper",[Zj,ao]=qr(D1),[tO,Jj]=Zj(D1),eC=e=>{const{__scopePopper:t,children:r}=e,[s,a]=v.useState(null);return n.jsx(tO,{scope:t,anchor:s,onAnchorChange:a,children:r})};eC.displayName=D1;var tC="PopperAnchor",rC=v.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:s,...a}=e,o=Jj(tC,r),d=v.useRef(null),u=at(t,d),f=v.useRef(null);return v.useEffect(()=>{const p=f.current;f.current=(s==null?void 0:s.current)||d.current,p!==f.current&&o.onAnchorChange(f.current)}),s?null:n.jsx(He.div,{...a,ref:u})});rC.displayName=tC;var M1="PopperContent",[rO,nO]=Zj(M1),nC=v.forwardRef((e,t)=>{var se,me,Re,ze,ye,Ne;const{__scopePopper:r,side:s="bottom",sideOffset:a=0,align:o="center",alignOffset:d=0,arrowPadding:u=0,avoidCollisions:f=!0,collisionBoundary:p=[],collisionPadding:x=0,sticky:w="partial",hideWhenDetached:_=!1,updatePositionStrategy:j="optimized",onPlaced:N,...C}=e,A=Jj(M1,r),[S,k]=v.useState(null),b=at(t,we=>k(we)),[T,O]=v.useState(null),L=bm(T),R=(L==null?void 0:L.width)??0,M=(L==null?void 0:L.height)??0,P=s+(o!=="center"?"-"+o:""),q=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},G=Array.isArray(p)?p:[p],B=G.length>0,V={padding:q,boundary:G.filter(aO),altBoundary:B},{refs:ee,floatingStyles:X,placement:le,isPositioned:ue,middlewareData:oe}=V6({strategy:"fixed",placement:P,whileElementsMounted:(...we)=>O6(...we,{animationFrame:j==="always"}),elements:{reference:A.anchor},middleware:[H6({mainAxis:a+M,alignmentAxis:d}),f&&G6({mainAxis:!0,crossAxis:!1,limiter:w==="partial"?X6():void 0,...V}),f&&K6({...V}),Y6({...V,apply:({elements:we,rects:Xe,availableWidth:_e,availableHeight:Qe})=>{const{width:ce,height:Se}=Xe.reference,ke=we.floating.style;ke.setProperty("--radix-popper-available-width",`${_e}px`),ke.setProperty("--radix-popper-available-height",`${Qe}px`),ke.setProperty("--radix-popper-anchor-width",`${ce}px`),ke.setProperty("--radix-popper-anchor-height",`${Se}px`)}}),T&&Z6({element:T,padding:u}),iO({arrowWidth:R,arrowHeight:M}),_&&Q6({strategy:"referenceHidden",...V})]}),[te,be]=iC(le),ve=Cr(N);kr(()=>{ue&&(ve==null||ve())},[ue,ve]);const H=(se=oe.arrow)==null?void 0:se.x,J=(me=oe.arrow)==null?void 0:me.y,K=((Re=oe.arrow)==null?void 0:Re.centerOffset)!==0,[ae,de]=v.useState();return kr(()=>{S&&de(window.getComputedStyle(S).zIndex)},[S]),n.jsx("div",{ref:ee.setFloating,"data-radix-popper-content-wrapper":"",style:{...X,transform:ue?X.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ae,"--radix-popper-transform-origin":[(ze=oe.transformOrigin)==null?void 0:ze.x,(ye=oe.transformOrigin)==null?void 0:ye.y].join(" "),...((Ne=oe.hide)==null?void 0:Ne.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:n.jsx(rO,{scope:r,placedSide:te,onArrowChange:O,arrowX:H,arrowY:J,shouldHideArrow:K,children:n.jsx(He.div,{"data-side":te,"data-align":be,...C,ref:b,style:{...C.style,animation:ue?void 0:"none"}})})})});nC.displayName=M1;var sC="PopperArrow",sO={top:"bottom",right:"left",bottom:"top",left:"right"},aC=v.forwardRef(function(t,r){const{__scopePopper:s,...a}=t,o=nO(sC,s),d=sO[o.placedSide];return n.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[d]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:n.jsx(eO,{...a,ref:r,style:{...a.style,display:"block"}})})});aC.displayName=sC;function aO(e){return e!==null}var iO=e=>({name:"transformOrigin",options:e,fn(t){var A,S,k;const{placement:r,rects:s,middlewareData:a}=t,d=((A=a.arrow)==null?void 0:A.centerOffset)!==0,u=d?0:e.arrowWidth,f=d?0:e.arrowHeight,[p,x]=iC(r),w={start:"0%",center:"50%",end:"100%"}[x],_=(((S=a.arrow)==null?void 0:S.x)??0)+u/2,j=(((k=a.arrow)==null?void 0:k.y)??0)+f/2;let N="",C="";return p==="bottom"?(N=d?w:`${_}px`,C=`${-f}px`):p==="top"?(N=d?w:`${_}px`,C=`${s.floating.height+f}px`):p==="right"?(N=`${-f}px`,C=d?w:`${j}px`):p==="left"&&(N=`${s.floating.width+f}px`,C=d?w:`${j}px`),{data:{x:N,y:C}}}});function iC(e){const[t,r="center"]=e.split("-");return[t,r]}var L1=eC,Tu=rC,_m=nC,Nm=aC,[jm]=qr("Tooltip",[ao]),F1=ao(),oC="TooltipProvider",oO=700,Oy="tooltip.open",[lO,lC]=jm(oC),cC=e=>{const{__scopeTooltip:t,delayDuration:r=oO,skipDelayDuration:s=300,disableHoverableContent:a=!1,children:o}=e,d=v.useRef(!0),u=v.useRef(!1),f=v.useRef(0);return v.useEffect(()=>{const p=f.current;return()=>window.clearTimeout(p)},[]),n.jsx(lO,{scope:t,isOpenDelayedRef:d,delayDuration:r,onOpen:v.useCallback(()=>{window.clearTimeout(f.current),d.current=!1},[]),onClose:v.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>d.current=!0,s)},[s]),isPointerInTransitRef:u,onPointerInTransitChange:v.useCallback(p=>{u.current=p},[]),disableHoverableContent:a,children:o})};cC.displayName=oC;var dC="Tooltip",[dW,Cm]=jm(dC),Mx="TooltipTrigger",cO=v.forwardRef((e,t)=>{const{__scopeTooltip:r,...s}=e,a=Cm(Mx,r),o=lC(Mx,r),d=F1(r),u=v.useRef(null),f=at(t,u,a.onTriggerChange),p=v.useRef(!1),x=v.useRef(!1),w=v.useCallback(()=>p.current=!1,[]);return v.useEffect(()=>()=>document.removeEventListener("pointerup",w),[w]),n.jsx(Tu,{asChild:!0,...d,children:n.jsx(He.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...s,ref:f,onPointerMove:De(e.onPointerMove,_=>{_.pointerType!=="touch"&&!x.current&&!o.isPointerInTransitRef.current&&(a.onTriggerEnter(),x.current=!0)}),onPointerLeave:De(e.onPointerLeave,()=>{a.onTriggerLeave(),x.current=!1}),onPointerDown:De(e.onPointerDown,()=>{a.open&&a.onClose(),p.current=!0,document.addEventListener("pointerup",w,{once:!0})}),onFocus:De(e.onFocus,()=>{p.current||a.onOpen()}),onBlur:De(e.onBlur,a.onClose),onClick:De(e.onClick,a.onClose)})})});cO.displayName=Mx;var dO="TooltipPortal",[uW,uO]=jm(dO,{forceMount:void 0}),kc="TooltipContent",uC=v.forwardRef((e,t)=>{const r=uO(kc,e.__scopeTooltip),{forceMount:s=r.forceMount,side:a="top",...o}=e,d=Cm(kc,e.__scopeTooltip);return n.jsx(Vr,{present:s||d.open,children:d.disableHoverableContent?n.jsx(hC,{side:a,...o,ref:t}):n.jsx(hO,{side:a,...o,ref:t})})}),hO=v.forwardRef((e,t)=>{const r=Cm(kc,e.__scopeTooltip),s=lC(kc,e.__scopeTooltip),a=v.useRef(null),o=at(t,a),[d,u]=v.useState(null),{trigger:f,onClose:p}=r,x=a.current,{onPointerInTransitChange:w}=s,_=v.useCallback(()=>{u(null),w(!1)},[w]),j=v.useCallback((N,C)=>{const A=N.currentTarget,S={x:N.clientX,y:N.clientY},k=xO(S,A.getBoundingClientRect()),b=vO(S,k),T=wO(C.getBoundingClientRect()),O=bO([...b,...T]);u(O),w(!0)},[w]);return v.useEffect(()=>()=>_(),[_]),v.useEffect(()=>{if(f&&x){const N=A=>j(A,x),C=A=>j(A,f);return f.addEventListener("pointerleave",N),x.addEventListener("pointerleave",C),()=>{f.removeEventListener("pointerleave",N),x.removeEventListener("pointerleave",C)}}},[f,x,j,_]),v.useEffect(()=>{if(d){const N=C=>{const A=C.target,S={x:C.clientX,y:C.clientY},k=(f==null?void 0:f.contains(A))||(x==null?void 0:x.contains(A)),b=!yO(S,d);k?_():b&&(_(),p())};return document.addEventListener("pointermove",N),()=>document.removeEventListener("pointermove",N)}},[f,x,d,p,_]),n.jsx(hC,{...e,ref:o})}),[fO,mO]=jm(dC,{isInside:!1}),pO=GN("TooltipContent"),hC=v.forwardRef((e,t)=>{const{__scopeTooltip:r,children:s,"aria-label":a,onEscapeKeyDown:o,onPointerDownOutside:d,...u}=e,f=Cm(kc,r),p=F1(r),{onClose:x}=f;return v.useEffect(()=>(document.addEventListener(Oy,x),()=>document.removeEventListener(Oy,x)),[x]),v.useEffect(()=>{if(f.trigger){const w=_=>{const j=_.target;j!=null&&j.contains(f.trigger)&&x()};return window.addEventListener("scroll",w,{capture:!0}),()=>window.removeEventListener("scroll",w,{capture:!0})}},[f.trigger,x]),n.jsx(dl,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:d,onFocusOutside:w=>w.preventDefault(),onDismiss:x,children:n.jsxs(_m,{"data-state":f.stateAttribute,...p,...u,ref:t,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[n.jsx(pO,{children:s}),n.jsx(fO,{scope:r,isInside:!0,children:n.jsx(UR,{id:f.contentId,role:"tooltip",children:a||s})})]})})});uC.displayName=kc;var fC="TooltipArrow",gO=v.forwardRef((e,t)=>{const{__scopeTooltip:r,...s}=e,a=F1(r);return mO(fC,r).isInside?null:n.jsx(Nm,{...a,...s,ref:t})});gO.displayName=fC;function xO(e,t){const r=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(r,s,a,o)){case o:return"left";case a:return"right";case r:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function vO(e,t,r=5){const s=[];switch(t){case"top":s.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":s.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":s.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":s.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return s}function wO(e){const{top:t,right:r,bottom:s,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:s},{x:a,y:s}]}function yO(e,t){const{x:r,y:s}=e;let a=!1;for(let o=0,d=t.length-1;o<t.length;d=o++){const u=t[o],f=t[d],p=u.x,x=u.y,w=f.x,_=f.y;x>s!=_>s&&r<(w-p)*(s-x)/(_-x)+p&&(a=!a)}return a}function bO(e){const t=e.slice();return t.sort((r,s)=>r.x<s.x?-1:r.x>s.x?1:r.y<s.y?-1:r.y>s.y?1:0),_O(t)}function _O(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const a=e[s];for(;t.length>=2;){const o=t[t.length-1],d=t[t.length-2];if((o.x-d.x)*(a.y-d.y)>=(o.y-d.y)*(a.x-d.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let s=e.length-1;s>=0;s--){const a=e[s];for(;r.length>=2;){const o=r[r.length-1],d=r[r.length-2];if((o.x-d.x)*(a.y-d.y)>=(o.y-d.y)*(a.x-d.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var NO=cC,mC=uC;const jO=NO,CO=v.forwardRef(({className:e,sideOffset:t=4,...r},s)=>n.jsx(mC,{ref:s,sideOffset:t,className:Be("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));CO.displayName=mC.displayName;var Em=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},EO={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},ji,y0,b2,SO=(b2=class{constructor(){At(this,ji,EO);At(this,y0,!1)}setTimeoutProvider(e){ot(this,ji,e)}setTimeout(e,t){return Ce(this,ji).setTimeout(e,t)}clearTimeout(e){Ce(this,ji).clearTimeout(e)}setInterval(e,t){return Ce(this,ji).setInterval(e,t)}clearInterval(e){Ce(this,ji).clearInterval(e)}},ji=new WeakMap,y0=new WeakMap,b2),Lx=new SO;function AO(e){setTimeout(e,0)}var Sm=typeof window>"u"||"Deno"in globalThis;function Hs(){}function kO(e,t){return typeof e=="function"?e(t):e}function TO(e){return typeof e=="number"&&e>=0&&e!==1/0}function IO(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Fx(e,t){return typeof e=="function"?e(t):e}function RO(e,t){return typeof e=="function"?e(t):e}function Dy(e,t){const{type:r="all",exact:s,fetchStatus:a,predicate:o,queryKey:d,stale:u}=e;if(d){if(s){if(t.queryHash!==B1(d,t.options))return!1}else if(!lu(t.queryKey,d))return!1}if(r!=="all"){const f=t.isActive();if(r==="active"&&!f||r==="inactive"&&f)return!1}return!(typeof u=="boolean"&&t.isStale()!==u||a&&a!==t.state.fetchStatus||o&&!o(t))}function My(e,t){const{exact:r,status:s,predicate:a,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(r){if(ou(t.options.mutationKey)!==ou(o))return!1}else if(!lu(t.options.mutationKey,o))return!1}return!(s&&t.state.status!==s||a&&!a(t))}function B1(e,t){return((t==null?void 0:t.queryKeyHashFn)||ou)(e)}function ou(e){return JSON.stringify(e,(t,r)=>Bx(r)?Object.keys(r).sort().reduce((s,a)=>(s[a]=r[a],s),{}):r)}function lu(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>lu(e[r],t[r])):!1}var PO=Object.prototype.hasOwnProperty;function pC(e,t){if(e===t)return e;const r=Ly(e)&&Ly(t);if(!r&&!(Bx(e)&&Bx(t)))return t;const a=(r?e:Object.keys(e)).length,o=r?t:Object.keys(t),d=o.length,u=r?new Array(d):{};let f=0;for(let p=0;p<d;p++){const x=r?p:o[p],w=e[x],_=t[x];if(w===_){u[x]=w,(r?p<a:PO.call(e,x))&&f++;continue}if(w===null||_===null||typeof w!="object"||typeof _!="object"){u[x]=_;continue}const j=pC(w,_);u[x]=j,j===w&&f++}return a===d&&f===a?e:u}function Ly(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Bx(e){if(!Fy(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Fy(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Fy(e){return Object.prototype.toString.call(e)==="[object Object]"}function OO(e){return new Promise(t=>{Lx.setTimeout(t,e)})}function DO(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?pC(e,t):t}function MO(e,t,r=0){const s=[...e,t];return r&&s.length>r?s.slice(1):s}function LO(e,t,r=0){const s=[t,...e];return r&&s.length>r?s.slice(0,-1):s}var z1=Symbol();function gC(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===z1?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Po,Ci,uc,_2,FO=(_2=class extends Em{constructor(){super();At(this,Po);At(this,Ci);At(this,uc);ot(this,uc,t=>{if(!Sm&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){Ce(this,Ci)||this.setEventListener(Ce(this,uc))}onUnsubscribe(){var t;this.hasListeners()||((t=Ce(this,Ci))==null||t.call(this),ot(this,Ci,void 0))}setEventListener(t){var r;ot(this,uc,t),(r=Ce(this,Ci))==null||r.call(this),ot(this,Ci,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){Ce(this,Po)!==t&&(ot(this,Po,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof Ce(this,Po)=="boolean"?Ce(this,Po):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Po=new WeakMap,Ci=new WeakMap,uc=new WeakMap,_2),xC=new FO;function BO(){let e,t;const r=new Promise((a,o)=>{e=a,t=o});r.status="pending",r.catch(()=>{});function s(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{s({status:"fulfilled",value:a}),e(a)},r.reject=a=>{s({status:"rejected",reason:a}),t(a)},r}var zO=AO;function UO(){let e=[],t=0,r=u=>{u()},s=u=>{u()},a=zO;const o=u=>{t?e.push(u):a(()=>{r(u)})},d=()=>{const u=e;e=[],u.length&&a(()=>{s(()=>{u.forEach(f=>{r(f)})})})};return{batch:u=>{let f;t++;try{f=u()}finally{t--,t||d()}return f},batchCalls:u=>(...f)=>{o(()=>{u(...f)})},schedule:o,setNotifyFunction:u=>{r=u},setBatchNotifyFunction:u=>{s=u},setScheduler:u=>{a=u}}}var jn=UO(),hc,Ei,fc,N2,$O=(N2=class extends Em{constructor(){super();At(this,hc,!0);At(this,Ei);At(this,fc);ot(this,fc,t=>{if(!Sm&&window.addEventListener){const r=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}})}onSubscribe(){Ce(this,Ei)||this.setEventListener(Ce(this,fc))}onUnsubscribe(){var t;this.hasListeners()||((t=Ce(this,Ei))==null||t.call(this),ot(this,Ei,void 0))}setEventListener(t){var r;ot(this,fc,t),(r=Ce(this,Ei))==null||r.call(this),ot(this,Ei,t(this.setOnline.bind(this)))}setOnline(t){Ce(this,hc)!==t&&(ot(this,hc,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return Ce(this,hc)}},hc=new WeakMap,Ei=new WeakMap,fc=new WeakMap,N2),Pf=new $O;function qO(e){return Math.min(1e3*2**e,3e4)}function vC(e){return(e??"online")==="online"?Pf.isOnline():!0}var zx=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function wC(e){let t=!1,r=0,s;const a=BO(),o=()=>a.status!=="pending",d=C=>{var A;if(!o()){const S=new zx(C);_(S),(A=e.onCancel)==null||A.call(e,S)}},u=()=>{t=!0},f=()=>{t=!1},p=()=>xC.isFocused()&&(e.networkMode==="always"||Pf.isOnline())&&e.canRun(),x=()=>vC(e.networkMode)&&e.canRun(),w=C=>{o()||(s==null||s(),a.resolve(C))},_=C=>{o()||(s==null||s(),a.reject(C))},j=()=>new Promise(C=>{var A;s=S=>{(o()||p())&&C(S)},(A=e.onPause)==null||A.call(e)}).then(()=>{var C;s=void 0,o()||(C=e.onContinue)==null||C.call(e)}),N=()=>{if(o())return;let C;const A=r===0?e.initialPromise:void 0;try{C=A??e.fn()}catch(S){C=Promise.reject(S)}Promise.resolve(C).then(w).catch(S=>{var L;if(o())return;const k=e.retry??(Sm?0:3),b=e.retryDelay??qO,T=typeof b=="function"?b(r,S):b,O=k===!0||typeof k=="number"&&r<k||typeof k=="function"&&k(r,S);if(t||!O){_(S);return}r++,(L=e.onFail)==null||L.call(e,r,S),OO(T).then(()=>p()?void 0:j()).then(()=>{t?_(S):N()})})};return{promise:a,status:()=>a.status,cancel:d,continue:()=>(s==null||s(),a),cancelRetry:u,continueRetry:f,canStart:x,start:()=>(x()?N():j().then(N),a)}}var Oo,j2,yC=(j2=class{constructor(){At(this,Oo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),TO(this.gcTime)&&ot(this,Oo,Lx.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Sm?1/0:5*60*1e3))}clearGcTimeout(){Ce(this,Oo)&&(Lx.clearTimeout(Ce(this,Oo)),ot(this,Oo,void 0))}},Oo=new WeakMap,j2),Do,mc,Ns,Mo,Kr,gu,Lo,Gs,Fa,C2,VO=(C2=class extends yC{constructor(t){super();At(this,Gs);At(this,Do);At(this,mc);At(this,Ns);At(this,Mo);At(this,Kr);At(this,gu);At(this,Lo);ot(this,Lo,!1),ot(this,gu,t.defaultOptions),this.setOptions(t.options),this.observers=[],ot(this,Mo,t.client),ot(this,Ns,Ce(this,Mo).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ot(this,Do,By(this.options)),this.state=t.state??Ce(this,Do),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Ce(this,Kr))==null?void 0:t.promise}setOptions(t){if(this.options={...Ce(this,gu),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=By(this.options);r.data!==void 0&&(this.setData(r.data,{updatedAt:r.dataUpdatedAt,manual:!0}),ot(this,Do,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Ce(this,Ns).remove(this)}setData(t,r){const s=DO(this.state.data,t,this.options);return gn(this,Gs,Fa).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(t,r){gn(this,Gs,Fa).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var s,a;const r=(s=Ce(this,Kr))==null?void 0:s.promise;return(a=Ce(this,Kr))==null||a.cancel(t),r?r.then(Hs).catch(Hs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Ce(this,Do))}isActive(){return this.observers.some(t=>RO(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===z1||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Fx(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!IO(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=Ce(this,Kr))==null||r.continue()}onOnline(){var r;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=Ce(this,Kr))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Ce(this,Ns).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(Ce(this,Kr)&&(Ce(this,Lo)?Ce(this,Kr).cancel({revert:!0}):Ce(this,Kr).cancelRetry()),this.scheduleGc()),Ce(this,Ns).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||gn(this,Gs,Fa).call(this,{type:"invalidate"})}async fetch(t,r){var f,p,x,w,_,j,N,C,A,S,k,b;if(this.state.fetchStatus!=="idle"&&((f=Ce(this,Kr))==null?void 0:f.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Ce(this,Kr))return Ce(this,Kr).continueRetry(),Ce(this,Kr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const T=this.observers.find(O=>O.options.queryFn);T&&this.setOptions(T.options)}const s=new AbortController,a=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(ot(this,Lo,!0),s.signal)})},o=()=>{const T=gC(this.options,r),L=(()=>{const R={client:Ce(this,Mo),queryKey:this.queryKey,meta:this.meta};return a(R),R})();return ot(this,Lo,!1),this.options.persister?this.options.persister(T,L,this):T(L)},u=(()=>{const T={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Ce(this,Mo),state:this.state,fetchFn:o};return a(T),T})();(p=this.options.behavior)==null||p.onFetch(u,this),ot(this,mc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((x=u.fetchOptions)==null?void 0:x.meta))&&gn(this,Gs,Fa).call(this,{type:"fetch",meta:(w=u.fetchOptions)==null?void 0:w.meta}),ot(this,Kr,wC({initialPromise:r==null?void 0:r.initialPromise,fn:u.fetchFn,onCancel:T=>{T instanceof zx&&T.revert&&this.setState({...Ce(this,mc),fetchStatus:"idle"}),s.abort()},onFail:(T,O)=>{gn(this,Gs,Fa).call(this,{type:"failed",failureCount:T,error:O})},onPause:()=>{gn(this,Gs,Fa).call(this,{type:"pause"})},onContinue:()=>{gn(this,Gs,Fa).call(this,{type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0}));try{const T=await Ce(this,Kr).start();if(T===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(T),(j=(_=Ce(this,Ns).config).onSuccess)==null||j.call(_,T,this),(C=(N=Ce(this,Ns).config).onSettled)==null||C.call(N,T,this.state.error,this),T}catch(T){if(T instanceof zx){if(T.silent)return Ce(this,Kr).promise;if(T.revert){if(this.state.data===void 0)throw T;return this.state.data}}throw gn(this,Gs,Fa).call(this,{type:"error",error:T}),(S=(A=Ce(this,Ns).config).onError)==null||S.call(A,T,this),(b=(k=Ce(this,Ns).config).onSettled)==null||b.call(k,this.state.data,T,this),T}finally{this.scheduleGc()}}},Do=new WeakMap,mc=new WeakMap,Ns=new WeakMap,Mo=new WeakMap,Kr=new WeakMap,gu=new WeakMap,Lo=new WeakMap,Gs=new WeakSet,Fa=function(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...WO(s.data,this.options),fetchMeta:t.meta??null};case"success":const a={...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ot(this,mc,t.manual?a:void 0),a;case"error":const o=t.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),jn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),Ce(this,Ns).notify({query:this,type:"updated",action:t})})},C2);function WO(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:vC(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function By(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,s=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}function zy(e){return{onFetch:(t,r)=>{var x,w,_,j,N;const s=t.options,a=(_=(w=(x=t.fetchOptions)==null?void 0:x.meta)==null?void 0:w.fetchMore)==null?void 0:_.direction,o=((j=t.state.data)==null?void 0:j.pages)||[],d=((N=t.state.data)==null?void 0:N.pageParams)||[];let u={pages:[],pageParams:[]},f=0;const p=async()=>{let C=!1;const A=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?C=!0:t.signal.addEventListener("abort",()=>{C=!0}),t.signal)})},S=gC(t.options,t.fetchOptions),k=async(b,T,O)=>{if(C)return Promise.reject();if(T==null&&b.pages.length)return Promise.resolve(b);const R=(()=>{const G={client:t.client,queryKey:t.queryKey,pageParam:T,direction:O?"backward":"forward",meta:t.options.meta};return A(G),G})(),M=await S(R),{maxPages:P}=t.options,q=O?LO:MO;return{pages:q(b.pages,M,P),pageParams:q(b.pageParams,T,P)}};if(a&&o.length){const b=a==="backward",T=b?HO:Uy,O={pages:o,pageParams:d},L=T(s,O);u=await k(O,L,b)}else{const b=e??o.length;do{const T=f===0?d[0]??s.initialPageParam:Uy(s,u);if(f>0&&T==null)break;u=await k(u,T),f++}while(f<b)}return u};t.options.persister?t.fetchFn=()=>{var C,A;return(A=(C=t.options).persister)==null?void 0:A.call(C,p,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=p}}}function Uy(e,{pages:t,pageParams:r}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,r[s],r):void 0}function HO(e,{pages:t,pageParams:r}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,r[0],r):void 0}var xu,ga,_n,Fo,xa,gi,E2,GO=(E2=class extends yC{constructor(t){super();At(this,xa);At(this,xu);At(this,ga);At(this,_n);At(this,Fo);ot(this,xu,t.client),this.mutationId=t.mutationId,ot(this,_n,t.mutationCache),ot(this,ga,[]),this.state=t.state||XO(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Ce(this,ga).includes(t)||(Ce(this,ga).push(t),this.clearGcTimeout(),Ce(this,_n).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ot(this,ga,Ce(this,ga).filter(r=>r!==t)),this.scheduleGc(),Ce(this,_n).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Ce(this,ga).length||(this.state.status==="pending"?this.scheduleGc():Ce(this,_n).remove(this))}continue(){var t;return((t=Ce(this,Fo))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var d,u,f,p,x,w,_,j,N,C,A,S,k,b,T,O,L,R,M,P;const r=()=>{gn(this,xa,gi).call(this,{type:"continue"})},s={client:Ce(this,xu),meta:this.options.meta,mutationKey:this.options.mutationKey};ot(this,Fo,wC({fn:()=>this.options.mutationFn?this.options.mutationFn(t,s):Promise.reject(new Error("No mutationFn found")),onFail:(q,G)=>{gn(this,xa,gi).call(this,{type:"failed",failureCount:q,error:G})},onPause:()=>{gn(this,xa,gi).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Ce(this,_n).canRun(this)}));const a=this.state.status==="pending",o=!Ce(this,Fo).canStart();try{if(a)r();else{gn(this,xa,gi).call(this,{type:"pending",variables:t,isPaused:o}),await((u=(d=Ce(this,_n).config).onMutate)==null?void 0:u.call(d,t,this,s));const G=await((p=(f=this.options).onMutate)==null?void 0:p.call(f,t,s));G!==this.state.context&&gn(this,xa,gi).call(this,{type:"pending",context:G,variables:t,isPaused:o})}const q=await Ce(this,Fo).start();return await((w=(x=Ce(this,_n).config).onSuccess)==null?void 0:w.call(x,q,t,this.state.context,this,s)),await((j=(_=this.options).onSuccess)==null?void 0:j.call(_,q,t,this.state.context,s)),await((C=(N=Ce(this,_n).config).onSettled)==null?void 0:C.call(N,q,null,this.state.variables,this.state.context,this,s)),await((S=(A=this.options).onSettled)==null?void 0:S.call(A,q,null,t,this.state.context,s)),gn(this,xa,gi).call(this,{type:"success",data:q}),q}catch(q){try{throw await((b=(k=Ce(this,_n).config).onError)==null?void 0:b.call(k,q,t,this.state.context,this,s)),await((O=(T=this.options).onError)==null?void 0:O.call(T,q,t,this.state.context,s)),await((R=(L=Ce(this,_n).config).onSettled)==null?void 0:R.call(L,void 0,q,this.state.variables,this.state.context,this,s)),await((P=(M=this.options).onSettled)==null?void 0:P.call(M,void 0,q,t,this.state.context,s)),q}finally{gn(this,xa,gi).call(this,{type:"error",error:q})}}finally{Ce(this,_n).runNext(this)}}},xu=new WeakMap,ga=new WeakMap,_n=new WeakMap,Fo=new WeakMap,xa=new WeakSet,gi=function(t){const r=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),jn.batch(()=>{Ce(this,ga).forEach(s=>{s.onMutationUpdate(t)}),Ce(this,_n).notify({mutation:this,type:"updated",action:t})})},E2);function XO(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var qa,Xs,vu,S2,KO=(S2=class extends Em{constructor(t={}){super();At(this,qa);At(this,Xs);At(this,vu);this.config=t,ot(this,qa,new Set),ot(this,Xs,new Map),ot(this,vu,0)}build(t,r,s){const a=new GO({client:t,mutationCache:this,mutationId:++th(this,vu)._,options:t.defaultMutationOptions(r),state:s});return this.add(a),a}add(t){Ce(this,qa).add(t);const r=Nh(t);if(typeof r=="string"){const s=Ce(this,Xs).get(r);s?s.push(t):Ce(this,Xs).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Ce(this,qa).delete(t)){const r=Nh(t);if(typeof r=="string"){const s=Ce(this,Xs).get(r);if(s)if(s.length>1){const a=s.indexOf(t);a!==-1&&s.splice(a,1)}else s[0]===t&&Ce(this,Xs).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Nh(t);if(typeof r=="string"){const s=Ce(this,Xs).get(r),a=s==null?void 0:s.find(o=>o.state.status==="pending");return!a||a===t}else return!0}runNext(t){var s;const r=Nh(t);if(typeof r=="string"){const a=(s=Ce(this,Xs).get(r))==null?void 0:s.find(o=>o!==t&&o.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){jn.batch(()=>{Ce(this,qa).forEach(t=>{this.notify({type:"removed",mutation:t})}),Ce(this,qa).clear(),Ce(this,Xs).clear()})}getAll(){return Array.from(Ce(this,qa))}find(t){const r={exact:!0,...t};return this.getAll().find(s=>My(r,s))}findAll(t={}){return this.getAll().filter(r=>My(t,r))}notify(t){jn.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return jn.batch(()=>Promise.all(t.map(r=>r.continue().catch(Hs))))}},qa=new WeakMap,Xs=new WeakMap,vu=new WeakMap,S2);function Nh(e){var t;return(t=e.options.scope)==null?void 0:t.id}var va,A2,YO=(A2=class extends Em{constructor(t={}){super();At(this,va);this.config=t,ot(this,va,new Map)}build(t,r,s){const a=r.queryKey,o=r.queryHash??B1(a,r);let d=this.get(o);return d||(d=new VO({client:t,queryKey:a,queryHash:o,options:t.defaultQueryOptions(r),state:s,defaultOptions:t.getQueryDefaults(a)}),this.add(d)),d}add(t){Ce(this,va).has(t.queryHash)||(Ce(this,va).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=Ce(this,va).get(t.queryHash);r&&(t.destroy(),r===t&&Ce(this,va).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){jn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Ce(this,va).get(t)}getAll(){return[...Ce(this,va).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(s=>Dy(r,s))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(s=>Dy(t,s)):r}notify(t){jn.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){jn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){jn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},va=new WeakMap,A2),_r,Si,Ai,pc,gc,ki,xc,vc,k2,QO=(k2=class{constructor(e={}){At(this,_r);At(this,Si);At(this,Ai);At(this,pc);At(this,gc);At(this,ki);At(this,xc);At(this,vc);ot(this,_r,e.queryCache||new YO),ot(this,Si,e.mutationCache||new KO),ot(this,Ai,e.defaultOptions||{}),ot(this,pc,new Map),ot(this,gc,new Map),ot(this,ki,0)}mount(){th(this,ki)._++,Ce(this,ki)===1&&(ot(this,xc,xC.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ce(this,_r).onFocus())})),ot(this,vc,Pf.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ce(this,_r).onOnline())})))}unmount(){var e,t;th(this,ki)._--,Ce(this,ki)===0&&((e=Ce(this,xc))==null||e.call(this),ot(this,xc,void 0),(t=Ce(this,vc))==null||t.call(this),ot(this,vc,void 0))}isFetching(e){return Ce(this,_r).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Ce(this,Si).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Ce(this,_r).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=Ce(this,_r).build(this,t),s=r.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Fx(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return Ce(this,_r).findAll(e).map(({queryKey:t,state:r})=>{const s=r.data;return[t,s]})}setQueryData(e,t,r){const s=this.defaultQueryOptions({queryKey:e}),a=Ce(this,_r).get(s.queryHash),o=a==null?void 0:a.state.data,d=kO(t,o);if(d!==void 0)return Ce(this,_r).build(this,s).setData(d,{...r,manual:!0})}setQueriesData(e,t,r){return jn.batch(()=>Ce(this,_r).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Ce(this,_r).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=Ce(this,_r);jn.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=Ce(this,_r);return jn.batch(()=>(r.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},s=jn.batch(()=>Ce(this,_r).findAll(e).map(a=>a.cancel(r)));return Promise.all(s).then(Hs).catch(Hs)}invalidateQueries(e,t={}){return jn.batch(()=>(Ce(this,_r).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},s=jn.batch(()=>Ce(this,_r).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let o=a.fetch(void 0,r);return r.throwOnError||(o=o.catch(Hs)),a.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(s).then(Hs)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=Ce(this,_r).build(this,t);return r.isStaleByTime(Fx(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Hs).catch(Hs)}fetchInfiniteQuery(e){return e.behavior=zy(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Hs).catch(Hs)}ensureInfiniteQueryData(e){return e.behavior=zy(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Pf.isOnline()?Ce(this,Si).resumePausedMutations():Promise.resolve()}getQueryCache(){return Ce(this,_r)}getMutationCache(){return Ce(this,Si)}getDefaultOptions(){return Ce(this,Ai)}setDefaultOptions(e){ot(this,Ai,e)}setQueryDefaults(e,t){Ce(this,pc).set(ou(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Ce(this,pc).values()],r={};return t.forEach(s=>{lu(e,s.queryKey)&&Object.assign(r,s.defaultOptions)}),r}setMutationDefaults(e,t){Ce(this,gc).set(ou(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Ce(this,gc).values()],r={};return t.forEach(s=>{lu(e,s.mutationKey)&&Object.assign(r,s.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Ce(this,Ai).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=B1(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===z1&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Ce(this,Ai).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Ce(this,_r).clear(),Ce(this,Si).clear()}},_r=new WeakMap,Si=new WeakMap,Ai=new WeakMap,pc=new WeakMap,gc=new WeakMap,ki=new WeakMap,xc=new WeakMap,vc=new WeakMap,k2),ZO=v.createContext(void 0),JO=({client:e,children:t})=>(v.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(ZO.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cu(){return cu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},cu.apply(this,arguments)}var Ri;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ri||(Ri={}));const $y="popstate";function e5(e){e===void 0&&(e={});function t(s,a){let{pathname:o,search:d,hash:u}=s.location;return Ux("",{pathname:o,search:d,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){return typeof a=="string"?a:_C(a)}return r5(t,r,null,e)}function $r(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function bC(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function t5(){return Math.random().toString(36).substr(2,8)}function qy(e,t){return{usr:e.state,key:e.key,idx:t}}function Ux(e,t,r,s){return r===void 0&&(r=null),cu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Vc(t):t,{state:r,key:t&&t.key||s||t5()})}function _C(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Vc(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function r5(e,t,r,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:o=!1}=s,d=a.history,u=Ri.Pop,f=null,p=x();p==null&&(p=0,d.replaceState(cu({},d.state,{idx:p}),""));function x(){return(d.state||{idx:null}).idx}function w(){u=Ri.Pop;let A=x(),S=A==null?null:A-p;p=A,f&&f({action:u,location:C.location,delta:S})}function _(A,S){u=Ri.Push;let k=Ux(C.location,A,S);p=x()+1;let b=qy(k,p),T=C.createHref(k);try{d.pushState(b,"",T)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;a.location.assign(T)}o&&f&&f({action:u,location:C.location,delta:1})}function j(A,S){u=Ri.Replace;let k=Ux(C.location,A,S);p=x();let b=qy(k,p),T=C.createHref(k);d.replaceState(b,"",T),o&&f&&f({action:u,location:C.location,delta:0})}function N(A){let S=a.location.origin!=="null"?a.location.origin:a.location.href,k=typeof A=="string"?A:_C(A);return k=k.replace(/ $/,"%20"),$r(S,"No window.location.(origin|href) available to create URL for href: "+k),new URL(k,S)}let C={get action(){return u},get location(){return e(a,d)},listen(A){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener($y,w),f=A,()=>{a.removeEventListener($y,w),f=null}},createHref(A){return t(a,A)},createURL:N,encodeLocation(A){let S=N(A);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:_,replace:j,go(A){return d.go(A)}};return C}var Vy;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Vy||(Vy={}));function n5(e,t,r){return r===void 0&&(r="/"),s5(e,t,r)}function s5(e,t,r,s){let a=typeof t=="string"?Vc(t):t,o=CC(a.pathname||"/",r);if(o==null)return null;let d=NC(e);a5(d);let u=null;for(let f=0;u==null&&f<d.length;++f){let p=x5(o);u=m5(d[f],p)}return u}function NC(e,t,r,s){t===void 0&&(t=[]),r===void 0&&(r=[]),s===void 0&&(s="");let a=(o,d,u)=>{let f={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:d,route:o};f.relativePath.startsWith("/")&&($r(f.relativePath.startsWith(s),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(s.length));let p=$o([s,f.relativePath]),x=r.concat(f);o.children&&o.children.length>0&&($r(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),NC(o.children,t,x,p)),!(o.path==null&&!o.index)&&t.push({path:p,score:h5(p,o.index),routesMeta:x})};return e.forEach((o,d)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))a(o,d);else for(let f of jC(o.path))a(o,d,f)}),t}function jC(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,a=r.endsWith("?"),o=r.replace(/\?$/,"");if(s.length===0)return a?[o,""]:[o];let d=jC(s.join("/")),u=[];return u.push(...d.map(f=>f===""?o:[o,f].join("/"))),a&&u.push(...d),u.map(f=>e.startsWith("/")&&f===""?"/":f)}function a5(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:f5(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const i5=/^:[\w-]+$/,o5=3,l5=2,c5=1,d5=10,u5=-2,Wy=e=>e==="*";function h5(e,t){let r=e.split("/"),s=r.length;return r.some(Wy)&&(s+=u5),t&&(s+=l5),r.filter(a=>!Wy(a)).reduce((a,o)=>a+(i5.test(o)?o5:o===""?c5:d5),s)}function f5(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function m5(e,t,r){let{routesMeta:s}=e,a={},o="/",d=[];for(let u=0;u<s.length;++u){let f=s[u],p=u===s.length-1,x=o==="/"?t:t.slice(o.length)||"/",w=p5({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},x),_=f.route;if(!w)return null;Object.assign(a,w.params),d.push({params:a,pathname:$o([o,w.pathname]),pathnameBase:N5($o([o,w.pathnameBase])),route:_}),w.pathnameBase!=="/"&&(o=$o([o,w.pathnameBase]))}return d}function p5(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=g5(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let o=a[0],d=o.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:s.reduce((p,x,w)=>{let{paramName:_,isOptional:j}=x;if(_==="*"){let C=u[w]||"";d=o.slice(0,o.length-C.length).replace(/(.)\/+$/,"$1")}const N=u[w];return j&&!N?p[_]=void 0:p[_]=(N||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:d,pattern:e}}function g5(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),bC(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,u,f)=>(s.push({paramName:u,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function x5(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return bC(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function CC(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function v5(e,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:a=""}=typeof e=="string"?Vc(e):e;return{pathname:r?r.startsWith("/")?r:w5(r,t):t,search:j5(s),hash:C5(a)}}function w5(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function cg(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function y5(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function b5(e,t){let r=y5(e);return t?r.map((s,a)=>a===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function _5(e,t,r,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=Vc(e):(a=cu({},e),$r(!a.pathname||!a.pathname.includes("?"),cg("?","pathname","search",a)),$r(!a.pathname||!a.pathname.includes("#"),cg("#","pathname","hash",a)),$r(!a.search||!a.search.includes("#"),cg("#","search","hash",a)));let o=e===""||a.pathname==="",d=o?"/":a.pathname,u;if(d==null)u=r;else{let w=t.length-1;if(!s&&d.startsWith("..")){let _=d.split("/");for(;_[0]==="..";)_.shift(),w-=1;a.pathname=_.join("/")}u=w>=0?t[w]:"/"}let f=v5(a,u),p=d&&d!=="/"&&d.endsWith("/"),x=(o||d===".")&&r.endsWith("/");return!f.pathname.endsWith("/")&&(p||x)&&(f.pathname+="/"),f}const $o=e=>e.join("/").replace(/\/\/+/g,"/"),N5=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),j5=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,C5=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function E5(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const EC=["post","put","patch","delete"];new Set(EC);const S5=["get",...EC];new Set(S5);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function du(){return du=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},du.apply(this,arguments)}const U1=v.createContext(null),A5=v.createContext(null),Am=v.createContext(null),km=v.createContext(null),ul=v.createContext({outlet:null,matches:[],isDataRoute:!1}),SC=v.createContext(null);function Tm(){return v.useContext(km)!=null}function Xn(){return Tm()||$r(!1),v.useContext(km).location}function AC(e){v.useContext(Am).static||v.useLayoutEffect(e)}function _t(){let{isDataRoute:e}=v.useContext(ul);return e?U5():k5()}function k5(){Tm()||$r(!1);let e=v.useContext(U1),{basename:t,future:r,navigator:s}=v.useContext(Am),{matches:a}=v.useContext(ul),{pathname:o}=Xn(),d=JSON.stringify(b5(a,r.v7_relativeSplatPath)),u=v.useRef(!1);return AC(()=>{u.current=!0}),v.useCallback(function(p,x){if(x===void 0&&(x={}),!u.current)return;if(typeof p=="number"){s.go(p);return}let w=_5(p,JSON.parse(d),o,x.relative==="path");e==null&&t!=="/"&&(w.pathname=w.pathname==="/"?t:$o([t,w.pathname])),(x.replace?s.replace:s.push)(w,x.state,x)},[t,s,d,o,e])}function hl(){let{matches:e}=v.useContext(ul),t=e[e.length-1];return t?t.params:{}}function T5(e,t){return I5(e,t)}function I5(e,t,r,s){Tm()||$r(!1);let{navigator:a}=v.useContext(Am),{matches:o}=v.useContext(ul),d=o[o.length-1],u=d?d.params:{};d&&d.pathname;let f=d?d.pathnameBase:"/";d&&d.route;let p=Xn(),x;if(t){var w;let A=typeof t=="string"?Vc(t):t;f==="/"||(w=A.pathname)!=null&&w.startsWith(f)||$r(!1),x=A}else x=p;let _=x.pathname||"/",j=_;if(f!=="/"){let A=f.replace(/^\//,"").split("/");j="/"+_.replace(/^\//,"").split("/").slice(A.length).join("/")}let N=n5(e,{pathname:j}),C=M5(N&&N.map(A=>Object.assign({},A,{params:Object.assign({},u,A.params),pathname:$o([f,a.encodeLocation?a.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?f:$o([f,a.encodeLocation?a.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),o,r,s);return t&&C?v.createElement(km.Provider,{value:{location:du({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:Ri.Pop}},C):C}function R5(){let e=z5(),t=E5(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),r?v.createElement("pre",{style:a},r):null,null)}const P5=v.createElement(R5,null);class O5 extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?v.createElement(ul.Provider,{value:this.props.routeContext},v.createElement(SC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function D5(e){let{routeContext:t,match:r,children:s}=e,a=v.useContext(U1);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),v.createElement(ul.Provider,{value:t},s)}function M5(e,t,r,s){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var o;if(!r)return null;if(r.errors)e=r.matches;else if((o=s)!=null&&o.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let d=e,u=(a=r)==null?void 0:a.errors;if(u!=null){let x=d.findIndex(w=>w.route.id&&(u==null?void 0:u[w.route.id])!==void 0);x>=0||$r(!1),d=d.slice(0,Math.min(d.length,x+1))}let f=!1,p=-1;if(r&&s&&s.v7_partialHydration)for(let x=0;x<d.length;x++){let w=d[x];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(p=x),w.route.id){let{loaderData:_,errors:j}=r,N=w.route.loader&&_[w.route.id]===void 0&&(!j||j[w.route.id]===void 0);if(w.route.lazy||N){f=!0,p>=0?d=d.slice(0,p+1):d=[d[0]];break}}}return d.reduceRight((x,w,_)=>{let j,N=!1,C=null,A=null;r&&(j=u&&w.route.id?u[w.route.id]:void 0,C=w.route.errorElement||P5,f&&(p<0&&_===0?($5("route-fallback"),N=!0,A=null):p===_&&(N=!0,A=w.route.hydrateFallbackElement||null)));let S=t.concat(d.slice(0,_+1)),k=()=>{let b;return j?b=C:N?b=A:w.route.Component?b=v.createElement(w.route.Component,null):w.route.element?b=w.route.element:b=x,v.createElement(D5,{match:w,routeContext:{outlet:x,matches:S,isDataRoute:r!=null},children:b})};return r&&(w.route.ErrorBoundary||w.route.errorElement||_===0)?v.createElement(O5,{location:r.location,revalidation:r.revalidation,component:C,error:j,children:k(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):k()},null)}var kC=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(kC||{}),TC=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(TC||{});function L5(e){let t=v.useContext(U1);return t||$r(!1),t}function F5(e){let t=v.useContext(A5);return t||$r(!1),t}function B5(e){let t=v.useContext(ul);return t||$r(!1),t}function IC(e){let t=B5(),r=t.matches[t.matches.length-1];return r.route.id||$r(!1),r.route.id}function z5(){var e;let t=v.useContext(SC),r=F5(),s=IC();return t!==void 0?t:(e=r.errors)==null?void 0:e[s]}function U5(){let{router:e}=L5(kC.UseNavigateStable),t=IC(TC.UseNavigateStable),r=v.useRef(!1);return AC(()=>{r.current=!0}),v.useCallback(function(a,o){o===void 0&&(o={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,du({fromRouteId:t},o)))},[e,t])}const Hy={};function $5(e,t,r){Hy[e]||(Hy[e]=!0)}function q5(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function $t(e){$r(!1)}function V5(e){let{basename:t="/",children:r=null,location:s,navigationType:a=Ri.Pop,navigator:o,static:d=!1,future:u}=e;Tm()&&$r(!1);let f=t.replace(/^\/*/,"/"),p=v.useMemo(()=>({basename:f,navigator:o,static:d,future:du({v7_relativeSplatPath:!1},u)}),[f,u,o,d]);typeof s=="string"&&(s=Vc(s));let{pathname:x="/",search:w="",hash:_="",state:j=null,key:N="default"}=s,C=v.useMemo(()=>{let A=CC(x,f);return A==null?null:{location:{pathname:A,search:w,hash:_,state:j,key:N},navigationType:a}},[f,x,w,_,j,N,a]);return C==null?null:v.createElement(Am.Provider,{value:p},v.createElement(km.Provider,{children:r,value:C}))}function W5(e){let{children:t,location:r}=e;return T5($x(t),r)}new Promise(()=>{});function $x(e,t){t===void 0&&(t=[]);let r=[];return v.Children.forEach(e,(s,a)=>{if(!v.isValidElement(s))return;let o=[...t,a];if(s.type===v.Fragment){r.push.apply(r,$x(s.props.children,o));return}s.type!==$t&&$r(!1),!s.props.index||!s.props.children||$r(!1);let d={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=$x(s.props.children,o)),r.push(d)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qx(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let s=e[r];return t.concat(Array.isArray(s)?s.map(a=>[r,a]):[[r,s]])},[]))}function H5(e,t){let r=qx(e);return t&&t.forEach((s,a)=>{r.has(a)||t.getAll(a).forEach(o=>{r.append(a,o)})}),r}const G5="6";try{window.__reactRouterVersion=G5}catch{}const X5="startTransition",Gy=E0[X5];function K5(e){let{basename:t,children:r,future:s,window:a}=e,o=v.useRef();o.current==null&&(o.current=e5({window:a,v5Compat:!0}));let d=o.current,[u,f]=v.useState({action:d.action,location:d.location}),{v7_startTransition:p}=s||{},x=v.useCallback(w=>{p&&Gy?Gy(()=>f(w)):f(w)},[f,p]);return v.useLayoutEffect(()=>d.listen(x),[d,x]),v.useEffect(()=>q5(s),[s]),v.createElement(V5,{basename:t,children:r,location:u.location,navigationType:u.action,navigator:d,future:s})}var Xy;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Xy||(Xy={}));var Ky;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Ky||(Ky={}));function $1(e){let t=v.useRef(qx(e)),r=v.useRef(!1),s=Xn(),a=v.useMemo(()=>H5(s.search,r.current?null:t.current),[s.search]),o=_t(),d=v.useCallback((u,f)=>{const p=qx(typeof u=="function"?u(a):u);r.current=!0,o("?"+p,f)},[o,a]);return[a,d]}const Y5="modulepreload",Q5=function(e,t){return new URL(e,t).href},Yy={},fl=function(t,r,s){let a=Promise.resolve();if(r&&r.length>0){const d=document.getElementsByTagName("link"),u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));a=Promise.allSettled(r.map(p=>{if(p=Q5(p,s),p in Yy)return;Yy[p]=!0;const x=p.endsWith(".css"),w=x?'[rel="stylesheet"]':"";if(!!s)for(let N=d.length-1;N>=0;N--){const C=d[N];if(C.href===p&&(!x||C.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${p}"]${w}`))return;const j=document.createElement("link");if(j.rel=x?"stylesheet":Y5,x||(j.as="script"),j.crossOrigin="",j.href=p,f&&j.setAttribute("nonce",f),document.head.appendChild(j),x)return new Promise((N,C)=>{j.addEventListener("load",N),j.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(d){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=d,window.dispatchEvent(u),!u.defaultPrevented)throw d}return a.then(d=>{for(const u of d||[])u.status==="rejected"&&o(u.reason);return t().catch(o)})},Z5=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>fl(async()=>{const{default:s}=await Promise.resolve().then(()=>Wc);return{default:s}},void 0,import.meta.url).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)};class q1 extends Error{constructor(t,r="FunctionsError",s){super(t),this.name=r,this.context=s}}class Qy extends q1{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Zy extends q1{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Jy extends q1{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Vx;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Vx||(Vx={}));var J5=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(d){d(o)})}return new(r||(r=Promise))(function(o,d){function u(x){try{p(s.next(x))}catch(w){d(w)}}function f(x){try{p(s.throw(x))}catch(w){d(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})};class eD{constructor(t,{headers:r={},customFetch:s,region:a=Vx.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=Z5(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return J5(this,arguments,void 0,function*(r,s={}){var a;try{const{headers:o,method:d,body:u,signal:f}=s;let p={},{region:x}=s;x||(x=this.region);const w=new URL(`${this.url}/${r}`);x&&x!=="any"&&(p["x-region"]=x,w.searchParams.set("forceFunctionRegion",x));let _;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",_=u):typeof u=="string"?(p["Content-Type"]="text/plain",_=u):typeof FormData<"u"&&u instanceof FormData?_=u:(p["Content-Type"]="application/json",_=JSON.stringify(u)));const j=yield this.fetch(w.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),o),body:_,signal:f}).catch(S=>{throw S.name==="AbortError"?S:new Qy(S)}),N=j.headers.get("x-relay-error");if(N&&N==="true")throw new Zy(j);if(!j.ok)throw new Jy(j);let C=((a=j.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),A;return C==="application/json"?A=yield j.json():C==="application/octet-stream"?A=yield j.blob():C==="text/event-stream"?A=j:C==="multipart/form-data"?A=yield j.formData():A=yield j.text(),{data:A,error:null,response:j}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new Qy(o)}:{data:null,error:o,response:o instanceof Jy||o instanceof Zy?o.context:void 0}}})}}var $n={},V1={},Im={},Iu={},Rm={},Pm={},tD=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Tc=tD();const rD=Tc.fetch,RC=Tc.fetch.bind(Tc),PC=Tc.Headers,nD=Tc.Request,sD=Tc.Response,Wc=Object.freeze(Object.defineProperty({__proto__:null,Headers:PC,Request:nD,Response:sD,default:RC,fetch:rD},Symbol.toStringTag,{value:"Module"})),aD=Bk(Wc);var Om={};Object.defineProperty(Om,"__esModule",{value:!0});let iD=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Om.default=iD;var OC=ln&&ln.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pm,"__esModule",{value:!0});const oD=OC(aD),lD=OC(Om);let cD=class{constructor(t){var r,s;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(s=t.isMaybeSingle)!==null&&s!==void 0?s:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=oD.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let a=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var d,u,f,p;let x=null,w=null,_=null,j=o.status,N=o.statusText;if(o.ok){if(this.method!=="HEAD"){const k=await o.text();k===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?w=k:w=JSON.parse(k))}const A=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),S=(f=o.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");A&&S&&S.length>1&&(_=parseInt(S[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(w)&&(w.length>1?(x={code:"PGRST116",details:`Results contain ${w.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},w=null,_=null,j=406,N="Not Acceptable"):w.length===1?w=w[0]:w=null)}else{const A=await o.text();try{x=JSON.parse(A),Array.isArray(x)&&o.status===404&&(w=[],x=null,j=200,N="OK")}catch{o.status===404&&A===""?(j=204,N="No Content"):x={message:A}}if(x&&this.isMaybeSingle&&(!((p=x==null?void 0:x.details)===null||p===void 0)&&p.includes("0 rows"))&&(x=null,j=200,N="OK"),x&&this.shouldThrowOnError)throw new lD.default(x)}return{error:x,data:w,count:_,status:j,statusText:N}});return this.shouldThrowOnError||(a=a.catch(o=>{var d,u,f;return{error:{message:`${(d=o==null?void 0:o.name)!==null&&d!==void 0?d:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(u=o==null?void 0:o.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(f=o==null?void 0:o.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,r)}returns(){return this}overrideTypes(){return this}};Pm.default=cD;var dD=ln&&ln.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rm,"__esModule",{value:!0});const uD=dD(Pm);let hD=class extends uD.default{select(t){let r=!1;const s=(t??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:s,foreignTable:a,referencedTable:o=a}={}){const d=o?`${o}.order`:"order",u=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${u?`${u},`:""}${t}.${r?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:s=r}={}){const a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,r,{foreignTable:s,referencedTable:a=s}={}){const o=typeof a>"u"?"offset":`${a}.offset`,d=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(d,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:s=!1,buffers:a=!1,wal:o=!1,format:d="text"}={}){var u;const f=[t?"analyze":null,r?"verbose":null,s?"settings":null,a?"buffers":null,o?"wal":null].filter(Boolean).join("|"),p=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${p}"; options=${f};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Rm.default=hD;var fD=ln&&ln.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Iu,"__esModule",{value:!0});const mD=fD(Rm);let pD=class extends mD.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const s=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${s})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:s,type:a}={}){let o="";a==="plain"?o="pl":a==="phrase"?o="ph":a==="websearch"&&(o="w");const d=s===void 0?"":`(${s})`;return this.url.searchParams.append(t,`${o}fts${d}.${r}`),this}match(t){return Object.entries(t).forEach(([r,s])=>{this.url.searchParams.append(r,`eq.${s}`)}),this}not(t,r,s){return this.url.searchParams.append(t,`not.${r}.${s}`),this}or(t,{foreignTable:r,referencedTable:s=r}={}){const a=s?`${s}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,r,s){return this.url.searchParams.append(t,`${r}.${s}`),this}};Iu.default=pD;var gD=ln&&ln.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Im,"__esModule",{value:!0});const pd=gD(Iu);let xD=class{constructor(t,{headers:r={},schema:s,fetch:a}){this.url=t,this.headers=new Headers(r),this.schema=s,this.fetch=a}select(t,r){const{head:s=!1,count:a}=r??{},o=s?"HEAD":"GET";let d=!1;const u=(t??"*").split("").map(f=>/\s/.test(f)&&!d?"":(f==='"'&&(d=!d),f)).join("");return this.url.searchParams.set("select",u),a&&this.headers.append("Prefer",`count=${a}`),new pd.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:s=!0}={}){var a;const o="POST";if(r&&this.headers.append("Prefer",`count=${r}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const d=t.reduce((u,f)=>u.concat(Object.keys(f)),[]);if(d.length>0){const u=[...new Set(d)].map(f=>`"${f}"`);this.url.searchParams.set("columns",u.join(","))}}return new pd.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:s=!1,count:a,defaultToNull:o=!0}={}){var d;const u="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),a&&this.headers.append("Prefer",`count=${a}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const f=t.reduce((p,x)=>p.concat(Object.keys(x)),[]);if(f.length>0){const p=[...new Set(f)].map(x=>`"${x}"`);this.url.searchParams.set("columns",p.join(","))}}return new pd.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(t,{count:r}={}){var s;const a="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new pd.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:t}={}){var r;const s="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new pd.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};Im.default=xD;var DC=ln&&ln.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(V1,"__esModule",{value:!0});const vD=DC(Im),wD=DC(Iu);let yD=class MC{constructor(t,{headers:r={},schema:s,fetch:a}={}){this.url=t,this.headers=new Headers(r),this.schemaName=s,this.fetch=a}from(t){const r=new URL(`${this.url}/${t}`);return new vD.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new MC(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:s=!1,get:a=!1,count:o}={}){var d;let u;const f=new URL(`${this.url}/rpc/${t}`);let p;s||a?(u=s?"HEAD":"GET",Object.entries(r).filter(([w,_])=>_!==void 0).map(([w,_])=>[w,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([w,_])=>{f.searchParams.append(w,_)})):(u="POST",p=r);const x=new Headers(this.headers);return o&&x.set("Prefer",`count=${o}`),new wD.default({method:u,url:f,headers:x,schema:this.schemaName,body:p,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}};V1.default=yD;var Hc=ln&&ln.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($n,"__esModule",{value:!0});$n.PostgrestError=$n.PostgrestBuilder=$n.PostgrestTransformBuilder=$n.PostgrestFilterBuilder=$n.PostgrestQueryBuilder=$n.PostgrestClient=void 0;const LC=Hc(V1);$n.PostgrestClient=LC.default;const FC=Hc(Im);$n.PostgrestQueryBuilder=FC.default;const BC=Hc(Iu);$n.PostgrestFilterBuilder=BC.default;const zC=Hc(Rm);$n.PostgrestTransformBuilder=zC.default;const UC=Hc(Pm);$n.PostgrestBuilder=UC.default;const $C=Hc(Om);$n.PostgrestError=$C.default;var bD=$n.default={PostgrestClient:LC.default,PostgrestQueryBuilder:FC.default,PostgrestFilterBuilder:BC.default,PostgrestTransformBuilder:zC.default,PostgrestBuilder:UC.default,PostgrestError:$C.default};const{PostgrestClient:_D,PostgrestQueryBuilder:xW,PostgrestFilterBuilder:vW,PostgrestTransformBuilder:wW,PostgrestBuilder:yW,PostgrestError:bW}=bD;class ND{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const s=r.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const s=this.getWebSocketConstructor();return new s(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const jD="2.75.0",CD=`realtime-js/${jD}`,ED="1.0.0",Wx=1e4,SD=1e3,AD=100;var Od;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Od||(Od={}));var Fr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Fr||(Fr={}));var Ys;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ys||(Ys={}));var Hx;(function(e){e.websocket="websocket"})(Hx||(Hx={}));var Eo;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Eo||(Eo={}));class kD{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),s=new TextDecoder;return this._decodeBroadcast(t,r,s)}_decodeBroadcast(t,r,s){const a=r.getUint8(1),o=r.getUint8(2);let d=this.HEADER_LENGTH+2;const u=s.decode(t.slice(d,d+a));d=d+a;const f=s.decode(t.slice(d,d+o));d=d+o;const p=JSON.parse(s.decode(t.slice(d,t.byteLength)));return{ref:null,topic:u,event:f,payload:p}}}class qC{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var nr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(nr||(nr={}));const eb=(e,t,r={})=>{var s;const a=(s=r.skipTypes)!==null&&s!==void 0?s:[];return t?Object.keys(t).reduce((o,d)=>(o[d]=TD(d,e,t,a),o),{}):{}},TD=(e,t,r,s)=>{const a=t.find(u=>u.name===e),o=a==null?void 0:a.type,d=r[e];return o&&!s.includes(o)?VC(o,d):Gx(d)},VC=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return OD(t,r)}switch(e){case nr.bool:return ID(t);case nr.float4:case nr.float8:case nr.int2:case nr.int4:case nr.int8:case nr.numeric:case nr.oid:return RD(t);case nr.json:case nr.jsonb:return PD(t);case nr.timestamp:return DD(t);case nr.abstime:case nr.date:case nr.daterange:case nr.int4range:case nr.int8range:case nr.money:case nr.reltime:case nr.text:case nr.time:case nr.timestamptz:case nr.timetz:case nr.tsrange:case nr.tstzrange:return Gx(t);default:return Gx(t)}},Gx=e=>e,ID=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},RD=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},PD=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},OD=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,s=e[r];if(e[0]==="{"&&s==="}"){let o;const d=e.slice(1,r);try{o=JSON.parse("["+d+"]")}catch{o=d?d.split(","):[]}return o.map(u=>VC(t,u))}return e},DD=e=>typeof e=="string"?e.replace(" ","T"):e,WC=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class dg{constructor(t,r,s={},a=Wx){this.channel=t,this.event=r,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var s;return this._hasReceived(t)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var tb;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(tb||(tb={}));class Dd{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:o,onLeave:d,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Dd.syncState(this.state,a,o,d),this.pendingDiffs.forEach(f=>{this.state=Dd.syncDiff(this.state,f,o,d)}),this.pendingDiffs=[],u()}),this.channel._on(s.diff,{},a=>{const{onJoin:o,onLeave:d,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Dd.syncDiff(this.state,a,o,d),u())}),this.onJoin((a,o,d)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:d})}),this.onLeave((a,o,d)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,s,a){const o=this.cloneDeep(t),d=this.transformState(r),u={},f={};return this.map(o,(p,x)=>{d[p]||(f[p]=x)}),this.map(d,(p,x)=>{const w=o[p];if(w){const _=x.map(A=>A.presence_ref),j=w.map(A=>A.presence_ref),N=x.filter(A=>j.indexOf(A.presence_ref)<0),C=w.filter(A=>_.indexOf(A.presence_ref)<0);N.length>0&&(u[p]=N),C.length>0&&(f[p]=C)}else u[p]=x}),this.syncDiff(o,{joins:u,leaves:f},s,a)}static syncDiff(t,r,s,a){const{joins:o,leaves:d}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(o,(u,f)=>{var p;const x=(p=t[u])!==null&&p!==void 0?p:[];if(t[u]=this.cloneDeep(f),x.length>0){const w=t[u].map(j=>j.presence_ref),_=x.filter(j=>w.indexOf(j.presence_ref)<0);t[u].unshift(..._)}s(u,x,f)}),this.map(d,(u,f)=>{let p=t[u];if(!p)return;const x=f.map(w=>w.presence_ref);p=p.filter(w=>x.indexOf(w.presence_ref)<0),t[u]=p,a(u,p,f),p.length===0&&delete t[u]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(s=>r(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,s)=>{const a=t[s];return"metas"in a?r[s]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[s]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var rb;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(rb||(rb={}));var Md;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Md||(Md={}));var Ua;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ua||(Ua={}));class W1{constructor(t,r={config:{}},s){var a,o;if(this.topic=t,this.params=r,this.socket=s,this.bindings={},this.state=Fr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new dg(this,Ys.join,this.params,this.timeout),this.rejoinTimer=new qC(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Fr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Fr.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=Fr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Fr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=Fr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ys.reply,{},(d,u)=>{this._trigger(this._replyEventName(u),d)}),this.presence=new Dd(this),this.broadcastEndpointURL=WC(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var s,a,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Fr.closed){const{config:{broadcast:d,presence:u,private:f}}=this.params,p=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(j=>j.filter))!==null&&a!==void 0?a:[],x=!!this.bindings[Md.PRESENCE]&&this.bindings[Md.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,w={},_={broadcast:d,presence:Object.assign(Object.assign({},u),{enabled:x}),postgres_changes:p,private:f};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(j=>t==null?void 0:t(Ua.CHANNEL_ERROR,j)),this._onClose(()=>t==null?void 0:t(Ua.CLOSED)),this.updateJoinPayload(Object.assign({config:_},w)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:j})=>{var N;if(this.socket.setAuth(),j===void 0){t==null||t(Ua.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,A=(N=C==null?void 0:C.length)!==null&&N!==void 0?N:0,S=[];for(let k=0;k<A;k++){const b=C[k],{filter:{event:T,schema:O,table:L,filter:R}}=b,M=j&&j[k];if(M&&M.event===T&&M.schema===O&&M.table===L&&M.filter===R)S.push(Object.assign(Object.assign({},b),{id:M.id}));else{this.unsubscribe(),this.state=Fr.errored,t==null||t(Ua.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,t&&t(Ua.SUBSCRIBED);return}}).receive("error",j=>{this.state=Fr.errored,t==null||t(Ua.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(j).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ua.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,s){return this.state===Fr.joined&&t===Md.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,s)}async send(t,r={}){var s,a;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:d}=t,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:d,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=p.body)===null||a===void 0?void 0:a.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var d,u,f;const p=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((f=(u=(d=this.params)===null||d===void 0?void 0:d.config)===null||u===void 0?void 0:u.broadcast)===null||f===void 0)&&f.ack)&&o("ok"),p.receive("ok",()=>o("ok")),p.receive("error",()=>o("error")),p.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Fr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ys.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new dg(this,Ys.leave,{},t),s.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Fr.closed,this.bindings={}}async _fetchWithTimeout(t,r,s){const a=new AbortController,o=setTimeout(()=>a.abort(),s),d=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(o),d}_push(t,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new dg(this,t,r,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>AD){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,s){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,s){var a,o;const d=t.toLocaleLowerCase(),{close:u,error:f,leave:p,join:x}=Ys;if(s&&[u,f,p,x].indexOf(d)>=0&&s!==this._joinRef())return;let _=this._onMessage(d,r,s);if(r&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(j=>{var N,C,A;return((N=j.filter)===null||N===void 0?void 0:N.event)==="*"||((A=(C=j.filter)===null||C===void 0?void 0:C.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===d}).map(j=>j.callback(_,s)):(o=this.bindings[d])===null||o===void 0||o.filter(j=>{var N,C,A,S,k,b;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in j){const T=j.id,O=(N=j.filter)===null||N===void 0?void 0:N.event;return T&&((C=r.ids)===null||C===void 0?void 0:C.includes(T))&&(O==="*"||(O==null?void 0:O.toLocaleLowerCase())===((A=r.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const T=(k=(S=j==null?void 0:j.filter)===null||S===void 0?void 0:S.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return T==="*"||T===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return j.type.toLocaleLowerCase()===d}).map(j=>{if(typeof _=="object"&&"ids"in _){const N=_.data,{schema:C,table:A,commit_timestamp:S,type:k,errors:b}=N;_=Object.assign(Object.assign({},{schema:C,table:A,commit_timestamp:S,eventType:k,new:{},old:{},errors:b}),this._getPayloadRecords(N))}j.callback(_,s)})}_isClosed(){return this.state===Fr.closed}_isJoined(){return this.state===Fr.joined}_isJoining(){return this.state===Fr.joining}_isLeaving(){return this.state===Fr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,s){const a=t.toLocaleLowerCase(),o={type:a,filter:r,callback:s};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(t,r){const s=t.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===s&&W1.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const s in t)if(t[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ys.close,{},t)}_onError(t){this._on(Ys.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Fr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=eb(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=eb(t.columns,t.old_record)),r}}const ug=()=>{},jh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},MD=[1e3,2e3,5e3,1e4],LD=1e4,FD=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class BD{constructor(t,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Wx,this.transport=null,this.heartbeatIntervalMs=jh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ug,this.ref=0,this.reconnectTimer=null,this.logger=ug,this.conn=null,this.sendBuffer=[],this.serializer=new kD,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...d)=>fl(async()=>{const{default:u}=await Promise.resolve().then(()=>Wc);return{default:u}},void 0,import.meta.url).then(({default:u})=>u(...d)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...d)=>o(...d)},!(!((s=r==null?void 0:r.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Hx.websocket}`,this.httpEndpoint=WC(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ND.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ED}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,s){this.logger(t,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Od.connecting:return Eo.Connecting;case Od.open:return Eo.Open;case Od.closing:return Eo.Closing;default:return Eo.Closed}}isConnected(){return this.connectionState()===Eo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const s=`realtime:${t}`,a=this.getChannels().find(o=>o.topic===s);if(a)return a;{const o=new W1(`realtime:${t}`,r,this);return this.channels.push(o),o}}push(t){const{topic:r,event:s,payload:a,ref:o}=t,d=()=>{this.encode(t,u=>{var f;(f=this.conn)===null||f===void 0||f.send(u)})};this.log("push",`${r} ${s} (${o})`,a),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(SD,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},jh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:o,ref:d}=r,u=d?`(${d})`:"",f=o.status||"";this.log("receive",`${f} ${s} ${a} ${u}`.trim(),o),this.channels.filter(p=>p._isMember(s)).forEach(p=>p._trigger(a,o,d)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ys.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const s=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${s}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const s=new Blob([FD],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const a={access_token:r,version:CD};r&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(Ys.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(s=>{try{s(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(s){this.log("error",`error triggering ${t} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new qC(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},jh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,s,a,o,d,u,f,p,x;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(s=t==null?void 0:t.timeout)!==null&&s!==void 0?s:Wx,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:jh.HEARTBEAT_INTERVAL,this.worker=(o=t==null?void 0:t.worker)!==null&&o!==void 0?o:!1,this.accessToken=(d=t==null?void 0:t.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:ug,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=t==null?void 0:t.reconnectAfterMs)!==null&&f!==void 0?f:w=>MD[w-1]||LD,this.encode=(p=t==null?void 0:t.encode)!==null&&p!==void 0?p:(w,_)=>_(JSON.stringify(w)),this.decode=(x=t==null?void 0:t.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class H1 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ir(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class zD extends H1{constructor(t,r,s){super(t),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Xx extends H1{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var UD=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(d){d(o)})}return new(r||(r=Promise))(function(o,d){function u(x){try{p(s.next(x))}catch(w){d(w)}}function f(x){try{p(s.throw(x))}catch(w){d(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})};const HC=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>fl(async()=>{const{default:s}=await Promise.resolve().then(()=>Wc);return{default:s}},void 0,import.meta.url).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)},$D=()=>UD(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield fl(()=>Promise.resolve().then(()=>Wc),void 0,import.meta.url)).Response:Response}),Kx=e=>{if(Array.isArray(e))return e.map(r=>Kx(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,s])=>{const a=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[a]=Kx(s)}),t},qD=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var ml=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(d){d(o)})}return new(r||(r=Promise))(function(o,d){function u(x){try{p(s.next(x))}catch(w){d(w)}}function f(x){try{p(s.throw(x))}catch(w){d(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})};const hg=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),VD=(e,t,r)=>ml(void 0,void 0,void 0,function*(){const s=yield $D();e instanceof s&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{const o=e.status||500,d=(a==null?void 0:a.statusCode)||o+"";t(new zD(hg(a),o,d))}).catch(a=>{t(new Xx(hg(a),a))}):t(new Xx(hg(e),e))}),WD=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!s?a:(qD(s)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(s)):a.body=s,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function Ru(e,t,r,s,a,o){return ml(this,void 0,void 0,function*(){return new Promise((d,u)=>{e(r,WD(t,s,a,o)).then(f=>{if(!f.ok)throw f;return s!=null&&s.noResolveJson?f:f.json()}).then(f=>d(f)).catch(f=>VD(f,u,s))})})}function Of(e,t,r,s){return ml(this,void 0,void 0,function*(){return Ru(e,"GET",t,r,s)})}function pa(e,t,r,s,a){return ml(this,void 0,void 0,function*(){return Ru(e,"POST",t,s,a,r)})}function Yx(e,t,r,s,a){return ml(this,void 0,void 0,function*(){return Ru(e,"PUT",t,s,a,r)})}function HD(e,t,r,s){return ml(this,void 0,void 0,function*(){return Ru(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function GC(e,t,r,s,a){return ml(this,void 0,void 0,function*(){return Ru(e,"DELETE",t,s,a,r)})}var GD=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(d){d(o)})}return new(r||(r=Promise))(function(o,d){function u(x){try{p(s.next(x))}catch(w){d(w)}}function f(x){try{p(s.throw(x))}catch(w){d(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})};class XD{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return GD(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ir(t))return{data:null,error:t};throw t}})}}var KD=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(d){d(o)})}return new(r||(r=Promise))(function(o,d){function u(x){try{p(s.next(x))}catch(w){d(w)}}function f(x){try{p(s.throw(x))}catch(w){d(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})};class YD{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}asStream(){return new XD(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.execute().then(t,r)}execute(){return KD(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ir(t))return{data:null,error:t};throw t}})}}var Fn=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(d){d(o)})}return new(r||(r=Promise))(function(o,d){function u(x){try{p(s.next(x))}catch(w){d(w)}}function f(x){try{p(s.throw(x))}catch(w){d(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})};const QD={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},nb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ZD{constructor(t,r={},s,a){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=s,this.fetch=HC(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,s,a){return Fn(this,void 0,void 0,function*(){try{let o;const d=Object.assign(Object.assign({},nb),a);let u=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(d.upsert)});const f=d.metadata;typeof Blob<"u"&&s instanceof Blob?(o=new FormData,o.append("cacheControl",d.cacheControl),f&&o.append("metadata",this.encodeMetadata(f)),o.append("",s)):typeof FormData<"u"&&s instanceof FormData?(o=s,o.append("cacheControl",d.cacheControl),f&&o.append("metadata",this.encodeMetadata(f))):(o=s,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType,f&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),a!=null&&a.headers&&(u=Object.assign(Object.assign({},u),a.headers));const p=this._removeEmptyFolders(r),x=this._getFinalPath(p),w=yield(t=="PUT"?Yx:pa)(this.fetch,`${this.url}/object/${x}`,o,Object.assign({headers:u},d!=null&&d.duplex?{duplex:d.duplex}:{}));return{data:{path:p,id:w.Id,fullPath:w.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ir(o))return{data:null,error:o};throw o}})}upload(t,r,s){return Fn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,s)})}uploadToSignedUrl(t,r,s,a){return Fn(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),d=this._getFinalPath(o),u=new URL(this.url+`/object/upload/sign/${d}`);u.searchParams.set("token",r);try{let f;const p=Object.assign({upsert:nb.upsert},a),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&s instanceof Blob?(f=new FormData,f.append("cacheControl",p.cacheControl),f.append("",s)):typeof FormData<"u"&&s instanceof FormData?(f=s,f.append("cacheControl",p.cacheControl)):(f=s,x["cache-control"]=`max-age=${p.cacheControl}`,x["content-type"]=p.contentType);const w=yield Yx(this.fetch,u.toString(),f,{headers:x});return{data:{path:o,fullPath:w.Key},error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(Ir(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(t,r){return Fn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const o=yield pa(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),d=new URL(this.url+o.url),u=d.searchParams.get("token");if(!u)throw new H1("No token returned by API");return{data:{signedUrl:d.toString(),path:t,token:u},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ir(s))return{data:null,error:s};throw s}})}update(t,r,s){return Fn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,s)})}move(t,r,s){return Fn(this,void 0,void 0,function*(){try{return{data:yield pa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ir(a))return{data:null,error:a};throw a}})}copy(t,r,s){return Fn(this,void 0,void 0,function*(){try{return{data:{path:(yield pa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ir(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,s){return Fn(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),o=yield pa(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const d=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${d}`)},{data:o,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ir(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,s){return Fn(this,void 0,void 0,function*(){try{const a=yield pa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${o}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ir(a))return{data:null,error:a};throw a}})}download(t,r){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),d=o?`?${o}`:"",u=this._getFinalPath(t),f=()=>Of(this.fetch,`${this.url}/${a}/${u}${d}`,{headers:this.headers,noResolveJson:!0});return new YD(f,this.shouldThrowOnError)}info(t){return Fn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const s=yield Of(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Kx(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ir(s))return{data:null,error:s};throw s}})}exists(t){return Fn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield HD(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ir(s)&&s instanceof Xx){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}})}getPublicUrl(t,r){const s=this._getFinalPath(t),a=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&a.push(o);const u=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",f=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});f!==""&&a.push(f);let p=a.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${s}${p}`)}}}remove(t){return Fn(this,void 0,void 0,function*(){try{return{data:yield GC(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ir(r))return{data:null,error:r};throw r}})}list(t,r,s){return Fn(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},QD),r),{prefix:t||""});return{data:yield pa(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ir(a))return{data:null,error:a};throw a}})}listV2(t,r){return Fn(this,void 0,void 0,function*(){try{const s=Object.assign({},t);return{data:yield pa(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ir(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const JD="2.75.0",eM={"X-Client-Info":`storage-js/${JD}`};var El=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(d){d(o)})}return new(r||(r=Promise))(function(o,d){function u(x){try{p(s.next(x))}catch(w){d(w)}}function f(x){try{p(s.throw(x))}catch(w){d(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})};class tM{constructor(t,r={},s,a){this.shouldThrowOnError=!1;const o=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},eM),r),this.fetch=HC(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return El(this,void 0,void 0,function*(){try{return{data:yield Of(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ir(t))return{data:null,error:t};throw t}})}getBucket(t){return El(this,void 0,void 0,function*(){try{return{data:yield Of(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ir(r))return{data:null,error:r};throw r}})}createBucket(t){return El(this,arguments,void 0,function*(r,s={public:!1}){try{return{data:yield pa(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ir(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return El(this,void 0,void 0,function*(){try{return{data:yield Yx(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ir(s))return{data:null,error:s};throw s}})}emptyBucket(t){return El(this,void 0,void 0,function*(){try{return{data:yield pa(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ir(r))return{data:null,error:r};throw r}})}deleteBucket(t){return El(this,void 0,void 0,function*(){try{return{data:yield GC(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ir(r))return{data:null,error:r};throw r}})}}class rM extends tM{constructor(t,r={},s,a){super(t,r,s,a)}from(t){return new ZD(this.url,this.headers,t,this.fetch)}}const nM="2.75.0";let bd="";typeof Deno<"u"?bd="deno":typeof document<"u"?bd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?bd="react-native":bd="node";const sM={"X-Client-Info":`supabase-js-${bd}/${nM}`},aM={headers:sM},iM={schema:"public"},oM={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},lM={};var cM=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(d){d(o)})}return new(r||(r=Promise))(function(o,d){function u(x){try{p(s.next(x))}catch(w){d(w)}}function f(x){try{p(s.throw(x))}catch(w){d(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})};const dM=e=>{let t;return e?t=e:typeof fetch>"u"?t=RC:t=fetch,(...r)=>t(...r)},uM=()=>typeof Headers>"u"?PC:Headers,hM=(e,t,r)=>{const s=dM(r),a=uM();return(o,d)=>cM(void 0,void 0,void 0,function*(){var u;const f=(u=yield t())!==null&&u!==void 0?u:e;let p=new a(d==null?void 0:d.headers);return p.has("apikey")||p.set("apikey",e),p.has("Authorization")||p.set("Authorization",`Bearer ${f}`),s(o,Object.assign(Object.assign({},d),{headers:p}))})};var fM=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(d){d(o)})}return new(r||(r=Promise))(function(o,d){function u(x){try{p(s.next(x))}catch(w){d(w)}}function f(x){try{p(s.throw(x))}catch(w){d(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})};function mM(e){return e.endsWith("/")?e:e+"/"}function pM(e,t){var r,s;const{db:a,auth:o,realtime:d,global:u}=e,{db:f,auth:p,realtime:x,global:w}=t,_={db:Object.assign(Object.assign({},f),a),auth:Object.assign(Object.assign({},p),o),realtime:Object.assign(Object.assign({},x),d),storage:{},global:Object.assign(Object.assign(Object.assign({},w),u),{headers:Object.assign(Object.assign({},(r=w==null?void 0:w.headers)!==null&&r!==void 0?r:{}),(s=u==null?void 0:u.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>fM(this,void 0,void 0,function*(){return""})};return e.accessToken?_.accessToken=e.accessToken:delete _.accessToken,_}function gM(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(mM(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const XC="2.75.0",Ml=30*1e3,Qx=3,fg=Qx*Ml,xM="http://localhost:9999",vM="supabase.auth.token",wM={"X-Client-Info":`gotrue-js/${XC}`},Zx="X-Supabase-Api-Version",KC={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},yM=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,bM=10*60*1e3;class uu extends Error{constructor(t,r,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function rt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class _M extends uu{constructor(t,r,s){super(t,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function NM(e){return rt(e)&&e.name==="AuthApiError"}class So extends uu{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class io extends uu{constructor(t,r,s,a){super(t,s,a),this.name=r,this.status=s}}class xi extends io{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function jM(e){return rt(e)&&e.name==="AuthSessionMissingError"}class Sl extends io{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ch extends io{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Eh extends io{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function CM(e){return rt(e)&&e.name==="AuthImplicitGrantRedirectError"}class sb extends io{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Jx extends io{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function mg(e){return rt(e)&&e.name==="AuthRetryableFetchError"}class ab extends io{constructor(t,r,s){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class e0 extends io{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Df="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ib=` 	
\r=`.split(""),EM=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<ib.length;t+=1)e[ib[t].charCodeAt(0)]=-2;for(let t=0;t<Df.length;t+=1)e[Df[t].charCodeAt(0)]=t;return e})();function ob(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(Df[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(Df[s]),t.queuedBits-=6}}function YC(e,t,r){const s=EM[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function lb(e){const t=[],r=d=>{t.push(String.fromCodePoint(d))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=d=>{kM(d,s,r)};for(let d=0;d<e.length;d+=1)YC(e.charCodeAt(d),a,o);return t.join("")}function SM(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function AM(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}SM(s,t)}}function kM(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function oc(e){const t=[],r={queue:0,queuedBits:0},s=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)YC(e.charCodeAt(a),r,s);return new Uint8Array(t)}function TM(e){const t=[];return AM(e,r=>t.push(r)),new Uint8Array(t)}function Ro(e){const t=[],r={queue:0,queuedBits:0},s=a=>{t.push(a)};return e.forEach(a=>ob(a,r,s)),ob(null,r,s),t.join("")}function IM(e){return Math.round(Date.now()/1e3)+e}function RM(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Zn=()=>typeof window<"u"&&typeof document<"u",vo={tested:!1,writable:!1},QC=()=>{if(!Zn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(vo.tested)return vo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),vo.tested=!0,vo.writable=!0}catch{vo.tested=!0,vo.writable=!1}return vo.writable};function PM(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,o)=>{t[o]=a})}catch{}return r.searchParams.forEach((s,a)=>{t[a]=s}),t}const ZC=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>fl(async()=>{const{default:s}=await Promise.resolve().then(()=>Wc);return{default:s}},void 0,import.meta.url).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)},OM=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ll=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},wo=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},fi=async(e,t)=>{await e.removeItem(t)};class Dm{constructor(){this.promise=new Dm.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Dm.promiseConstructor=Promise;function pg(e){const t=e.split(".");if(t.length!==3)throw new e0("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!yM.test(t[s]))throw new e0("JWT not in base64url format");return{header:JSON.parse(lb(t[0])),payload:JSON.parse(lb(t[1])),signature:oc(t[2]),raw:{header:t[0],payload:t[1]}}}async function DM(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function MM(e,t){return new Promise((s,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const d=await e(o);if(!t(o,null,d)){s(d);return}}catch(d){if(!t(o,d)){a(d);return}}})()})}function LM(e){return("0"+e.toString(16)).substr(-2)}function FM(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let a="";for(let o=0;o<56;o++)a+=r.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(t),Array.from(t,LM).join("")}async function BM(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(s);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function zM(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await BM(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Al(e,t,r=!1){const s=FM();let a=s;r&&(a+="/PASSWORD_RECOVERY"),await Ll(e,`${t}-code-verifier`,a);const o=await zM(s);return[o,s===o?"plain":"s256"]}const UM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function $M(e){const t=e.headers.get(Zx);if(!t||!t.match(UM))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function qM(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function VM(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const WM=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function kl(e){if(!WM.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function gg(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function cb(e){return JSON.parse(JSON.stringify(e))}var HM=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r};const No=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),GM=[502,503,504];async function db(e){var t;if(!OM(e))throw new Jx(No(e),0);if(GM.includes(e.status))throw new Jx(No(e),e.status);let r;try{r=await e.json()}catch(o){throw new So(No(o),o)}let s;const a=$M(e);if(a&&a.getTime()>=KC["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new ab(No(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new xi}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,d)=>o&&typeof d=="string",!0))throw new ab(No(r),e.status,r.weak_password.reasons);throw new _M(No(r),e.status||500,s)}const XM=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),r))};async function lt(e,t,r,s){var a;const o=Object.assign({},s==null?void 0:s.headers);o[Zx]||(o[Zx]=KC["2024-01-01"].name),s!=null&&s.jwt&&(o.Authorization=`Bearer ${s.jwt}`);const d=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(d.redirect_to=s.redirectTo);const u=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",f=await KM(e,t,r+u,{headers:o,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(f):{data:Object.assign({},f),error:null}}async function KM(e,t,r,s,a,o){const d=XM(t,s,a,o);let u;try{u=await e(r,Object.assign({},d))}catch(f){throw console.error(f),new Jx(No(f),0)}if(u.ok||await db(u),s!=null&&s.noResolveJson)return u;try{return await u.json()}catch(f){await db(f)}}function qs(e){var t;let r=null;ZM(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=IM(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:s},error:null}}function ub(e){const t=qs(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ni(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function YM(e){return{data:e,error:null}}function QM(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:a,verification_type:o}=e,d=HM(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:r,hashed_token:s,redirect_to:a,verification_type:o},f=Object.assign({},d);return{data:{properties:u,user:f},error:null}}function hb(e){return e}function ZM(e){return e.access_token&&e.refresh_token&&e.expires_in}const xg=["global","local","others"];var JM=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r};class e7{constructor({url:t="",headers:r={},fetch:s}){this.url=t,this.headers=r,this.fetch=ZC(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=xg[0]){if(xg.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${xg.join(", ")}`);try{return await lt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(rt(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,r={}){try{return await lt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ni})}catch(s){if(rt(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:r}=t,s=JM(t,["options"]),a=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await lt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:QM,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(rt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await lt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ni})}catch(r){if(rt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,s,a,o,d,u,f;try{const p={nextPage:null,lastPage:0,total:0},x=await lt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(o=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:hb});if(x.error)throw x.error;const w=await x.json(),_=(d=x.headers.get("x-total-count"))!==null&&d!==void 0?d:0,j=(f=(u=x.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return j.length>0&&(j.forEach(N=>{const C=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(N.split(";")[1].split("=")[1]);p[`${A}Page`]=C}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},w),p),error:null}}catch(p){if(rt(p))return{data:{users:[]},error:p};throw p}}async getUserById(t){kl(t);try{return await lt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ni})}catch(r){if(rt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){kl(t);try{return await lt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Ni})}catch(s){if(rt(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,r=!1){kl(t);try{return await lt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ni})}catch(s){if(rt(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){kl(t.userId);try{const{data:r,error:s}=await lt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:s}}catch(r){if(rt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){kl(t.userId),kl(t.id);try{return{data:await lt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,s,a,o,d,u,f;try{const p={nextPage:null,lastPage:0,total:0},x=await lt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(o=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:hb});if(x.error)throw x.error;const w=await x.json(),_=(d=x.headers.get("x-total-count"))!==null&&d!==void 0?d:0,j=(f=(u=x.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return j.length>0&&(j.forEach(N=>{const C=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(N.split(";")[1].split("=")[1]);p[`${A}Page`]=C}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},w),p),error:null}}catch(p){if(rt(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(t){try{return await lt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(rt(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await lt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(rt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await lt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(rt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await lt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(rt(r))return{data:null,error:r};throw r}}}function fb(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Tl={debug:!!(globalThis&&QC()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class JC extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class t7 extends JC{}async function r7(e,t,r){Tl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),Tl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){Tl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Tl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Tl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new t7(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Tl.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function n7(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function eE(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function s7(e){return parseInt(e,16)}function a7(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,s=>s.toString(16).padStart(2,"0")).join("")}function i7(e){var t;const{chainId:r,domain:s,expirationTime:a,issuedAt:o=new Date,nonce:d,notBefore:u,requestId:f,resources:p,scheme:x,uri:w,version:_}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(d&&d.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${d}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const j=eE(e.address),N=x?`${x}://${s}`:s,C=e.statement?`${e.statement}
`:"",A=`${N} wants you to sign in with your Ethereum account:
${j}

${C}`;let S=`URI: ${w}
Version: ${_}
Chain ID: ${r}${d?`
Nonce: ${d}`:""}
Issued At: ${o.toISOString()}`;if(a&&(S+=`
Expiration Time: ${a.toISOString()}`),u&&(S+=`
Not Before: ${u.toISOString()}`),f&&(S+=`
Request ID: ${f}`),p){let k=`
Resources:`;for(const b of p){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);k+=`
- ${b}`}S+=k}return`${A}
${S}`}class Tr extends Error{constructor({message:t,code:r,cause:s,name:a}){var o;super(t,{cause:s}),this.__isWebAuthnError=!0,this.name=(o=a??(s instanceof Error?s.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=r}}class Mf extends Tr{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function o7({error:e,options:t}){var r,s,a;const{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Tr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=o.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Tr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Tr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=o.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Tr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Tr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Tr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new Tr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Tr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const d=window.location.hostname;if(rE(d)){if(o.rp.id!==d)return new Tr({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Tr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Tr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Tr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Tr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function l7({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Tr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Tr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(rE(s)){if(r.rpId!==s)return new Tr({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Tr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Tr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Tr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var tE=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r};class c7{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const d7=new c7;function u7(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:s}=e,a=tE(e,["challenge","user","excludeCredentials"]),o=oc(t).buffer,d=Object.assign(Object.assign({},r),{id:oc(r.id).buffer}),u=Object.assign(Object.assign({},a),{challenge:o,user:d});if(s&&s.length>0){u.excludeCredentials=new Array(s.length);for(let f=0;f<s.length;f++){const p=s[f];u.excludeCredentials[f]=Object.assign(Object.assign({},p),{id:oc(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return u}function h7(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,s=tE(e,["challenge","allowCredentials"]),a=oc(t).buffer,o=Object.assign(Object.assign({},s),{challenge:a});if(r&&r.length>0){o.allowCredentials=new Array(r.length);for(let d=0;d<r.length;d++){const u=r[d];o.allowCredentials[d]=Object.assign(Object.assign({},u),{id:oc(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function f7(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Ro(new Uint8Array(e.response.attestationObject)),clientDataJSON:Ro(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function m7(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,s=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Ro(new Uint8Array(a.authenticatorData)),clientDataJSON:Ro(new Uint8Array(a.clientDataJSON)),signature:Ro(new Uint8Array(a.signature)),userHandle:a.userHandle?Ro(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function rE(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function mb(){var e,t;return!!(Zn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function p7(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Mf("Browser returned unexpected credential type",t)}:{data:null,error:new Mf("Empty credential response",t)}}catch(t){return{data:null,error:o7({error:t,options:e})}}}async function g7(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Mf("Browser returned unexpected credential type",t)}:{data:null,error:new Mf("Empty credential response",t)}}catch(t){return{data:null,error:l7({error:t,options:e})}}}const x7={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},v7={userVerification:"preferred",hints:["security-key"]};function Lf(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of e)if(a)for(const o in a){const d=a[o];if(d!==void 0)if(Array.isArray(d))s[o]=d;else if(r(d))s[o]=d;else if(t(d)){const u=s[o];t(u)?s[o]=Lf(u,d):s[o]=Lf(d)}else s[o]=d}return s}function w7(e,t){return Lf(x7,e,t||{})}function y7(e,t){return Lf(v7,e,t||{})}class b7{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:s,signal:a},o){try{const{data:d,error:u}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!d)return{data:null,error:u};const f=a??d7.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:p}=d.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${s}`),p.displayName||(p.displayName=p.name)}switch(d.webauthn.type){case"create":{const p=w7(d.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:x,error:w}=await p7({publicKey:p,signal:f});return x?{data:{factorId:t,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:x}},error:null}:{data:null,error:w}}case"request":{const p=y7(d.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:x,error:w}=await g7(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:p,signal:f}));return x?{data:{factorId:t,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:x}},error:null}:{data:null,error:w}}}}catch(d){return rt(d)?{data:null,error:d}:{data:null,error:new So("Unexpected error in challenge",d)}}}async _verify({challengeId:t,factorId:r,webauthn:s}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:s})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}},o){if(!r)return{data:null,error:new uu("rpId is required for WebAuthn authentication")};try{if(!mb())return{data:null,error:new So("Browser does not support WebAuthn",null)};const{data:d,error:u}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:s},signal:a},{request:o});if(!d)return{data:null,error:u};const{webauthn:f}=d;return this._verify({factorId:t,challengeId:d.challengeId,webauthn:{type:f.type,rpId:r,rpOrigins:s,credential_response:f.credential_response}})}catch(d){return rt(d)?{data:null,error:d}:{data:null,error:new So("Unexpected error in authenticate",d)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a},o){if(!r)return{data:null,error:new uu("rpId is required for WebAuthn registration")};try{if(!mb())return{data:null,error:new So("Browser does not support WebAuthn",null)};const{data:d,error:u}=await this._enroll({friendlyName:t});if(!d)return await this.client.mfa.listFactors().then(x=>{var w;return(w=x.data)===null||w===void 0?void 0:w.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===t&&_.status!=="unverified")}).then(x=>x?this.client.mfa.unenroll({factorId:x==null?void 0:x.id}):void 0),{data:null,error:u};const{data:f,error:p}=await this._challenge({factorId:d.id,friendlyName:d.friendly_name,webauthn:{rpId:r,rpOrigins:s},signal:a},{create:o});return f?this._verify({factorId:d.id,challengeId:f.challengeId,webauthn:{rpId:r,rpOrigins:s,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:p}}catch(d){return rt(d)?{data:null,error:d}:{data:null,error:new So("Unexpected error in register",d)}}}}n7();const _7={url:xM,storageKey:vM,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:wM,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function pb(e,t,r){return await r()}const Il={};class hu{get jwks(){var t,r;return(r=(t=Il[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Il[this.storageKey]=Object.assign(Object.assign({},Il[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Il[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Il[this.storageKey]=Object.assign(Object.assign({},Il[this.storageKey]),{cachedAt:t})}constructor(t){var r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=hu.nextInstanceID,hu.nextInstanceID+=1,this.instanceID>0&&Zn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},_7),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new e7({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=ZC(a.fetch),this.lock=a.lock||pb,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Zn()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=r7:this.lock=pb,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new b7(this)},this.persistSession?(a.storage?this.storage=a.storage:QC()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=fb(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=fb(this.memoryStorage)),Zn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${XC}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=PM(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),Zn()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:o}=await this._getSessionFromURL(r,s);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),CM(o)){const f=(t=o.details)===null||t===void 0?void 0:t.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:d,redirectType:u}=a;return this._debug("#_initialize()","detected session in URL",d,"redirect type",u),await this._saveSession(d),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return rt(r)?{error:r}:{error:new So("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,s,a;try{const o=await lt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:qs}),{data:d,error:u}=o;if(u||!d)return{data:{user:null,session:null},error:u};const f=d.session,p=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(o){if(rt(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var r,s,a;try{let o;if("email"in t){const{email:x,password:w,options:_}=t;let j=null,N=null;this.flowType==="pkce"&&([j,N]=await Al(this.storage,this.storageKey)),o=await lt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:x,password:w,data:(r=_==null?void 0:_.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:j,code_challenge_method:N},xform:qs})}else if("phone"in t){const{phone:x,password:w,options:_}=t;o=await lt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:w,data:(s=_==null?void 0:_.data)!==null&&s!==void 0?s:{},channel:(a=_==null?void 0:_.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:qs})}else throw new Ch("You must provide either an email or phone number and a password");const{data:d,error:u}=o;if(u||!d)return{data:{user:null,session:null},error:u};const f=d.session,p=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(o){if(rt(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let r;if("email"in t){const{email:o,password:d,options:u}=t;r=await lt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:d,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:ub})}else if("phone"in t){const{phone:o,password:d,options:u}=t;r=await lt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:d,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:ub})}else throw new Ch("You must provide either an email or phone number and a password");const{data:s,error:a}=r;return a?{data:{user:null,session:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Sl}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(r){if(rt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,s,a,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,s,a,o,d,u,f,p,x,w,_;let j,N;if("message"in t)j=t.message,N=t.signature;else{const{chain:C,wallet:A,statement:S,options:k}=t;let b;if(Zn())if(typeof A=="object")b=A;else{const P=window;if("ethereum"in P&&typeof P.ethereum=="object"&&"request"in P.ethereum&&typeof P.ethereum.request=="function")b=P.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=A}const T=new URL((r=k==null?void 0:k.url)!==null&&r!==void 0?r:window.location.href),O=await b.request({method:"eth_requestAccounts"}).then(P=>P).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!O||O.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const L=eE(O[0]);let R=(s=k==null?void 0:k.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!R){const P=await b.request({method:"eth_chainId"});R=s7(P)}const M={domain:T.host,address:L,statement:S,uri:T.href,version:"1",chainId:R,nonce:(a=k==null?void 0:k.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(d=(o=k==null?void 0:k.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&d!==void 0?d:new Date,expirationTime:(u=k==null?void 0:k.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(f=k==null?void 0:k.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(p=k==null?void 0:k.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(x=k==null?void 0:k.signInWithEthereum)===null||x===void 0?void 0:x.resources};j=i7(M),N=await b.request({method:"personal_sign",params:[a7(j),L]})}try{const{data:C,error:A}=await lt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:j,signature:N},!((w=t.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(_=t.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:qs});if(A)throw A;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new Sl}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:A})}catch(C){if(rt(C))return{data:{user:null,session:null},error:C};throw C}}async signInWithSolana(t){var r,s,a,o,d,u,f,p,x,w,_,j;let N,C;if("message"in t)N=t.message,C=t.signature;else{const{chain:A,wallet:S,statement:k,options:b}=t;let T;if(Zn())if(typeof S=="object")T=S;else{const L=window;if("solana"in L&&typeof L.solana=="object"&&("signIn"in L.solana&&typeof L.solana.signIn=="function"||"signMessage"in L.solana&&typeof L.solana.signMessage=="function"))T=L.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=S}const O=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in T&&T.signIn){const L=await T.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:O.host,uri:O.href}),k?{statement:k}:null));let R;if(Array.isArray(L)&&L[0]&&typeof L[0]=="object")R=L[0];else if(L&&typeof L=="object"&&"signedMessage"in L&&"signature"in L)R=L;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)N=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),C=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in T)||typeof T.signMessage!="function"||!("publicKey"in T)||typeof T!="object"||!T.publicKey||!("toBase58"in T.publicKey)||typeof T.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");N=[`${O.host} wants you to sign in with your Solana account:`,T.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${O.href}`,`Issued At: ${(a=(s=b==null?void 0:b.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((d=b==null?void 0:b.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((f=b==null?void 0:b.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((p=b==null?void 0:b.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((w=(x=b==null?void 0:b.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||w===void 0)&&w.length?["Resources",...b.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const L=await T.signMessage(new TextEncoder().encode(N),"utf8");if(!L||!(L instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=L}}try{const{data:A,error:S}=await lt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:N,signature:Ro(C)},!((_=t.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(j=t.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:qs});if(S)throw S;return!A||!A.session||!A.user?{data:{user:null,session:null},error:new Sl}:(A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),{data:Object.assign({},A),error:S})}catch(A){if(rt(A))return{data:{user:null,session:null},error:A};throw A}}async _exchangeCodeForSession(t){const r=await wo(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(r??"").split("/");try{const{data:o,error:d}=await lt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:qs});if(await fi(this.storage,`${this.storageKey}-code-verifier`),d)throw d;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Sl}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:d})}catch(o){if(rt(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:r,provider:s,token:a,access_token:o,nonce:d}=t,u=await lt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:o,nonce:d,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:qs}),{data:f,error:p}=u;return p?{data:{user:null,session:null},error:p}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new Sl}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:p})}catch(r){if(rt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,s,a,o,d;try{if("email"in t){const{email:u,options:f}=t;let p=null,x=null;this.flowType==="pkce"&&([p,x]=await Al(this.storage,this.storageKey));const{error:w}=await lt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},create_user:(s=f==null?void 0:f.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:x},redirectTo:f==null?void 0:f.emailRedirectTo});return{data:{user:null,session:null},error:w}}if("phone"in t){const{phone:u,options:f}=t,{data:p,error:x}=await lt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(a=f==null?void 0:f.data)!==null&&a!==void 0?a:{},create_user:(o=f==null?void 0:f.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(d=f==null?void 0:f.channel)!==null&&d!==void 0?d:"sms"}});return{data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:x}}throw new Ch("You must provide either an email or phone number.")}catch(u){if(rt(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(t){var r,s;try{let a,o;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,o=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:d,error:u}=await lt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:qs});if(u)throw u;if(!d)throw new Error("An error occurred on token verification.");const f=d.session,p=d.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(a){if(rt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,s,a;try{let o=null,d=null;return this.flowType==="pkce"&&([o,d]=await Al(this.storage,this.storageKey)),await lt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:d}),headers:this.headers,xform:YM})}catch(o){if(rt(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;if(s)throw s;if(!r)throw new xi;const{error:a}=await lt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(rt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:s,type:a,options:o}=t,{error:d}=await lt(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:d}}else if("phone"in t){const{phone:s,type:a,options:o}=t,{data:d,error:u}=await lt(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Ch("You must provide either an email or phone number and a type")}catch(r){if(rt(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await wo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<fg:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const d=await wo(this.userStorage,this.storageKey+"-user");d!=null&&d.user?t.user=d.user:t.user=gg()}if(this.storage.isServer&&t.user){let d=this.suppressGetSessionWarning;t=new Proxy(t,{get:(f,p,x)=>(!d&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),d=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,p,x))})}return{data:{session:t},error:null}}const{data:a,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await lt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ni}):await this._useSession(async r=>{var s,a,o;const{data:d,error:u}=r;if(u)throw u;return!(!((s=d.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new xi}:await lt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=d.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:Ni})})}catch(r){if(rt(r))return jM(r)&&(await this._removeSession(),await fi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async s=>{const{data:a,error:o}=s;if(o)throw o;if(!a.session)throw new xi;const d=a.session;let u=null,f=null;this.flowType==="pkce"&&t.email!=null&&([u,f]=await Al(this.storage,this.storageKey));const{data:p,error:x}=await lt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:f}),jwt:d.access_token,xform:Ni});if(x)throw x;return d.user=p.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),{data:{user:d.user},error:null}})}catch(s){if(rt(s))return{data:{user:null},error:s};throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new xi;const r=Date.now()/1e3;let s=r,a=!0,o=null;const{payload:d}=pg(t.access_token);if(d.exp&&(s=d.exp,a=s<=r),a){const{data:u,error:f}=await this._callRefreshToken(t.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:f}=await this._getUser(t.access_token);if(f)throw f;o={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if(rt(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var s;if(!t){const{data:d,error:u}=r;if(u)throw u;t=(s=d.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new xi;const{data:a,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(rt(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Zn())throw new Eh("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Eh(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new sb("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Eh("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new sb("No code detected.");const{data:k,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:o,refresh_token:d,expires_in:u,expires_at:f,token_type:p}=t;if(!o||!u||!d||!p)throw new Eh("No session defined in URL");const x=Math.round(Date.now()/1e3),w=parseInt(u);let _=x+w;f&&(_=parseInt(f));const j=_-x;j*1e3<=Ml&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${j}s, should have been closer to ${w}s`);const N=_-w;x-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,_,x):x-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,_,x);const{data:C,error:A}=await this._getUser(o);if(A)throw A;const S={provider_token:s,provider_refresh_token:a,access_token:o,expires_in:w,expires_at:_,refresh_token:d,token_type:p,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:S,redirectType:t.type},error:null}}catch(s){if(rt(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await wo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:a,error:o}=r;if(o)return{error:o};const d=(s=a.session)===null||s===void 0?void 0:s.access_token;if(d){const{error:u}=await this.admin.signOut(d,t);if(u&&!(NM(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return t!=="others"&&(await this._removeSession(),await fi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=RM(),s={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async r=>{var s,a;try{const{data:{session:o},error:d}=r;if(d)throw d;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,r={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await Al(this.storage,this.storageKey,!0));try{return await lt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(rt(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:s,error:a}=await this._useSession(async o=>{var d,u,f,p,x;const{data:w,error:_}=o;if(_)throw _;const j=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(d=t.options)===null||d===void 0?void 0:d.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(f=t.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await lt(this.fetch,"GET",j,{headers:this.headers,jwt:(x=(p=w.session)===null||p===void 0?void 0:p.access_token)!==null&&x!==void 0?x:void 0})});if(a)throw a;return Zn()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:t.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(rt(s))return{data:{provider:t.provider,url:null},error:s};throw s}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var s;try{const{error:a,data:{session:o}}=r;if(a)throw a;const{options:d,provider:u,token:f,access_token:p,nonce:x}=t,w=await lt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=o==null?void 0:o.access_token)!==null&&s!==void 0?s:void 0,body:{provider:u,id_token:f,access_token:p,nonce:x,link_identity:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:qs}),{data:_,error:j}=w;return j?{data:{user:null,session:null},error:j}:!_||!_.session||!_.user?{data:{user:null,session:null},error:new Sl}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),{data:_,error:j})}catch(a){if(rt(a))return{data:{user:null,session:null},error:a};throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var s,a;const{data:o,error:d}=r;if(d)throw d;return await lt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(rt(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await MM(async a=>(a>0&&await DM(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await lt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:qs})),(a,o)=>{const d=200*Math.pow(2,a);return o&&mg(o)&&Date.now()+d-s<Ml})}catch(s){if(this._debug(r,"error",s),rt(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",s),Zn()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await wo(this.storage,this.storageKey);if(a&&this.userStorage){let d=await wo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:a.user},await Ll(this.userStorage,this.storageKey+"-user",d)),a.user=(t=d==null?void 0:d.user)!==null&&t!==void 0?t:gg()}else if(a&&!a.user&&!a.user){const d=await wo(this.storage,this.storageKey+"-user");d&&(d!=null&&d.user)?(a.user=d.user,await fi(this.storage,this.storageKey+"-user"),await Ll(this.storage,this.storageKey,a)):a.user=gg()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const o=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<fg;if(this._debug(s,`session has${o?"":" not"} expired with margin of ${fg}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:d}=await this._callRefreshToken(a.refresh_token);d&&(console.error(d),mg(d)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:u}=await this._getUser(a.access_token);!u&&(d!=null&&d.user)?(a.user=d.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(s,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var r,s;if(!t)throw new xi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Dm;const{data:o,error:d}=await this._refreshAccessToken(t);if(d)throw d;if(!o.session)throw new xi;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={data:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(a,"error",o),rt(o)){const d={data:null,error:o};return mg(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(d),d}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,s=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:r});const o=[],d=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,r)}catch(f){o.push(f)}});if(await Promise.all(d),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await Ll(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const o=cb(a);await Ll(this.storage,this.storageKey,o)}else{const a=cb(r);await Ll(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await fi(this.storage,this.storageKey),await fi(this.storage,this.storageKey+"-code-verifier"),await fi(this.storage,this.storageKey+"-user"),this.userStorage&&await fi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Zn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ml);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-t)/Ml);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Ml}ms, refresh threshold is ${Qx} ticks`),a<=Qx&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof JC)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Zn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,s){const a=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[o,d]=await Al(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(d)}`});a.push(u.toString())}if(s!=null&&s.queryParams){const o=new URLSearchParams(s.queryParams);a.push(o.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var s;const{data:a,error:o}=r;return o?{data:null,error:o}:await lt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(rt(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var s,a;const{data:o,error:d}=r;if(d)return{data:null,error:d};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:f,error:p}=await lt(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});return p?{data:null,error:p}:(t.factorType==="totp"&&f.type==="totp"&&(!((a=f==null?void 0:f.totp)===null||a===void 0)&&a.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(r){if(rt(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:o}=r;if(o)return{data:null,error:o};const d=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?f7(t.webauthn.credential_response):m7(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:f}=await lt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:d,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:f})})}catch(r){if(rt(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:o}=r;if(o)return{data:null,error:o};const d=await lt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});if(d.error)return d;const{data:u}=d;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:u7(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:h7(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(rt(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:s}=await this._challenge({factorId:t.factorId});return s?{data:null,error:s}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const o of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(o),o.status==="verified"&&a[o.factor_type].push(o);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,s;const{data:{session:a},error:o}=t;if(o)return{data:null,error:o};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=pg(a.access_token);let u=null;d.aal&&(u=d.aal);let f=u;((s=(r=a.user.factors)===null||r===void 0?void 0:r.filter(w=>w.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(f="aal2");const x=d.amr||[];return{data:{currentLevel:u,nextLevel:f,currentAuthenticationMethods:x},error:null}}))}async fetchJwk(t,r={keys:[]}){let s=r.keys.find(u=>u.kid===t);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(u=>u.kid===t),s&&this.jwks_cached_at+bM>a)return s;const{data:o,error:d}=await lt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,s=o.keys.find(u=>u.kid===t),!s)?null:s}async getClaims(t,r={}){try{let s=t;if(!s){const{data:j,error:N}=await this.getSession();if(N||!j.session)return{data:null,error:N};s=j.session.access_token}const{header:a,payload:o,signature:d,raw:{header:u,payload:f}}=pg(s);r!=null&&r.allowExpired||qM(o.exp);const p=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!p){const{error:j}=await this.getUser(s);if(j)throw j;return{data:{claims:o,header:a,signature:d},error:null}}const x=VM(a.alg),w=await crypto.subtle.importKey("jwk",p,x,!0,["verify"]);if(!await crypto.subtle.verify(x,w,d,TM(`${u}.${f}`)))throw new e0("Invalid JWT signature");return{data:{claims:o,header:a,signature:d},error:null}}catch(s){if(rt(s))return{data:null,error:s};throw s}}}hu.nextInstanceID=0;const N7=hu;class j7 extends N7{constructor(t){super(t)}}var C7=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(d){d(o)})}return new(r||(r=Promise))(function(o,d){function u(x){try{p(s.next(x))}catch(w){d(w)}}function f(x){try{p(s.throw(x))}catch(w){d(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})};class E7{constructor(t,r,s){var a,o,d;this.supabaseUrl=t,this.supabaseKey=r;const u=gM(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const f=`sb-${u.hostname.split(".")[0]}-auth-token`,p={db:iM,realtime:lM,auth:Object.assign(Object.assign({},oM),{storageKey:f}),global:aM},x=pM(s??{},p);this.storageKey=(a=x.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=x.global.headers)!==null&&o!==void 0?o:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(w,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=x.auth)!==null&&d!==void 0?d:{},this.headers,x.global.fetch),this.fetch=hM(r,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new _D(new URL("rest/v1",u).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new rM(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new eD(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,s)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return C7(this,void 0,void 0,function*(){var t,r;if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(r=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:a,userStorage:o,storageKey:d,flowType:u,lock:f,debug:p},x,w){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new j7({url:this.authUrl.href,headers:Object.assign(Object.assign({},_),x),storageKey:d,autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:a,userStorage:o,flowType:u,lock:f,debug:p,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(j=>j.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new BD(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(t,r,s){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const S7=(e,t,r)=>new E7(e,t,r);function A7(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}A7()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const k7="https://nsyaecxzjqruqkbnaael.supabase.co",T7="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5zeWFlY3h6anFydXFrYm5hYWVsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgxMjQwMjgsImV4cCI6MjA3MzcwMDAyOH0.bTmmKPcStHhkJgi0SJZjz-8YEll--FfRBvZH8ObOdKU",U=S7(k7,T7,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),nE=v.createContext(void 0);function I7({children:e}){const[t,r]=v.useState(null),[s,a]=v.useState(null),[o,d]=v.useState(null),[u,f]=v.useState(!0),p=async j=>{try{const{data:N}=await U.from("profiles").select("role").eq("user_id",j).single();d((N==null?void 0:N.role)||"user")}catch(N){console.error("Error fetching user role:",N),d("user")}};v.useEffect(()=>{const{data:{subscription:j}}=U.auth.onAuthStateChange(async(N,C)=>{a(C),r((C==null?void 0:C.user)??null),C!=null&&C.user?p(C.user.id):d(null),f(!1)});return U.auth.getSession().then(({data:{session:N}})=>{a(N),r((N==null?void 0:N.user)??null),N!=null&&N.user&&p(N.user.id),f(!1)}),()=>j.unsubscribe()},[]);const x=async(j,N,C,A)=>{try{const S=`${window.location.origin}/`,{error:k}=await U.auth.signUp({email:j,password:N,options:{emailRedirectTo:S,data:{display_name:C,role:A}}});return k?(W.error(k.message),{error:k}):(W.success("Conta criada com sucesso! Verifique seu email."),{error:null})}catch(S){return W.error("Erro ao criar conta"),{error:S}}},w=async(j,N)=>{try{const{error:C}=await U.auth.signInWithPassword({email:j,password:N});return C?(W.error(C.message),{error:C}):(W.success("Login realizado com sucesso!"),{error:null})}catch(C){return W.error("Erro ao fazer login"),{error:C}}},_=async()=>{try{await U.auth.signOut({scope:"global"}),a(null),r(null),d(null),W.success("Logout realizado com sucesso!"),setTimeout(()=>{window.location.href="/"},100)}catch(j){a(null),r(null),d(null),console.error("Logout error:",j),setTimeout(()=>{window.location.href="/"},100)}};return n.jsx(nE.Provider,{value:{user:t,session:s,userRole:o,loading:u,signUp:x,signIn:w,signOut:_},children:e})}function wt(){const e=v.useContext(nE);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const sE=v.createContext(void 0);function R7({children:e,forcedTheme:t}){const[r,s]=v.useState(()=>t||localStorage.getItem("theme")||"dark");v.useEffect(()=>{if(t){s(t);const u=document.documentElement;u.classList.remove("dark","light"),u.classList.add(t);return}const d=document.documentElement;d.classList.remove("dark","light"),d.classList.add(r),localStorage.setItem("theme",r)},[r,t]);const a=d=>{t||s(d)},o=()=>{if(t)console.log("Theme toggle blocked by forcedTheme:",t);else{const d=r==="dark"?"light":"dark";console.log("Toggling theme from",r,"to",d),a(d)}};return n.jsx(sE.Provider,{value:{theme:r,setTheme:a,toggleTheme:o},children:e})}function G1(){const e=v.useContext(sE);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}/*! Capacitor: https://capacitorjs.com/ - MIT License */var Ic;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(Ic||(Ic={}));class vg extends Error{constructor(t,r,s){super(t),this.message=t,this.code=r,this.data=s}}const P7=e=>{var t,r;return e!=null&&e.androidBridge?"android":!((r=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||r===void 0)&&r.bridge?"ios":"web"},O7=e=>{const t=e.CapacitorCustomPlatform||null,r=e.Capacitor||{},s=r.Plugins=r.Plugins||{},a=()=>t!==null?t.name:P7(e),o=()=>a()!=="web",d=w=>{const _=p.get(w);return!!(_!=null&&_.platforms.has(a())||u(w))},u=w=>{var _;return(_=r.PluginHeaders)===null||_===void 0?void 0:_.find(j=>j.name===w)},f=w=>e.console.error(w),p=new Map,x=(w,_={})=>{const j=p.get(w);if(j)return console.warn(`Capacitor plugin "${w}" already registered. Cannot register plugins twice.`),j.proxy;const N=a(),C=u(w);let A;const S=async()=>(!A&&N in _?A=typeof _[N]=="function"?A=await _[N]():A=_[N]:t!==null&&!A&&"web"in _&&(A=typeof _.web=="function"?A=await _.web():A=_.web),A),k=(M,P)=>{var q,G;if(C){const B=C==null?void 0:C.methods.find(V=>P===V.name);if(B)return B.rtype==="promise"?V=>r.nativePromise(w,P.toString(),V):(V,ee)=>r.nativeCallback(w,P.toString(),V,ee);if(M)return(q=M[P])===null||q===void 0?void 0:q.bind(M)}else{if(M)return(G=M[P])===null||G===void 0?void 0:G.bind(M);throw new vg(`"${w}" plugin is not implemented on ${N}`,Ic.Unimplemented)}},b=M=>{let P;const q=(...G)=>{const B=S().then(V=>{const ee=k(V,M);if(ee){const X=ee(...G);return P=X==null?void 0:X.remove,X}else throw new vg(`"${w}.${M}()" is not implemented on ${N}`,Ic.Unimplemented)});return M==="addListener"&&(B.remove=async()=>P()),B};return q.toString=()=>`${M.toString()}() { [capacitor code] }`,Object.defineProperty(q,"name",{value:M,writable:!1,configurable:!1}),q},T=b("addListener"),O=b("removeListener"),L=(M,P)=>{const q=T({eventName:M},P),G=async()=>{const V=await q;O({eventName:M,callbackId:V},P)},B=new Promise(V=>q.then(()=>V({remove:G})));return B.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await G()},B},R=new Proxy({},{get(M,P){switch(P){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return C?L:T;case"removeListener":return O;default:return b(P)}}});return s[w]=R,p.set(w,{name:w,proxy:R,platforms:new Set([...Object.keys(_),...C?[N]:[]])}),R};return r.convertFileSrc||(r.convertFileSrc=w=>w),r.getPlatform=a,r.handleError=f,r.isNativePlatform=o,r.isPluginAvailable=d,r.registerPlugin=x,r.Exception=vg,r.DEBUG=!!r.DEBUG,r.isLoggingEnabled=!!r.isLoggingEnabled,r},D7=e=>e.Capacitor=O7(e),rs=D7(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Mm=rs.registerPlugin;class aE{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,r){let s=!1;this.listeners[t]||(this.listeners[t]=[],s=!0),this.listeners[t].push(r);const o=this.windowListeners[t];o&&!o.registered&&this.addWindowListener(o),s&&this.sendRetainedArgumentsForEvent(t);const d=async()=>this.removeListener(t,r);return Promise.resolve({remove:d})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,r,s){const a=this.listeners[t];if(!a){if(s){let o=this.retainedEventArguments[t];o||(o=[]),o.push(r),this.retainedEventArguments[t]=o}return}a.forEach(o=>o(r))}hasListeners(t){var r;return!!(!((r=this.listeners[t])===null||r===void 0)&&r.length)}registerWindowListener(t,r){this.windowListeners[r]={registered:!1,windowEventName:t,pluginEventName:r,handler:s=>{this.notifyListeners(r,s)}}}unimplemented(t="not implemented"){return new rs.Exception(t,Ic.Unimplemented)}unavailable(t="not available"){return new rs.Exception(t,Ic.Unavailable)}async removeListener(t,r){const s=this.listeners[t];if(!s)return;const a=s.indexOf(r);this.listeners[t].splice(a,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const r=this.retainedEventArguments[t];r&&(delete this.retainedEventArguments[t],r.forEach(s=>{this.notifyListeners(t,s)}))}}const gb=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),xb=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class M7 extends aE{async getCookies(){const t=document.cookie,r={};return t.split(";").forEach(s=>{if(s.length<=0)return;let[a,o]=s.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=xb(a).trim(),o=xb(o).trim(),r[a]=o}),r}async setCookie(t){try{const r=gb(t.key),s=gb(t.value),a=`; expires=${(t.expires||"").replace("expires=","")}`,o=(t.path||"/").replace("path=",""),d=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${r}=${s||""}${a}; path=${o}; ${d};`}catch(r){return Promise.reject(r)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const r of t)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}Mm("CapacitorCookies",{web:()=>new M7});const L7=async e=>new Promise((t,r)=>{const s=new FileReader;s.onload=()=>{const a=s.result;t(a.indexOf(",")>=0?a.split(",")[1]:a)},s.onerror=a=>r(a),s.readAsDataURL(e)}),F7=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(a=>a.toLocaleLowerCase()).reduce((a,o,d)=>(a[o]=e[t[d]],a),{})},B7=(e,t=!0)=>e?Object.entries(e).reduce((s,a)=>{const[o,d]=a;let u,f;return Array.isArray(d)?(f="",d.forEach(p=>{u=t?encodeURIComponent(p):p,f+=`${o}=${u}&`}),f.slice(0,-1)):(u=t?encodeURIComponent(d):d,f=`${o}=${u}`),`${s}&${f}`},"").substr(1):null,z7=(e,t={})=>{const r=Object.assign({method:e.method||"GET",headers:e.headers},t),a=F7(e.headers)["content-type"]||"";if(typeof e.data=="string")r.body=e.data;else if(a.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[d,u]of Object.entries(e.data||{}))o.set(d,u);r.body=o.toString()}else if(a.includes("multipart/form-data")||e.data instanceof FormData){const o=new FormData;if(e.data instanceof FormData)e.data.forEach((u,f)=>{o.append(f,u)});else for(const u of Object.keys(e.data))o.append(u,e.data[u]);r.body=o;const d=new Headers(r.headers);d.delete("content-type"),r.headers=d}else(a.includes("application/json")||typeof e.data=="object")&&(r.body=JSON.stringify(e.data));return r};class U7 extends aE{async request(t){const r=z7(t,t.webFetchExtra),s=B7(t.params,t.shouldEncodeUrlParams),a=s?`${t.url}?${s}`:t.url,o=await fetch(a,r),d=o.headers.get("content-type")||"";let{responseType:u="text"}=o.ok?t:{};d.includes("application/json")&&(u="json");let f,p;switch(u){case"arraybuffer":case"blob":p=await o.blob(),f=await L7(p);break;case"json":f=await o.json();break;case"document":case"text":default:f=await o.text()}const x={};return o.headers.forEach((w,_)=>{x[_]=w}),{data:f,headers:x,status:o.status,url:o.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}Mm("CapacitorHttp",{web:()=>new U7});function $7(e){e.CapacitorUtils.Synapse=new Proxy({},{get(t,r){return new Proxy({},{get(s,a){return(o,d,u)=>{const f=e.Capacitor.Plugins[r];if(f===void 0){u(new Error(`Capacitor plugin ${r} not found`));return}if(typeof f[a]!="function"){u(new Error(`Method ${a} not found in Capacitor plugin ${r}`));return}(async()=>{try{const p=await f[a](o);d(p)}catch(p){u(p)}})()}}})}})}function q7(e){e.CapacitorUtils.Synapse=new Proxy({},{get(t,r){return e.cordova.plugins[r]}})}function V7(e=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!e?$7(window):window.cordova!==void 0&&q7(window))}const Ao=Mm("Geolocation",{web:()=>fl(()=>import("./web-BrzzFNe_.js"),[],import.meta.url).then(e=>new e.GeolocationWeb)});V7();const W7=()=>(v.useEffect(()=>{(async()=>{if(!rs.isNativePlatform()){console.log("Not a native platform, skipping location permission");return}await new Promise(t=>setTimeout(t,1e3));try{console.log("=== Checking location permission status ===");const t=await Ao.checkPermissions();if(console.log("Current permission:",JSON.stringify(t)),t.location!=="granted"){console.log("Requesting location permission...");const r=await Ao.requestPermissions();console.log("Permission request result:",JSON.stringify(r)),r.location==="granted"||r.coarseLocation==="granted"?console.log("✓ Location permission granted successfully"):console.log("✗ Location permission was denied")}else console.log("✓ Location permission already granted")}catch(t){console.error("✗ Error requesting location permission:",t)}})()},[]),null),H7=Cu("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ct({className:e,variant:t,...r}){return n.jsx("div",{className:Be(H7({variant:t}),e),...r})}function G7(){const[e,t]=v.useState(0),{user:r}=wt();return v.useEffect(()=>{if(!r){t(0);return}(async()=>{const{count:o,error:d}=await U.from("user_messages").select("*",{count:"exact",head:!0}).eq("to_user_id",r.id).eq("read",!1);!d&&o!==null&&t(o)})();const a=U.channel("unread-messages-count").on("postgres_changes",{event:"INSERT",schema:"public",table:"user_messages"},o=>{const d=o.new;d.to_user_id===r.id&&!d.read&&t(u=>u+1)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"user_messages"},o=>{const d=o.new,u=o.old;d.to_user_id===r.id&&!u.read&&d.read&&t(f=>Math.max(0,f-1))}).subscribe();return()=>{U.removeChannel(a)}},[r]),e}function X7({activeTab:e,onTabChange:t,userType:r,onHomeRefresh:s}){const{user:a}=wt(),o=_t(),d=Xn(),u=G7(),f=_=>{if(["friends","profile"].includes(_)&&!a){const N=d.pathname;o(`/auth?redirect=${encodeURIComponent(N)}`);return}if(_==="home"&&e==="home"&&s){s();return}t(_)},w=r==="organizer"?[{id:"home",icon:py,label:"Início"},{id:"create",icon:h8,label:"Criar"},{id:"profile",icon:hs,label:"Perfil"}]:[{id:"home",icon:py,label:"Início"},{id:"friends",icon:tr,label:"Amigos"},{id:"profile",icon:hs,label:"Perfil"}];return n.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-card border-t border-border z-50",children:n.jsx("div",{className:"flex items-center justify-around py-2 px-4 max-w-md mx-auto",children:w.map(_=>{const j=e===_.id;return n.jsxs("button",{onClick:()=>f(_.id),className:Be("flex flex-col items-center gap-1 py-2 px-3 rounded-lg transition-smooth relative",j?"text-primary glow-purple":"text-muted-foreground hover:text-foreground"),children:[n.jsx(_.icon,{className:Be("h-5 w-5 transition-smooth",j&&"scale-110")}),n.jsx("span",{className:"text-xs font-medium",children:_.label}),_.id==="friends"&&u>0&&n.jsx(ct,{variant:"destructive",className:"absolute -top-0 -right-0 h-5 w-5 p-0 flex items-center justify-center text-xs rounded-full animate-pulse",children:u>9?"9+":u})]},_.id)})})})}const X1=Cu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-smooth focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"gradient-primary text-primary-foreground hover:scale-105 shadow-purple",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-border bg-card hover:bg-surface hover:shadow-card",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-surface hover:text-foreground",link:"text-primary underline-offset-4 hover:underline",glow:"gradient-primary text-primary-foreground hover:glow-purple-strong hover:scale-105 shadow-purple",fab:"gradient-primary text-primary-foreground rounded-full shadow-elevated glow-purple hover:glow-purple-strong hover:scale-110 transition-bounce",live:"bg-destructive text-destructive-foreground animate-glow-pulse hover:scale-105",confirm:"bg-surface-elevated text-foreground border border-border hover:bg-surface hover:border-primary/50 hover:shadow-card"},size:{default:"h-10 px-4 py-2",sm:"h-8 rounded-md px-3",lg:"h-12 rounded-md px-8",xl:"h-14 rounded-lg px-10 text-base",icon:"h-10 w-10",fab:"h-14 w-14"}},defaultVariants:{variant:"default",size:"default"}}),Y=v.forwardRef(({className:e,variant:t,size:r,asChild:s=!1,...a},o)=>{const d=s?vR:"button";return n.jsx(d,{className:Be(X1({variant:t,size:r,className:e})),ref:o,...a})});Y.displayName="Button";function iE(){const[e,t]=v.useState([]),[r,s]=v.useState(0),[a,o]=v.useState(!0),{user:d}=wt();v.useEffect(()=>{if(!d){t([]),s(0),o(!1);return}u();const _=U.channel("notifications-changes").on("postgres_changes",{event:"*",schema:"public",table:"notifications",filter:`user_id=eq.${d.id}`},()=>{u()}).subscribe();return()=>{U.removeChannel(_)}},[d]);const u=async()=>{if(d)try{o(!0);const{data:_,error:j}=await U.from("notifications").select("*").eq("user_id",d.id).order("created_at",{ascending:!1}).limit(50);if(j)throw j;t(_||[]),s((_==null?void 0:_.filter(N=>!N.read).length)||0)}catch(_){console.error("Error fetching notifications:",_)}finally{o(!1)}};return{notifications:e,unreadCount:r,loading:a,markAsRead:async _=>{try{const j=e.find(C=>C.id===_);if(!j||j.read)return;t(C=>C.map(A=>A.id===_?{...A,read:!0}:A)),s(C=>Math.max(0,C-1));const{error:N}=await U.from("notifications").update({read:!0}).eq("id",_);if(N)throw N}catch(j){console.error("Error marking notification as read:",j),u()}},markAllAsRead:async()=>{if(d)try{t(j=>j.map(N=>({...N,read:!0}))),s(0);const{error:_}=await U.from("notifications").update({read:!0}).eq("user_id",d.id).eq("read",!1);if(_)throw _}catch(_){console.error("Error marking all as read:",_),u()}},deleteNotification:async _=>{try{const j=e.find(C=>C.id===_);t(C=>C.filter(A=>A.id!==_)),j&&!j.read&&s(C=>Math.max(0,C-1));const{error:N}=await U.from("notifications").delete().eq("id",_);if(N)throw N}catch(j){console.error("Error deleting notification:",j),u()}},refetch:u,clearLocalNotifications:()=>{t([]),s(0)}}}function K7({onUnauthorizedClick:e}={}){const{user:t}=wt(),r=_t(),{unreadCount:s}=iE(),a=()=>{t?r("/notifications"):e?e():r("/auth")};return n.jsxs(Y,{variant:"ghost",size:"icon",className:"relative hover:bg-primary/10",onClick:a,children:[n.jsx(Ga,{className:"h-5 w-5"}),s>0&&n.jsx("div",{className:"absolute -top-1 -right-1 h-5 w-5 bg-destructive rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-[10px] text-destructive-foreground font-bold",children:s>9?"9+":s})})]})}function Y7(e){if(!e)return null;const t=new Date,r=new Date(e),s=t.getFullYear()-r.getFullYear(),a=t.getMonth()-r.getMonth();return a<0||a===0&&t.getDate()<r.getDate()?s-1:s}function Lm(){const[e,t]=v.useState(null),[r,s]=v.useState(!0),[a,o]=v.useState(!1),{user:d}=wt(),u=async()=>{if(d)try{s(!0);const{data:w,error:_}=await U.from("profiles").select("*").eq("user_id",d.id).single();if(_&&_.code!=="PGRST116"){console.error("Error fetching profile:",_),W.error("Erro ao carregar perfil");return}t(w||null)}catch(w){console.error("Error:",w),W.error("Erro ao carregar perfil")}finally{s(!1)}},f=async w=>{if(!d||!e)return!1;try{o(!0);const{error:_}=await U.from("profiles").update(w).eq("user_id",d.id);return _?(console.error("Error updating profile:",_),W.error("Erro ao salvar perfil"),!1):(t(j=>j?{...j,...w}:null),W.success("Perfil salvo com sucesso!"),!0)}catch(_){return console.error("Error:",_),W.error("Erro ao salvar perfil"),!1}finally{o(!1)}},p=async w=>{if(!d)return null;try{o(!0);const _=await x(w);if(!_)return W.error("Erro ao processar a imagem"),null;const j=`${d.id}/avatar.jpg`,{error:N}=await U.storage.from("user-uploads").upload(j,_,{upsert:!0});if(N)return console.error("Error uploading file:",N),W.error("Erro ao fazer upload da foto"),null;const{data:{publicUrl:C}}=U.storage.from("user-uploads").getPublicUrl(j);return await f({avatar_url:C})?(W.success("Foto de perfil atualizada!"),C):null}catch(_){return console.error("Error:",_),W.error("Erro ao atualizar foto"),null}finally{o(!1)}},x=w=>new Promise((_,j)=>{const N=new FileReader;N.onload=C=>{var S;const A=new Image;A.onload=()=>{const k=document.createElement("canvas"),b=Math.min(A.width,A.height),T=800;k.width=T,k.height=T;const O=k.getContext("2d");if(!O){j(new Error("Failed to get canvas context"));return}const L=(A.width-b)/2,R=(A.height-b)/2;O.drawImage(A,L,R,b,b,0,0,T,T),k.toBlob(M=>{M?_(new File([M],"avatar.jpg",{type:"image/jpeg"})):j(new Error("Failed to create blob"))},"image/jpeg",.95)},A.onerror=()=>j(new Error("Failed to load image")),A.src=(S=C.target)==null?void 0:S.result},N.onerror=()=>j(new Error("Failed to read file")),N.readAsDataURL(w)});return v.useEffect(()=>{u()},[d]),{profile:e,loading:r,saving:a,updateProfile:f,uploadAvatar:p,refetch:u}}function K1(e={}){const{enableHighAccuracy:t=!0,timeout:r=27e3,maximumAge:s=3e4,watch:a=!1}=e,[o,d]=v.useState(null),[u,f]=v.useState(null),[p,x]=v.useState(!1),w=rs.isNativePlatform(),_=async()=>{try{if(w){const N=await Ao.checkPermissions();if(console.log("Current permission status:",N),N.location==="denied")return f("Permissão de localização negada. Ative nas configurações do app."),!1;if(N.location!=="granted"){console.log("Requesting location permission...");const C=await Ao.requestPermissions();if(console.log("Permission request result:",C),C.location!=="granted")return f("Permissão de localização negada."),!1}return!0}else return navigator.geolocation?!0:(f("Geolocalização não suportada pelo navegador"),!1)}catch(N){return console.error("Error requesting permission:",N),f("Erro ao solicitar permissão de localização"),!1}},j=async()=>{x(!0),f(null);try{if(!await _())return x(!1),null;if(w)try{const C=await Ao.getCurrentPosition({enableHighAccuracy:t,timeout:r,maximumAge:s}),A={lat:C.coords.latitude,lon:C.coords.longitude};return d(A),x(!1),A}catch(C){console.error("Geolocation error:",C);let A="Erro ao obter localização";return C.message&&(C.message.includes("timeout")?A="Tempo esgotado. Certifique-se de estar em local aberto.":C.message.includes("denied")?A="Permissão negada. Ative a localização nas configurações.":C.message.includes("unavailable")&&(A="Localização indisponível. Ative o GPS do dispositivo.")),f(A),x(!1),null}return navigator.geolocation?new Promise(C=>{navigator.geolocation.getCurrentPosition(A=>{const S={lat:A.coords.latitude,lon:A.coords.longitude};d(S),x(!1),C(S)},A=>{console.error("Geolocation error:",A);let S="Erro ao obter localização";switch(A.code){case A.PERMISSION_DENIED:S="Permissão de localização negada. Por favor, permita o acesso à localização nas configurações do navegador.";break;case A.POSITION_UNAVAILABLE:S="Localização indisponível. Verifique se o GPS está ativado.";break;case A.TIMEOUT:S="Tempo esgotado ao obter localização. Tente novamente.";break}f(S),x(!1),C(null)},{enableHighAccuracy:t,timeout:r,maximumAge:s})}):(f("Geolocalização não suportada"),x(!1),null)}catch(N){return console.error("Error getting position:",N),f("Erro ao obter localização"),x(!1),null}};return v.useEffect(()=>{if(!a)return;let N=null;return(async()=>{await _()&&(w?N=await Ao.watchPosition({enableHighAccuracy:t,timeout:r,maximumAge:s},(S,k)=>{if(k){console.error("Watch position error:",k),f("Erro ao monitorar localização");return}S&&(d({lat:S.coords.latitude,lon:S.coords.longitude}),f(null))}):navigator.geolocation&&(N=navigator.geolocation.watchPosition(S=>{d({lat:S.coords.latitude,lon:S.coords.longitude}),f(null)},S=>{console.error("Watch position error:",S),f("Erro ao monitorar localização")},{enableHighAccuracy:t,timeout:r,maximumAge:s})))})(),()=>{N!==null&&(w?Ao.clearWatch({id:N}):navigator.geolocation.clearWatch(N))}},[a,t,r,s,w]),{position:o,error:u,loading:p,requestPermission:_,getCurrentPosition:j}}var wg="focusScope.autoFocusOnMount",yg="focusScope.autoFocusOnUnmount",vb={bubbles:!1,cancelable:!0},Q7="FocusScope",Pu=v.forwardRef((e,t)=>{const{loop:r=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...d}=e,[u,f]=v.useState(null),p=Cr(a),x=Cr(o),w=v.useRef(null),_=at(t,C=>f(C)),j=v.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;v.useEffect(()=>{if(s){let C=function(b){if(j.paused||!u)return;const T=b.target;u.contains(T)?w.current=T:vi(w.current,{select:!0})},A=function(b){if(j.paused||!u)return;const T=b.relatedTarget;T!==null&&(u.contains(T)||vi(w.current,{select:!0}))},S=function(b){if(document.activeElement===document.body)for(const O of b)O.removedNodes.length>0&&vi(u)};document.addEventListener("focusin",C),document.addEventListener("focusout",A);const k=new MutationObserver(S);return u&&k.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",C),document.removeEventListener("focusout",A),k.disconnect()}}},[s,u,j.paused]),v.useEffect(()=>{if(u){yb.add(j);const C=document.activeElement;if(!u.contains(C)){const S=new CustomEvent(wg,vb);u.addEventListener(wg,p),u.dispatchEvent(S),S.defaultPrevented||(Z7(nL(oE(u)),{select:!0}),document.activeElement===C&&vi(u))}return()=>{u.removeEventListener(wg,p),setTimeout(()=>{const S=new CustomEvent(yg,vb);u.addEventListener(yg,x),u.dispatchEvent(S),S.defaultPrevented||vi(C??document.body,{select:!0}),u.removeEventListener(yg,x),yb.remove(j)},0)}}},[u,p,x,j]);const N=v.useCallback(C=>{if(!r&&!s||j.paused)return;const A=C.key==="Tab"&&!C.altKey&&!C.ctrlKey&&!C.metaKey,S=document.activeElement;if(A&&S){const k=C.currentTarget,[b,T]=J7(k);b&&T?!C.shiftKey&&S===T?(C.preventDefault(),r&&vi(b,{select:!0})):C.shiftKey&&S===b&&(C.preventDefault(),r&&vi(T,{select:!0})):S===k&&C.preventDefault()}},[r,s,j.paused]);return n.jsx(He.div,{tabIndex:-1,...d,ref:_,onKeyDown:N})});Pu.displayName=Q7;function Z7(e,{select:t=!1}={}){const r=document.activeElement;for(const s of e)if(vi(s,{select:t}),document.activeElement!==r)return}function J7(e){const t=oE(e),r=wb(t,e),s=wb(t.reverse(),e);return[r,s]}function oE(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function wb(e,t){for(const r of e)if(!eL(r,{upTo:t}))return r}function eL(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function tL(e){return e instanceof HTMLInputElement&&"select"in e}function vi(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&tL(e)&&t&&e.select()}}var yb=rL();function rL(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=bb(e,t),e.unshift(t)},remove(t){var r;e=bb(e,t),(r=e[0])==null||r.resume()}}}function bb(e,t){const r=[...e],s=r.indexOf(t);return s!==-1&&r.splice(s,1),r}function nL(e){return e.filter(t=>t.tagName!=="A")}var bg=0;function Fm(){v.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??_b()),document.body.insertAdjacentElement("beforeend",e[1]??_b()),bg++,()=>{bg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),bg--}},[])}function _b(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ya=function(){return ya=Object.assign||function(t){for(var r,s=1,a=arguments.length;s<a;s++){r=arguments[s];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},ya.apply(this,arguments)};function lE(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r}function sL(e,t,r){if(r||arguments.length===2)for(var s=0,a=t.length,o;s<a;s++)(o||!(s in t))&&(o||(o=Array.prototype.slice.call(t,0,s)),o[s]=t[s]);return e.concat(o||Array.prototype.slice.call(t))}var Zh="right-scroll-bar-position",Jh="width-before-scroll-bar",aL="with-scroll-bars-hidden",iL="--removed-body-scroll-bar-size";function _g(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function oL(e,t){var r=v.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(s){var a=r.value;a!==s&&(r.value=s,r.callback(s,a))}}}})[0];return r.callback=t,r.facade}var lL=typeof window<"u"?v.useLayoutEffect:v.useEffect,Nb=new WeakMap;function cL(e,t){var r=oL(null,function(s){return e.forEach(function(a){return _g(a,s)})});return lL(function(){var s=Nb.get(r);if(s){var a=new Set(s),o=new Set(e),d=r.current;a.forEach(function(u){o.has(u)||_g(u,null)}),o.forEach(function(u){a.has(u)||_g(u,d)})}Nb.set(r,e)},[e]),r}function dL(e){return e}function uL(e,t){t===void 0&&(t=dL);var r=[],s=!1,a={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(o){var d=t(o,s);return r.push(d),function(){r=r.filter(function(u){return u!==d})}},assignSyncMedium:function(o){for(s=!0;r.length;){var d=r;r=[],d.forEach(o)}r={push:function(u){return o(u)},filter:function(){return r}}},assignMedium:function(o){s=!0;var d=[];if(r.length){var u=r;r=[],u.forEach(o),d=r}var f=function(){var x=d;d=[],x.forEach(o)},p=function(){return Promise.resolve().then(f)};p(),r={push:function(x){d.push(x),p()},filter:function(x){return d=d.filter(x),r}}}};return a}function hL(e){e===void 0&&(e={});var t=uL(null);return t.options=ya({async:!0,ssr:!1},e),t}var cE=function(e){var t=e.sideCar,r=lE(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return v.createElement(s,ya({},r))};cE.isSideCarExport=!0;function fL(e,t){return e.useMedium(t),cE}var dE=hL(),Ng=function(){},Bm=v.forwardRef(function(e,t){var r=v.useRef(null),s=v.useState({onScrollCapture:Ng,onWheelCapture:Ng,onTouchMoveCapture:Ng}),a=s[0],o=s[1],d=e.forwardProps,u=e.children,f=e.className,p=e.removeScrollBar,x=e.enabled,w=e.shards,_=e.sideCar,j=e.noRelative,N=e.noIsolation,C=e.inert,A=e.allowPinchZoom,S=e.as,k=S===void 0?"div":S,b=e.gapMode,T=lE(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),O=_,L=cL([r,t]),R=ya(ya({},T),a);return v.createElement(v.Fragment,null,x&&v.createElement(O,{sideCar:dE,removeScrollBar:p,shards:w,noRelative:j,noIsolation:N,inert:C,setCallbacks:o,allowPinchZoom:!!A,lockRef:r,gapMode:b}),d?v.cloneElement(v.Children.only(u),ya(ya({},R),{ref:L})):v.createElement(k,ya({},R,{className:f,ref:L}),u))});Bm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Bm.classNames={fullWidth:Jh,zeroRight:Zh};var mL=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function pL(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=mL();return t&&e.setAttribute("nonce",t),e}function gL(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function xL(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var vL=function(){var e=0,t=null;return{add:function(r){e==0&&(t=pL())&&(gL(t,r),xL(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},wL=function(){var e=vL();return function(t,r){v.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},uE=function(){var e=wL(),t=function(r){var s=r.styles,a=r.dynamic;return e(s,a),null};return t},yL={left:0,top:0,right:0,gap:0},jg=function(e){return parseInt(e||"",10)||0},bL=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[jg(r),jg(s),jg(a)]},_L=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return yL;var t=bL(e),r=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-r+t[2]-t[0])}},NL=uE(),lc="data-scroll-locked",jL=function(e,t,r,s){var a=e.left,o=e.top,d=e.right,u=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(aL,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(u,"px ").concat(s,`;
  }
  body[`).concat(lc,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(d,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(s,`;
    `),r==="padding"&&"padding-right: ".concat(u,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Zh,` {
    right: `).concat(u,"px ").concat(s,`;
  }
  
  .`).concat(Jh,` {
    margin-right: `).concat(u,"px ").concat(s,`;
  }
  
  .`).concat(Zh," .").concat(Zh,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Jh," .").concat(Jh,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(lc,`] {
    `).concat(iL,": ").concat(u,`px;
  }
`)},jb=function(){var e=parseInt(document.body.getAttribute(lc)||"0",10);return isFinite(e)?e:0},CL=function(){v.useEffect(function(){return document.body.setAttribute(lc,(jb()+1).toString()),function(){var e=jb()-1;e<=0?document.body.removeAttribute(lc):document.body.setAttribute(lc,e.toString())}},[])},EL=function(e){var t=e.noRelative,r=e.noImportant,s=e.gapMode,a=s===void 0?"margin":s;CL();var o=v.useMemo(function(){return _L(a)},[a]);return v.createElement(NL,{styles:jL(o,!t,a,r?"":"!important")})},t0=!1;if(typeof window<"u")try{var Sh=Object.defineProperty({},"passive",{get:function(){return t0=!0,!0}});window.addEventListener("test",Sh,Sh),window.removeEventListener("test",Sh,Sh)}catch{t0=!1}var Rl=t0?{passive:!1}:!1,SL=function(e){return e.tagName==="TEXTAREA"},hE=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!SL(e)&&r[t]==="visible")},AL=function(e){return hE(e,"overflowY")},kL=function(e){return hE(e,"overflowX")},Cb=function(e,t){var r=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var a=fE(e,s);if(a){var o=mE(e,s),d=o[1],u=o[2];if(d>u)return!0}s=s.parentNode}while(s&&s!==r.body);return!1},TL=function(e){var t=e.scrollTop,r=e.scrollHeight,s=e.clientHeight;return[t,r,s]},IL=function(e){var t=e.scrollLeft,r=e.scrollWidth,s=e.clientWidth;return[t,r,s]},fE=function(e,t){return e==="v"?AL(t):kL(t)},mE=function(e,t){return e==="v"?TL(t):IL(t)},RL=function(e,t){return e==="h"&&t==="rtl"?-1:1},PL=function(e,t,r,s,a){var o=RL(e,window.getComputedStyle(t).direction),d=o*s,u=r.target,f=t.contains(u),p=!1,x=d>0,w=0,_=0;do{if(!u)break;var j=mE(e,u),N=j[0],C=j[1],A=j[2],S=C-A-o*N;(N||S)&&fE(e,u)&&(w+=S,_+=N);var k=u.parentNode;u=k&&k.nodeType===Node.DOCUMENT_FRAGMENT_NODE?k.host:k}while(!f&&u!==document.body||f&&(t.contains(u)||t===u));return(x&&Math.abs(w)<1||!x&&Math.abs(_)<1)&&(p=!0),p},Ah=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Eb=function(e){return[e.deltaX,e.deltaY]},Sb=function(e){return e&&"current"in e?e.current:e},OL=function(e,t){return e[0]===t[0]&&e[1]===t[1]},DL=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},ML=0,Pl=[];function LL(e){var t=v.useRef([]),r=v.useRef([0,0]),s=v.useRef(),a=v.useState(ML++)[0],o=v.useState(uE)[0],d=v.useRef(e);v.useEffect(function(){d.current=e},[e]),v.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var C=sL([e.lockRef.current],(e.shards||[]).map(Sb),!0).filter(Boolean);return C.forEach(function(A){return A.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),C.forEach(function(A){return A.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var u=v.useCallback(function(C,A){if("touches"in C&&C.touches.length===2||C.type==="wheel"&&C.ctrlKey)return!d.current.allowPinchZoom;var S=Ah(C),k=r.current,b="deltaX"in C?C.deltaX:k[0]-S[0],T="deltaY"in C?C.deltaY:k[1]-S[1],O,L=C.target,R=Math.abs(b)>Math.abs(T)?"h":"v";if("touches"in C&&R==="h"&&L.type==="range")return!1;var M=Cb(R,L);if(!M)return!0;if(M?O=R:(O=R==="v"?"h":"v",M=Cb(R,L)),!M)return!1;if(!s.current&&"changedTouches"in C&&(b||T)&&(s.current=O),!O)return!0;var P=s.current||O;return PL(P,A,C,P==="h"?b:T)},[]),f=v.useCallback(function(C){var A=C;if(!(!Pl.length||Pl[Pl.length-1]!==o)){var S="deltaY"in A?Eb(A):Ah(A),k=t.current.filter(function(O){return O.name===A.type&&(O.target===A.target||A.target===O.shadowParent)&&OL(O.delta,S)})[0];if(k&&k.should){A.cancelable&&A.preventDefault();return}if(!k){var b=(d.current.shards||[]).map(Sb).filter(Boolean).filter(function(O){return O.contains(A.target)}),T=b.length>0?u(A,b[0]):!d.current.noIsolation;T&&A.cancelable&&A.preventDefault()}}},[]),p=v.useCallback(function(C,A,S,k){var b={name:C,delta:A,target:S,should:k,shadowParent:FL(S)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(T){return T!==b})},1)},[]),x=v.useCallback(function(C){r.current=Ah(C),s.current=void 0},[]),w=v.useCallback(function(C){p(C.type,Eb(C),C.target,u(C,e.lockRef.current))},[]),_=v.useCallback(function(C){p(C.type,Ah(C),C.target,u(C,e.lockRef.current))},[]);v.useEffect(function(){return Pl.push(o),e.setCallbacks({onScrollCapture:w,onWheelCapture:w,onTouchMoveCapture:_}),document.addEventListener("wheel",f,Rl),document.addEventListener("touchmove",f,Rl),document.addEventListener("touchstart",x,Rl),function(){Pl=Pl.filter(function(C){return C!==o}),document.removeEventListener("wheel",f,Rl),document.removeEventListener("touchmove",f,Rl),document.removeEventListener("touchstart",x,Rl)}},[]);var j=e.removeScrollBar,N=e.inert;return v.createElement(v.Fragment,null,N?v.createElement(o,{styles:DL(a)}):null,j?v.createElement(EL,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function FL(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const BL=fL(dE,LL);var Ou=v.forwardRef(function(e,t){return v.createElement(Bm,ya({},e,{ref:t,sideCar:BL}))});Ou.classNames=Bm.classNames;var zL=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ol=new WeakMap,kh=new WeakMap,Th={},Cg=0,pE=function(e){return e&&(e.host||pE(e.parentNode))},UL=function(e,t){return t.map(function(r){if(e.contains(r))return r;var s=pE(r);return s&&e.contains(s)?s:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},$L=function(e,t,r,s){var a=UL(t,Array.isArray(e)?e:[e]);Th[r]||(Th[r]=new WeakMap);var o=Th[r],d=[],u=new Set,f=new Set(a),p=function(w){!w||u.has(w)||(u.add(w),p(w.parentNode))};a.forEach(p);var x=function(w){!w||f.has(w)||Array.prototype.forEach.call(w.children,function(_){if(u.has(_))x(_);else try{var j=_.getAttribute(s),N=j!==null&&j!=="false",C=(Ol.get(_)||0)+1,A=(o.get(_)||0)+1;Ol.set(_,C),o.set(_,A),d.push(_),C===1&&N&&kh.set(_,!0),A===1&&_.setAttribute(r,"true"),N||_.setAttribute(s,"true")}catch(S){console.error("aria-hidden: cannot operate on ",_,S)}})};return x(t),u.clear(),Cg++,function(){d.forEach(function(w){var _=Ol.get(w)-1,j=o.get(w)-1;Ol.set(w,_),o.set(w,j),_||(kh.has(w)||w.removeAttribute(s),kh.delete(w)),j||w.removeAttribute(r)}),Cg--,Cg||(Ol=new WeakMap,Ol=new WeakMap,kh=new WeakMap,Th={})}},zm=function(e,t,r){r===void 0&&(r="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),a=zL(e);return a?(s.push.apply(s,Array.from(a.querySelectorAll("[aria-live], script"))),$L(s,a,r,"aria-hidden")):function(){return null}},Um="Dialog",[gE,xE]=qr(Um),[qL,oa]=gE(Um),vE=e=>{const{__scopeDialog:t,children:r,open:s,defaultOpen:a,onOpenChange:o,modal:d=!0}=e,u=v.useRef(null),f=v.useRef(null),[p,x]=sa({prop:s,defaultProp:a??!1,onChange:o,caller:Um});return n.jsx(qL,{scope:t,triggerRef:u,contentRef:f,contentId:un(),titleId:un(),descriptionId:un(),open:p,onOpenChange:x,onOpenToggle:v.useCallback(()=>x(w=>!w),[x]),modal:d,children:r})};vE.displayName=Um;var wE="DialogTrigger",yE=v.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=oa(wE,r),o=at(t,a.triggerRef);return n.jsx(He.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Z1(a.open),...s,ref:o,onClick:De(e.onClick,a.onOpenToggle)})});yE.displayName=wE;var Y1="DialogPortal",[VL,bE]=gE(Y1,{forceMount:void 0}),_E=e=>{const{__scopeDialog:t,forceMount:r,children:s,container:a}=e,o=oa(Y1,t);return n.jsx(VL,{scope:t,forceMount:r,children:v.Children.map(s,d=>n.jsx(Vr,{present:r||o.open,children:n.jsx(Fc,{asChild:!0,container:a,children:d})}))})};_E.displayName=Y1;var Ff="DialogOverlay",NE=v.forwardRef((e,t)=>{const r=bE(Ff,e.__scopeDialog),{forceMount:s=r.forceMount,...a}=e,o=oa(Ff,e.__scopeDialog);return o.modal?n.jsx(Vr,{present:s||o.open,children:n.jsx(HL,{...a,ref:t})}):null});NE.displayName=Ff;var WL=Wi("DialogOverlay.RemoveScroll"),HL=v.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=oa(Ff,r);return n.jsx(Ou,{as:WL,allowPinchZoom:!0,shards:[a.contentRef],children:n.jsx(He.div,{"data-state":Z1(a.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),Qo="DialogContent",jE=v.forwardRef((e,t)=>{const r=bE(Qo,e.__scopeDialog),{forceMount:s=r.forceMount,...a}=e,o=oa(Qo,e.__scopeDialog);return n.jsx(Vr,{present:s||o.open,children:o.modal?n.jsx(GL,{...a,ref:t}):n.jsx(XL,{...a,ref:t})})});jE.displayName=Qo;var GL=v.forwardRef((e,t)=>{const r=oa(Qo,e.__scopeDialog),s=v.useRef(null),a=at(t,r.contentRef,s);return v.useEffect(()=>{const o=s.current;if(o)return zm(o)},[]),n.jsx(CE,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:De(e.onCloseAutoFocus,o=>{var d;o.preventDefault(),(d=r.triggerRef.current)==null||d.focus()}),onPointerDownOutside:De(e.onPointerDownOutside,o=>{const d=o.detail.originalEvent,u=d.button===0&&d.ctrlKey===!0;(d.button===2||u)&&o.preventDefault()}),onFocusOutside:De(e.onFocusOutside,o=>o.preventDefault())})}),XL=v.forwardRef((e,t)=>{const r=oa(Qo,e.__scopeDialog),s=v.useRef(!1),a=v.useRef(!1);return n.jsx(CE,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var d,u;(d=e.onCloseAutoFocus)==null||d.call(e,o),o.defaultPrevented||(s.current||(u=r.triggerRef.current)==null||u.focus(),o.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:o=>{var f,p;(f=e.onInteractOutside)==null||f.call(e,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const d=o.target;((p=r.triggerRef.current)==null?void 0:p.contains(d))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),CE=v.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,...d}=e,u=oa(Qo,r),f=v.useRef(null),p=at(t,f);return Fm(),n.jsxs(n.Fragment,{children:[n.jsx(Pu,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:o,children:n.jsx(dl,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":Z1(u.open),...d,ref:p,onDismiss:()=>u.onOpenChange(!1)})}),n.jsxs(n.Fragment,{children:[n.jsx(YL,{titleId:u.titleId}),n.jsx(ZL,{contentRef:f,descriptionId:u.descriptionId})]})]})}),Q1="DialogTitle",EE=v.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=oa(Q1,r);return n.jsx(He.h2,{id:a.titleId,...s,ref:t})});EE.displayName=Q1;var SE="DialogDescription",AE=v.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=oa(SE,r);return n.jsx(He.p,{id:a.descriptionId,...s,ref:t})});AE.displayName=SE;var kE="DialogClose",TE=v.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=oa(kE,r);return n.jsx(He.button,{type:"button",...s,ref:t,onClick:De(e.onClick,()=>a.onOpenChange(!1))})});TE.displayName=kE;function Z1(e){return e?"open":"closed"}var IE="DialogTitleWarning",[KL,RE]=gR(IE,{contentName:Qo,titleName:Q1,docsSlug:"dialog"}),YL=({titleId:e})=>{const t=RE(IE),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return v.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},QL="DialogDescriptionWarning",ZL=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${RE(QL).contentName}}.`;return v.useEffect(()=>{var o;const a=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},J1=vE,PE=yE,ev=_E,$m=NE,qm=jE,tv=EE,rv=AE,nv=TE;const zt=J1,OE=PE,JL=ev,DE=v.forwardRef(({className:e,...t},r)=>n.jsx($m,{ref:r,className:Be("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));DE.displayName=$m.displayName;const Ft=v.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(JL,{children:[n.jsx(DE,{}),n.jsxs(qm,{ref:s,className:Be("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,n.jsxs(nv,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[n.jsx(Jr,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ft.displayName=qm.displayName;const gr=({className:e,...t})=>n.jsx("div",{className:Be("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});gr.displayName="DialogHeader";const Du=({className:e,...t})=>n.jsx("div",{className:Be("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Du.displayName="DialogFooter";const xr=v.forwardRef(({className:e,...t},r)=>n.jsx(tv,{ref:r,className:Be("text-lg font-semibold leading-none tracking-tight",e),...t}));xr.displayName=tv.displayName;const as=v.forwardRef(({className:e,...t},r)=>n.jsx(rv,{ref:r,className:Be("text-sm text-muted-foreground",e),...t}));as.displayName=rv.displayName;const xe=v.forwardRef(({className:e,type:t,...r},s)=>n.jsx("input",{type:t,className:Be("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...r}));xe.displayName="Input";var e9=v.createContext(void 0);function Gc(e){const t=v.useContext(e9);return e||t||"ltr"}function r0(e,[t,r]){return Math.min(r,Math.max(t,e))}function t9(e,t){return v.useReducer((r,s)=>t[r][s]??r,e)}var sv="ScrollArea",[ME]=qr(sv),[r9,Ls]=ME(sv),LE=v.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:s="hover",dir:a,scrollHideDelay:o=600,...d}=e,[u,f]=v.useState(null),[p,x]=v.useState(null),[w,_]=v.useState(null),[j,N]=v.useState(null),[C,A]=v.useState(null),[S,k]=v.useState(0),[b,T]=v.useState(0),[O,L]=v.useState(!1),[R,M]=v.useState(!1),P=at(t,G=>f(G)),q=Gc(a);return n.jsx(r9,{scope:r,type:s,dir:q,scrollHideDelay:o,scrollArea:u,viewport:p,onViewportChange:x,content:w,onContentChange:_,scrollbarX:j,onScrollbarXChange:N,scrollbarXEnabled:O,onScrollbarXEnabledChange:L,scrollbarY:C,onScrollbarYChange:A,scrollbarYEnabled:R,onScrollbarYEnabledChange:M,onCornerWidthChange:k,onCornerHeightChange:T,children:n.jsx(He.div,{dir:q,...d,ref:P,style:{position:"relative","--radix-scroll-area-corner-width":S+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});LE.displayName=sv;var FE="ScrollAreaViewport",BE=v.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:s,nonce:a,...o}=e,d=Ls(FE,r),u=v.useRef(null),f=at(t,u,d.onViewportChange);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),n.jsx(He.div,{"data-radix-scroll-area-viewport":"",...o,ref:f,style:{overflowX:d.scrollbarXEnabled?"scroll":"hidden",overflowY:d.scrollbarYEnabled?"scroll":"hidden",...e.style},children:n.jsx("div",{ref:d.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});BE.displayName=FE;var Oa="ScrollAreaScrollbar",av=v.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=Ls(Oa,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:d}=a,u=e.orientation==="horizontal";return v.useEffect(()=>(u?o(!0):d(!0),()=>{u?o(!1):d(!1)}),[u,o,d]),a.type==="hover"?n.jsx(n9,{...s,ref:t,forceMount:r}):a.type==="scroll"?n.jsx(s9,{...s,ref:t,forceMount:r}):a.type==="auto"?n.jsx(zE,{...s,ref:t,forceMount:r}):a.type==="always"?n.jsx(iv,{...s,ref:t}):null});av.displayName=Oa;var n9=v.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=Ls(Oa,e.__scopeScrollArea),[o,d]=v.useState(!1);return v.useEffect(()=>{const u=a.scrollArea;let f=0;if(u){const p=()=>{window.clearTimeout(f),d(!0)},x=()=>{f=window.setTimeout(()=>d(!1),a.scrollHideDelay)};return u.addEventListener("pointerenter",p),u.addEventListener("pointerleave",x),()=>{window.clearTimeout(f),u.removeEventListener("pointerenter",p),u.removeEventListener("pointerleave",x)}}},[a.scrollArea,a.scrollHideDelay]),n.jsx(Vr,{present:r||o,children:n.jsx(zE,{"data-state":o?"visible":"hidden",...s,ref:t})})}),s9=v.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=Ls(Oa,e.__scopeScrollArea),o=e.orientation==="horizontal",d=Wm(()=>f("SCROLL_END"),100),[u,f]=t9("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return v.useEffect(()=>{if(u==="idle"){const p=window.setTimeout(()=>f("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(p)}},[u,a.scrollHideDelay,f]),v.useEffect(()=>{const p=a.viewport,x=o?"scrollLeft":"scrollTop";if(p){let w=p[x];const _=()=>{const j=p[x];w!==j&&(f("SCROLL"),d()),w=j};return p.addEventListener("scroll",_),()=>p.removeEventListener("scroll",_)}},[a.viewport,o,f,d]),n.jsx(Vr,{present:r||u!=="hidden",children:n.jsx(iv,{"data-state":u==="hidden"?"hidden":"visible",...s,ref:t,onPointerEnter:De(e.onPointerEnter,()=>f("POINTER_ENTER")),onPointerLeave:De(e.onPointerLeave,()=>f("POINTER_LEAVE"))})})}),zE=v.forwardRef((e,t)=>{const r=Ls(Oa,e.__scopeScrollArea),{forceMount:s,...a}=e,[o,d]=v.useState(!1),u=e.orientation==="horizontal",f=Wm(()=>{if(r.viewport){const p=r.viewport.offsetWidth<r.viewport.scrollWidth,x=r.viewport.offsetHeight<r.viewport.scrollHeight;d(u?p:x)}},10);return Rc(r.viewport,f),Rc(r.content,f),n.jsx(Vr,{present:s||o,children:n.jsx(iv,{"data-state":o?"visible":"hidden",...a,ref:t})})}),iv=v.forwardRef((e,t)=>{const{orientation:r="vertical",...s}=e,a=Ls(Oa,e.__scopeScrollArea),o=v.useRef(null),d=v.useRef(0),[u,f]=v.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),p=WE(u.viewport,u.content),x={...s,sizes:u,onSizesChange:f,hasThumb:p>0&&p<1,onThumbChange:_=>o.current=_,onThumbPointerUp:()=>d.current=0,onThumbPointerDown:_=>d.current=_};function w(_,j){return d9(_,d.current,u,j)}return r==="horizontal"?n.jsx(a9,{...x,ref:t,onThumbPositionChange:()=>{if(a.viewport&&o.current){const _=a.viewport.scrollLeft,j=Ab(_,u,a.dir);o.current.style.transform=`translate3d(${j}px, 0, 0)`}},onWheelScroll:_=>{a.viewport&&(a.viewport.scrollLeft=_)},onDragScroll:_=>{a.viewport&&(a.viewport.scrollLeft=w(_,a.dir))}}):r==="vertical"?n.jsx(i9,{...x,ref:t,onThumbPositionChange:()=>{if(a.viewport&&o.current){const _=a.viewport.scrollTop,j=Ab(_,u);o.current.style.transform=`translate3d(0, ${j}px, 0)`}},onWheelScroll:_=>{a.viewport&&(a.viewport.scrollTop=_)},onDragScroll:_=>{a.viewport&&(a.viewport.scrollTop=w(_))}}):null}),a9=v.forwardRef((e,t)=>{const{sizes:r,onSizesChange:s,...a}=e,o=Ls(Oa,e.__scopeScrollArea),[d,u]=v.useState(),f=v.useRef(null),p=at(t,f,o.onScrollbarXChange);return v.useEffect(()=>{f.current&&u(getComputedStyle(f.current))},[f]),n.jsx($E,{"data-orientation":"horizontal",...a,ref:p,sizes:r,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Vm(r)+"px",...e.style},onThumbPointerDown:x=>e.onThumbPointerDown(x.x),onDragScroll:x=>e.onDragScroll(x.x),onWheelScroll:(x,w)=>{if(o.viewport){const _=o.viewport.scrollLeft+x.deltaX;e.onWheelScroll(_),GE(_,w)&&x.preventDefault()}},onResize:()=>{f.current&&o.viewport&&d&&s({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:f.current.clientWidth,paddingStart:zf(d.paddingLeft),paddingEnd:zf(d.paddingRight)}})}})}),i9=v.forwardRef((e,t)=>{const{sizes:r,onSizesChange:s,...a}=e,o=Ls(Oa,e.__scopeScrollArea),[d,u]=v.useState(),f=v.useRef(null),p=at(t,f,o.onScrollbarYChange);return v.useEffect(()=>{f.current&&u(getComputedStyle(f.current))},[f]),n.jsx($E,{"data-orientation":"vertical",...a,ref:p,sizes:r,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Vm(r)+"px",...e.style},onThumbPointerDown:x=>e.onThumbPointerDown(x.y),onDragScroll:x=>e.onDragScroll(x.y),onWheelScroll:(x,w)=>{if(o.viewport){const _=o.viewport.scrollTop+x.deltaY;e.onWheelScroll(_),GE(_,w)&&x.preventDefault()}},onResize:()=>{f.current&&o.viewport&&d&&s({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:f.current.clientHeight,paddingStart:zf(d.paddingTop),paddingEnd:zf(d.paddingBottom)}})}})}),[o9,UE]=ME(Oa),$E=v.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:s,hasThumb:a,onThumbChange:o,onThumbPointerUp:d,onThumbPointerDown:u,onThumbPositionChange:f,onDragScroll:p,onWheelScroll:x,onResize:w,..._}=e,j=Ls(Oa,r),[N,C]=v.useState(null),A=at(t,P=>C(P)),S=v.useRef(null),k=v.useRef(""),b=j.viewport,T=s.content-s.viewport,O=Cr(x),L=Cr(f),R=Wm(w,10);function M(P){if(S.current){const q=P.clientX-S.current.left,G=P.clientY-S.current.top;p({x:q,y:G})}}return v.useEffect(()=>{const P=q=>{const G=q.target;(N==null?void 0:N.contains(G))&&O(q,T)};return document.addEventListener("wheel",P,{passive:!1}),()=>document.removeEventListener("wheel",P,{passive:!1})},[b,N,T,O]),v.useEffect(L,[s,L]),Rc(N,R),Rc(j.content,R),n.jsx(o9,{scope:r,scrollbar:N,hasThumb:a,onThumbChange:Cr(o),onThumbPointerUp:Cr(d),onThumbPositionChange:L,onThumbPointerDown:Cr(u),children:n.jsx(He.div,{..._,ref:A,style:{position:"absolute",..._.style},onPointerDown:De(e.onPointerDown,P=>{P.button===0&&(P.target.setPointerCapture(P.pointerId),S.current=N.getBoundingClientRect(),k.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",j.viewport&&(j.viewport.style.scrollBehavior="auto"),M(P))}),onPointerMove:De(e.onPointerMove,M),onPointerUp:De(e.onPointerUp,P=>{const q=P.target;q.hasPointerCapture(P.pointerId)&&q.releasePointerCapture(P.pointerId),document.body.style.webkitUserSelect=k.current,j.viewport&&(j.viewport.style.scrollBehavior=""),S.current=null})})})}),Bf="ScrollAreaThumb",qE=v.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=UE(Bf,e.__scopeScrollArea);return n.jsx(Vr,{present:r||a.hasThumb,children:n.jsx(l9,{ref:t,...s})})}),l9=v.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:s,...a}=e,o=Ls(Bf,r),d=UE(Bf,r),{onThumbPositionChange:u}=d,f=at(t,w=>d.onThumbChange(w)),p=v.useRef(void 0),x=Wm(()=>{p.current&&(p.current(),p.current=void 0)},100);return v.useEffect(()=>{const w=o.viewport;if(w){const _=()=>{if(x(),!p.current){const j=u9(w,u);p.current=j,u()}};return u(),w.addEventListener("scroll",_),()=>w.removeEventListener("scroll",_)}},[o.viewport,x,u]),n.jsx(He.div,{"data-state":d.hasThumb?"visible":"hidden",...a,ref:f,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:De(e.onPointerDownCapture,w=>{const j=w.target.getBoundingClientRect(),N=w.clientX-j.left,C=w.clientY-j.top;d.onThumbPointerDown({x:N,y:C})}),onPointerUp:De(e.onPointerUp,d.onThumbPointerUp)})});qE.displayName=Bf;var ov="ScrollAreaCorner",VE=v.forwardRef((e,t)=>{const r=Ls(ov,e.__scopeScrollArea),s=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&s?n.jsx(c9,{...e,ref:t}):null});VE.displayName=ov;var c9=v.forwardRef((e,t)=>{const{__scopeScrollArea:r,...s}=e,a=Ls(ov,r),[o,d]=v.useState(0),[u,f]=v.useState(0),p=!!(o&&u);return Rc(a.scrollbarX,()=>{var w;const x=((w=a.scrollbarX)==null?void 0:w.offsetHeight)||0;a.onCornerHeightChange(x),f(x)}),Rc(a.scrollbarY,()=>{var w;const x=((w=a.scrollbarY)==null?void 0:w.offsetWidth)||0;a.onCornerWidthChange(x),d(x)}),p?n.jsx(He.div,{...s,ref:t,style:{width:o,height:u,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function zf(e){return e?parseInt(e,10):0}function WE(e,t){const r=e/t;return isNaN(r)?0:r}function Vm(e){const t=WE(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-r)*t;return Math.max(s,18)}function d9(e,t,r,s="ltr"){const a=Vm(r),o=a/2,d=t||o,u=a-d,f=r.scrollbar.paddingStart+d,p=r.scrollbar.size-r.scrollbar.paddingEnd-u,x=r.content-r.viewport,w=s==="ltr"?[0,x]:[x*-1,0];return HE([f,p],w)(e)}function Ab(e,t,r="ltr"){const s=Vm(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-a,d=t.content-t.viewport,u=o-s,f=r==="ltr"?[0,d]:[d*-1,0],p=r0(e,f);return HE([0,d],[0,u])(p)}function HE(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(r-e[0])}}function GE(e,t){return e>0&&e<t}var u9=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},s=0;return function a(){const o={left:e.scrollLeft,top:e.scrollTop},d=r.left!==o.left,u=r.top!==o.top;(d||u)&&t(),r=o,s=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(s)};function Wm(e,t){const r=Cr(e),s=v.useRef(0);return v.useEffect(()=>()=>window.clearTimeout(s.current),[]),v.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(r,t)},[r,t])}function Rc(e,t){const r=Cr(t);kr(()=>{let s=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(s),a.unobserve(e)}}},[e,r])}var XE=LE,h9=BE,f9=VE;const Zo=v.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(XE,{ref:s,className:Be("relative overflow-hidden",e),...r,children:[n.jsx(h9,{className:"h-full w-full rounded-[inherit]",children:t}),n.jsx(KE,{}),n.jsx(f9,{})]}));Zo.displayName=XE.displayName;const KE=v.forwardRef(({className:e,orientation:t="vertical",...r},s)=>n.jsx(av,{ref:s,orientation:t,className:Be("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:n.jsx(qE,{className:"relative flex-1 rounded-full bg-border"})}));KE.displayName=av.displayName;function m9(){const{profile:e,refetch:t}=Lm(),{getCurrentPosition:r}=K1(),[s,a]=v.useState(!1),[o,d]=v.useState([]),[u,f]=v.useState([]),[p,x]=v.useState(""),[w,_]=v.useState(!1),[j,N]=v.useState(null);v.useEffect(()=>{C()},[]),v.useEffect(()=>{e!=null&&e.city_id&&A()},[e==null?void 0:e.city_id]),v.useEffect(()=>{if(p.trim()==="")f(o);else{const O=p.toLowerCase(),L=o.filter(R=>R.name.toLowerCase().includes(O)||R.state.toLowerCase().includes(O));f(L)}},[p,o]);const C=async()=>{try{const{data:O,error:L}=await U.from("organizers").select("city_id").not("city_id","is",null);if(L)throw L;const{data:R,error:M}=await U.from("events").select("city_id").not("city_id","is",null);if(M)throw M;const P=new Set([...(O==null?void 0:O.map(B=>B.city_id))||[],...(R==null?void 0:R.map(B=>B.city_id))||[]]);if(P.size===0){d([]),f([]);return}const{data:q,error:G}=await U.from("cities").select("*").in("id",Array.from(P)).order("state").order("name");if(G)throw G;d(q||[]),f(q||[])}catch(O){console.error("Error loading cities:",O)}},A=async()=>{if(e!=null&&e.city_id)try{const{data:O,error:L}=await U.from("cities").select("*").eq("id",e.city_id).maybeSingle();if(L)throw L;N(O)}catch(O){console.error("Error loading current city:",O)}},S=async O=>{if(e){_(!0);try{const{error:L}=await U.from("profiles").update({city_id:O.id}).eq("user_id",e.user_id);if(L)throw L;N(O),await t(),W.success(`Localização alterada para ${O.name}, ${O.state}`),a(!1),x("")}catch(L){console.error("Error updating location:",L),W.error("Erro ao atualizar localização")}finally{_(!1)}}},k=async()=>{_(!0);try{const O=await r();if(!O){W.error("Não foi possível obter sua localização"),_(!1);return}const{lat:L,lon:R}=O;try{const P=await(await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${L}&lon=${R}&format=json`)).json(),q=P.address.city||P.address.town||P.address.municipality;if(q){const G=o.find(B=>B.name.toLowerCase()===q.toLowerCase());G?await S(G):W.error("Cidade não encontrada no sistema")}else W.error("Não foi possível identificar sua cidade")}catch(M){console.error("Error fetching location:",M),W.error("Erro ao obter localização")}}catch(O){console.error("Geolocation error:",O),W.error("Erro ao acessar localização. Verifique as permissões do app.")}finally{_(!1)}},b=async()=>{if(e){_(!0);try{const{error:O}=await U.from("profiles").update({city_id:null}).eq("user_id",e.user_id);if(O)throw O;N(null),await t(),W.success("Localização removida")}catch(O){console.error("Error clearing location:",O),W.error("Erro ao remover localização")}finally{_(!1)}}},T=u.reduce((O,L)=>(O[L.state]||(O[L.state]=[]),O[L.state].push(L),O),{});return n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-1.5 text-primary hover:text-primary/80 transition-colors",children:[n.jsx(Tt,{className:"h-4 w-4 flex-shrink-0"}),n.jsx("span",{className:"text-sm font-medium truncate max-w-[120px]",children:j?j.name:"Qualquer lugar"}),n.jsx(_1,{className:"h-3 w-3 flex-shrink-0"})]}),n.jsx(zt,{open:s,onOpenChange:a,children:n.jsxs(Ft,{className:"sm:max-w-[500px] max-h-[80vh] p-0",children:[n.jsx(gr,{className:"px-6 pt-6 pb-4 border-b",children:n.jsx(xr,{children:"Localização"})}),n.jsx("div",{className:"px-6 py-4",children:n.jsx(xe,{type:"text",placeholder:"Onde?",value:p,onChange:O=>x(O.target.value),className:"w-full"})}),n.jsx(Zo,{className:"max-h-[400px] px-6",children:n.jsxs("div",{className:"space-y-2 pb-6",children:[n.jsxs("button",{onClick:k,disabled:w,className:"w-full flex items-start gap-3 p-3 hover:bg-accent rounded-lg transition-colors text-left group",children:[n.jsx(Cj,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5 group-hover:scale-110 transition-transform"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-sm",children:"Usar minha localização atual"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Encontre eventos perto de você"})]})]}),n.jsxs("button",{onClick:()=>S({id:"",name:"Qualquer lugar",state:""}),disabled:w,className:"w-full flex items-center gap-3 p-3 hover:bg-accent rounded-lg transition-colors text-left",children:[n.jsx(Tt,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"}),n.jsx("span",{className:"text-sm font-medium",children:"Qualquer lugar"})]}),Object.entries(T).map(([O,L])=>n.jsxs("div",{className:"pt-4 first:pt-2",children:[n.jsx("h3",{className:"text-xs font-semibold text-muted-foreground mb-2 px-3",children:O}),n.jsx("div",{className:"space-y-1",children:L.map(R=>n.jsxs("button",{onClick:()=>S(R),disabled:w,className:`w-full flex items-center gap-3 p-3 hover:bg-accent rounded-lg transition-colors text-left ${(j==null?void 0:j.id)===R.id?"bg-accent":""}`,children:[n.jsx(Tt,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"}),n.jsx("span",{className:"text-sm",children:R.name})]},R.id))})]},O))]})}),j&&n.jsx("div",{className:"px-6 pb-6 pt-2 border-t",children:n.jsxs(Y,{variant:"outline",onClick:b,disabled:w,className:"w-full",children:[n.jsx(Jr,{className:"h-4 w-4 mr-2"}),"Remover localização"]})})]})})]})}function Fs(){const{user:e}=wt(),[t,r]=v.useState(!1),[s,a]=v.useState(!0);return v.useEffect(()=>{(async()=>{if(!e){r(!1),a(!1);return}try{const{data:d,error:u}=await U.rpc("has_role",{_user_id:e.id,_role:"admin"});if(u)throw u;r(d||!1)}catch(d){console.error("Error checking admin role:",d),r(!1)}finally{a(!1)}})()},[e]),{isAdmin:t,loading:s}}function n0({title:e="Eventos",showLocation:t=!0,showNotifications:r=!0,userType:s}){const{user:a}=wt(),{isAdmin:o}=Fs(),{theme:d,toggleTheme:u}=G1(),f=_t(),p=Xn(),x=()=>{if(!a){const w=p.pathname;f(`/auth?redirect=${encodeURIComponent(w)}`),W.info("Faça login para ver suas notificações")}};return n.jsx("header",{className:"sticky top-0 z-40 bg-background/80 backdrop-blur-md border-b border-border",children:n.jsxs("div",{className:"flex items-center justify-between px-4 py-3 max-w-md mx-auto",children:[n.jsx("div",{className:"flex items-center gap-2",children:t&&n.jsx(m9,{})}),n.jsxs("div",{className:"flex items-center gap-2",children:[o&&n.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>f("/admin"),className:"h-8 w-8",title:"Painel Admin",children:n.jsx(E1,{className:"h-4 w-4 text-primary"})}),n.jsx(Y,{variant:"ghost",size:"icon",onClick:u,className:"h-8 w-8",children:d==="dark"?n.jsx(Ej,{className:"h-4 w-4"}):n.jsx(jj,{className:"h-4 w-4"})}),r&&n.jsx(K7,{onUnauthorizedClick:x})]})]})})}var YE={exports:{}},QE={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pc=v;function p9(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var g9=typeof Object.is=="function"?Object.is:p9,x9=Pc.useState,v9=Pc.useEffect,w9=Pc.useLayoutEffect,y9=Pc.useDebugValue;function b9(e,t){var r=t(),s=x9({inst:{value:r,getSnapshot:t}}),a=s[0].inst,o=s[1];return w9(function(){a.value=r,a.getSnapshot=t,Eg(a)&&o({inst:a})},[e,r,t]),v9(function(){return Eg(a)&&o({inst:a}),e(function(){Eg(a)&&o({inst:a})})},[e]),y9(r),r}function Eg(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!g9(e,r)}catch{return!0}}function _9(e,t){return t()}var N9=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?_9:b9;QE.useSyncExternalStore=Pc.useSyncExternalStore!==void 0?Pc.useSyncExternalStore:N9;YE.exports=QE;var j9=YE.exports;function C9(){return j9.useSyncExternalStore(E9,()=>!0,()=>!1)}function E9(){return()=>{}}var lv="Avatar",[S9]=qr(lv),[A9,ZE]=S9(lv),JE=v.forwardRef((e,t)=>{const{__scopeAvatar:r,...s}=e,[a,o]=v.useState("idle");return n.jsx(A9,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:o,children:n.jsx(He.span,{...s,ref:t})})});JE.displayName=lv;var eS="AvatarImage",tS=v.forwardRef((e,t)=>{const{__scopeAvatar:r,src:s,onLoadingStatusChange:a=()=>{},...o}=e,d=ZE(eS,r),u=k9(s,o),f=Cr(p=>{a(p),d.onImageLoadingStatusChange(p)});return kr(()=>{u!=="idle"&&f(u)},[u,f]),u==="loaded"?n.jsx(He.img,{...o,ref:t,src:s}):null});tS.displayName=eS;var rS="AvatarFallback",nS=v.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:s,...a}=e,o=ZE(rS,r),[d,u]=v.useState(s===void 0);return v.useEffect(()=>{if(s!==void 0){const f=window.setTimeout(()=>u(!0),s);return()=>window.clearTimeout(f)}},[s]),d&&o.imageLoadingStatus!=="loaded"?n.jsx(He.span,{...a,ref:t}):null});nS.displayName=rS;function kb(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function k9(e,{referrerPolicy:t,crossOrigin:r}){const s=C9(),a=v.useRef(null),o=s?(a.current||(a.current=new window.Image),a.current):null,[d,u]=v.useState(()=>kb(o,e));return kr(()=>{u(kb(o,e))},[o,e]),kr(()=>{const f=w=>()=>{u(w)};if(!o)return;const p=f("loaded"),x=f("error");return o.addEventListener("load",p),o.addEventListener("error",x),t&&(o.referrerPolicy=t),typeof r=="string"&&(o.crossOrigin=r),()=>{o.removeEventListener("load",p),o.removeEventListener("error",x)}},[o,r,t]),d}var sS=JE,aS=tS,iS=nS;const Vt=v.forwardRef(({className:e,...t},r)=>n.jsx(sS,{ref:r,className:Be("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Vt.displayName=sS.displayName;const Yt=v.forwardRef(({className:e,...t},r)=>n.jsx(aS,{ref:r,className:Be("aspect-square h-full w-full object-cover",e),...t}));Yt.displayName=aS.displayName;const Wt=v.forwardRef(({className:e,...t},r)=>n.jsx(iS,{ref:r,className:Be("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Wt.displayName=iS.displayName;function s0({title:e,image:t,organizerName:r,organizerAvatar:s,date:a,endDate:o,location:d,locationLink:u,estimatedAttendees:f,likes:p,comments:x,isLiked:w,isLive:_,price:j,onClick:N,onLike:C,onOrganizerClick:A,requiresRegistration:S=!1,userType:k="user",isOwnEvent:b=!1,onRegister:T,onManageRegistrations:O,showJoinButton:L=!1,ticketLink:R,isPlatformEvent:M=!1,hasPaidTickets:P=!1}){const q=u&&(u.includes("meet.google")||u.includes("zoom.us")||u.includes("youtube.com")||u.includes("twitch.tv")||u.includes("teams.microsoft")||u.includes("streamyard")||u.includes("jitsi")),G=!!(t&&t.trim()!==""&&!t.includes("placeholder.svg"));return n.jsxs("div",{className:"event-card bg-card rounded-lg overflow-hidden shadow-card cursor-pointer",onClick:N,children:[n.jsx("div",{className:"p-4 pb-3",children:n.jsxs("div",{className:M?"flex items-center gap-3":"flex items-center gap-3 cursor-pointer hover:bg-accent/50 -mx-4 -my-2 px-4 py-2 rounded-lg transition-colors",onClick:B=>{!M&&A&&(B.stopPropagation(),console.log("Clicou no organizador!"),A())},children:[n.jsx("div",{className:"avatar-story",children:n.jsxs(Vt,{className:"h-8 w-8",children:[n.jsx(Yt,{src:s,alt:r}),n.jsx(Wt,{className:"bg-surface text-xs",children:r.charAt(0).toUpperCase()})]})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:`text-sm font-medium text-foreground ${M?"":"group-hover:text-primary transition-colors"}`,children:r}),n.jsxs("div",{className:"flex flex-col gap-0.5",children:[n.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[n.jsx(kt,{className:"h-3 w-3"}),n.jsx("span",{children:a}),_&&n.jsxs("span",{className:"flex items-center gap-1 text-destructive font-medium",children:[n.jsx("div",{className:"h-2 w-2 bg-destructive rounded-full animate-pulse"}),"ACONTECENDO AGORA"]})]}),o&&n.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground/80",children:[n.jsx(Kh,{className:"h-3 w-3"}),n.jsxs("span",{children:["Encerra: ",o]})]})]})]})]})}),G&&n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:t,alt:e,className:"w-full h-64 object-cover"}),typeof j<"u"&&Number(j)>0||R||P?n.jsx("div",{className:"absolute top-3 right-3 bg-destructive/90 backdrop-blur-sm px-2 py-1 rounded-md",children:n.jsx("span",{className:"text-xs font-medium text-white",children:"PAGO"})}):n.jsx("div",{className:"absolute top-3 right-3 bg-primary/90 backdrop-blur-sm px-2 py-1 rounded-md",children:n.jsx("span",{className:"text-xs font-medium text-primary-foreground",children:"GRÁTIS"})})]}),n.jsxs("div",{className:"p-4 pt-3",children:[!G&&(typeof j<"u"&&Number(j)>0||R||P?n.jsx("div",{className:"mb-2 inline-flex px-2 py-1 rounded-md bg-destructive/90",children:n.jsx("span",{className:"text-xs font-medium text-white",children:"PAGO"})}):n.jsx("div",{className:"mb-2 inline-flex px-2 py-1 rounded-md bg-primary/90",children:n.jsx("span",{className:"text-xs font-medium text-primary-foreground",children:"GRÁTIS"})})),n.jsx("h3",{className:"font-semibold text-foreground mb-2 line-clamp-2",children:e}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-3",children:[n.jsx(Tt,{className:"h-4 w-4"}),n.jsx("span",{className:"line-clamp-1",children:d})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("button",{onClick:B=>{B.stopPropagation(),C==null||C()},className:"flex items-center gap-1 transition-smooth hover:scale-110",children:[n.jsx(Ta,{className:`h-5 w-5 ${w?"fill-destructive text-destructive":"text-muted-foreground"}`}),n.jsx("span",{className:"text-sm text-muted-foreground",children:p})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(us,{className:"h-5 w-5 text-muted-foreground"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:x})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(tr,{className:"h-5 w-5 text-muted-foreground"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:f})]})]}),L&&_&&q&&n.jsx(Y,{variant:"live",size:"sm",onClick:B=>{B.stopPropagation(),window.open(u,"_blank")},children:"Entrar"})]}),S&&n.jsx("div",{className:"mt-2",children:n.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary/10 text-primary text-xs rounded-full",children:[n.jsx(tr,{className:"h-3 w-3"}),"Requer cadastro"]})})]})]})}const a0=[{value:"festas",label:"🎉 Festas"},{value:"shows",label:"🎤 Shows"},{value:"fitness",label:"💪 Fitness"},{value:"igreja",label:"🙏 Igreja"},{value:"cursos",label:"📚 Cursos"},{value:"bares",label:"🍻 Bares"},{value:"boates",label:"🪩 Boates"},{value:"esportes",label:"⚽ Esportes"},{value:"encontros",label:"👥 Encontros"}],T9={festas:"festas",shows:"shows",fitness:"fitness",igreja:"igreja",cristao:"igreja",cursos:"cursos",educacao:"cursos",bares:"bares",boates:"boates",balada:"boates",night:"boates",eletronica:"shows",rock:"shows",pop:"shows",forro:"shows",sertanejo:"shows",funk:"shows",samba:"shows",jazz:"shows",musica:"shows",eventos:"festas",esportes:"esportes",encontros:"encontros"};function oS(e,t,r,s){const[a,o]=v.useState([]),[d,u]=v.useState(!1),{user:f}=wt(),p=async()=>{try{u(!0);let w,_,j,N;if(e&&e!=="todos"){const T=await U.from("events").select(`
            *,
            organizer:organizers!inner(
              id,
              page_title,
              user_id,
              avatar_url
            )
          `).eq("status","upcoming").contains("category",[e]).order("event_date",{ascending:!0});w=T.data,j=T.error;const O=await U.from("platform_events").select("*").eq("status","upcoming").contains("category",[e]).order("event_date",{ascending:!0});_=O.data,N=O.error}else{const T=await U.from("events").select(`
            *,
            organizer:organizers!inner(
              id,
              page_title,
              user_id,
              avatar_url
            )
          `).eq("status","upcoming").order("event_date",{ascending:!0});w=T.data,j=T.error;const O=await U.from("platform_events").select("*").eq("status","upcoming").order("event_date",{ascending:!0});_=O.data,N=O.error}if(j)throw j;if(N)throw N;const C=await Promise.all((w||[]).map(async T=>{const{data:O}=await U.from("profiles").select("display_name, avatar_url").eq("user_id",T.organizer.user_id).maybeSingle(),{count:L}=await U.from("event_likes").select("*",{count:"exact",head:!0}).eq("event_id",T.id),{count:R}=await U.from("event_comments").select("*",{count:"exact",head:!0}).eq("event_id",T.id),{count:M}=await U.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",T.id),{count:P}=await U.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",T.id).eq("attendance_confirmed",!0),{data:q}=await U.from("event_registrations").select("user_id").eq("event_id",T.id),G=new Set((q==null?void 0:q.map(X=>X.user_id))||[]).size,{data:B}=await U.from("ticket_types").select("price").eq("event_id",T.id).eq("is_active",!0),V=B&&B.length>0&&B.some(X=>Number(X.price)>0)||T.ticket_price&&Number(T.ticket_price)>0||!!T.ticket_link;let ee=!1;if(f){const{data:X}=await U.from("event_likes").select("id").eq("event_id",T.id).eq("user_id",f.id).maybeSingle();ee=!!X}return{...T,is_platform_event:!1,organizer:{...T.organizer,profile:{display_name:O==null?void 0:O.display_name,avatar_url:T.organizer.avatar_url||(O==null?void 0:O.avatar_url)}},likes_count:L||0,comments_count:R||0,is_liked:ee,registrations_count:M||0,confirmed_attendees_count:P||0,unique_attendees_count:G||0,has_paid_tickets:V}})),A=(_||[]).map(T=>({...T,is_platform_event:!0,organizer_id:"platform",organizer:{id:"platform",page_title:T.organizer_name,user_id:"platform",avatar_url:null,profile:{display_name:T.organizer_name,avatar_url:null}},current_attendees:0,is_live:!1,likes_count:0,comments_count:0,is_liked:!1,registrations_count:0,confirmed_attendees_count:0,unique_attendees_count:0,has_paid_tickets:T.ticket_price&&Number(T.ticket_price)>0||!!T.ticket_link}));let S=[...C,...A],k=[];if(f){const{data:T}=await U.from("followers").select("organizer_id").eq("user_id",f.id);k=(T||[]).map(O=>O.organizer_id)}if(r&&r.length>0){const T=new Set(r.map(O=>O.toLowerCase()));S=S.filter(O=>{const L=k.includes(O.organizer_id),M=(O.category||[]).map(P=>(T9[P]??P).toLowerCase()).some(P=>T.has(P));return L||M})}S.sort((T,O)=>T.has_paid_tickets&&!O.has_paid_tickets?-1:!T.has_paid_tickets&&O.has_paid_tickets?1:new Date(T.event_date).getTime()-new Date(O.event_date).getTime());let b=S;if(t&&t.trim()!==""){const T=t.toLowerCase().trim();b=S.filter(O=>{var B,V,ee,X,le,ue;const L=O.title.toLowerCase().includes(T),R=(B=O.description)==null?void 0:B.toLowerCase().includes(T),M=(V=O.organizer)==null?void 0:V.page_title.toLowerCase().includes(T),P=(le=(X=(ee=O.organizer)==null?void 0:ee.profile)==null?void 0:X.display_name)==null?void 0:le.toLowerCase().includes(T),q=O.location.toLowerCase().includes(T),G=(ue=O.category)==null?void 0:ue.some(oe=>oe.toLowerCase().includes(T));return L||R||M||P||q||G})}if(s){if(!s.showAllCities&&s.cities.length>0){const T=s.cities;b=b.filter(O=>(O.is_platform_event,!0))}if(s.categories.length>0&&(b=b.filter(T=>{const O=T.category||[];return s.categories.some(L=>O.some(R=>R.toLowerCase().includes(L.toLowerCase())||L.toLowerCase().includes(R.toLowerCase())))})),s.dateRange!=="all"){const T=new Date;b=b.filter(O=>{const L=new Date(O.event_date);switch(s.dateRange){case"today":return L.getDate()===T.getDate()&&L.getMonth()===T.getMonth()&&L.getFullYear()===T.getFullYear();case"week":{const R=new Date(T);return R.setDate(T.getDate()+7),L>=T&&L<=R}case"month":{const R=new Date(T);return R.setMonth(T.getMonth()+1),L>=T&&L<=R}default:return!0}})}}o(b)}catch(w){console.error("Error fetching events:",w)}finally{u(!1)}},x=async w=>{if(f)try{const{data:_}=await U.from("event_likes").select("id").eq("event_id",w).eq("user_id",f.id).maybeSingle();_?await U.from("event_likes").delete().eq("id",_.id):await U.from("event_likes").insert({event_id:w,user_id:f.id}),o(j=>j.map(N=>N.id===w?{...N,is_liked:!N.is_liked,likes_count:N.is_liked?(N.likes_count||0)-1:(N.likes_count||0)+1}:N))}catch(_){console.error("Error toggling like:",_)}};return v.useEffect(()=>{p()},[f,e,t,r,s]),v.useEffect(()=>{const w=U.channel("realtime-organizer-profile-events").on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles"},_=>{const j=_.new;o(N=>N.map(C=>{var A,S,k;return((A=C.organizer)==null?void 0:A.user_id)===j.user_id?{...C,organizer:{...C.organizer,profile:{...C.organizer.profile||{},display_name:j.display_name??((S=C.organizer.profile)==null?void 0:S.display_name),avatar_url:j.avatar_url??((k=C.organizer.profile)==null?void 0:k.avatar_url)}}}:C}))}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"organizers"},_=>{const j=_.new;o(N=>N.map(C=>{var A,S;return((A=C.organizer)==null?void 0:A.id)===j.id?{...C,organizer:{...C.organizer,page_title:j.page_title??C.organizer.page_title,avatar_url:j.avatar_url??C.organizer.avatar_url,profile:{...C.organizer.profile||{},avatar_url:j.avatar_url??((S=C.organizer.profile)==null?void 0:S.avatar_url)}}}:C}))}).subscribe();return()=>{U.removeChannel(w)}},[]),v.useEffect(()=>{const w=U.channel("realtime-event-registrations").on("postgres_changes",{event:"INSERT",schema:"public",table:"event_registrations"},async _=>{const N=_.new.event_id,{count:C}=await U.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",N),{count:A}=await U.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",N).eq("attendance_confirmed",!0),{data:S}=await U.from("event_registrations").select("user_id").eq("event_id",N),k=new Set((S==null?void 0:S.map(b=>b.user_id))||[]).size;o(b=>b.map(T=>T.id===N?{...T,registrations_count:C||0,confirmed_attendees_count:A||0,unique_attendees_count:k||0}:T))}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"event_registrations"},async _=>{const N=_.new.event_id,{count:C}=await U.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",N),{count:A}=await U.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",N).eq("attendance_confirmed",!0),{data:S}=await U.from("event_registrations").select("user_id").eq("event_id",N),k=new Set((S==null?void 0:S.map(b=>b.user_id))||[]).size;o(b=>b.map(T=>T.id===N?{...T,registrations_count:C||0,confirmed_attendees_count:A||0,unique_attendees_count:k||0}:T))}).subscribe();return()=>{U.removeChannel(w)}},[]),v.useEffect(()=>{const w=U.channel("realtime-new-events").on("postgres_changes",{event:"INSERT",schema:"public",table:"events"},()=>{p()}).subscribe();return()=>{U.removeChannel(w)}},[]),{events:a,loading:d,fetchEvents:p,toggleLike:x}}function Ct({className:e,...t}){return n.jsx("div",{className:Be("animate-pulse rounded-md bg-muted",e),...t})}const Tb=e=>{const t=new Date(e),r=["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],s=["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],a=r[t.getDay()],o=t.getDate(),d=s[t.getMonth()],u=t.getHours().toString().padStart(2,"0"),f=t.getMinutes().toString().padStart(2,"0");return`${a}, ${o} ${d}, ${u}:${f}`},Ib=e=>{if(!e)return;const t=new Date(e),r=["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],s=["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],a=r[t.getDay()],o=t.getDate(),d=s[t.getMonth()],u=t.getHours().toString().padStart(2,"0"),f=t.getMinutes().toString().padStart(2,"0");return`${a}, ${o} ${d}, ${u}:${f}`};function I9({onEventClick:e,onOrganizerClick:t,userType:r="user",categoryFilter:s,searchQuery:a,userInterests:o,filters:d,refreshKey:u=0}){const{events:f,loading:p,toggleLike:x,fetchEvents:w}=oS(s,a,o,d);v.useEffect(()=>{u>0&&w()},[u]);const _=A=>{e(A)},j=()=>{const A=new Date,S=f.filter(b=>{const T=new Date(b.event_date),O=b.end_date?new Date(b.end_date):null,L=(b.status||"").toLowerCase()==="completed"||(b.status||"").toLowerCase()==="ended";return T<=A&&!L&&(!O||O>A)});return{upcoming:f.filter(b=>{const T=new Date(b.event_date),O=(b.status||"").toLowerCase()==="completed"||(b.status||"").toLowerCase()==="ended";return T>A&&!O}),live:S}},{upcoming:N,live:C}=j();return p?n.jsx("div",{className:"space-y-6",children:[1,2,3].map(A=>n.jsxs("div",{className:"space-y-3",children:[n.jsx(Ct,{className:"h-4 w-32"}),n.jsx(Ct,{className:"h-64 w-full rounded-lg"})]},A))}):n.jsxs("div",{className:"space-y-8",children:[C.length>0&&n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4 px-1",children:"🔴 Acontecendo Agora"}),n.jsx("div",{className:"space-y-6",children:C.map(A=>{var S,k,b,T,O;return n.jsx(s0,{id:A.id,title:A.title,image:A.image_url||"",organizerName:((k=(S=A.organizer)==null?void 0:S.profile)==null?void 0:k.display_name)||((b=A.organizer)==null?void 0:b.page_title)||"Organizador",organizerAvatar:(O=(T=A.organizer)==null?void 0:T.profile)==null?void 0:O.avatar_url,date:Tb(A.event_date),endDate:Ib(A.end_date),location:A.location,locationLink:A.location_link||void 0,ticketLink:A.ticket_link||void 0,estimatedAttendees:A.unique_attendees_count||0,likes:A.likes_count||0,comments:A.comments_count||0,isLiked:A.is_liked||!1,isLive:(()=>{const L=new Date(A.event_date),R=A.end_date?new Date(A.end_date):null,M=new Date;return L<=M&&(!R||R>M)})(),price:A.ticket_price||0,hasPaidTickets:A.has_paid_tickets,onClick:()=>_(A.id),onLike:()=>x(A.id),onOrganizerClick:()=>{var L;console.log("Organizador clicado:",A.organizer),t(((L=A.organizer)==null?void 0:L.id)||"")},userType:r,onRegister:()=>e("register"),onManageRegistrations:()=>e("registrations"),isPlatformEvent:A.is_platform_event||!1},A.id)})})]}),N.length>0&&n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4 px-1",children:"📅 Próximos Eventos"}),n.jsx("div",{className:"space-y-6",children:N.map(A=>{var S,k,b,T,O;return n.jsx(s0,{id:A.id,title:A.title,image:A.image_url||"",organizerName:((k=(S=A.organizer)==null?void 0:S.profile)==null?void 0:k.display_name)||((b=A.organizer)==null?void 0:b.page_title)||"Organizador",organizerAvatar:(O=(T=A.organizer)==null?void 0:T.profile)==null?void 0:O.avatar_url,date:Tb(A.event_date),endDate:Ib(A.end_date),location:A.location,locationLink:A.location_link||void 0,ticketLink:A.ticket_link||void 0,estimatedAttendees:A.unique_attendees_count||0,likes:A.likes_count||0,comments:A.comments_count||0,isLiked:A.is_liked||!1,isLive:!1,price:A.ticket_price||0,hasPaidTickets:A.has_paid_tickets,onClick:()=>_(A.id),onLike:()=>x(A.id),onOrganizerClick:()=>{var L;console.log("Organizador clicado:",A.organizer),t(((L=A.organizer)==null?void 0:L.id)||"")},userType:r,onRegister:()=>e("register"),onManageRegistrations:()=>e("registrations"),isPlatformEvent:A.is_platform_event||!1},A.id)})})]}),f.length===0&&n.jsx("div",{className:"text-center py-12",children:n.jsx("p",{className:"text-muted-foreground",children:"Nenhum evento encontrado"})})]})}function ri(){const{user:e}=wt(),[t,r]=v.useState(null),[s,a]=v.useState([]),[o,d]=v.useState([]),[u,f]=v.useState(!0);v.useEffect(()=>{e&&p()},[e]);const p=async()=>{if(e)try{f(!0);const{data:S,error:k}=await U.from("organizers").select("*").eq("user_id",e.id).maybeSingle();if(k&&k.code!=="PGRST116")throw k;if(!S){f(!1);return}r(S);const{data:b,error:T}=await U.from("events").select(`
          *,
          ticket_types!left(id, price)
        `).eq("organizer_id",S.id).order("event_date",{ascending:!0});a((b==null?void 0:b.map(R=>({...R,status:R.status,form_fields:R.form_fields||[],has_paid_tickets:Array.isArray(R.ticket_types)&&R.ticket_types.length>0&&R.ticket_types.some(M=>M.price>0)})))||[]);const{data:O,error:L}=await U.from("custom_links").select("*").eq("organizer_id",S.id).order("sort_order",{ascending:!0});if(L)throw L;d(O||[])}catch(S){console.error("Error fetching organizer data:",S),W.error("Erro ao carregar dados do organizador")}finally{f(!1)}};return{organizerData:t,events:s,customLinks:o,loading:u,updateOrganizerProfile:async S=>{if(t)try{const{error:k}=await U.from("organizers").update(S).eq("id",t.id);if(k)throw k.code==="23505"&&k.message.includes("username")&&W.error("Este username já está em uso. Escolha outro."),k;r(b=>b?{...b,...S}:null),W.success("Perfil atualizado com sucesso!")}catch(k){throw console.error("Error updating organizer profile:",k),k.message.includes("username")||W.error("Erro ao atualizar perfil"),k}},createEvent:async S=>{if(t)try{const{data:k,error:b}=await U.from("events").insert([{...S,organizer_id:t.id,current_attendees:0}]).select().single();if(b)throw b;return a(T=>[...T,{...k,status:k.status,form_fields:k.form_fields||[]}]),W.success("Evento criado com sucesso!"),k}catch(k){console.error("Error creating event:",k),W.error("Erro ao criar evento")}},updateEvent:async(S,k)=>{try{const{error:b}=await U.from("events").update(k).eq("id",S);if(b)throw b;a(T=>T.map(O=>O.id===S?{...O,...k}:O)),W.success("Evento atualizado com sucesso!")}catch(b){console.error("Error updating event:",b),W.error("Erro ao atualizar evento")}},deleteEvent:async S=>{try{const{error:k}=await U.from("events").delete().eq("id",S);if(k)throw k;a(b=>b.filter(T=>T.id!==S)),W.success("Evento excluído com sucesso!")}catch(k){console.error("Error deleting event:",k),W.error("Erro ao excluir evento")}},addCustomLink:async S=>{if(t)try{const k=Math.max(...o.map(O=>O.sort_order),-1),{data:b,error:T}=await U.from("custom_links").insert({...S,organizer_id:t.id,sort_order:k+1}).select().single();if(T)throw T;return d(O=>[...O,b]),W.success("Link adicionado com sucesso!"),b}catch(k){console.error("Error adding custom link:",k),W.error("Erro ao adicionar link")}},updateCustomLink:async(S,k)=>{try{const{error:b}=await U.from("custom_links").update(k).eq("id",S);if(b)throw b;d(T=>T.map(O=>O.id===S?{...O,...k}:O)),W.success("Link atualizado com sucesso!")}catch(b){console.error("Error updating custom link:",b),W.error("Erro ao atualizar link")}},deleteCustomLink:async S=>{try{const{error:k}=await U.from("custom_links").delete().eq("id",S);if(k)throw k;d(b=>b.filter(T=>T.id!==S)),W.success("Link excluído com sucesso!")}catch(k){console.error("Error deleting custom link:",k),W.error("Erro ao excluir link")}},refetch:p}}function R9({organizersWithStories:e,onOrganizerClick:t,onCreateStory:r,uploadingStory:s=!1}){const{organizerData:a}=ri(),{user:o}=wt(),d=!!a;return n.jsx("div",{className:"border-b border-border bg-background",children:n.jsx("div",{className:"max-w-md mx-auto px-4",children:n.jsxs("div",{className:"flex gap-4 overflow-x-auto py-3 scrollbar-hide",children:[d&&r&&n.jsxs("button",{onClick:s?void 0:r,className:"flex-shrink-0 flex flex-col items-center gap-2 group hover-scale",disabled:s,children:[n.jsxs("div",{className:"relative",children:[n.jsxs(Vt,{className:"h-16 w-16 ring-2 ring-background",children:[n.jsx(Yt,{src:a.avatar_url||void 0}),n.jsx(Wt,{className:"bg-primary text-primary-foreground",children:a.page_title.charAt(0).toUpperCase()})]}),s?n.jsx("div",{className:"absolute inset-0 bg-black/60 rounded-full flex items-center justify-center",children:n.jsx("div",{className:"h-8 w-8 border-2 border-white border-t-transparent rounded-full animate-spin"})}):n.jsx("div",{className:"absolute -bottom-1 -right-1 h-6 w-6 bg-primary rounded-full flex items-center justify-center ring-2 ring-background group-hover:scale-110 transition-transform",children:n.jsx(zc,{className:"h-4 w-4 text-primary-foreground"})})]}),n.jsx("span",{className:"text-xs text-muted-foreground max-w-[64px] truncate story-link",children:s?"Enviando...":"Seu Story"})]}),e.map(u=>n.jsxs("button",{onClick:()=>t(u),className:"flex-shrink-0 flex flex-col items-center gap-2 group hover-scale",children:[n.jsx("div",{className:"relative",children:n.jsx("div",{className:`h-16 w-16 rounded-full p-[2px] ${u.has_unviewed?"bg-gradient-to-tr from-yellow-400 via-red-500 to-pink-500":"bg-muted"}`,children:n.jsxs(Vt,{className:"h-full w-full ring-2 ring-background",children:[n.jsx(Yt,{src:u.avatar_url||void 0}),n.jsx(Wt,{className:"bg-surface",children:u.page_title.charAt(0).toUpperCase()})]})})}),n.jsx("span",{className:"text-xs text-foreground max-w-[64px] truncate group-hover:text-primary transition-colors story-link",children:u.page_title})]},u.id)),e.length===0&&!d&&n.jsx("div",{className:"flex items-center justify-center w-full py-4",children:n.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhum story disponível no momento"})})]})})})}function cv({open:e,onClose:t,organizer:r,initialStoryIndex:s=0,onLike:a,onDelete:o,onMarkAsViewed:d}){const[u,f]=v.useState(s),[p,x]=v.useState(0),{organizerData:w}=ri(),_=r.stories[u],j=!!w&&w.id===r.id,N=(_==null?void 0:_.media_type)==="video"?1e4:5e3;v.useEffect(()=>{f(s),x(0)},[s,e]),v.useEffect(()=>{if(!e||!_)return;d(_.id);const b=setInterval(()=>{x(T=>T>=100?u<r.stories.length-1?(f(O=>O+1),0):(t(),100):T+100/(N/100))},100);return()=>clearInterval(b)},[e,u,_,N]);const C=()=>{u>0&&(f(u-1),x(0))},A=()=>{u<r.stories.length-1?(f(u+1),x(0)):t()},S=()=>{a(_.id)},k=()=>{o&&window.confirm("Deseja excluir este story?")&&(o(_.id),u<r.stories.length-1?A():u>0?C():t())};return _?n.jsx(zt,{open:e,onOpenChange:t,children:n.jsx(Ft,{className:"max-w-md h-[90vh] p-0 bg-black border-none",children:n.jsxs("div",{className:"relative h-full flex flex-col",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 z-20 flex gap-1 p-2",children:r.stories.map((b,T)=>n.jsx("div",{className:"flex-1 h-1 bg-white/30 rounded-full overflow-hidden",children:n.jsx("div",{className:Be("h-full bg-white transition-all duration-100",T<u&&"w-full",T===u&&`w-[${p}%]`,T>u&&"w-0"),style:T===u?{width:`${p}%`}:void 0})},T))}),n.jsxs("div",{className:"absolute top-4 left-0 right-0 z-20 flex items-center justify-between px-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(Vt,{className:"h-8 w-8 ring-2 ring-white",children:[n.jsx(Yt,{src:r.avatar_url||void 0}),n.jsx(Wt,{className:"bg-primary text-primary-foreground text-xs",children:r.page_title.charAt(0).toUpperCase()})]}),n.jsx("span",{className:"text-white font-medium text-sm",children:r.page_title}),n.jsx("span",{className:"text-white/70 text-xs",children:new Date(_.created_at).toLocaleDateString("pt-BR")})]}),n.jsx(Y,{variant:"ghost",size:"icon",onClick:t,className:"text-white hover:bg-white/20",children:n.jsx(Jr,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"flex-1 flex items-center justify-center relative",children:[n.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1/3 cursor-pointer z-10",onClick:C}),n.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1/3 cursor-pointer z-10",onClick:A}),_.media_type==="video"?n.jsx("video",{src:_.media_url,className:"w-full h-full object-contain",autoPlay:!0,playsInline:!0,loop:!1,controls:!1}):n.jsx("img",{src:_.media_url,alt:"Story",className:"w-full h-full object-contain"})]}),n.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-20 p-4 bg-gradient-to-t from-black/80 to-transparent",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-1 text-white",children:[n.jsx(Ko,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:_.views_count||0})]}),n.jsxs("div",{className:"flex items-center gap-1 text-white",children:[n.jsx(Ta,{className:Be("h-4 w-4",_.is_liked&&"fill-red-500 text-red-500")}),n.jsx("span",{className:"text-sm",children:_.likes_count||0})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[!j&&n.jsx(Y,{variant:"ghost",size:"icon",onClick:S,className:"text-white hover:bg-white/20",children:n.jsx(Ta,{className:Be("h-5 w-5",_.is_liked&&"fill-red-500 text-red-500")})}),j&&n.jsx(Y,{variant:"ghost",size:"icon",onClick:k,className:"text-white hover:bg-red-500/20",children:n.jsx(Gn,{className:"h-5 w-5"})})]})]}),n.jsxs("div",{className:"flex items-center justify-center gap-4 mt-2",children:[u>0&&n.jsxs(Y,{variant:"ghost",size:"sm",onClick:C,className:"text-white/70 hover:text-white hover:bg-white/10",children:[n.jsx(N1,{className:"h-4 w-4 mr-1"}),"Anterior"]}),u<r.stories.length-1&&n.jsxs(Y,{variant:"ghost",size:"sm",onClick:A,className:"text-white/70 hover:text-white hover:bg-white/10",children:["Próximo",n.jsx(Eu,{className:"h-4 w-4 ml-1"})]})]})]})]})})}):null}function P9({open:e,onClose:t,onUpload:r}){const[s,a]=v.useState(!1),[o,d]=v.useState(null),[u,f]=v.useState("user"),[p,x]=v.useState(null),[w,_]=v.useState("image"),[j,N]=v.useState(!1),C=v.useRef(null),A=v.useRef(null);v.useEffect(()=>{o&&C.current&&s&&(C.current.srcObject=o,C.current.play().catch(M=>{console.error("Error playing video:",M)}))},[o,s]),v.useEffect(()=>{e||(o&&(o.getTracks().forEach(M=>M.stop()),d(null)),a(!1),x(null))},[e,o]),v.useEffect(()=>()=>{o&&o.getTracks().forEach(M=>M.stop())},[o]);const S=async()=>{try{const M=await navigator.mediaDevices.getUserMedia({video:{facingMode:u},audio:!1});d(M),a(!0)}catch(M){console.error("Error accessing camera:",M),W.error("Erro ao acessar a câmera")}},k=async()=>{o&&o.getTracks().forEach(P=>P.stop());const M=u==="user"?"environment":"user";f(M);try{const P=await navigator.mediaDevices.getUserMedia({video:{facingMode:M},audio:!1});d(P)}catch(P){console.error("Error switching camera:",P),W.error("Erro ao trocar câmera")}},b=()=>{if(!C.current||!o)return;const M=document.createElement("canvas");M.width=C.current.videoWidth,M.height=C.current.videoHeight;const P=M.getContext("2d");if(P){P.drawImage(C.current,0,0);const q=M.toDataURL("image/jpeg",.9);x(q),_("image")}},T=async M=>{var G;const P=(G=M.target.files)==null?void 0:G[0];if(!P)return;if(!P.type.startsWith("image/")&&!P.type.startsWith("video/")){W.error("Por favor, selecione uma imagem ou vídeo");return}if(P.size>50*1024*1024){W.error("Arquivo muito grande. Máximo 50MB");return}const q=new FileReader;q.onload=B=>{var V;x((V=B.target)==null?void 0:V.result),_(P.type.startsWith("video/")?"video":"image")},q.readAsDataURL(P)},O=()=>{if(p)try{fetch(p).then(M=>M.blob()).then(M=>{const P=new File([M],`story-${Date.now()}.${w==="video"?"mp4":"jpg"}`,{type:w==="video"?"video/mp4":"image/jpeg"});r(P),R()}).catch(M=>{console.error("Error preparing story:",M),W.error("Erro ao preparar story")})}catch(M){console.error("Error uploading story:",M),W.error("Erro ao publicar story")}},L=()=>{x(null),!s&&o&&a(!0)},R=()=>{o&&(o.getTracks().forEach(M=>M.stop()),d(null)),a(!1),x(null),t()};return n.jsx(zt,{open:e,onOpenChange:R,children:n.jsx(Ft,{className:"max-w-full sm:max-w-md w-full h-screen sm:h-[90vh] p-0 bg-black border-none overflow-hidden",children:s&&!p?n.jsxs("div",{className:"relative h-full w-full flex flex-col bg-black",children:[n.jsx("div",{className:"flex-1 relative overflow-hidden bg-black",children:n.jsx("video",{ref:C,autoPlay:!0,playsInline:!0,muted:!0,className:"absolute inset-0 w-full h-full object-cover"})}),n.jsxs("div",{className:"absolute top-safe top-4 left-0 right-0 flex justify-between items-center px-4 z-20",children:[n.jsx(Y,{variant:"ghost",size:"icon",onClick:R,className:"bg-black/60 hover:bg-black/80 text-white rounded-full h-10 w-10",children:n.jsx(Jr,{className:"h-5 w-5"})}),n.jsx(Y,{variant:"ghost",size:"icon",onClick:k,className:"bg-black/60 hover:bg-black/80 text-white rounded-full h-10 w-10",children:n.jsx(Sj,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"absolute bottom-safe bottom-8 sm:bottom-12 left-0 right-0 flex justify-center items-center gap-6 sm:gap-8 px-4 z-20 pb-safe",children:[n.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>{var M;return(M=A.current)==null?void 0:M.click()},className:"h-12 w-12 sm:h-14 sm:w-14 bg-white/20 hover:bg-white/30 text-white rounded-full flex-shrink-0",children:n.jsx(Hi,{className:"h-6 w-6"})}),n.jsx(Y,{variant:"ghost",size:"icon",onClick:b,className:"h-16 w-16 sm:h-20 sm:w-20 bg-white hover:bg-white/90 rounded-full ring-4 ring-white/50 flex-shrink-0",children:n.jsx("div",{className:"h-14 w-14 sm:h-16 sm:w-16 rounded-full bg-transparent border-4 border-black"})}),n.jsx("div",{className:"h-12 w-12 sm:h-14 sm:w-14 flex-shrink-0"})]}),n.jsx("input",{ref:A,type:"file",accept:"image/*,video/*",className:"hidden",onChange:T})]}):p?n.jsxs("div",{className:"relative h-full w-full flex flex-col bg-black",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 flex justify-between items-center px-4 py-4 z-30 bg-gradient-to-b from-black/80 to-transparent",children:n.jsx(Y,{variant:"ghost",size:"icon",onClick:R,className:"bg-black/60 hover:bg-black/80 text-white rounded-full h-10 w-10",children:n.jsx(Jr,{className:"h-5 w-5"})})}),n.jsx("div",{className:"flex-1 flex items-center justify-center overflow-hidden pt-16 pb-32",children:w==="video"?n.jsx("video",{src:p,className:"max-h-full w-full object-contain",controls:!0,autoPlay:!0,loop:!0,playsInline:!0}):n.jsx("img",{src:p,alt:"Preview",className:"max-h-full w-full object-contain"})}),n.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-30 bg-gradient-to-t from-black via-black/90 to-transparent pt-8 pb-6 px-4",children:n.jsxs("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-3 max-w-md mx-auto",children:[n.jsxs(Y,{variant:"ghost",size:"lg",onClick:L,disabled:j,className:"w-full sm:w-auto bg-white/20 hover:bg-white/30 text-white rounded-full px-8 h-14 min-w-[140px] font-semibold",children:[n.jsx(Jr,{className:"h-5 w-5 mr-2"}),"Refazer"]}),n.jsxs(Y,{variant:"default",size:"lg",onClick:O,disabled:j,className:"w-full sm:w-auto bg-primary hover:bg-primary/90 rounded-full px-8 h-14 min-w-[140px] font-semibold",children:[n.jsx(Os,{className:"h-5 w-5 mr-2"}),j?"Publicando...":"Publicar"]})]})})]}):n.jsxs("div",{className:"h-full flex flex-col items-center justify-center gap-6 sm:gap-8 p-6 sm:p-8",children:[n.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white",children:"Criar Story"}),n.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4 w-full max-w-xs",children:[n.jsxs(Y,{variant:"default",size:"lg",onClick:S,className:"w-full h-14 sm:h-16 text-base sm:text-lg rounded-xl",children:[n.jsx(Cn,{className:"h-5 w-5 sm:h-6 sm:w-6 mr-2 sm:mr-3"}),"Abrir Câmera"]}),n.jsxs(Y,{variant:"outline",size:"lg",onClick:()=>{var M;return(M=A.current)==null?void 0:M.click()},className:"w-full h-14 sm:h-16 text-base sm:text-lg rounded-xl bg-surface border-border hover:bg-surface/80",children:[n.jsx(Hi,{className:"h-5 w-5 sm:h-6 sm:w-6 mr-2 sm:mr-3"}),"Upload"]})]}),n.jsx("input",{ref:A,type:"file",accept:"image/*,video/*",className:"hidden",onChange:T})]})})})}function dv(){const[e,t]=v.useState([]),[r,s]=v.useState(!1),[a,o]=v.useState(!1),{user:d}=wt(),u=async()=>{try{s(!0);const{data:_,error:j}=await U.from("organizer_stories").select(`
          *,
          organizer:organizers(
            id,
            page_title,
            avatar_url
          )
        `).gt("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});if(j)throw j;if(!_||_.length===0){t([]);return}let N=[],C=[];if(d){const{data:k}=await U.from("organizer_story_views").select("story_id").eq("viewer_id",d.id);N=(k==null?void 0:k.map(T=>T.story_id))||[];const{data:b}=await U.from("organizer_story_likes").select("story_id").eq("user_id",d.id);C=(b==null?void 0:b.map(T=>T.story_id))||[]}const A=await Promise.all(_.map(async k=>{const{count:b}=await U.from("organizer_story_views").select("*",{count:"exact",head:!0}).eq("story_id",k.id),{count:T}=await U.from("organizer_story_likes").select("*",{count:"exact",head:!0}).eq("story_id",k.id);return{...k,views_count:b||0,likes_count:T||0,is_viewed:N.includes(k.id),is_liked:C.includes(k.id)}})),S=new Map;A.forEach(k=>{const b=k.organizer.id;S.has(b)||S.set(b,{id:b,page_title:k.organizer.page_title,avatar_url:k.organizer.avatar_url,stories:[],has_unviewed:!1});const T=S.get(b);T.stories.push(k),k.is_viewed||(T.has_unviewed=!0)}),t(Array.from(S.values()))}catch(_){console.error("Error fetching organizer stories:",_),W.error("Erro ao carregar stories")}finally{s(!1)}},f=async(_,j)=>{if(!d)return W.error("Faça login para criar stories"),null;o(!0);try{const N=j.name.split(".").pop(),C=`organizer-stories/${_}/${Date.now()}.${N}`,{error:A}=await U.storage.from("user-uploads").upload(C,j);if(A)throw A;const{data:{publicUrl:S}}=U.storage.from("user-uploads").getPublicUrl(C),k=j.type.startsWith("video/")?"video":"image",{data:b,error:T}=await U.from("organizer_stories").insert({organizer_id:_,media_url:S,media_type:k}).select().single();if(T)throw T;return W.success("Story publicado com sucesso!"),await u(),b}catch(N){return console.error("Error creating story:",N),W.error("Erro ao criar story"),null}finally{o(!1)}},p=async _=>{if(d)try{const{error:j}=await U.from("organizer_stories").delete().eq("id",_);if(j)throw j;W.success("Story excluído com sucesso!"),await u()}catch(j){console.error("Error deleting story:",j),W.error("Erro ao excluir story")}},x=async _=>{if(d)try{const{error:j}=await U.from("organizer_story_views").insert({story_id:_,viewer_id:d.id});if(j&&!j.message.includes("duplicate"))throw j;t(N=>N.map(C=>({...C,stories:C.stories.map(A=>A.id===_?{...A,is_viewed:!0}:A),has_unviewed:C.stories.some(A=>A.id!==_&&!A.is_viewed)})))}catch(j){console.error("Error marking story as viewed:",j)}},w=async _=>{if(!d){W.error("Faça login para curtir stories");return}try{const j=e.flatMap(N=>N.stories).find(N=>N.id===_);if(!j)return;if(j.is_liked){const{error:N}=await U.from("organizer_story_likes").delete().eq("story_id",_).eq("user_id",d.id);if(N)throw N}else{const{error:N}=await U.from("organizer_story_likes").insert({story_id:_,user_id:d.id});if(N)throw N}t(N=>N.map(C=>({...C,stories:C.stories.map(A=>A.id===_?{...A,is_liked:!A.is_liked,likes_count:A.is_liked?(A.likes_count||0)-1:(A.likes_count||0)+1}:A)})))}catch(j){console.error("Error toggling like:",j),W.error("Erro ao curtir story")}};return v.useEffect(()=>{u();const _=setInterval(u,6e4);return()=>clearInterval(_)},[d]),v.useEffect(()=>{const _=U.channel("organizer-stories-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"organizer_stories"},()=>{u()}).on("postgres_changes",{event:"DELETE",schema:"public",table:"organizer_stories"},()=>{u()}).subscribe();return()=>{U.removeChannel(_)}},[]),{organizersWithStories:e,loading:r,uploadingStory:a,createStory:f,deleteStory:p,markAsViewed:x,toggleLike:w,fetchOrganizerStories:u}}function Rb({onEventClick:e,onFindFriends:t,onOrganizerClick:r,onShowOrganizers:s,onStoryClick:a,userType:o,refreshKey:d=0}){const{profile:u}=Lm(),[f]=v.useState(!0),[p,x]=v.useState(""),[w,_]=v.useState("todos"),[j,N]=v.useState([]),{organizersWithStories:C,uploadingStory:A,createStory:S,deleteStory:k,markAsViewed:b,toggleLike:T}=dv(),{organizerData:O}=ri(),[L,R]=v.useState(null),[M,P]=v.useState(!1),[q,G]=v.useState(!1),B=le=>{R(le),P(!0)},V=()=>{G(!0)},ee=le=>{O&&S(O.id,le)};v.useEffect(()=>{if(Array.isArray(u==null?void 0:u.interests)&&u.interests.length>0){N(u.interests);return}if(u!=null&&u.notes&&u.notes.includes("Interesses:")){const le=u.notes.match(/Interesses:\s*(.+)/);if(le){const ue=le[1].split(",").map(oe=>oe.trim());N(ue)}}},[u]),v.useEffect(()=>{d>0&&window.scrollTo({top:0,behavior:"smooth"})},[d]);const X=[{id:"todos",label:"Todos"},{id:"festas",label:"🎉 Festas"},{id:"shows",label:"🎤 Shows"},{id:"fitness",label:"💪 Fitness"},{id:"igreja",label:"🙏 Igreja"},{id:"cursos",label:"📚 Cursos"},{id:"bares",label:"🍻 Bares"},{id:"boates",label:"🪩 Boates"},{id:"esportes",label:"⚽ Esportes"},{id:"encontros",label:"👥 Encontros"}];return n.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[n.jsx(n0,{title:"Eventos",userType:o,showNotifications:!0,showLocation:!0}),n.jsx(R9,{organizersWithStories:C,onOrganizerClick:B,onCreateStory:O?V:void 0,uploadingStory:A}),n.jsxs("main",{className:"px-4 py-4 max-w-md mx-auto",children:[n.jsx("div",{className:"mb-4",children:n.jsxs("div",{className:"relative",children:[n.jsx(nu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(xe,{type:"text",placeholder:"Buscar eventos...",value:p,onChange:le=>x(le.target.value),className:"pl-10"})]})}),n.jsx("div",{className:"mb-6",children:n.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:X.map(le=>n.jsx("button",{onClick:()=>_(le.id),className:`flex-shrink-0 px-4 py-2 rounded-full border transition-all ${w===le.id?"bg-primary text-primary-foreground border-primary":"bg-surface border-border text-muted-foreground hover:text-foreground hover:border-primary/50"}`,children:n.jsx("span",{className:"text-sm font-medium",children:le.label})},le.id))})}),s&&n.jsx("div",{className:"mb-4",children:n.jsxs(Y,{onClick:s,variant:"outline",className:"w-full justify-start gap-2 h-12",children:[n.jsx(m8,{className:"h-5 w-5 text-primary"}),n.jsxs("div",{className:"text-left",children:[n.jsx("p",{className:"text-sm font-medium",children:"Ver Organizadores"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Descubra os melhores da cidade"})]})]})}),f&&n.jsx("div",{className:"mb-6 p-4 bg-surface rounded-lg border border-primary/20 glow-purple cursor-pointer transition-all hover:bg-surface/80",onClick:()=>e("live-events"),children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-3 w-3 bg-destructive rounded-full animate-pulse"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:"Evento acontecendo agora!"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Clique aqui e saiba todos eventos que estão rolando na cidade"})]})]})}),j.length>0&&w==="todos",n.jsx(I9,{onEventClick:e,onOrganizerClick:r,userType:o,categoryFilter:w,searchQuery:p,userInterests:w==="todos"?j:void 0,refreshKey:d})]}),L&&n.jsx(cv,{open:M,onClose:()=>P(!1),organizer:L,onLike:T,onDelete:(O==null?void 0:O.id)===L.id?k:void 0,onMarkAsViewed:b}),O&&n.jsx(P9,{open:q,onClose:()=>G(!1),onUpload:ee})]})}const An=v.forwardRef(({className:e,...t},r)=>n.jsx("textarea",{className:Be("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));An.displayName="Textarea";var O9="Label",lS=v.forwardRef((e,t)=>n.jsx(He.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));lS.displayName=O9;var cS=lS;const D9=Cu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ie=v.forwardRef(({className:e,...t},r)=>n.jsx(cS,{ref:r,className:Be(D9(),e),...t}));ie.displayName=cS.displayName;var Sg="rovingFocusGroup.onEntryFocus",M9={bubbles:!1,cancelable:!0},Mu="RovingFocusGroup",[i0,dS,L9]=mm(Mu),[F9,Xc]=qr(Mu,[L9]),[B9,z9]=F9(Mu),uS=v.forwardRef((e,t)=>n.jsx(i0.Provider,{scope:e.__scopeRovingFocusGroup,children:n.jsx(i0.Slot,{scope:e.__scopeRovingFocusGroup,children:n.jsx(U9,{...e,ref:t})})}));uS.displayName=Mu;var U9=v.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:s,loop:a=!1,dir:o,currentTabStopId:d,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:f,onEntryFocus:p,preventScrollOnEntryFocus:x=!1,...w}=e,_=v.useRef(null),j=at(t,_),N=Gc(o),[C,A]=sa({prop:d,defaultProp:u??null,onChange:f,caller:Mu}),[S,k]=v.useState(!1),b=Cr(p),T=dS(r),O=v.useRef(!1),[L,R]=v.useState(0);return v.useEffect(()=>{const M=_.current;if(M)return M.addEventListener(Sg,b),()=>M.removeEventListener(Sg,b)},[b]),n.jsx(B9,{scope:r,orientation:s,dir:N,loop:a,currentTabStopId:C,onItemFocus:v.useCallback(M=>A(M),[A]),onItemShiftTab:v.useCallback(()=>k(!0),[]),onFocusableItemAdd:v.useCallback(()=>R(M=>M+1),[]),onFocusableItemRemove:v.useCallback(()=>R(M=>M-1),[]),children:n.jsx(He.div,{tabIndex:S||L===0?-1:0,"data-orientation":s,...w,ref:j,style:{outline:"none",...e.style},onMouseDown:De(e.onMouseDown,()=>{O.current=!0}),onFocus:De(e.onFocus,M=>{const P=!O.current;if(M.target===M.currentTarget&&P&&!S){const q=new CustomEvent(Sg,M9);if(M.currentTarget.dispatchEvent(q),!q.defaultPrevented){const G=T().filter(le=>le.focusable),B=G.find(le=>le.active),V=G.find(le=>le.id===C),X=[B,V,...G].filter(Boolean).map(le=>le.ref.current);mS(X,x)}}O.current=!1}),onBlur:De(e.onBlur,()=>k(!1))})})}),hS="RovingFocusGroupItem",fS=v.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:s=!0,active:a=!1,tabStopId:o,children:d,...u}=e,f=un(),p=o||f,x=z9(hS,r),w=x.currentTabStopId===p,_=dS(r),{onFocusableItemAdd:j,onFocusableItemRemove:N,currentTabStopId:C}=x;return v.useEffect(()=>{if(s)return j(),()=>N()},[s,j,N]),n.jsx(i0.ItemSlot,{scope:r,id:p,focusable:s,active:a,children:n.jsx(He.span,{tabIndex:w?0:-1,"data-orientation":x.orientation,...u,ref:t,onMouseDown:De(e.onMouseDown,A=>{s?x.onItemFocus(p):A.preventDefault()}),onFocus:De(e.onFocus,()=>x.onItemFocus(p)),onKeyDown:De(e.onKeyDown,A=>{if(A.key==="Tab"&&A.shiftKey){x.onItemShiftTab();return}if(A.target!==A.currentTarget)return;const S=V9(A,x.orientation,x.dir);if(S!==void 0){if(A.metaKey||A.ctrlKey||A.altKey||A.shiftKey)return;A.preventDefault();let b=_().filter(T=>T.focusable).map(T=>T.ref.current);if(S==="last")b.reverse();else if(S==="prev"||S==="next"){S==="prev"&&b.reverse();const T=b.indexOf(A.currentTarget);b=x.loop?W9(b,T+1):b.slice(T+1)}setTimeout(()=>mS(b))}}),children:typeof d=="function"?d({isCurrentTabStop:w,hasTabStop:C!=null}):d})})});fS.displayName=hS;var $9={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function q9(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function V9(e,t,r){const s=q9(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return $9[s]}function mS(e,t=!1){const r=document.activeElement;for(const s of e)if(s===r||(s.focus({preventScroll:t}),document.activeElement!==r))return}function W9(e,t){return e.map((r,s)=>e[(t+s)%e.length])}var uv=uS,hv=fS,Hm="Tabs",[H9]=qr(Hm,[Xc]),pS=Xc(),[G9,fv]=H9(Hm),gS=v.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,onValueChange:a,defaultValue:o,orientation:d="horizontal",dir:u,activationMode:f="automatic",...p}=e,x=Gc(u),[w,_]=sa({prop:s,onChange:a,defaultProp:o??"",caller:Hm});return n.jsx(G9,{scope:r,baseId:un(),value:w,onValueChange:_,orientation:d,dir:x,activationMode:f,children:n.jsx(He.div,{dir:x,"data-orientation":d,...p,ref:t})})});gS.displayName=Hm;var xS="TabsList",vS=v.forwardRef((e,t)=>{const{__scopeTabs:r,loop:s=!0,...a}=e,o=fv(xS,r),d=pS(r);return n.jsx(uv,{asChild:!0,...d,orientation:o.orientation,dir:o.dir,loop:s,children:n.jsx(He.div,{role:"tablist","aria-orientation":o.orientation,...a,ref:t})})});vS.displayName=xS;var wS="TabsTrigger",yS=v.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,disabled:a=!1,...o}=e,d=fv(wS,r),u=pS(r),f=NS(d.baseId,s),p=jS(d.baseId,s),x=s===d.value;return n.jsx(hv,{asChild:!0,...u,focusable:!a,active:x,children:n.jsx(He.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":p,"data-state":x?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:f,...o,ref:t,onMouseDown:De(e.onMouseDown,w=>{!a&&w.button===0&&w.ctrlKey===!1?d.onValueChange(s):w.preventDefault()}),onKeyDown:De(e.onKeyDown,w=>{[" ","Enter"].includes(w.key)&&d.onValueChange(s)}),onFocus:De(e.onFocus,()=>{const w=d.activationMode!=="manual";!x&&!a&&w&&d.onValueChange(s)})})})});yS.displayName=wS;var bS="TabsContent",_S=v.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,forceMount:a,children:o,...d}=e,u=fv(bS,r),f=NS(u.baseId,s),p=jS(u.baseId,s),x=s===u.value,w=v.useRef(x);return v.useEffect(()=>{const _=requestAnimationFrame(()=>w.current=!1);return()=>cancelAnimationFrame(_)},[]),n.jsx(Vr,{present:a||x,children:({present:_})=>n.jsx(He.div,{"data-state":x?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":f,hidden:!_,id:p,tabIndex:0,...d,ref:t,style:{...e.style,animationDuration:w.current?"0s":void 0},children:_&&o})})});_S.displayName=bS;function NS(e,t){return`${e}-trigger-${t}`}function jS(e,t){return`${e}-content-${t}`}var X9=gS,CS=vS,ES=yS,SS=_S;const Gm=X9,Lu=v.forwardRef(({className:e,...t},r)=>n.jsx(CS,{ref:r,className:Be("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Lu.displayName=CS.displayName;const is=v.forwardRef(({className:e,...t},r)=>n.jsx(ES,{ref:r,className:Be("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));is.displayName=ES.displayName;const os=v.forwardRef(({className:e,...t},r)=>n.jsx(SS,{ref:r,className:Be("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));os.displayName=SS.displayName;function Fu({open:e,onOpenChange:t,actionDescription:r,onSuccess:s}){const[a,o]=v.useState(!1),[d,u]=v.useState(!1),[f,p]=v.useState(""),[x,w]=v.useState(""),[_,j]=v.useState("user"),[N,C]=v.useState(0),[A,S]=v.useState(""),[k,b]=v.useState(""),[T,O]=v.useState(""),[L,R]=v.useState(""),[M,P]=v.useState(null),[q,G]=v.useState(""),[B,V]=v.useState(""),[ee,X]=v.useState(""),[le,ue]=v.useState(""),oe=[{id:"balada",label:"Balada"},{id:"lives",label:"Lives"},{id:"encontros",label:"Encontros"},{id:"shows",label:"Shows"},{id:"festas",label:"Festas"},{id:"networking",label:"Networking"}],[te,be]=v.useState([]),ve=async ae=>{ae.preventDefault(),u(!0);try{const{error:de}=await U.auth.signInWithPassword({email:f,password:x});if(de)throw de;W.success("Login realizado com sucesso!"),t(!1),s&&s()}catch(de){console.error("Login error:",de),W.error(de.message||"Erro ao fazer login")}finally{u(!1)}},H=ae=>{var se;const de=(se=ae.target.files)==null?void 0:se[0];if(de){P(de);const me=new FileReader;me.onloadend=()=>G(me.result),me.readAsDataURL(de)}},J=ae=>{be(de=>de.includes(ae)?de.filter(se=>se!==ae):[...de,ae])},K=async ae=>{if(ae.preventDefault(),N<3){C(de=>de+1);return}u(!0);try{const de=`${window.location.origin}/`,{data:se,error:me}=await U.auth.signUp({email:k,password:L,options:{emailRedirectTo:de,data:{display_name:A,role:_}}});if(me)throw me;if(!se.session){const{error:ye}=await U.auth.signInWithPassword({email:k,password:L});if(ye)throw ye}let Re=null;const ze=(await U.auth.getUser()).data.user;if(ze&&M){const ye=M.name.split(".").pop(),Ne=`${ze.id}/avatar.${ye}`,{error:we}=await U.storage.from("user-uploads").upload(Ne,M,{upsert:!0});if(!we){const{data:Xe}=U.storage.from("user-uploads").getPublicUrl(Ne);Re=Xe.publicUrl}}ze&&await U.from("profiles").update({display_name:A,username:T||null,avatar_url:Re,bio:B||null,instagram_url:ee||null,phone:le||null,notes:te.length?`Interesses: ${te.join(", ")}`:null}).eq("user_id",ze.id),W.success("Conta criada com sucesso!"),t(!1),s==null||s()}catch(de){console.error("Signup error:",de),W.error(de.message||"Erro ao criar conta")}finally{u(!1)}};return n.jsx(zt,{open:e,onOpenChange:t,children:n.jsxs(Ft,{className:"sm:max-w-md",children:[n.jsxs(gr,{children:[n.jsx(xr,{children:"Bem-vindo!"}),n.jsx(as,{children:r||"Faça login ou crie uma conta para continuar"})]}),n.jsxs(Gm,{defaultValue:"login",className:"w-full",children:[n.jsxs(Lu,{className:"grid w-full grid-cols-2",children:[n.jsx(is,{value:"login",children:"Entrar"}),n.jsx(is,{value:"signup",children:"Criar Conta"})]}),n.jsx(os,{value:"login",children:n.jsxs("form",{onSubmit:ve,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"login-email",children:"Email"}),n.jsx(xe,{id:"login-email",type:"email",placeholder:"seu@email.com",value:f,onChange:ae=>p(ae.target.value),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"login-password",children:"Senha"}),n.jsxs("div",{className:"relative",children:[n.jsx(xe,{id:"login-password",type:a?"text":"password",placeholder:"••••••••",value:x,onChange:ae=>w(ae.target.value),required:!0}),n.jsx(Y,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3",onClick:()=>o(!a),children:a?n.jsx(Ax,{className:"h-4 w-4"}):n.jsx(Ko,{className:"h-4 w-4"})})]})]}),n.jsx(Y,{type:"submit",className:"w-full",disabled:d,children:d?"Entrando...":"Entrar"})]})}),n.jsx(os,{value:"signup",children:n.jsxs("form",{onSubmit:K,className:"space-y-4",children:[N===0&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"signup-name",children:"Nome"}),n.jsx(xe,{id:"signup-name",type:"text",placeholder:"Seu nome",value:A,onChange:ae=>S(ae.target.value),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"signup-email",children:"Email"}),n.jsx(xe,{id:"signup-email",type:"email",placeholder:"seu@email.com",value:k,onChange:ae=>b(ae.target.value),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{children:"Tipo de conta"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Y,{type:"button",variant:_==="user"?"default":"outline",className:"flex-1",onClick:()=>j("user"),children:"Participante"}),n.jsx(Y,{type:"button",variant:_==="organizer"?"default":"outline",className:"flex-1",onClick:()=>j("organizer"),children:"Organizador"})]})]})]}),N===1&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"signup-username",children:"Username"}),n.jsx(xe,{id:"signup-username",type:"text",placeholder:"seu_username",value:T,onChange:ae=>O(ae.target.value.toLowerCase())}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Use letras minúsculas, números e _"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{children:"Foto de perfil (opcional)"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Vt,{className:"h-16 w-16",children:q?n.jsx(Yt,{src:q}):n.jsx(Wt,{children:"U"})}),n.jsxs("div",{children:[n.jsx("input",{id:"avatar-input",type:"file",accept:"image/*",className:"hidden",onChange:H}),n.jsx(ie,{htmlFor:"avatar-input",children:n.jsx(Y,{type:"button",variant:"outline",size:"sm",asChild:!0,children:n.jsxs("span",{className:"cursor-pointer",children:[n.jsx(Ds,{className:"h-4 w-4 mr-2"}),"Selecionar foto"]})})})]})]})]})]}),N===2&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"signup-bio",children:"Bio (opcional)"}),n.jsx(An,{id:"signup-bio",placeholder:"Fale um pouco sobre você",value:B,onChange:ae=>V(ae.target.value)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"signup-insta",children:"Instagram (opcional)"}),n.jsx(xe,{id:"signup-insta",placeholder:"https://instagram.com/usuario",value:ee,onChange:ae=>X(ae.target.value)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"signup-whats",children:"WhatsApp (opcional)"}),n.jsx(xe,{id:"signup-whats",placeholder:"https://wa.me/5511999999999",value:le,onChange:ae=>ue(ae.target.value)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{children:"Interesses (opcional)"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:oe.map(ae=>n.jsx(ct,{variant:te.includes(ae.id)?"default":"outline",className:"cursor-pointer",onClick:()=>J(ae.id),children:ae.label},ae.id))})]})]}),N===3&&n.jsx(n.Fragment,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"signup-password",children:"Senha"}),n.jsxs("div",{className:"relative",children:[n.jsx(xe,{id:"signup-password",type:a?"text":"password",placeholder:"••••••••",value:L,onChange:ae=>R(ae.target.value),required:!0,minLength:6}),n.jsx(Y,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3",onClick:()=>o(!a),children:a?n.jsx(Ax,{className:"h-4 w-4"}):n.jsx(Ko,{className:"h-4 w-4"})})]})]})}),n.jsxs("div",{className:"flex gap-2",children:[N>0&&n.jsx(Y,{type:"button",variant:"outline",onClick:()=>C(ae=>ae-1),children:"Voltar"}),n.jsx(Y,{type:"submit",className:"flex-1",disabled:d,children:d?"Carregando...":N<3?"Próximo":"Finalizar Cadastro"})]})]})})]})]})})}var K9="Separator",Pb="horizontal",Y9=["horizontal","vertical"],AS=v.forwardRef((e,t)=>{const{decorative:r,orientation:s=Pb,...a}=e,o=Q9(s)?s:Pb,u=r?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return n.jsx(He.div,{"data-orientation":o,...u,...a,ref:t})});AS.displayName=K9;function Q9(e){return Y9.includes(e)}var kS=AS;const Ms=v.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...s},a)=>n.jsx(kS,{ref:a,decorative:r,orientation:t,className:Be("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...s}));Ms.displayName=kS.displayName;function Z9({open:e,onOpenChange:t,ticketTypes:r,ticketSettings:s,eventId:a,eventTitle:o}){const[d,u]=v.useState({}),[f,p]=v.useState(!1),x=(N,C)=>{const A=r.find(O=>O.id===N);if(!A)return;const S=d[N]||0,k=A.max_quantity_per_purchase||10,b=Math.max(0,Math.min(k,S+C)),T=A.quantity-(A.quantity_sold||0);if(b>T){W.error(`Apenas ${T} ingressos disponíveis`);return}u(O=>({...O,[N]:b}))},w=()=>{let N=0,C=0;Object.entries(d).forEach(([b,T])=>{const O=r.find(L=>L.id===b);O&&T>0&&(N+=O.price*T,C+=T)});const A=N*(s.platform_fee_percentage/100),S=N*(s.payment_processing_fee_percentage/100)+s.payment_processing_fee_fixed*C,k=s.fee_payer==="buyer"?N+A+S:N;return{subtotal:N,platformFee:A,processingFee:S,total:k,totalQuantity:C}},_=async()=>{try{p(!0);const N=Object.keys(d).filter(b=>d[b]>0);if(N.length===0){W.error("Selecione pelo menos um ingresso");return}const C=N[0],A=d[C],{data:S,error:k}=await U.functions.invoke("create-ticket-checkout",{body:{ticketTypeId:C,quantity:A,eventId:a}});if(k)throw k;if(S!=null&&S.url)window.open(S.url,"_blank"),t(!1),W.success("Redirecionando para o checkout...");else throw new Error("URL de checkout não recebida")}catch(N){console.error("Erro ao criar checkout:",N),W.error("Erro ao processar compra. Tente novamente.")}finally{p(!1)}},j=w();return n.jsx(zt,{open:e,onOpenChange:t,children:n.jsxs(Ft,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(gr,{children:[n.jsx(xr,{className:"text-2xl",children:"Comprar Ingressos"}),n.jsx("p",{className:"text-muted-foreground",children:o})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"space-y-4",children:r.map(N=>{const C=N.quantity-(N.quantity_sold||0),A=d[N.id]||0;return n.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-lg",children:N.name}),N.description&&n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:N.description}),n.jsxs(ct,{variant:"secondary",className:"mt-2",children:[C," disponíveis"]})]}),n.jsx("div",{className:"text-right",children:n.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["R$ ",N.price.toFixed(2)]})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Y,{variant:"outline",size:"icon",onClick:()=>x(N.id,-1),disabled:A===0||f,children:n.jsx(v8,{className:"h-4 w-4"})}),n.jsx("span",{className:"text-lg font-medium w-12 text-center",children:A}),n.jsx(Y,{variant:"outline",size:"icon",onClick:()=>x(N.id,1),disabled:A>=C||f,children:n.jsx(zc,{className:"h-4 w-4"})})]}),A>0&&n.jsxs("p",{className:"text-lg font-semibold",children:["R$ ",(N.price*A).toFixed(2)]})]})]},N.id)})}),j.totalQuantity>0&&n.jsxs(n.Fragment,{children:[n.jsx(Ms,{}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{className:"text-muted-foreground",children:["Subtotal (",j.totalQuantity," ingresso",j.totalQuantity>1?"s":"",")"]}),n.jsxs("span",{children:["R$ ",j.subtotal.toFixed(2)]})]}),s.fee_payer==="buyer"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsxs("span",{className:"text-muted-foreground",children:["Taxa da plataforma (",s.platform_fee_percentage,"%)"]}),n.jsxs("span",{children:["R$ ",j.platformFee.toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Taxa de processamento"}),n.jsxs("span",{children:["R$ ",j.processingFee.toFixed(2)]})]})]}),n.jsx(Ms,{}),n.jsxs("div",{className:"flex justify-between text-xl font-bold",children:[n.jsx("span",{children:"Total"}),n.jsxs("span",{className:"text-green-600",children:["R$ ",j.total.toFixed(2)]})]}),s.fee_payer==="organizer"&&n.jsx("p",{className:"text-xs text-muted-foreground",children:"*As taxas serão deduzidas do valor repassado ao organizador"})]}),n.jsxs(Y,{className:"w-full bg-green-600 hover:bg-green-700 text-white",size:"lg",onClick:_,disabled:f,children:[n.jsx(j8,{className:"h-5 w-5 mr-2"}),f?"Processando...":"Finalizar Compra"]})]})]})]})})}function J9(e){var _,j;const[t,r]=v.useState(null),[s,a]=v.useState(!1),[o,d]=v.useState([]),{user:u}=wt(),f=async()=>{if(e)try{a(!0);let N=null,C=!1,A=!1,S=null;const{data:k,error:b}=await U.from("events").select(`
          *,
          organizer:organizers!inner(
            id,
            page_title,
            user_id,
            avatar_url
          )
        `).eq("id",e).maybeSingle();if(k)N=k;else{const{data:V,error:ee}=await U.from("platform_events").select("*").eq("id",e).maybeSingle();if(V)if(V.claimed_by_organizer_id){const{data:X}=await U.from("events").select(`
                *,
                organizer:organizers!inner(
                  id,
                  page_title,
                  user_id,
                  avatar_url
                )
              `).eq("organizer_id",V.claimed_by_organizer_id).eq("title",V.title).eq("event_date",V.event_date).maybeSingle();X?(N=X,C=!1):(N={...V,is_platform_event:!0,organizer_id:"platform",organizer:{id:"platform",page_title:V.organizer_name,user_id:"platform",avatar_url:null,profile:{display_name:V.organizer_name,avatar_url:null}},current_attendees:0,is_live:!1},C=!0)}else N={...V,is_platform_event:!0,organizer_id:"platform",organizer:{id:"platform",page_title:V.organizer_name,user_id:"platform",avatar_url:null,profile:{display_name:V.organizer_name,avatar_url:null}},current_attendees:0,is_live:!1},C=!0}if(!N)return;let T=null;if(!C){const{data:V}=await U.from("profiles").select("display_name, avatar_url, notes").eq("user_id",N.organizer.user_id).maybeSingle();T=V}let O=0;if(!C){const{count:V}=await U.from("event_likes").select("*",{count:"exact",head:!0}).eq("event_id",e);O=V||0}let L=0;if(!C){const{count:V}=await U.from("event_comments").select("*",{count:"exact",head:!0}).eq("event_id",e);L=V||0}let R=0,M=0,P=0;if(!C){const{count:V}=await U.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",e),{count:ee}=await U.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",e).eq("attendance_confirmed",!0),{data:X}=await U.from("event_registrations").select("user_id").eq("event_id",e);R=V||0,M=ee||0,P=new Set((X==null?void 0:X.map(le=>le.user_id))||[]).size}let q=!1;if(!C&&u){const{data:V}=await U.from("event_likes").select("id").eq("event_id",e).eq("user_id",u.id).maybeSingle();q=!!V}let G=[],B=!1;if(!C&&(N!=null&&N.has_platform_tickets)){const{data:V}=await U.from("ticket_types").select("*").eq("event_id",e).eq("is_active",!0).order("sort_order",{ascending:!0});V&&V.length>0&&(G=V,B=!0)}r({...N,is_platform_event:C,organizer:C?N.organizer:{...N.organizer,profile:{display_name:T==null?void 0:T.display_name,avatar_url:N.organizer.avatar_url||(T==null?void 0:T.avatar_url),notes:T==null?void 0:T.notes}},likes_count:O,comments_count:L,is_liked:q,registrations_count:R,confirmed_attendees_count:M,unique_attendees_count:P,has_platform_tickets:B,ticket_types:G}),C||p()}catch(N){console.error("Error fetching event details:",N)}finally{a(!1)}},p=async()=>{if(e)try{const{data:N}=await U.from("event_comments").select(`
          id,
          content,
          created_at,
          user_id
        `).eq("event_id",e).order("created_at",{ascending:!1}).limit(10),C=await Promise.all((N||[]).map(async A=>{const{data:S}=await U.from("profiles").select("display_name, avatar_url").eq("user_id",A.user_id).maybeSingle();return{...A,user:S}}));d(C)}catch(N){console.error("Error fetching event details:",N)}finally{a(!1)}},x=async()=>{if(!(!u||!e))try{const{data:N}=await U.from("event_likes").select("id").eq("event_id",e).eq("user_id",u.id).maybeSingle();N?await U.from("event_likes").delete().eq("id",N.id):await U.from("event_likes").insert({event_id:e,user_id:u.id}),t&&r(C=>C?{...C,is_liked:!C.is_liked,likes_count:C.is_liked?(C.likes_count||0)-1:(C.likes_count||0)+1}:null)}catch(N){console.error("Error toggling like:",N)}},w=async N=>{if(!(!u||!e))try{const{data:C,error:A}=await U.from("event_comments").insert({event_id:e,user_id:u.id,content:N}).select().single();if(A)throw A;const{data:S}=await U.from("profiles").select("display_name, avatar_url").eq("user_id",u.id).maybeSingle(),k={...C,user:S};d(b=>[k,...b]),t&&r(b=>b?{...b,comments_count:(b.comments_count||0)+1}:null)}catch(C){console.error("Error adding comment:",C)}};return v.useEffect(()=>{f()},[e,u]),v.useEffect(()=>{var C,A;if(!t)return;const N=U.channel("realtime-organizer-profile-eventdetails").on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles",filter:`user_id=eq.${(C=t.organizer)==null?void 0:C.user_id}`},S=>{const k=S.new;r(b=>{var T,O,L,R,M,P,q;return b&&{...b,organizer:{...b.organizer,profile:{...((T=b.organizer)==null?void 0:T.profile)||{},display_name:k.display_name??((L=(O=b.organizer)==null?void 0:O.profile)==null?void 0:L.display_name),avatar_url:k.avatar_url??((M=(R=b.organizer)==null?void 0:R.profile)==null?void 0:M.avatar_url),notes:(q=(P=b.organizer)==null?void 0:P.profile)==null?void 0:q.notes}}}})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"organizers",filter:`id=eq.${(A=t.organizer)==null?void 0:A.id}`},S=>{const k=S.new;r(b=>{var T,O,L,R,M;return b&&{...b,organizer:{...b.organizer,page_title:k.page_title??((T=b.organizer)==null?void 0:T.page_title),avatar_url:k.avatar_url??((O=b.organizer)==null?void 0:O.avatar_url),profile:{...((L=b.organizer)==null?void 0:L.profile)||{},avatar_url:k.avatar_url??((M=(R=b.organizer)==null?void 0:R.profile)==null?void 0:M.avatar_url)}}}})}).subscribe();return()=>{U.removeChannel(N)}},[(_=t==null?void 0:t.organizer)==null?void 0:_.user_id,(j=t==null?void 0:t.organizer)==null?void 0:j.id]),v.useEffect(()=>{if(!e)return;const N=U.channel("realtime-event-registrations-details").on("postgres_changes",{event:"INSERT",schema:"public",table:"event_registrations",filter:`event_id=eq.${e}`},async()=>{const{count:C}=await U.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",e),{count:A}=await U.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",e).eq("attendance_confirmed",!0),{data:S}=await U.from("event_registrations").select("user_id").eq("event_id",e),k=new Set((S==null?void 0:S.map(b=>b.user_id))||[]).size;r(b=>b&&{...b,registrations_count:C||0,confirmed_attendees_count:A||0,unique_attendees_count:k||0})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"event_registrations",filter:`event_id=eq.${e}`},async()=>{const{count:C}=await U.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",e),{count:A}=await U.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",e).eq("attendance_confirmed",!0),{data:S}=await U.from("event_registrations").select("user_id").eq("event_id",e),k=new Set((S==null?void 0:S.map(b=>b.user_id))||[]).size;r(b=>b&&{...b,registrations_count:C||0,confirmed_attendees_count:A||0,unique_attendees_count:k||0})}).subscribe();return()=>{U.removeChannel(N)}},[e]),{event:t,loading:s,comments:o,toggleLike:x,addComment:w,fetchEventDetails:f}}function TS(e){const[t,r]=v.useState([]),[s,a]=v.useState(!1);v.useEffect(()=>{e&&o()},[e]);const o=async()=>{try{const{data:N,error:C}=await U.from("event_pixels").select("*").eq("event_id",e).eq("is_active",!0);if(C)throw C;N&&N.length>0&&(r(N),d(N)),a(!0)}catch(N){console.error("Error loading pixels:",N),a(!0)}},d=N=>{N.forEach(C=>{switch(C.platform){case"facebook":u(C.pixel_id);break;case"google_ads":f(C.pixel_id);break;case"tiktok":p(C.pixel_id);break;case"linkedin":x(C.pixel_id);break;case"twitter":w(C.pixel_id);break;case"custom":_(C.pixel_id);break}})},u=N=>{if(typeof window>"u")return;const C=document.createElement("script");C.innerHTML=`
      !function(f,b,e,v,n,t,s)
      {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};
      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
      n.queue=[];t=b.createElement(e);t.async=!0;
      t.src=v;s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s)}(window, document,'script',
      'https://connect.facebook.net/en_US/fbevents.js');
      fbq('init', '${N}');
      fbq('track', 'PageView');
    `,document.head.appendChild(C);const A=document.createElement("noscript");A.innerHTML=`<img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=${N}&ev=PageView&noscript=1"/>`,document.body.appendChild(A)},f=N=>{if(typeof window>"u")return;const C=document.createElement("script");C.async=!0,C.src=`https://www.googletagmanager.com/gtag/js?id=${N}`,document.head.appendChild(C);const A=document.createElement("script");A.innerHTML=`
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', '${N}');
    `,document.head.appendChild(A)},p=N=>{if(typeof window>"u")return;const C=document.createElement("script");C.innerHTML=`
      !function (w, d, t) {
        w.TiktokAnalyticsObject=t;var ttq=w[t]=w[t]||[];ttq.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"],ttq.setAndDefer=function(t,e){t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}};for(var i=0;i<ttq.methods.length;i++)ttq.setAndDefer(ttq,ttq.methods[i]);ttq.instance=function(t){for(var e=ttq._i[t]||[],n=0;n<ttq.methods.length;n++)ttq.setAndDefer(e,ttq.methods[n]);return e},ttq.load=function(e,n){var i="https://analytics.tiktok.com/i18n/pixel/events.js";ttq._i=ttq._i||{},ttq._i[e]=[],ttq._i[e]._u=i,ttq._t=ttq._t||{},ttq._t[e]=+new Date,ttq._o=ttq._o||{},ttq._o[e]=n||{};var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=i+"?sdkid="+e+"&lib="+t;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(o,a)};
        ttq.load('${N}');
        ttq.page();
      }(window, document, 'ttq');
    `,document.head.appendChild(C)},x=N=>{if(typeof window>"u")return;const C=document.createElement("script");C.innerHTML=`
      _linkedin_partner_id = "${N}";
      window._linkedin_data_partner_ids = window._linkedin_data_partner_ids || [];
      window._linkedin_data_partner_ids.push(_linkedin_partner_id);
    `,document.head.appendChild(C);const A=document.createElement("script");A.src="https://snap.licdn.com/li.lms-analytics/insight.min.js",A.async=!0,document.head.appendChild(A)},w=N=>{if(typeof window>"u")return;const C=document.createElement("script");C.innerHTML=`
      !function(e,t,n,s,u,a){e.twq||(s=e.twq=function(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments);
      },s.version='1.1',s.queue=[],u=t.createElement(n),u.async=!0,u.src='https://static.ads-twitter.com/uwt.js',
      a=t.getElementsByTagName(n)[0],a.parentNode.insertBefore(u,a))}(window,document,'script');
      twq('config','${N}');
    `,document.head.appendChild(C)},_=N=>{if(typeof window>"u")return;const C=document.createElement("script");C.innerHTML=N,document.head.appendChild(C)};return{pixels:t,loaded:s,trackEvent:(N,C)=>{!s||t.length===0||t.forEach(A=>{switch(A.platform){case"facebook":window.fbq&&window.fbq("track",N,C);break;case"google_ads":window.gtag&&window.gtag("event",N,C);break;case"tiktok":window.ttq&&window.ttq.track(N,C);break;case"twitter":window.twq&&window.twq("track",N,C);break}})}}}const Ob="https://meetlines.com.br";function Xm(){return Ob.trim().length>0?Ob:typeof window<"u"?window.location.origin:""}function IS({onBack:e,eventId:t,onRegister:r,onFindFriends:s,onEdit:a,onManageRegistrations:o,onViewAttendances:d}){var Se,ke,Je,Ae,Lt,yt,It,Xt,xt,Wr,Qt;const{event:u,loading:f,comments:p,toggleLike:x,addComment:w}=J9(t),{user:_,userRole:j}=wt(),{trackEvent:N}=TS(t),C=_t();Xn();const[A,S]=v.useState(""),[k,b]=v.useState(!1),[T,O]=v.useState(!0),[L,R]=v.useState(!1),[M,P]=v.useState(!1),[q,G]=v.useState(""),[B,V]=v.useState(!1),[ee,X]=v.useState(null),[le,ue]=v.useState(!1),[oe,te]=v.useState(!1),[be,ve]=v.useState(null),H=_&&((Se=u==null?void 0:u.organizer)==null?void 0:Se.user_id)===_.id,J=(u==null?void 0:u.location_link)&&(u.location_link.includes("meet.google")||u.location_link.includes("zoom.us")||u.location_link.includes("youtube.com")||u.location_link.includes("twitch.tv")||u.location_link.includes("teams.microsoft")||u.location_link.includes("streamyard")||u.location_link.includes("jitsi"));v.useEffect(()=>{(async()=>{if(!_){V(!1);return}try{const{data:Ie,error:dt}=await U.from("organizers").select("id").eq("user_id",_.id).maybeSingle();!dt&&Ie&&(V(!0),X(Ie.id))}catch(Ie){console.error("Error checking organizer:",Ie)}})()},[_]),v.useEffect(()=>{(async()=>{if(!_||!t){O(!1);return}try{const{data:Ie,error:dt}=await U.from("event_registrations").select("attendance_confirmed").eq("event_id",t).eq("user_id",_.id).maybeSingle();!dt&&Ie&&b(Ie.attendance_confirmed||!1)}catch(Ie){console.error("Error checking attendance:",Ie)}finally{O(!1)}})()},[_,t]),v.useEffect(()=>{(async()=>{if(!(!(u!=null&&u.has_platform_tickets)||!t))try{const{data:Ie,error:dt}=await U.from("event_ticket_settings").select("*").eq("event_id",t).maybeSingle();!dt&&Ie&&ve(Ie)}catch(Ie){console.error("Error loading ticket settings:",Ie)}})()},[u==null?void 0:u.has_platform_tickets,t]);const K=(Ve,Ie)=>{if(!_){G(`para ${Ie}`),P(!0);return}Ve()},ae=Ve=>{const Ie=new Date(Ve),it=["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"][Ie.getDay()],ut=Ie.getHours().toString().padStart(2,"0"),Pe=Ie.getMinutes().toString().padStart(2,"0");return`${it}, ${ut}:${Pe}`},de=Ve=>{const Ie=new Date,dt=new Date(Ve),it=Ie.getTime()-dt.getTime(),ut=Math.floor(it/(1e3*60*60)),Pe=Math.floor(ut/24);return Pe>0?`${Pe}d`:ut>0?`${ut}h`:"agora"},se=async()=>{A.trim()&&K(async()=>{await w(A),S("")},"comentar")},me=()=>{K(()=>{x()},"curtir este evento")},Re=async()=>{K(async()=>{var Ve;if(!(!_||!t)){R(!0);try{const{data:Ie,error:dt}=await U.from("event_registrations").select("id, attendance_confirmed").eq("event_id",t).eq("user_id",_.id).maybeSingle();if(dt){console.error("Error checking registration:",dt),W.error("Erro ao verificar registro");return}if(Ie){const{error:it}=await U.from("event_registrations").update({attendance_confirmed:!0,attendance_confirmed_at:new Date().toISOString()}).eq("id",Ie.id);if(it){console.error("Error updating attendance:",it),W.error("Erro ao confirmar presença");return}}else{const{data:it}=await U.from("profiles").select("display_name").eq("user_id",_.id).single(),{error:ut}=await U.from("event_registrations").insert({event_id:t,user_id:_.id,user_name:(it==null?void 0:it.display_name)||((Ve=_.email)==null?void 0:Ve.split("@")[0])||"Usuário",user_email:_.email||"",attendance_confirmed:!0,attendance_confirmed_at:new Date().toISOString()});if(ut){console.error("Error creating registration:",ut),W.error("Erro ao confirmar presença");return}}b(!0),W.success("Presença confirmada com sucesso!"),N("CompleteRegistration",{event_name:u==null?void 0:u.title,event_id:t,value:0,currency:"BRL"})}catch(Ie){console.error("Error:",Ie),W.error("Erro ao confirmar presença")}finally{R(!1)}}},"confirmar presença")},ze=async()=>{K(async()=>{if(!(!_||!t)){R(!0);try{const{error:Ve}=await U.from("event_registrations").update({attendance_confirmed:!1,attendance_confirmed_at:null}).eq("event_id",t).eq("user_id",_.id);if(Ve){console.error("Error canceling attendance:",Ve),W.error("Erro ao cancelar presença");return}b(!1),W.success("Confirmação de presença cancelada")}catch(Ve){console.error("Error:",Ve),W.error("Erro ao cancelar presença")}finally{R(!1)}}},"cancelar presença")},ye=async()=>{if(t)try{const{error:Ve}=await U.from("events").update({is_live:!1,status:"completed"}).eq("id",t);if(Ve){console.error("Error ending event:",Ve),W.error("Erro ao encerrar evento");return}W.success("Evento encerrado com sucesso!"),window.location.reload()}catch(Ve){console.error("Error:",Ve),W.error("Erro ao encerrar evento")}},Ne=()=>{K(()=>{s&&s()},"encontrar amigos")},we=async()=>{if(!t||!u){W.error("Evento não encontrado");return}const Ve=`${Xm()}/e/${t}`;try{if(typeof navigator<"u"&&navigator.share){await navigator.share({title:u.title,text:`Confira este evento: ${u.title}`,url:Ve}),W.success("Evento compartilhado!");return}}catch{}try{if(navigator.clipboard&&window.isSecureContext){await navigator.clipboard.writeText(Ve),W.success("Link copiado para a área de transferência!");return}}catch{}try{const Ie=document.createElement("textarea");Ie.value=Ve,Ie.setAttribute("readonly",""),Ie.style.position="fixed",Ie.style.opacity="0",document.body.appendChild(Ie),Ie.select();const dt=document.execCommand("copy");if(document.body.removeChild(Ie),dt){W.success("Link copiado!");return}}catch{}try{window.prompt("Copie o link do evento:",Ve),W.info("Link exibido para copiar.")}catch{W.error("Não foi possível gerar o link automaticamente.")}},[Xe,_e]=v.useState({claimed:!1,alreadyCreated:!1});v.useEffect(()=>{(async()=>{if(!(!t||!ee||!(u!=null&&u.is_platform_event)))try{const{data:Ie}=await U.from("events").select("id").eq("organizer_id",ee).eq("title",u.title).maybeSingle();if(Ie){_e({claimed:!0,alreadyCreated:!0});return}const{data:dt}=await U.from("event_claim_requests").select("id, status").eq("platform_event_id",t).eq("organizer_id",ee).maybeSingle();(dt==null?void 0:dt.status)==="approved"&&_e({claimed:!0,alreadyCreated:!1})}catch(Ie){console.error("Error checking claim status:",Ie)}})()},[t,ee,u==null?void 0:u.is_platform_event,u==null?void 0:u.title]);const Qe=async()=>{if(!_||!ee||!t){W.error("Você precisa ser um organizador para solicitar associação");return}ue(!0);try{const{data:Ve}=await U.from("event_claim_requests").select("id, status").eq("platform_event_id",t).eq("organizer_id",ee).maybeSingle();if(Ve){Ve.status==="pending"?W.info("Você já tem uma solicitação pendente para este evento"):Ve.status==="approved"?(W.info("Este evento já foi aprovado para você"),_e({claimed:!0,alreadyCreated:!1})):Ve.status==="rejected"&&W.error("Sua solicitação anterior foi rejeitada");return}const{error:Ie}=await U.from("event_claim_requests").insert({platform_event_id:t,organizer_id:ee,message:"Solicitação de associação ao evento"});if(Ie)throw Ie;W.success("Solicitação enviada! Aguarde aprovação do administrador.")}catch(Ve){console.error("Error claiming event:",Ve),W.error("Erro ao solicitar associação: "+Ve.message)}finally{ue(!1)}};if(f)return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"relative",children:n.jsx(Ct,{className:"w-full h-80"})}),n.jsxs("div",{className:"px-4 py-6 max-w-md mx-auto space-y-4",children:[n.jsx(Ct,{className:"h-8 w-3/4"}),n.jsx(Ct,{className:"h-4 w-1/2"}),n.jsx(Ct,{className:"h-20 w-full"})]})]});if(!u)return n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-muted-foreground",children:"Evento não encontrado"}),n.jsx(Y,{variant:"outline",onClick:e,className:"mt-4",children:"Voltar"})]})});const ce=!!(u.image_url&&u.image_url.trim()!==""&&!u.image_url.includes("placeholder.svg"));return n.jsxs("div",{className:"min-h-screen bg-background pb-24",children:[n.jsxs("header",{className:"relative",children:[ce&&n.jsxs(n.Fragment,{children:[n.jsx("img",{src:u.image_url,alt:u.title,className:"w-full h-80 object-cover"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/60 to-transparent"})]}),n.jsx(Y,{variant:"ghost",size:"icon",className:"absolute top-4 left-4 bg-surface/80 backdrop-blur-sm hover:bg-surface",onClick:e,children:n.jsx(mt,{className:"h-5 w-5"})}),n.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[H&&n.jsxs(n.Fragment,{children:[u.is_live&&n.jsxs(Y,{variant:"destructive",size:"sm",className:"bg-destructive/90 backdrop-blur-sm hover:bg-destructive",onClick:ye,children:[n.jsx(Co,{className:"h-4 w-4 mr-1"}),"Encerrar"]}),a&&n.jsx(Y,{variant:"ghost",size:"icon",className:"bg-surface/80 backdrop-blur-sm hover:bg-surface",onClick:()=>a(t),children:n.jsx(Aa,{className:"h-5 w-5"})})]}),n.jsx(Y,{variant:"ghost",size:"icon",className:"bg-surface/80 backdrop-blur-sm hover:bg-surface",onClick:we,children:n.jsx(ks,{className:"h-5 w-5"})})]}),u.is_live&&ce&&n.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-destructive/90 backdrop-blur-sm px-3 py-1 rounded-full",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"h-2 w-2 bg-white rounded-full animate-pulse"}),n.jsx("span",{className:"text-sm font-medium text-white",children:"AO VIVO"})]})})]}),n.jsxs("div",{className:"px-4 py-6 max-w-md mx-auto",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:u.title}),n.jsxs("div",{className:`flex items-center gap-3 mb-4 ${u.is_platform_event?"":"cursor-pointer hover:bg-accent/50 -mx-2 px-2 py-2 rounded-lg transition-colors"}`,onClick:()=>{var Ve;!u.is_platform_event&&((Ve=u.organizer)!=null&&Ve.username)&&C(`/${u.organizer.username}`)},children:[n.jsx(Vt,{className:"h-10 w-10",children:(Je=(ke=u.organizer)==null?void 0:ke.profile)!=null&&Je.avatar_url?n.jsx(Yt,{src:u.organizer.profile.avatar_url}):n.jsx(Wt,{className:"bg-surface",children:(((Lt=(Ae=u.organizer)==null?void 0:Ae.profile)==null?void 0:Lt.display_name)||((yt=u.organizer)==null?void 0:yt.page_title)||"O").charAt(0)})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:((Xt=(It=u.organizer)==null?void 0:It.profile)==null?void 0:Xt.display_name)||((xt=u.organizer)==null?void 0:xt.page_title)||"Organizador"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Organizador"})]})]}),u.is_platform_event&&B&&!Xe.claimed&&n.jsxs("div",{className:"mb-4",children:[n.jsxs(Y,{onClick:Qe,disabled:le,variant:"outline",className:"w-full",children:[n.jsx(_j,{className:"h-4 w-4 mr-2"}),le?"Enviando...":"Solicitar Associação"]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"Você pode solicitar para vincular este evento ao seu perfil de organizador"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(kt,{className:"h-5 w-5 text-primary"}),n.jsx("span",{className:"text-foreground",children:ae(u.event_date)})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Tt,{className:"h-5 w-5 text-primary"}),n.jsx("div",{children:n.jsx("p",{className:"text-foreground",children:u.location})})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(tr,{className:"h-5 w-5 text-primary"}),n.jsxs("span",{className:"text-foreground",children:[u.unique_attendees_count||0," ",u.is_live?"pessoas no evento":"pessoas interessadas"]})]})]})]}),u.interests&&u.interests.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"font-semibold text-foreground mb-3",children:"Meus Interesses"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:u.interests.map(Ve=>n.jsx(ct,{variant:"default",className:"bg-primary/10 text-primary border-primary/20 hover:bg-primary/20",children:Ve},Ve))})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"Sobre o evento"}),n.jsx("p",{className:"text-muted-foreground leading-relaxed",children:u.description||"Sem descrição disponível"})]}),((Qt=(Wr=u.organizer)==null?void 0:Wr.profile)==null?void 0:Qt.notes)&&n.jsxs("div",{className:"mb-6 p-4 bg-muted/50 rounded-lg border border-border",children:[n.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"Notas do Organizador"}),n.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed",children:u.organizer.profile.notes})]}),n.jsxs("div",{className:"space-y-3 mb-6",children:[!H&&u.ticket_link&&n.jsx(Y,{variant:"default",className:"w-full bg-green-600 hover:bg-green-700 text-white",size:"lg",onClick:()=>window.open(u.ticket_link,"_blank"),children:"💳 Comprar Ingresso"}),!H&&u.has_platform_tickets&&u.ticket_types&&u.ticket_types.length>0&&n.jsxs(Y,{variant:"default",className:"w-full bg-green-600 hover:bg-green-700 text-white",size:"lg",onClick:()=>{K(()=>{te(!0),N("InitiateCheckout",{event_name:u==null?void 0:u.title,event_id:t,value:Math.min(...u.ticket_types.map(Ve=>Ve.price)),currency:"BRL"})},"comprar ingressos")},children:["💳 Comprar Ingresso - A partir de R$ ",Math.min(...u.ticket_types.map(Ve=>Ve.price)).toFixed(2)]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(Y,{variant:k?"outline":"glow",className:"flex-1",size:"lg",onClick:H&&d?d:k?ze:Re,disabled:L||T,children:H?"Ver Presenças Confirmadas":k?"Cancelar Presença":L?"Confirmando...":"Confirmar Presença"}),u.location_link&&n.jsx(Y,{variant:"outline",size:"lg",onClick:()=>window.open(u.location_link,"_blank"),children:J?n.jsxs(n.Fragment,{children:[n.jsx(E8,{className:"h-4 w-4"}),"Entrar"]}):n.jsxs(n.Fragment,{children:[n.jsx(Tt,{className:"h-4 w-4"}),"Mapa"]})})]}),u.requires_registration&&n.jsxs(Y,{variant:"secondary",className:"w-full",size:"lg",onClick:H&&o?o:r,children:[n.jsx(tr,{className:"h-4 w-4 mr-2"}),H?"Ver Cadastros no Evento":"Fazer Cadastro no Evento"]}),u.is_live&&!H&&j==="user"&&n.jsxs(Y,{variant:"live",className:"w-full",size:"lg",onClick:Ne,children:[n.jsx(tr,{className:"h-4 w-4 mr-2"}),"Encontrar Amigos no Evento"]}),u.is_live&&H&&n.jsxs(Y,{variant:"destructive",className:"w-full",size:"lg",onClick:ye,children:[n.jsx(Co,{className:"h-4 w-4 mr-2"}),"Encerrar Evento"]})]}),n.jsx("div",{className:"flex items-center justify-between py-4 border-t border-border",children:n.jsxs("div",{className:"flex items-center gap-6",children:[n.jsxs("button",{className:"flex items-center gap-2 transition-smooth hover:scale-110",onClick:me,children:[n.jsx(Ta,{className:`h-5 w-5 ${u.is_liked?"text-destructive fill-current":"text-muted-foreground"}`}),n.jsx("span",{className:"text-sm text-muted-foreground",children:u.likes_count||0})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(us,{className:"h-5 w-5 text-muted-foreground"}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:[u.comments_count||0," comentários"]})]})]})}),n.jsxs("div",{className:"space-y-4 pb-6",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:"Comentários"}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(Vt,{className:"h-8 w-8",children:n.jsx(Wt,{className:"bg-surface text-xs",children:"U"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx(An,{placeholder:"Adicione um comentário...",className:"min-h-[80px] resize-none",value:A,onChange:Ve=>S(Ve.target.value)}),n.jsx(Y,{variant:"glow",size:"sm",className:"mt-2",onClick:se,disabled:!A.trim(),children:"Comentar"})]})]}),n.jsxs("div",{className:"space-y-4",children:[p.map(Ve=>{var Ie,dt,it;return n.jsxs("div",{className:"flex gap-3",children:[n.jsx(Vt,{className:"h-8 w-8",children:(Ie=Ve.user)!=null&&Ie.avatar_url?n.jsx(Yt,{src:Ve.user.avatar_url}):n.jsx(Wt,{className:"bg-surface text-xs",children:(((dt=Ve.user)==null?void 0:dt.display_name)||"U").charAt(0)})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium text-foreground text-sm",children:((it=Ve.user)==null?void 0:it.display_name)||"Usuário"}),n.jsx("span",{className:"text-xs text-muted-foreground",children:de(Ve.created_at)})]}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:Ve.content})]})]},Ve.id)}),p.length===0&&n.jsx("p",{className:"text-center text-muted-foreground py-4",children:"Seja o primeiro a comentar!"})]})]})]}),n.jsx(Fu,{open:M,onOpenChange:P,actionDescription:q}),(u==null?void 0:u.has_platform_tickets)&&u.ticket_types&&be&&n.jsx(Z9,{open:oe,onOpenChange:te,ticketTypes:u.ticket_types,ticketSettings:be,eventId:t,eventTitle:u.title})]})}function er(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Yi(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const RS=6048e5,eF=864e5,Ih=43200,Db=1440;let tF={};function Bu(){return tF}function fu(e,t){var u,f,p,x;const r=Bu(),s=(t==null?void 0:t.weekStartsOn)??((f=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:f.weekStartsOn)??r.weekStartsOn??((x=(p=r.locale)==null?void 0:p.options)==null?void 0:x.weekStartsOn)??0,a=er(e),o=a.getDay(),d=(o<s?7:0)+o-s;return a.setDate(a.getDate()-d),a.setHours(0,0,0,0),a}function Uf(e){return fu(e,{weekStartsOn:1})}function PS(e){const t=er(e),r=t.getFullYear(),s=Yi(e,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=Uf(s),o=Yi(e,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const d=Uf(o);return t.getTime()>=a.getTime()?r+1:t.getTime()>=d.getTime()?r:r-1}function Mb(e){const t=er(e);return t.setHours(0,0,0,0),t}function $f(e){const t=er(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function rF(e,t){const r=Mb(e),s=Mb(t),a=+r-$f(r),o=+s-$f(s);return Math.round((a-o)/eF)}function nF(e){const t=PS(e),r=Yi(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Uf(r)}function ef(e,t){const r=er(e),s=er(t),a=r.getTime()-s.getTime();return a<0?-1:a>0?1:a}function sF(e){return Yi(e,Date.now())}function aF(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function iF(e){if(!aF(e)&&typeof e!="number")return!1;const t=er(e);return!isNaN(Number(t))}function oF(e,t){const r=er(e),s=er(t),a=r.getFullYear()-s.getFullYear(),o=r.getMonth()-s.getMonth();return a*12+o}function lF(e){return t=>{const s=(e?Math[e]:Math.trunc)(t);return s===0?0:s}}function cF(e,t){return+er(e)-+er(t)}function dF(e){const t=er(e);return t.setHours(23,59,59,999),t}function uF(e){const t=er(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function hF(e){const t=er(e);return+dF(t)==+uF(t)}function fF(e,t){const r=er(e),s=er(t),a=ef(r,s),o=Math.abs(oF(r,s));let d;if(o<1)d=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*o);let u=ef(r,s)===-a;hF(er(e))&&o===1&&ef(e,s)===1&&(u=!1),d=a*(o-Number(u))}return d===0?0:d}function mF(e,t,r){const s=cF(e,t)/1e3;return lF(r==null?void 0:r.roundingMethod)(s)}function pF(e){const t=er(e),r=Yi(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const gF={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},xF=(e,t,r)=>{let s;const a=gF[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function cc(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const vF={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},wF={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},yF={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},bF={date:cc({formats:vF,defaultWidth:"full"}),time:cc({formats:wF,defaultWidth:"full"}),dateTime:cc({formats:yF,defaultWidth:"full"})},_F={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},NF=(e,t,r,s)=>_F[e];function ba(e){return(t,r)=>{const s=r!=null&&r.context?String(r.context):"standalone";let a;if(s==="formatting"&&e.formattingValues){const d=e.defaultFormattingWidth||e.defaultWidth,u=r!=null&&r.width?String(r.width):d;a=e.formattingValues[u]||e.formattingValues[d]}else{const d=e.defaultWidth,u=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[u]||e.values[d]}const o=e.argumentCallback?e.argumentCallback(t):t;return a[o]}}const jF={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},CF={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},EF={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},SF={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},AF={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},kF={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},TF=(e,t)=>{const r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},IF={ordinalNumber:TF,era:ba({values:jF,defaultWidth:"wide"}),quarter:ba({values:CF,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ba({values:EF,defaultWidth:"wide"}),day:ba({values:SF,defaultWidth:"wide"}),dayPeriod:ba({values:AF,defaultWidth:"wide",formattingValues:kF,defaultFormattingWidth:"wide"})};function _a(e){return(t,r={})=>{const s=r.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],o=t.match(a);if(!o)return null;const d=o[0],u=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],f=Array.isArray(u)?PF(u,w=>w.test(d)):RF(u,w=>w.test(d));let p;p=e.valueCallback?e.valueCallback(f):f,p=r.valueCallback?r.valueCallback(p):p;const x=t.slice(d.length);return{value:p,rest:x}}}function RF(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function PF(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function OS(e){return(t,r={})=>{const s=t.match(e.matchPattern);if(!s)return null;const a=s[0],o=t.match(e.parsePattern);if(!o)return null;let d=e.valueCallback?e.valueCallback(o[0]):o[0];d=r.valueCallback?r.valueCallback(d):d;const u=t.slice(a.length);return{value:d,rest:u}}}const OF=/^(\d+)(th|st|nd|rd)?/i,DF=/\d+/i,MF={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},LF={any:[/^b/i,/^(a|c)/i]},FF={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},BF={any:[/1/i,/2/i,/3/i,/4/i]},zF={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},UF={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},$F={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},qF={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},VF={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},WF={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},HF={ordinalNumber:OS({matchPattern:OF,parsePattern:DF,valueCallback:e=>parseInt(e,10)}),era:_a({matchPatterns:MF,defaultMatchWidth:"wide",parsePatterns:LF,defaultParseWidth:"any"}),quarter:_a({matchPatterns:FF,defaultMatchWidth:"wide",parsePatterns:BF,defaultParseWidth:"any",valueCallback:e=>e+1}),month:_a({matchPatterns:zF,defaultMatchWidth:"wide",parsePatterns:UF,defaultParseWidth:"any"}),day:_a({matchPatterns:$F,defaultMatchWidth:"wide",parsePatterns:qF,defaultParseWidth:"any"}),dayPeriod:_a({matchPatterns:VF,defaultMatchWidth:"any",parsePatterns:WF,defaultParseWidth:"any"})},DS={code:"en-US",formatDistance:xF,formatLong:bF,formatRelative:NF,localize:IF,match:HF,options:{weekStartsOn:0,firstWeekContainsDate:1}};function GF(e){const t=er(e);return rF(t,pF(t))+1}function XF(e){const t=er(e),r=+Uf(t)-+nF(t);return Math.round(r/RS)+1}function MS(e,t){var x,w,_,j;const r=er(e),s=r.getFullYear(),a=Bu(),o=(t==null?void 0:t.firstWeekContainsDate)??((w=(x=t==null?void 0:t.locale)==null?void 0:x.options)==null?void 0:w.firstWeekContainsDate)??a.firstWeekContainsDate??((j=(_=a.locale)==null?void 0:_.options)==null?void 0:j.firstWeekContainsDate)??1,d=Yi(e,0);d.setFullYear(s+1,0,o),d.setHours(0,0,0,0);const u=fu(d,t),f=Yi(e,0);f.setFullYear(s,0,o),f.setHours(0,0,0,0);const p=fu(f,t);return r.getTime()>=u.getTime()?s+1:r.getTime()>=p.getTime()?s:s-1}function KF(e,t){var u,f,p,x;const r=Bu(),s=(t==null?void 0:t.firstWeekContainsDate)??((f=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((x=(p=r.locale)==null?void 0:p.options)==null?void 0:x.firstWeekContainsDate)??1,a=MS(e,t),o=Yi(e,0);return o.setFullYear(a,0,s),o.setHours(0,0,0,0),fu(o,t)}function YF(e,t){const r=er(e),s=+fu(r,t)-+KF(r,t);return Math.round(s/RS)+1}function Ht(e,t){const r=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return r+s}const mi={y(e,t){const r=e.getFullYear(),s=r>0?r:1-r;return Ht(t==="yy"?s%100:s,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Ht(r+1,2)},d(e,t){return Ht(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Ht(e.getHours()%12||12,t.length)},H(e,t){return Ht(e.getHours(),t.length)},m(e,t){return Ht(e.getMinutes(),t.length)},s(e,t){return Ht(e.getSeconds(),t.length)},S(e,t){const r=t.length,s=e.getMilliseconds(),a=Math.trunc(s*Math.pow(10,r-3));return Ht(a,t.length)}},Dl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Lb={G:function(e,t,r){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const s=e.getFullYear(),a=s>0?s:1-s;return r.ordinalNumber(a,{unit:"year"})}return mi.y(e,t)},Y:function(e,t,r,s){const a=MS(e,s),o=a>0?a:1-a;if(t==="YY"){const d=o%100;return Ht(d,2)}return t==="Yo"?r.ordinalNumber(o,{unit:"year"}):Ht(o,t.length)},R:function(e,t){const r=PS(e);return Ht(r,t.length)},u:function(e,t){const r=e.getFullYear();return Ht(r,t.length)},Q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return Ht(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return Ht(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,r){const s=e.getMonth();switch(t){case"M":case"MM":return mi.M(e,t);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,r){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return Ht(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,r,s){const a=YF(e,s);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):Ht(a,t.length)},I:function(e,t,r){const s=XF(e);return t==="Io"?r.ordinalNumber(s,{unit:"week"}):Ht(s,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):mi.d(e,t)},D:function(e,t,r){const s=GF(e);return t==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):Ht(s,t.length)},E:function(e,t,r){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,r,s){const a=e.getDay(),o=(a-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return Ht(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,s){const a=e.getDay(),o=(a-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return Ht(o,t.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const s=e.getDay(),a=s===0?7:s;switch(t){case"i":return String(a);case"ii":return Ht(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const s=e.getHours();let a;switch(s===12?a=Dl.noon:s===0?a=Dl.midnight:a=s/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const s=e.getHours();let a;switch(s>=17?a=Dl.evening:s>=12?a=Dl.afternoon:s>=4?a=Dl.morning:a=Dl.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return mi.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):mi.H(e,t)},K:function(e,t,r){const s=e.getHours()%12;return t==="Ko"?r.ordinalNumber(s,{unit:"hour"}):Ht(s,t.length)},k:function(e,t,r){let s=e.getHours();return s===0&&(s=24),t==="ko"?r.ordinalNumber(s,{unit:"hour"}):Ht(s,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):mi.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):mi.s(e,t)},S:function(e,t){return mi.S(e,t)},X:function(e,t,r){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return Bb(s);case"XXXX":case"XX":return jo(s);case"XXXXX":case"XXX":default:return jo(s,":")}},x:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"x":return Bb(s);case"xxxx":case"xx":return jo(s);case"xxxxx":case"xxx":default:return jo(s,":")}},O:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Fb(s,":");case"OOOO":default:return"GMT"+jo(s,":")}},z:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Fb(s,":");case"zzzz":default:return"GMT"+jo(s,":")}},t:function(e,t,r){const s=Math.trunc(e.getTime()/1e3);return Ht(s,t.length)},T:function(e,t,r){const s=e.getTime();return Ht(s,t.length)}};function Fb(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),o=s%60;return o===0?r+String(a):r+String(a)+t+Ht(o,2)}function Bb(e,t){return e%60===0?(e>0?"-":"+")+Ht(Math.abs(e)/60,2):jo(e,t)}function jo(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=Ht(Math.trunc(s/60),2),o=Ht(s%60,2);return r+a+t+o}const zb=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},LS=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},QF=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return zb(e,t);let o;switch(s){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",zb(s,t)).replace("{{time}}",LS(a,t))},ZF={p:LS,P:QF},JF=/^D+$/,eB=/^Y+$/,tB=["D","DD","YY","YYYY"];function rB(e){return JF.test(e)}function nB(e){return eB.test(e)}function sB(e,t,r){const s=aB(e,t,r);if(console.warn(s),tB.includes(e))throw new RangeError(s)}function aB(e,t,r){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const iB=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,oB=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,lB=/^'([^]*?)'?$/,cB=/''/g,dB=/[a-zA-Z]/;function cn(e,t,r){var x,w,_,j,N,C,A,S;const s=Bu(),a=(r==null?void 0:r.locale)??s.locale??DS,o=(r==null?void 0:r.firstWeekContainsDate)??((w=(x=r==null?void 0:r.locale)==null?void 0:x.options)==null?void 0:w.firstWeekContainsDate)??s.firstWeekContainsDate??((j=(_=s.locale)==null?void 0:_.options)==null?void 0:j.firstWeekContainsDate)??1,d=(r==null?void 0:r.weekStartsOn)??((C=(N=r==null?void 0:r.locale)==null?void 0:N.options)==null?void 0:C.weekStartsOn)??s.weekStartsOn??((S=(A=s.locale)==null?void 0:A.options)==null?void 0:S.weekStartsOn)??0,u=er(e);if(!iF(u))throw new RangeError("Invalid time value");let f=t.match(oB).map(k=>{const b=k[0];if(b==="p"||b==="P"){const T=ZF[b];return T(k,a.formatLong)}return k}).join("").match(iB).map(k=>{if(k==="''")return{isToken:!1,value:"'"};const b=k[0];if(b==="'")return{isToken:!1,value:uB(k)};if(Lb[b])return{isToken:!0,value:k};if(b.match(dB))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:k}});a.localize.preprocessor&&(f=a.localize.preprocessor(u,f));const p={firstWeekContainsDate:o,weekStartsOn:d,locale:a};return f.map(k=>{if(!k.isToken)return k.value;const b=k.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&nB(b)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&rB(b))&&sB(b,t,String(e));const T=Lb[b[0]];return T(u,b,a.localize,p)}).join("")}function uB(e){const t=e.match(lB);return t?t[1].replace(cB,"'"):e}function hB(e,t,r){const s=Bu(),a=(r==null?void 0:r.locale)??s.locale??DS,o=2520,d=ef(e,t);if(isNaN(d))throw new RangeError("Invalid time value");const u=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:d});let f,p;d>0?(f=er(t),p=er(e)):(f=er(e),p=er(t));const x=mF(p,f),w=($f(p)-$f(f))/1e3,_=Math.round((x-w)/60);let j;if(_<2)return r!=null&&r.includeSeconds?x<5?a.formatDistance("lessThanXSeconds",5,u):x<10?a.formatDistance("lessThanXSeconds",10,u):x<20?a.formatDistance("lessThanXSeconds",20,u):x<40?a.formatDistance("halfAMinute",0,u):x<60?a.formatDistance("lessThanXMinutes",1,u):a.formatDistance("xMinutes",1,u):_===0?a.formatDistance("lessThanXMinutes",1,u):a.formatDistance("xMinutes",_,u);if(_<45)return a.formatDistance("xMinutes",_,u);if(_<90)return a.formatDistance("aboutXHours",1,u);if(_<Db){const N=Math.round(_/60);return a.formatDistance("aboutXHours",N,u)}else{if(_<o)return a.formatDistance("xDays",1,u);if(_<Ih){const N=Math.round(_/Db);return a.formatDistance("xDays",N,u)}else if(_<Ih*2)return j=Math.round(_/Ih),a.formatDistance("aboutXMonths",j,u)}if(j=fF(p,f),j<12){const N=Math.round(_/Ih);return a.formatDistance("xMonths",N,u)}else{const N=j%12,C=Math.trunc(j/12);return N<3?a.formatDistance("aboutXYears",C,u):N<9?a.formatDistance("overXYears",C,u):a.formatDistance("almostXYears",C+1,u)}}function qf(e,t){return hB(e,sF(e),t)}const fB={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 mês",other:"cerca de {{count}} meses"},xMonths:{one:"1 mês",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},mB=(e,t,r)=>{let s;const a=fB[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",String(t)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"em "+s:"há "+s:s},pB={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},gB={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},xB={full:"{{date}} 'às' {{time}}",long:"{{date}} 'às' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},vB={date:cc({formats:pB,defaultWidth:"full"}),time:cc({formats:gB,defaultWidth:"full"}),dateTime:cc({formats:xB,defaultWidth:"full"})},wB={lastWeek:e=>{const t=e.getDay();return"'"+(t===0||t===6?"último":"última")+"' eeee 'às' p"},yesterday:"'ontem às' p",today:"'hoje às' p",tomorrow:"'amanhã às' p",nextWeek:"eeee 'às' p",other:"P"},yB=(e,t,r,s)=>{const a=wB[e];return typeof a=="function"?a(t):a},bB={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},_B={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},NB={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},jB={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","terça","quarta","quinta","sexta","sábado"],wide:["domingo","segunda-feira","terça-feira","quarta-feira","quinta-feira","sexta-feira","sábado"]},CB={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"}},EB={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},SB=(e,t)=>{const r=Number(e);return(t==null?void 0:t.unit)==="week"?r+"ª":r+"º"},AB={ordinalNumber:SB,era:ba({values:bB,defaultWidth:"wide"}),quarter:ba({values:_B,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ba({values:NB,defaultWidth:"wide"}),day:ba({values:jB,defaultWidth:"wide"}),dayPeriod:ba({values:CB,defaultWidth:"wide",formattingValues:EB,defaultFormattingWidth:"wide"})},kB=/^(\d+)[ºªo]?/i,TB=/\d+/i,IB={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},RB={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},PB={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},OB={any:[/1/i,/2/i,/3/i,/4/i]},DB={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},MB={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},LB={narrow:/^(dom|[23456]ª?|s[aá]b)/i,short:/^(dom|[23456]ª?|s[aá]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[aá]b)/i,wide:/^(domingo|(segunda|ter[cç]a|quarta|quinta|sexta)([- ]feira)?|s[aá]bado)/i},FB={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[aá]b/i]},BB={narrow:/^(a|p|mn|md|(da) (manhã|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manhã|tarde|noite))/i},zB={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manhã/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},UB={ordinalNumber:OS({matchPattern:kB,parsePattern:TB,valueCallback:e=>parseInt(e,10)}),era:_a({matchPatterns:IB,defaultMatchWidth:"wide",parsePatterns:RB,defaultParseWidth:"any"}),quarter:_a({matchPatterns:PB,defaultMatchWidth:"wide",parsePatterns:OB,defaultParseWidth:"any",valueCallback:e=>e+1}),month:_a({matchPatterns:DB,defaultMatchWidth:"wide",parsePatterns:MB,defaultParseWidth:"any"}),day:_a({matchPatterns:LB,defaultMatchWidth:"wide",parsePatterns:FB,defaultParseWidth:"any"}),dayPeriod:_a({matchPatterns:BB,defaultMatchWidth:"any",parsePatterns:zB,defaultParseWidth:"any"})},Pr={code:"pt-BR",formatDistance:mB,formatLong:vB,formatRelative:yB,localize:AB,match:UB,options:{weekStartsOn:0,firstWeekContainsDate:1}};function $B({open:e,onOpenChange:t,recipientId:r,recipientName:s,recipientAvatar:a}){const[o,d]=v.useState([]),[u,f]=v.useState(""),[p,x]=v.useState(!1),[w,_]=v.useState(!1),{user:j}=wt(),N=v.useRef(null);v.useEffect(()=>{if(!e||!j)return;(async()=>{x(!0);try{const{data:b,error:T}=await U.from("user_messages").select("*").or(`and(from_user_id.eq.${j.id},to_user_id.eq.${r}),and(from_user_id.eq.${r},to_user_id.eq.${j.id})`).order("created_at",{ascending:!0});if(T)throw T;d(b||[]),await U.from("user_messages").update({read:!0}).eq("to_user_id",j.id).eq("from_user_id",r).eq("read",!1)}catch(b){console.error("Error loading messages:",b),W.error("Erro ao carregar mensagens")}finally{x(!1)}})();const k=U.channel(`chat-messages-${j.id}-${r}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"user_messages"},b=>{const T=b.new;(T.from_user_id===j.id&&T.to_user_id===r||T.from_user_id===r&&T.to_user_id===j.id)&&(console.log("Nova mensagem recebida:",T),d(O=>O.some(L=>L.id===T.id)?O:[...O,T]),T.from_user_id===r&&T.to_user_id===j.id&&U.from("user_messages").update({read:!0}).eq("id",T.id))}).subscribe(b=>{console.log("Status da inscrição do chat:",b)});return()=>{console.log("Removendo canal do chat"),U.removeChannel(k)}},[e,j,r]),v.useEffect(()=>{N.current&&(N.current.scrollTop=N.current.scrollHeight)},[o]);const C=async()=>{if(!(!u.trim()||!j)){_(!0);try{const{data:S,error:k}=await U.from("user_messages").insert({from_user_id:j.id,to_user_id:r,content:u.trim()}).select("*").single();if(k)throw k;S&&d(b=>b.some(T=>T.id===S.id)?b:[...b,S]),f("")}catch(S){console.error("Error sending message:",S),W.error("Erro ao enviar mensagem")}finally{_(!1)}}},A=S=>{S.key==="Enter"&&!S.shiftKey&&(S.preventDefault(),C())};return n.jsx(zt,{open:e,onOpenChange:t,children:n.jsxs(Ft,{className:"sm:max-w-md h-[600px] flex flex-col p-0",children:[n.jsx(gr,{className:"px-6 py-4 border-b",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs(Vt,{className:"h-10 w-10",children:[n.jsx(Yt,{src:a,alt:s}),n.jsx(Wt,{children:s.charAt(0)})]}),n.jsx(xr,{children:s})]})}),n.jsx(Zo,{className:"flex-1 px-6 py-4",ref:N,children:p?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Carregando mensagens..."}):o.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Nenhuma mensagem ainda. Seja o primeiro a enviar!"}):n.jsx("div",{className:"space-y-4",children:o.map(S=>{const k=S.from_user_id===(j==null?void 0:j.id);let b=!1,T=null;try{const O=JSON.parse(S.content);O.type==="story_reply"&&(b=!0,T=O)}catch{}return n.jsx("div",{className:`flex ${k?"justify-end":"justify-start"}`,children:n.jsx("div",{className:`max-w-[70%] rounded-lg overflow-hidden ${k?"bg-primary text-primary-foreground":"bg-muted"}`,children:b&&T?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"px-3 py-2 text-xs opacity-70 border-b border-border/50",children:"Respondeu seu story"}),n.jsx("div",{className:"p-2",children:n.jsx("img",{src:T.story_image,alt:"Story",className:"w-full h-32 object-cover rounded"})}),n.jsxs("div",{className:"px-4 py-2",children:[n.jsx("p",{className:"text-sm",children:T.reply}),n.jsx("p",{className:"text-xs opacity-70 mt-1",children:qf(new Date(S.created_at),{addSuffix:!0,locale:Pr})})]})]}):n.jsxs("div",{className:"px-4 py-2",children:[n.jsx("p",{className:"text-sm",children:S.content}),n.jsx("p",{className:"text-xs opacity-70 mt-1",children:qf(new Date(S.created_at),{addSuffix:!0,locale:Pr})})]})})},S.id)})})}),n.jsx("div",{className:"px-6 py-4 border-t",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx(xe,{value:u,onChange:S=>f(S.target.value),onKeyPress:A,placeholder:"Digite sua mensagem...",disabled:w}),n.jsx(Y,{onClick:C,disabled:!u.trim()||w,size:"icon",children:n.jsx(C1,{className:"h-4 w-4"})})]})})]})})}function qB(e){const[t,r]=v.useState("none"),[s,a]=v.useState(!0),{user:o}=wt();v.useEffect(()=>{if(!o||!e){a(!1);return}d()},[o,e]);const d=async()=>{if(!(!o||!e))try{const{data:p,error:x}=await U.from("friendships").select("status").or(`and(user_id.eq.${o.id},friend_id.eq.${e}),and(user_id.eq.${e},friend_id.eq.${o.id})`).maybeSingle();x&&x.code!=="PGRST116"&&console.error("Error checking friendship status:",x),r((p==null?void 0:p.status)||"none")}catch(p){console.error("Error:",p)}finally{a(!1)}};return{friendshipStatus:t,loading:s,addFriend:async()=>{if(!o)return W.error("Faça login para adicionar amigos"),!1;if(!e)return W.error("ID do usuário não encontrado"),!1;a(!0);try{const{error:p}=await U.from("friendships").insert({user_id:o.id,friend_id:e,status:"pending"});if(p)throw p;return r("pending"),W.success("Solicitação de amizade enviada!"),!0}catch(p){return console.error("Error adding friend:",p),W.error("Erro ao adicionar amigo"),!1}finally{a(!1)}},removeFriend:async()=>{if(!o||!e)return!1;a(!0);try{const{error:p}=await U.from("friendships").delete().or(`and(user_id.eq.${o.id},friend_id.eq.${e}),and(user_id.eq.${e},friend_id.eq.${o.id})`);if(p)throw p;return r("none"),W.success("Amigo removido"),!0}catch(p){return console.error("Error removing friend:",p),W.error("Erro ao remover amigo"),!1}finally{a(!1)}}}}var o0=["Enter"," "],VB=["ArrowDown","PageUp","Home"],FS=["ArrowUp","PageDown","End"],WB=[...VB,...FS],HB={ltr:[...o0,"ArrowRight"],rtl:[...o0,"ArrowLeft"]},GB={ltr:["ArrowLeft"],rtl:["ArrowRight"]},zu="Menu",[mu,XB,KB]=mm(zu),[pl,BS]=qr(zu,[KB,ao,Xc]),Km=ao(),zS=Xc(),[YB,gl]=pl(zu),[QB,Uu]=pl(zu),US=e=>{const{__scopeMenu:t,open:r=!1,children:s,dir:a,onOpenChange:o,modal:d=!0}=e,u=Km(t),[f,p]=v.useState(null),x=v.useRef(!1),w=Cr(o),_=Gc(a);return v.useEffect(()=>{const j=()=>{x.current=!0,document.addEventListener("pointerdown",N,{capture:!0,once:!0}),document.addEventListener("pointermove",N,{capture:!0,once:!0})},N=()=>x.current=!1;return document.addEventListener("keydown",j,{capture:!0}),()=>{document.removeEventListener("keydown",j,{capture:!0}),document.removeEventListener("pointerdown",N,{capture:!0}),document.removeEventListener("pointermove",N,{capture:!0})}},[]),n.jsx(L1,{...u,children:n.jsx(YB,{scope:t,open:r,onOpenChange:w,content:f,onContentChange:p,children:n.jsx(QB,{scope:t,onClose:v.useCallback(()=>w(!1),[w]),isUsingKeyboardRef:x,dir:_,modal:d,children:s})})})};US.displayName=zu;var ZB="MenuAnchor",mv=v.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e,a=Km(r);return n.jsx(Tu,{...a,...s,ref:t})});mv.displayName=ZB;var pv="MenuPortal",[JB,$S]=pl(pv,{forceMount:void 0}),qS=e=>{const{__scopeMenu:t,forceMount:r,children:s,container:a}=e,o=gl(pv,t);return n.jsx(JB,{scope:t,forceMount:r,children:n.jsx(Vr,{present:r||o.open,children:n.jsx(Fc,{asChild:!0,container:a,children:s})})})};qS.displayName=pv;var Is="MenuContent",[ez,gv]=pl(Is),VS=v.forwardRef((e,t)=>{const r=$S(Is,e.__scopeMenu),{forceMount:s=r.forceMount,...a}=e,o=gl(Is,e.__scopeMenu),d=Uu(Is,e.__scopeMenu);return n.jsx(mu.Provider,{scope:e.__scopeMenu,children:n.jsx(Vr,{present:s||o.open,children:n.jsx(mu.Slot,{scope:e.__scopeMenu,children:d.modal?n.jsx(tz,{...a,ref:t}):n.jsx(rz,{...a,ref:t})})})})}),tz=v.forwardRef((e,t)=>{const r=gl(Is,e.__scopeMenu),s=v.useRef(null),a=at(t,s);return v.useEffect(()=>{const o=s.current;if(o)return zm(o)},[]),n.jsx(xv,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:De(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),rz=v.forwardRef((e,t)=>{const r=gl(Is,e.__scopeMenu);return n.jsx(xv,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),nz=Wi("MenuContent.ScrollLock"),xv=v.forwardRef((e,t)=>{const{__scopeMenu:r,loop:s=!1,trapFocus:a,onOpenAutoFocus:o,onCloseAutoFocus:d,disableOutsidePointerEvents:u,onEntryFocus:f,onEscapeKeyDown:p,onPointerDownOutside:x,onFocusOutside:w,onInteractOutside:_,onDismiss:j,disableOutsideScroll:N,...C}=e,A=gl(Is,r),S=Uu(Is,r),k=Km(r),b=zS(r),T=XB(r),[O,L]=v.useState(null),R=v.useRef(null),M=at(t,R,A.onContentChange),P=v.useRef(0),q=v.useRef(""),G=v.useRef(0),B=v.useRef(null),V=v.useRef("right"),ee=v.useRef(0),X=N?Ou:v.Fragment,le=N?{as:nz,allowPinchZoom:!0}:void 0,ue=te=>{var se,me;const be=q.current+te,ve=T().filter(Re=>!Re.disabled),H=document.activeElement,J=(se=ve.find(Re=>Re.ref.current===H))==null?void 0:se.textValue,K=ve.map(Re=>Re.textValue),ae=pz(K,be,J),de=(me=ve.find(Re=>Re.textValue===ae))==null?void 0:me.ref.current;(function Re(ze){q.current=ze,window.clearTimeout(P.current),ze!==""&&(P.current=window.setTimeout(()=>Re(""),1e3))})(be),de&&setTimeout(()=>de.focus())};v.useEffect(()=>()=>window.clearTimeout(P.current),[]),Fm();const oe=v.useCallback(te=>{var ve,H;return V.current===((ve=B.current)==null?void 0:ve.side)&&xz(te,(H=B.current)==null?void 0:H.area)},[]);return n.jsx(ez,{scope:r,searchRef:q,onItemEnter:v.useCallback(te=>{oe(te)&&te.preventDefault()},[oe]),onItemLeave:v.useCallback(te=>{var be;oe(te)||((be=R.current)==null||be.focus(),L(null))},[oe]),onTriggerLeave:v.useCallback(te=>{oe(te)&&te.preventDefault()},[oe]),pointerGraceTimerRef:G,onPointerGraceIntentChange:v.useCallback(te=>{B.current=te},[]),children:n.jsx(X,{...le,children:n.jsx(Pu,{asChild:!0,trapped:a,onMountAutoFocus:De(o,te=>{var be;te.preventDefault(),(be=R.current)==null||be.focus({preventScroll:!0})}),onUnmountAutoFocus:d,children:n.jsx(dl,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:p,onPointerDownOutside:x,onFocusOutside:w,onInteractOutside:_,onDismiss:j,children:n.jsx(uv,{asChild:!0,...b,dir:S.dir,orientation:"vertical",loop:s,currentTabStopId:O,onCurrentTabStopIdChange:L,onEntryFocus:De(f,te=>{S.isUsingKeyboardRef.current||te.preventDefault()}),preventScrollOnEntryFocus:!0,children:n.jsx(_m,{role:"menu","aria-orientation":"vertical","data-state":i4(A.open),"data-radix-menu-content":"",dir:S.dir,...k,...C,ref:M,style:{outline:"none",...C.style},onKeyDown:De(C.onKeyDown,te=>{const ve=te.target.closest("[data-radix-menu-content]")===te.currentTarget,H=te.ctrlKey||te.altKey||te.metaKey,J=te.key.length===1;ve&&(te.key==="Tab"&&te.preventDefault(),!H&&J&&ue(te.key));const K=R.current;if(te.target!==K||!WB.includes(te.key))return;te.preventDefault();const de=T().filter(se=>!se.disabled).map(se=>se.ref.current);FS.includes(te.key)&&de.reverse(),fz(de)}),onBlur:De(e.onBlur,te=>{te.currentTarget.contains(te.target)||(window.clearTimeout(P.current),q.current="")}),onPointerMove:De(e.onPointerMove,pu(te=>{const be=te.target,ve=ee.current!==te.clientX;if(te.currentTarget.contains(be)&&ve){const H=te.clientX>ee.current?"right":"left";V.current=H,ee.current=te.clientX}}))})})})})})})});VS.displayName=Is;var sz="MenuGroup",vv=v.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e;return n.jsx(He.div,{role:"group",...s,ref:t})});vv.displayName=sz;var az="MenuLabel",WS=v.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e;return n.jsx(He.div,{...s,ref:t})});WS.displayName=az;var Vf="MenuItem",Ub="menu.itemSelect",Ym=v.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:s,...a}=e,o=v.useRef(null),d=Uu(Vf,e.__scopeMenu),u=gv(Vf,e.__scopeMenu),f=at(t,o),p=v.useRef(!1),x=()=>{const w=o.current;if(!r&&w){const _=new CustomEvent(Ub,{bubbles:!0,cancelable:!0});w.addEventListener(Ub,j=>s==null?void 0:s(j),{once:!0}),x1(w,_),_.defaultPrevented?p.current=!1:d.onClose()}};return n.jsx(HS,{...a,ref:f,disabled:r,onClick:De(e.onClick,x),onPointerDown:w=>{var _;(_=e.onPointerDown)==null||_.call(e,w),p.current=!0},onPointerUp:De(e.onPointerUp,w=>{var _;p.current||(_=w.currentTarget)==null||_.click()}),onKeyDown:De(e.onKeyDown,w=>{const _=u.searchRef.current!=="";r||_&&w.key===" "||o0.includes(w.key)&&(w.currentTarget.click(),w.preventDefault())})})});Ym.displayName=Vf;var HS=v.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:s=!1,textValue:a,...o}=e,d=gv(Vf,r),u=zS(r),f=v.useRef(null),p=at(t,f),[x,w]=v.useState(!1),[_,j]=v.useState("");return v.useEffect(()=>{const N=f.current;N&&j((N.textContent??"").trim())},[o.children]),n.jsx(mu.ItemSlot,{scope:r,disabled:s,textValue:a??_,children:n.jsx(hv,{asChild:!0,...u,focusable:!s,children:n.jsx(He.div,{role:"menuitem","data-highlighted":x?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...o,ref:p,onPointerMove:De(e.onPointerMove,pu(N=>{s?d.onItemLeave(N):(d.onItemEnter(N),N.defaultPrevented||N.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:De(e.onPointerLeave,pu(N=>d.onItemLeave(N))),onFocus:De(e.onFocus,()=>w(!0)),onBlur:De(e.onBlur,()=>w(!1))})})})}),iz="MenuCheckboxItem",GS=v.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:s,...a}=e;return n.jsx(ZS,{scope:e.__scopeMenu,checked:r,children:n.jsx(Ym,{role:"menuitemcheckbox","aria-checked":Wf(r)?"mixed":r,...a,ref:t,"data-state":yv(r),onSelect:De(a.onSelect,()=>s==null?void 0:s(Wf(r)?!0:!r),{checkForDefaultPrevented:!1})})})});GS.displayName=iz;var XS="MenuRadioGroup",[oz,lz]=pl(XS,{value:void 0,onValueChange:()=>{}}),KS=v.forwardRef((e,t)=>{const{value:r,onValueChange:s,...a}=e,o=Cr(s);return n.jsx(oz,{scope:e.__scopeMenu,value:r,onValueChange:o,children:n.jsx(vv,{...a,ref:t})})});KS.displayName=XS;var YS="MenuRadioItem",QS=v.forwardRef((e,t)=>{const{value:r,...s}=e,a=lz(YS,e.__scopeMenu),o=r===a.value;return n.jsx(ZS,{scope:e.__scopeMenu,checked:o,children:n.jsx(Ym,{role:"menuitemradio","aria-checked":o,...s,ref:t,"data-state":yv(o),onSelect:De(s.onSelect,()=>{var d;return(d=a.onValueChange)==null?void 0:d.call(a,r)},{checkForDefaultPrevented:!1})})})});QS.displayName=YS;var wv="MenuItemIndicator",[ZS,cz]=pl(wv,{checked:!1}),JS=v.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:s,...a}=e,o=cz(wv,r);return n.jsx(Vr,{present:s||Wf(o.checked)||o.checked===!0,children:n.jsx(He.span,{...a,ref:t,"data-state":yv(o.checked)})})});JS.displayName=wv;var dz="MenuSeparator",e4=v.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e;return n.jsx(He.div,{role:"separator","aria-orientation":"horizontal",...s,ref:t})});e4.displayName=dz;var uz="MenuArrow",t4=v.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e,a=Km(r);return n.jsx(Nm,{...a,...s,ref:t})});t4.displayName=uz;var hz="MenuSub",[_W,r4]=pl(hz),_d="MenuSubTrigger",n4=v.forwardRef((e,t)=>{const r=gl(_d,e.__scopeMenu),s=Uu(_d,e.__scopeMenu),a=r4(_d,e.__scopeMenu),o=gv(_d,e.__scopeMenu),d=v.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:f}=o,p={__scopeMenu:e.__scopeMenu},x=v.useCallback(()=>{d.current&&window.clearTimeout(d.current),d.current=null},[]);return v.useEffect(()=>x,[x]),v.useEffect(()=>{const w=u.current;return()=>{window.clearTimeout(w),f(null)}},[u,f]),n.jsx(mv,{asChild:!0,...p,children:n.jsx(HS,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":i4(r.open),...e,ref:Za(t,a.onTriggerChange),onClick:w=>{var _;(_=e.onClick)==null||_.call(e,w),!(e.disabled||w.defaultPrevented)&&(w.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:De(e.onPointerMove,pu(w=>{o.onItemEnter(w),!w.defaultPrevented&&!e.disabled&&!r.open&&!d.current&&(o.onPointerGraceIntentChange(null),d.current=window.setTimeout(()=>{r.onOpenChange(!0),x()},100))})),onPointerLeave:De(e.onPointerLeave,pu(w=>{var j,N;x();const _=(j=r.content)==null?void 0:j.getBoundingClientRect();if(_){const C=(N=r.content)==null?void 0:N.dataset.side,A=C==="right",S=A?-5:5,k=_[A?"left":"right"],b=_[A?"right":"left"];o.onPointerGraceIntentChange({area:[{x:w.clientX+S,y:w.clientY},{x:k,y:_.top},{x:b,y:_.top},{x:b,y:_.bottom},{x:k,y:_.bottom}],side:C}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(w),w.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:De(e.onKeyDown,w=>{var j;const _=o.searchRef.current!=="";e.disabled||_&&w.key===" "||HB[s.dir].includes(w.key)&&(r.onOpenChange(!0),(j=r.content)==null||j.focus(),w.preventDefault())})})})});n4.displayName=_d;var s4="MenuSubContent",a4=v.forwardRef((e,t)=>{const r=$S(Is,e.__scopeMenu),{forceMount:s=r.forceMount,...a}=e,o=gl(Is,e.__scopeMenu),d=Uu(Is,e.__scopeMenu),u=r4(s4,e.__scopeMenu),f=v.useRef(null),p=at(t,f);return n.jsx(mu.Provider,{scope:e.__scopeMenu,children:n.jsx(Vr,{present:s||o.open,children:n.jsx(mu.Slot,{scope:e.__scopeMenu,children:n.jsx(xv,{id:u.contentId,"aria-labelledby":u.triggerId,...a,ref:p,align:"start",side:d.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:x=>{var w;d.isUsingKeyboardRef.current&&((w=f.current)==null||w.focus()),x.preventDefault()},onCloseAutoFocus:x=>x.preventDefault(),onFocusOutside:De(e.onFocusOutside,x=>{x.target!==u.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:De(e.onEscapeKeyDown,x=>{d.onClose(),x.preventDefault()}),onKeyDown:De(e.onKeyDown,x=>{var j;const w=x.currentTarget.contains(x.target),_=GB[d.dir].includes(x.key);w&&_&&(o.onOpenChange(!1),(j=u.trigger)==null||j.focus(),x.preventDefault())})})})})})});a4.displayName=s4;function i4(e){return e?"open":"closed"}function Wf(e){return e==="indeterminate"}function yv(e){return Wf(e)?"indeterminate":e?"checked":"unchecked"}function fz(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function mz(e,t){return e.map((r,s)=>e[(t+s)%e.length])}function pz(e,t,r){const a=t.length>1&&Array.from(t).every(p=>p===t[0])?t[0]:t,o=r?e.indexOf(r):-1;let d=mz(e,Math.max(o,0));a.length===1&&(d=d.filter(p=>p!==r));const f=d.find(p=>p.toLowerCase().startsWith(a.toLowerCase()));return f!==r?f:void 0}function gz(e,t){const{x:r,y:s}=e;let a=!1;for(let o=0,d=t.length-1;o<t.length;d=o++){const u=t[o],f=t[d],p=u.x,x=u.y,w=f.x,_=f.y;x>s!=_>s&&r<(w-p)*(s-x)/(_-x)+p&&(a=!a)}return a}function xz(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return gz(r,t)}function pu(e){return t=>t.pointerType==="mouse"?e(t):void 0}var vz=US,wz=mv,yz=qS,bz=VS,_z=vv,Nz=WS,jz=Ym,Cz=GS,Ez=KS,Sz=QS,Az=JS,kz=e4,Tz=t4,Iz=n4,Rz=a4,Qm="DropdownMenu",[Pz]=qr(Qm,[BS]),In=BS(),[Oz,o4]=Pz(Qm),l4=e=>{const{__scopeDropdownMenu:t,children:r,dir:s,open:a,defaultOpen:o,onOpenChange:d,modal:u=!0}=e,f=In(t),p=v.useRef(null),[x,w]=sa({prop:a,defaultProp:o??!1,onChange:d,caller:Qm});return n.jsx(Oz,{scope:t,triggerId:un(),triggerRef:p,contentId:un(),open:x,onOpenChange:w,onOpenToggle:v.useCallback(()=>w(_=>!_),[w]),modal:u,children:n.jsx(vz,{...f,open:x,onOpenChange:w,dir:s,modal:u,children:r})})};l4.displayName=Qm;var c4="DropdownMenuTrigger",d4=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:s=!1,...a}=e,o=o4(c4,r),d=In(r);return n.jsx(wz,{asChild:!0,...d,children:n.jsx(He.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...a,ref:Za(t,o.triggerRef),onPointerDown:De(e.onPointerDown,u=>{!s&&u.button===0&&u.ctrlKey===!1&&(o.onOpenToggle(),o.open||u.preventDefault())}),onKeyDown:De(e.onKeyDown,u=>{s||(["Enter"," "].includes(u.key)&&o.onOpenToggle(),u.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})})});d4.displayName=c4;var Dz="DropdownMenuPortal",u4=e=>{const{__scopeDropdownMenu:t,...r}=e,s=In(t);return n.jsx(yz,{...s,...r})};u4.displayName=Dz;var h4="DropdownMenuContent",f4=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=o4(h4,r),o=In(r),d=v.useRef(!1);return n.jsx(bz,{id:a.contentId,"aria-labelledby":a.triggerId,...o,...s,ref:t,onCloseAutoFocus:De(e.onCloseAutoFocus,u=>{var f;d.current||(f=a.triggerRef.current)==null||f.focus(),d.current=!1,u.preventDefault()}),onInteractOutside:De(e.onInteractOutside,u=>{const f=u.detail.originalEvent,p=f.button===0&&f.ctrlKey===!0,x=f.button===2||p;(!a.modal||x)&&(d.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});f4.displayName=h4;var Mz="DropdownMenuGroup",Lz=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=In(r);return n.jsx(_z,{...a,...s,ref:t})});Lz.displayName=Mz;var Fz="DropdownMenuLabel",m4=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=In(r);return n.jsx(Nz,{...a,...s,ref:t})});m4.displayName=Fz;var Bz="DropdownMenuItem",p4=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=In(r);return n.jsx(jz,{...a,...s,ref:t})});p4.displayName=Bz;var zz="DropdownMenuCheckboxItem",g4=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=In(r);return n.jsx(Cz,{...a,...s,ref:t})});g4.displayName=zz;var Uz="DropdownMenuRadioGroup",$z=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=In(r);return n.jsx(Ez,{...a,...s,ref:t})});$z.displayName=Uz;var qz="DropdownMenuRadioItem",x4=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=In(r);return n.jsx(Sz,{...a,...s,ref:t})});x4.displayName=qz;var Vz="DropdownMenuItemIndicator",v4=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=In(r);return n.jsx(Az,{...a,...s,ref:t})});v4.displayName=Vz;var Wz="DropdownMenuSeparator",w4=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=In(r);return n.jsx(kz,{...a,...s,ref:t})});w4.displayName=Wz;var Hz="DropdownMenuArrow",Gz=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=In(r);return n.jsx(Tz,{...a,...s,ref:t})});Gz.displayName=Hz;var Xz="DropdownMenuSubTrigger",y4=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=In(r);return n.jsx(Iz,{...a,...s,ref:t})});y4.displayName=Xz;var Kz="DropdownMenuSubContent",b4=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=In(r);return n.jsx(Rz,{...a,...s,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});b4.displayName=Kz;var Yz=l4,Qz=d4,Zz=u4,_4=f4,N4=m4,j4=p4,C4=g4,E4=x4,S4=v4,A4=w4,k4=y4,T4=b4;const tf=Yz,rf=Qz,Jz=v.forwardRef(({className:e,inset:t,children:r,...s},a)=>n.jsxs(k4,{ref:a,className:Be("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",e),...s,children:[r,n.jsx(Eu,{className:"ml-auto h-4 w-4"})]}));Jz.displayName=k4.displayName;const eU=v.forwardRef(({className:e,...t},r)=>n.jsx(T4,{ref:r,className:Be("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));eU.displayName=T4.displayName;const Ld=v.forwardRef(({className:e,sideOffset:t=4,...r},s)=>n.jsx(Zz,{children:n.jsx(_4,{ref:s,sideOffset:t,className:Be("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));Ld.displayName=_4.displayName;const Bn=v.forwardRef(({className:e,inset:t,...r},s)=>n.jsx(j4,{ref:s,className:Be("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",e),...r}));Bn.displayName=j4.displayName;const tU=v.forwardRef(({className:e,children:t,checked:r,...s},a)=>n.jsxs(C4,{ref:a,className:Be("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),checked:r,...s,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(S4,{children:n.jsx(Os,{className:"h-4 w-4"})})}),t]}));tU.displayName=C4.displayName;const rU=v.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(E4,{ref:s,className:Be("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(S4,{children:n.jsx(yj,{className:"h-2 w-2 fill-current"})})}),t]}));rU.displayName=E4.displayName;const nU=v.forwardRef(({className:e,inset:t,...r},s)=>n.jsx(N4,{ref:s,className:Be("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));nU.displayName=N4.displayName;const sU=v.forwardRef(({className:e,...t},r)=>n.jsx(A4,{ref:r,className:Be("-mx-1 my-1 h-px bg-muted",e),...t}));sU.displayName=A4.displayName;var I4="AlertDialog",[aU]=qr(I4,[xE]),ni=xE(),R4=e=>{const{__scopeAlertDialog:t,...r}=e,s=ni(t);return n.jsx(J1,{...s,...r,modal:!0})};R4.displayName=I4;var iU="AlertDialogTrigger",P4=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=ni(r);return n.jsx(PE,{...a,...s,ref:t})});P4.displayName=iU;var oU="AlertDialogPortal",O4=e=>{const{__scopeAlertDialog:t,...r}=e,s=ni(t);return n.jsx(ev,{...s,...r})};O4.displayName=oU;var lU="AlertDialogOverlay",D4=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=ni(r);return n.jsx($m,{...a,...s,ref:t})});D4.displayName=lU;var dc="AlertDialogContent",[cU,dU]=aU(dc),uU=GN("AlertDialogContent"),M4=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:s,...a}=e,o=ni(r),d=v.useRef(null),u=at(t,d),f=v.useRef(null);return n.jsx(KL,{contentName:dc,titleName:L4,docsSlug:"alert-dialog",children:n.jsx(cU,{scope:r,cancelRef:f,children:n.jsxs(qm,{role:"alertdialog",...o,...a,ref:u,onOpenAutoFocus:De(a.onOpenAutoFocus,p=>{var x;p.preventDefault(),(x=f.current)==null||x.focus({preventScroll:!0})}),onPointerDownOutside:p=>p.preventDefault(),onInteractOutside:p=>p.preventDefault(),children:[n.jsx(uU,{children:s}),n.jsx(fU,{contentRef:d})]})})})});M4.displayName=dc;var L4="AlertDialogTitle",F4=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=ni(r);return n.jsx(tv,{...a,...s,ref:t})});F4.displayName=L4;var B4="AlertDialogDescription",z4=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=ni(r);return n.jsx(rv,{...a,...s,ref:t})});z4.displayName=B4;var hU="AlertDialogAction",U4=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=ni(r);return n.jsx(nv,{...a,...s,ref:t})});U4.displayName=hU;var $4="AlertDialogCancel",q4=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,{cancelRef:a}=dU($4,r),o=ni(r),d=at(t,a);return n.jsx(nv,{...o,...s,ref:d})});q4.displayName=$4;var fU=({contentRef:e})=>{const t=`\`${dc}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${dc}\` by passing a \`${B4}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${dc}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return v.useEffect(()=>{var s;document.getElementById((s=e.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},mU=R4,pU=P4,gU=O4,V4=D4,W4=M4,H4=U4,G4=q4,X4=F4,K4=z4;const Jo=mU,Hf=pU,xU=gU,Y4=v.forwardRef(({className:e,...t},r)=>n.jsx(V4,{className:Be("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));Y4.displayName=V4.displayName;const Qi=v.forwardRef(({className:e,...t},r)=>n.jsxs(xU,{children:[n.jsx(Y4,{}),n.jsx(W4,{ref:r,className:Be("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Qi.displayName=W4.displayName;const el=({className:e,...t})=>n.jsx("div",{className:Be("flex flex-col space-y-2 text-center sm:text-left",e),...t});el.displayName="AlertDialogHeader";const Zi=({className:e,...t})=>n.jsx("div",{className:Be("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Zi.displayName="AlertDialogFooter";const tl=v.forwardRef(({className:e,...t},r)=>n.jsx(X4,{ref:r,className:Be("text-lg font-semibold",e),...t}));tl.displayName=X4.displayName;const rl=v.forwardRef(({className:e,...t},r)=>n.jsx(K4,{ref:r,className:Be("text-sm text-muted-foreground",e),...t}));rl.displayName=K4.displayName;const Ji=v.forwardRef(({className:e,...t},r)=>n.jsx(H4,{ref:r,className:Be(X1(),e),...t}));Ji.displayName=H4.displayName;const eo=v.forwardRef(({className:e,...t},r)=>n.jsx(G4,{ref:r,className:Be(X1({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));eo.displayName=G4.displayName;function vU({stories:e,initialIndex:t,open:r,onOpenChange:s,onStoryDeleted:a}){const[o,d]=v.useState(t),[u,f]=v.useState(!1),[p,x]=v.useState(0),[w,_]=v.useState([]),[j,N]=v.useState([]),[C,A]=v.useState(""),[S,k]=v.useState(!1),[b,T]=v.useState(!1),[O,L]=v.useState(!1),[R,M]=v.useState(0),[P,q]=v.useState(0),{user:G}=wt(),B=e[o],V=(B==null?void 0:B.user_id)===(G==null?void 0:G.id);v.useEffect(()=>{if(!B||!G)return;(async()=>{const{data:K}=await U.from("story_likes").select("user_id").eq("story_id",B.id);if(x((K==null?void 0:K.length)||0),V&&K&&K.length>0){const ae=K.map(se=>se.user_id),{data:de}=await U.from("profiles").select("user_id, display_name, avatar_url").in("user_id",ae);de&&_(de.map(se=>({user_name:se.display_name||"Usuário",user_avatar:se.avatar_url||""})))}else{const{data:ae}=await U.from("story_likes").select("*").eq("story_id",B.id).eq("user_id",G.id).single();f(!!ae)}})(),(async()=>{await U.from("story_views").insert({story_id:B.id,viewer_id:G.id}).select().single()})()},[B,G,V]),v.useEffect(()=>{if(!B)return;(async()=>{const{data:J}=await U.from("story_comments").select(`
          id,
          user_id,
          comment,
          created_at
        `).eq("story_id",B.id).order("created_at",{ascending:!0});if(J){const K=[...new Set(J.map(me=>me.user_id))],{data:ae}=await U.from("profiles").select("user_id, display_name, avatar_url").in("user_id",K),de=new Map((ae==null?void 0:ae.map(me=>[me.user_id,me]))||[]),se=J.map(me=>{var Re,ze;return{...me,user_name:((Re=de.get(me.user_id))==null?void 0:Re.display_name)||"Usuário",user_avatar:((ze=de.get(me.user_id))==null?void 0:ze.avatar_url)||""}});N(se)}})()},[B]);const ee=async()=>{!G||!B||(u?(await U.from("story_likes").delete().eq("story_id",B.id).eq("user_id",G.id),f(!1),x(H=>H-1)):(await U.from("story_likes").insert({story_id:B.id,user_id:G.id}),f(!0),x(H=>H+1)))},X=async()=>{if(!G||!B||!C.trim())return;const{error:H}=await U.from("story_comments").insert({story_id:B.id,user_id:G.id,comment:C});if(H){W.error("Erro ao comentar");return}if(B.user_id!==G.id){const K=JSON.stringify({type:"story_reply",story_image:B.image_url,reply:C});await U.from("user_messages").insert({from_user_id:G.id,to_user_id:B.user_id,content:K})}A(""),W.success("Comentário enviado!");const{data:J}=await U.from("story_comments").select(`
        id,
        user_id,
        comment,
        created_at
      `).eq("story_id",B.id).order("created_at",{ascending:!0});if(J){const K=[...new Set(J.map(me=>me.user_id))],{data:ae}=await U.from("profiles").select("user_id, display_name, avatar_url").in("user_id",K),de=new Map((ae==null?void 0:ae.map(me=>[me.user_id,me]))||[]),se=J.map(me=>{var Re,ze;return{...me,user_name:((Re=de.get(me.user_id))==null?void 0:Re.display_name)||"Usuário",user_avatar:((ze=de.get(me.user_id))==null?void 0:ze.avatar_url)||""}});N(se)}},le=()=>{o<e.length-1?(d(o+1),k(!1)):s(!1)},ue=()=>{o>0&&(d(o-1),k(!1))},oe=H=>{M(H.targetTouches[0].clientX)},te=H=>{q(H.targetTouches[0].clientX)},be=()=>{if(!R||!P)return;const H=R-P,J=H>50,K=H<-50;J?le():K&&ue(),M(0),q(0)},ve=async()=>{if(!(!G||!B))try{const{error:H}=await U.from("stories").delete().eq("id",B.id);if(H)throw H;const J=B.image_url.split("/").slice(-3).join("/");await U.storage.from("user-uploads").remove([J]),W.success("Story excluído!"),a==null||a(e.length<=1),T(!1),s(!1)}catch(H){console.error("Error deleting story:",H),W.error("Erro ao excluir story")}};return B?n.jsxs(zt,{open:r,onOpenChange:s,children:[n.jsx(Ft,{className:"max-w-lg p-0 bg-black border-0 h-[90vh]",children:n.jsxs("div",{className:"relative w-full h-full flex flex-col",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 z-10 p-4 bg-gradient-to-b from-black/70 to-transparent",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(Vt,{className:"h-10 w-10 border-2 border-white",children:[n.jsx(Yt,{src:B.user_avatar}),n.jsx(Wt,{children:B.user_name.charAt(0)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-white font-semibold text-sm",children:B.user_name}),n.jsx("p",{className:"text-white/70 text-xs",children:new Date(B.created_at).toLocaleDateString("pt-BR")})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[B.user_id===(G==null?void 0:G.id)&&n.jsxs(tf,{children:[n.jsx(rf,{asChild:!0,children:n.jsx(Y,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",children:n.jsx(p8,{className:"h-5 w-5"})})}),n.jsx(Ld,{align:"end",className:"bg-surface border-border",children:n.jsxs(Bn,{onClick:()=>T(!0),className:"text-red-500 focus:text-red-500 cursor-pointer",children:[n.jsx(Gn,{className:"h-4 w-4 mr-2"}),"Excluir story"]})})]}),n.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>s(!1),className:"text-white hover:bg-white/20",children:n.jsx(Jr,{className:"h-5 w-5"})})]})]})}),n.jsx("div",{className:"flex-1 bg-center bg-cover bg-no-repeat cursor-pointer select-none",style:{backgroundImage:`url(${B.image_url})`},onClick:H=>{const J=H.currentTarget.getBoundingClientRect();H.clientX-J.left<J.width/2?ue():le()},onTouchStart:oe,onTouchMove:te,onTouchEnd:be}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/70 to-transparent",children:V?n.jsxs("div",{className:"mb-3",children:[n.jsxs(Y,{variant:"ghost",size:"sm",onClick:()=>L(!O),className:"text-white hover:bg-white/20 gap-2",children:[n.jsx(Ta,{className:"h-5 w-5"}),n.jsxs("span",{children:[p," ",p===1?"curtida":"curtidas"]})]}),O&&p>0&&n.jsx("div",{className:"mt-2 bg-black/50 rounded-lg p-3 max-h-40",children:n.jsx(Zo,{className:"h-32",children:n.jsx("div",{className:"space-y-2",children:w.map((H,J)=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(Vt,{className:"h-8 w-8",children:[n.jsx(Yt,{src:H.user_avatar}),n.jsx(Wt,{children:H.user_name.charAt(0)})]}),n.jsx("span",{className:"text-white text-sm",children:H.user_name})]},J))})})})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[n.jsxs(Y,{variant:"ghost",size:"sm",onClick:ee,className:"text-white hover:bg-white/20 gap-2",children:[n.jsx(Ta,{className:`h-5 w-5 ${u?"fill-red-500 text-red-500":""}`}),n.jsx("span",{children:p})]}),n.jsxs(Y,{variant:"ghost",size:"sm",onClick:()=>k(!S),className:"text-white hover:bg-white/20 gap-2",children:[n.jsx(us,{className:"h-5 w-5"}),n.jsx("span",{children:j.length})]})]}),S&&n.jsx("div",{className:"bg-black/50 rounded-lg p-3 mb-3 max-h-40",children:n.jsx(Zo,{className:"h-32",children:j.length===0?n.jsx("p",{className:"text-white/70 text-sm text-center",children:"Nenhum comentário ainda"}):n.jsx("div",{className:"space-y-2",children:j.map(H=>n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Vt,{className:"h-6 w-6",children:[n.jsx(Yt,{src:H.user_avatar}),n.jsx(Wt,{children:H.user_name.charAt(0)})]}),n.jsx("div",{children:n.jsxs("p",{className:"text-white text-sm",children:[n.jsx("span",{className:"font-semibold",children:H.user_name})," ",H.comment]})})]},H.id))})})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(xe,{placeholder:"Enviar mensagem...",value:C,onChange:H=>A(H.target.value),onKeyPress:H=>H.key==="Enter"&&X(),className:"bg-white/10 border-white/20 text-white placeholder:text-white/50"}),n.jsx(Y,{onClick:X,disabled:!C.trim(),className:"bg-primary hover:bg-primary-glow",children:n.jsx(C1,{className:"h-4 w-4"})})]})]})})]})}),n.jsx(Jo,{open:b,onOpenChange:T,children:n.jsxs(Qi,{className:"bg-surface border-border",children:[n.jsxs(el,{children:[n.jsx(tl,{children:"Excluir story?"}),n.jsx(rl,{children:"Esta ação não pode ser desfeita. Seu story será excluído permanentemente."})]}),n.jsxs(Zi,{children:[n.jsx(eo,{children:"Cancelar"}),n.jsx(Ji,{onClick:ve,className:"bg-red-500 hover:bg-red-600 text-white",children:"Excluir"})]})]})})]}):null}function l0(e,t){const s=e.lat*Math.PI/180,a=t.lat*Math.PI/180,o=(t.lat-e.lat)*Math.PI/180,d=(t.lon-e.lon)*Math.PI/180,u=Math.sin(o/2)*Math.sin(o/2)+Math.cos(s)*Math.cos(a)*Math.sin(d/2)*Math.sin(d/2);return 6371e3*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))}function $b(e){return e<1e3?`${Math.round(e)}m`:e<1e4?`${(e/1e3).toFixed(1)}km`:`${Math.round(e/1e3)}km`}function qb({mode:e}){var ve,H;const[t,r]=v.useState([]),[s,a]=v.useState(null),[o,d]=v.useState(!1),[u,f]=v.useState(!1),[p,x]=v.useState([]),[w,_]=v.useState(0),[j,N]=v.useState(!1),[C,A]=v.useState(!1),[S,k]=v.useState(null),[b,T]=v.useState(!1),[O,L]=v.useState("user"),[R,M]=v.useState(null),{user:P}=wt();v.useEffect(()=>{if(!P)return;q();const J=U.channel("stories-changes").on("postgres_changes",{event:"*",schema:"public",table:"stories"},()=>{q()}).subscribe();return()=>{U.removeChannel(J)}},[P]);const q=async()=>{if(!P)return;let J=[P.id],K=[];if(e==="nearby"){const{data:we}=await U.from("profiles").select("latitude, longitude").eq("user_id",P.id).single();if(!(we!=null&&we.latitude)||!(we!=null&&we.longitude)){r([]),a(null);return}const{data:Xe}=await U.from("profiles").select("user_id, display_name, avatar_url, latitude, longitude").not("latitude","is",null).not("longitude","is",null);if(!Xe){r([]),a(null);return}const _e=Xe.filter(ce=>ce.user_id===P.id?!0:l0({lat:we.latitude,lon:we.longitude},{lat:ce.latitude,lon:ce.longitude})<=100).map(ce=>ce.user_id);J=_e;const{data:Qe}=await U.from("profiles").select("user_id, story_visible_to").in("user_id",_e);K=(Qe==null?void 0:Qe.filter(ce=>ce.story_visible_to==="both"||ce.story_visible_to==="nearby_only").map(ce=>ce.user_id))||[],K.includes(P.id)||K.push(P.id)}else if(e==="friends"){const{data:we}=await U.from("friendships").select("user_id, friend_id").eq("status","accepted").or(`user_id.eq.${P.id},friend_id.eq.${P.id}`),Xe=(we==null?void 0:we.map(Qe=>Qe.user_id===P.id?Qe.friend_id:Qe.user_id))||[];J=[P.id,...Xe];const{data:_e}=await U.from("profiles").select("user_id, story_visible_to").in("user_id",J);K=(_e==null?void 0:_e.filter(Qe=>Qe.story_visible_to==="both"||Qe.story_visible_to==="friends_only").map(Qe=>Qe.user_id))||[],K.includes(P.id)||K.push(P.id)}if(J.length===0||K.length===0){r([]),a(null);return}const{data:ae}=await U.from("stories").select("*").in("user_id",K).gt("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});if(!ae||ae.length===0){r([]),a(null);return}const{data:de}=await U.from("story_views").select("story_id").eq("viewer_id",P.id),se=new Set((de==null?void 0:de.map(we=>we.story_id))||[]),me=new Map;ae.forEach(we=>{me.has(we.user_id)||me.set(we.user_id,[]),me.get(we.user_id).push(we)});const{data:Re}=await U.from("profiles").select("user_id, display_name, avatar_url").in("user_id",Array.from(me.keys())),ze=new Map((Re==null?void 0:Re.map(we=>[we.user_id,we]))||[]),ye=[];let Ne=null;me.forEach((we,Xe)=>{const _e=ze.get(Xe),Qe=we.some(Se=>!se.has(Se.id)),ce={user_id:Xe,user_name:(_e==null?void 0:_e.display_name)||"Usuário",user_avatar:(_e==null?void 0:_e.avatar_url)||"",stories:we.map(Se=>({...Se,user_name:(_e==null?void 0:_e.display_name)||"Usuário",user_avatar:(_e==null?void 0:_e.avatar_url)||""})),hasUnviewed:Qe};Xe===P.id?Ne=ce:ye.push(ce)}),ye.sort((we,Xe)=>we.hasUnviewed&&!Xe.hasUnviewed?-1:!we.hasUnviewed&&Xe.hasUnviewed?1:0),r(ye),a(Ne)},G=async J=>{if(!P||!J.target.files||J.target.files.length===0)return;const K=J.target.files[0];S&&(S.getTracks().forEach(ae=>ae.stop()),k(null)),A(!1),await te(K),J.target.value=""},B=async()=>{try{const J=await navigator.mediaDevices.getUserMedia({video:{facingMode:O},audio:!1});k(J),A(!0),N(!1),T(!1)}catch(J){console.error("Error accessing camera:",J),W.error("Erro ao acessar a câmera")}},V=async()=>{S&&S.getTracks().forEach(K=>K.stop());const J=O==="user"?"environment":"user";L(J);try{const K=await navigator.mediaDevices.getUserMedia({video:{facingMode:J},audio:!1});k(K)}catch(K){console.error("Error switching camera:",K),W.error("Erro ao trocar câmera")}},ee=async()=>{if(S)try{const J=document.getElementById("camera-preview");if(!J)return;const K=document.createElement("canvas");K.width=J.videoWidth,K.height=J.videoHeight;const ae=K.getContext("2d");O==="user"&&(ae==null||ae.translate(K.width,0),ae==null||ae.scale(-1,1)),ae==null||ae.drawImage(J,0,0);const de=K.toDataURL("image/jpeg",.95);M(de)}catch(J){console.error("Error capturing photo:",J),W.error("Erro ao capturar foto")}},X=()=>{M(null)},le=async()=>{if(R)try{const K=await(await fetch(R)).blob(),ae=new File([K],`camera-${Date.now()}.jpg`,{type:"image/jpeg"});S&&(S.getTracks().forEach(de=>de.stop()),k(null)),A(!1),M(null),await te(ae)}catch(J){console.error("Error posting photo:",J),W.error("Erro ao postar foto")}},ue=()=>{const J=document.getElementById("story-upload");J&&J.click()},oe=()=>{S&&(S.getTracks().forEach(J=>J.stop()),k(null)),A(!1),M(null)};v.useEffect(()=>()=>{S&&S.getTracks().forEach(J=>J.stop())},[S]);const te=async J=>{if(P){if(J.size>5*1024*1024){W.error("A imagem deve ter no máximo 5MB");return}d(!0);try{const K=J.name.split(".").pop(),ae=`${Date.now()}.${K}`,de=`stories/${P.id}/${ae}`,{error:se}=await U.storage.from("user-uploads").upload(de,J);if(se)throw se;const{data:{publicUrl:me}}=U.storage.from("user-uploads").getPublicUrl(de),{data:Re,error:ze}=await U.from("stories").insert({user_id:P.id,image_url:me}).select().single();if(ze)throw ze;a(ye=>{var Xe,_e;const Ne=ye??{user_id:P.id,user_name:((Xe=P==null?void 0:P.user_metadata)==null?void 0:Xe.display_name)||"Você",user_avatar:((_e=P==null?void 0:P.user_metadata)==null?void 0:_e.avatar_url)||"",stories:[],hasUnviewed:!0},we=[{id:(Re==null?void 0:Re.id)||`${Date.now()}`,user_id:P.id,image_url:me,created_at:(Re==null?void 0:Re.created_at)||new Date().toISOString(),user_name:Ne.user_name,user_avatar:Ne.user_avatar},...Ne.stories];return{...Ne,stories:we,hasUnviewed:!0}}),W.success("Story publicado!"),q()}catch(K){console.error("Error uploading story:",K),W.error("Erro ao publicar story")}finally{d(!1)}}},be=(J,K=0)=>{x(J),_(K),f(!0)};return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"bg-card rounded-lg p-4 shadow-card mb-4",children:n.jsx(Zo,{className:"w-full",children:n.jsxs("div",{className:"flex gap-3 pb-2",children:[n.jsxs("div",{className:"flex flex-col items-center gap-1 min-w-[70px]",children:[n.jsx("div",{className:"relative",children:s&&s.stories.length>0?n.jsx("div",{className:"rounded-full p-[3px] bg-green-500 cursor-pointer",onClick:()=>T(!0),children:n.jsx("div",{className:"bg-background rounded-full p-[2px]",children:n.jsxs(Vt,{className:"h-14 w-14",children:[n.jsx(Yt,{src:(ve=P==null?void 0:P.user_metadata)==null?void 0:ve.avatar_url}),n.jsx(Wt,{children:"Eu"})]})})}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-full p-[3px] bg-gray-600",children:n.jsx("div",{className:"bg-background rounded-full p-[2px]",children:n.jsx("div",{onClick:B,className:"cursor-pointer",children:n.jsxs(Vt,{className:"h-14 w-14",children:[n.jsx(Yt,{src:(H=P==null?void 0:P.user_metadata)==null?void 0:H.avatar_url}),n.jsx(Wt,{children:"Eu"})]})})})}),n.jsx("div",{className:"absolute bottom-0 right-0 bg-primary rounded-full p-1 z-10 cursor-pointer",onClick:B,children:o?n.jsx(Ia,{className:"h-3 w-3 text-white animate-spin"}):n.jsx(zc,{className:"h-3 w-3 text-white"})})]})}),n.jsx("span",{className:"text-xs text-muted-foreground text-center line-clamp-1",children:"Seu story"})]}),n.jsx("input",{id:"story-upload",type:"file",accept:"image/jpeg,image/png,image/jpg,image/webp",className:"hidden",onChange:G,disabled:o}),t.map(J=>n.jsxs("div",{className:"flex flex-col items-center gap-1 min-w-[70px] cursor-pointer",onClick:()=>be(J.stories,0),children:[n.jsx("div",{className:`rounded-full p-[3px] ${J.hasUnviewed?"bg-gradient-to-tr from-yellow-400 to-pink-600":"bg-gray-600"}`,children:n.jsx("div",{className:"bg-background rounded-full p-[2px]",children:n.jsxs(Vt,{className:"h-14 w-14",children:[n.jsx(Yt,{src:J.user_avatar}),n.jsx(Wt,{children:J.user_name.charAt(0)})]})})}),n.jsx("span",{className:"text-xs text-muted-foreground text-center line-clamp-1 max-w-[70px]",children:J.user_name})]},J.user_id))]})})}),p.length>0&&n.jsx(vU,{stories:p,initialIndex:w,open:u,onOpenChange:f,onStoryDeleted:J=>{J&&a(null),x([]),q()}}),n.jsx(zt,{open:b,onOpenChange:T,children:n.jsxs(Ft,{className:"bg-surface border-border max-w-sm",children:[n.jsx(gr,{children:n.jsx(xr,{children:"Seu Story"})}),n.jsxs("div",{className:"space-y-3 py-4",children:[n.jsxs(Y,{onClick:()=>{T(!1),s&&be(s.stories,0)},className:"w-full h-14 text-base",variant:"outline",children:[n.jsx(Ko,{className:"h-5 w-5 mr-3"}),"Ver Story"]}),n.jsxs(Y,{onClick:()=>{T(!1),B()},className:"w-full h-14 text-base",variant:"outline",children:[n.jsx(Cn,{className:"h-5 w-5 mr-3"}),"Tirar Nova Foto"]})]})]})}),n.jsx(zt,{open:C,onOpenChange:oe,children:n.jsx(Ft,{className:"max-w-full w-full h-full p-0 m-0 overflow-hidden bg-black border-none",children:n.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[R?n.jsx("img",{src:R,alt:"Captured",className:"w-full h-full object-contain"}):n.jsx("video",{id:"camera-preview",autoPlay:!0,playsInline:!0,muted:!0,ref:J=>{J&&S&&(J.srcObject=S)},className:"w-full h-full object-cover",style:{transform:O==="user"?"scaleX(-1)":"none"}}),n.jsxs("div",{className:"absolute top-0 left-0 right-0 flex justify-between items-center p-4 bg-gradient-to-b from-black/50 to-transparent",children:[n.jsx("button",{onClick:oe,className:"p-2 rounded-full hover:bg-white/10 transition-smooth",children:n.jsx(Jr,{className:"h-6 w-6 text-white"})}),!R&&n.jsx("button",{onClick:V,className:"p-2 rounded-full hover:bg-white/10 transition-smooth",children:n.jsx(Sj,{className:"h-6 w-6 text-white"})})]}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 pb-8 bg-gradient-to-t from-black/70 to-transparent",children:R?n.jsxs("div",{className:"flex justify-center items-center gap-8 px-8",children:[n.jsx(Y,{onClick:X,size:"lg",variant:"ghost",className:"rounded-full w-16 h-16 bg-white/10 hover:bg-white/20 border border-white/30",children:n.jsx(Jr,{className:"h-6 w-6 text-white"})}),n.jsx(Y,{onClick:le,size:"lg",className:"rounded-full w-16 h-16 bg-primary hover:bg-primary-glow",disabled:o,children:o?n.jsx(Ia,{className:"h-6 w-6 animate-spin"}):n.jsx(Os,{className:"h-6 w-6"})})]}):n.jsxs("div",{className:"flex justify-center items-center gap-8 px-8",children:[n.jsx("button",{onClick:ue,className:"w-12 h-12 rounded-lg border-2 border-white/50 bg-white/10 hover:bg-white/20 transition-smooth flex items-center justify-center",children:n.jsx(Hi,{className:"h-6 w-6 text-white"})}),n.jsx("button",{onClick:ee,className:"w-20 h-20 rounded-full bg-white hover:bg-white/90 transition-smooth flex items-center justify-center",children:n.jsx("div",{className:"w-16 h-16 rounded-full border-4 border-black"})}),n.jsx("div",{className:"w-12 h-12"})," "]})})]})})})]})}function Zm(e){const t=v.useRef({value:e,previous:e});return v.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var bv="Radio",[wU,Q4]=qr(bv),[yU,bU]=wU(bv),Z4=v.forwardRef((e,t)=>{const{__scopeRadio:r,name:s,checked:a=!1,required:o,disabled:d,value:u="on",onCheck:f,form:p,...x}=e,[w,_]=v.useState(null),j=at(t,A=>_(A)),N=v.useRef(!1),C=w?p||!!w.closest("form"):!0;return n.jsxs(yU,{scope:r,checked:a,disabled:d,children:[n.jsx(He.button,{type:"button",role:"radio","aria-checked":a,"data-state":r3(a),"data-disabled":d?"":void 0,disabled:d,value:u,...x,ref:j,onClick:De(e.onClick,A=>{a||f==null||f(),C&&(N.current=A.isPropagationStopped(),N.current||A.stopPropagation())})}),C&&n.jsx(t3,{control:w,bubbles:!N.current,name:s,value:u,checked:a,required:o,disabled:d,form:p,style:{transform:"translateX(-100%)"}})]})});Z4.displayName=bv;var J4="RadioIndicator",e3=v.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:s,...a}=e,o=bU(J4,r);return n.jsx(Vr,{present:s||o.checked,children:n.jsx(He.span,{"data-state":r3(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:t})})});e3.displayName=J4;var _U="RadioBubbleInput",t3=v.forwardRef(({__scopeRadio:e,control:t,checked:r,bubbles:s=!0,...a},o)=>{const d=v.useRef(null),u=at(d,o),f=Zm(r),p=bm(t);return v.useEffect(()=>{const x=d.current;if(!x)return;const w=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(w,"checked").set;if(f!==r&&j){const N=new Event("click",{bubbles:s});j.call(x,r),x.dispatchEvent(N)}},[f,r,s]),n.jsx(He.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:u,style:{...a.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});t3.displayName=_U;function r3(e){return e?"checked":"unchecked"}var NU=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Jm="RadioGroup",[jU]=qr(Jm,[Xc,Q4]),n3=Xc(),s3=Q4(),[CU,EU]=jU(Jm),a3=v.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:s,defaultValue:a,value:o,required:d=!1,disabled:u=!1,orientation:f,dir:p,loop:x=!0,onValueChange:w,..._}=e,j=n3(r),N=Gc(p),[C,A]=sa({prop:o,defaultProp:a??null,onChange:w,caller:Jm});return n.jsx(CU,{scope:r,name:s,required:d,disabled:u,value:C,onValueChange:A,children:n.jsx(uv,{asChild:!0,...j,orientation:f,dir:N,loop:x,children:n.jsx(He.div,{role:"radiogroup","aria-required":d,"aria-orientation":f,"data-disabled":u?"":void 0,dir:N,..._,ref:t})})})});a3.displayName=Jm;var i3="RadioGroupItem",o3=v.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:s,...a}=e,o=EU(i3,r),d=o.disabled||s,u=n3(r),f=s3(r),p=v.useRef(null),x=at(t,p),w=o.value===a.value,_=v.useRef(!1);return v.useEffect(()=>{const j=C=>{NU.includes(C.key)&&(_.current=!0)},N=()=>_.current=!1;return document.addEventListener("keydown",j),document.addEventListener("keyup",N),()=>{document.removeEventListener("keydown",j),document.removeEventListener("keyup",N)}},[]),n.jsx(hv,{asChild:!0,...u,focusable:!d,active:w,children:n.jsx(Z4,{disabled:d,required:o.required,checked:w,...f,...a,name:o.name,ref:x,onCheck:()=>o.onValueChange(a.value),onKeyDown:De(j=>{j.key==="Enter"&&j.preventDefault()}),onFocus:De(a.onFocus,()=>{var j;_.current&&((j=p.current)==null||j.click())})})})});o3.displayName=i3;var SU="RadioGroupIndicator",l3=v.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...s}=e,a=s3(r);return n.jsx(e3,{...a,...s,ref:t})});l3.displayName=SU;var c3=a3,d3=o3,AU=l3;const Ui=v.forwardRef(({className:e,...t},r)=>n.jsx(c3,{className:Be("grid gap-2",e),...t,ref:r}));Ui.displayName=c3.displayName;const an=v.forwardRef(({className:e,...t},r)=>n.jsx(d3,{ref:r,className:Be("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:n.jsx(AU,{className:"flex items-center justify-center",children:n.jsx(yj,{className:"h-2.5 w-2.5 fill-current text-current"})})}));an.displayName=d3.displayName;function kU(){const[e,t]=v.useState(!1),[r,s]=v.useState("both"),[a,o]=v.useState(!1),{user:d}=wt();v.useEffect(()=>{e&&d&&u()},[e,d]);const u=async()=>{if(!d)return;const{data:p}=await U.from("profiles").select("story_visible_to").eq("user_id",d.id).single();p&&s(p.story_visible_to||"both")},f=async()=>{if(d){o(!0);try{const{error:p}=await U.from("profiles").update({story_visible_to:r}).eq("user_id",d.id);if(p)throw p;W.success("Configurações salvas!"),t(!1)}catch(p){console.error("Error saving settings:",p),W.error("Erro ao salvar configurações")}finally{o(!1)}}};return n.jsxs(zt,{open:e,onOpenChange:t,children:[n.jsx(OE,{asChild:!0,children:n.jsx(Y,{variant:"ghost",size:"icon",children:n.jsx(Uo,{className:"h-5 w-5"})})}),n.jsxs(Ft,{className:"bg-surface border-border",children:[n.jsxs(gr,{children:[n.jsx(xr,{children:"Configurações de Stories"}),n.jsx(as,{children:"Escolha quem pode ver seus stories"})]}),n.jsx("div",{className:"space-y-4 py-4",children:n.jsxs(Ui,{value:r,onValueChange:s,children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(an,{value:"both",id:"both"}),n.jsx(ie,{htmlFor:"both",className:"cursor-pointer",children:"Todos (amigos e pessoas próximas)"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(an,{value:"friends_only",id:"friends_only"}),n.jsx(ie,{htmlFor:"friends_only",className:"cursor-pointer",children:"Apenas amigos"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(an,{value:"nearby_only",id:"nearby_only"}),n.jsx(ie,{htmlFor:"nearby_only",className:"cursor-pointer",children:"Apenas pessoas próximas"})]})]})}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(Y,{variant:"outline",onClick:()=>t(!1),children:"Cancelar"}),n.jsx(Y,{onClick:f,disabled:a,children:a?"Salvando...":"Salvar"})]})]})]})}const TU=({person:e,handleLike:t,handleMessage:r,likedUsers:s,unreadMessages:a,onFriendshipChange:o})=>{const{friendshipStatus:d,loading:u,addFriend:f,removeFriend:p}=qB(e.user_id),[x,w]=v.useState(null),_=async()=>{d==="accepted"?await p():await f(),o()};return n.jsxs("div",{className:"bg-card rounded-lg p-4 shadow-card",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"avatar-story cursor-pointer",onClick:()=>w(e.avatar),children:n.jsxs(Vt,{className:"h-12 w-12",children:[n.jsx(Yt,{src:e.avatar,alt:e.name}),n.jsx(Wt,{className:"bg-surface",children:e.name.charAt(0)})]})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h3",{className:"font-medium text-foreground",children:e.name}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:["• ",e.distance]}),e.isFriend&&n.jsx(ct,{className:"bg-green-500/20 text-green-400 border-0 text-xs",children:"🤝 Amigo"})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[n.jsxs(ct,{className:`${e.interest==="curtição"?"bg-yellow-500/20 text-yellow-400":e.interest==="namoro"?"bg-red-500/20 text-red-400":e.interest==="amizade"?"bg-blue-500/20 text-blue-400":"bg-green-500/20 text-green-400"} border-0`,children:[n.jsx("span",{className:"mr-1",children:e.interest==="curtição"?"💛":e.interest==="namoro"?"💕":e.interest==="amizade"?"🤝":"💼"}),e.interest]}),n.jsxs(ct,{className:`${e.relationship_status==="solteiro"?"bg-green-500/20 text-green-400":e.relationship_status==="namorando"?"bg-pink-500/20 text-pink-400":e.relationship_status==="casado"?"bg-purple-500/20 text-purple-400":e.relationship_status==="relacionamento_aberto"?"bg-orange-500/20 text-orange-400":"bg-gray-500/20 text-gray-400"} border-0 text-xs`,children:[n.jsx("span",{className:"mr-1",children:e.relationship_status==="solteiro"?"😊":e.relationship_status==="namorando"?"💑":e.relationship_status==="casado"?"💍":e.relationship_status==="relacionamento_aberto"?"🌈":"🤐"}),e.relationship_status==="solteiro"?"Solteiro(a)":e.relationship_status==="namorando"?"Namorando":e.relationship_status==="casado"?"Casado(a)":e.relationship_status==="relacionamento_aberto"?"Relacionamento Aberto":"Não informado"]})]}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2 line-clamp-2",children:e.note}),n.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-muted-foreground",children:[n.jsx(Tt,{className:"h-3 w-3"}),n.jsx("span",{children:e.event_name})]}),n.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[e.instagram&&n.jsxs("a",{href:e.instagram,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm text-primary hover:text-primary-glow transition-smooth",children:[n.jsx(Gi,{className:"h-4 w-4"}),n.jsx("span",{children:"Instagram"})]}),e.phone&&n.jsxs("a",{href:`https://wa.me/${e.phone.replace(/\D/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm text-primary hover:text-primary-glow transition-smooth",children:[n.jsx(Bc,{className:"h-4 w-4"}),n.jsx("span",{children:"WhatsApp"})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx(Y,{variant:d==="accepted"?"default":"outline",size:"sm",onClick:_,disabled:u,className:d==="accepted"?"text-green-400 bg-green-500/20 border-green-500":"",children:d==="accepted"?n.jsx(kj,{className:"h-4 w-4"}):n.jsx(S1,{className:"h-4 w-4"})}),n.jsx(Y,{variant:s.has(e.user_id)?"default":"outline",size:"sm",onClick:()=>t(e.user_id),children:n.jsx(Ta,{className:"h-4 w-4",fill:s.has(e.user_id)?"currentColor":"none"})}),n.jsxs(Y,{variant:"outline",size:"sm",onClick:()=>r(e),className:"relative",children:[n.jsx(us,{className:"h-4 w-4"}),a.get(e.user_id)&&a.get(e.user_id)>0&&n.jsx(ct,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 p-0 flex items-center justify-center text-xs rounded-full",children:a.get(e.user_id)})]})]})]}),n.jsx(zt,{open:!!x,onOpenChange:()=>w(null),children:n.jsxs(Ft,{className:"max-w-2xl p-0 overflow-hidden bg-background/95 backdrop-blur-lg border border-border",children:[n.jsx("button",{onClick:()=>w(null),className:"absolute top-4 right-4 z-50 p-2 rounded-full bg-surface/80 hover:bg-surface transition-smooth",children:n.jsx(Jr,{className:"h-5 w-5 text-foreground"})}),x&&n.jsx("img",{src:x,alt:"Profile",className:"w-full h-auto max-h-[80vh] object-contain"})]})})]})};function c0({onBack:e}){const[t,r]=v.useState("nearby"),[s,a]=v.useState(!1),[o,d]=v.useState([]),[u,f]=v.useState([]),[p,x]=v.useState(!0),[w,_]=v.useState(new Set),[j,N]=v.useState(!1),[C,A]=v.useState(null),[S,k]=v.useState(new Map),[b,T]=v.useState(null),[O,L]=v.useState(null),[R,M]=v.useState("curtição"),[P,q]=v.useState(""),[G,B]=v.useState(!0),{user:V}=wt();_t();const{position:ee,error:X}=K1({watch:s,enableHighAccuracy:!0,timeout:27e3,maximumAge:3e4});v.useEffect(()=>{if(!V||!s||!ee)return;(async()=>{T(ee),L(null),await U.from("profiles").update({latitude:ee.lat,longitude:ee.lon,location_updated_at:new Date().toISOString()}).eq("user_id",V.id)})()},[V,s,ee]),v.useEffect(()=>{X&&L(X)},[X]),v.useEffect(()=>{(async()=>{if(!V)return;const{data:H,error:J}=await U.from("profiles").select("find_friends_visible, interest, notes, notes_visible").eq("user_id",V.id).single();H&&!J&&(a(H.find_friends_visible??!1),M(H.interest||"curtição"),q(H.notes||""),B(H.notes_visible??!0))})()},[V]);const le=async()=>{if(!V){W.error("Faça login para usar esta funcionalidade");return}const ve=!s;a(ve);const{error:H}=await U.from("profiles").update({find_friends_visible:ve}).eq("user_id",V.id);H?(console.error("Error updating visibility:",H),W.error("Erro ao atualizar visibilidade"),a(!ve)):W.success(ve?"Você está visível para outros":"Você está invisível")};v.useEffect(()=>{(async()=>{if(!V)return;const{data:H,error:J}=await U.from("user_likes").select("to_user_id").eq("from_user_id",V.id);H&&!J&&_(new Set(H.map(K=>K.to_user_id)))})()},[V]),v.useEffect(()=>{(async()=>{if(V)try{const{data:H,error:J}=await U.from("friendships").select("user_id, friend_id").eq("status","accepted").or(`user_id.eq.${V.id},friend_id.eq.${V.id}`);if(J){console.error("Error fetching friendships:",J);return}const K=(H==null?void 0:H.map(me=>me.user_id===V.id?me.friend_id:me.user_id))||[];if(K.length===0){f([]);return}const{data:ae,error:de}=await U.from("profiles").select("user_id, display_name, avatar_url, notes, instagram_url, phone, interest, relationship_status, latitude, longitude").in("user_id",K);if(de){console.error("Error fetching friend profiles:",de);return}const se=(ae||[]).map(me=>{let Re="Amigo";if(me.latitude&&me.longitude&&b){const ze=l0(b,{lat:me.latitude,lon:me.longitude});Re=$b(ze)}return{id:me.user_id,user_id:me.user_id,name:me.display_name||"Usuário",avatar:me.avatar_url||"",interest:me.interest||"curtição",note:me.notes||"Seu amigo",distance:Re,instagram:me.instagram_url||"",phone:me.phone||null,event_name:"Amigo",relationship_status:me.relationship_status||"preferencia_nao_informar",isFriend:!0}});if(f(se),se.length>0){const{data:me}=await U.from("user_messages").select("from_user_id").eq("to_user_id",V.id).in("from_user_id",K).eq("read",!1);if(me){const Re=new Map;me.forEach(ze=>{Re.set(ze.from_user_id,(Re.get(ze.from_user_id)||0)+1)}),k(ze=>new Map([...ze,...Re]))}}}catch(H){console.error("Error fetching friends:",H)}})()},[V]),v.useEffect(()=>{let ve=null;return(async()=>{if(!V){x(!1);return}if(!s){d([]),x(!1);return}if(!b){d([]),x(!1);return}try{const{data:J,error:K}=await U.from("friendships").select("user_id, friend_id").eq("status","accepted").or(`user_id.eq.${V.id},friend_id.eq.${V.id}`);K&&console.error("Error fetching friendships:",K);const ae=(J==null?void 0:J.map(Ne=>Ne.user_id===V.id?Ne.friend_id:Ne.user_id))||[],de=new Date(Date.now()-2*60*60*1e3).toISOString(),{data:se,error:me}=await U.from("profiles").select("user_id, display_name, avatar_url, notes, notes_visible, find_friends_visible, instagram_url, phone, interest, relationship_status, latitude, longitude, location_updated_at").eq("find_friends_visible",!0).neq("user_id",V.id).not("latitude","is",null).not("longitude","is",null).gte("location_updated_at",de);if(me){console.error("Error fetching profiles:",me),x(!1);return}if(!se||se.length===0){d([]),x(!1);return}const Re=se.map(Ne=>{const we=l0(b,{lat:Ne.latitude,lon:Ne.longitude});return{profile:Ne,distance:we}}).filter(({distance:Ne})=>Ne<=5e3).sort((Ne,we)=>Ne.distance-we.distance).map(({profile:Ne,distance:we})=>({id:Ne.user_id,user_id:Ne.user_id,name:Ne.display_name||"Usuário",avatar:Ne.avatar_url||"",interest:Ne.interest||"curtição",note:Ne.notes||"Está próximo de você",distance:$b(we),instagram:Ne.instagram_url||"",phone:Ne.phone||null,event_name:"Próximo",relationship_status:Ne.relationship_status||"preferencia_nao_informar",isFriend:ae.includes(Ne.user_id)}));d(Re);const ze=Re.map(Ne=>Ne.user_id);if(ze.length>0){const{data:Ne}=await U.from("user_messages").select("from_user_id").eq("to_user_id",V.id).in("from_user_id",ze).eq("read",!1);if(Ne){const we=new Map;Ne.forEach(Xe=>{we.set(Xe.from_user_id,(we.get(Xe.from_user_id)||0)+1)}),k(we)}}const ye=Re.map(Ne=>Ne.user_id);ve=U.channel("profiles-and-messages-updates").on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles"},Ne=>{const we=Ne.new;ye.includes(we.user_id)&&d(Xe=>Xe.map(_e=>_e.user_id===we.user_id?{..._e,note:we.notes||_e.note,relationship_status:we.relationship_status||_e.relationship_status,interest:we.interest||_e.interest}:_e))}).on("postgres_changes",{event:"INSERT",schema:"public",table:"user_messages"},Ne=>{const we=Ne.new;we.to_user_id===V.id&&ye.includes(we.from_user_id)&&k(Xe=>{const _e=new Map(Xe);return _e.set(we.from_user_id,(_e.get(we.from_user_id)||0)+1),_e})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"user_messages"},Ne=>{const we=Ne.new;we.read&&we.to_user_id===V.id&&U.from("user_messages").select("id").eq("to_user_id",V.id).eq("from_user_id",we.from_user_id).eq("read",!1).then(({data:Xe})=>{k(_e=>{const Qe=new Map(_e);return Xe&&Xe.length>0?Qe.set(we.from_user_id,Xe.length):Qe.delete(we.from_user_id),Qe})})}).subscribe()}catch(J){console.error("Error:",J)}finally{x(!1)}})(),()=>{ve&&U.removeChannel(ve)}},[V,s,b]);const ue=async ve=>{if(!V){W.error("Faça login para curtir perfis");return}try{if(w.has(ve)){const{error:J}=await U.from("user_likes").delete().eq("from_user_id",V.id).eq("to_user_id",ve);if(J)throw J;_(K=>{const ae=new Set(K);return ae.delete(ve),ae}),W.success("Curtida removida")}else{const{error:J}=await U.from("user_likes").insert({from_user_id:V.id,to_user_id:ve});if(J)throw J;_(K=>new Set(K).add(ve)),W.success("Perfil curtido! A pessoa receberá uma notificação")}}catch(H){console.error("Error liking user:",H),W.error("Erro ao curtir perfil")}},oe=async ve=>{A(ve),N(!0),k(H=>{const J=new Map(H);return J.delete(ve.user_id),J})},te=async()=>{if(!V)return;const{data:ve,error:H}=await U.from("friendships").select("user_id, friend_id").eq("status","accepted").or(`user_id.eq.${V.id},friend_id.eq.${V.id}`);if(H){console.error("Error fetching friendships:",H);return}const J=(ve==null?void 0:ve.map(se=>se.user_id===V.id?se.friend_id:se.user_id))||[];if(J.length===0){f([]),d(se=>se.map(me=>({...me,isFriend:!1})));return}const{data:K,error:ae}=await U.from("profiles").select("user_id, display_name, avatar_url, notes, instagram_url, phone, interest, relationship_status, latitude, longitude").in("user_id",J);if(ae){console.error("Error fetching friend profiles:",ae);return}const de=(K||[]).map(se=>{let me="Amigo";if(se.latitude&&se.longitude&&b){const ze=b.lat*Math.PI/180,ye=se.latitude*Math.PI/180,Ne=(se.latitude-b.lat)*Math.PI/180,we=(se.longitude-b.lon)*Math.PI/180,Xe=Math.sin(Ne/2)*Math.sin(Ne/2)+Math.cos(ze)*Math.cos(ye)*Math.sin(we/2)*Math.sin(we/2),Qe=6371e3*(2*Math.atan2(Math.sqrt(Xe),Math.sqrt(1-Xe)));Qe<1e3?me=`${Math.round(Qe)}m`:me=`${(Qe/1e3).toFixed(1)}km`}return{id:se.user_id,user_id:se.user_id,name:se.display_name||"Usuário",avatar:se.avatar_url||"",interest:se.interest||"curtição",note:se.notes||"Seu amigo",distance:me,instagram:se.instagram_url||"",phone:se.phone||null,event_name:"Amigo",relationship_status:se.relationship_status||"preferencia_nao_informar",isFriend:!0}});f(de),d(se=>se.map(me=>({...me,isFriend:J.includes(me.user_id)})))},be=t==="nearby"?o:u;return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsxs("header",{className:"sticky top-0 z-40 bg-background/80 backdrop-blur-md border-b border-border",children:[n.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 max-w-md mx-auto",children:[n.jsx(Y,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(mt,{className:"h-5 w-5"})}),n.jsx("div",{className:"flex-1",children:n.jsx("h1",{className:"font-bold text-foreground",children:"Conectar"})}),n.jsx(kU,{})]}),n.jsxs("div",{className:"flex gap-2 px-4 pb-3 max-w-md mx-auto",children:[n.jsxs(Y,{variant:t==="nearby"?"default":"outline",className:"flex-1 rounded-full",onClick:()=>r("nearby"),children:[n.jsx(Tt,{className:"h-4 w-4 mr-2"}),"Próximos"]}),n.jsxs(Y,{variant:t==="friends"?"default":"outline",className:"flex-1 rounded-full",onClick:()=>r("friends"),children:[n.jsx(tr,{className:"h-4 w-4 mr-2"}),"Amigos"]})]})]}),n.jsxs("div",{className:"px-4 py-6 pb-24 max-w-md mx-auto",children:[t==="nearby"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"mb-4",children:n.jsxs(Y,{variant:s?"default":"outline",onClick:le,className:"w-full h-11",children:[n.jsx(Ko,{className:"h-4 w-4 mr-2"}),s?"Visível":"Ser Visto"]})}),s&&n.jsxs("div",{className:"mb-4 p-3 bg-card rounded-lg border border-border",children:[n.jsx("h3",{className:"font-medium text-sm text-foreground mb-2",children:"Como você quer aparecer"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{children:n.jsxs("select",{className:"w-full px-3 py-1.5 bg-surface border border-border rounded-lg text-sm text-foreground",value:R,onChange:async ve=>{V&&(M(ve.target.value),await U.from("profiles").update({interest:ve.target.value}).eq("user_id",V.id),W.success("Interesse atualizado"))},children:[n.jsx("option",{value:"curtição",children:"💛 Curtição"}),n.jsx("option",{value:"namoro",children:"💕 Namoro"}),n.jsx("option",{value:"amizade",children:"🤝 Amizade"}),n.jsx("option",{value:"network",children:"💼 Network"})]})}),n.jsx("div",{children:n.jsx("textarea",{className:"w-full px-3 py-1.5 bg-surface border border-border rounded-lg text-sm text-foreground resize-none",rows:2,placeholder:"Escreva algo sobre você...",value:P,onChange:ve=>q(ve.target.value),onBlur:async ve=>{V&&(await U.from("profiles").update({notes:ve.target.value}).eq("user_id",V.id),W.success("Notas atualizadas"))}})})]})]}),n.jsxs("div",{className:"mb-6 p-4 bg-surface rounded-lg border border-primary/20",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Tt,{className:"h-5 w-5 text-primary"}),n.jsx("span",{className:"font-medium text-foreground",children:s?"Você está visível para outros":"Pessoas próximas"})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:s?O||(b?"Outras pessoas até 100m de você podem te encontrar.":"Aguardando sua localização para encontrar pessoas próximas..."):"Conecte-se com pessoas até 100 metros de você. Para aparecer para outros, ative 'Ser Visto'."})]}),s&&b&&n.jsx(qb,{mode:"nearby"})]}),t==="friends"&&n.jsxs(n.Fragment,{children:[n.jsx(qb,{mode:"friends"}),n.jsxs("div",{className:"mb-6 p-4 bg-surface rounded-lg border border-primary/20",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(tr,{className:"h-5 w-5 text-primary"}),n.jsx("span",{className:"font-medium text-foreground",children:"Seus Amigos"})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:u.length===0?"Você ainda não tem amigos adicionados. Vá para 'Próximos' e adicione pessoas próximas!":`Você tem ${u.length} ${u.length===1?"amigo":"amigos"}. Seus amigos sempre aparecem aqui, não importa a distância.`})]})]}),p&&t==="nearby"?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Procurando pessoas..."})]}):be.length>0?n.jsx("div",{className:"space-y-4 pb-4",children:be.map(ve=>n.jsx(TU,{person:ve,handleLike:ue,handleMessage:oe,likedUsers:w,unreadMessages:S,onFriendshipChange:te},ve.id))}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(tr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),t==="nearby"?n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-muted-foreground",children:s?O?"Erro ao acessar localização":b?"Nenhuma pessoa próxima":"Aguardando localização...":"Você precisa ser visível"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:s?O?"Permita o acesso à localização no seu navegador.":b?"Não há pessoas visíveis até 100m de você.":"Carregando sua localização...":"Ative 'Ser Visto' para se conectar."})]}):n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-muted-foreground",children:"Você ainda não tem amigos"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Vá para 'Próximos' e adicione pessoas próximas!"})]})]})]}),C&&n.jsx($B,{open:j,onOpenChange:N,recipientId:C.user_id,recipientName:C.name,recipientAvatar:C.avatar})]})}var ep="Switch",[IU]=qr(ep),[RU,PU]=IU(ep),u3=v.forwardRef((e,t)=>{const{__scopeSwitch:r,name:s,checked:a,defaultChecked:o,required:d,disabled:u,value:f="on",onCheckedChange:p,form:x,...w}=e,[_,j]=v.useState(null),N=at(t,b=>j(b)),C=v.useRef(!1),A=_?x||!!_.closest("form"):!0,[S,k]=sa({prop:a,defaultProp:o??!1,onChange:p,caller:ep});return n.jsxs(RU,{scope:r,checked:S,disabled:u,children:[n.jsx(He.button,{type:"button",role:"switch","aria-checked":S,"aria-required":d,"data-state":p3(S),"data-disabled":u?"":void 0,disabled:u,value:f,...w,ref:N,onClick:De(e.onClick,b=>{k(T=>!T),A&&(C.current=b.isPropagationStopped(),C.current||b.stopPropagation())})}),A&&n.jsx(m3,{control:_,bubbles:!C.current,name:s,value:f,checked:S,required:d,disabled:u,form:x,style:{transform:"translateX(-100%)"}})]})});u3.displayName=ep;var h3="SwitchThumb",f3=v.forwardRef((e,t)=>{const{__scopeSwitch:r,...s}=e,a=PU(h3,r);return n.jsx(He.span,{"data-state":p3(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})});f3.displayName=h3;var OU="SwitchBubbleInput",m3=v.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:s=!0,...a},o)=>{const d=v.useRef(null),u=at(d,o),f=Zm(r),p=bm(t);return v.useEffect(()=>{const x=d.current;if(!x)return;const w=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(w,"checked").set;if(f!==r&&j){const N=new Event("click",{bubbles:s});j.call(x,r),x.dispatchEvent(N)}},[f,r,s]),n.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:u,style:{...a.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});m3.displayName=OU;function p3(e){return e?"checked":"unchecked"}var g3=u3,DU=f3;const Ar=v.forwardRef(({className:e,...t},r)=>n.jsx(g3,{className:Be("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...t,ref:r,children:n.jsx(DU,{className:Be("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Ar.displayName=g3.displayName;var MU=[" ","Enter","ArrowUp","ArrowDown"],LU=[" ","Enter"],nl="Select",[tp,rp,FU]=mm(nl),[Kc]=qr(nl,[FU,ao]),np=ao(),[BU,oo]=Kc(nl),[zU,UU]=Kc(nl),x3=e=>{const{__scopeSelect:t,children:r,open:s,defaultOpen:a,onOpenChange:o,value:d,defaultValue:u,onValueChange:f,dir:p,name:x,autoComplete:w,disabled:_,required:j,form:N}=e,C=np(t),[A,S]=v.useState(null),[k,b]=v.useState(null),[T,O]=v.useState(!1),L=Gc(p),[R,M]=sa({prop:s,defaultProp:a??!1,onChange:o,caller:nl}),[P,q]=sa({prop:d,defaultProp:u,onChange:f,caller:nl}),G=v.useRef(null),B=A?N||!!A.closest("form"):!0,[V,ee]=v.useState(new Set),X=Array.from(V).map(le=>le.props.value).join(";");return n.jsx(L1,{...C,children:n.jsxs(BU,{required:j,scope:t,trigger:A,onTriggerChange:S,valueNode:k,onValueNodeChange:b,valueNodeHasChildren:T,onValueNodeHasChildrenChange:O,contentId:un(),value:P,onValueChange:q,open:R,onOpenChange:M,dir:L,triggerPointerDownPosRef:G,disabled:_,children:[n.jsx(tp.Provider,{scope:t,children:n.jsx(zU,{scope:e.__scopeSelect,onNativeOptionAdd:v.useCallback(le=>{ee(ue=>new Set(ue).add(le))},[]),onNativeOptionRemove:v.useCallback(le=>{ee(ue=>{const oe=new Set(ue);return oe.delete(le),oe})},[]),children:r})}),B?n.jsxs(U3,{"aria-hidden":!0,required:j,tabIndex:-1,name:x,autoComplete:w,value:P,onChange:le=>q(le.target.value),disabled:_,form:N,children:[P===void 0?n.jsx("option",{value:""}):null,Array.from(V)]},X):null]})})};x3.displayName=nl;var v3="SelectTrigger",w3=v.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:s=!1,...a}=e,o=np(r),d=oo(v3,r),u=d.disabled||s,f=at(t,d.onTriggerChange),p=rp(r),x=v.useRef("touch"),[w,_,j]=q3(C=>{const A=p().filter(b=>!b.disabled),S=A.find(b=>b.value===d.value),k=V3(A,C,S);k!==void 0&&d.onValueChange(k.value)}),N=C=>{u||(d.onOpenChange(!0),j()),C&&(d.triggerPointerDownPosRef.current={x:Math.round(C.pageX),y:Math.round(C.pageY)})};return n.jsx(Tu,{asChild:!0,...o,children:n.jsx(He.button,{type:"button",role:"combobox","aria-controls":d.contentId,"aria-expanded":d.open,"aria-required":d.required,"aria-autocomplete":"none",dir:d.dir,"data-state":d.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":$3(d.value)?"":void 0,...a,ref:f,onClick:De(a.onClick,C=>{C.currentTarget.focus(),x.current!=="mouse"&&N(C)}),onPointerDown:De(a.onPointerDown,C=>{x.current=C.pointerType;const A=C.target;A.hasPointerCapture(C.pointerId)&&A.releasePointerCapture(C.pointerId),C.button===0&&C.ctrlKey===!1&&C.pointerType==="mouse"&&(N(C),C.preventDefault())}),onKeyDown:De(a.onKeyDown,C=>{const A=w.current!=="";!(C.ctrlKey||C.altKey||C.metaKey)&&C.key.length===1&&_(C.key),!(A&&C.key===" ")&&MU.includes(C.key)&&(N(),C.preventDefault())})})})});w3.displayName=v3;var y3="SelectValue",b3=v.forwardRef((e,t)=>{const{__scopeSelect:r,className:s,style:a,children:o,placeholder:d="",...u}=e,f=oo(y3,r),{onValueNodeHasChildrenChange:p}=f,x=o!==void 0,w=at(t,f.onValueNodeChange);return kr(()=>{p(x)},[p,x]),n.jsx(He.span,{...u,ref:w,style:{pointerEvents:"none"},children:$3(f.value)?n.jsx(n.Fragment,{children:d}):o})});b3.displayName=y3;var $U="SelectIcon",_3=v.forwardRef((e,t)=>{const{__scopeSelect:r,children:s,...a}=e;return n.jsx(He.span,{"aria-hidden":!0,...a,ref:t,children:s||"▼"})});_3.displayName=$U;var qU="SelectPortal",N3=e=>n.jsx(Fc,{asChild:!0,...e});N3.displayName=qU;var sl="SelectContent",j3=v.forwardRef((e,t)=>{const r=oo(sl,e.__scopeSelect),[s,a]=v.useState();if(kr(()=>{a(new DocumentFragment)},[]),!r.open){const o=s;return o?cl.createPortal(n.jsx(C3,{scope:e.__scopeSelect,children:n.jsx(tp.Slot,{scope:e.__scopeSelect,children:n.jsx("div",{children:e.children})})}),o):null}return n.jsx(E3,{...e,ref:t})});j3.displayName=sl;var Vs=10,[C3,lo]=Kc(sl),VU="SelectContentImpl",WU=Wi("SelectContent.RemoveScroll"),E3=v.forwardRef((e,t)=>{const{__scopeSelect:r,position:s="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:o,onPointerDownOutside:d,side:u,sideOffset:f,align:p,alignOffset:x,arrowPadding:w,collisionBoundary:_,collisionPadding:j,sticky:N,hideWhenDetached:C,avoidCollisions:A,...S}=e,k=oo(sl,r),[b,T]=v.useState(null),[O,L]=v.useState(null),R=at(t,se=>T(se)),[M,P]=v.useState(null),[q,G]=v.useState(null),B=rp(r),[V,ee]=v.useState(!1),X=v.useRef(!1);v.useEffect(()=>{if(b)return zm(b)},[b]),Fm();const le=v.useCallback(se=>{const[me,...Re]=B().map(Ne=>Ne.ref.current),[ze]=Re.slice(-1),ye=document.activeElement;for(const Ne of se)if(Ne===ye||(Ne==null||Ne.scrollIntoView({block:"nearest"}),Ne===me&&O&&(O.scrollTop=0),Ne===ze&&O&&(O.scrollTop=O.scrollHeight),Ne==null||Ne.focus(),document.activeElement!==ye))return},[B,O]),ue=v.useCallback(()=>le([M,b]),[le,M,b]);v.useEffect(()=>{V&&ue()},[V,ue]);const{onOpenChange:oe,triggerPointerDownPosRef:te}=k;v.useEffect(()=>{if(b){let se={x:0,y:0};const me=ze=>{var ye,Ne;se={x:Math.abs(Math.round(ze.pageX)-(((ye=te.current)==null?void 0:ye.x)??0)),y:Math.abs(Math.round(ze.pageY)-(((Ne=te.current)==null?void 0:Ne.y)??0))}},Re=ze=>{se.x<=10&&se.y<=10?ze.preventDefault():b.contains(ze.target)||oe(!1),document.removeEventListener("pointermove",me),te.current=null};return te.current!==null&&(document.addEventListener("pointermove",me),document.addEventListener("pointerup",Re,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",me),document.removeEventListener("pointerup",Re,{capture:!0})}}},[b,oe,te]),v.useEffect(()=>{const se=()=>oe(!1);return window.addEventListener("blur",se),window.addEventListener("resize",se),()=>{window.removeEventListener("blur",se),window.removeEventListener("resize",se)}},[oe]);const[be,ve]=q3(se=>{const me=B().filter(ye=>!ye.disabled),Re=me.find(ye=>ye.ref.current===document.activeElement),ze=V3(me,se,Re);ze&&setTimeout(()=>ze.ref.current.focus())}),H=v.useCallback((se,me,Re)=>{const ze=!X.current&&!Re;(k.value!==void 0&&k.value===me||ze)&&(P(se),ze&&(X.current=!0))},[k.value]),J=v.useCallback(()=>b==null?void 0:b.focus(),[b]),K=v.useCallback((se,me,Re)=>{const ze=!X.current&&!Re;(k.value!==void 0&&k.value===me||ze)&&G(se)},[k.value]),ae=s==="popper"?d0:S3,de=ae===d0?{side:u,sideOffset:f,align:p,alignOffset:x,arrowPadding:w,collisionBoundary:_,collisionPadding:j,sticky:N,hideWhenDetached:C,avoidCollisions:A}:{};return n.jsx(C3,{scope:r,content:b,viewport:O,onViewportChange:L,itemRefCallback:H,selectedItem:M,onItemLeave:J,itemTextRefCallback:K,focusSelectedItem:ue,selectedItemText:q,position:s,isPositioned:V,searchRef:be,children:n.jsx(Ou,{as:WU,allowPinchZoom:!0,children:n.jsx(Pu,{asChild:!0,trapped:k.open,onMountAutoFocus:se=>{se.preventDefault()},onUnmountAutoFocus:De(a,se=>{var me;(me=k.trigger)==null||me.focus({preventScroll:!0}),se.preventDefault()}),children:n.jsx(dl,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:d,onFocusOutside:se=>se.preventDefault(),onDismiss:()=>k.onOpenChange(!1),children:n.jsx(ae,{role:"listbox",id:k.contentId,"data-state":k.open?"open":"closed",dir:k.dir,onContextMenu:se=>se.preventDefault(),...S,...de,onPlaced:()=>ee(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...S.style},onKeyDown:De(S.onKeyDown,se=>{const me=se.ctrlKey||se.altKey||se.metaKey;if(se.key==="Tab"&&se.preventDefault(),!me&&se.key.length===1&&ve(se.key),["ArrowUp","ArrowDown","Home","End"].includes(se.key)){let ze=B().filter(ye=>!ye.disabled).map(ye=>ye.ref.current);if(["ArrowUp","End"].includes(se.key)&&(ze=ze.slice().reverse()),["ArrowUp","ArrowDown"].includes(se.key)){const ye=se.target,Ne=ze.indexOf(ye);ze=ze.slice(Ne+1)}setTimeout(()=>le(ze)),se.preventDefault()}})})})})})})});E3.displayName=VU;var HU="SelectItemAlignedPosition",S3=v.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:s,...a}=e,o=oo(sl,r),d=lo(sl,r),[u,f]=v.useState(null),[p,x]=v.useState(null),w=at(t,R=>x(R)),_=rp(r),j=v.useRef(!1),N=v.useRef(!0),{viewport:C,selectedItem:A,selectedItemText:S,focusSelectedItem:k}=d,b=v.useCallback(()=>{if(o.trigger&&o.valueNode&&u&&p&&C&&A&&S){const R=o.trigger.getBoundingClientRect(),M=p.getBoundingClientRect(),P=o.valueNode.getBoundingClientRect(),q=S.getBoundingClientRect();if(o.dir!=="rtl"){const ye=q.left-M.left,Ne=P.left-ye,we=R.left-Ne,Xe=R.width+we,_e=Math.max(Xe,M.width),Qe=window.innerWidth-Vs,ce=r0(Ne,[Vs,Math.max(Vs,Qe-_e)]);u.style.minWidth=Xe+"px",u.style.left=ce+"px"}else{const ye=M.right-q.right,Ne=window.innerWidth-P.right-ye,we=window.innerWidth-R.right-Ne,Xe=R.width+we,_e=Math.max(Xe,M.width),Qe=window.innerWidth-Vs,ce=r0(Ne,[Vs,Math.max(Vs,Qe-_e)]);u.style.minWidth=Xe+"px",u.style.right=ce+"px"}const G=_(),B=window.innerHeight-Vs*2,V=C.scrollHeight,ee=window.getComputedStyle(p),X=parseInt(ee.borderTopWidth,10),le=parseInt(ee.paddingTop,10),ue=parseInt(ee.borderBottomWidth,10),oe=parseInt(ee.paddingBottom,10),te=X+le+V+oe+ue,be=Math.min(A.offsetHeight*5,te),ve=window.getComputedStyle(C),H=parseInt(ve.paddingTop,10),J=parseInt(ve.paddingBottom,10),K=R.top+R.height/2-Vs,ae=B-K,de=A.offsetHeight/2,se=A.offsetTop+de,me=X+le+se,Re=te-me;if(me<=K){const ye=G.length>0&&A===G[G.length-1].ref.current;u.style.bottom="0px";const Ne=p.clientHeight-C.offsetTop-C.offsetHeight,we=Math.max(ae,de+(ye?J:0)+Ne+ue),Xe=me+we;u.style.height=Xe+"px"}else{const ye=G.length>0&&A===G[0].ref.current;u.style.top="0px";const we=Math.max(K,X+C.offsetTop+(ye?H:0)+de)+Re;u.style.height=we+"px",C.scrollTop=me-K+C.offsetTop}u.style.margin=`${Vs}px 0`,u.style.minHeight=be+"px",u.style.maxHeight=B+"px",s==null||s(),requestAnimationFrame(()=>j.current=!0)}},[_,o.trigger,o.valueNode,u,p,C,A,S,o.dir,s]);kr(()=>b(),[b]);const[T,O]=v.useState();kr(()=>{p&&O(window.getComputedStyle(p).zIndex)},[p]);const L=v.useCallback(R=>{R&&N.current===!0&&(b(),k==null||k(),N.current=!1)},[b,k]);return n.jsx(XU,{scope:r,contentWrapper:u,shouldExpandOnScrollRef:j,onScrollButtonChange:L,children:n.jsx("div",{ref:f,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:T},children:n.jsx(He.div,{...a,ref:w,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});S3.displayName=HU;var GU="SelectPopperPosition",d0=v.forwardRef((e,t)=>{const{__scopeSelect:r,align:s="start",collisionPadding:a=Vs,...o}=e,d=np(r);return n.jsx(_m,{...d,...o,ref:t,align:s,collisionPadding:a,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});d0.displayName=GU;var[XU,_v]=Kc(sl,{}),u0="SelectViewport",A3=v.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:s,...a}=e,o=lo(u0,r),d=_v(u0,r),u=at(t,o.onViewportChange),f=v.useRef(0);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),n.jsx(tp.Slot,{scope:r,children:n.jsx(He.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:De(a.onScroll,p=>{const x=p.currentTarget,{contentWrapper:w,shouldExpandOnScrollRef:_}=d;if(_!=null&&_.current&&w){const j=Math.abs(f.current-x.scrollTop);if(j>0){const N=window.innerHeight-Vs*2,C=parseFloat(w.style.minHeight),A=parseFloat(w.style.height),S=Math.max(C,A);if(S<N){const k=S+j,b=Math.min(N,k),T=k-b;w.style.height=b+"px",w.style.bottom==="0px"&&(x.scrollTop=T>0?T:0,w.style.justifyContent="flex-end")}}}f.current=x.scrollTop})})})]})});A3.displayName=u0;var k3="SelectGroup",[KU,YU]=Kc(k3),QU=v.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,a=un();return n.jsx(KU,{scope:r,id:a,children:n.jsx(He.div,{role:"group","aria-labelledby":a,...s,ref:t})})});QU.displayName=k3;var T3="SelectLabel",I3=v.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,a=YU(T3,r);return n.jsx(He.div,{id:a.id,...s,ref:t})});I3.displayName=T3;var Gf="SelectItem",[ZU,R3]=Kc(Gf),P3=v.forwardRef((e,t)=>{const{__scopeSelect:r,value:s,disabled:a=!1,textValue:o,...d}=e,u=oo(Gf,r),f=lo(Gf,r),p=u.value===s,[x,w]=v.useState(o??""),[_,j]=v.useState(!1),N=at(t,k=>{var b;return(b=f.itemRefCallback)==null?void 0:b.call(f,k,s,a)}),C=un(),A=v.useRef("touch"),S=()=>{a||(u.onValueChange(s),u.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return n.jsx(ZU,{scope:r,value:s,disabled:a,textId:C,isSelected:p,onItemTextChange:v.useCallback(k=>{w(b=>b||((k==null?void 0:k.textContent)??"").trim())},[]),children:n.jsx(tp.ItemSlot,{scope:r,value:s,disabled:a,textValue:x,children:n.jsx(He.div,{role:"option","aria-labelledby":C,"data-highlighted":_?"":void 0,"aria-selected":p&&_,"data-state":p?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...d,ref:N,onFocus:De(d.onFocus,()=>j(!0)),onBlur:De(d.onBlur,()=>j(!1)),onClick:De(d.onClick,()=>{A.current!=="mouse"&&S()}),onPointerUp:De(d.onPointerUp,()=>{A.current==="mouse"&&S()}),onPointerDown:De(d.onPointerDown,k=>{A.current=k.pointerType}),onPointerMove:De(d.onPointerMove,k=>{var b;A.current=k.pointerType,a?(b=f.onItemLeave)==null||b.call(f):A.current==="mouse"&&k.currentTarget.focus({preventScroll:!0})}),onPointerLeave:De(d.onPointerLeave,k=>{var b;k.currentTarget===document.activeElement&&((b=f.onItemLeave)==null||b.call(f))}),onKeyDown:De(d.onKeyDown,k=>{var T;((T=f.searchRef)==null?void 0:T.current)!==""&&k.key===" "||(LU.includes(k.key)&&S(),k.key===" "&&k.preventDefault())})})})})});P3.displayName=Gf;var Nd="SelectItemText",O3=v.forwardRef((e,t)=>{const{__scopeSelect:r,className:s,style:a,...o}=e,d=oo(Nd,r),u=lo(Nd,r),f=R3(Nd,r),p=UU(Nd,r),[x,w]=v.useState(null),_=at(t,S=>w(S),f.onItemTextChange,S=>{var k;return(k=u.itemTextRefCallback)==null?void 0:k.call(u,S,f.value,f.disabled)}),j=x==null?void 0:x.textContent,N=v.useMemo(()=>n.jsx("option",{value:f.value,disabled:f.disabled,children:j},f.value),[f.disabled,f.value,j]),{onNativeOptionAdd:C,onNativeOptionRemove:A}=p;return kr(()=>(C(N),()=>A(N)),[C,A,N]),n.jsxs(n.Fragment,{children:[n.jsx(He.span,{id:f.textId,...o,ref:_}),f.isSelected&&d.valueNode&&!d.valueNodeHasChildren?cl.createPortal(o.children,d.valueNode):null]})});O3.displayName=Nd;var D3="SelectItemIndicator",M3=v.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e;return R3(D3,r).isSelected?n.jsx(He.span,{"aria-hidden":!0,...s,ref:t}):null});M3.displayName=D3;var h0="SelectScrollUpButton",L3=v.forwardRef((e,t)=>{const r=lo(h0,e.__scopeSelect),s=_v(h0,e.__scopeSelect),[a,o]=v.useState(!1),d=at(t,s.onScrollButtonChange);return kr(()=>{if(r.viewport&&r.isPositioned){let u=function(){const p=f.scrollTop>0;o(p)};const f=r.viewport;return u(),f.addEventListener("scroll",u),()=>f.removeEventListener("scroll",u)}},[r.viewport,r.isPositioned]),a?n.jsx(B3,{...e,ref:d,onAutoScroll:()=>{const{viewport:u,selectedItem:f}=r;u&&f&&(u.scrollTop=u.scrollTop-f.offsetHeight)}}):null});L3.displayName=h0;var f0="SelectScrollDownButton",F3=v.forwardRef((e,t)=>{const r=lo(f0,e.__scopeSelect),s=_v(f0,e.__scopeSelect),[a,o]=v.useState(!1),d=at(t,s.onScrollButtonChange);return kr(()=>{if(r.viewport&&r.isPositioned){let u=function(){const p=f.scrollHeight-f.clientHeight,x=Math.ceil(f.scrollTop)<p;o(x)};const f=r.viewport;return u(),f.addEventListener("scroll",u),()=>f.removeEventListener("scroll",u)}},[r.viewport,r.isPositioned]),a?n.jsx(B3,{...e,ref:d,onAutoScroll:()=>{const{viewport:u,selectedItem:f}=r;u&&f&&(u.scrollTop=u.scrollTop+f.offsetHeight)}}):null});F3.displayName=f0;var B3=v.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:s,...a}=e,o=lo("SelectScrollButton",r),d=v.useRef(null),u=rp(r),f=v.useCallback(()=>{d.current!==null&&(window.clearInterval(d.current),d.current=null)},[]);return v.useEffect(()=>()=>f(),[f]),kr(()=>{var x;const p=u().find(w=>w.ref.current===document.activeElement);(x=p==null?void 0:p.ref.current)==null||x.scrollIntoView({block:"nearest"})},[u]),n.jsx(He.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:De(a.onPointerDown,()=>{d.current===null&&(d.current=window.setInterval(s,50))}),onPointerMove:De(a.onPointerMove,()=>{var p;(p=o.onItemLeave)==null||p.call(o),d.current===null&&(d.current=window.setInterval(s,50))}),onPointerLeave:De(a.onPointerLeave,()=>{f()})})}),JU="SelectSeparator",z3=v.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e;return n.jsx(He.div,{"aria-hidden":!0,...s,ref:t})});z3.displayName=JU;var m0="SelectArrow",e$=v.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,a=np(r),o=oo(m0,r),d=lo(m0,r);return o.open&&d.position==="popper"?n.jsx(Nm,{...a,...s,ref:t}):null});e$.displayName=m0;var t$="SelectBubbleInput",U3=v.forwardRef(({__scopeSelect:e,value:t,...r},s)=>{const a=v.useRef(null),o=at(s,a),d=Zm(t);return v.useEffect(()=>{const u=a.current;if(!u)return;const f=window.HTMLSelectElement.prototype,x=Object.getOwnPropertyDescriptor(f,"value").set;if(d!==t&&x){const w=new Event("change",{bubbles:!0});x.call(u,t),u.dispatchEvent(w)}},[d,t]),n.jsx(He.select,{...r,style:{...QN,...r.style},ref:o,defaultValue:t})});U3.displayName=t$;function $3(e){return e===""||e===void 0}function q3(e){const t=Cr(e),r=v.useRef(""),s=v.useRef(0),a=v.useCallback(d=>{const u=r.current+d;t(u),function f(p){r.current=p,window.clearTimeout(s.current),p!==""&&(s.current=window.setTimeout(()=>f(""),1e3))}(u)},[t]),o=v.useCallback(()=>{r.current="",window.clearTimeout(s.current)},[]);return v.useEffect(()=>()=>window.clearTimeout(s.current),[]),[r,a,o]}function V3(e,t,r){const a=t.length>1&&Array.from(t).every(p=>p===t[0])?t[0]:t,o=r?e.indexOf(r):-1;let d=r$(e,Math.max(o,0));a.length===1&&(d=d.filter(p=>p!==r));const f=d.find(p=>p.textValue.toLowerCase().startsWith(a.toLowerCase()));return f!==r?f:void 0}function r$(e,t){return e.map((r,s)=>e[(t+s)%e.length])}var n$=x3,W3=w3,s$=b3,a$=_3,i$=N3,H3=j3,o$=A3,G3=I3,X3=P3,l$=O3,c$=M3,K3=L3,Y3=F3,Q3=z3;const Zs=n$,Js=s$,Es=v.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(W3,{ref:s,className:Be("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,n.jsx(a$,{asChild:!0,children:n.jsx(_1,{className:"h-4 w-4 opacity-50"})})]}));Es.displayName=W3.displayName;const Z3=v.forwardRef(({className:e,...t},r)=>n.jsx(K3,{ref:r,className:Be("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(d8,{className:"h-4 w-4"})}));Z3.displayName=K3.displayName;const J3=v.forwardRef(({className:e,...t},r)=>n.jsx(Y3,{ref:r,className:Be("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(_1,{className:"h-4 w-4"})}));J3.displayName=Y3.displayName;const Ss=v.forwardRef(({className:e,children:t,position:r="popper",...s},a)=>n.jsx(i$,{children:n.jsxs(H3,{ref:a,className:Be("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...s,children:[n.jsx(Z3,{}),n.jsx(o$,{className:Be("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),n.jsx(J3,{})]})}));Ss.displayName=H3.displayName;const d$=v.forwardRef(({className:e,...t},r)=>n.jsx(G3,{ref:r,className:Be("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));d$.displayName=G3.displayName;const qt=v.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(X3,{ref:s,className:Be("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(c$,{children:n.jsx(Os,{className:"h-4 w-4"})})}),n.jsx(l$,{children:t})]}));qt.displayName=X3.displayName;const u$=v.forwardRef(({className:e,...t},r)=>n.jsx(Q3,{ref:r,className:Be("-mx-1 my-1 h-px bg-muted",e),...t}));u$.displayName=Q3.displayName;function h$(){const{user:e}=wt(),[t,r]=v.useState([]),[s,a]=v.useState([]),[o,d]=v.useState(!0),[u,f]=v.useState(null);v.useEffect(()=>{e&&p()},[e]);const p=async()=>{if(e)try{d(!0);const{data:j,error:N}=await U.from("organizers").select("id").eq("user_id",e.id).single();if(N)throw N;if(!j)return;f(j.id);const{data:C,error:A}=await U.from("organizer_photos").select("*").eq("organizer_id",j.id).eq("is_active",!0).order("created_at",{ascending:!1});if(A)throw A;r(C||[]),await x(C||[])}catch(j){console.error("Error fetching photos:",j)}finally{d(!1)}},x=async j=>{const N={},C=[...new Set(j.map(S=>S.event_id).filter(Boolean))],A={};if(C.length>0){const{data:S}=await U.from("events").select("id, title").in("id",C);S&&S.forEach(k=>{A[k.id]=k.title})}j.forEach(S=>{const k=S.event_id||"no-event";N[k]||(N[k]={sessionName:S.session_name||"Sem sessão",eventName:S.event_id?A[S.event_id]||"Evento":"Sem evento",photos:[],date:new Date(S.created_at).toLocaleDateString("pt-BR"),eventId:S.event_id}),N[k].photos.push(S)}),a(Object.values(N))};return{photos:t,photoSessions:s,loading:o,uploadPhotos:async(j,N)=>{if(!u||!e)return W.error("Organizador não encontrado"),!1;try{for(let C=0;C<j.length;C++){const A=j[C],S=A.name.split(".").pop(),k=`${e.id}/photos/${Date.now()}_${C}.${S}`,{error:b}=await U.storage.from("user-uploads").upload(k,A,{upsert:!0});if(b){console.error("Error uploading file:",b),W.error(`Erro ao fazer upload da foto ${C+1}`);continue}const{data:{publicUrl:T}}=U.storage.from("user-uploads").getPublicUrl(k),{error:O}=await U.from("organizer_photos").insert({organizer_id:u,photo_url:T,caption:A.name,event_id:N});O&&(console.error("Error saving photo to database:",O),W.error(`Erro ao salvar foto ${C+1}`))}return W.success("Fotos enviadas com sucesso!"),await p(),!0}catch(C){return console.error("Error:",C),W.error("Erro ao fazer upload das fotos"),!1}},deletePhoto:async j=>{try{const{error:N}=await U.from("organizer_photos").update({is_active:!1}).eq("id",j);if(N)throw N;W.success("Foto removida com sucesso!"),await p()}catch(N){console.error("Error deleting photo:",N),W.error("Erro ao remover foto")}},refreshPhotos:p}}const je=v.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Be("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));je.displayName="Card";const qe=v.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Be("flex flex-col space-y-1.5 p-6",e),...t}));qe.displayName="CardHeader";const We=v.forwardRef(({className:e,...t},r)=>n.jsx("h3",{ref:r,className:Be("text-2xl font-semibold leading-none tracking-tight",e),...t}));We.displayName="CardTitle";const Qr=v.forwardRef(({className:e,...t},r)=>n.jsx("p",{ref:r,className:Be("text-sm text-muted-foreground",e),...t}));Qr.displayName="CardDescription";const Ee=v.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Be("p-6 pt-0",e),...t}));Ee.displayName="CardContent";const f$=v.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Be("flex items-center p-6 pt-0",e),...t}));f$.displayName="CardFooter";var Vb;(function(e){e.Aztec="AZTEC",e.Codabar="CODABAR",e.Code39="CODE_39",e.Code93="CODE_93",e.Code128="CODE_128",e.DataMatrix="DATA_MATRIX",e.Ean8="EAN_8",e.Ean13="EAN_13",e.Itf="ITF",e.Pdf417="PDF_417",e.QrCode="QR_CODE",e.UpcA="UPC_A",e.UpcE="UPC_E"})(Vb||(Vb={}));var Wb;(function(e){e.CalendarEvent="CALENDAR_EVENT",e.ContactInfo="CONTACT_INFO",e.DriversLicense="DRIVERS_LICENSE",e.Email="EMAIL",e.Geo="GEO",e.Isbn="ISBN",e.Phone="PHONE",e.Product="PRODUCT",e.Sms="SMS",e.Text="TEXT",e.Url="URL",e.Wifi="WIFI",e.Unknown="UNKNOWN"})(Wb||(Wb={}));var Hb;(function(e){e[e["640x480"]=0]="640x480",e[e["1280x720"]=1]="1280x720",e[e["1920x1080"]=2]="1920x1080",e[e["3840x2160"]=3]="3840x2160"})(Hb||(Hb={}));var Gb;(function(e){e.Front="FRONT",e.Back="BACK"})(Gb||(Gb={}));var Xb;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.PENDING=1]="PENDING",e[e.DOWNLOADING=2]="DOWNLOADING",e[e.CANCELED=3]="CANCELED",e[e.COMPLETED=4]="COMPLETED",e[e.FAILED=5]="FAILED",e[e.INSTALLING=6]="INSTALLING",e[e.DOWNLOAD_PAUSED=7]="DOWNLOAD_PAUSED"})(Xb||(Xb={}));var Kb;(function(e){e[e.HOME=0]="HOME",e[e.UNKNOWN=1]="UNKNOWN",e[e.WORK=2]="WORK"})(Kb||(Kb={}));var Yb;(function(e){e[e.HOME=0]="HOME",e[e.UNKNOWN=1]="UNKNOWN",e[e.WORK=2]="WORK"})(Yb||(Yb={}));var Qb;(function(e){e[e.FAX=0]="FAX",e[e.HOME=1]="HOME",e[e.MOBILE=2]="MOBILE",e[e.UNKNOWN=3]="UNKNOWN",e[e.WORK=4]="WORK"})(Qb||(Qb={}));var Zb;(function(e){e[e.OPEN=1]="OPEN",e[e.WEP=2]="WEP",e[e.WPA=3]="WPA"})(Zb||(Zb={}));const Jb=Mm("BarcodeScanner",{web:()=>fl(()=>import("./web-BDv0PbCz.js"),[],import.meta.url).then(e=>new e.BarcodeScannerWeb)});var Ye;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ye||(Ye={}));var e2=new Map([[Ye.QR_CODE,"QR_CODE"],[Ye.AZTEC,"AZTEC"],[Ye.CODABAR,"CODABAR"],[Ye.CODE_39,"CODE_39"],[Ye.CODE_93,"CODE_93"],[Ye.CODE_128,"CODE_128"],[Ye.DATA_MATRIX,"DATA_MATRIX"],[Ye.MAXICODE,"MAXICODE"],[Ye.ITF,"ITF"],[Ye.EAN_13,"EAN_13"],[Ye.EAN_8,"EAN_8"],[Ye.PDF_417,"PDF_417"],[Ye.RSS_14,"RSS_14"],[Ye.RSS_EXPANDED,"RSS_EXPANDED"],[Ye.UPC_A,"UPC_A"],[Ye.UPC_E,"UPC_E"],[Ye.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),t2;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(t2||(t2={}));function m$(e){return Object.values(Ye).includes(e)}var Xf;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Xf||(Xf={}));var p$=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[Xf.SCAN_TYPE_CAMERA,Xf.SCAN_TYPE_FILE],e}(),eA=function(){function e(t,r){this.format=t,this.formatName=r}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!e2.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,e2.get(t))},e}(),r2=function(){function e(){}return e.createFromText=function(t){var r={text:t};return{decodedText:t,result:r}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),p0;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(p0||(p0={}));var g$=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:p0.UNKWOWN_ERROR}},e}(),x$=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,r){(this.verbose||r===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function Ba(e){return typeof e>"u"||e===null}var Zl=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),tA=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,r){if(typeof t!="object"){var s=typeof t;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(s,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],o=new Set(a),d=Object.keys(t),u=0,f=d;u<f.length;u++){var p=f[u];if(o.has(p))return r.logError("".concat(p," is not supported videoConstaints."),!0),!1}return!0},e}(),g0={exports:{}};(function(e,t){(function(r,s){s(t)})(ln,function(r){function s(F){return F==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,i){F.__proto__=i}||function(F,i){for(var l in i)i.hasOwnProperty(l)&&(F[l]=i[l])};function o(F,i){a(F,i);function l(){this.constructor=F}F.prototype=i===null?Object.create(i):(l.prototype=i.prototype,new l)}function d(F,i){var l=Object.setPrototypeOf;l?l(F,i):F.__proto__=i}function u(F,i){i===void 0&&(i=F.constructor);var l=Error.captureStackTrace;l&&l(F,i)}var f=function(F){o(i,F);function i(l){var c=this.constructor,h=F.call(this,l)||this;return Object.defineProperty(h,"name",{value:c.name,enumerable:!1}),d(h,c.prototype),u(h),h}return i}(Error);class p extends f{constructor(i=void 0){super(i),this.message=i}getKind(){return this.constructor.kind}}p.kind="Exception";class x extends p{}x.kind="ArgumentException";class w extends p{}w.kind="IllegalArgumentException";class _{constructor(i){if(this.binarizer=i,i===null)throw new w("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,l){return this.binarizer.getBlackRow(i,l)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,l,c,h){const m=this.binarizer.getLuminanceSource().crop(i,l,c,h);return new _(this.binarizer.createBinarizer(m))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new _(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new _(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class j extends p{static getChecksumInstance(){return new j}}j.kind="ChecksumException";class N{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class C{static arraycopy(i,l,c,h,m){for(;m--;)c[h++]=i[l++]}static currentTimeMillis(){return Date.now()}}class A extends p{}A.kind="IndexOutOfBoundsException";class S extends A{constructor(i=void 0,l=void 0){super(l),this.index=i,this.message=l}}S.kind="ArrayIndexOutOfBoundsException";class k{static fill(i,l){for(let c=0,h=i.length;c<h;c++)i[c]=l}static fillWithin(i,l,c,h){k.rangeCheck(i.length,l,c);for(let m=l;m<c;m++)i[m]=h}static rangeCheck(i,l,c){if(l>c)throw new w("fromIndex("+l+") > toIndex("+c+")");if(l<0)throw new S(l);if(c>i)throw new S(c)}static asList(...i){return i}static create(i,l,c){return Array.from({length:i}).map(m=>Array.from({length:l}).fill(c))}static createInt32Array(i,l,c){return Array.from({length:i}).map(m=>Int32Array.from({length:l}).fill(c))}static equals(i,l){if(!i||!l||!i.length||!l.length||i.length!==l.length)return!1;for(let c=0,h=i.length;c<h;c++)if(i[c]!==l[c])return!1;return!0}static hashCode(i){if(i===null)return 0;let l=1;for(const c of i)l=31*l+c;return l}static fillUint8Array(i,l){for(let c=0;c!==i.length;c++)i[c]=l}static copyOf(i,l){return i.slice(0,l)}static copyOfUint8Array(i,l){if(i.length<=l){const c=new Uint8Array(l);return c.set(i),c}return i.slice(0,l)}static copyOfRange(i,l,c){const h=c-l,m=new Int32Array(h);return C.arraycopy(i,l,m,0,h),m}static binarySearch(i,l,c){c===void 0&&(c=k.numberComparator);let h=0,m=i.length-1;for(;h<=m;){const g=m+h>>1,y=c(l,i[g]);if(y>0)h=g+1;else if(y<0)m=g-1;else return g}return-h-1}static numberComparator(i,l){return i-l}}class b{static numberOfTrailingZeros(i){let l;if(i===0)return 32;let c=31;return l=i<<16,l!==0&&(c-=16,i=l),l=i<<8,l!==0&&(c-=8,i=l),l=i<<4,l!==0&&(c-=4,i=l),l=i<<2,l!==0&&(c-=2,i=l),c-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let l=1;return i>>>16||(l+=16,i<<=16),i>>>24||(l+=8,i<<=8),i>>>28||(l+=4,i<<=4),i>>>30||(l+=2,i<<=2),l-=i>>>31,l}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,l){return Math.trunc(i/l)}static parseInt(i,l=void 0){return parseInt(i,l)}}b.MIN_VALUE_32_BITS=-2147483648,b.MAX_VALUE=Number.MAX_SAFE_INTEGER;class T{constructor(i,l){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,l==null?this.bits=T.makeArray(i):this.bits=l)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){const l=T.makeArray(i);C.arraycopy(this.bits,0,l,0,this.bits.length),this.bits=l}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){const l=this.size;if(i>=l)return l;const c=this.bits;let h=Math.floor(i/32),m=c[h];m&=~((1<<(i&31))-1);const g=c.length;for(;m===0;){if(++h===g)return l;m=c[h]}const y=h*32+b.numberOfTrailingZeros(m);return y>l?l:y}getNextUnset(i){const l=this.size;if(i>=l)return l;const c=this.bits;let h=Math.floor(i/32),m=~c[h];m&=~((1<<(i&31))-1);const g=c.length;for(;m===0;){if(++h===g)return l;m=~c[h]}const y=h*32+b.numberOfTrailingZeros(m);return y>l?l:y}setBulk(i,l){this.bits[Math.floor(i/32)]=l}setRange(i,l){if(l<i||i<0||l>this.size)throw new w;if(l===i)return;l--;const c=Math.floor(i/32),h=Math.floor(l/32),m=this.bits;for(let g=c;g<=h;g++){const y=g>c?0:i&31,I=(2<<(g<h?31:l&31))-(1<<y);m[g]|=I}}clear(){const i=this.bits.length,l=this.bits;for(let c=0;c<i;c++)l[c]=0}isRange(i,l,c){if(l<i||i<0||l>this.size)throw new w;if(l===i)return!0;l--;const h=Math.floor(i/32),m=Math.floor(l/32),g=this.bits;for(let y=h;y<=m;y++){const E=y>h?0:i&31,D=(2<<(y<m?31:l&31))-(1<<E)&4294967295;if((g[y]&D)!==(c?D:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,l){if(l<0||l>32)throw new w("Num bits must be between 0 and 32");this.ensureCapacity(this.size+l);for(let c=l;c>0;c--)this.appendBit((i>>c-1&1)===1)}appendBitArray(i){const l=i.size;this.ensureCapacity(this.size+l);for(let c=0;c<l;c++)this.appendBit(i.get(c))}xor(i){if(this.size!==i.size)throw new w("Sizes don't match");const l=this.bits;for(let c=0,h=l.length;c<h;c++)l[c]^=i.bits[c]}toBytes(i,l,c,h){for(let m=0;m<h;m++){let g=0;for(let y=0;y<8;y++)this.get(i)&&(g|=1<<7-y),i++;l[c+m]=g}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),l=Math.floor((this.size-1)/32),c=l+1,h=this.bits;for(let m=0;m<c;m++){let g=h[m];g=g>>1&1431655765|(g&1431655765)<<1,g=g>>2&858993459|(g&858993459)<<2,g=g>>4&252645135|(g&252645135)<<4,g=g>>8&16711935|(g&16711935)<<8,g=g>>16&65535|(g&65535)<<16,i[l-m]=g}if(this.size!==c*32){const m=c*32-this.size;let g=i[0]>>>m;for(let y=1;y<c;y++){const E=i[y];g|=E<<32-m,i[y-1]=g,g=E>>>m}i[c-1]=g}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof T))return!1;const l=i;return this.size===l.size&&k.equals(this.bits,l.bits)}hashCode(){return 31*this.size+k.hashCode(this.bits)}toString(){let i="";for(let l=0,c=this.size;l<c;l++)l&7||(i+=" "),i+=this.get(l)?"X":".";return i}clone(){return new T(this.size,this.bits.slice())}}var O;(function(F){F[F.OTHER=0]="OTHER",F[F.PURE_BARCODE=1]="PURE_BARCODE",F[F.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",F[F.TRY_HARDER=3]="TRY_HARDER",F[F.CHARACTER_SET=4]="CHARACTER_SET",F[F.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",F[F.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",F[F.ASSUME_GS1=7]="ASSUME_GS1",F[F.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",F[F.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",F[F.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(O||(O={}));var L=O;class R extends p{static getFormatInstance(){return new R}}R.kind="FormatException";var M;(function(F){F[F.Cp437=0]="Cp437",F[F.ISO8859_1=1]="ISO8859_1",F[F.ISO8859_2=2]="ISO8859_2",F[F.ISO8859_3=3]="ISO8859_3",F[F.ISO8859_4=4]="ISO8859_4",F[F.ISO8859_5=5]="ISO8859_5",F[F.ISO8859_6=6]="ISO8859_6",F[F.ISO8859_7=7]="ISO8859_7",F[F.ISO8859_8=8]="ISO8859_8",F[F.ISO8859_9=9]="ISO8859_9",F[F.ISO8859_10=10]="ISO8859_10",F[F.ISO8859_11=11]="ISO8859_11",F[F.ISO8859_13=12]="ISO8859_13",F[F.ISO8859_14=13]="ISO8859_14",F[F.ISO8859_15=14]="ISO8859_15",F[F.ISO8859_16=15]="ISO8859_16",F[F.SJIS=16]="SJIS",F[F.Cp1250=17]="Cp1250",F[F.Cp1251=18]="Cp1251",F[F.Cp1252=19]="Cp1252",F[F.Cp1256=20]="Cp1256",F[F.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",F[F.UTF8=22]="UTF8",F[F.ASCII=23]="ASCII",F[F.Big5=24]="Big5",F[F.GB18030=25]="GB18030",F[F.EUC_KR=26]="EUC_KR"})(M||(M={}));class P{constructor(i,l,c,...h){this.valueIdentifier=i,this.name=c,typeof l=="number"?this.values=Int32Array.from([l]):this.values=l,this.otherEncodingNames=h,P.VALUE_IDENTIFIER_TO_ECI.set(i,this),P.NAME_TO_ECI.set(c,this);const m=this.values;for(let g=0,y=m.length;g!==y;g++){const E=m[g];P.VALUES_TO_ECI.set(E,this)}for(const g of h)P.NAME_TO_ECI.set(g,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new R("incorect value");const l=P.VALUES_TO_ECI.get(i);if(l===void 0)throw new R("incorect value");return l}static getCharacterSetECIByName(i){const l=P.NAME_TO_ECI.get(i);if(l===void 0)throw new R("incorect value");return l}equals(i){if(!(i instanceof P))return!1;const l=i;return this.getName()===l.getName()}}P.VALUE_IDENTIFIER_TO_ECI=new Map,P.VALUES_TO_ECI=new Map,P.NAME_TO_ECI=new Map,P.Cp437=new P(M.Cp437,Int32Array.from([0,2]),"Cp437"),P.ISO8859_1=new P(M.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),P.ISO8859_2=new P(M.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),P.ISO8859_3=new P(M.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),P.ISO8859_4=new P(M.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),P.ISO8859_5=new P(M.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),P.ISO8859_6=new P(M.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),P.ISO8859_7=new P(M.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),P.ISO8859_8=new P(M.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),P.ISO8859_9=new P(M.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),P.ISO8859_10=new P(M.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),P.ISO8859_11=new P(M.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),P.ISO8859_13=new P(M.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),P.ISO8859_14=new P(M.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),P.ISO8859_15=new P(M.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),P.ISO8859_16=new P(M.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),P.SJIS=new P(M.SJIS,20,"SJIS","Shift_JIS"),P.Cp1250=new P(M.Cp1250,21,"Cp1250","windows-1250"),P.Cp1251=new P(M.Cp1251,22,"Cp1251","windows-1251"),P.Cp1252=new P(M.Cp1252,23,"Cp1252","windows-1252"),P.Cp1256=new P(M.Cp1256,24,"Cp1256","windows-1256"),P.UnicodeBigUnmarked=new P(M.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),P.UTF8=new P(M.UTF8,26,"UTF8","UTF-8"),P.ASCII=new P(M.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),P.Big5=new P(M.Big5,28,"Big5"),P.GB18030=new P(M.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),P.EUC_KR=new P(M.EUC_KR,30,"EUC_KR","EUC-KR");class q extends p{}q.kind="UnsupportedOperationException";class G{static decode(i,l){const c=this.encodingName(l);return this.customDecoder?this.customDecoder(i,c):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(c)?this.decodeFallback(i,c):new TextDecoder(c).decode(i)}static shouldDecodeOnFallback(i){return!G.isBrowser()&&i==="ISO-8859-1"}static encode(i,l){const c=this.encodingName(l);return this.customEncoder?this.customEncoder(i,c):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof P?i:P.getCharacterSetECIByName(i)}static decodeFallback(i,l){const c=this.encodingCharacterSet(l);if(G.isDecodeFallbackSupported(c)){let h="";for(let m=0,g=i.length;m<g;m++){let y=i[m].toString(16);y.length<2&&(y="0"+y),h+="%"+y}return decodeURIComponent(h)}if(c.equals(P.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new q(`Encoding ${this.encodingName(l)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(P.UTF8)||i.equals(P.ISO8859_1)||i.equals(P.ASCII)}static encodeFallback(i){const c=btoa(unescape(encodeURIComponent(i))).split(""),h=[];for(let m=0;m<c.length;m++)h.push(c[m].charCodeAt(0));return new Uint8Array(h)}}class B{static castAsNonUtf8Char(i,l=null){const c=l?l.getName():this.ISO88591;return G.decode(new Uint8Array([i]),c)}static guessEncoding(i,l){if(l!=null&&l.get(L.CHARACTER_SET)!==void 0)return l.get(L.CHARACTER_SET).toString();const c=i.length;let h=!0,m=!0,g=!0,y=0,E=0,I=0,D=0,z=0,$=0,Z=0,re=0,ne=0,he=0,ge=0;const Le=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let Fe=0;Fe<c&&(h||m||g);Fe++){const Oe=i[Fe]&255;g&&(y>0?Oe&128?y--:g=!1:Oe&128&&(Oe&64?(y++,Oe&32?(y++,Oe&16?(y++,Oe&8?g=!1:D++):I++):E++):g=!1)),h&&(Oe>127&&Oe<160?h=!1:Oe>159&&(Oe<192||Oe===215||Oe===247)&&ge++),m&&(z>0?Oe<64||Oe===127||Oe>252?m=!1:z--:Oe===128||Oe===160||Oe>239?m=!1:Oe>160&&Oe<224?($++,re=0,Z++,Z>ne&&(ne=Z)):Oe>127?(z++,Z=0,re++,re>he&&(he=re)):(Z=0,re=0))}return g&&y>0&&(g=!1),m&&z>0&&(m=!1),g&&(Le||E+I+D>0)?B.UTF8:m&&(B.ASSUME_SHIFT_JIS||ne>=3||he>=3)?B.SHIFT_JIS:h&&m?ne===2&&$===2||ge*10>=c?B.SHIFT_JIS:B.ISO88591:h?B.ISO88591:m?B.SHIFT_JIS:g?B.UTF8:B.PLATFORM_DEFAULT_ENCODING}static format(i,...l){let c=-1;function h(g,y,E,I,D,z){if(g==="%%")return"%";if(l[++c]===void 0)return;g=I?parseInt(I.substr(1)):void 0;let $=D?parseInt(D.substr(1)):void 0,Z;switch(z){case"s":Z=l[c];break;case"c":Z=l[c][0];break;case"f":Z=parseFloat(l[c]).toFixed(g);break;case"p":Z=parseFloat(l[c]).toPrecision(g);break;case"e":Z=parseFloat(l[c]).toExponential(g);break;case"x":Z=parseInt(l[c]).toString($||16);break;case"d":Z=parseFloat(parseInt(l[c],$||10).toPrecision(g)).toFixed(0);break}Z=typeof Z=="object"?JSON.stringify(Z):(+Z).toString($);let re=parseInt(E),ne=E&&E[0]+""=="0"?"0":" ";for(;Z.length<re;)Z=y!==void 0?Z+ne:ne+Z;return Z}let m=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(m,h)}static getBytes(i,l){return G.encode(i,l)}static getCharCode(i,l=0){return i.charCodeAt(l)}static getCharAt(i){return String.fromCharCode(i)}}B.SHIFT_JIS=P.SJIS.getName(),B.GB2312="GB2312",B.ISO88591=P.ISO8859_1.getName(),B.EUC_JP="EUC_JP",B.UTF8=P.UTF8.getName(),B.PLATFORM_DEFAULT_ENCODING=B.UTF8,B.ASSUME_SHIFT_JIS=!1;class V{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=B.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,l,c){for(let h=l;l<l+c;h++)this.append(i[h]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,l){this.value=this.value.substr(0,i)+l+this.value.substr(i+1)}substring(i,l){return this.value.substring(i,l)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,l){this.value=this.value.substr(0,i)+l+this.value.substr(i+l.length)}}class ee{constructor(i,l,c,h){if(this.width=i,this.height=l,this.rowSize=c,this.bits=h,l==null&&(l=i),this.height=l,i<1||l<1)throw new w("Both dimensions must be greater than 0");c==null&&(c=Math.floor((i+31)/32)),this.rowSize=c,h==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const l=i.length,c=i[0].length,h=new ee(c,l);for(let m=0;m<l;m++){const g=i[m];for(let y=0;y<c;y++)g[y]&&h.set(y,m)}return h}static parseFromString(i,l,c){if(i===null)throw new w("stringRepresentation cannot be null");const h=new Array(i.length);let m=0,g=0,y=-1,E=0,I=0;for(;I<i.length;)if(i.charAt(I)===`
`||i.charAt(I)==="\r"){if(m>g){if(y===-1)y=m-g;else if(m-g!==y)throw new w("row lengths do not match");g=m,E++}I++}else if(i.substring(I,I+l.length)===l)I+=l.length,h[m]=!0,m++;else if(i.substring(I,I+c.length)===c)I+=c.length,h[m]=!1,m++;else throw new w("illegal character encountered: "+i.substring(I));if(m>g){if(y===-1)y=m-g;else if(m-g!==y)throw new w("row lengths do not match");E++}const D=new ee(y,E);for(let z=0;z<m;z++)h[z]&&D.set(Math.floor(z%y),Math.floor(z/y));return D}get(i,l){const c=l*this.rowSize+Math.floor(i/32);return(this.bits[c]>>>(i&31)&1)!==0}set(i,l){const c=l*this.rowSize+Math.floor(i/32);this.bits[c]|=1<<(i&31)&4294967295}unset(i,l){const c=l*this.rowSize+Math.floor(i/32);this.bits[c]&=~(1<<(i&31)&4294967295)}flip(i,l){const c=l*this.rowSize+Math.floor(i/32);this.bits[c]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new w("input matrix dimensions do not match");const l=new T(Math.floor(this.width/32)+1),c=this.rowSize,h=this.bits;for(let m=0,g=this.height;m<g;m++){const y=m*c,E=i.getRow(m,l).getBitArray();for(let I=0;I<c;I++)h[y+I]^=E[I]}}clear(){const i=this.bits,l=i.length;for(let c=0;c<l;c++)i[c]=0}setRegion(i,l,c,h){if(l<0||i<0)throw new w("Left and top must be nonnegative");if(h<1||c<1)throw new w("Height and width must be at least 1");const m=i+c,g=l+h;if(g>this.height||m>this.width)throw new w("The region must fit inside the matrix");const y=this.rowSize,E=this.bits;for(let I=l;I<g;I++){const D=I*y;for(let z=i;z<m;z++)E[D+Math.floor(z/32)]|=1<<(z&31)&4294967295}}getRow(i,l){l==null||l.getSize()<this.width?l=new T(this.width):l.clear();const c=this.rowSize,h=this.bits,m=i*c;for(let g=0;g<c;g++)l.setBulk(g*32,h[m+g]);return l}setRow(i,l){C.arraycopy(l.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),l=this.getHeight();let c=new T(i),h=new T(i);for(let m=0,g=Math.floor((l+1)/2);m<g;m++)c=this.getRow(m,c),h=this.getRow(l-1-m,h),c.reverse(),h.reverse(),this.setRow(m,h),this.setRow(l-1-m,c)}getEnclosingRectangle(){const i=this.width,l=this.height,c=this.rowSize,h=this.bits;let m=i,g=l,y=-1,E=-1;for(let I=0;I<l;I++)for(let D=0;D<c;D++){const z=h[I*c+D];if(z!==0){if(I<g&&(g=I),I>E&&(E=I),D*32<m){let $=0;for(;!(z<<31-$&4294967295);)$++;D*32+$<m&&(m=D*32+$)}if(D*32+31>y){let $=31;for(;!(z>>>$);)$--;D*32+$>y&&(y=D*32+$)}}}return y<m||E<g?null:Int32Array.from([m,g,y-m+1,E-g+1])}getTopLeftOnBit(){const i=this.rowSize,l=this.bits;let c=0;for(;c<l.length&&l[c]===0;)c++;if(c===l.length)return null;const h=c/i;let m=c%i*32;const g=l[c];let y=0;for(;!(g<<31-y&4294967295);)y++;return m+=y,Int32Array.from([m,h])}getBottomRightOnBit(){const i=this.rowSize,l=this.bits;let c=l.length-1;for(;c>=0&&l[c]===0;)c--;if(c<0)return null;const h=Math.floor(c/i);let m=Math.floor(c%i)*32;const g=l[c];let y=31;for(;!(g>>>y);)y--;return m+=y,Int32Array.from([m,h])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof ee))return!1;const l=i;return this.width===l.width&&this.height===l.height&&this.rowSize===l.rowSize&&k.equals(this.bits,l.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+k.hashCode(this.bits),i}toString(i="X ",l="  ",c=`
`){return this.buildToString(i,l,c)}buildToString(i,l,c){let h=new V;for(let m=0,g=this.height;m<g;m++){for(let y=0,E=this.width;y<E;y++)h.append(this.get(y,m)?i:l);h.append(c)}return h.toString()}clone(){return new ee(this.width,this.height,this.rowSize,this.bits.slice())}}class X extends p{static getNotFoundInstance(){return new X}}X.kind="NotFoundException";class le extends N{constructor(i){super(i),this.luminances=le.EMPTY,this.buckets=new Int32Array(le.LUMINANCE_BUCKETS)}getBlackRow(i,l){const c=this.getLuminanceSource(),h=c.getWidth();l==null||l.getSize()<h?l=new T(h):l.clear(),this.initArrays(h);const m=c.getRow(i,this.luminances),g=this.buckets;for(let E=0;E<h;E++)g[(m[E]&255)>>le.LUMINANCE_SHIFT]++;const y=le.estimateBlackPoint(g);if(h<3)for(let E=0;E<h;E++)(m[E]&255)<y&&l.set(E);else{let E=m[0]&255,I=m[1]&255;for(let D=1;D<h-1;D++){const z=m[D+1]&255;(I*4-E-z)/2<y&&l.set(D),E=I,I=z}}return l}getBlackMatrix(){const i=this.getLuminanceSource(),l=i.getWidth(),c=i.getHeight(),h=new ee(l,c);this.initArrays(l);const m=this.buckets;for(let E=1;E<5;E++){const I=Math.floor(c*E/5),D=i.getRow(I,this.luminances),z=Math.floor(l*4/5);for(let $=Math.floor(l/5);$<z;$++){const Z=D[$]&255;m[Z>>le.LUMINANCE_SHIFT]++}}const g=le.estimateBlackPoint(m),y=i.getMatrix();for(let E=0;E<c;E++){const I=E*l;for(let D=0;D<l;D++)(y[I+D]&255)<g&&h.set(D,E)}return h}createBinarizer(i){return new le(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const l=this.buckets;for(let c=0;c<le.LUMINANCE_BUCKETS;c++)l[c]=0}static estimateBlackPoint(i){const l=i.length;let c=0,h=0,m=0;for(let D=0;D<l;D++)i[D]>m&&(h=D,m=i[D]),i[D]>c&&(c=i[D]);let g=0,y=0;for(let D=0;D<l;D++){const z=D-h,$=i[D]*z*z;$>y&&(g=D,y=$)}if(h>g){const D=h;h=g,g=D}if(g-h<=l/16)throw new X;let E=g-1,I=-1;for(let D=g-1;D>h;D--){const z=D-h,$=z*z*(g-D)*(c-i[D]);$>I&&(E=D,I=$)}return E<<le.LUMINANCE_SHIFT}}le.LUMINANCE_BITS=5,le.LUMINANCE_SHIFT=8-le.LUMINANCE_BITS,le.LUMINANCE_BUCKETS=1<<le.LUMINANCE_BITS,le.EMPTY=Uint8ClampedArray.from([0]);class ue extends le{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const i=this.getLuminanceSource(),l=i.getWidth(),c=i.getHeight();if(l>=ue.MINIMUM_DIMENSION&&c>=ue.MINIMUM_DIMENSION){const h=i.getMatrix();let m=l>>ue.BLOCK_SIZE_POWER;l&ue.BLOCK_SIZE_MASK&&m++;let g=c>>ue.BLOCK_SIZE_POWER;c&ue.BLOCK_SIZE_MASK&&g++;const y=ue.calculateBlackPoints(h,m,g,l,c),E=new ee(l,c);ue.calculateThresholdForBlock(h,m,g,l,c,y,E),this.matrix=E}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new ue(i)}static calculateThresholdForBlock(i,l,c,h,m,g,y){const E=m-ue.BLOCK_SIZE,I=h-ue.BLOCK_SIZE;for(let D=0;D<c;D++){let z=D<<ue.BLOCK_SIZE_POWER;z>E&&(z=E);const $=ue.cap(D,2,c-3);for(let Z=0;Z<l;Z++){let re=Z<<ue.BLOCK_SIZE_POWER;re>I&&(re=I);const ne=ue.cap(Z,2,l-3);let he=0;for(let Le=-2;Le<=2;Le++){const Fe=g[$+Le];he+=Fe[ne-2]+Fe[ne-1]+Fe[ne]+Fe[ne+1]+Fe[ne+2]}const ge=he/25;ue.thresholdBlock(i,re,z,ge,h,y)}}}static cap(i,l,c){return i<l?l:i>c?c:i}static thresholdBlock(i,l,c,h,m,g){for(let y=0,E=c*m+l;y<ue.BLOCK_SIZE;y++,E+=m)for(let I=0;I<ue.BLOCK_SIZE;I++)(i[E+I]&255)<=h&&g.set(l+I,c+y)}static calculateBlackPoints(i,l,c,h,m){const g=m-ue.BLOCK_SIZE,y=h-ue.BLOCK_SIZE,E=new Array(c);for(let I=0;I<c;I++){E[I]=new Int32Array(l);let D=I<<ue.BLOCK_SIZE_POWER;D>g&&(D=g);for(let z=0;z<l;z++){let $=z<<ue.BLOCK_SIZE_POWER;$>y&&($=y);let Z=0,re=255,ne=0;for(let ge=0,Le=D*h+$;ge<ue.BLOCK_SIZE;ge++,Le+=h){for(let Fe=0;Fe<ue.BLOCK_SIZE;Fe++){const Oe=i[Le+Fe]&255;Z+=Oe,Oe<re&&(re=Oe),Oe>ne&&(ne=Oe)}if(ne-re>ue.MIN_DYNAMIC_RANGE)for(ge++,Le+=h;ge<ue.BLOCK_SIZE;ge++,Le+=h)for(let Fe=0;Fe<ue.BLOCK_SIZE;Fe++)Z+=i[Le+Fe]&255}let he=Z>>ue.BLOCK_SIZE_POWER*2;if(ne-re<=ue.MIN_DYNAMIC_RANGE&&(he=re/2,I>0&&z>0)){const ge=(E[I-1][z]+2*E[I][z-1]+E[I-1][z-1])/4;re<ge&&(he=ge)}E[I][z]=he}}return E}}ue.BLOCK_SIZE_POWER=3,ue.BLOCK_SIZE=1<<ue.BLOCK_SIZE_POWER,ue.BLOCK_SIZE_MASK=ue.BLOCK_SIZE-1,ue.MINIMUM_DIMENSION=ue.BLOCK_SIZE*5,ue.MIN_DYNAMIC_RANGE=24;class oe{constructor(i,l){this.width=i,this.height=l}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,l,c,h){throw new q("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new q("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new q("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let l=new V;for(let c=0;c<this.height;c++){const h=this.getRow(c,i);for(let m=0;m<this.width;m++){const g=h[m]&255;let y;g<64?y="#":g<128?y="+":g<192?y=".":y=" ",l.append(y)}l.append(`
`)}return l.toString()}}class te extends oe{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,l){const c=this.delegate.getRow(i,l),h=this.getWidth();for(let m=0;m<h;m++)c[m]=255-(c[m]&255);return c}getMatrix(){const i=this.delegate.getMatrix(),l=this.getWidth()*this.getHeight(),c=new Uint8ClampedArray(l);for(let h=0;h<l;h++)c[h]=255-(i[h]&255);return c}isCropSupported(){return this.delegate.isCropSupported()}crop(i,l,c,h){return new te(this.delegate.crop(i,l,c,h))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new te(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new te(this.delegate.rotateCounterClockwise45())}}class be extends oe{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=be.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const l=i.getContext("2d").getImageData(0,0,i.width,i.height);return be.toGrayscaleBuffer(l.data,i.width,i.height)}static toGrayscaleBuffer(i,l,c){const h=new Uint8ClampedArray(l*c);for(let m=0,g=0,y=i.length;m<y;m+=4,g++){let E;if(i[m+3]===0)E=255;else{const D=i[m],z=i[m+1],$=i[m+2];E=306*D+601*z+117*$+512>>10}h[g]=E}return h}getRow(i,l){if(i<0||i>=this.getHeight())throw new w("Requested row is outside the image: "+i);const c=this.getWidth(),h=i*c;return l===null?l=this.buffer.slice(h,h+c):(l.length<c&&(l=new Uint8ClampedArray(c)),l.set(this.buffer.slice(h,h+c))),l}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,l,c,h){return super.crop(i,l,c,h),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const l=this.getTempCanvasElement(),c=l.getContext("2d"),h=i*be.DEGREE_TO_RADIANS,m=this.canvas.width,g=this.canvas.height,y=Math.ceil(Math.abs(Math.cos(h))*m+Math.abs(Math.sin(h))*g),E=Math.ceil(Math.abs(Math.sin(h))*m+Math.abs(Math.cos(h))*g);return l.width=y,l.height=E,c.translate(y/2,E/2),c.rotate(h),c.drawImage(this.canvas,m/-2,g/-2),this.buffer=be.makeBufferFromCanvasImageData(l),this}invert(){return new te(this)}}be.DEGREE_TO_RADIANS=Math.PI/180;class ve{constructor(i,l,c){this.deviceId=i,this.label=l,this.kind="videoinput",this.groupId=c||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var H=(globalThis||ln||self||window||void 0)&&(globalThis||ln||self||window||void 0).__awaiter||function(F,i,l,c){function h(m){return m instanceof l?m:new l(function(g){g(m)})}return new(l||(l=Promise))(function(m,g){function y(D){try{I(c.next(D))}catch(z){g(z)}}function E(D){try{I(c.throw(D))}catch(z){g(z)}}function I(D){D.done?m(D.value):h(D.value).then(y,E)}I((c=c.apply(F,i||[])).next())})};class J{constructor(i,l=500,c){this.reader=i,this.timeBetweenScansMillis=l,this._hints=c,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return H(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),l=[];for(const c of i){const h=c.kind==="video"?"videoinput":c.kind;if(h!=="videoinput")continue;const m=c.deviceId||c.id,g=c.label||`Video device ${l.length+1}`,y=c.groupId,E={deviceId:m,label:g,kind:h,groupId:y};l.push(E)}return l})}getVideoInputDevices(){return H(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(l=>new ve(l.deviceId,l.label))})}findDeviceById(i){return H(this,void 0,void 0,function*(){const l=yield this.listVideoInputDevices();return l?l.find(c=>c.deviceId===i):null})}decodeFromInputVideoDevice(i,l){return H(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,l)})}decodeOnceFromVideoDevice(i,l){return H(this,void 0,void 0,function*(){this.reset();let c;i?c={deviceId:{exact:i}}:c={facingMode:"environment"};const h={video:c};return yield this.decodeOnceFromConstraints(h,l)})}decodeOnceFromConstraints(i,l){return H(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(c,l)})}decodeOnceFromStream(i,l){return H(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(i,l);return yield this.decodeOnce(c)})}decodeFromInputVideoDeviceContinuously(i,l,c){return H(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,l,c)})}decodeFromVideoDevice(i,l,c){return H(this,void 0,void 0,function*(){let h;i?h={deviceId:{exact:i}}:h={facingMode:"environment"};const m={video:h};return yield this.decodeFromConstraints(m,l,c)})}decodeFromConstraints(i,l,c){return H(this,void 0,void 0,function*(){const h=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(h,l,c)})}decodeFromStream(i,l,c){return H(this,void 0,void 0,function*(){this.reset();const h=yield this.attachStreamToVideo(i,l);return yield this.decodeContinuously(h,c)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,l){return H(this,void 0,void 0,function*(){const c=this.prepareVideoElement(l);return this.addVideoSource(c,i),this.videoElement=c,this.stream=i,yield this.playVideoOnLoadAsync(c),c})}playVideoOnLoadAsync(i){return new Promise((l,c)=>this.playVideoOnLoad(i,()=>l()))}playVideoOnLoad(i,l){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",l),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return H(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,l){const c=document.getElementById(i);if(!c)throw new x(`element with id '${i}' not found`);if(c.nodeName.toLowerCase()!==l.toLowerCase())throw new x(`element with id '${i}' must be an ${l} element`);return c}decodeFromImage(i,l){if(!i&&!l)throw new x("either imageElement with a src set or an url must be provided");return l&&!i?this.decodeFromImageUrl(l):this.decodeFromImageElement(i)}decodeFromVideo(i,l){if(!i&&!l)throw new x("Either an element with a src set or an URL must be provided");return l&&!i?this.decodeFromVideoUrl(l):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,l,c){if(i===void 0&&l===void 0)throw new x("Either an element with a src set or an URL must be provided");return l&&!i?this.decodeFromVideoUrlContinuously(l,c):this.decodeFromVideoElementContinuously(i,c)}decodeFromImageElement(i){if(!i)throw new x("An image element must be provided.");this.reset();const l=this.prepareImageElement(i);this.imageElement=l;let c;return this.isImageLoaded(l)?c=this.decodeOnce(l,!1,!0):c=this._decodeOnLoadImage(l),c}decodeFromVideoElement(i){const l=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(l)}decodeFromVideoElementContinuously(i,l){const c=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(c,l)}_decodeFromVideoElementSetup(i){if(!i)throw new x("A video element must be provided.");this.reset();const l=this.prepareVideoElement(i);return this.videoElement=l,l}decodeFromImageUrl(i){if(!i)throw new x("An URL must be provided.");this.reset();const l=this.prepareImageElement();this.imageElement=l;const c=this._decodeOnLoadImage(l);return l.src=i,c}decodeFromVideoUrl(i){if(!i)throw new x("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),c=this.decodeFromVideoElement(l);return l.src=i,c}decodeFromVideoUrlContinuously(i,l){if(!i)throw new x("An URL must be provided.");this.reset();const c=this.prepareVideoElement(),h=this.decodeFromVideoElementContinuously(c,l);return c.src=i,h}_decodeOnLoadImage(i){return new Promise((l,c)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(l,c),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return H(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,l){return H(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,l)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let l;return typeof i>"u"&&(l=document.createElement("img"),l.width=200,l.height=200),typeof i=="string"&&(l=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(l=i),l}prepareVideoElement(i){let l;return!i&&typeof document<"u"&&(l=document.createElement("video"),l.width=200,l.height=200),typeof i=="string"&&(l=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(l=i),l.setAttribute("autoplay","true"),l.setAttribute("muted","true"),l.setAttribute("playsinline","true"),l}decodeOnce(i,l=!0,c=!0){this._stopAsyncDecode=!1;const h=(m,g)=>{if(this._stopAsyncDecode){g(new X("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const y=this.decode(i);m(y)}catch(y){const E=l&&y instanceof X,D=(y instanceof j||y instanceof R)&&c;if(E||D)return setTimeout(h,this._timeBetweenDecodingAttempts,m,g);g(y)}};return new Promise((m,g)=>h(m,g))}decodeContinuously(i,l){this._stopContinuousDecode=!1;const c=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const h=this.decode(i);l(h,null),setTimeout(c,this.timeBetweenScansMillis)}catch(h){l(null,h);const m=h instanceof j||h instanceof R,g=h instanceof X;(m||g)&&setTimeout(c,this._timeBetweenDecodingAttempts)}};c()}decode(i){const l=this.createBinaryBitmap(i);return this.decodeBitmap(l)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,l,c){l||(l={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),c||(c=this.captureCanvasContext),c.drawImage(i,l.sx,l.sy,l.sWidth,l.sHeight,l.dx,l.dy,l.dWidth,l.dHeight)}drawImageOnCanvas(i,l,c=this.captureCanvasContext){l||(l={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),c||(c=this.captureCanvasContext),c.drawImage(i,l.sx,l.sy,l.sWidth,l.sHeight,l.dx,l.dy,l.dWidth,l.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const l=this.getCaptureCanvas(i),c=new be(l),h=new ue(c);return new _(h)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const c=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=c}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const l=this.createCaptureCanvas(i);this.captureCanvas=l}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const l=document.createElement("canvas");let c,h;return typeof i<"u"&&(i instanceof HTMLVideoElement?(c=i.videoWidth,h=i.videoHeight):i instanceof HTMLImageElement&&(c=i.naturalWidth||i.width,h=i.naturalHeight||i.height)),l.style.width=c+"px",l.style.height=h+"px",l.width=c,l.height=h,l}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,l){try{i.srcObject=l}catch{i.src=URL.createObjectURL(l)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class K{constructor(i,l,c=l==null?0:8*l.length,h,m,g=C.currentTimeMillis()){this.text=i,this.rawBytes=l,this.numBits=c,this.resultPoints=h,this.format=m,this.timestamp=g,this.text=i,this.rawBytes=l,c==null?this.numBits=l==null?0:8*l.length:this.numBits=c,this.resultPoints=h,this.format=m,this.resultMetadata=null,g==null?this.timestamp=C.currentTimeMillis():this.timestamp=g}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,l){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,l)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){const l=this.resultPoints;if(l===null)this.resultPoints=i;else if(i!==null&&i.length>0){const c=new Array(l.length+i.length);C.arraycopy(l,0,c,0,l.length),C.arraycopy(i,0,c,l.length,i.length),this.resultPoints=c}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ae;(function(F){F[F.AZTEC=0]="AZTEC",F[F.CODABAR=1]="CODABAR",F[F.CODE_39=2]="CODE_39",F[F.CODE_93=3]="CODE_93",F[F.CODE_128=4]="CODE_128",F[F.DATA_MATRIX=5]="DATA_MATRIX",F[F.EAN_8=6]="EAN_8",F[F.EAN_13=7]="EAN_13",F[F.ITF=8]="ITF",F[F.MAXICODE=9]="MAXICODE",F[F.PDF_417=10]="PDF_417",F[F.QR_CODE=11]="QR_CODE",F[F.RSS_14=12]="RSS_14",F[F.RSS_EXPANDED=13]="RSS_EXPANDED",F[F.UPC_A=14]="UPC_A",F[F.UPC_E=15]="UPC_E",F[F.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ae||(ae={}));var de=ae,se;(function(F){F[F.OTHER=0]="OTHER",F[F.ORIENTATION=1]="ORIENTATION",F[F.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",F[F.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",F[F.ISSUE_NUMBER=4]="ISSUE_NUMBER",F[F.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",F[F.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",F[F.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",F[F.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",F[F.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",F[F.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(se||(se={}));var me=se;class Re{constructor(i,l,c,h,m=-1,g=-1){this.rawBytes=i,this.text=l,this.byteSegments=c,this.ecLevel=h,this.structuredAppendSequenceNumber=m,this.structuredAppendParity=g,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class ze{exp(i){return this.expTable[i]}log(i){if(i===0)throw new w;return this.logTable[i]}static addOrSubtract(i,l){return i^l}}class ye{constructor(i,l){if(l.length===0)throw new w;this.field=i;const c=l.length;if(c>1&&l[0]===0){let h=1;for(;h<c&&l[h]===0;)h++;h===c?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(c-h),C.arraycopy(l,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=l}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);const l=this.coefficients;let c;if(i===1){c=0;for(let g=0,y=l.length;g!==y;g++){const E=l[g];c=ze.addOrSubtract(c,E)}return c}c=l[0];const h=l.length,m=this.field;for(let g=1;g<h;g++)c=ze.addOrSubtract(m.multiply(i,c),l[g]);return c}addOrSubtract(i){if(!this.field.equals(i.field))throw new w("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let l=this.coefficients,c=i.coefficients;if(l.length>c.length){const g=l;l=c,c=g}let h=new Int32Array(c.length);const m=c.length-l.length;C.arraycopy(c,0,h,0,m);for(let g=m;g<c.length;g++)h[g]=ze.addOrSubtract(l[g-m],c[g]);return new ye(this.field,h)}multiply(i){if(!this.field.equals(i.field))throw new w("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const l=this.coefficients,c=l.length,h=i.coefficients,m=h.length,g=new Int32Array(c+m-1),y=this.field;for(let E=0;E<c;E++){const I=l[E];for(let D=0;D<m;D++)g[E+D]=ze.addOrSubtract(g[E+D],y.multiply(I,h[D]))}return new ye(y,g)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;const l=this.coefficients.length,c=this.field,h=new Int32Array(l),m=this.coefficients;for(let g=0;g<l;g++)h[g]=c.multiply(m[g],i);return new ye(c,h)}multiplyByMonomial(i,l){if(i<0)throw new w;if(l===0)return this.field.getZero();const c=this.coefficients,h=c.length,m=new Int32Array(h+i),g=this.field;for(let y=0;y<h;y++)m[y]=g.multiply(c[y],l);return new ye(g,m)}divide(i){if(!this.field.equals(i.field))throw new w("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new w("Divide by 0");const l=this.field;let c=l.getZero(),h=this;const m=i.getCoefficient(i.getDegree()),g=l.inverse(m);for(;h.getDegree()>=i.getDegree()&&!h.isZero();){const y=h.getDegree()-i.getDegree(),E=l.multiply(h.getCoefficient(h.getDegree()),g),I=i.multiplyByMonomial(y,E),D=l.buildMonomial(y,E);c=c.addOrSubtract(D),h=h.addOrSubtract(I)}return[c,h]}toString(){let i="";for(let l=this.getDegree();l>=0;l--){let c=this.getCoefficient(l);if(c!==0){if(c<0?(i+=" - ",c=-c):i.length>0&&(i+=" + "),l===0||c!==1){const h=this.field.log(c);h===0?i+="1":h===1?i+="a":(i+="a^",i+=h)}l!==0&&(l===1?i+="x":(i+="x^",i+=l))}}return i}}class Ne extends p{}Ne.kind="ArithmeticException";class we extends ze{constructor(i,l,c){super(),this.primitive=i,this.size=l,this.generatorBase=c;const h=new Int32Array(l);let m=1;for(let y=0;y<l;y++)h[y]=m,m*=2,m>=l&&(m^=i,m&=l-1);this.expTable=h;const g=new Int32Array(l);for(let y=0;y<l-1;y++)g[h[y]]=y;this.logTable=g,this.zero=new ye(this,Int32Array.from([0])),this.one=new ye(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,l){if(i<0)throw new w;if(l===0)return this.zero;const c=new Int32Array(i+1);return c[0]=l,new ye(this,c)}inverse(i){if(i===0)throw new Ne;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,l){return i===0||l===0?0:this.expTable[(this.logTable[i]+this.logTable[l])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+b.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}we.AZTEC_DATA_12=new we(4201,4096,1),we.AZTEC_DATA_10=new we(1033,1024,1),we.AZTEC_DATA_6=new we(67,64,1),we.AZTEC_PARAM=new we(19,16,1),we.QR_CODE_FIELD_256=new we(285,256,0),we.DATA_MATRIX_FIELD_256=new we(301,256,1),we.AZTEC_DATA_8=we.DATA_MATRIX_FIELD_256,we.MAXICODE_FIELD_64=we.AZTEC_DATA_6;class Xe extends p{}Xe.kind="ReedSolomonException";class _e extends p{}_e.kind="IllegalStateException";class Qe{constructor(i){this.field=i}decode(i,l){const c=this.field,h=new ye(c,i),m=new Int32Array(l);let g=!0;for(let Z=0;Z<l;Z++){const re=h.evaluateAt(c.exp(Z+c.getGeneratorBase()));m[m.length-1-Z]=re,re!==0&&(g=!1)}if(g)return;const y=new ye(c,m),E=this.runEuclideanAlgorithm(c.buildMonomial(l,1),y,l),I=E[0],D=E[1],z=this.findErrorLocations(I),$=this.findErrorMagnitudes(D,z);for(let Z=0;Z<z.length;Z++){const re=i.length-1-c.log(z[Z]);if(re<0)throw new Xe("Bad error location");i[re]=we.addOrSubtract(i[re],$[Z])}}runEuclideanAlgorithm(i,l,c){if(i.getDegree()<l.getDegree()){const Z=i;i=l,l=Z}const h=this.field;let m=i,g=l,y=h.getZero(),E=h.getOne();for(;g.getDegree()>=(c/2|0);){let Z=m,re=y;if(m=g,y=E,m.isZero())throw new Xe("r_{i-1} was zero");g=Z;let ne=h.getZero();const he=m.getCoefficient(m.getDegree()),ge=h.inverse(he);for(;g.getDegree()>=m.getDegree()&&!g.isZero();){const Le=g.getDegree()-m.getDegree(),Fe=h.multiply(g.getCoefficient(g.getDegree()),ge);ne=ne.addOrSubtract(h.buildMonomial(Le,Fe)),g=g.addOrSubtract(m.multiplyByMonomial(Le,Fe))}if(E=ne.multiply(y).addOrSubtract(re),g.getDegree()>=m.getDegree())throw new _e("Division algorithm failed to reduce polynomial?")}const I=E.getCoefficient(0);if(I===0)throw new Xe("sigmaTilde(0) was zero");const D=h.inverse(I),z=E.multiplyScalar(D),$=g.multiplyScalar(D);return[z,$]}findErrorLocations(i){const l=i.getDegree();if(l===1)return Int32Array.from([i.getCoefficient(1)]);const c=new Int32Array(l);let h=0;const m=this.field;for(let g=1;g<m.getSize()&&h<l;g++)i.evaluateAt(g)===0&&(c[h]=m.inverse(g),h++);if(h!==l)throw new Xe("Error locator degree does not match number of roots");return c}findErrorMagnitudes(i,l){const c=l.length,h=new Int32Array(c),m=this.field;for(let g=0;g<c;g++){const y=m.inverse(l[g]);let E=1;for(let I=0;I<c;I++)if(g!==I){const D=m.multiply(l[I],y),z=D&1?D&-2:D|1;E=m.multiply(E,z)}h[g]=m.multiply(i.evaluateAt(y),m.inverse(E)),m.getGeneratorBase()!==0&&(h[g]=m.multiply(h[g],y))}return h}}var ce;(function(F){F[F.UPPER=0]="UPPER",F[F.LOWER=1]="LOWER",F[F.MIXED=2]="MIXED",F[F.DIGIT=3]="DIGIT",F[F.PUNCT=4]="PUNCT",F[F.BINARY=5]="BINARY"})(ce||(ce={}));class Se{decode(i){this.ddata=i;let l=i.getBits(),c=this.extractBits(l),h=this.correctBits(c),m=Se.convertBoolArrayToByteArray(h),g=Se.getEncodedData(h),y=new Re(m,g,null,null);return y.setNumBits(h.length),y}static highLevelDecode(i){return this.getEncodedData(i)}static getEncodedData(i){let l=i.length,c=ce.UPPER,h=ce.UPPER,m="",g=0;for(;g<l;)if(h===ce.BINARY){if(l-g<5)break;let y=Se.readCode(i,g,5);if(g+=5,y===0){if(l-g<11)break;y=Se.readCode(i,g,11)+31,g+=11}for(let E=0;E<y;E++){if(l-g<8){g=l;break}const I=Se.readCode(i,g,8);m+=B.castAsNonUtf8Char(I),g+=8}h=c}else{let y=h===ce.DIGIT?4:5;if(l-g<y)break;let E=Se.readCode(i,g,y);g+=y;let I=Se.getCharacter(h,E);I.startsWith("CTRL_")?(c=h,h=Se.getTable(I.charAt(5)),I.charAt(6)==="L"&&(c=h)):(m+=I,h=c)}return m}static getTable(i){switch(i){case"L":return ce.LOWER;case"P":return ce.PUNCT;case"M":return ce.MIXED;case"D":return ce.DIGIT;case"B":return ce.BINARY;case"U":default:return ce.UPPER}}static getCharacter(i,l){switch(i){case ce.UPPER:return Se.UPPER_TABLE[l];case ce.LOWER:return Se.LOWER_TABLE[l];case ce.MIXED:return Se.MIXED_TABLE[l];case ce.PUNCT:return Se.PUNCT_TABLE[l];case ce.DIGIT:return Se.DIGIT_TABLE[l];default:throw new _e("Bad table")}}correctBits(i){let l,c;this.ddata.getNbLayers()<=2?(c=6,l=we.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(c=8,l=we.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(c=10,l=we.AZTEC_DATA_10):(c=12,l=we.AZTEC_DATA_12);let h=this.ddata.getNbDatablocks(),m=i.length/c;if(m<h)throw new R;let g=i.length%c,y=new Int32Array(m);for(let $=0;$<m;$++,g+=c)y[$]=Se.readCode(i,g,c);try{new Qe(l).decode(y,m-h)}catch($){throw new R($)}let E=(1<<c)-1,I=0;for(let $=0;$<h;$++){let Z=y[$];if(Z===0||Z===E)throw new R;(Z===1||Z===E-1)&&I++}let D=new Array(h*c-I),z=0;for(let $=0;$<h;$++){let Z=y[$];if(Z===1||Z===E-1)D.fill(Z>1,z,z+c-1),z+=c-1;else for(let re=c-1;re>=0;--re)D[z++]=(Z&1<<re)!==0}return D}extractBits(i){let l=this.ddata.isCompact(),c=this.ddata.getNbLayers(),h=(l?11:14)+c*4,m=new Int32Array(h),g=new Array(this.totalBitsInLayer(c,l));if(l)for(let y=0;y<m.length;y++)m[y]=y;else{let y=h+1+2*b.truncDivision(b.truncDivision(h,2)-1,15),E=h/2,I=b.truncDivision(y,2);for(let D=0;D<E;D++){let z=D+b.truncDivision(D,15);m[E-D-1]=I-z-1,m[E+D]=I+z+1}}for(let y=0,E=0;y<c;y++){let I=(c-y)*4+(l?9:12),D=y*2,z=h-1-D;for(let $=0;$<I;$++){let Z=$*2;for(let re=0;re<2;re++)g[E+Z+re]=i.get(m[D+re],m[D+$]),g[E+2*I+Z+re]=i.get(m[D+$],m[z-re]),g[E+4*I+Z+re]=i.get(m[z-re],m[z-$]),g[E+6*I+Z+re]=i.get(m[z-$],m[D+re])}E+=I*8}return g}static readCode(i,l,c){let h=0;for(let m=l;m<l+c;m++)h<<=1,i[m]&&(h|=1);return h}static readByte(i,l){let c=i.length-l;return c>=8?Se.readCode(i,l,8):Se.readCode(i,l,c)<<8-c}static convertBoolArrayToByteArray(i){let l=new Uint8Array((i.length+7)/8);for(let c=0;c<l.length;c++)l[c]=Se.readByte(i,8*c);return l}totalBitsInLayer(i,l){return((l?88:112)+16*i)*i}}Se.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Se.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Se.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Se.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Se.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ke{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,l,c,h){const m=i-c,g=l-h;return Math.sqrt(m*m+g*g)}static sum(i){let l=0;for(let c=0,h=i.length;c!==h;c++){const m=i[c];l+=m}return l}}class Je{static floatToIntBits(i){return i}}Je.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ae{constructor(i,l){this.x=i,this.y=l}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof Ae){const l=i;return this.x===l.x&&this.y===l.y}return!1}hashCode(){return 31*Je.floatToIntBits(this.x)+Je.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const l=this.distance(i[0],i[1]),c=this.distance(i[1],i[2]),h=this.distance(i[0],i[2]);let m,g,y;if(c>=l&&c>=h?(g=i[0],m=i[1],y=i[2]):h>=c&&h>=l?(g=i[1],m=i[0],y=i[2]):(g=i[2],m=i[0],y=i[1]),this.crossProductZ(m,g,y)<0){const E=m;m=y,y=E}i[0]=m,i[1]=g,i[2]=y}static distance(i,l){return ke.distance(i.x,i.y,l.x,l.y)}static crossProductZ(i,l,c){const h=l.x,m=l.y;return(c.x-h)*(i.y-m)-(c.y-m)*(i.x-h)}}class Lt{constructor(i,l){this.bits=i,this.points=l}getBits(){return this.bits}getPoints(){return this.points}}class yt extends Lt{constructor(i,l,c,h,m){super(i,l),this.compact=c,this.nbDatablocks=h,this.nbLayers=m}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class It{constructor(i,l,c,h){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),l==null&&(l=It.INIT_SIZE),c==null&&(c=i.getWidth()/2|0),h==null&&(h=i.getHeight()/2|0);const m=l/2|0;if(this.leftInit=c-m,this.rightInit=c+m,this.upInit=h-m,this.downInit=h+m,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new X}detect(){let i=this.leftInit,l=this.rightInit,c=this.upInit,h=this.downInit,m=!1,g=!0,y=!1,E=!1,I=!1,D=!1,z=!1;const $=this.width,Z=this.height;for(;g;){g=!1;let re=!0;for(;(re||!E)&&l<$;)re=this.containsBlackPoint(c,h,l,!1),re?(l++,g=!0,E=!0):E||l++;if(l>=$){m=!0;break}let ne=!0;for(;(ne||!I)&&h<Z;)ne=this.containsBlackPoint(i,l,h,!0),ne?(h++,g=!0,I=!0):I||h++;if(h>=Z){m=!0;break}let he=!0;for(;(he||!D)&&i>=0;)he=this.containsBlackPoint(c,h,i,!1),he?(i--,g=!0,D=!0):D||i--;if(i<0){m=!0;break}let ge=!0;for(;(ge||!z)&&c>=0;)ge=this.containsBlackPoint(i,l,c,!0),ge?(c--,g=!0,z=!0):z||c--;if(c<0){m=!0;break}g&&(y=!0)}if(!m&&y){const re=l-i;let ne=null;for(let Fe=1;ne===null&&Fe<re;Fe++)ne=this.getBlackPointOnSegment(i,h-Fe,i+Fe,h);if(ne==null)throw new X;let he=null;for(let Fe=1;he===null&&Fe<re;Fe++)he=this.getBlackPointOnSegment(i,c+Fe,i+Fe,c);if(he==null)throw new X;let ge=null;for(let Fe=1;ge===null&&Fe<re;Fe++)ge=this.getBlackPointOnSegment(l,c+Fe,l-Fe,c);if(ge==null)throw new X;let Le=null;for(let Fe=1;Le===null&&Fe<re;Fe++)Le=this.getBlackPointOnSegment(l,h-Fe,l-Fe,h);if(Le==null)throw new X;return this.centerEdges(Le,ne,ge,he)}else throw new X}getBlackPointOnSegment(i,l,c,h){const m=ke.round(ke.distance(i,l,c,h)),g=(c-i)/m,y=(h-l)/m,E=this.image;for(let I=0;I<m;I++){const D=ke.round(i+I*g),z=ke.round(l+I*y);if(E.get(D,z))return new Ae(D,z)}return null}centerEdges(i,l,c,h){const m=i.getX(),g=i.getY(),y=l.getX(),E=l.getY(),I=c.getX(),D=c.getY(),z=h.getX(),$=h.getY(),Z=It.CORR;return m<this.width/2?[new Ae(z-Z,$+Z),new Ae(y+Z,E+Z),new Ae(I-Z,D-Z),new Ae(m+Z,g-Z)]:[new Ae(z+Z,$+Z),new Ae(y+Z,E-Z),new Ae(I-Z,D+Z),new Ae(m-Z,g-Z)]}containsBlackPoint(i,l,c,h){const m=this.image;if(h){for(let g=i;g<=l;g++)if(m.get(g,c))return!0}else for(let g=i;g<=l;g++)if(m.get(c,g))return!0;return!1}}It.INIT_SIZE=10,It.CORR=1;class Xt{static checkAndNudgePoints(i,l){const c=i.getWidth(),h=i.getHeight();let m=!0;for(let g=0;g<l.length&&m;g+=2){const y=Math.floor(l[g]),E=Math.floor(l[g+1]);if(y<-1||y>c||E<-1||E>h)throw new X;m=!1,y===-1?(l[g]=0,m=!0):y===c&&(l[g]=c-1,m=!0),E===-1?(l[g+1]=0,m=!0):E===h&&(l[g+1]=h-1,m=!0)}m=!0;for(let g=l.length-2;g>=0&&m;g-=2){const y=Math.floor(l[g]),E=Math.floor(l[g+1]);if(y<-1||y>c||E<-1||E>h)throw new X;m=!1,y===-1?(l[g]=0,m=!0):y===c&&(l[g]=c-1,m=!0),E===-1?(l[g+1]=0,m=!0):E===h&&(l[g+1]=h-1,m=!0)}}}class xt{constructor(i,l,c,h,m,g,y,E,I){this.a11=i,this.a21=l,this.a31=c,this.a12=h,this.a22=m,this.a32=g,this.a13=y,this.a23=E,this.a33=I}static quadrilateralToQuadrilateral(i,l,c,h,m,g,y,E,I,D,z,$,Z,re,ne,he){const ge=xt.quadrilateralToSquare(i,l,c,h,m,g,y,E);return xt.squareToQuadrilateral(I,D,z,$,Z,re,ne,he).times(ge)}transformPoints(i){const l=i.length,c=this.a11,h=this.a12,m=this.a13,g=this.a21,y=this.a22,E=this.a23,I=this.a31,D=this.a32,z=this.a33;for(let $=0;$<l;$+=2){const Z=i[$],re=i[$+1],ne=m*Z+E*re+z;i[$]=(c*Z+g*re+I)/ne,i[$+1]=(h*Z+y*re+D)/ne}}transformPointsWithValues(i,l){const c=this.a11,h=this.a12,m=this.a13,g=this.a21,y=this.a22,E=this.a23,I=this.a31,D=this.a32,z=this.a33,$=i.length;for(let Z=0;Z<$;Z++){const re=i[Z],ne=l[Z],he=m*re+E*ne+z;i[Z]=(c*re+g*ne+I)/he,l[Z]=(h*re+y*ne+D)/he}}static squareToQuadrilateral(i,l,c,h,m,g,y,E){const I=i-c+m-y,D=l-h+g-E;if(I===0&&D===0)return new xt(c-i,m-c,i,h-l,g-h,l,0,0,1);{const z=c-m,$=y-m,Z=h-g,re=E-g,ne=z*re-$*Z,he=(I*re-$*D)/ne,ge=(z*D-I*Z)/ne;return new xt(c-i+he*c,y-i+ge*y,i,h-l+he*h,E-l+ge*E,l,he,ge,1)}}static quadrilateralToSquare(i,l,c,h,m,g,y,E){return xt.squareToQuadrilateral(i,l,c,h,m,g,y,E).buildAdjoint()}buildAdjoint(){return new xt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new xt(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class Wr extends Xt{sampleGrid(i,l,c,h,m,g,y,E,I,D,z,$,Z,re,ne,he,ge,Le,Fe){const Oe=xt.quadrilateralToQuadrilateral(h,m,g,y,E,I,D,z,$,Z,re,ne,he,ge,Le,Fe);return this.sampleGridWithTransform(i,l,c,Oe)}sampleGridWithTransform(i,l,c,h){if(l<=0||c<=0)throw new X;const m=new ee(l,c),g=new Float32Array(2*l);for(let y=0;y<c;y++){const E=g.length,I=y+.5;for(let D=0;D<E;D+=2)g[D]=D/2+.5,g[D+1]=I;h.transformPoints(g),Xt.checkAndNudgePoints(i,g);try{for(let D=0;D<E;D+=2)i.get(Math.floor(g[D]),Math.floor(g[D+1]))&&m.set(D/2,y)}catch{throw new X}}return m}}class Qt{static setGridSampler(i){Qt.gridSampler=i}static getInstance(){return Qt.gridSampler}}Qt.gridSampler=new Wr;class Ve{constructor(i,l){this.x=i,this.y=l}toResultPoint(){return new Ae(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Ie{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let l=this.getMatrixCenter(),c=this.getBullsEyeCorners(l);if(i){let g=c[0];c[0]=c[2],c[2]=g}this.extractParameters(c);let h=this.sampleGrid(this.image,c[this.shift%4],c[(this.shift+1)%4],c[(this.shift+2)%4],c[(this.shift+3)%4]),m=this.getMatrixCornerPoints(c);return new yt(h,m,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new X;let l=2*this.nbCenterLayers,c=new Int32Array([this.sampleLine(i[0],i[1],l),this.sampleLine(i[1],i[2],l),this.sampleLine(i[2],i[3],l),this.sampleLine(i[3],i[0],l)]);this.shift=this.getRotation(c,l);let h=0;for(let g=0;g<4;g++){let y=c[(this.shift+g)%4];this.compact?(h<<=7,h+=y>>1&127):(h<<=10,h+=(y>>2&992)+(y>>1&31))}let m=this.getCorrectedParameterData(h,this.compact);this.compact?(this.nbLayers=(m>>6)+1,this.nbDataBlocks=(m&63)+1):(this.nbLayers=(m>>11)+1,this.nbDataBlocks=(m&2047)+1)}getRotation(i,l){let c=0;i.forEach((h,m,g)=>{let y=(h>>l-2<<1)+(h&1);c=(c<<3)+y}),c=((c&1)<<11)+(c>>1);for(let h=0;h<4;h++)if(b.bitCount(c^this.EXPECTED_CORNER_BITS[h])<=2)return h;throw new X}getCorrectedParameterData(i,l){let c,h;l?(c=7,h=2):(c=10,h=4);let m=c-h,g=new Int32Array(c);for(let E=c-1;E>=0;--E)g[E]=i&15,i>>=4;try{new Qe(we.AZTEC_PARAM).decode(g,m)}catch{throw new X}let y=0;for(let E=0;E<h;E++)y=(y<<4)+g[E];return y}getBullsEyeCorners(i){let l=i,c=i,h=i,m=i,g=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let z=this.getFirstDifferent(l,g,1,-1),$=this.getFirstDifferent(c,g,1,1),Z=this.getFirstDifferent(h,g,-1,1),re=this.getFirstDifferent(m,g,-1,-1);if(this.nbCenterLayers>2){let ne=this.distancePoint(re,z)*this.nbCenterLayers/(this.distancePoint(m,l)*(this.nbCenterLayers+2));if(ne<.75||ne>1.25||!this.isWhiteOrBlackRectangle(z,$,Z,re))break}l=z,c=$,h=Z,m=re,g=!g}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new X;this.compact=this.nbCenterLayers===5;let y=new Ae(l.getX()+.5,l.getY()-.5),E=new Ae(c.getX()+.5,c.getY()+.5),I=new Ae(h.getX()-.5,h.getY()+.5),D=new Ae(m.getX()-.5,m.getY()-.5);return this.expandSquare([y,E,I,D],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,l,c,h;try{let y=new It(this.image).detect();i=y[0],l=y[1],c=y[2],h=y[3]}catch{let E=this.image.getWidth()/2,I=this.image.getHeight()/2;i=this.getFirstDifferent(new Ve(E+7,I-7),!1,1,-1).toResultPoint(),l=this.getFirstDifferent(new Ve(E+7,I+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new Ve(E-7,I+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new Ve(E-7,I-7),!1,-1,-1).toResultPoint()}let m=ke.round((i.getX()+h.getX()+l.getX()+c.getX())/4),g=ke.round((i.getY()+h.getY()+l.getY()+c.getY())/4);try{let y=new It(this.image,15,m,g).detect();i=y[0],l=y[1],c=y[2],h=y[3]}catch{i=this.getFirstDifferent(new Ve(m+7,g-7),!1,1,-1).toResultPoint(),l=this.getFirstDifferent(new Ve(m+7,g+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new Ve(m-7,g+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new Ve(m-7,g-7),!1,-1,-1).toResultPoint()}return m=ke.round((i.getX()+h.getX()+l.getX()+c.getX())/4),g=ke.round((i.getY()+h.getY()+l.getY()+c.getY())/4),new Ve(m,g)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,l,c,h,m){let g=Qt.getInstance(),y=this.getDimension(),E=y/2-this.nbCenterLayers,I=y/2+this.nbCenterLayers;return g.sampleGrid(i,y,y,E,E,I,E,I,I,E,I,l.getX(),l.getY(),c.getX(),c.getY(),h.getX(),h.getY(),m.getX(),m.getY())}sampleLine(i,l,c){let h=0,m=this.distanceResultPoint(i,l),g=m/c,y=i.getX(),E=i.getY(),I=g*(l.getX()-i.getX())/m,D=g*(l.getY()-i.getY())/m;for(let z=0;z<c;z++)this.image.get(ke.round(y+z*I),ke.round(E+z*D))&&(h|=1<<c-z-1);return h}isWhiteOrBlackRectangle(i,l,c,h){let m=3;i=new Ve(i.getX()-m,i.getY()+m),l=new Ve(l.getX()-m,l.getY()-m),c=new Ve(c.getX()+m,c.getY()-m),h=new Ve(h.getX()+m,h.getY()+m);let g=this.getColor(h,i);if(g===0)return!1;let y=this.getColor(i,l);return y!==g||(y=this.getColor(l,c),y!==g)?!1:(y=this.getColor(c,h),y===g)}getColor(i,l){let c=this.distancePoint(i,l),h=(l.getX()-i.getX())/c,m=(l.getY()-i.getY())/c,g=0,y=i.getX(),E=i.getY(),I=this.image.get(i.getX(),i.getY()),D=Math.ceil(c);for(let $=0;$<D;$++)y+=h,E+=m,this.image.get(ke.round(y),ke.round(E))!==I&&g++;let z=g/c;return z>.1&&z<.9?0:z<=.1===I?1:-1}getFirstDifferent(i,l,c,h){let m=i.getX()+c,g=i.getY()+h;for(;this.isValid(m,g)&&this.image.get(m,g)===l;)m+=c,g+=h;for(m-=c,g-=h;this.isValid(m,g)&&this.image.get(m,g)===l;)m+=c;for(m-=c;this.isValid(m,g)&&this.image.get(m,g)===l;)g+=h;return g-=h,new Ve(m,g)}expandSquare(i,l,c){let h=c/(2*l),m=i[0].getX()-i[2].getX(),g=i[0].getY()-i[2].getY(),y=(i[0].getX()+i[2].getX())/2,E=(i[0].getY()+i[2].getY())/2,I=new Ae(y+h*m,E+h*g),D=new Ae(y-h*m,E-h*g);m=i[1].getX()-i[3].getX(),g=i[1].getY()-i[3].getY(),y=(i[1].getX()+i[3].getX())/2,E=(i[1].getY()+i[3].getY())/2;let z=new Ae(y+h*m,E+h*g),$=new Ae(y-h*m,E-h*g);return[I,z,D,$]}isValid(i,l){return i>=0&&i<this.image.getWidth()&&l>0&&l<this.image.getHeight()}isValidPoint(i){let l=ke.round(i.getX()),c=ke.round(i.getY());return this.isValid(l,c)}distancePoint(i,l){return ke.distance(i.getX(),i.getY(),l.getX(),l.getY())}distanceResultPoint(i,l){return ke.distance(i.getX(),i.getY(),l.getX(),l.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(b.truncDivision(this.nbLayers-4,8)+1)+15}}class dt{decode(i,l=null){let c=null,h=new Ie(i.getBlackMatrix()),m=null,g=null;try{let D=h.detectMirror(!1);m=D.getPoints(),this.reportFoundResultPoints(l,m),g=new Se().decode(D)}catch(D){c=D}if(g==null)try{let D=h.detectMirror(!0);m=D.getPoints(),this.reportFoundResultPoints(l,m),g=new Se().decode(D)}catch(D){throw c??D}let y=new K(g.getText(),g.getRawBytes(),g.getNumBits(),m,de.AZTEC,C.currentTimeMillis()),E=g.getByteSegments();E!=null&&y.putMetadata(me.BYTE_SEGMENTS,E);let I=g.getECLevel();return I!=null&&y.putMetadata(me.ERROR_CORRECTION_LEVEL,I),y}reportFoundResultPoints(i,l){if(i!=null){let c=i.get(L.NEED_RESULT_POINT_CALLBACK);c!=null&&l.forEach((h,m,g)=>{c.foundPossibleResultPoint(h)})}}reset(){}}class it extends J{constructor(i=500){super(new dt,i)}}class ut{decode(i,l){try{return this.doDecode(i,l)}catch{if(l&&l.get(L.TRY_HARDER)===!0&&i.isRotateSupported()){const m=i.rotateCounterClockwise(),g=this.doDecode(m,l),y=g.getResultMetadata();let E=270;y!==null&&y.get(me.ORIENTATION)===!0&&(E=E+y.get(me.ORIENTATION)%360),g.putMetadata(me.ORIENTATION,E);const I=g.getResultPoints();if(I!==null){const D=m.getHeight();for(let z=0;z<I.length;z++)I[z]=new Ae(D-I[z].getY()-1,I[z].getX())}return g}else throw new X}}reset(){}doDecode(i,l){const c=i.getWidth(),h=i.getHeight();let m=new T(c);const g=l&&l.get(L.TRY_HARDER)===!0,y=Math.max(1,h>>(g?8:5));let E;g?E=h:E=15;const I=Math.trunc(h/2);for(let D=0;D<E;D++){const z=Math.trunc((D+1)/2),$=(D&1)===0,Z=I+y*($?z:-z);if(Z<0||Z>=h)break;try{m=i.getBlackRow(Z,m)}catch{continue}for(let re=0;re<2;re++){if(re===1&&(m.reverse(),l&&l.get(L.NEED_RESULT_POINT_CALLBACK)===!0)){const ne=new Map;l.forEach((he,ge)=>ne.set(ge,he)),ne.delete(L.NEED_RESULT_POINT_CALLBACK),l=ne}try{const ne=this.decodeRow(Z,m,l);if(re===1){ne.putMetadata(me.ORIENTATION,180);const he=ne.getResultPoints();he!==null&&(he[0]=new Ae(c-he[0].getX()-1,he[0].getY()),he[1]=new Ae(c-he[1].getX()-1,he[1].getY()))}return ne}catch{}}}throw new X}static recordPattern(i,l,c){const h=c.length;for(let I=0;I<h;I++)c[I]=0;const m=i.getSize();if(l>=m)throw new X;let g=!i.get(l),y=0,E=l;for(;E<m;){if(i.get(E)!==g)c[y]++;else{if(++y===h)break;c[y]=1,g=!g}E++}if(!(y===h||y===h-1&&E===m))throw new X}static recordPatternInReverse(i,l,c){let h=c.length,m=i.get(l);for(;l>0&&h>=0;)i.get(--l)!==m&&(h--,m=!m);if(h>=0)throw new X;ut.recordPattern(i,l+1,c)}static patternMatchVariance(i,l,c){const h=i.length;let m=0,g=0;for(let I=0;I<h;I++)m+=i[I],g+=l[I];if(m<g)return Number.POSITIVE_INFINITY;const y=m/g;c*=y;let E=0;for(let I=0;I<h;I++){const D=i[I],z=l[I]*y,$=D>z?D-z:z-D;if($>c)return Number.POSITIVE_INFINITY;E+=$}return E/m}}class Pe extends ut{static findStartPattern(i){const l=i.getSize(),c=i.getNextSet(0);let h=0,m=Int32Array.from([0,0,0,0,0,0]),g=c,y=!1;const E=6;for(let I=c;I<l;I++)if(i.get(I)!==y)m[h]++;else{if(h===E-1){let D=Pe.MAX_AVG_VARIANCE,z=-1;for(let $=Pe.CODE_START_A;$<=Pe.CODE_START_C;$++){const Z=ut.patternMatchVariance(m,Pe.CODE_PATTERNS[$],Pe.MAX_INDIVIDUAL_VARIANCE);Z<D&&(D=Z,z=$)}if(z>=0&&i.isRange(Math.max(0,g-(I-g)/2),g,!1))return Int32Array.from([g,I,z]);g+=m[0]+m[1],m=m.slice(2,m.length-1),m[h-1]=0,m[h]=0,h--}else h++;m[h]=1,y=!y}throw new X}static decodeCode(i,l,c){ut.recordPattern(i,c,l);let h=Pe.MAX_AVG_VARIANCE,m=-1;for(let g=0;g<Pe.CODE_PATTERNS.length;g++){const y=Pe.CODE_PATTERNS[g],E=this.patternMatchVariance(l,y,Pe.MAX_INDIVIDUAL_VARIANCE);E<h&&(h=E,m=g)}if(m>=0)return m;throw new X}decodeRow(i,l,c){const h=c&&c.get(L.ASSUME_GS1)===!0,m=Pe.findStartPattern(l),g=m[2];let y=0;const E=new Uint8Array(20);E[y++]=g;let I;switch(g){case Pe.CODE_START_A:I=Pe.CODE_CODE_A;break;case Pe.CODE_START_B:I=Pe.CODE_CODE_B;break;case Pe.CODE_START_C:I=Pe.CODE_CODE_C;break;default:throw new R}let D=!1,z=!1,$="",Z=m[0],re=m[1];const ne=Int32Array.from([0,0,0,0,0,0]);let he=0,ge=0,Le=g,Fe=0,Oe=!0,jt=!1,ft=!1;for(;!D;){const jl=z;switch(z=!1,he=ge,ge=Pe.decodeCode(l,ne,re),E[y++]=ge,ge!==Pe.CODE_STOP&&(Oe=!0),ge!==Pe.CODE_STOP&&(Fe++,Le+=Fe*ge),Z=re,re+=ne.reduce((Lk,Fk)=>Lk+Fk,0),ge){case Pe.CODE_START_A:case Pe.CODE_START_B:case Pe.CODE_START_C:throw new R}switch(I){case Pe.CODE_CODE_A:if(ge<64)ft===jt?$+=String.fromCharCode(32+ge):$+=String.fromCharCode(32+ge+128),ft=!1;else if(ge<96)ft===jt?$+=String.fromCharCode(ge-64):$+=String.fromCharCode(ge+64),ft=!1;else switch(ge!==Pe.CODE_STOP&&(Oe=!1),ge){case Pe.CODE_FNC_1:h&&($.length===0?$+="]C1":$+="");break;case Pe.CODE_FNC_2:case Pe.CODE_FNC_3:break;case Pe.CODE_FNC_4_A:!jt&&ft?(jt=!0,ft=!1):jt&&ft?(jt=!1,ft=!1):ft=!0;break;case Pe.CODE_SHIFT:z=!0,I=Pe.CODE_CODE_B;break;case Pe.CODE_CODE_B:I=Pe.CODE_CODE_B;break;case Pe.CODE_CODE_C:I=Pe.CODE_CODE_C;break;case Pe.CODE_STOP:D=!0;break}break;case Pe.CODE_CODE_B:if(ge<96)ft===jt?$+=String.fromCharCode(32+ge):$+=String.fromCharCode(32+ge+128),ft=!1;else switch(ge!==Pe.CODE_STOP&&(Oe=!1),ge){case Pe.CODE_FNC_1:h&&($.length===0?$+="]C1":$+="");break;case Pe.CODE_FNC_2:case Pe.CODE_FNC_3:break;case Pe.CODE_FNC_4_B:!jt&&ft?(jt=!0,ft=!1):jt&&ft?(jt=!1,ft=!1):ft=!0;break;case Pe.CODE_SHIFT:z=!0,I=Pe.CODE_CODE_A;break;case Pe.CODE_CODE_A:I=Pe.CODE_CODE_A;break;case Pe.CODE_CODE_C:I=Pe.CODE_CODE_C;break;case Pe.CODE_STOP:D=!0;break}break;case Pe.CODE_CODE_C:if(ge<100)ge<10&&($+="0"),$+=ge;else switch(ge!==Pe.CODE_STOP&&(Oe=!1),ge){case Pe.CODE_FNC_1:h&&($.length===0?$+="]C1":$+="");break;case Pe.CODE_CODE_A:I=Pe.CODE_CODE_A;break;case Pe.CODE_CODE_B:I=Pe.CODE_CODE_B;break;case Pe.CODE_STOP:D=!0;break}break}jl&&(I=I===Pe.CODE_CODE_A?Pe.CODE_CODE_B:Pe.CODE_CODE_A)}const Mn=re-Z;if(re=l.getNextUnset(re),!l.isRange(re,Math.min(l.getSize(),re+(re-Z)/2),!1))throw new X;if(Le-=Fe*he,Le%103!==he)throw new j;const zs=$.length;if(zs===0)throw new X;zs>0&&Oe&&(I===Pe.CODE_CODE_C?$=$.substring(0,zs-2):$=$.substring(0,zs-1));const Ln=(m[1]+m[0])/2,Jt=Z+Mn/2,rn=E.length,Qn=new Uint8Array(rn);for(let jl=0;jl<rn;jl++)Qn[jl]=E[jl];const Nl=[new Ae(Ln,i),new Ae(Jt,i)];return new K($,Qn,0,Nl,de.CODE_128,new Date().getTime())}}Pe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Pe.MAX_AVG_VARIANCE=.25,Pe.MAX_INDIVIDUAL_VARIANCE=.7,Pe.CODE_SHIFT=98,Pe.CODE_CODE_C=99,Pe.CODE_CODE_B=100,Pe.CODE_CODE_A=101,Pe.CODE_FNC_1=102,Pe.CODE_FNC_2=97,Pe.CODE_FNC_3=96,Pe.CODE_FNC_4_A=101,Pe.CODE_FNC_4_B=100,Pe.CODE_START_A=103,Pe.CODE_START_B=104,Pe.CODE_START_C=105,Pe.CODE_STOP=106;class Ot extends ut{constructor(i=!1,l=!1){super(),this.usingCheckDigit=i,this.extendedMode=l,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(i,l,c){let h=this.counters;h.fill(0),this.decodeRowResult="";let m=Ot.findAsteriskPattern(l,h),g=l.getNextSet(m[1]),y=l.getSize(),E,I;do{Ot.recordPattern(l,g,h);let ne=Ot.toNarrowWidePattern(h);if(ne<0)throw new X;E=Ot.patternToChar(ne),this.decodeRowResult+=E,I=g;for(let he of h)g+=he;g=l.getNextSet(g)}while(E!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let D=0;for(let ne of h)D+=ne;let z=g-I-D;if(g!==y&&z*2<D)throw new X;if(this.usingCheckDigit){let ne=this.decodeRowResult.length-1,he=0;for(let ge=0;ge<ne;ge++)he+=Ot.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ge));if(this.decodeRowResult.charAt(ne)!==Ot.ALPHABET_STRING.charAt(he%43))throw new j;this.decodeRowResult=this.decodeRowResult.substring(0,ne)}if(this.decodeRowResult.length===0)throw new X;let $;this.extendedMode?$=Ot.decodeExtended(this.decodeRowResult):$=this.decodeRowResult;let Z=(m[1]+m[0])/2,re=I+D/2;return new K($,null,0,[new Ae(Z,i),new Ae(re,i)],de.CODE_39,new Date().getTime())}static findAsteriskPattern(i,l){let c=i.getSize(),h=i.getNextSet(0),m=0,g=h,y=!1,E=l.length;for(let I=h;I<c;I++)if(i.get(I)!==y)l[m]++;else{if(m===E-1){if(this.toNarrowWidePattern(l)===Ot.ASTERISK_ENCODING&&i.isRange(Math.max(0,g-Math.floor((I-g)/2)),g,!1))return[g,I];g+=l[0]+l[1],l.copyWithin(0,2,2+m-1),l[m-1]=0,l[m]=0,m--}else m++;l[m]=1,y=!y}throw new X}static toNarrowWidePattern(i){let l=i.length,c=0,h;do{let m=2147483647;for(let E of i)E<m&&E>c&&(m=E);c=m,h=0;let g=0,y=0;for(let E=0;E<l;E++){let I=i[E];I>c&&(y|=1<<l-1-E,h++,g+=I)}if(h===3){for(let E=0;E<l&&h>0;E++){let I=i[E];if(I>c&&(h--,I*2>=g))return-1}return y}}while(h>3);return-1}static patternToChar(i){for(let l=0;l<Ot.CHARACTER_ENCODINGS.length;l++)if(Ot.CHARACTER_ENCODINGS[l]===i)return Ot.ALPHABET_STRING.charAt(l);if(i===Ot.ASTERISK_ENCODING)return"*";throw new X}static decodeExtended(i){let l=i.length,c="";for(let h=0;h<l;h++){let m=i.charAt(h);if(m==="+"||m==="$"||m==="%"||m==="/"){let g=i.charAt(h+1),y="\0";switch(m){case"+":if(g>="A"&&g<="Z")y=String.fromCharCode(g.charCodeAt(0)+32);else throw new R;break;case"$":if(g>="A"&&g<="Z")y=String.fromCharCode(g.charCodeAt(0)-64);else throw new R;break;case"%":if(g>="A"&&g<="E")y=String.fromCharCode(g.charCodeAt(0)-38);else if(g>="F"&&g<="J")y=String.fromCharCode(g.charCodeAt(0)-11);else if(g>="K"&&g<="O")y=String.fromCharCode(g.charCodeAt(0)+16);else if(g>="P"&&g<="T")y=String.fromCharCode(g.charCodeAt(0)+43);else if(g==="U")y="\0";else if(g==="V")y="@";else if(g==="W")y="`";else if(g==="X"||g==="Y"||g==="Z")y="";else throw new R;break;case"/":if(g>="A"&&g<="O")y=String.fromCharCode(g.charCodeAt(0)-32);else if(g==="Z")y=":";else throw new R;break}c+=y,h++}else c+=m}return c}}Ot.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Ot.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Ot.ASTERISK_ENCODING=148;class ht extends ut{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,l,c){let h=this.decodeStart(l),m=this.decodeEnd(l),g=new V;ht.decodeMiddle(l,h[1],m[0],g);let y=g.toString(),E=null;c!=null&&(E=c.get(L.ALLOWED_LENGTHS)),E==null&&(E=ht.DEFAULT_ALLOWED_LENGTHS);let I=y.length,D=!1,z=0;for(let re of E){if(I===re){D=!0;break}re>z&&(z=re)}if(!D&&I>z&&(D=!0),!D)throw new R;const $=[new Ae(h[1],i),new Ae(m[0],i)];return new K(y,null,0,$,de.ITF,new Date().getTime())}static decodeMiddle(i,l,c,h){let m=new Int32Array(10),g=new Int32Array(5),y=new Int32Array(5);for(m.fill(0),g.fill(0),y.fill(0);l<c;){ut.recordPattern(i,l,m);for(let I=0;I<5;I++){let D=2*I;g[I]=m[D],y[I]=m[D+1]}let E=ht.decodeDigit(g);h.append(E.toString()),E=this.decodeDigit(y),h.append(E.toString()),m.forEach(function(I){l+=I})}}decodeStart(i){let l=ht.skipWhiteSpace(i),c=ht.findGuardPattern(i,l,ht.START_PATTERN);return this.narrowLineWidth=(c[1]-c[0])/4,this.validateQuietZone(i,c[0]),c}validateQuietZone(i,l){let c=this.narrowLineWidth*10;c=c<l?c:l;for(let h=l-1;c>0&&h>=0&&!i.get(h);h--)c--;if(c!==0)throw new X}static skipWhiteSpace(i){const l=i.getSize(),c=i.getNextSet(0);if(c===l)throw new X;return c}decodeEnd(i){i.reverse();try{let l=ht.skipWhiteSpace(i),c;try{c=ht.findGuardPattern(i,l,ht.END_PATTERN_REVERSED[0])}catch(m){m instanceof X&&(c=ht.findGuardPattern(i,l,ht.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,c[0]);let h=c[0];return c[0]=i.getSize()-c[1],c[1]=i.getSize()-h,c}finally{i.reverse()}}static findGuardPattern(i,l,c){let h=c.length,m=new Int32Array(h),g=i.getSize(),y=!1,E=0,I=l;m.fill(0);for(let D=l;D<g;D++)if(i.get(D)!==y)m[E]++;else{if(E===h-1){if(ut.patternMatchVariance(m,c,ht.MAX_INDIVIDUAL_VARIANCE)<ht.MAX_AVG_VARIANCE)return[I,D];I+=m[0]+m[1],C.arraycopy(m,2,m,0,E-1),m[E-1]=0,m[E]=0,E--}else E++;m[E]=1,y=!y}throw new X}static decodeDigit(i){let l=ht.MAX_AVG_VARIANCE,c=-1,h=ht.PATTERNS.length;for(let m=0;m<h;m++){let g=ht.PATTERNS[m],y=ut.patternMatchVariance(i,g,ht.MAX_INDIVIDUAL_VARIANCE);y<l?(l=y,c=m):y===l&&(c=-1)}if(c>=0)return c%10;throw new X}}ht.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ht.MAX_AVG_VARIANCE=.38,ht.MAX_INDIVIDUAL_VARIANCE=.5,ht.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ht.START_PATTERN=Int32Array.from([1,1,1,1]),ht.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Rt extends ut{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let l=!1,c,h=0,m=Int32Array.from([0,0,0]);for(;!l;){m=Int32Array.from([0,0,0]),c=Rt.findGuardPattern(i,h,!1,this.START_END_PATTERN,m);let g=c[0];h=c[1];let y=g-(h-g);y>=0&&(l=i.isRange(y,g,!1))}return c}static checkChecksum(i){return Rt.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let l=i.length;if(l===0)return!1;let c=parseInt(i.charAt(l-1),10);return Rt.getStandardUPCEANChecksum(i.substring(0,l-1))===c}static getStandardUPCEANChecksum(i){let l=i.length,c=0;for(let h=l-1;h>=0;h-=2){let m=i.charAt(h).charCodeAt(0)-48;if(m<0||m>9)throw new R;c+=m}c*=3;for(let h=l-2;h>=0;h-=2){let m=i.charAt(h).charCodeAt(0)-48;if(m<0||m>9)throw new R;c+=m}return(1e3-c)%10}static decodeEnd(i,l){return Rt.findGuardPattern(i,l,!1,Rt.START_END_PATTERN,new Int32Array(Rt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,l,c,h){return this.findGuardPattern(i,l,c,h,new Int32Array(h.length))}static findGuardPattern(i,l,c,h,m){let g=i.getSize();l=c?i.getNextUnset(l):i.getNextSet(l);let y=0,E=l,I=h.length,D=c;for(let z=l;z<g;z++)if(i.get(z)!==D)m[y]++;else{if(y===I-1){if(ut.patternMatchVariance(m,h,Rt.MAX_INDIVIDUAL_VARIANCE)<Rt.MAX_AVG_VARIANCE)return Int32Array.from([E,z]);E+=m[0]+m[1];let $=m.slice(2,m.length-1);for(let Z=0;Z<y-1;Z++)m[Z]=$[Z];m[y-1]=0,m[y]=0,y--}else y++;m[y]=1,D=!D}throw new X}static decodeDigit(i,l,c,h){this.recordPattern(i,c,l);let m=this.MAX_AVG_VARIANCE,g=-1,y=h.length;for(let E=0;E<y;E++){let I=h[E],D=ut.patternMatchVariance(l,I,Rt.MAX_INDIVIDUAL_VARIANCE);D<m&&(m=D,g=E)}if(g>=0)return g;throw new X}}Rt.MAX_AVG_VARIANCE=.48,Rt.MAX_INDIVIDUAL_VARIANCE=.7,Rt.START_END_PATTERN=Int32Array.from([1,1,1]),Rt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Rt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Rt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Rn{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,l,c){let h=this.decodeRowStringBuffer,m=this.decodeMiddle(l,c,h),g=h.toString(),y=Rn.parseExtensionString(g),E=[new Ae((c[0]+c[1])/2,i),new Ae(m,i)],I=new K(g,null,0,E,de.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&I.putAllMetadata(y),I}decodeMiddle(i,l,c){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let m=i.getSize(),g=l[1],y=0;for(let I=0;I<5&&g<m;I++){let D=Rt.decodeDigit(i,h,g,Rt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+D%10);for(let z of h)g+=z;D>=10&&(y|=1<<4-I),I!==4&&(g=i.getNextSet(g),g=i.getNextUnset(g))}if(c.length!==5)throw new X;let E=this.determineCheckDigit(y);if(Rn.extensionChecksum(c.toString())!==E)throw new X;return g}static extensionChecksum(i){let l=i.length,c=0;for(let h=l-2;h>=0;h-=2)c+=i.charAt(h).charCodeAt(0)-48;c*=3;for(let h=l-1;h>=0;h-=2)c+=i.charAt(h).charCodeAt(0)-48;return c*=3,c%10}determineCheckDigit(i){for(let l=0;l<10;l++)if(i===this.CHECK_DIGIT_ENCODINGS[l])return l;throw new X}static parseExtensionString(i){if(i.length!==5)return null;let l=Rn.parseExtension5String(i);return l==null?null:new Map([[me.SUGGESTED_PRICE,l]])}static parseExtension5String(i){let l;switch(i.charAt(0)){case"0":l="£";break;case"5":l="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}l="";break;default:l="";break}let c=parseInt(i.substring(1)),h=(c/100).toString(),m=c%100,g=m<10?"0"+m:m.toString();return l+h+"."+g}}class Bs{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,l,c){let h=this.decodeRowStringBuffer,m=this.decodeMiddle(l,c,h),g=h.toString(),y=Bs.parseExtensionString(g),E=[new Ae((c[0]+c[1])/2,i),new Ae(m,i)],I=new K(g,null,0,E,de.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&I.putAllMetadata(y),I}decodeMiddle(i,l,c){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let m=i.getSize(),g=l[1],y=0;for(let E=0;E<2&&g<m;E++){let I=Rt.decodeDigit(i,h,g,Rt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+I%10);for(let D of h)g+=D;I>=10&&(y|=1<<1-E),E!==1&&(g=i.getNextSet(g),g=i.getNextUnset(g))}if(c.length!==2)throw new X;if(parseInt(c.toString())%4!==y)throw new X;return g}static parseExtensionString(i){return i.length!==2?null:new Map([[me.ISSUE_NUMBER,parseInt(i)]])}}class ho{static decodeRow(i,l,c){let h=Rt.findGuardPattern(l,c,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Rn().decodeRow(i,l,h)}catch{return new Bs().decodeRow(i,l,h)}}}ho.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Et extends Rt{constructor(){super(),this.decodeRowStringBuffer="",Et.L_AND_G_PATTERNS=Et.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let l=Et.L_PATTERNS[i-10],c=new Int32Array(l.length);for(let h=0;h<l.length;h++)c[h]=l[l.length-h-1];Et.L_AND_G_PATTERNS[i]=c}}decodeRow(i,l,c){let h=Et.findStartGuardPattern(l),m=c==null?null:c.get(L.NEED_RESULT_POINT_CALLBACK);if(m!=null){const Oe=new Ae((h[0]+h[1])/2,i);m.foundPossibleResultPoint(Oe)}let g=this.decodeMiddle(l,h,this.decodeRowStringBuffer),y=g.rowOffset,E=g.resultString;if(m!=null){const Oe=new Ae(y,i);m.foundPossibleResultPoint(Oe)}let I=this.decodeEnd(l,y);if(m!=null){const Oe=new Ae((I[0]+I[1])/2,i);m.foundPossibleResultPoint(Oe)}let D=I[1],z=D+(D-I[0]);if(z>=l.getSize()||!l.isRange(D,z,!1))throw new X;let $=E.toString();if($.length<8)throw new R;if(!Et.checkChecksum($))throw new j;let Z=(h[1]+h[0])/2,re=(I[1]+I[0])/2,ne=this.getBarcodeFormat(),he=[new Ae(Z,i),new Ae(re,i)],ge=new K($,null,0,he,ne,new Date().getTime()),Le=0;try{let Oe=ho.decodeRow(i,l,I[1]);ge.putMetadata(me.UPC_EAN_EXTENSION,Oe.getText()),ge.putAllMetadata(Oe.getResultMetadata()),ge.addResultPoints(Oe.getResultPoints()),Le=Oe.getText().length}catch{}let Fe=c==null?null:c.get(L.ALLOWED_EAN_EXTENSIONS);if(Fe!=null){let Oe=!1;for(let jt in Fe)if(Le.toString()===jt){Oe=!0;break}if(!Oe)throw new X}return ge}decodeEnd(i,l){return Et.findGuardPattern(i,l,!1,Et.START_END_PATTERN,new Int32Array(Et.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return Et.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let l=i.length;if(l===0)return!1;let c=parseInt(i.charAt(l-1),10);return Et.getStandardUPCEANChecksum(i.substring(0,l-1))===c}static getStandardUPCEANChecksum(i){let l=i.length,c=0;for(let h=l-1;h>=0;h-=2){let m=i.charAt(h).charCodeAt(0)-48;if(m<0||m>9)throw new R;c+=m}c*=3;for(let h=l-2;h>=0;h-=2){let m=i.charAt(h).charCodeAt(0)-48;if(m<0||m>9)throw new R;c+=m}return(1e3-c)%10}}class fn extends Et{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,l,c){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let m=i.getSize(),g=l[1],y=0;for(let I=0;I<6&&g<m;I++){let D=Et.decodeDigit(i,h,g,Et.L_AND_G_PATTERNS);c+=String.fromCharCode(48+D%10);for(let z of h)g+=z;D>=10&&(y|=1<<5-I)}c=fn.determineFirstDigit(c,y),g=Et.findGuardPattern(i,g,!0,Et.MIDDLE_PATTERN,new Int32Array(Et.MIDDLE_PATTERN.length).fill(0))[1];for(let I=0;I<6&&g<m;I++){let D=Et.decodeDigit(i,h,g,Et.L_PATTERNS);c+=String.fromCharCode(48+D);for(let z of h)g+=z}return{rowOffset:g,resultString:c}}getBarcodeFormat(){return de.EAN_13}static determineFirstDigit(i,l){for(let c=0;c<10;c++)if(l===this.FIRST_DIGIT_ENCODINGS[c])return i=String.fromCharCode(48+c)+i,i;throw new X}}fn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Yn extends Et{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,l,c){const h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let m=i.getSize(),g=l[1];for(let E=0;E<4&&g<m;E++){let I=Et.decodeDigit(i,h,g,Et.L_PATTERNS);c+=String.fromCharCode(48+I);for(let D of h)g+=D}g=Et.findGuardPattern(i,g,!0,Et.MIDDLE_PATTERN,new Int32Array(Et.MIDDLE_PATTERN.length).fill(0))[1];for(let E=0;E<4&&g<m;E++){let I=Et.decodeDigit(i,h,g,Et.L_PATTERNS);c+=String.fromCharCode(48+I);for(let D of h)g+=D}return{rowOffset:g,resultString:c}}getBarcodeFormat(){return de.EAN_8}}class fo extends Et{constructor(){super(...arguments),this.ean13Reader=new fn}getBarcodeFormat(){return de.UPC_A}decode(i,l){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,l,c){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,l,c))}decodeMiddle(i,l,c){return this.ean13Reader.decodeMiddle(i,l,c)}maybeReturnResult(i){let l=i.getText();if(l.charAt(0)==="0"){let c=new K(l.substring(1),null,null,i.getResultPoints(),de.UPC_A);return i.getResultMetadata()!=null&&c.putAllMetadata(i.getResultMetadata()),c}else throw new X}reset(){this.ean13Reader.reset()}}class Ge extends Et{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,l,c){const h=this.decodeMiddleCounters.map(I=>I);h[0]=0,h[1]=0,h[2]=0,h[3]=0;const m=i.getSize();let g=l[1],y=0;for(let I=0;I<6&&g<m;I++){const D=Ge.decodeDigit(i,h,g,Ge.L_AND_G_PATTERNS);c+=String.fromCharCode(48+D%10);for(let z of h)g+=z;D>=10&&(y|=1<<5-I)}let E=Ge.determineNumSysAndCheckDigit(c,y);return{rowOffset:g,resultString:E}}decodeEnd(i,l){return Ge.findGuardPatternWithoutCounters(i,l,!0,Ge.MIDDLE_END_PATTERN)}checkChecksum(i){return Et.checkChecksum(Ge.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,l){for(let c=0;c<=1;c++)for(let h=0;h<10;h++)if(l===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[c][h]){let m=String.fromCharCode(48+c),g=String.fromCharCode(48+h);return m+i+g}throw X.getNotFoundInstance()}getBarcodeFormat(){return de.UPC_E}static convertUPCEtoUPCA(i){const l=i.slice(1,7).split("").map(m=>m.charCodeAt(0)),c=new V;c.append(i.charAt(0));let h=l[5];switch(h){case 0:case 1:case 2:c.appendChars(l,0,2),c.append(h),c.append("0000"),c.appendChars(l,2,3);break;case 3:c.appendChars(l,0,3),c.append("00000"),c.appendChars(l,3,2);break;case 4:c.appendChars(l,0,4),c.append("00000"),c.append(l[4]);break;default:c.appendChars(l,0,5),c.append("0000"),c.append(h);break}return i.length>=8&&c.append(i.charAt(7)),c.toString()}}Ge.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ge.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Pt extends ut{constructor(i){super();let l=i==null?null:i.get(L.POSSIBLE_FORMATS),c=[];s(l)?(c.push(new fn),c.push(new fo),c.push(new Yn),c.push(new Ge)):(l.indexOf(de.EAN_13)>-1&&c.push(new fn),l.indexOf(de.UPC_A)>-1&&c.push(new fo),l.indexOf(de.EAN_8)>-1&&c.push(new Yn),l.indexOf(de.UPC_E)>-1&&c.push(new Ge)),this.readers=c}decodeRow(i,l,c){for(let h of this.readers)try{const m=h.decodeRow(i,l,c),g=m.getBarcodeFormat()===de.EAN_13&&m.getText().charAt(0)==="0",y=c==null?null:c.get(L.POSSIBLE_FORMATS),E=y==null||y.includes(de.UPC_A);if(g&&E){const I=m.getRawBytes(),D=new K(m.getText().substring(1),I,I?I.length:null,m.getResultPoints(),de.UPC_A);return D.putAllMetadata(m.getResultMetadata()),D}return m}catch{}throw new X}reset(){for(let i of this.readers)i.reset()}}class pt extends ut{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(i,l){for(let c=0;c<l.length;c++)if(ut.patternMatchVariance(i,l[c],pt.MAX_INDIVIDUAL_VARIANCE)<pt.MAX_AVG_VARIANCE)return c;throw new X}static count(i){return ke.sum(new Int32Array(i))}static increment(i,l){let c=0,h=l[0];for(let m=1;m<i.length;m++)l[m]>h&&(h=l[m],c=m);i[c]++}static decrement(i,l){let c=0,h=l[0];for(let m=1;m<i.length;m++)l[m]<h&&(h=l[m],c=m);i[c]--}static isFinderPattern(i){let l=i[0]+i[1],c=l+i[2]+i[3],h=l/c;if(h>=pt.MIN_FINDER_PATTERN_RATIO&&h<=pt.MAX_FINDER_PATTERN_RATIO){let m=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER;for(let y of i)y>g&&(g=y),y<m&&(m=y);return g<10*m}return!1}}pt.MAX_AVG_VARIANCE=.2,pt.MAX_INDIVIDUAL_VARIANCE=.45,pt.MIN_FINDER_PATTERN_RATIO=9.5/12,pt.MAX_FINDER_PATTERN_RATIO=12.5/14;class Hr{constructor(i,l){this.value=i,this.checksumPortion=l}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof Hr))return!1;const l=i;return this.value===l.value&&this.checksumPortion===l.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class mn{constructor(i,l,c,h,m){this.value=i,this.startEnd=l,this.value=i,this.startEnd=l,this.resultPoints=new Array,this.resultPoints.push(new Ae(c,m)),this.resultPoints.push(new Ae(h,m))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof mn))return!1;const l=i;return this.value===l.value}hashCode(){return this.value}}class Or{constructor(){}static getRSSvalue(i,l,c){let h=0;for(let E of i)h+=E;let m=0,g=0,y=i.length;for(let E=0;E<y-1;E++){let I;for(I=1,g|=1<<E;I<i[E];I++,g&=~(1<<E)){let D=Or.combins(h-I-1,y-E-2);if(c&&g===0&&h-I-(y-E-1)>=y-E-1&&(D-=Or.combins(h-I-(y-E),y-E-2)),y-E-1>1){let z=0;for(let $=h-I-(y-E-2);$>l;$--)z+=Or.combins(h-I-$-1,y-E-3);D-=z*(y-1-E)}else h-I>l&&D--;m+=D}h-=I}return m}static combins(i,l){let c,h;i-l>l?(h=l,c=i-l):(h=i-l,c=l);let m=1,g=1;for(let y=i;y>c;y--)m*=y,g<=h&&(m/=g,g++);for(;g<=h;)m/=g,g++;return m}}class Da{static buildBitArray(i){let l=i.length*2-1;i[i.length-1].getRightChar()==null&&(l-=1);let c=12*l,h=new T(c),m=0,y=i[0].getRightChar().getValue();for(let E=11;E>=0;--E)y&1<<E&&h.set(m),m++;for(let E=1;E<i.length;++E){let I=i[E],D=I.getLeftChar().getValue();for(let z=11;z>=0;--z)D&1<<z&&h.set(m),m++;if(I.getRightChar()!=null){let z=I.getRightChar().getValue();for(let $=11;$>=0;--$)z&1<<$&&h.set(m),m++}}return h}}class Dr{constructor(i,l){l?this.decodedInformation=null:(this.finished=i,this.decodedInformation=l)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class gs{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}class Pn extends gs{constructor(i,l){super(i),this.value=l}getValue(){return this.value}isFNC1(){return this.value===Pn.FNC1}}Pn.FNC1="$";class mo extends gs{constructor(i,l,c){super(i),c?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=l}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class xs extends gs{constructor(i,l,c){if(super(i),l<0||l>10||c<0||c>10)throw new R;this.firstDigit=l,this.secondDigit=c}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===xs.FNC1}isSecondDigitFNC1(){return this.secondDigit===xs.FNC1}isAnyFNC1(){return this.firstDigit===xs.FNC1||this.secondDigit===xs.FNC1}}xs.FNC1=10;class Ke{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new X;let l=i.substring(0,2);for(let m of Ke.TWO_DIGIT_DATA_LENGTH)if(m[0]===l)return m[1]===Ke.VARIABLE_LENGTH?Ke.processVariableAI(2,m[2],i):Ke.processFixedAI(2,m[1],i);if(i.length<3)throw new X;let c=i.substring(0,3);for(let m of Ke.THREE_DIGIT_DATA_LENGTH)if(m[0]===c)return m[1]===Ke.VARIABLE_LENGTH?Ke.processVariableAI(3,m[2],i):Ke.processFixedAI(3,m[1],i);for(let m of Ke.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(m[0]===c)return m[1]===Ke.VARIABLE_LENGTH?Ke.processVariableAI(4,m[2],i):Ke.processFixedAI(4,m[1],i);if(i.length<4)throw new X;let h=i.substring(0,4);for(let m of Ke.FOUR_DIGIT_DATA_LENGTH)if(m[0]===h)return m[1]===Ke.VARIABLE_LENGTH?Ke.processVariableAI(4,m[2],i):Ke.processFixedAI(4,m[1],i);throw new X}static processFixedAI(i,l,c){if(c.length<i)throw new X;let h=c.substring(0,i);if(c.length<i+l)throw new X;let m=c.substring(i,i+l),g=c.substring(i+l),y="("+h+")"+m,E=Ke.parseFieldsInGeneralPurpose(g);return E==null?y:y+E}static processVariableAI(i,l,c){let h=c.substring(0,i),m;c.length<i+l?m=c.length:m=i+l;let g=c.substring(i,m),y=c.substring(m),E="("+h+")"+g,I=Ke.parseFieldsInGeneralPurpose(y);return I==null?E:E+I}}Ke.VARIABLE_LENGTH=[],Ke.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ke.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ke.VARIABLE_LENGTH,20],["22",Ke.VARIABLE_LENGTH,29],["30",Ke.VARIABLE_LENGTH,8],["37",Ke.VARIABLE_LENGTH,8],["90",Ke.VARIABLE_LENGTH,30],["91",Ke.VARIABLE_LENGTH,30],["92",Ke.VARIABLE_LENGTH,30],["93",Ke.VARIABLE_LENGTH,30],["94",Ke.VARIABLE_LENGTH,30],["95",Ke.VARIABLE_LENGTH,30],["96",Ke.VARIABLE_LENGTH,30],["97",Ke.VARIABLE_LENGTH,3],["98",Ke.VARIABLE_LENGTH,30],["99",Ke.VARIABLE_LENGTH,30]],Ke.THREE_DIGIT_DATA_LENGTH=[["240",Ke.VARIABLE_LENGTH,30],["241",Ke.VARIABLE_LENGTH,30],["242",Ke.VARIABLE_LENGTH,6],["250",Ke.VARIABLE_LENGTH,30],["251",Ke.VARIABLE_LENGTH,30],["253",Ke.VARIABLE_LENGTH,17],["254",Ke.VARIABLE_LENGTH,20],["400",Ke.VARIABLE_LENGTH,30],["401",Ke.VARIABLE_LENGTH,30],["402",17],["403",Ke.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ke.VARIABLE_LENGTH,20],["421",Ke.VARIABLE_LENGTH,15],["422",3],["423",Ke.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ke.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ke.VARIABLE_LENGTH,15],["391",Ke.VARIABLE_LENGTH,18],["392",Ke.VARIABLE_LENGTH,15],["393",Ke.VARIABLE_LENGTH,18],["703",Ke.VARIABLE_LENGTH,30]],Ke.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ke.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ke.VARIABLE_LENGTH,20],["8003",Ke.VARIABLE_LENGTH,30],["8004",Ke.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ke.VARIABLE_LENGTH,30],["8008",Ke.VARIABLE_LENGTH,12],["8018",18],["8020",Ke.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ke.VARIABLE_LENGTH,70],["8200",Ke.VARIABLE_LENGTH,70]];class xl{constructor(i){this.buffer=new V,this.information=i}decodeAllCodes(i,l){let c=l,h=null;do{let m=this.decodeGeneralPurposeField(c,h),g=Ke.parseFieldsInGeneralPurpose(m.getNewString());if(g!=null&&i.append(g),m.isRemaining()?h=""+m.getRemainingValue():h=null,c===m.getNewPosition())break;c=m.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let l=i;l<i+3;++l)if(this.information.get(l))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let m=this.extractNumericValueFromBitArray(i,4);return m===0?new xs(this.information.getSize(),xs.FNC1,xs.FNC1):new xs(this.information.getSize(),m-1,xs.FNC1)}let l=this.extractNumericValueFromBitArray(i,7),c=(l-8)/11,h=(l-8)%11;return new xs(i+7,c,h)}extractNumericValueFromBitArray(i,l){return xl.extractNumericValueFromBitArray(this.information,i,l)}static extractNumericValueFromBitArray(i,l,c){let h=0;for(let m=0;m<c;++m)i.get(l+m)&&(h|=1<<c-m-1);return h}decodeGeneralPurposeField(i,l){this.buffer.setLengthToZero(),l!=null&&this.buffer.append(l),this.current.setPosition(i);let c=this.parseBlocks();return c!=null&&c.isRemaining()?new mo(this.current.getPosition(),this.buffer.toString(),c.getRemainingValue()):new mo(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,l;do{let c=this.current.getPosition();if(this.current.isAlpha()?(l=this.parseAlphaBlock(),i=l.isFinished()):this.current.isIsoIec646()?(l=this.parseIsoIec646Block(),i=l.isFinished()):(l=this.parseNumericBlock(),i=l.isFinished()),!(c!==this.current.getPosition())&&!i)break}while(!i);return l.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let l;return i.isSecondDigitFNC1()?l=new mo(this.current.getPosition(),this.buffer.toString()):l=new mo(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new Dr(!0,l)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let l=new mo(this.current.getPosition(),this.buffer.toString());return new Dr(!0,l)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Dr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let l=new mo(this.current.getPosition(),this.buffer.toString());return new Dr(!0,l)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Dr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let l=new mo(this.current.getPosition(),this.buffer.toString());return new Dr(!0,l)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Dr(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,5);if(l>=5&&l<16)return!0;if(i+7>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(i,7);if(c>=64&&c<116)return!0;if(i+8>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(i,8);return h>=232&&h<253}decodeIsoIec646(i){let l=this.extractNumericValueFromBitArray(i,5);if(l===15)return new Pn(i+5,Pn.FNC1);if(l>=5&&l<15)return new Pn(i+5,"0"+(l-5));let c=this.extractNumericValueFromBitArray(i,7);if(c>=64&&c<90)return new Pn(i+7,""+(c+1));if(c>=90&&c<116)return new Pn(i+7,""+(c+7));let h=this.extractNumericValueFromBitArray(i,8),m;switch(h){case 232:m="!";break;case 233:m='"';break;case 234:m="%";break;case 235:m="&";break;case 236:m="'";break;case 237:m="(";break;case 238:m=")";break;case 239:m="*";break;case 240:m="+";break;case 241:m=",";break;case 242:m="-";break;case 243:m=".";break;case 244:m="/";break;case 245:m=":";break;case 246:m=";";break;case 247:m="<";break;case 248:m="=";break;case 249:m=">";break;case 250:m="?";break;case 251:m="_";break;case 252:m=" ";break;default:throw new R}return new Pn(i+8,m)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,5);if(l>=5&&l<16)return!0;if(i+6>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(i,6);return c>=16&&c<63}decodeAlphanumeric(i){let l=this.extractNumericValueFromBitArray(i,5);if(l===15)return new Pn(i+5,Pn.FNC1);if(l>=5&&l<15)return new Pn(i+5,"0"+(l-5));let c=this.extractNumericValueFromBitArray(i,6);if(c>=32&&c<58)return new Pn(i+6,""+(c+33));let h;switch(c){case 58:h="*";break;case 59:h=",";break;case 60:h="-";break;case 61:h=".";break;case 62:h="/";break;default:throw new _e("Decoding invalid alphanumeric value: "+c)}return new Pn(i+6,h)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let l=0;l<5&&l+i<this.information.getSize();++l)if(l===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+l))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let l=i;l<i+3;++l)if(this.information.get(l))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let l=0;l<4&&l+i<this.information.getSize();++l)if(this.information.get(i+l))return!1;return!0}}class fp{constructor(i){this.information=i,this.generalDecoder=new xl(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class On extends fp{constructor(i){super(i)}encodeCompressedGtin(i,l){i.append("(01)");let c=i.length();i.append("9"),this.encodeCompressedGtinWithoutAI(i,l,c)}encodeCompressedGtinWithoutAI(i,l,c){for(let h=0;h<4;++h){let m=this.getGeneralDecoder().extractNumericValueFromBitArray(l+10*h,10);m/100===0&&i.append("0"),m/10===0&&i.append("0"),i.append(m)}On.appendCheckDigit(i,c)}static appendCheckDigit(i,l){let c=0;for(let h=0;h<13;h++){let m=i.charAt(h+l).charCodeAt(0)-48;c+=h&1?m:3*m}c=10-c%10,c===10&&(c=0),i.append(c)}}On.GTIN_SIZE=40;class vl extends On{constructor(i){super(i)}parseInformation(){let i=new V;i.append("(01)");let l=i.length(),c=this.getGeneralDecoder().extractNumericValueFromBitArray(vl.HEADER_SIZE,4);return i.append(c),this.encodeCompressedGtinWithoutAI(i,vl.HEADER_SIZE+4,l),this.getGeneralDecoder().decodeAllCodes(i,vl.HEADER_SIZE+44)}}vl.HEADER_SIZE=4;class Gu extends fp{constructor(i){super(i)}parseInformation(){let i=new V;return this.getGeneralDecoder().decodeAllCodes(i,Gu.HEADER_SIZE)}}Gu.HEADER_SIZE=5;class Xu extends On{constructor(i){super(i)}encodeCompressedWeight(i,l,c){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(l,c);this.addWeightCode(i,h);let m=this.checkWeight(h),g=1e5;for(let y=0;y<5;++y)m/g===0&&i.append("0"),g/=10;i.append(m)}}class la extends Xu{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()!=la.HEADER_SIZE+Xu.GTIN_SIZE+la.WEIGHT_SIZE)throw new X;let i=new V;return this.encodeCompressedGtin(i,la.HEADER_SIZE),this.encodeCompressedWeight(i,la.HEADER_SIZE+Xu.GTIN_SIZE,la.WEIGHT_SIZE),i.toString()}}la.HEADER_SIZE=5,la.WEIGHT_SIZE=15;class dk extends la{constructor(i){super(i)}addWeightCode(i,l){i.append("(3103)")}checkWeight(i){return i}}class uk extends la{constructor(i){super(i)}addWeightCode(i,l){l<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}class ca extends On{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<ca.HEADER_SIZE+On.GTIN_SIZE)throw new X;let i=new V;this.encodeCompressedGtin(i,ca.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(ca.HEADER_SIZE+On.GTIN_SIZE,ca.LAST_DIGIT_SIZE);i.append("(392"),i.append(l),i.append(")");let c=this.getGeneralDecoder().decodeGeneralPurposeField(ca.HEADER_SIZE+On.GTIN_SIZE+ca.LAST_DIGIT_SIZE,null);return i.append(c.getNewString()),i.toString()}}ca.HEADER_SIZE=8,ca.LAST_DIGIT_SIZE=2;class bn extends On{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<bn.HEADER_SIZE+On.GTIN_SIZE)throw new X;let i=new V;this.encodeCompressedGtin(i,bn.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(bn.HEADER_SIZE+On.GTIN_SIZE,bn.LAST_DIGIT_SIZE);i.append("(393"),i.append(l),i.append(")");let c=this.getGeneralDecoder().extractNumericValueFromBitArray(bn.HEADER_SIZE+On.GTIN_SIZE+bn.LAST_DIGIT_SIZE,bn.FIRST_THREE_DIGITS_SIZE);c/100==0&&i.append("0"),c/10==0&&i.append("0"),i.append(c);let h=this.getGeneralDecoder().decodeGeneralPurposeField(bn.HEADER_SIZE+On.GTIN_SIZE+bn.LAST_DIGIT_SIZE+bn.FIRST_THREE_DIGITS_SIZE,null);return i.append(h.getNewString()),i.toString()}}bn.HEADER_SIZE=8,bn.LAST_DIGIT_SIZE=2,bn.FIRST_THREE_DIGITS_SIZE=10;class dr extends Xu{constructor(i,l,c){super(i),this.dateCode=c,this.firstAIdigits=l}parseInformation(){if(this.getInformation().getSize()!=dr.HEADER_SIZE+dr.GTIN_SIZE+dr.WEIGHT_SIZE+dr.DATE_SIZE)throw new X;let i=new V;return this.encodeCompressedGtin(i,dr.HEADER_SIZE),this.encodeCompressedWeight(i,dr.HEADER_SIZE+dr.GTIN_SIZE,dr.WEIGHT_SIZE),this.encodeCompressedDate(i,dr.HEADER_SIZE+dr.GTIN_SIZE+dr.WEIGHT_SIZE),i.toString()}encodeCompressedDate(i,l){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(l,dr.DATE_SIZE);if(c==38400)return;i.append("("),i.append(this.dateCode),i.append(")");let h=c%32;c/=32;let m=c%12+1;c/=12;let g=c;g/10==0&&i.append("0"),i.append(g),m/10==0&&i.append("0"),i.append(m),h/10==0&&i.append("0"),i.append(h)}addWeightCode(i,l){i.append("("),i.append(this.firstAIdigits),i.append(l/1e5),i.append(")")}checkWeight(i){return i%1e5}}dr.HEADER_SIZE=8,dr.WEIGHT_SIZE=20,dr.DATE_SIZE=16;function Dv(F){try{if(F.get(1))return new vl(F);if(!F.get(2))return new Gu(F);switch(xl.extractNumericValueFromBitArray(F,1,4)){case 4:return new dk(F);case 5:return new uk(F)}switch(xl.extractNumericValueFromBitArray(F,1,5)){case 12:return new ca(F);case 13:return new bn(F)}switch(xl.extractNumericValueFromBitArray(F,1,7)){case 56:return new dr(F,"310","11");case 57:return new dr(F,"320","11");case 58:return new dr(F,"310","13");case 59:return new dr(F,"320","13");case 60:return new dr(F,"310","15");case 61:return new dr(F,"320","15");case 62:return new dr(F,"310","17");case 63:return new dr(F,"320","17")}}catch(i){throw console.log(i),new _e("unknown decoder: "+F)}}class si{constructor(i,l,c,h){this.leftchar=i,this.rightchar=l,this.finderpattern=c,this.maybeLast=h}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,l){return i instanceof si?si.equalsOrNull(i.leftchar,l.leftchar)&&si.equalsOrNull(i.rightchar,l.rightchar)&&si.equalsOrNull(i.finderpattern,l.finderpattern):!1}static equalsOrNull(i,l){return i===null?l===null:si.equals(i,l)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class mp{constructor(i,l,c){this.pairs=i,this.rowNumber=l,this.wasReversed=c}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,l){return i instanceof mp?this.checkEqualitity(i,l)&&i.wasReversed===l.wasReversed:!1}checkEqualitity(i,l){if(!i||!l)return;let c;return i.forEach((h,m)=>{l.forEach(g=>{h.getLeftChar().getValue()===g.getLeftChar().getValue()&&h.getRightChar().getValue()===g.getRightChar().getValue()&&h.getFinderPatter().getValue()===g.getFinderPatter().getValue()&&(c=!0)})}),c}}class Te extends pt{constructor(i){super(...arguments),this.pairs=new Array(Te.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,l,c){this.pairs.length=0,this.startFromEven=!1;try{return Te.constructResult(this.decodeRow2pairs(i,l))}catch(h){this.verbose&&console.log(h)}return this.pairs.length=0,this.startFromEven=!0,Te.constructResult(this.decodeRow2pairs(i,l))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,l){let c=!1;for(;!c;)try{this.pairs.push(this.retrieveNextPair(l,this.pairs,i))}catch(m){if(m instanceof X){if(!this.pairs.length)throw new X;c=!0}}if(this.checkChecksum())return this.pairs;let h;if(this.rows.length?h=!0:h=!1,this.storeRow(i,!1),h){let m=this.checkRowsBoolean(!1);if(m!=null||(m=this.checkRowsBoolean(!0),m!=null))return m}throw new X}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let l=null;try{l=this.checkRows(new Array,0)}catch(c){this.verbose&&console.log(c)}return i&&(this.rows=this.rows.reverse()),l}checkRows(i,l){for(let c=l;c<this.rows.length;c++){let h=this.rows[c];this.pairs.length=0;for(let g of i)this.pairs.push(g.getPairs());if(this.pairs.push(h.getPairs()),!Te.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let m=new Array(i);m.push(h);try{return this.checkRows(m,c+1)}catch(g){this.verbose&&console.log(g)}}throw new X}static isValidSequence(i){for(let l of Te.FINDER_PATTERN_SEQUENCES){if(i.length>l.length)continue;let c=!0;for(let h=0;h<i.length;h++)if(i[h].getFinderPattern().getValue()!=l[h]){c=!1;break}if(c)return!0}return!1}storeRow(i,l){let c=0,h=!1,m=!1;for(;c<this.rows.length;){let g=this.rows[c];if(g.getRowNumber()>i){m=g.isEquivalent(this.pairs);break}h=g.isEquivalent(this.pairs),c++}m||h||Te.isPartialRow(this.pairs,this.rows)||(this.rows.push(c,new mp(this.pairs,i,l)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,l){for(let c of l)if(c.getPairs().length!==i.length){for(let h of c.getPairs())for(let m of i)if(si.equals(h,m))break}}static isPartialRow(i,l){for(let c of l){let h=!0;for(let m of i){let g=!1;for(let y of c.getPairs())if(m.equals(y)){g=!0;break}if(!g){h=!1;break}}if(h)return!0}return!1}getRows(){return this.rows}static constructResult(i){let l=Da.buildBitArray(i),h=Dv(l).parseInformation(),m=i[0].getFinderPattern().getResultPoints(),g=i[i.length-1].getFinderPattern().getResultPoints(),y=[m[0],m[1],g[0],g[1]];return new K(h,null,null,y,de.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),l=i.getLeftChar(),c=i.getRightChar();if(c==null)return!1;let h=c.getChecksumPortion(),m=2;for(let y=1;y<this.pairs.size();++y){let E=this.pairs.get(y);h+=E.getLeftChar().getChecksumPortion(),m++;let I=E.getRightChar();I!=null&&(h+=I.getChecksumPortion(),m++)}return h%=211,211*(m-4)+h==l.getValue()}static getNextSecondBar(i,l){let c;return i.get(l)?(c=i.getNextUnset(l),c=i.getNextSet(c)):(c=i.getNextSet(l),c=i.getNextUnset(c)),c}retrieveNextPair(i,l,c){let h=l.length%2==0;this.startFromEven&&(h=!h);let m,g=!0,y=-1;do this.findNextPair(i,l,y),m=this.parseFoundFinderPattern(i,c,h),m==null?y=Te.getNextSecondBar(i,this.startEnd[0]):g=!1;while(g);let E=this.decodeDataCharacter(i,m,h,!0);if(!this.isEmptyPair(l)&&l[l.length-1].mustBeLast())throw new X;let I;try{I=this.decodeDataCharacter(i,m,h,!1)}catch(D){I=null,this.verbose&&console.log(D)}return new si(E,I,m,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,l,c){let h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;let m=i.getSize(),g;c>=0?g=c:this.isEmptyPair(l)?g=0:g=l[l.length-1].getFinderPattern().getStartEnd()[1];let y=l.length%2!=0;this.startFromEven&&(y=!y);let E=!1;for(;g<m&&(E=!i.get(g),!!E);)g++;let I=0,D=g;for(let z=g;z<m;z++)if(i.get(z)!=E)h[I]++;else{if(I==3){if(y&&Te.reverseCounters(h),Te.isFinderPattern(h)){this.startEnd[0]=D,this.startEnd[1]=z;return}y&&Te.reverseCounters(h),D+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,I--}else I++;h[I]=1,E=!E}throw new X}static reverseCounters(i){let l=i.length;for(let c=0;c<l/2;++c){let h=i[c];i[c]=i[l-c-1],i[l-c-1]=h}}parseFoundFinderPattern(i,l,c){let h,m,g;if(c){let I=this.startEnd[0]-1;for(;I>=0&&!i.get(I);)I--;I++,h=this.startEnd[0]-I,m=I,g=this.startEnd[1]}else m=this.startEnd[0],g=i.getNextUnset(this.startEnd[1]+1),h=g-this.startEnd[1];let y=this.getDecodeFinderCounters();C.arraycopy(y,0,y,1,y.length-1),y[0]=h;let E;try{E=this.parseFinderValue(y,Te.FINDER_PATTERNS)}catch{return null}return new mn(E,[m,g],m,g,l)}decodeDataCharacter(i,l,c,h){let m=this.getDataCharacterCounters();for(let Jt=0;Jt<m.length;Jt++)m[Jt]=0;if(h)Te.recordPatternInReverse(i,l.getStartEnd()[0],m);else{Te.recordPattern(i,l.getStartEnd()[1],m);for(let Jt=0,rn=m.length-1;Jt<rn;Jt++,rn--){let Qn=m[Jt];m[Jt]=m[rn],m[rn]=Qn}}let g=17,y=ke.sum(new Int32Array(m))/g,E=(l.getStartEnd()[1]-l.getStartEnd()[0])/15;if(Math.abs(y-E)/E>.3)throw new X;let I=this.getOddCounts(),D=this.getEvenCounts(),z=this.getOddRoundingErrors(),$=this.getEvenRoundingErrors();for(let Jt=0;Jt<m.length;Jt++){let rn=1*m[Jt]/y,Qn=rn+.5;if(Qn<1){if(rn<.3)throw new X;Qn=1}else if(Qn>8){if(rn>8.7)throw new X;Qn=8}let Nl=Jt/2;Jt&1?(D[Nl]=Qn,$[Nl]=rn-Qn):(I[Nl]=Qn,z[Nl]=rn-Qn)}this.adjustOddEvenCounts(g);let Z=4*l.getValue()+(c?0:2)+(h?0:1)-1,re=0,ne=0;for(let Jt=I.length-1;Jt>=0;Jt--){if(Te.isNotA1left(l,c,h)){let rn=Te.WEIGHTS[Z][2*Jt];ne+=I[Jt]*rn}re+=I[Jt]}let he=0;for(let Jt=D.length-1;Jt>=0;Jt--)if(Te.isNotA1left(l,c,h)){let rn=Te.WEIGHTS[Z][2*Jt+1];he+=D[Jt]*rn}let ge=ne+he;if(re&1||re>13||re<4)throw new X;let Le=(13-re)/2,Fe=Te.SYMBOL_WIDEST[Le],Oe=9-Fe,jt=Or.getRSSvalue(I,Fe,!0),ft=Or.getRSSvalue(D,Oe,!1),Mn=Te.EVEN_TOTAL_SUBSET[Le],zs=Te.GSUM[Le],Ln=jt*Mn+ft+zs;return new Hr(Ln,ge)}static isNotA1left(i,l,c){return!(i.getValue()==0&&l&&c)}adjustOddEvenCounts(i){let l=ke.sum(new Int32Array(this.getOddCounts())),c=ke.sum(new Int32Array(this.getEvenCounts())),h=!1,m=!1;l>13?m=!0:l<4&&(h=!0);let g=!1,y=!1;c>13?y=!0:c<4&&(g=!0);let E=l+c-i,I=(l&1)==1,D=(c&1)==0;if(E==1)if(I){if(D)throw new X;m=!0}else{if(!D)throw new X;y=!0}else if(E==-1)if(I){if(D)throw new X;h=!0}else{if(!D)throw new X;g=!0}else if(E==0){if(I){if(!D)throw new X;l<c?(h=!0,y=!0):(m=!0,g=!0)}else if(D)throw new X}else throw new X;if(h){if(m)throw new X;Te.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(m&&Te.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(y)throw new X;Te.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&Te.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Te.SYMBOL_WIDEST=[7,5,4,3,1],Te.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Te.GSUM=[0,348,1388,2948,3988],Te.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Te.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Te.FINDER_PAT_A=0,Te.FINDER_PAT_B=1,Te.FINDER_PAT_C=2,Te.FINDER_PAT_D=3,Te.FINDER_PAT_E=4,Te.FINDER_PAT_F=5,Te.FINDER_PATTERN_SEQUENCES=[[Te.FINDER_PAT_A,Te.FINDER_PAT_A],[Te.FINDER_PAT_A,Te.FINDER_PAT_B,Te.FINDER_PAT_B],[Te.FINDER_PAT_A,Te.FINDER_PAT_C,Te.FINDER_PAT_B,Te.FINDER_PAT_D],[Te.FINDER_PAT_A,Te.FINDER_PAT_E,Te.FINDER_PAT_B,Te.FINDER_PAT_D,Te.FINDER_PAT_C],[Te.FINDER_PAT_A,Te.FINDER_PAT_E,Te.FINDER_PAT_B,Te.FINDER_PAT_D,Te.FINDER_PAT_D,Te.FINDER_PAT_F],[Te.FINDER_PAT_A,Te.FINDER_PAT_E,Te.FINDER_PAT_B,Te.FINDER_PAT_D,Te.FINDER_PAT_E,Te.FINDER_PAT_F,Te.FINDER_PAT_F],[Te.FINDER_PAT_A,Te.FINDER_PAT_A,Te.FINDER_PAT_B,Te.FINDER_PAT_B,Te.FINDER_PAT_C,Te.FINDER_PAT_C,Te.FINDER_PAT_D,Te.FINDER_PAT_D],[Te.FINDER_PAT_A,Te.FINDER_PAT_A,Te.FINDER_PAT_B,Te.FINDER_PAT_B,Te.FINDER_PAT_C,Te.FINDER_PAT_C,Te.FINDER_PAT_D,Te.FINDER_PAT_E,Te.FINDER_PAT_E],[Te.FINDER_PAT_A,Te.FINDER_PAT_A,Te.FINDER_PAT_B,Te.FINDER_PAT_B,Te.FINDER_PAT_C,Te.FINDER_PAT_C,Te.FINDER_PAT_D,Te.FINDER_PAT_E,Te.FINDER_PAT_F,Te.FINDER_PAT_F],[Te.FINDER_PAT_A,Te.FINDER_PAT_A,Te.FINDER_PAT_B,Te.FINDER_PAT_B,Te.FINDER_PAT_C,Te.FINDER_PAT_D,Te.FINDER_PAT_D,Te.FINDER_PAT_E,Te.FINDER_PAT_E,Te.FINDER_PAT_F,Te.FINDER_PAT_F]],Te.MAX_PAIRS=11;class hk extends Hr{constructor(i,l,c){super(i,l),this.count=0,this.finderPattern=c}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class yr extends pt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,l,c){const h=this.decodePair(l,!1,i,c);yr.addOrTally(this.possibleLeftPairs,h),l.reverse();let m=this.decodePair(l,!0,i,c);yr.addOrTally(this.possibleRightPairs,m),l.reverse();for(let g of this.possibleLeftPairs)if(g.getCount()>1){for(let y of this.possibleRightPairs)if(y.getCount()>1&&yr.checkChecksum(g,y))return yr.constructResult(g,y)}throw new X}static addOrTally(i,l){if(l==null)return;let c=!1;for(let h of i)if(h.getValue()===l.getValue()){h.incrementCount(),c=!0;break}c||i.push(l)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,l){let c=4537077*i.getValue()+l.getValue(),h=new String(c).toString(),m=new V;for(let I=13-h.length;I>0;I--)m.append("0");m.append(h);let g=0;for(let I=0;I<13;I++){let D=m.charAt(I).charCodeAt(0)-48;g+=I&1?D:3*D}g=10-g%10,g===10&&(g=0),m.append(g.toString());let y=i.getFinderPattern().getResultPoints(),E=l.getFinderPattern().getResultPoints();return new K(m.toString(),null,0,[y[0],y[1],E[0],E[1]],de.RSS_14,new Date().getTime())}static checkChecksum(i,l){let c=(i.getChecksumPortion()+16*l.getChecksumPortion())%79,h=9*i.getFinderPattern().getValue()+l.getFinderPattern().getValue();return h>72&&h--,h>8&&h--,c===h}decodePair(i,l,c,h){try{let m=this.findFinderPattern(i,l),g=this.parseFoundFinderPattern(i,c,l,m),y=h==null?null:h.get(L.NEED_RESULT_POINT_CALLBACK);if(y!=null){let D=(m[0]+m[1])/2;l&&(D=i.getSize()-1-D),y.foundPossibleResultPoint(new Ae(D,c))}let E=this.decodeDataCharacter(i,g,!0),I=this.decodeDataCharacter(i,g,!1);return new hk(1597*E.getValue()+I.getValue(),E.getChecksumPortion()+4*I.getChecksumPortion(),g)}catch{return null}}decodeDataCharacter(i,l,c){let h=this.getDataCharacterCounters();for(let he=0;he<h.length;he++)h[he]=0;if(c)ut.recordPatternInReverse(i,l.getStartEnd()[0],h);else{ut.recordPattern(i,l.getStartEnd()[1]+1,h);for(let he=0,ge=h.length-1;he<ge;he++,ge--){let Le=h[he];h[he]=h[ge],h[ge]=Le}}let m=c?16:15,g=ke.sum(new Int32Array(h))/m,y=this.getOddCounts(),E=this.getEvenCounts(),I=this.getOddRoundingErrors(),D=this.getEvenRoundingErrors();for(let he=0;he<h.length;he++){let ge=h[he]/g,Le=Math.floor(ge+.5);Le<1?Le=1:Le>8&&(Le=8);let Fe=Math.floor(he/2);he&1?(E[Fe]=Le,D[Fe]=ge-Le):(y[Fe]=Le,I[Fe]=ge-Le)}this.adjustOddEvenCounts(c,m);let z=0,$=0;for(let he=y.length-1;he>=0;he--)$*=9,$+=y[he],z+=y[he];let Z=0,re=0;for(let he=E.length-1;he>=0;he--)Z*=9,Z+=E[he],re+=E[he];let ne=$+3*Z;if(c){if(z&1||z>12||z<4)throw new X;let he=(12-z)/2,ge=yr.OUTSIDE_ODD_WIDEST[he],Le=9-ge,Fe=Or.getRSSvalue(y,ge,!1),Oe=Or.getRSSvalue(E,Le,!0),jt=yr.OUTSIDE_EVEN_TOTAL_SUBSET[he],ft=yr.OUTSIDE_GSUM[he];return new Hr(Fe*jt+Oe+ft,ne)}else{if(re&1||re>10||re<4)throw new X;let he=(10-re)/2,ge=yr.INSIDE_ODD_WIDEST[he],Le=9-ge,Fe=Or.getRSSvalue(y,ge,!0),Oe=Or.getRSSvalue(E,Le,!1),jt=yr.INSIDE_ODD_TOTAL_SUBSET[he],ft=yr.INSIDE_GSUM[he];return new Hr(Oe*jt+Fe+ft,ne)}}findFinderPattern(i,l){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=i.getSize(),m=!1,g=0;for(;g<h&&(m=!i.get(g),l!==m);)g++;let y=0,E=g;for(let I=g;I<h;I++)if(i.get(I)!==m)c[y]++;else{if(y===3){if(pt.isFinderPattern(c))return[E,I];E+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,y--}else y++;c[y]=1,m=!m}throw new X}parseFoundFinderPattern(i,l,c,h){let m=i.get(h[0]),g=h[0]-1;for(;g>=0&&m!==i.get(g);)g--;g++;const y=h[0]-g,E=this.getDecodeFinderCounters(),I=new Int32Array(E.length);C.arraycopy(E,0,I,1,E.length-1),I[0]=y;const D=this.parseFinderValue(I,yr.FINDER_PATTERNS);let z=g,$=h[1];return c&&(z=i.getSize()-1-z,$=i.getSize()-1-$),new mn(D,[g,h[1]],z,$,l)}adjustOddEvenCounts(i,l){let c=ke.sum(new Int32Array(this.getOddCounts())),h=ke.sum(new Int32Array(this.getEvenCounts())),m=!1,g=!1,y=!1,E=!1;i?(c>12?g=!0:c<4&&(m=!0),h>12?E=!0:h<4&&(y=!0)):(c>11?g=!0:c<5&&(m=!0),h>10?E=!0:h<4&&(y=!0));let I=c+h-l,D=(c&1)===(i?1:0),z=(h&1)===1;if(I===1)if(D){if(z)throw new X;g=!0}else{if(!z)throw new X;E=!0}else if(I===-1)if(D){if(z)throw new X;m=!0}else{if(!z)throw new X;y=!0}else if(I===0){if(D){if(!z)throw new X;c<h?(m=!0,E=!0):(g=!0,y=!0)}else if(z)throw new X}else throw new X;if(m){if(g)throw new X;pt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&pt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(E)throw new X;pt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}E&&pt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}yr.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],yr.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],yr.OUTSIDE_GSUM=[0,161,961,2015,2715],yr.INSIDE_GSUM=[0,336,1036,1516],yr.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],yr.INSIDE_ODD_WIDEST=[2,4,6,8],yr.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class wl extends ut{constructor(i,l){super(),this.readers=[],this.verbose=l===!0;const c=i?i.get(L.POSSIBLE_FORMATS):null,h=i&&i.get(L.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;c?((c.includes(de.EAN_13)||c.includes(de.UPC_A)||c.includes(de.EAN_8)||c.includes(de.UPC_E))&&this.readers.push(new Pt(i)),c.includes(de.CODE_39)&&this.readers.push(new Ot(h)),c.includes(de.CODE_128)&&this.readers.push(new Pe),c.includes(de.ITF)&&this.readers.push(new ht),c.includes(de.RSS_14)&&this.readers.push(new yr),c.includes(de.RSS_EXPANDED)&&this.readers.push(new Te(this.verbose))):(this.readers.push(new Pt(i)),this.readers.push(new Ot),this.readers.push(new Pt(i)),this.readers.push(new Pe),this.readers.push(new ht),this.readers.push(new yr),this.readers.push(new Te(this.verbose)))}decodeRow(i,l,c){for(let h=0;h<this.readers.length;h++)try{return this.readers[h].decodeRow(i,l,c)}catch{}throw new X}reset(){this.readers.forEach(i=>i.reset())}}class fk extends J{constructor(i=500,l){super(new wl(l),i,l)}}class Ut{constructor(i,l,c){this.ecCodewords=i,this.ecBlocks=[l],c&&this.ecBlocks.push(c)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Bt{constructor(i,l){this.count=i,this.dataCodewords=l}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class St{constructor(i,l,c,h,m,g){this.versionNumber=i,this.symbolSizeRows=l,this.symbolSizeColumns=c,this.dataRegionSizeRows=h,this.dataRegionSizeColumns=m,this.ecBlocks=g;let y=0;const E=g.getECCodewords(),I=g.getECBlocks();for(let D of I)y+=D.getCount()*(D.getDataCodewords()+E);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,l){if(i&1||l&1)throw new R;for(let c of St.VERSIONS)if(c.symbolSizeRows===i&&c.symbolSizeColumns===l)return c;throw new R}toString(){return""+this.versionNumber}static buildVersions(){return[new St(1,10,10,8,8,new Ut(5,new Bt(1,3))),new St(2,12,12,10,10,new Ut(7,new Bt(1,5))),new St(3,14,14,12,12,new Ut(10,new Bt(1,8))),new St(4,16,16,14,14,new Ut(12,new Bt(1,12))),new St(5,18,18,16,16,new Ut(14,new Bt(1,18))),new St(6,20,20,18,18,new Ut(18,new Bt(1,22))),new St(7,22,22,20,20,new Ut(20,new Bt(1,30))),new St(8,24,24,22,22,new Ut(24,new Bt(1,36))),new St(9,26,26,24,24,new Ut(28,new Bt(1,44))),new St(10,32,32,14,14,new Ut(36,new Bt(1,62))),new St(11,36,36,16,16,new Ut(42,new Bt(1,86))),new St(12,40,40,18,18,new Ut(48,new Bt(1,114))),new St(13,44,44,20,20,new Ut(56,new Bt(1,144))),new St(14,48,48,22,22,new Ut(68,new Bt(1,174))),new St(15,52,52,24,24,new Ut(42,new Bt(2,102))),new St(16,64,64,14,14,new Ut(56,new Bt(2,140))),new St(17,72,72,16,16,new Ut(36,new Bt(4,92))),new St(18,80,80,18,18,new Ut(48,new Bt(4,114))),new St(19,88,88,20,20,new Ut(56,new Bt(4,144))),new St(20,96,96,22,22,new Ut(68,new Bt(4,174))),new St(21,104,104,24,24,new Ut(56,new Bt(6,136))),new St(22,120,120,18,18,new Ut(68,new Bt(6,175))),new St(23,132,132,20,20,new Ut(62,new Bt(8,163))),new St(24,144,144,22,22,new Ut(62,new Bt(8,156),new Bt(2,155))),new St(25,8,18,6,16,new Ut(7,new Bt(1,5))),new St(26,8,32,6,14,new Ut(11,new Bt(1,10))),new St(27,12,26,10,24,new Ut(14,new Bt(1,16))),new St(28,12,36,10,16,new Ut(18,new Bt(1,22))),new St(29,16,36,14,16,new Ut(24,new Bt(1,32))),new St(30,16,48,14,22,new Ut(28,new Bt(1,49)))]}}St.VERSIONS=St.buildVersions();class pp{constructor(i){const l=i.getHeight();if(l<8||l>144||l&1)throw new R;this.version=pp.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new ee(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const l=i.getHeight(),c=i.getWidth();return St.getVersionForDimensions(l,c)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let l=0,c=4,h=0;const m=this.mappingBitMatrix.getHeight(),g=this.mappingBitMatrix.getWidth();let y=!1,E=!1,I=!1,D=!1;do if(c===m&&h===0&&!y)i[l++]=this.readCorner1(m,g)&255,c-=2,h+=2,y=!0;else if(c===m-2&&h===0&&g&3&&!E)i[l++]=this.readCorner2(m,g)&255,c-=2,h+=2,E=!0;else if(c===m+4&&h===2&&!(g&7)&&!I)i[l++]=this.readCorner3(m,g)&255,c-=2,h+=2,I=!0;else if(c===m-2&&h===0&&(g&7)===4&&!D)i[l++]=this.readCorner4(m,g)&255,c-=2,h+=2,D=!0;else{do c<m&&h>=0&&!this.readMappingMatrix.get(h,c)&&(i[l++]=this.readUtah(c,h,m,g)&255),c-=2,h+=2;while(c>=0&&h<g);c+=1,h+=3;do c>=0&&h<g&&!this.readMappingMatrix.get(h,c)&&(i[l++]=this.readUtah(c,h,m,g)&255),c+=2,h-=2;while(c<m&&h>=0);c+=3,h+=1}while(c<m||h<g);if(l!==this.version.getTotalCodewords())throw new R;return i}readModule(i,l,c,h){return i<0&&(i+=c,l+=4-(c+4&7)),l<0&&(l+=h,i+=4-(h+4&7)),this.readMappingMatrix.set(l,i),this.mappingBitMatrix.get(l,i)}readUtah(i,l,c,h){let m=0;return this.readModule(i-2,l-2,c,h)&&(m|=1),m<<=1,this.readModule(i-2,l-1,c,h)&&(m|=1),m<<=1,this.readModule(i-1,l-2,c,h)&&(m|=1),m<<=1,this.readModule(i-1,l-1,c,h)&&(m|=1),m<<=1,this.readModule(i-1,l,c,h)&&(m|=1),m<<=1,this.readModule(i,l-2,c,h)&&(m|=1),m<<=1,this.readModule(i,l-1,c,h)&&(m|=1),m<<=1,this.readModule(i,l,c,h)&&(m|=1),m}readCorner1(i,l){let c=0;return this.readModule(i-1,0,i,l)&&(c|=1),c<<=1,this.readModule(i-1,1,i,l)&&(c|=1),c<<=1,this.readModule(i-1,2,i,l)&&(c|=1),c<<=1,this.readModule(0,l-2,i,l)&&(c|=1),c<<=1,this.readModule(0,l-1,i,l)&&(c|=1),c<<=1,this.readModule(1,l-1,i,l)&&(c|=1),c<<=1,this.readModule(2,l-1,i,l)&&(c|=1),c<<=1,this.readModule(3,l-1,i,l)&&(c|=1),c}readCorner2(i,l){let c=0;return this.readModule(i-3,0,i,l)&&(c|=1),c<<=1,this.readModule(i-2,0,i,l)&&(c|=1),c<<=1,this.readModule(i-1,0,i,l)&&(c|=1),c<<=1,this.readModule(0,l-4,i,l)&&(c|=1),c<<=1,this.readModule(0,l-3,i,l)&&(c|=1),c<<=1,this.readModule(0,l-2,i,l)&&(c|=1),c<<=1,this.readModule(0,l-1,i,l)&&(c|=1),c<<=1,this.readModule(1,l-1,i,l)&&(c|=1),c}readCorner3(i,l){let c=0;return this.readModule(i-1,0,i,l)&&(c|=1),c<<=1,this.readModule(i-1,l-1,i,l)&&(c|=1),c<<=1,this.readModule(0,l-3,i,l)&&(c|=1),c<<=1,this.readModule(0,l-2,i,l)&&(c|=1),c<<=1,this.readModule(0,l-1,i,l)&&(c|=1),c<<=1,this.readModule(1,l-3,i,l)&&(c|=1),c<<=1,this.readModule(1,l-2,i,l)&&(c|=1),c<<=1,this.readModule(1,l-1,i,l)&&(c|=1),c}readCorner4(i,l){let c=0;return this.readModule(i-3,0,i,l)&&(c|=1),c<<=1,this.readModule(i-2,0,i,l)&&(c|=1),c<<=1,this.readModule(i-1,0,i,l)&&(c|=1),c<<=1,this.readModule(0,l-2,i,l)&&(c|=1),c<<=1,this.readModule(0,l-1,i,l)&&(c|=1),c<<=1,this.readModule(1,l-1,i,l)&&(c|=1),c<<=1,this.readModule(2,l-1,i,l)&&(c|=1),c<<=1,this.readModule(3,l-1,i,l)&&(c|=1),c}extractDataRegion(i){const l=this.version.getSymbolSizeRows(),c=this.version.getSymbolSizeColumns();if(i.getHeight()!==l)throw new w("Dimension of bitMatrix must match the version size");const h=this.version.getDataRegionSizeRows(),m=this.version.getDataRegionSizeColumns(),g=l/h|0,y=c/m|0,E=g*h,I=y*m,D=new ee(I,E);for(let z=0;z<g;++z){const $=z*h;for(let Z=0;Z<y;++Z){const re=Z*m;for(let ne=0;ne<h;++ne){const he=z*(h+2)+1+ne,ge=$+ne;for(let Le=0;Le<m;++Le){const Fe=Z*(m+2)+1+Le;if(i.get(Fe,he)){const Oe=re+Le;D.set(Oe,ge)}}}}}return D}}class gp{constructor(i,l){this.numDataCodewords=i,this.codewords=l}static getDataBlocks(i,l){const c=l.getECBlocks();let h=0;const m=c.getECBlocks();for(let ne of m)h+=ne.getCount();const g=new Array(h);let y=0;for(let ne of m)for(let he=0;he<ne.getCount();he++){const ge=ne.getDataCodewords(),Le=c.getECCodewords()+ge;g[y++]=new gp(ge,new Uint8Array(Le))}const I=g[0].codewords.length-c.getECCodewords(),D=I-1;let z=0;for(let ne=0;ne<D;ne++)for(let he=0;he<y;he++)g[he].codewords[ne]=i[z++];const $=l.getVersionNumber()===24,Z=$?8:y;for(let ne=0;ne<Z;ne++)g[ne].codewords[I-1]=i[z++];const re=g[0].codewords.length;for(let ne=I;ne<re;ne++)for(let he=0;he<y;he++){const ge=$?(he+8)%y:he,Le=$&&ge>7?ne-1:ne;g[ge].codewords[Le]=i[z++]}if(z!==i.length)throw new w;return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class xp{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new w(""+i);let l=0,c=this.bitOffset,h=this.byteOffset;const m=this.bytes;if(c>0){const g=8-c,y=i<g?i:g,E=g-y,I=255>>8-y<<E;l=(m[h]&I)>>E,i-=y,c+=y,c===8&&(c=0,h++)}if(i>0){for(;i>=8;)l=l<<8|m[h]&255,h++,i-=8;if(i>0){const g=8-i,y=255>>g<<g;l=l<<i|(m[h]&y)>>g,c+=i}}return this.bitOffset=c,this.byteOffset=h,l}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Mr;(function(F){F[F.PAD_ENCODE=0]="PAD_ENCODE",F[F.ASCII_ENCODE=1]="ASCII_ENCODE",F[F.C40_ENCODE=2]="C40_ENCODE",F[F.TEXT_ENCODE=3]="TEXT_ENCODE",F[F.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",F[F.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",F[F.BASE256_ENCODE=6]="BASE256_ENCODE"})(Mr||(Mr={}));class ai{static decode(i){const l=new xp(i),c=new V,h=new V,m=new Array;let g=Mr.ASCII_ENCODE;do if(g===Mr.ASCII_ENCODE)g=this.decodeAsciiSegment(l,c,h);else{switch(g){case Mr.C40_ENCODE:this.decodeC40Segment(l,c);break;case Mr.TEXT_ENCODE:this.decodeTextSegment(l,c);break;case Mr.ANSIX12_ENCODE:this.decodeAnsiX12Segment(l,c);break;case Mr.EDIFACT_ENCODE:this.decodeEdifactSegment(l,c);break;case Mr.BASE256_ENCODE:this.decodeBase256Segment(l,c,m);break;default:throw new R}g=Mr.ASCII_ENCODE}while(g!==Mr.PAD_ENCODE&&l.available()>0);return h.length()>0&&c.append(h.toString()),new Re(i,c.toString(),m.length===0?null:m,null)}static decodeAsciiSegment(i,l,c){let h=!1;do{let m=i.readBits(8);if(m===0)throw new R;if(m<=128)return h&&(m+=128),l.append(String.fromCharCode(m-1)),Mr.ASCII_ENCODE;if(m===129)return Mr.PAD_ENCODE;if(m<=229){const g=m-130;g<10&&l.append("0"),l.append(""+g)}else switch(m){case 230:return Mr.C40_ENCODE;case 231:return Mr.BASE256_ENCODE;case 232:l.append("");break;case 233:case 234:break;case 235:h=!0;break;case 236:l.append("[)>05"),c.insert(0,"");break;case 237:l.append("[)>06"),c.insert(0,"");break;case 238:return Mr.ANSIX12_ENCODE;case 239:return Mr.TEXT_ENCODE;case 240:return Mr.EDIFACT_ENCODE;case 241:break;default:if(m!==254||i.available()!==0)throw new R;break}}while(i.available()>0);return Mr.ASCII_ENCODE}static decodeC40Segment(i,l){let c=!1;const h=[];let m=0;do{if(i.available()===8)return;const g=i.readBits(8);if(g===254)return;this.parseTwoBytes(g,i.readBits(8),h);for(let y=0;y<3;y++){const E=h[y];switch(m){case 0:if(E<3)m=E+1;else if(E<this.C40_BASIC_SET_CHARS.length){const I=this.C40_BASIC_SET_CHARS[E];c?(l.append(String.fromCharCode(I.charCodeAt(0)+128)),c=!1):l.append(I)}else throw new R;break;case 1:c?(l.append(String.fromCharCode(E+128)),c=!1):l.append(String.fromCharCode(E)),m=0;break;case 2:if(E<this.C40_SHIFT2_SET_CHARS.length){const I=this.C40_SHIFT2_SET_CHARS[E];c?(l.append(String.fromCharCode(I.charCodeAt(0)+128)),c=!1):l.append(I)}else switch(E){case 27:l.append("");break;case 30:c=!0;break;default:throw new R}m=0;break;case 3:c?(l.append(String.fromCharCode(E+224)),c=!1):l.append(String.fromCharCode(E+96)),m=0;break;default:throw new R}}}while(i.available()>0)}static decodeTextSegment(i,l){let c=!1,h=[],m=0;do{if(i.available()===8)return;const g=i.readBits(8);if(g===254)return;this.parseTwoBytes(g,i.readBits(8),h);for(let y=0;y<3;y++){const E=h[y];switch(m){case 0:if(E<3)m=E+1;else if(E<this.TEXT_BASIC_SET_CHARS.length){const I=this.TEXT_BASIC_SET_CHARS[E];c?(l.append(String.fromCharCode(I.charCodeAt(0)+128)),c=!1):l.append(I)}else throw new R;break;case 1:c?(l.append(String.fromCharCode(E+128)),c=!1):l.append(String.fromCharCode(E)),m=0;break;case 2:if(E<this.TEXT_SHIFT2_SET_CHARS.length){const I=this.TEXT_SHIFT2_SET_CHARS[E];c?(l.append(String.fromCharCode(I.charCodeAt(0)+128)),c=!1):l.append(I)}else switch(E){case 27:l.append("");break;case 30:c=!0;break;default:throw new R}m=0;break;case 3:if(E<this.TEXT_SHIFT3_SET_CHARS.length){const I=this.TEXT_SHIFT3_SET_CHARS[E];c?(l.append(String.fromCharCode(I.charCodeAt(0)+128)),c=!1):l.append(I),m=0}else throw new R;break;default:throw new R}}}while(i.available()>0)}static decodeAnsiX12Segment(i,l){const c=[];do{if(i.available()===8)return;const h=i.readBits(8);if(h===254)return;this.parseTwoBytes(h,i.readBits(8),c);for(let m=0;m<3;m++){const g=c[m];switch(g){case 0:l.append("\r");break;case 1:l.append("*");break;case 2:l.append(">");break;case 3:l.append(" ");break;default:if(g<14)l.append(String.fromCharCode(g+44));else if(g<40)l.append(String.fromCharCode(g+51));else throw new R;break}}}while(i.available()>0)}static parseTwoBytes(i,l,c){let h=(i<<8)+l-1,m=Math.floor(h/1600);c[0]=m,h-=m*1600,m=Math.floor(h/40),c[1]=m,c[2]=h-m*40}static decodeEdifactSegment(i,l){do{if(i.available()<=16)return;for(let c=0;c<4;c++){let h=i.readBits(6);if(h===31){const m=8-i.getBitOffset();m!==8&&i.readBits(m);return}h&32||(h|=64),l.append(String.fromCharCode(h))}}while(i.available()>0)}static decodeBase256Segment(i,l,c){let h=1+i.getByteOffset();const m=this.unrandomize255State(i.readBits(8),h++);let g;if(m===0?g=i.available()/8|0:m<250?g=m:g=250*(m-249)+this.unrandomize255State(i.readBits(8),h++),g<0)throw new R;const y=new Uint8Array(g);for(let E=0;E<g;E++){if(i.available()<8)throw new R;y[E]=this.unrandomize255State(i.readBits(8),h++)}c.push(y);try{l.append(G.decode(y,B.ISO88591))}catch(E){throw new _e("Platform does not support required encoding: "+E.message)}}static unrandomize255State(i,l){const c=149*l%255+1,h=i-c;return h>=0?h:h+256}}ai.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ai.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ai.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ai.TEXT_SHIFT2_SET_CHARS=ai.C40_SHIFT2_SET_CHARS,ai.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class mk{constructor(){this.rsDecoder=new Qe(we.DATA_MATRIX_FIELD_256)}decode(i){const l=new pp(i),c=l.getVersion(),h=l.readCodewords(),m=gp.getDataBlocks(h,c);let g=0;for(let I of m)g+=I.getNumDataCodewords();const y=new Uint8Array(g),E=m.length;for(let I=0;I<E;I++){const D=m[I],z=D.getCodewords(),$=D.getNumDataCodewords();this.correctErrors(z,$);for(let Z=0;Z<$;Z++)y[Z*E+I]=z[Z]}return ai.decode(y)}correctErrors(i,l){const c=new Int32Array(i);try{this.rsDecoder.decode(c,i.length-l)}catch{throw new j}for(let h=0;h<l;h++)i[h]=c[h]}}class Er{constructor(i){this.image=i,this.rectangleDetector=new It(this.image)}detect(){const i=this.rectangleDetector.detect();let l=this.detectSolid1(i);if(l=this.detectSolid2(l),l[3]=this.correctTopRight(l),!l[3])throw new X;l=this.shiftToModuleCenter(l);const c=l[0],h=l[1],m=l[2],g=l[3];let y=this.transitionsBetween(c,g)+1,E=this.transitionsBetween(m,g)+1;(y&1)===1&&(y+=1),(E&1)===1&&(E+=1),4*y<7*E&&4*E<7*y&&(y=E=Math.max(y,E));let I=Er.sampleGrid(this.image,c,h,m,g,y,E);return new Lt(I,[c,h,m,g])}static shiftPoint(i,l,c){let h=(l.getX()-i.getX())/(c+1),m=(l.getY()-i.getY())/(c+1);return new Ae(i.getX()+h,i.getY()+m)}static moveAway(i,l,c){let h=i.getX(),m=i.getY();return h<l?h-=1:h+=1,m<c?m-=1:m+=1,new Ae(h,m)}detectSolid1(i){let l=i[0],c=i[1],h=i[3],m=i[2],g=this.transitionsBetween(l,c),y=this.transitionsBetween(c,h),E=this.transitionsBetween(h,m),I=this.transitionsBetween(m,l),D=g,z=[m,l,c,h];return D>y&&(D=y,z[0]=l,z[1]=c,z[2]=h,z[3]=m),D>E&&(D=E,z[0]=c,z[1]=h,z[2]=m,z[3]=l),D>I&&(z[0]=h,z[1]=m,z[2]=l,z[3]=c),z}detectSolid2(i){let l=i[0],c=i[1],h=i[2],m=i[3],g=this.transitionsBetween(l,m),y=Er.shiftPoint(c,h,(g+1)*4),E=Er.shiftPoint(h,c,(g+1)*4),I=this.transitionsBetween(y,l),D=this.transitionsBetween(E,m);return I<D?(i[0]=l,i[1]=c,i[2]=h,i[3]=m):(i[0]=c,i[1]=h,i[2]=m,i[3]=l),i}correctTopRight(i){let l=i[0],c=i[1],h=i[2],m=i[3],g=this.transitionsBetween(l,m),y=this.transitionsBetween(c,m),E=Er.shiftPoint(l,c,(y+1)*4),I=Er.shiftPoint(h,c,(g+1)*4);g=this.transitionsBetween(E,m),y=this.transitionsBetween(I,m);let D=new Ae(m.getX()+(h.getX()-c.getX())/(g+1),m.getY()+(h.getY()-c.getY())/(g+1)),z=new Ae(m.getX()+(l.getX()-c.getX())/(y+1),m.getY()+(l.getY()-c.getY())/(y+1));if(!this.isValid(D))return this.isValid(z)?z:null;if(!this.isValid(z))return D;let $=this.transitionsBetween(E,D)+this.transitionsBetween(I,D),Z=this.transitionsBetween(E,z)+this.transitionsBetween(I,z);return $>Z?D:z}shiftToModuleCenter(i){let l=i[0],c=i[1],h=i[2],m=i[3],g=this.transitionsBetween(l,m)+1,y=this.transitionsBetween(h,m)+1,E=Er.shiftPoint(l,c,y*4),I=Er.shiftPoint(h,c,g*4);g=this.transitionsBetween(E,m)+1,y=this.transitionsBetween(I,m)+1,(g&1)===1&&(g+=1),(y&1)===1&&(y+=1);let D=(l.getX()+c.getX()+h.getX()+m.getX())/4,z=(l.getY()+c.getY()+h.getY()+m.getY())/4;l=Er.moveAway(l,D,z),c=Er.moveAway(c,D,z),h=Er.moveAway(h,D,z),m=Er.moveAway(m,D,z);let $,Z;return E=Er.shiftPoint(l,c,y*4),E=Er.shiftPoint(E,m,g*4),$=Er.shiftPoint(c,l,y*4),$=Er.shiftPoint($,h,g*4),I=Er.shiftPoint(h,m,y*4),I=Er.shiftPoint(I,c,g*4),Z=Er.shiftPoint(m,h,y*4),Z=Er.shiftPoint(Z,l,g*4),[E,$,I,Z]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,l,c,h,m,g,y){return Qt.getInstance().sampleGrid(i,g,y,.5,.5,g-.5,.5,g-.5,y-.5,.5,y-.5,l.getX(),l.getY(),m.getX(),m.getY(),h.getX(),h.getY(),c.getX(),c.getY())}transitionsBetween(i,l){let c=Math.trunc(i.getX()),h=Math.trunc(i.getY()),m=Math.trunc(l.getX()),g=Math.trunc(l.getY()),y=Math.abs(g-h)>Math.abs(m-c);if(y){let ne=c;c=h,h=ne,ne=m,m=g,g=ne}let E=Math.abs(m-c),I=Math.abs(g-h),D=-E/2,z=h<g?1:-1,$=c<m?1:-1,Z=0,re=this.image.get(y?h:c,y?c:h);for(let ne=c,he=h;ne!==m;ne+=$){let ge=this.image.get(y?he:ne,y?ne:he);if(ge!==re&&(Z++,re=ge),D+=I,D>0){if(he===g)break;he+=z,D-=E}}return Z}}class ii{constructor(){this.decoder=new mk}decode(i,l=null){let c,h;if(l!=null&&l.has(L.PURE_BARCODE)){const I=ii.extractPureBits(i.getBlackMatrix());c=this.decoder.decode(I),h=ii.NO_POINTS}else{const I=new Er(i.getBlackMatrix()).detect();c=this.decoder.decode(I.getBits()),h=I.getPoints()}const m=c.getRawBytes(),g=new K(c.getText(),m,8*m.length,h,de.DATA_MATRIX,C.currentTimeMillis()),y=c.getByteSegments();y!=null&&g.putMetadata(me.BYTE_SEGMENTS,y);const E=c.getECLevel();return E!=null&&g.putMetadata(me.ERROR_CORRECTION_LEVEL,E),g}reset(){}static extractPureBits(i){const l=i.getTopLeftOnBit(),c=i.getBottomRightOnBit();if(l==null||c==null)throw new X;const h=this.moduleSize(l,i);let m=l[1];const g=c[1];let y=l[0];const I=(c[0]-y+1)/h,D=(g-m+1)/h;if(I<=0||D<=0)throw new X;const z=h/2;m+=z,y+=z;const $=new ee(I,D);for(let Z=0;Z<D;Z++){const re=m+Z*h;for(let ne=0;ne<I;ne++)i.get(y+ne*h,re)&&$.set(ne,Z)}return $}static moduleSize(i,l){const c=l.getWidth();let h=i[0];const m=i[1];for(;h<c&&l.get(h,m);)h++;if(h===c)throw new X;const g=h-i[0];if(g===0)throw new X;return g}}ii.NO_POINTS=[];class pk extends J{constructor(i=500){super(new ii,i)}}var yl;(function(F){F[F.L=0]="L",F[F.M=1]="M",F[F.Q=2]="Q",F[F.H=3]="H"})(yl||(yl={}));class rr{constructor(i,l,c){this.value=i,this.stringValue=l,this.bits=c,rr.FOR_BITS.set(c,this),rr.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return rr.L;case"M":return rr.M;case"Q":return rr.Q;case"H":return rr.H;default:throw new x(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof rr))return!1;const l=i;return this.value===l.value}static forBits(i){if(i<0||i>=rr.FOR_BITS.size)throw new w;return rr.FOR_BITS.get(i)}}rr.FOR_BITS=new Map,rr.FOR_VALUE=new Map,rr.L=new rr(yl.L,"L",1),rr.M=new rr(yl.M,"M",0),rr.Q=new rr(yl.Q,"Q",3),rr.H=new rr(yl.H,"H",2);class pn{constructor(i){this.errorCorrectionLevel=rr.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,l){return b.bitCount(i^l)}static decodeFormatInformation(i,l){const c=pn.doDecodeFormatInformation(i,l);return c!==null?c:pn.doDecodeFormatInformation(i^pn.FORMAT_INFO_MASK_QR,l^pn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,l){let c=Number.MAX_SAFE_INTEGER,h=0;for(const m of pn.FORMAT_INFO_DECODE_LOOKUP){const g=m[0];if(g===i||g===l)return new pn(m[1]);let y=pn.numBitsDiffering(i,g);y<c&&(h=m[1],c=y),i!==l&&(y=pn.numBitsDiffering(l,g),y<c&&(h=m[1],c=y))}return c<=3?new pn(h):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof pn))return!1;const l=i;return this.errorCorrectionLevel===l.errorCorrectionLevel&&this.dataMask===l.dataMask}}pn.FORMAT_INFO_MASK_QR=21522,pn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class fe{constructor(i,...l){this.ecCodewordsPerBlock=i,this.ecBlocks=l}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const l=this.ecBlocks;for(const c of l)i+=c.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Q{constructor(i,l){this.count=i,this.dataCodewords=l}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class et{constructor(i,l,...c){this.versionNumber=i,this.alignmentPatternCenters=l,this.ecBlocks=c;let h=0;const m=c[0].getECCodewordsPerBlock(),g=c[0].getECBlocks();for(const y of g)h+=y.getCount()*(y.getDataCodewords()+m);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new R;try{return this.getVersionForNumber((i-17)/4)}catch{throw new R}}static getVersionForNumber(i){if(i<1||i>40)throw new w;return et.VERSIONS[i-1]}static decodeVersionInformation(i){let l=Number.MAX_SAFE_INTEGER,c=0;for(let h=0;h<et.VERSION_DECODE_INFO.length;h++){const m=et.VERSION_DECODE_INFO[h];if(m===i)return et.getVersionForNumber(h+7);const g=pn.numBitsDiffering(i,m);g<l&&(c=h+7,l=g)}return l<=3?et.getVersionForNumber(c):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),l=new ee(i);l.setRegion(0,0,9,9),l.setRegion(i-8,0,8,9),l.setRegion(0,i-8,9,8);const c=this.alignmentPatternCenters.length;for(let h=0;h<c;h++){const m=this.alignmentPatternCenters[h]-2;for(let g=0;g<c;g++)h===0&&(g===0||g===c-1)||h===c-1&&g===0||l.setRegion(this.alignmentPatternCenters[g]-2,m,5,5)}return l.setRegion(6,9,1,i-17),l.setRegion(9,6,i-17,1),this.versionNumber>6&&(l.setRegion(i-11,0,3,6),l.setRegion(0,i-11,6,3)),l}toString(){return""+this.versionNumber}}et.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),et.VERSIONS=[new et(1,new Int32Array(0),new fe(7,new Q(1,19)),new fe(10,new Q(1,16)),new fe(13,new Q(1,13)),new fe(17,new Q(1,9))),new et(2,Int32Array.from([6,18]),new fe(10,new Q(1,34)),new fe(16,new Q(1,28)),new fe(22,new Q(1,22)),new fe(28,new Q(1,16))),new et(3,Int32Array.from([6,22]),new fe(15,new Q(1,55)),new fe(26,new Q(1,44)),new fe(18,new Q(2,17)),new fe(22,new Q(2,13))),new et(4,Int32Array.from([6,26]),new fe(20,new Q(1,80)),new fe(18,new Q(2,32)),new fe(26,new Q(2,24)),new fe(16,new Q(4,9))),new et(5,Int32Array.from([6,30]),new fe(26,new Q(1,108)),new fe(24,new Q(2,43)),new fe(18,new Q(2,15),new Q(2,16)),new fe(22,new Q(2,11),new Q(2,12))),new et(6,Int32Array.from([6,34]),new fe(18,new Q(2,68)),new fe(16,new Q(4,27)),new fe(24,new Q(4,19)),new fe(28,new Q(4,15))),new et(7,Int32Array.from([6,22,38]),new fe(20,new Q(2,78)),new fe(18,new Q(4,31)),new fe(18,new Q(2,14),new Q(4,15)),new fe(26,new Q(4,13),new Q(1,14))),new et(8,Int32Array.from([6,24,42]),new fe(24,new Q(2,97)),new fe(22,new Q(2,38),new Q(2,39)),new fe(22,new Q(4,18),new Q(2,19)),new fe(26,new Q(4,14),new Q(2,15))),new et(9,Int32Array.from([6,26,46]),new fe(30,new Q(2,116)),new fe(22,new Q(3,36),new Q(2,37)),new fe(20,new Q(4,16),new Q(4,17)),new fe(24,new Q(4,12),new Q(4,13))),new et(10,Int32Array.from([6,28,50]),new fe(18,new Q(2,68),new Q(2,69)),new fe(26,new Q(4,43),new Q(1,44)),new fe(24,new Q(6,19),new Q(2,20)),new fe(28,new Q(6,15),new Q(2,16))),new et(11,Int32Array.from([6,30,54]),new fe(20,new Q(4,81)),new fe(30,new Q(1,50),new Q(4,51)),new fe(28,new Q(4,22),new Q(4,23)),new fe(24,new Q(3,12),new Q(8,13))),new et(12,Int32Array.from([6,32,58]),new fe(24,new Q(2,92),new Q(2,93)),new fe(22,new Q(6,36),new Q(2,37)),new fe(26,new Q(4,20),new Q(6,21)),new fe(28,new Q(7,14),new Q(4,15))),new et(13,Int32Array.from([6,34,62]),new fe(26,new Q(4,107)),new fe(22,new Q(8,37),new Q(1,38)),new fe(24,new Q(8,20),new Q(4,21)),new fe(22,new Q(12,11),new Q(4,12))),new et(14,Int32Array.from([6,26,46,66]),new fe(30,new Q(3,115),new Q(1,116)),new fe(24,new Q(4,40),new Q(5,41)),new fe(20,new Q(11,16),new Q(5,17)),new fe(24,new Q(11,12),new Q(5,13))),new et(15,Int32Array.from([6,26,48,70]),new fe(22,new Q(5,87),new Q(1,88)),new fe(24,new Q(5,41),new Q(5,42)),new fe(30,new Q(5,24),new Q(7,25)),new fe(24,new Q(11,12),new Q(7,13))),new et(16,Int32Array.from([6,26,50,74]),new fe(24,new Q(5,98),new Q(1,99)),new fe(28,new Q(7,45),new Q(3,46)),new fe(24,new Q(15,19),new Q(2,20)),new fe(30,new Q(3,15),new Q(13,16))),new et(17,Int32Array.from([6,30,54,78]),new fe(28,new Q(1,107),new Q(5,108)),new fe(28,new Q(10,46),new Q(1,47)),new fe(28,new Q(1,22),new Q(15,23)),new fe(28,new Q(2,14),new Q(17,15))),new et(18,Int32Array.from([6,30,56,82]),new fe(30,new Q(5,120),new Q(1,121)),new fe(26,new Q(9,43),new Q(4,44)),new fe(28,new Q(17,22),new Q(1,23)),new fe(28,new Q(2,14),new Q(19,15))),new et(19,Int32Array.from([6,30,58,86]),new fe(28,new Q(3,113),new Q(4,114)),new fe(26,new Q(3,44),new Q(11,45)),new fe(26,new Q(17,21),new Q(4,22)),new fe(26,new Q(9,13),new Q(16,14))),new et(20,Int32Array.from([6,34,62,90]),new fe(28,new Q(3,107),new Q(5,108)),new fe(26,new Q(3,41),new Q(13,42)),new fe(30,new Q(15,24),new Q(5,25)),new fe(28,new Q(15,15),new Q(10,16))),new et(21,Int32Array.from([6,28,50,72,94]),new fe(28,new Q(4,116),new Q(4,117)),new fe(26,new Q(17,42)),new fe(28,new Q(17,22),new Q(6,23)),new fe(30,new Q(19,16),new Q(6,17))),new et(22,Int32Array.from([6,26,50,74,98]),new fe(28,new Q(2,111),new Q(7,112)),new fe(28,new Q(17,46)),new fe(30,new Q(7,24),new Q(16,25)),new fe(24,new Q(34,13))),new et(23,Int32Array.from([6,30,54,78,102]),new fe(30,new Q(4,121),new Q(5,122)),new fe(28,new Q(4,47),new Q(14,48)),new fe(30,new Q(11,24),new Q(14,25)),new fe(30,new Q(16,15),new Q(14,16))),new et(24,Int32Array.from([6,28,54,80,106]),new fe(30,new Q(6,117),new Q(4,118)),new fe(28,new Q(6,45),new Q(14,46)),new fe(30,new Q(11,24),new Q(16,25)),new fe(30,new Q(30,16),new Q(2,17))),new et(25,Int32Array.from([6,32,58,84,110]),new fe(26,new Q(8,106),new Q(4,107)),new fe(28,new Q(8,47),new Q(13,48)),new fe(30,new Q(7,24),new Q(22,25)),new fe(30,new Q(22,15),new Q(13,16))),new et(26,Int32Array.from([6,30,58,86,114]),new fe(28,new Q(10,114),new Q(2,115)),new fe(28,new Q(19,46),new Q(4,47)),new fe(28,new Q(28,22),new Q(6,23)),new fe(30,new Q(33,16),new Q(4,17))),new et(27,Int32Array.from([6,34,62,90,118]),new fe(30,new Q(8,122),new Q(4,123)),new fe(28,new Q(22,45),new Q(3,46)),new fe(30,new Q(8,23),new Q(26,24)),new fe(30,new Q(12,15),new Q(28,16))),new et(28,Int32Array.from([6,26,50,74,98,122]),new fe(30,new Q(3,117),new Q(10,118)),new fe(28,new Q(3,45),new Q(23,46)),new fe(30,new Q(4,24),new Q(31,25)),new fe(30,new Q(11,15),new Q(31,16))),new et(29,Int32Array.from([6,30,54,78,102,126]),new fe(30,new Q(7,116),new Q(7,117)),new fe(28,new Q(21,45),new Q(7,46)),new fe(30,new Q(1,23),new Q(37,24)),new fe(30,new Q(19,15),new Q(26,16))),new et(30,Int32Array.from([6,26,52,78,104,130]),new fe(30,new Q(5,115),new Q(10,116)),new fe(28,new Q(19,47),new Q(10,48)),new fe(30,new Q(15,24),new Q(25,25)),new fe(30,new Q(23,15),new Q(25,16))),new et(31,Int32Array.from([6,30,56,82,108,134]),new fe(30,new Q(13,115),new Q(3,116)),new fe(28,new Q(2,46),new Q(29,47)),new fe(30,new Q(42,24),new Q(1,25)),new fe(30,new Q(23,15),new Q(28,16))),new et(32,Int32Array.from([6,34,60,86,112,138]),new fe(30,new Q(17,115)),new fe(28,new Q(10,46),new Q(23,47)),new fe(30,new Q(10,24),new Q(35,25)),new fe(30,new Q(19,15),new Q(35,16))),new et(33,Int32Array.from([6,30,58,86,114,142]),new fe(30,new Q(17,115),new Q(1,116)),new fe(28,new Q(14,46),new Q(21,47)),new fe(30,new Q(29,24),new Q(19,25)),new fe(30,new Q(11,15),new Q(46,16))),new et(34,Int32Array.from([6,34,62,90,118,146]),new fe(30,new Q(13,115),new Q(6,116)),new fe(28,new Q(14,46),new Q(23,47)),new fe(30,new Q(44,24),new Q(7,25)),new fe(30,new Q(59,16),new Q(1,17))),new et(35,Int32Array.from([6,30,54,78,102,126,150]),new fe(30,new Q(12,121),new Q(7,122)),new fe(28,new Q(12,47),new Q(26,48)),new fe(30,new Q(39,24),new Q(14,25)),new fe(30,new Q(22,15),new Q(41,16))),new et(36,Int32Array.from([6,24,50,76,102,128,154]),new fe(30,new Q(6,121),new Q(14,122)),new fe(28,new Q(6,47),new Q(34,48)),new fe(30,new Q(46,24),new Q(10,25)),new fe(30,new Q(2,15),new Q(64,16))),new et(37,Int32Array.from([6,28,54,80,106,132,158]),new fe(30,new Q(17,122),new Q(4,123)),new fe(28,new Q(29,46),new Q(14,47)),new fe(30,new Q(49,24),new Q(10,25)),new fe(30,new Q(24,15),new Q(46,16))),new et(38,Int32Array.from([6,32,58,84,110,136,162]),new fe(30,new Q(4,122),new Q(18,123)),new fe(28,new Q(13,46),new Q(32,47)),new fe(30,new Q(48,24),new Q(14,25)),new fe(30,new Q(42,15),new Q(32,16))),new et(39,Int32Array.from([6,26,54,82,110,138,166]),new fe(30,new Q(20,117),new Q(4,118)),new fe(28,new Q(40,47),new Q(7,48)),new fe(30,new Q(43,24),new Q(22,25)),new fe(30,new Q(10,15),new Q(67,16))),new et(40,Int32Array.from([6,30,58,86,114,142,170]),new fe(30,new Q(19,118),new Q(6,119)),new fe(28,new Q(18,47),new Q(31,48)),new fe(30,new Q(34,24),new Q(34,25)),new fe(30,new Q(20,15),new Q(61,16)))];var Gr;(function(F){F[F.DATA_MASK_000=0]="DATA_MASK_000",F[F.DATA_MASK_001=1]="DATA_MASK_001",F[F.DATA_MASK_010=2]="DATA_MASK_010",F[F.DATA_MASK_011=3]="DATA_MASK_011",F[F.DATA_MASK_100=4]="DATA_MASK_100",F[F.DATA_MASK_101=5]="DATA_MASK_101",F[F.DATA_MASK_110=6]="DATA_MASK_110",F[F.DATA_MASK_111=7]="DATA_MASK_111"})(Gr||(Gr={}));class vs{constructor(i,l){this.value=i,this.isMasked=l}unmaskBitMatrix(i,l){for(let c=0;c<l;c++)for(let h=0;h<l;h++)this.isMasked(c,h)&&i.flip(h,c)}}vs.values=new Map([[Gr.DATA_MASK_000,new vs(Gr.DATA_MASK_000,(F,i)=>(F+i&1)===0)],[Gr.DATA_MASK_001,new vs(Gr.DATA_MASK_001,(F,i)=>(F&1)===0)],[Gr.DATA_MASK_010,new vs(Gr.DATA_MASK_010,(F,i)=>i%3===0)],[Gr.DATA_MASK_011,new vs(Gr.DATA_MASK_011,(F,i)=>(F+i)%3===0)],[Gr.DATA_MASK_100,new vs(Gr.DATA_MASK_100,(F,i)=>(Math.floor(F/2)+Math.floor(i/3)&1)===0)],[Gr.DATA_MASK_101,new vs(Gr.DATA_MASK_101,(F,i)=>F*i%6===0)],[Gr.DATA_MASK_110,new vs(Gr.DATA_MASK_110,(F,i)=>F*i%6<3)],[Gr.DATA_MASK_111,new vs(Gr.DATA_MASK_111,(F,i)=>(F+i+F*i%3&1)===0)]]);class gk{constructor(i){const l=i.getHeight();if(l<21||(l&3)!==1)throw new R;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let m=0;m<6;m++)i=this.copyBit(m,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let m=5;m>=0;m--)i=this.copyBit(8,m,i);const l=this.bitMatrix.getHeight();let c=0;const h=l-7;for(let m=l-1;m>=h;m--)c=this.copyBit(8,m,c);for(let m=l-8;m<l;m++)c=this.copyBit(m,8,c);if(this.parsedFormatInfo=pn.decodeFormatInformation(i,c),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new R}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const i=this.bitMatrix.getHeight(),l=Math.floor((i-17)/4);if(l<=6)return et.getVersionForNumber(l);let c=0;const h=i-11;for(let g=5;g>=0;g--)for(let y=i-9;y>=h;y--)c=this.copyBit(y,g,c);let m=et.decodeVersionInformation(c);if(m!==null&&m.getDimensionForVersion()===i)return this.parsedVersion=m,m;c=0;for(let g=5;g>=0;g--)for(let y=i-9;y>=h;y--)c=this.copyBit(g,y,c);if(m=et.decodeVersionInformation(c),m!==null&&m.getDimensionForVersion()===i)return this.parsedVersion=m,m;throw new R}copyBit(i,l,c){return(this.isMirror?this.bitMatrix.get(l,i):this.bitMatrix.get(i,l))?c<<1|1:c<<1}readCodewords(){const i=this.readFormatInformation(),l=this.readVersion(),c=vs.values.get(i.getDataMask()),h=this.bitMatrix.getHeight();c.unmaskBitMatrix(this.bitMatrix,h);const m=l.buildFunctionPattern();let g=!0;const y=new Uint8Array(l.getTotalCodewords());let E=0,I=0,D=0;for(let z=h-1;z>0;z-=2){z===6&&z--;for(let $=0;$<h;$++){const Z=g?h-1-$:$;for(let re=0;re<2;re++)m.get(z-re,Z)||(D++,I<<=1,this.bitMatrix.get(z-re,Z)&&(I|=1),D===8&&(y[E++]=I,D=0,I=0))}g=!g}if(E!==l.getTotalCodewords())throw new R;return y}remask(){if(this.parsedFormatInfo===null)return;const i=vs.values[this.parsedFormatInfo.getDataMask()],l=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,l)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let l=0,c=i.getWidth();l<c;l++)for(let h=l+1,m=i.getHeight();h<m;h++)i.get(l,h)!==i.get(h,l)&&(i.flip(h,l),i.flip(l,h))}}class vp{constructor(i,l){this.numDataCodewords=i,this.codewords=l}static getDataBlocks(i,l,c){if(i.length!==l.getTotalCodewords())throw new w;const h=l.getECBlocksForLevel(c);let m=0;const g=h.getECBlocks();for(const re of g)m+=re.getCount();const y=new Array(m);let E=0;for(const re of g)for(let ne=0;ne<re.getCount();ne++){const he=re.getDataCodewords(),ge=h.getECCodewordsPerBlock()+he;y[E++]=new vp(he,new Uint8Array(ge))}const I=y[0].codewords.length;let D=y.length-1;for(;D>=0&&y[D].codewords.length!==I;)D--;D++;const z=I-h.getECCodewordsPerBlock();let $=0;for(let re=0;re<z;re++)for(let ne=0;ne<E;ne++)y[ne].codewords[re]=i[$++];for(let re=D;re<E;re++)y[re].codewords[z]=i[$++];const Z=y[0].codewords.length;for(let re=z;re<Z;re++)for(let ne=0;ne<E;ne++){const he=ne<D?re:re+1;y[ne].codewords[he]=i[$++]}return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var ws;(function(F){F[F.TERMINATOR=0]="TERMINATOR",F[F.NUMERIC=1]="NUMERIC",F[F.ALPHANUMERIC=2]="ALPHANUMERIC",F[F.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",F[F.BYTE=4]="BYTE",F[F.ECI=5]="ECI",F[F.KANJI=6]="KANJI",F[F.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",F[F.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",F[F.HANZI=9]="HANZI"})(ws||(ws={}));class tt{constructor(i,l,c,h){this.value=i,this.stringValue=l,this.characterCountBitsForVersions=c,this.bits=h,tt.FOR_BITS.set(h,this),tt.FOR_VALUE.set(i,this)}static forBits(i){const l=tt.FOR_BITS.get(i);if(l===void 0)throw new w;return l}getCharacterCountBits(i){const l=i.getVersionNumber();let c;return l<=9?c=0:l<=26?c=1:c=2,this.characterCountBitsForVersions[c]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof tt))return!1;const l=i;return this.value===l.value}toString(){return this.stringValue}}tt.FOR_BITS=new Map,tt.FOR_VALUE=new Map,tt.TERMINATOR=new tt(ws.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),tt.NUMERIC=new tt(ws.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),tt.ALPHANUMERIC=new tt(ws.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),tt.STRUCTURED_APPEND=new tt(ws.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),tt.BYTE=new tt(ws.BYTE,"BYTE",Int32Array.from([8,16,16]),4),tt.ECI=new tt(ws.ECI,"ECI",Int32Array.from([0,0,0]),7),tt.KANJI=new tt(ws.KANJI,"KANJI",Int32Array.from([8,10,12]),8),tt.FNC1_FIRST_POSITION=new tt(ws.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),tt.FNC1_SECOND_POSITION=new tt(ws.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),tt.HANZI=new tt(ws.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class mr{static decode(i,l,c,h){const m=new xp(i);let g=new V;const y=new Array;let E=-1,I=-1;try{let D=null,z=!1,$;do{if(m.available()<4)$=tt.TERMINATOR;else{const Z=m.readBits(4);$=tt.forBits(Z)}switch($){case tt.TERMINATOR:break;case tt.FNC1_FIRST_POSITION:case tt.FNC1_SECOND_POSITION:z=!0;break;case tt.STRUCTURED_APPEND:if(m.available()<16)throw new R;E=m.readBits(8),I=m.readBits(8);break;case tt.ECI:const Z=mr.parseECIValue(m);if(D=P.getCharacterSetECIByValue(Z),D===null)throw new R;break;case tt.HANZI:const re=m.readBits(4),ne=m.readBits($.getCharacterCountBits(l));re===mr.GB2312_SUBSET&&mr.decodeHanziSegment(m,g,ne);break;default:const he=m.readBits($.getCharacterCountBits(l));switch($){case tt.NUMERIC:mr.decodeNumericSegment(m,g,he);break;case tt.ALPHANUMERIC:mr.decodeAlphanumericSegment(m,g,he,z);break;case tt.BYTE:mr.decodeByteSegment(m,g,he,D,y,h);break;case tt.KANJI:mr.decodeKanjiSegment(m,g,he);break;default:throw new R}break}}while($!==tt.TERMINATOR)}catch{throw new R}return new Re(i,g.toString(),y.length===0?null:y,c===null?null:c.toString(),E,I)}static decodeHanziSegment(i,l,c){if(c*13>i.available())throw new R;const h=new Uint8Array(2*c);let m=0;for(;c>0;){const g=i.readBits(13);let y=g/96<<8&4294967295|g%96;y<959?y+=41377:y+=42657,h[m]=y>>8&255,h[m+1]=y&255,m+=2,c--}try{l.append(G.decode(h,B.GB2312))}catch(g){throw new R(g)}}static decodeKanjiSegment(i,l,c){if(c*13>i.available())throw new R;const h=new Uint8Array(2*c);let m=0;for(;c>0;){const g=i.readBits(13);let y=g/192<<8&4294967295|g%192;y<7936?y+=33088:y+=49472,h[m]=y>>8,h[m+1]=y,m+=2,c--}try{l.append(G.decode(h,B.SHIFT_JIS))}catch(g){throw new R(g)}}static decodeByteSegment(i,l,c,h,m,g){if(8*c>i.available())throw new R;const y=new Uint8Array(c);for(let I=0;I<c;I++)y[I]=i.readBits(8);let E;h===null?E=B.guessEncoding(y,g):E=h.getName();try{l.append(G.decode(y,E))}catch(I){throw new R(I)}m.push(y)}static toAlphaNumericChar(i){if(i>=mr.ALPHANUMERIC_CHARS.length)throw new R;return mr.ALPHANUMERIC_CHARS[i]}static decodeAlphanumericSegment(i,l,c,h){const m=l.length();for(;c>1;){if(i.available()<11)throw new R;const g=i.readBits(11);l.append(mr.toAlphaNumericChar(Math.floor(g/45))),l.append(mr.toAlphaNumericChar(g%45)),c-=2}if(c===1){if(i.available()<6)throw new R;l.append(mr.toAlphaNumericChar(i.readBits(6)))}if(h)for(let g=m;g<l.length();g++)l.charAt(g)==="%"&&(g<l.length()-1&&l.charAt(g+1)==="%"?l.deleteCharAt(g+1):l.setCharAt(g,""))}static decodeNumericSegment(i,l,c){for(;c>=3;){if(i.available()<10)throw new R;const h=i.readBits(10);if(h>=1e3)throw new R;l.append(mr.toAlphaNumericChar(Math.floor(h/100))),l.append(mr.toAlphaNumericChar(Math.floor(h/10)%10)),l.append(mr.toAlphaNumericChar(h%10)),c-=3}if(c===2){if(i.available()<7)throw new R;const h=i.readBits(7);if(h>=100)throw new R;l.append(mr.toAlphaNumericChar(Math.floor(h/10))),l.append(mr.toAlphaNumericChar(h%10))}else if(c===1){if(i.available()<4)throw new R;const h=i.readBits(4);if(h>=10)throw new R;l.append(mr.toAlphaNumericChar(h))}}static parseECIValue(i){const l=i.readBits(8);if(!(l&128))return l&127;if((l&192)===128){const c=i.readBits(8);return(l&63)<<8&4294967295|c}if((l&224)===192){const c=i.readBits(16);return(l&31)<<16&4294967295|c}throw new R}}mr.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",mr.GB2312_SUBSET=1;class Mv{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;const l=i[0];i[0]=i[2],i[2]=l}}class xk{constructor(){this.rsDecoder=new Qe(we.QR_CODE_FIELD_256)}decodeBooleanArray(i,l){return this.decodeBitMatrix(ee.parseFromBooleanArray(i),l)}decodeBitMatrix(i,l){const c=new gk(i);let h=null;try{return this.decodeBitMatrixParser(c,l)}catch(m){h=m}try{c.remask(),c.setMirror(!0),c.readVersion(),c.readFormatInformation(),c.mirror();const m=this.decodeBitMatrixParser(c,l);return m.setOther(new Mv(!0)),m}catch(m){throw h!==null?h:m}}decodeBitMatrixParser(i,l){const c=i.readVersion(),h=i.readFormatInformation().getErrorCorrectionLevel(),m=i.readCodewords(),g=vp.getDataBlocks(m,c,h);let y=0;for(const D of g)y+=D.getNumDataCodewords();const E=new Uint8Array(y);let I=0;for(const D of g){const z=D.getCodewords(),$=D.getNumDataCodewords();this.correctErrors(z,$);for(let Z=0;Z<$;Z++)E[I++]=z[Z]}return mr.decode(E,c,h,l)}correctErrors(i,l){const c=new Int32Array(i);try{this.rsDecoder.decode(c,i.length-l)}catch{throw new j}for(let h=0;h<l;h++)i[h]=c[h]}}class wp extends Ae{constructor(i,l,c){super(i,l),this.estimatedModuleSize=c}aboutEquals(i,l,c){if(Math.abs(l-this.getY())<=i&&Math.abs(c-this.getX())<=i){const h=Math.abs(i-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(i,l,c){const h=(this.getX()+l)/2,m=(this.getY()+i)/2,g=(this.estimatedModuleSize+c)/2;return new wp(h,m,g)}}class Ku{constructor(i,l,c,h,m,g,y){this.image=i,this.startX=l,this.startY=c,this.width=h,this.height=m,this.moduleSize=g,this.resultPointCallback=y,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,l=this.height,c=this.width,h=i+c,m=this.startY+l/2,g=new Int32Array(3),y=this.image;for(let E=0;E<l;E++){const I=m+(E&1?-Math.floor((E+1)/2):Math.floor((E+1)/2));g[0]=0,g[1]=0,g[2]=0;let D=i;for(;D<h&&!y.get(D,I);)D++;let z=0;for(;D<h;){if(y.get(D,I))if(z===1)g[1]++;else if(z===2){if(this.foundPatternCross(g)){const $=this.handlePossibleCenter(g,I,D);if($!==null)return $}g[0]=g[2],g[1]=1,g[2]=0,z=1}else g[++z]++;else z===1&&z++,g[z]++;D++}if(this.foundPatternCross(g)){const $=this.handlePossibleCenter(g,I,h);if($!==null)return $}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new X}static centerFromEnd(i,l){return l-i[2]-i[1]/2}foundPatternCross(i){const l=this.moduleSize,c=l/2;for(let h=0;h<3;h++)if(Math.abs(l-i[h])>=c)return!1;return!0}crossCheckVertical(i,l,c,h){const m=this.image,g=m.getHeight(),y=this.crossCheckStateCount;y[0]=0,y[1]=0,y[2]=0;let E=i;for(;E>=0&&m.get(l,E)&&y[1]<=c;)y[1]++,E--;if(E<0||y[1]>c)return NaN;for(;E>=0&&!m.get(l,E)&&y[0]<=c;)y[0]++,E--;if(y[0]>c)return NaN;for(E=i+1;E<g&&m.get(l,E)&&y[1]<=c;)y[1]++,E++;if(E===g||y[1]>c)return NaN;for(;E<g&&!m.get(l,E)&&y[2]<=c;)y[2]++,E++;if(y[2]>c)return NaN;const I=y[0]+y[1]+y[2];return 5*Math.abs(I-h)>=2*h?NaN:this.foundPatternCross(y)?Ku.centerFromEnd(y,E):NaN}handlePossibleCenter(i,l,c){const h=i[0]+i[1]+i[2],m=Ku.centerFromEnd(i,c),g=this.crossCheckVertical(l,m,2*i[1],h);if(!isNaN(g)){const y=(i[0]+i[1]+i[2])/3;for(const I of this.possibleCenters)if(I.aboutEquals(y,g,m))return I.combineEstimate(g,m,y);const E=new wp(m,g,y);this.possibleCenters.push(E),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(E)}return null}}class yp extends Ae{constructor(i,l,c,h){super(i,l),this.estimatedModuleSize=c,this.count=h,h===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,l,c){if(Math.abs(l-this.getY())<=i&&Math.abs(c-this.getX())<=i){const h=Math.abs(i-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(i,l,c){const h=this.count+1,m=(this.count*this.getX()+l)/h,g=(this.count*this.getY()+i)/h,y=(this.count*this.estimatedModuleSize+c)/h;return new yp(m,g,y,h)}}class vk{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Xr{constructor(i,l){this.image=i,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=l}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(i){const l=i!=null&&i.get(L.TRY_HARDER)!==void 0,c=i!=null&&i.get(L.PURE_BARCODE)!==void 0,h=this.image,m=h.getHeight(),g=h.getWidth();let y=Math.floor(3*m/(4*Xr.MAX_MODULES));(y<Xr.MIN_SKIP||l)&&(y=Xr.MIN_SKIP);let E=!1;const I=new Int32Array(5);for(let z=y-1;z<m&&!E;z+=y){I[0]=0,I[1]=0,I[2]=0,I[3]=0,I[4]=0;let $=0;for(let Z=0;Z<g;Z++)if(h.get(Z,z))($&1)===1&&$++,I[$]++;else if($&1)I[$]++;else if($===4)if(Xr.foundPatternCross(I)){if(this.handlePossibleCenter(I,z,Z,c)===!0)if(y=2,this.hasSkipped===!0)E=this.haveMultiplyConfirmedCenters();else{const ne=this.findRowSkip();ne>I[2]&&(z+=ne-I[2]-y,Z=g-1)}else{I[0]=I[2],I[1]=I[3],I[2]=I[4],I[3]=1,I[4]=0,$=3;continue}$=0,I[0]=0,I[1]=0,I[2]=0,I[3]=0,I[4]=0}else I[0]=I[2],I[1]=I[3],I[2]=I[4],I[3]=1,I[4]=0,$=3;else I[++$]++;Xr.foundPatternCross(I)&&this.handlePossibleCenter(I,z,g,c)===!0&&(y=I[0],this.hasSkipped&&(E=this.haveMultiplyConfirmedCenters()))}const D=this.selectBestPatterns();return Ae.orderBestPatterns(D),new vk(D)}static centerFromEnd(i,l){return l-i[4]-i[3]-i[2]/2}static foundPatternCross(i){let l=0;for(let m=0;m<5;m++){const g=i[m];if(g===0)return!1;l+=g}if(l<7)return!1;const c=l/7,h=c/2;return Math.abs(c-i[0])<h&&Math.abs(c-i[1])<h&&Math.abs(3*c-i[2])<3*h&&Math.abs(c-i[3])<h&&Math.abs(c-i[4])<h}getCrossCheckStateCount(){const i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i}crossCheckDiagonal(i,l,c,h){const m=this.getCrossCheckStateCount();let g=0;const y=this.image;for(;i>=g&&l>=g&&y.get(l-g,i-g);)m[2]++,g++;if(i<g||l<g)return!1;for(;i>=g&&l>=g&&!y.get(l-g,i-g)&&m[1]<=c;)m[1]++,g++;if(i<g||l<g||m[1]>c)return!1;for(;i>=g&&l>=g&&y.get(l-g,i-g)&&m[0]<=c;)m[0]++,g++;if(m[0]>c)return!1;const E=y.getHeight(),I=y.getWidth();for(g=1;i+g<E&&l+g<I&&y.get(l+g,i+g);)m[2]++,g++;if(i+g>=E||l+g>=I)return!1;for(;i+g<E&&l+g<I&&!y.get(l+g,i+g)&&m[3]<c;)m[3]++,g++;if(i+g>=E||l+g>=I||m[3]>=c)return!1;for(;i+g<E&&l+g<I&&y.get(l+g,i+g)&&m[4]<c;)m[4]++,g++;if(m[4]>=c)return!1;const D=m[0]+m[1]+m[2]+m[3]+m[4];return Math.abs(D-h)<2*h&&Xr.foundPatternCross(m)}crossCheckVertical(i,l,c,h){const m=this.image,g=m.getHeight(),y=this.getCrossCheckStateCount();let E=i;for(;E>=0&&m.get(l,E);)y[2]++,E--;if(E<0)return NaN;for(;E>=0&&!m.get(l,E)&&y[1]<=c;)y[1]++,E--;if(E<0||y[1]>c)return NaN;for(;E>=0&&m.get(l,E)&&y[0]<=c;)y[0]++,E--;if(y[0]>c)return NaN;for(E=i+1;E<g&&m.get(l,E);)y[2]++,E++;if(E===g)return NaN;for(;E<g&&!m.get(l,E)&&y[3]<c;)y[3]++,E++;if(E===g||y[3]>=c)return NaN;for(;E<g&&m.get(l,E)&&y[4]<c;)y[4]++,E++;if(y[4]>=c)return NaN;const I=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(I-h)>=2*h?NaN:Xr.foundPatternCross(y)?Xr.centerFromEnd(y,E):NaN}crossCheckHorizontal(i,l,c,h){const m=this.image,g=m.getWidth(),y=this.getCrossCheckStateCount();let E=i;for(;E>=0&&m.get(E,l);)y[2]++,E--;if(E<0)return NaN;for(;E>=0&&!m.get(E,l)&&y[1]<=c;)y[1]++,E--;if(E<0||y[1]>c)return NaN;for(;E>=0&&m.get(E,l)&&y[0]<=c;)y[0]++,E--;if(y[0]>c)return NaN;for(E=i+1;E<g&&m.get(E,l);)y[2]++,E++;if(E===g)return NaN;for(;E<g&&!m.get(E,l)&&y[3]<c;)y[3]++,E++;if(E===g||y[3]>=c)return NaN;for(;E<g&&m.get(E,l)&&y[4]<c;)y[4]++,E++;if(y[4]>=c)return NaN;const I=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(I-h)>=h?NaN:Xr.foundPatternCross(y)?Xr.centerFromEnd(y,E):NaN}handlePossibleCenter(i,l,c,h){const m=i[0]+i[1]+i[2]+i[3]+i[4];let g=Xr.centerFromEnd(i,c),y=this.crossCheckVertical(l,Math.floor(g),i[2],m);if(!isNaN(y)&&(g=this.crossCheckHorizontal(Math.floor(g),Math.floor(y),i[2],m),!isNaN(g)&&(!h||this.crossCheckDiagonal(Math.floor(y),Math.floor(g),i[2],m)))){const E=m/7;let I=!1;const D=this.possibleCenters;for(let z=0,$=D.length;z<$;z++){const Z=D[z];if(Z.aboutEquals(E,y,g)){D[z]=Z.combineEstimate(y,g,E),I=!0;break}}if(!I){const z=new yp(g,y,E);D.push(z),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(z)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let l=null;for(const c of this.possibleCenters)if(c.getCount()>=Xr.CENTER_QUORUM)if(l==null)l=c;else return this.hasSkipped=!0,Math.floor((Math.abs(l.getX()-c.getX())-Math.abs(l.getY()-c.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let i=0,l=0;const c=this.possibleCenters.length;for(const g of this.possibleCenters)g.getCount()>=Xr.CENTER_QUORUM&&(i++,l+=g.getEstimatedModuleSize());if(i<3)return!1;const h=l/c;let m=0;for(const g of this.possibleCenters)m+=Math.abs(g.getEstimatedModuleSize()-h);return m<=.05*l}selectBestPatterns(){const i=this.possibleCenters.length;if(i<3)throw new X;const l=this.possibleCenters;let c;if(i>3){let h=0,m=0;for(const E of this.possibleCenters){const I=E.getEstimatedModuleSize();h+=I,m+=I*I}c=h/i;let g=Math.sqrt(m/i-c*c);l.sort((E,I)=>{const D=Math.abs(I.getEstimatedModuleSize()-c),z=Math.abs(E.getEstimatedModuleSize()-c);return D<z?-1:D>z?1:0});const y=Math.max(.2*c,g);for(let E=0;E<l.length&&l.length>3;E++){const I=l[E];Math.abs(I.getEstimatedModuleSize()-c)>y&&(l.splice(E,1),E--)}}if(l.length>3){let h=0;for(const m of l)h+=m.getEstimatedModuleSize();c=h/l.length,l.sort((m,g)=>{if(g.getCount()===m.getCount()){const y=Math.abs(g.getEstimatedModuleSize()-c),E=Math.abs(m.getEstimatedModuleSize()-c);return y<E?1:y>E?-1:0}else return g.getCount()-m.getCount()}),l.splice(3)}return[l[0],l[1],l[2]]}}Xr.CENTER_QUORUM=2,Xr.MIN_SKIP=3,Xr.MAX_MODULES=57;class Yc{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(L.NEED_RESULT_POINT_CALLBACK);const c=new Xr(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(c)}processFinderPatternInfo(i){const l=i.getTopLeft(),c=i.getTopRight(),h=i.getBottomLeft(),m=this.calculateModuleSize(l,c,h);if(m<1)throw new X("No pattern found in proccess finder.");const g=Yc.computeDimension(l,c,h,m),y=et.getProvisionalVersionForDimension(g),E=y.getDimensionForVersion()-7;let I=null;if(y.getAlignmentPatternCenters().length>0){const Z=c.getX()-l.getX()+h.getX(),re=c.getY()-l.getY()+h.getY(),ne=1-3/E,he=Math.floor(l.getX()+ne*(Z-l.getX())),ge=Math.floor(l.getY()+ne*(re-l.getY()));for(let Le=4;Le<=16;Le<<=1)try{I=this.findAlignmentInRegion(m,he,ge,Le);break}catch(Fe){if(!(Fe instanceof X))throw Fe}}const D=Yc.createTransform(l,c,h,I,g),z=Yc.sampleGrid(this.image,D,g);let $;return I===null?$=[h,l,c]:$=[h,l,c,I],new Lt(z,$)}static createTransform(i,l,c,h,m){const g=m-3.5;let y,E,I,D;return h!==null?(y=h.getX(),E=h.getY(),I=g-3,D=I):(y=l.getX()-i.getX()+c.getX(),E=l.getY()-i.getY()+c.getY(),I=g,D=g),xt.quadrilateralToQuadrilateral(3.5,3.5,g,3.5,I,D,3.5,g,i.getX(),i.getY(),l.getX(),l.getY(),y,E,c.getX(),c.getY())}static sampleGrid(i,l,c){return Qt.getInstance().sampleGridWithTransform(i,c,c,l)}static computeDimension(i,l,c,h){const m=ke.round(Ae.distance(i,l)/h),g=ke.round(Ae.distance(i,c)/h);let y=Math.floor((m+g)/2)+7;switch(y&3){case 0:y++;break;case 2:y--;break;case 3:throw new X("Dimensions could be not found.")}return y}calculateModuleSize(i,l,c){return(this.calculateModuleSizeOneWay(i,l)+this.calculateModuleSizeOneWay(i,c))/2}calculateModuleSizeOneWay(i,l){const c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(l.getX()),Math.floor(l.getY())),h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(l.getX()),Math.floor(l.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(c)?h/7:isNaN(h)?c/7:(c+h)/14}sizeOfBlackWhiteBlackRunBothWays(i,l,c,h){let m=this.sizeOfBlackWhiteBlackRun(i,l,c,h),g=1,y=i-(c-i);y<0?(g=i/(i-y),y=0):y>=this.image.getWidth()&&(g=(this.image.getWidth()-1-i)/(y-i),y=this.image.getWidth()-1);let E=Math.floor(l-(h-l)*g);return g=1,E<0?(g=l/(l-E),E=0):E>=this.image.getHeight()&&(g=(this.image.getHeight()-1-l)/(E-l),E=this.image.getHeight()-1),y=Math.floor(i+(y-i)*g),m+=this.sizeOfBlackWhiteBlackRun(i,l,y,E),m-1}sizeOfBlackWhiteBlackRun(i,l,c,h){const m=Math.abs(h-l)>Math.abs(c-i);if(m){let Z=i;i=l,l=Z,Z=c,c=h,h=Z}const g=Math.abs(c-i),y=Math.abs(h-l);let E=-g/2;const I=i<c?1:-1,D=l<h?1:-1;let z=0;const $=c+I;for(let Z=i,re=l;Z!==$;Z+=I){const ne=m?re:Z,he=m?Z:re;if(z===1===this.image.get(ne,he)){if(z===2)return ke.distance(Z,re,i,l);z++}if(E+=y,E>0){if(re===h)break;re+=D,E-=g}}return z===2?ke.distance(c+I,h,i,l):NaN}findAlignmentInRegion(i,l,c,h){const m=Math.floor(h*i),g=Math.max(0,l-m),y=Math.min(this.image.getWidth()-1,l+m);if(y-g<i*3)throw new X("Alignment top exceeds estimated module size.");const E=Math.max(0,c-m),I=Math.min(this.image.getHeight()-1,c+m);if(I-E<i*3)throw new X("Alignment bottom exceeds estimated module size.");return new Ku(this.image,g,E,y-g,I-E,i,this.resultPointCallback).find()}}class oi{constructor(){this.decoder=new xk}getDecoder(){return this.decoder}decode(i,l){let c,h;if(l!=null&&l.get(L.PURE_BARCODE)!==void 0){const E=oi.extractPureBits(i.getBlackMatrix());c=this.decoder.decodeBitMatrix(E,l),h=oi.NO_POINTS}else{const E=new Yc(i.getBlackMatrix()).detect(l);c=this.decoder.decodeBitMatrix(E.getBits(),l),h=E.getPoints()}c.getOther()instanceof Mv&&c.getOther().applyMirroredCorrection(h);const m=new K(c.getText(),c.getRawBytes(),void 0,h,de.QR_CODE,void 0),g=c.getByteSegments();g!==null&&m.putMetadata(me.BYTE_SEGMENTS,g);const y=c.getECLevel();return y!==null&&m.putMetadata(me.ERROR_CORRECTION_LEVEL,y),c.hasStructuredAppend()&&(m.putMetadata(me.STRUCTURED_APPEND_SEQUENCE,c.getStructuredAppendSequenceNumber()),m.putMetadata(me.STRUCTURED_APPEND_PARITY,c.getStructuredAppendParity())),m}reset(){}static extractPureBits(i){const l=i.getTopLeftOnBit(),c=i.getBottomRightOnBit();if(l===null||c===null)throw new X;const h=this.moduleSize(l,i);let m=l[1],g=c[1],y=l[0],E=c[0];if(y>=E||m>=g)throw new X;if(g-m!==E-y&&(E=y+(g-m),E>=i.getWidth()))throw new X;const I=Math.round((E-y+1)/h),D=Math.round((g-m+1)/h);if(I<=0||D<=0)throw new X;if(D!==I)throw new X;const z=Math.floor(h/2);m+=z,y+=z;const $=y+Math.floor((I-1)*h)-E;if($>0){if($>z)throw new X;y-=$}const Z=m+Math.floor((D-1)*h)-g;if(Z>0){if(Z>z)throw new X;m-=Z}const re=new ee(I,D);for(let ne=0;ne<D;ne++){const he=m+Math.floor(ne*h);for(let ge=0;ge<I;ge++)i.get(y+Math.floor(ge*h),he)&&re.set(ge,ne)}return re}static moduleSize(i,l){const c=l.getHeight(),h=l.getWidth();let m=i[0],g=i[1],y=!0,E=0;for(;m<h&&g<c;){if(y!==l.get(m,g)){if(++E===5)break;y=!y}m++,g++}if(m===h||g===c)throw new X;return(m-i[0])/7}}oi.NO_POINTS=new Array;class st{PDF417Common(){}static getBitCountSum(i){return ke.sum(i)}static toIntArray(i){if(i==null||!i.length)return st.EMPTY_INT_ARRAY;const l=new Int32Array(i.length);let c=0;for(const h of i)l[c++]=h;return l}static getCodeword(i){const l=k.binarySearch(st.SYMBOL_TABLE,i&262143);return l<0?-1:(st.CODEWORD_TABLE[l]-1)%st.NUMBER_OF_CODEWORDS}}st.NUMBER_OF_CODEWORDS=929,st.MAX_CODEWORDS_IN_BARCODE=st.NUMBER_OF_CODEWORDS-1,st.MIN_ROWS_IN_BARCODE=3,st.MAX_ROWS_IN_BARCODE=90,st.MODULES_IN_CODEWORD=17,st.MODULES_IN_STOP_PATTERN=18,st.BARS_IN_MODULE=8,st.EMPTY_INT_ARRAY=new Int32Array([]),st.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),st.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class wk{constructor(i,l){this.bits=i,this.points=l}getBits(){return this.bits}getPoints(){return this.points}}class vt{static detectMultiple(i,l,c){let h=i.getBlackMatrix(),m=vt.detect(c,h);return m.length||(h=h.clone(),h.rotate180(),m=vt.detect(c,h)),new wk(h,m)}static detect(i,l){const c=new Array;let h=0,m=0,g=!1;for(;h<l.getHeight();){const y=vt.findVertices(l,h,m);if(y[0]==null&&y[3]==null){if(!g)break;g=!1,m=0;for(const E of c)E[1]!=null&&(h=Math.trunc(Math.max(h,E[1].getY()))),E[3]!=null&&(h=Math.max(h,Math.trunc(E[3].getY())));h+=vt.ROW_STEP;continue}if(g=!0,c.push(y),!i)break;y[2]!=null?(m=Math.trunc(y[2].getX()),h=Math.trunc(y[2].getY())):(m=Math.trunc(y[4].getX()),h=Math.trunc(y[4].getY()))}return c}static findVertices(i,l,c){const h=i.getHeight(),m=i.getWidth(),g=new Array(8);return vt.copyToResult(g,vt.findRowsWithPattern(i,h,m,l,c,vt.START_PATTERN),vt.INDEXES_START_PATTERN),g[4]!=null&&(c=Math.trunc(g[4].getX()),l=Math.trunc(g[4].getY())),vt.copyToResult(g,vt.findRowsWithPattern(i,h,m,l,c,vt.STOP_PATTERN),vt.INDEXES_STOP_PATTERN),g}static copyToResult(i,l,c){for(let h=0;h<c.length;h++)i[c[h]]=l[h]}static findRowsWithPattern(i,l,c,h,m,g){const y=new Array(4);let E=!1;const I=new Int32Array(g.length);for(;h<l;h+=vt.ROW_STEP){let z=vt.findGuardPattern(i,m,h,c,!1,g,I);if(z!=null){for(;h>0;){const $=vt.findGuardPattern(i,m,--h,c,!1,g,I);if($!=null)z=$;else{h++;break}}y[0]=new Ae(z[0],h),y[1]=new Ae(z[1],h),E=!0;break}}let D=h+1;if(E){let z=0,$=Int32Array.from([Math.trunc(y[0].getX()),Math.trunc(y[1].getX())]);for(;D<l;D++){const Z=vt.findGuardPattern(i,$[0],D,c,!1,g,I);if(Z!=null&&Math.abs($[0]-Z[0])<vt.MAX_PATTERN_DRIFT&&Math.abs($[1]-Z[1])<vt.MAX_PATTERN_DRIFT)$=Z,z=0;else{if(z>vt.SKIPPED_ROW_COUNT_MAX)break;z++}}D-=z+1,y[2]=new Ae($[0],D),y[3]=new Ae($[1],D)}return D-h<vt.BARCODE_MIN_HEIGHT&&k.fill(y,null),y}static findGuardPattern(i,l,c,h,m,g,y){k.fillWithin(y,0,y.length,0);let E=l,I=0;for(;i.get(E,c)&&E>0&&I++<vt.MAX_PIXEL_DRIFT;)E--;let D=E,z=0,$=g.length;for(let Z=m;D<h;D++)if(i.get(D,c)!==Z)y[z]++;else{if(z===$-1){if(vt.patternMatchVariance(y,g,vt.MAX_INDIVIDUAL_VARIANCE)<vt.MAX_AVG_VARIANCE)return new Int32Array([E,D]);E+=y[0]+y[1],C.arraycopy(y,2,y,0,z-1),y[z-1]=0,y[z]=0,z--}else z++;y[z]=1,Z=!Z}return z===$-1&&vt.patternMatchVariance(y,g,vt.MAX_INDIVIDUAL_VARIANCE)<vt.MAX_AVG_VARIANCE?new Int32Array([E,D-1]):null}static patternMatchVariance(i,l,c){let h=i.length,m=0,g=0;for(let I=0;I<h;I++)m+=i[I],g+=l[I];if(m<g)return 1/0;let y=m/g;c*=y;let E=0;for(let I=0;I<h;I++){let D=i[I],z=l[I]*y,$=D>z?D-z:z-D;if($>c)return 1/0;E+=$}return E/m}}vt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),vt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),vt.MAX_AVG_VARIANCE=.42,vt.MAX_INDIVIDUAL_VARIANCE=.8,vt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),vt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),vt.MAX_PIXEL_DRIFT=3,vt.MAX_PATTERN_DRIFT=5,vt.SKIPPED_ROW_COUNT_MAX=25,vt.ROW_STEP=5,vt.BARCODE_MIN_HEIGHT=10;class en{constructor(i,l){if(l.length===0)throw new w;this.field=i;let c=l.length;if(c>1&&l[0]===0){let h=1;for(;h<c&&l[h]===0;)h++;h===c?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(c-h),C.arraycopy(l,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=l}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let h=0;for(let m of this.coefficients)h=this.field.add(h,m);return h}let l=this.coefficients[0],c=this.coefficients.length;for(let h=1;h<c;h++)l=this.field.add(this.field.multiply(i,l),this.coefficients[h]);return l}add(i){if(!this.field.equals(i.field))throw new w("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let l=this.coefficients,c=i.coefficients;if(l.length>c.length){let g=l;l=c,c=g}let h=new Int32Array(c.length),m=c.length-l.length;C.arraycopy(c,0,h,0,m);for(let g=m;g<c.length;g++)h[g]=this.field.add(l[g-m],c[g]);return new en(this.field,h)}subtract(i){if(!this.field.equals(i.field))throw new w("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof en?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new w("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new en(this.field,new Int32Array([0]));let l=this.coefficients,c=l.length,h=i.coefficients,m=h.length,g=new Int32Array(c+m-1);for(let y=0;y<c;y++){let E=l[y];for(let I=0;I<m;I++)g[y+I]=this.field.add(g[y+I],this.field.multiply(E,h[I]))}return new en(this.field,g)}negative(){let i=this.coefficients.length,l=new Int32Array(i);for(let c=0;c<i;c++)l[c]=this.field.subtract(0,this.coefficients[c]);return new en(this.field,l)}multiplyScalar(i){if(i===0)return new en(this.field,new Int32Array([0]));if(i===1)return this;let l=this.coefficients.length,c=new Int32Array(l);for(let h=0;h<l;h++)c[h]=this.field.multiply(this.coefficients[h],i);return new en(this.field,c)}multiplyByMonomial(i,l){if(i<0)throw new w;if(l===0)return new en(this.field,new Int32Array([0]));let c=this.coefficients.length,h=new Int32Array(c+i);for(let m=0;m<c;m++)h[m]=this.field.multiply(this.coefficients[m],l);return new en(this.field,h)}toString(){let i=new V;for(let l=this.getDegree();l>=0;l--){let c=this.getCoefficient(l);c!==0&&(c<0?(i.append(" - "),c=-c):i.length()>0&&i.append(" + "),(l===0||c!==1)&&i.append(c),l!==0&&(l===1?i.append("x"):(i.append("x^"),i.append(l))))}return i.toString()}}class yk{add(i,l){return(i+l)%this.modulus}subtract(i,l){return(this.modulus+i-l)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new w;return this.logTable[i]}inverse(i){if(i===0)throw new Ne;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,l){return i===0||l===0?0:this.expTable[(this.logTable[i]+this.logTable[l])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class bp extends yk{constructor(i,l){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let c=1;for(let h=0;h<i;h++)this.expTable[h]=c,c=c*l%i;for(let h=0;h<i-1;h++)this.logTable[this.expTable[h]]=h;this.zero=new en(this,new Int32Array([0])),this.one=new en(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,l){if(i<0)throw new w;if(l===0)return this.zero;let c=new Int32Array(i+1);return c[0]=l,new en(this,c)}}bp.PDF417_GF=new bp(st.NUMBER_OF_CODEWORDS,3);class Lv{constructor(){this.field=bp.PDF417_GF}decode(i,l,c){let h=new en(this.field,i),m=new Int32Array(l),g=!1;for(let re=l;re>0;re--){let ne=h.evaluateAt(this.field.exp(re));m[l-re]=ne,ne!==0&&(g=!0)}if(!g)return 0;let y=this.field.getOne();if(c!=null)for(const re of c){let ne=this.field.exp(i.length-1-re),he=new en(this.field,new Int32Array([this.field.subtract(0,ne),1]));y=y.multiply(he)}let E=new en(this.field,m),I=this.runEuclideanAlgorithm(this.field.buildMonomial(l,1),E,l),D=I[0],z=I[1],$=this.findErrorLocations(D),Z=this.findErrorMagnitudes(z,D,$);for(let re=0;re<$.length;re++){let ne=i.length-1-this.field.log($[re]);if(ne<0)throw j.getChecksumInstance();i[ne]=this.field.subtract(i[ne],Z[re])}return $.length}runEuclideanAlgorithm(i,l,c){if(i.getDegree()<l.getDegree()){let $=i;i=l,l=$}let h=i,m=l,g=this.field.getZero(),y=this.field.getOne();for(;m.getDegree()>=Math.round(c/2);){let $=h,Z=g;if(h=m,g=y,h.isZero())throw j.getChecksumInstance();m=$;let re=this.field.getZero(),ne=h.getCoefficient(h.getDegree()),he=this.field.inverse(ne);for(;m.getDegree()>=h.getDegree()&&!m.isZero();){let ge=m.getDegree()-h.getDegree(),Le=this.field.multiply(m.getCoefficient(m.getDegree()),he);re=re.add(this.field.buildMonomial(ge,Le)),m=m.subtract(h.multiplyByMonomial(ge,Le))}y=re.multiply(g).subtract(Z).negative()}let E=y.getCoefficient(0);if(E===0)throw j.getChecksumInstance();let I=this.field.inverse(E),D=y.multiply(I),z=m.multiply(I);return[D,z]}findErrorLocations(i){let l=i.getDegree(),c=new Int32Array(l),h=0;for(let m=1;m<this.field.getSize()&&h<l;m++)i.evaluateAt(m)===0&&(c[h]=this.field.inverse(m),h++);if(h!==l)throw j.getChecksumInstance();return c}findErrorMagnitudes(i,l,c){let h=l.getDegree(),m=new Int32Array(h);for(let I=1;I<=h;I++)m[h-I]=this.field.multiply(I,l.getCoefficient(I));let g=new en(this.field,m),y=c.length,E=new Int32Array(y);for(let I=0;I<y;I++){let D=this.field.inverse(c[I]),z=this.field.subtract(0,i.evaluateAt(D)),$=this.field.inverse(g.evaluateAt(D));E[I]=this.field.multiply(z,$)}return E}}class po{constructor(i,l,c,h,m){i instanceof po?this.constructor_2(i):this.constructor_1(i,l,c,h,m)}constructor_1(i,l,c,h,m){const g=l==null||c==null,y=h==null||m==null;if(g&&y)throw new X;g?(l=new Ae(0,h.getY()),c=new Ae(0,m.getY())):y&&(h=new Ae(i.getWidth()-1,l.getY()),m=new Ae(i.getWidth()-1,c.getY())),this.image=i,this.topLeft=l,this.bottomLeft=c,this.topRight=h,this.bottomRight=m,this.minX=Math.trunc(Math.min(l.getX(),c.getX())),this.maxX=Math.trunc(Math.max(h.getX(),m.getX())),this.minY=Math.trunc(Math.min(l.getY(),h.getY())),this.maxY=Math.trunc(Math.max(c.getY(),m.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,l){return i==null?l:l==null?i:new po(i.image,i.topLeft,i.bottomLeft,l.topRight,l.bottomRight)}addMissingRows(i,l,c){let h=this.topLeft,m=this.bottomLeft,g=this.topRight,y=this.bottomRight;if(i>0){let E=c?this.topLeft:this.topRight,I=Math.trunc(E.getY()-i);I<0&&(I=0);let D=new Ae(E.getX(),I);c?h=D:g=D}if(l>0){let E=c?this.bottomLeft:this.bottomRight,I=Math.trunc(E.getY()+l);I>=this.image.getHeight()&&(I=this.image.getHeight()-1);let D=new Ae(E.getX(),I);c?m=D:y=D}return new po(this.image,h,m,g,y)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class bk{constructor(i,l,c,h){this.columnCount=i,this.errorCorrectionLevel=h,this.rowCountUpperPart=l,this.rowCountLowerPart=c,this.rowCount=l+c}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Qc{constructor(){this.buffer=""}static form(i,l){let c=-1;function h(g,y,E,I,D,z){if(g==="%%")return"%";if(l[++c]===void 0)return;g=I?parseInt(I.substr(1)):void 0;let $=D?parseInt(D.substr(1)):void 0,Z;switch(z){case"s":Z=l[c];break;case"c":Z=l[c][0];break;case"f":Z=parseFloat(l[c]).toFixed(g);break;case"p":Z=parseFloat(l[c]).toPrecision(g);break;case"e":Z=parseFloat(l[c]).toExponential(g);break;case"x":Z=parseInt(l[c]).toString($||16);break;case"d":Z=parseFloat(parseInt(l[c],$||10).toPrecision(g)).toFixed(0);break}Z=typeof Z=="object"?JSON.stringify(Z):(+Z).toString($);let re=parseInt(E),ne=E&&E[0]+""=="0"?"0":" ";for(;Z.length<re;)Z=y!==void 0?Z+ne:ne+Z;return Z}let m=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(m,h)}format(i,...l){this.buffer+=Qc.form(i,l)}toString(){return this.buffer}}class Zc{constructor(i){this.boundingBox=new po(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}getCodewordNearby(i){let l=this.getCodeword(i);if(l!=null)return l;for(let c=1;c<Zc.MAX_NEARBY_DISTANCE;c++){let h=this.imageRowToCodewordIndex(i)-c;if(h>=0&&(l=this.codewords[h],l!=null)||(h=this.imageRowToCodewordIndex(i)+c,h<this.codewords.length&&(l=this.codewords[h],l!=null)))return l}return null}imageRowToCodewordIndex(i){return i-this.boundingBox.getMinY()}setCodeword(i,l){this.codewords[this.imageRowToCodewordIndex(i)]=l}getCodeword(i){return this.codewords[this.imageRowToCodewordIndex(i)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const i=new Qc;let l=0;for(const c of this.codewords){if(c==null){i.format("%3d:    |   %n",l++);continue}i.format("%3d: %3d|%3d%n",l++,c.getRowNumber(),c.getValue())}return i.toString()}}Zc.MAX_NEARBY_DISTANCE=5;class Jc{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let l=this.values.get(i);l==null&&(l=0),l++,this.values.set(i,l)}getValue(){let i=-1,l=new Array;for(const[c,h]of this.values.entries()){const m={getKey:()=>c,getValue:()=>h};m.getValue()>i?(i=m.getValue(),l=[],l.push(m.getKey())):m.getValue()===i&&l.push(m.getKey())}return st.toIntArray(l)}getConfidence(i){return this.values.get(i)}}class Fv extends Zc{constructor(i,l){super(i),this._isLeft=l}setRowNumbers(){for(let i of this.getCodewords())i!=null&&i.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let l=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(l,i);let c=this.getBoundingBox(),h=this._isLeft?c.getTopLeft():c.getTopRight(),m=this._isLeft?c.getBottomLeft():c.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(h.getY())),y=this.imageRowToCodewordIndex(Math.trunc(m.getY())),E=-1,I=1,D=0;for(let z=g;z<y;z++){if(l[z]==null)continue;let $=l[z],Z=$.getRowNumber()-E;if(Z===0)D++;else if(Z===1)I=Math.max(I,D),D=1,E=$.getRowNumber();else if(Z<0||$.getRowNumber()>=i.getRowCount()||Z>z)l[z]=null;else{let re;I>2?re=(I-2)*Z:re=Z;let ne=re>=z;for(let he=1;he<=re&&!ne;he++)ne=l[z-he]!=null;ne?l[z]=null:(E=$.getRowNumber(),D=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let l=new Int32Array(i.getRowCount());for(let c of this.getCodewords())if(c!=null){let h=c.getRowNumber();if(h>=l.length)continue;l[h]++}return l}adjustIncompleteIndicatorColumnRowNumbers(i){let l=this.getBoundingBox(),c=this._isLeft?l.getTopLeft():l.getTopRight(),h=this._isLeft?l.getBottomLeft():l.getBottomRight(),m=this.imageRowToCodewordIndex(Math.trunc(c.getY())),g=this.imageRowToCodewordIndex(Math.trunc(h.getY())),y=this.getCodewords(),E=-1;for(let I=m;I<g;I++){if(y[I]==null)continue;let D=y[I];D.setRowNumberAsRowIndicatorColumn();let z=D.getRowNumber()-E;z===0||(z===1?E=D.getRowNumber():D.getRowNumber()>=i.getRowCount()?y[I]=null:E=D.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),l=new Jc,c=new Jc,h=new Jc,m=new Jc;for(let y of i){if(y==null)continue;y.setRowNumberAsRowIndicatorColumn();let E=y.getValue()%30,I=y.getRowNumber();switch(this._isLeft||(I+=2),I%3){case 0:c.setValue(E*3+1);break;case 1:m.setValue(E/3),h.setValue(E%3);break;case 2:l.setValue(E+1);break}}if(l.getValue().length===0||c.getValue().length===0||h.getValue().length===0||m.getValue().length===0||l.getValue()[0]<1||c.getValue()[0]+h.getValue()[0]<st.MIN_ROWS_IN_BARCODE||c.getValue()[0]+h.getValue()[0]>st.MAX_ROWS_IN_BARCODE)return null;let g=new bk(l.getValue()[0],c.getValue()[0],h.getValue()[0],m.getValue()[0]);return this.removeIncorrectCodewords(i,g),g}removeIncorrectCodewords(i,l){for(let c=0;c<i.length;c++){let h=i[c];if(i[c]==null)continue;let m=h.getValue()%30,g=h.getRowNumber();if(g>l.getRowCount()){i[c]=null;continue}switch(this._isLeft||(g+=2),g%3){case 0:m*3+1!==l.getRowCountUpperPart()&&(i[c]=null);break;case 1:(Math.trunc(m/3)!==l.getErrorCorrectionLevel()||m%3!==l.getRowCountLowerPart())&&(i[c]=null);break;case 2:m+1!==l.getColumnCount()&&(i[c]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class ed{constructor(i,l){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=l,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=st.MAX_CODEWORDS_IN_BARCODE,l;do l=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<l);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i!=null&&i.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let l=1;l<this.barcodeColumnCount+1;l++){let c=this.detectionResultColumns[l].getCodewords();for(let h=0;h<c.length;h++)c[h]!=null&&(c[h].hasValidRowNumber()||this.adjustRowNumbers(l,h,c))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),l=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<i.length;c++)if(i[c]!=null&&l[c]!=null&&i[c].getRowNumber()===l[c].getRowNumber())for(let h=1;h<=this.barcodeColumnCount;h++){let m=this.detectionResultColumns[h].getCodewords()[c];m!=null&&(m.setRowNumber(i[c].getRowNumber()),m.hasValidRowNumber()||(this.detectionResultColumns[h].getCodewords()[c]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,l=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<l.length;c++){if(l[c]==null)continue;let h=l[c].getRowNumber(),m=0;for(let g=this.barcodeColumnCount+1;g>0&&m<this.ADJUST_ROW_NUMBER_SKIP;g--){let y=this.detectionResultColumns[g].getCodewords()[c];y!=null&&(m=ed.adjustRowNumberIfValid(h,m,y),y.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,l=this.detectionResultColumns[0].getCodewords();for(let c=0;c<l.length;c++){if(l[c]==null)continue;let h=l[c].getRowNumber(),m=0;for(let g=1;g<this.barcodeColumnCount+1&&m<this.ADJUST_ROW_NUMBER_SKIP;g++){let y=this.detectionResultColumns[g].getCodewords()[c];y!=null&&(m=ed.adjustRowNumberIfValid(h,m,y),y.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,l,c){return c==null||c.hasValidRowNumber()||(c.isValidRowNumber(i)?(c.setRowNumber(i),l=0):++l),l}adjustRowNumbers(i,l,c){if(!this.detectionResultColumns[i-1])return;let h=c[l],m=this.detectionResultColumns[i-1].getCodewords(),g=m;this.detectionResultColumns[i+1]!=null&&(g=this.detectionResultColumns[i+1].getCodewords());let y=new Array(14);y[2]=m[l],y[3]=g[l],l>0&&(y[0]=c[l-1],y[4]=m[l-1],y[5]=g[l-1]),l>1&&(y[8]=c[l-2],y[10]=m[l-2],y[11]=g[l-2]),l<c.length-1&&(y[1]=c[l+1],y[6]=m[l+1],y[7]=g[l+1]),l<c.length-2&&(y[9]=c[l+2],y[12]=m[l+2],y[13]=g[l+2]);for(let E of y)if(ed.adjustRowNumber(h,E))return}static adjustRowNumber(i,l){return l==null?!1:l.hasValidRowNumber()&&l.getBucket()===i.getBucket()?(i.setRowNumber(l.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,l){this.detectionResultColumns[i]=l}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let l=new Qc;for(let c=0;c<i.getCodewords().length;c++){l.format("CW %3d:",c);for(let h=0;h<this.barcodeColumnCount+2;h++){if(this.detectionResultColumns[h]==null){l.format("    |   ");continue}let m=this.detectionResultColumns[h].getCodewords()[c];if(m==null){l.format("    |   ");continue}l.format(" %3d|%3d",m.getRowNumber(),m.getValue())}l.format("%n")}return l.toString()}}class td{constructor(i,l,c,h){this.rowNumber=td.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(l),this.bucket=Math.trunc(c),this.value=Math.trunc(h)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(i){return i!==td.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(i){this.rowNumber=i}toString(){return this.rowNumber+"|"+this.value}}td.BARCODE_ROW_UNKNOWN=-1;class Dn{static initialize(){for(let i=0;i<st.SYMBOL_TABLE.length;i++){let l=st.SYMBOL_TABLE[i],c=l&1;for(let h=0;h<st.BARS_IN_MODULE;h++){let m=0;for(;(l&1)===c;)m+=1,l>>=1;c=l&1,Dn.RATIOS_TABLE[i]||(Dn.RATIOS_TABLE[i]=new Array(st.BARS_IN_MODULE)),Dn.RATIOS_TABLE[i][st.BARS_IN_MODULE-h-1]=Math.fround(m/st.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let l=Dn.getDecodedCodewordValue(Dn.sampleBitCounts(i));return l!==-1?l:Dn.getClosestDecodedValue(i)}static sampleBitCounts(i){let l=ke.sum(i),c=new Int32Array(st.BARS_IN_MODULE),h=0,m=0;for(let g=0;g<st.MODULES_IN_CODEWORD;g++){let y=l/(2*st.MODULES_IN_CODEWORD)+g*l/st.MODULES_IN_CODEWORD;m+i[h]<=y&&(m+=i[h],h++),c[h]++}return c}static getDecodedCodewordValue(i){let l=Dn.getBitValue(i);return st.getCodeword(l)===-1?-1:l}static getBitValue(i){let l=0;for(let c=0;c<i.length;c++)for(let h=0;h<i[c];h++)l=l<<1|(c%2===0?1:0);return Math.trunc(l)}static getClosestDecodedValue(i){let l=ke.sum(i),c=new Array(st.BARS_IN_MODULE);if(l>1)for(let g=0;g<c.length;g++)c[g]=Math.fround(i[g]/l);let h=Je.MAX_VALUE,m=-1;this.bSymbolTableReady||Dn.initialize();for(let g=0;g<Dn.RATIOS_TABLE.length;g++){let y=0,E=Dn.RATIOS_TABLE[g];for(let I=0;I<st.BARS_IN_MODULE;I++){let D=Math.fround(E[I]-c[I]);if(y+=Math.fround(D*D),y>=h)break}y<h&&(h=y,m=st.SYMBOL_TABLE[g])}return m}}Dn.bSymbolTableReady=!1,Dn.RATIOS_TABLE=new Array(st.SYMBOL_TABLE.length).map(F=>new Array(st.BARS_IN_MODULE));class Bv{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class zv{static parseLong(i,l=void 0){return parseInt(i,l)}}class Uv extends p{}Uv.kind="NullPointerException";class _k{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,l,c){if(i==null)throw new Uv;if(l<0||l>i.length||c<0||l+c>i.length||l+c<0)throw new A;if(c===0)return;for(let h=0;h<c;h++)this.write(i[l+h])}flush(){}close(){}}class Nk extends p{}class jk extends _k{constructor(i=32){if(super(),this.count=0,i<0)throw new w("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let c=this.buf.length<<1;if(c-i<0&&(c=i),c<0){if(i<0)throw new Nk;c=b.MAX_VALUE}this.buf=k.copyOfUint8Array(this.buf,c)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,l,c){if(l<0||l>i.length||c<0||l+c-i.length>0)throw new A;this.ensureCapacity(this.count+c),C.arraycopy(i,l,this.buf,this.count,c),this.count+=c}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return k.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var Kt;(function(F){F[F.ALPHA=0]="ALPHA",F[F.LOWER=1]="LOWER",F[F.MIXED=2]="MIXED",F[F.PUNCT=3]="PUNCT",F[F.ALPHA_SHIFT=4]="ALPHA_SHIFT",F[F.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Kt||(Kt={}));function $v(){if(typeof window<"u")return window.BigInt||null;if(typeof ln<"u")return ln.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Yu;function li(F){if(typeof Yu>"u"&&(Yu=$v()),Yu===null)throw new Error("BigInt is not supported!");return Yu(F)}function Ck(){let F=[];F[0]=li(1);let i=li(900);F[1]=i;for(let l=2;l<16;l++)F[l]=F[l-1]*i;return F}class pe{static decode(i,l){let c=new V(""),h=P.ISO8859_1;c.enableDecoding(h);let m=1,g=i[m++],y=new Bv;for(;m<i[0];){switch(g){case pe.TEXT_COMPACTION_MODE_LATCH:m=pe.textCompaction(i,m,c);break;case pe.BYTE_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:m=pe.byteCompaction(g,i,h,m,c);break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[m++]);break;case pe.NUMERIC_COMPACTION_MODE_LATCH:m=pe.numericCompaction(i,m,c);break;case pe.ECI_CHARSET:P.getCharacterSetECIByValue(i[m++]);break;case pe.ECI_GENERAL_PURPOSE:m+=2;break;case pe.ECI_USER_DEFINED:m++;break;case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:m=pe.decodeMacroBlock(i,m,y);break;case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:throw new R;default:m--,m=pe.textCompaction(i,m,c);break}if(m<i.length)g=i[m++];else throw R.getFormatInstance()}if(c.length()===0)throw R.getFormatInstance();let E=new Re(null,c.toString(),null,l);return E.setOther(y),E}static decodeMacroBlock(i,l,c){if(l+pe.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw R.getFormatInstance();let h=new Int32Array(pe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let y=0;y<pe.NUMBER_OF_SEQUENCE_CODEWORDS;y++,l++)h[y]=i[l];c.setSegmentIndex(b.parseInt(pe.decodeBase900toBase10(h,pe.NUMBER_OF_SEQUENCE_CODEWORDS)));let m=new V;l=pe.textCompaction(i,l,m),c.setFileId(m.toString());let g=-1;for(i[l]===pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(g=l+1);l<i[0];)switch(i[l]){case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(l++,i[l]){case pe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let y=new V;l=pe.textCompaction(i,l+1,y),c.setFileName(y.toString());break;case pe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let E=new V;l=pe.textCompaction(i,l+1,E),c.setSender(E.toString());break;case pe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let I=new V;l=pe.textCompaction(i,l+1,I),c.setAddressee(I.toString());break;case pe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let D=new V;l=pe.numericCompaction(i,l+1,D),c.setSegmentCount(b.parseInt(D.toString()));break;case pe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let z=new V;l=pe.numericCompaction(i,l+1,z),c.setTimestamp(zv.parseLong(z.toString()));break;case pe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let $=new V;l=pe.numericCompaction(i,l+1,$),c.setChecksum(b.parseInt($.toString()));break;case pe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Z=new V;l=pe.numericCompaction(i,l+1,Z),c.setFileSize(zv.parseLong(Z.toString()));break;default:throw R.getFormatInstance()}break;case pe.MACRO_PDF417_TERMINATOR:l++,c.setLastSegment(!0);break;default:throw R.getFormatInstance()}if(g!==-1){let y=l-g;c.isLastSegment()&&y--,c.setOptionalData(k.copyOfRange(i,g,g+y))}return l}static textCompaction(i,l,c){let h=new Int32Array((i[0]-l)*2),m=new Int32Array((i[0]-l)*2),g=0,y=!1;for(;l<i[0]&&!y;){let E=i[l++];if(E<pe.TEXT_COMPACTION_MODE_LATCH)h[g]=E/30,h[g+1]=E%30,g+=2;else switch(E){case pe.TEXT_COMPACTION_MODE_LATCH:h[g++]=pe.TEXT_COMPACTION_MODE_LATCH;break;case pe.BYTE_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:case pe.NUMERIC_COMPACTION_MODE_LATCH:case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:l--,y=!0;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h[g]=pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,E=i[l++],m[g]=E,g++;break}}return pe.decodeTextCompaction(h,m,g,c),l}static decodeTextCompaction(i,l,c,h){let m=Kt.ALPHA,g=Kt.ALPHA,y=0;for(;y<c;){let E=i[y],I="";switch(m){case Kt.ALPHA:if(E<26)I=String.fromCharCode(65+E);else switch(E){case 26:I=" ";break;case pe.LL:m=Kt.LOWER;break;case pe.ML:m=Kt.MIXED;break;case pe.PS:g=m,m=Kt.PUNCT_SHIFT;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(l[y]);break;case pe.TEXT_COMPACTION_MODE_LATCH:m=Kt.ALPHA;break}break;case Kt.LOWER:if(E<26)I=String.fromCharCode(97+E);else switch(E){case 26:I=" ";break;case pe.AS:g=m,m=Kt.ALPHA_SHIFT;break;case pe.ML:m=Kt.MIXED;break;case pe.PS:g=m,m=Kt.PUNCT_SHIFT;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(l[y]);break;case pe.TEXT_COMPACTION_MODE_LATCH:m=Kt.ALPHA;break}break;case Kt.MIXED:if(E<pe.PL)I=pe.MIXED_CHARS[E];else switch(E){case pe.PL:m=Kt.PUNCT;break;case 26:I=" ";break;case pe.LL:m=Kt.LOWER;break;case pe.AL:m=Kt.ALPHA;break;case pe.PS:g=m,m=Kt.PUNCT_SHIFT;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(l[y]);break;case pe.TEXT_COMPACTION_MODE_LATCH:m=Kt.ALPHA;break}break;case Kt.PUNCT:if(E<pe.PAL)I=pe.PUNCT_CHARS[E];else switch(E){case pe.PAL:m=Kt.ALPHA;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(l[y]);break;case pe.TEXT_COMPACTION_MODE_LATCH:m=Kt.ALPHA;break}break;case Kt.ALPHA_SHIFT:if(m=g,E<26)I=String.fromCharCode(65+E);else switch(E){case 26:I=" ";break;case pe.TEXT_COMPACTION_MODE_LATCH:m=Kt.ALPHA;break}break;case Kt.PUNCT_SHIFT:if(m=g,E<pe.PAL)I=pe.PUNCT_CHARS[E];else switch(E){case pe.PAL:m=Kt.ALPHA;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(l[y]);break;case pe.TEXT_COMPACTION_MODE_LATCH:m=Kt.ALPHA;break}break}I!==""&&h.append(I),y++}}static byteCompaction(i,l,c,h,m){let g=new jk,y=0,E=0,I=!1;switch(i){case pe.BYTE_COMPACTION_MODE_LATCH:let D=new Int32Array(6),z=l[h++];for(;h<l[0]&&!I;)switch(D[y++]=z,E=900*E+z,z=l[h++],z){case pe.TEXT_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH:case pe.NUMERIC_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:h--,I=!0;break;default:if(y%5===0&&y>0){for(let $=0;$<6;++$)g.write(Number(li(E)>>li(8*(5-$))));E=0,y=0}break}h===l[0]&&z<pe.TEXT_COMPACTION_MODE_LATCH&&(D[y++]=z);for(let $=0;$<y;$++)g.write(D[$]);break;case pe.BYTE_COMPACTION_MODE_LATCH_6:for(;h<l[0]&&!I;){let $=l[h++];if($<pe.TEXT_COMPACTION_MODE_LATCH)y++,E=900*E+$;else switch($){case pe.TEXT_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH:case pe.NUMERIC_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:h--,I=!0;break}if(y%5===0&&y>0){for(let Z=0;Z<6;++Z)g.write(Number(li(E)>>li(8*(5-Z))));E=0,y=0}}break}return m.append(G.decode(g.toByteArray(),c)),h}static numericCompaction(i,l,c){let h=0,m=!1,g=new Int32Array(pe.MAX_NUMERIC_CODEWORDS);for(;l<i[0]&&!m;){let y=i[l++];if(l===i[0]&&(m=!0),y<pe.TEXT_COMPACTION_MODE_LATCH)g[h]=y,h++;else switch(y){case pe.TEXT_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:l--,m=!0;break}(h%pe.MAX_NUMERIC_CODEWORDS===0||y===pe.NUMERIC_COMPACTION_MODE_LATCH||m)&&h>0&&(c.append(pe.decodeBase900toBase10(g,h)),h=0)}return l}static decodeBase900toBase10(i,l){let c=li(0);for(let m=0;m<l;m++)c+=pe.EXP900[l-m-1]*li(i[m]);let h=c.toString();if(h.charAt(0)!=="1")throw new R;return h.substring(1)}}pe.TEXT_COMPACTION_MODE_LATCH=900,pe.BYTE_COMPACTION_MODE_LATCH=901,pe.NUMERIC_COMPACTION_MODE_LATCH=902,pe.BYTE_COMPACTION_MODE_LATCH_6=924,pe.ECI_USER_DEFINED=925,pe.ECI_GENERAL_PURPOSE=926,pe.ECI_CHARSET=927,pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,pe.MACRO_PDF417_TERMINATOR=922,pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,pe.MAX_NUMERIC_CODEWORDS=15,pe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,pe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,pe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,pe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,pe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,pe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,pe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,pe.PL=25,pe.LL=27,pe.AS=27,pe.ML=28,pe.AL=28,pe.PS=29,pe.PAL=29,pe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,pe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",pe.EXP900=$v()?Ck():[],pe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class bt{constructor(){}static decode(i,l,c,h,m,g,y){let E=new po(i,l,c,h,m),I=null,D=null,z;for(let re=!0;;re=!1){if(l!=null&&(I=bt.getRowIndicatorColumn(i,E,l,!0,g,y)),h!=null&&(D=bt.getRowIndicatorColumn(i,E,h,!1,g,y)),z=bt.merge(I,D),z==null)throw X.getNotFoundInstance();let ne=z.getBoundingBox();if(re&&ne!=null&&(ne.getMinY()<E.getMinY()||ne.getMaxY()>E.getMaxY()))E=ne;else break}z.setBoundingBox(E);let $=z.getBarcodeColumnCount()+1;z.setDetectionResultColumn(0,I),z.setDetectionResultColumn($,D);let Z=I!=null;for(let re=1;re<=$;re++){let ne=Z?re:$-re;if(z.getDetectionResultColumn(ne)!==void 0)continue;let he;ne===0||ne===$?he=new Fv(E,ne===0):he=new Zc(E),z.setDetectionResultColumn(ne,he);let ge=-1,Le=ge;for(let Fe=E.getMinY();Fe<=E.getMaxY();Fe++){if(ge=bt.getStartColumn(z,ne,Fe,Z),ge<0||ge>E.getMaxX()){if(Le===-1)continue;ge=Le}let Oe=bt.detectCodeword(i,E.getMinX(),E.getMaxX(),Z,ge,Fe,g,y);Oe!=null&&(he.setCodeword(Fe,Oe),Le=ge,g=Math.min(g,Oe.getWidth()),y=Math.max(y,Oe.getWidth()))}}return bt.createDecoderResult(z)}static merge(i,l){if(i==null&&l==null)return null;let c=bt.getBarcodeMetadata(i,l);if(c==null)return null;let h=po.merge(bt.adjustBoundingBox(i),bt.adjustBoundingBox(l));return new ed(c,h)}static adjustBoundingBox(i){if(i==null)return null;let l=i.getRowHeights();if(l==null)return null;let c=bt.getMax(l),h=0;for(let y of l)if(h+=c-y,y>0)break;let m=i.getCodewords();for(let y=0;h>0&&m[y]==null;y++)h--;let g=0;for(let y=l.length-1;y>=0&&(g+=c-l[y],!(l[y]>0));y--);for(let y=m.length-1;g>0&&m[y]==null;y--)g--;return i.getBoundingBox().addMissingRows(h,g,i.isLeft())}static getMax(i){let l=-1;for(let c of i)l=Math.max(l,c);return l}static getBarcodeMetadata(i,l){let c;if(i==null||(c=i.getBarcodeMetadata())==null)return l==null?null:l.getBarcodeMetadata();let h;return l==null||(h=l.getBarcodeMetadata())==null?c:c.getColumnCount()!==h.getColumnCount()&&c.getErrorCorrectionLevel()!==h.getErrorCorrectionLevel()&&c.getRowCount()!==h.getRowCount()?null:c}static getRowIndicatorColumn(i,l,c,h,m,g){let y=new Fv(l,h);for(let E=0;E<2;E++){let I=E===0?1:-1,D=Math.trunc(Math.trunc(c.getX()));for(let z=Math.trunc(Math.trunc(c.getY()));z<=l.getMaxY()&&z>=l.getMinY();z+=I){let $=bt.detectCodeword(i,0,i.getWidth(),h,D,z,m,g);$!=null&&(y.setCodeword(z,$),h?D=$.getStartX():D=$.getEndX())}}return y}static adjustCodewordCount(i,l){let c=l[0][1],h=c.getValue(),m=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-bt.getNumberOfECCodeWords(i.getBarcodeECLevel());if(h.length===0){if(m<1||m>st.MAX_CODEWORDS_IN_BARCODE)throw X.getNotFoundInstance();c.setValue(m)}else h[0]!==m&&c.setValue(m)}static createDecoderResult(i){let l=bt.createBarcodeMatrix(i);bt.adjustCodewordCount(i,l);let c=new Array,h=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),m=[],g=new Array;for(let E=0;E<i.getBarcodeRowCount();E++)for(let I=0;I<i.getBarcodeColumnCount();I++){let D=l[E][I+1].getValue(),z=E*i.getBarcodeColumnCount()+I;D.length===0?c.push(z):D.length===1?h[z]=D[0]:(g.push(z),m.push(D))}let y=new Array(m.length);for(let E=0;E<y.length;E++)y[E]=m[E];return bt.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),h,st.toIntArray(c),st.toIntArray(g),y)}static createDecoderResultFromAmbiguousValues(i,l,c,h,m){let g=new Int32Array(h.length),y=100;for(;y-- >0;){for(let E=0;E<g.length;E++)l[h[E]]=m[E][g[E]];try{return bt.decodeCodewords(l,i,c)}catch(E){if(!(E instanceof j))throw E}if(g.length===0)throw j.getChecksumInstance();for(let E=0;E<g.length;E++)if(g[E]<m[E].length-1){g[E]++;break}else if(g[E]=0,E===g.length-1)throw j.getChecksumInstance()}throw j.getChecksumInstance()}static createBarcodeMatrix(i){let l=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let h=0;h<l.length;h++)for(let m=0;m<l[h].length;m++)l[h][m]=new Jc;let c=0;for(let h of i.getDetectionResultColumns()){if(h!=null){for(let m of h.getCodewords())if(m!=null){let g=m.getRowNumber();if(g>=0){if(g>=l.length)continue;l[g][c].setValue(m.getValue())}}}c++}return l}static isValidBarcodeColumn(i,l){return l>=0&&l<=i.getBarcodeColumnCount()+1}static getStartColumn(i,l,c,h){let m=h?1:-1,g=null;if(bt.isValidBarcodeColumn(i,l-m)&&(g=i.getDetectionResultColumn(l-m).getCodeword(c)),g!=null)return h?g.getEndX():g.getStartX();if(g=i.getDetectionResultColumn(l).getCodewordNearby(c),g!=null)return h?g.getStartX():g.getEndX();if(bt.isValidBarcodeColumn(i,l-m)&&(g=i.getDetectionResultColumn(l-m).getCodewordNearby(c)),g!=null)return h?g.getEndX():g.getStartX();let y=0;for(;bt.isValidBarcodeColumn(i,l-m);){l-=m;for(let E of i.getDetectionResultColumn(l).getCodewords())if(E!=null)return(h?E.getEndX():E.getStartX())+m*y*(E.getEndX()-E.getStartX());y++}return h?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,l,c,h,m,g,y,E){m=bt.adjustCodewordStartColumn(i,l,c,h,m,g);let I=bt.getModuleBitCount(i,l,c,h,m,g);if(I==null)return null;let D,z=ke.sum(I);if(h)D=m+z;else{for(let re=0;re<I.length/2;re++){let ne=I[re];I[re]=I[I.length-1-re],I[I.length-1-re]=ne}D=m,m=D-z}if(!bt.checkCodewordSkew(z,y,E))return null;let $=Dn.getDecodedValue(I),Z=st.getCodeword($);return Z===-1?null:new td(m,D,bt.getCodewordBucketNumber($),Z)}static getModuleBitCount(i,l,c,h,m,g){let y=m,E=new Int32Array(8),I=0,D=h?1:-1,z=h;for(;(h?y<c:y>=l)&&I<E.length;)i.get(y,g)===z?(E[I]++,y+=D):(I++,z=!z);return I===E.length||y===(h?c:l)&&I===E.length-1?E:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,l,c,h,m,g){let y=m,E=h?-1:1;for(let I=0;I<2;I++){for(;(h?y>=l:y<c)&&h===i.get(y,g);){if(Math.abs(m-y)>bt.CODEWORD_SKEW_SIZE)return m;y+=E}E=-E,h=!h}return y}static checkCodewordSkew(i,l,c){return l-bt.CODEWORD_SKEW_SIZE<=i&&i<=c+bt.CODEWORD_SKEW_SIZE}static decodeCodewords(i,l,c){if(i.length===0)throw R.getFormatInstance();let h=1<<l+1,m=bt.correctErrors(i,c,h);bt.verifyCodewordCount(i,h);let g=pe.decode(i,""+l);return g.setErrorsCorrected(m),g.setErasures(c.length),g}static correctErrors(i,l,c){if(l!=null&&l.length>c/2+bt.MAX_ERRORS||c<0||c>bt.MAX_EC_CODEWORDS)throw j.getChecksumInstance();return bt.errorCorrection.decode(i,c,l)}static verifyCodewordCount(i,l){if(i.length<4)throw R.getFormatInstance();let c=i[0];if(c>i.length)throw R.getFormatInstance();if(c===0)if(l<i.length)i[0]=i.length-l;else throw R.getFormatInstance()}static getBitCountForCodeword(i){let l=new Int32Array(8),c=0,h=l.length-1;for(;!((i&1)!==c&&(c=i&1,h--,h<0));)l[h]++,i>>=1;return l}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return bt.getCodewordBucketNumber(bt.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let l=new Qc;for(let c=0;c<i.length;c++){l.format("Row %2d: ",c);for(let h=0;h<i[c].length;h++){let m=i[c][h];m.getValue().length===0?l.format("        ",null):l.format("%4d(%2d)",m.getValue()[0],m.getConfidence(m.getValue()[0]))}l.format("%n")}return l.toString()}}bt.CODEWORD_SKEW_SIZE=2,bt.MAX_ERRORS=3,bt.MAX_EC_CODEWORDS=512,bt.errorCorrection=new Lv;class tn{decode(i,l=null){let c=tn.decode(i,l,!1);if(c==null||c.length===0||c[0]==null)throw X.getNotFoundInstance();return c[0]}decodeMultiple(i,l=null){try{return tn.decode(i,l,!0)}catch(c){throw c instanceof R||c instanceof j?X.getNotFoundInstance():c}}static decode(i,l,c){const h=new Array,m=vt.detectMultiple(i,l,c);for(const g of m.getPoints()){const y=bt.decode(m.getBits(),g[4],g[5],g[6],g[7],tn.getMinCodewordWidth(g),tn.getMaxCodewordWidth(g)),E=new K(y.getText(),y.getRawBytes(),void 0,g,de.PDF_417);E.putMetadata(me.ERROR_CORRECTION_LEVEL,y.getECLevel());const I=y.getOther();I!=null&&E.putMetadata(me.PDF417_EXTRA_METADATA,I),h.push(E)}return h.map(g=>g)}static getMaxWidth(i,l){return i==null||l==null?0:Math.trunc(Math.abs(i.getX()-l.getX()))}static getMinWidth(i,l){return i==null||l==null?b.MAX_VALUE:Math.trunc(Math.abs(i.getX()-l.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(tn.getMaxWidth(i[0],i[4]),tn.getMaxWidth(i[6],i[2])*st.MODULES_IN_CODEWORD/st.MODULES_IN_STOP_PATTERN),Math.max(tn.getMaxWidth(i[1],i[5]),tn.getMaxWidth(i[7],i[3])*st.MODULES_IN_CODEWORD/st.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(tn.getMinWidth(i[0],i[4]),tn.getMinWidth(i[6],i[2])*st.MODULES_IN_CODEWORD/st.MODULES_IN_STOP_PATTERN),Math.min(tn.getMinWidth(i[1],i[5]),tn.getMinWidth(i[7],i[3])*st.MODULES_IN_CODEWORD/st.MODULES_IN_STOP_PATTERN)))}reset(){}}class Qu extends p{}Qu.kind="ReaderException";class qv{constructor(i,l){this.verbose=i===!0,l&&this.setHints(l)}decode(i,l){return l&&this.setHints(l),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const l=!s(i)&&i.get(L.TRY_HARDER)===!0,c=s(i)?null:i.get(L.POSSIBLE_FORMATS),h=new Array;if(!s(c)){const m=c.some(g=>g===de.UPC_A||g===de.UPC_E||g===de.EAN_13||g===de.EAN_8||g===de.CODABAR||g===de.CODE_39||g===de.CODE_93||g===de.CODE_128||g===de.ITF||g===de.RSS_14||g===de.RSS_EXPANDED);m&&!l&&h.push(new wl(i,this.verbose)),c.includes(de.QR_CODE)&&h.push(new oi),c.includes(de.DATA_MATRIX)&&h.push(new ii),c.includes(de.AZTEC)&&h.push(new dt),c.includes(de.PDF_417)&&h.push(new tn),m&&l&&h.push(new wl(i,this.verbose))}h.length===0&&(l||h.push(new wl(i,this.verbose)),h.push(new oi),h.push(new ii),h.push(new dt),h.push(new tn),l&&h.push(new wl(i,this.verbose))),this.readers=h}reset(){if(this.readers!==null)for(const i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new Qu("No readers where selected, nothing can be read.");for(const l of this.readers)try{return l.decode(i,this.hints)}catch(c){if(c instanceof Qu)continue}throw new X("No MultiFormat Readers were able to detect the code.")}}class Ek extends J{constructor(i=null,l=500){const c=new qv;c.setHints(i),super(c,l)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class Sk extends J{constructor(i=500){super(new tn,i)}}class Ak extends J{constructor(i=500){super(new oi,i)}}var _p;(function(F){F[F.ERROR_CORRECTION=0]="ERROR_CORRECTION",F[F.CHARACTER_SET=1]="CHARACTER_SET",F[F.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",F[F.MIN_SIZE=3]="MIN_SIZE",F[F.MAX_SIZE=4]="MAX_SIZE",F[F.MARGIN=5]="MARGIN",F[F.PDF417_COMPACT=6]="PDF417_COMPACT",F[F.PDF417_COMPACTION=7]="PDF417_COMPACTION",F[F.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",F[F.AZTEC_LAYERS=9]="AZTEC_LAYERS",F[F.QR_VERSION=10]="QR_VERSION"})(_p||(_p={}));var Lr=_p;class Np{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new ye(i,Int32Array.from([1])))}buildGenerator(i){const l=this.cachedGenerators;if(i>=l.length){let c=l[l.length-1];const h=this.field;for(let m=l.length;m<=i;m++){const g=c.multiply(new ye(h,Int32Array.from([1,h.exp(m-1+h.getGeneratorBase())])));l.push(g),c=g}}return l[i]}encode(i,l){if(l===0)throw new w("No error correction bytes");const c=i.length-l;if(c<=0)throw new w("No data bytes provided");const h=this.buildGenerator(l),m=new Int32Array(c);C.arraycopy(i,0,m,0,c);let g=new ye(this.field,m);g=g.multiplyByMonomial(l,1);const E=g.divide(h)[1].getCoefficients(),I=l-E.length;for(let D=0;D<I;D++)i[c+D]=0;C.arraycopy(E,0,i,c+I,E.length)}}class br{constructor(){}static applyMaskPenaltyRule1(i){return br.applyMaskPenaltyRule1Internal(i,!0)+br.applyMaskPenaltyRule1Internal(i,!1)}static applyMaskPenaltyRule2(i){let l=0;const c=i.getArray(),h=i.getWidth(),m=i.getHeight();for(let g=0;g<m-1;g++){const y=c[g];for(let E=0;E<h-1;E++){const I=y[E];I===y[E+1]&&I===c[g+1][E]&&I===c[g+1][E+1]&&l++}}return br.N2*l}static applyMaskPenaltyRule3(i){let l=0;const c=i.getArray(),h=i.getWidth(),m=i.getHeight();for(let g=0;g<m;g++)for(let y=0;y<h;y++){const E=c[g];y+6<h&&E[y]===1&&E[y+1]===0&&E[y+2]===1&&E[y+3]===1&&E[y+4]===1&&E[y+5]===0&&E[y+6]===1&&(br.isWhiteHorizontal(E,y-4,y)||br.isWhiteHorizontal(E,y+7,y+11))&&l++,g+6<m&&c[g][y]===1&&c[g+1][y]===0&&c[g+2][y]===1&&c[g+3][y]===1&&c[g+4][y]===1&&c[g+5][y]===0&&c[g+6][y]===1&&(br.isWhiteVertical(c,y,g-4,g)||br.isWhiteVertical(c,y,g+7,g+11))&&l++}return l*br.N3}static isWhiteHorizontal(i,l,c){l=Math.max(l,0),c=Math.min(c,i.length);for(let h=l;h<c;h++)if(i[h]===1)return!1;return!0}static isWhiteVertical(i,l,c,h){c=Math.max(c,0),h=Math.min(h,i.length);for(let m=c;m<h;m++)if(i[m][l]===1)return!1;return!0}static applyMaskPenaltyRule4(i){let l=0;const c=i.getArray(),h=i.getWidth(),m=i.getHeight();for(let E=0;E<m;E++){const I=c[E];for(let D=0;D<h;D++)I[D]===1&&l++}const g=i.getHeight()*i.getWidth();return Math.floor(Math.abs(l*2-g)*10/g)*br.N4}static getDataMaskBit(i,l,c){let h,m;switch(i){case 0:h=c+l&1;break;case 1:h=c&1;break;case 2:h=l%3;break;case 3:h=(c+l)%3;break;case 4:h=Math.floor(c/2)+Math.floor(l/3)&1;break;case 5:m=c*l,h=(m&1)+m%3;break;case 6:m=c*l,h=(m&1)+m%3&1;break;case 7:m=c*l,h=m%3+(c+l&1)&1;break;default:throw new w("Invalid mask pattern: "+i)}return h===0}static applyMaskPenaltyRule1Internal(i,l){let c=0;const h=l?i.getHeight():i.getWidth(),m=l?i.getWidth():i.getHeight(),g=i.getArray();for(let y=0;y<h;y++){let E=0,I=-1;for(let D=0;D<m;D++){const z=l?g[y][D]:g[D][y];z===I?E++:(E>=5&&(c+=br.N1+(E-5)),E=1,I=z)}E>=5&&(c+=br.N1+(E-5))}return c}}br.N1=3,br.N2=3,br.N3=40,br.N4=10;class Zu{constructor(i,l){this.width=i,this.height=l;const c=new Array(l);for(let h=0;h!==l;h++)c[h]=new Uint8Array(i);this.bytes=c}getHeight(){return this.height}getWidth(){return this.width}get(i,l){return this.bytes[l][i]}getArray(){return this.bytes}setNumber(i,l,c){this.bytes[l][i]=c}setBoolean(i,l,c){this.bytes[l][i]=c?1:0}clear(i){for(const l of this.bytes)k.fill(l,i)}equals(i){if(!(i instanceof Zu))return!1;const l=i;if(this.width!==l.width||this.height!==l.height)return!1;for(let c=0,h=this.height;c<h;++c){const m=this.bytes[c],g=l.bytes[c];for(let y=0,E=this.width;y<E;++y)if(m[y]!==g[y])return!1}return!0}toString(){const i=new V;for(let l=0,c=this.height;l<c;++l){const h=this.bytes[l];for(let m=0,g=this.width;m<g;++m)switch(h[m]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()}}class go{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const i=new V;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()}setMode(i){this.mode=i}setECLevel(i){this.ecLevel=i}setVersion(i){this.version=i}setMaskPattern(i){this.maskPattern=i}setMatrix(i){this.matrix=i}static isValidMaskPattern(i){return i>=0&&i<go.NUM_MASK_PATTERNS}}go.NUM_MASK_PATTERNS=8;class Zt extends p{}Zt.kind="WriterException";class nt{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,l,c,h,m){nt.clearMatrix(m),nt.embedBasicPatterns(c,m),nt.embedTypeInfo(l,h,m),nt.maybeEmbedVersionInfo(c,m),nt.embedDataBits(i,h,m)}static embedBasicPatterns(i,l){nt.embedPositionDetectionPatternsAndSeparators(l),nt.embedDarkDotAtLeftBottomCorner(l),nt.maybeEmbedPositionAdjustmentPatterns(i,l),nt.embedTimingPatterns(l)}static embedTypeInfo(i,l,c){const h=new T;nt.makeTypeInfoBits(i,l,h);for(let m=0,g=h.getSize();m<g;++m){const y=h.get(h.getSize()-1-m),E=nt.TYPE_INFO_COORDINATES[m],I=E[0],D=E[1];if(c.setBoolean(I,D,y),m<8){const z=c.getWidth()-m-1;c.setBoolean(z,8,y)}else{const $=c.getHeight()-7+(m-8);c.setBoolean(8,$,y)}}}static maybeEmbedVersionInfo(i,l){if(i.getVersionNumber()<7)return;const c=new T;nt.makeVersionInfoBits(i,c);let h=6*3-1;for(let m=0;m<6;++m)for(let g=0;g<3;++g){const y=c.get(h);h--,l.setBoolean(m,l.getHeight()-11+g,y),l.setBoolean(l.getHeight()-11+g,m,y)}}static embedDataBits(i,l,c){let h=0,m=-1,g=c.getWidth()-1,y=c.getHeight()-1;for(;g>0;){for(g===6&&(g-=1);y>=0&&y<c.getHeight();){for(let E=0;E<2;++E){const I=g-E;if(!nt.isEmpty(c.get(I,y)))continue;let D;h<i.getSize()?(D=i.get(h),++h):D=!1,l!==255&&br.getDataMaskBit(l,I,y)&&(D=!D),c.setBoolean(I,y,D)}y+=m}m=-m,y+=m,g-=2}if(h!==i.getSize())throw new Zt("Not all bits consumed: "+h+"/"+i.getSize())}static findMSBSet(i){return 32-b.numberOfLeadingZeros(i)}static calculateBCHCode(i,l){if(l===0)throw new w("0 polynomial");const c=nt.findMSBSet(l);for(i<<=c-1;nt.findMSBSet(i)>=c;)i^=l<<nt.findMSBSet(i)-c;return i}static makeTypeInfoBits(i,l,c){if(!go.isValidMaskPattern(l))throw new Zt("Invalid mask pattern");const h=i.getBits()<<3|l;c.appendBits(h,5);const m=nt.calculateBCHCode(h,nt.TYPE_INFO_POLY);c.appendBits(m,10);const g=new T;if(g.appendBits(nt.TYPE_INFO_MASK_PATTERN,15),c.xor(g),c.getSize()!==15)throw new Zt("should not happen but we got: "+c.getSize())}static makeVersionInfoBits(i,l){l.appendBits(i.getVersionNumber(),6);const c=nt.calculateBCHCode(i.getVersionNumber(),nt.VERSION_INFO_POLY);if(l.appendBits(c,12),l.getSize()!==18)throw new Zt("should not happen but we got: "+l.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let l=8;l<i.getWidth()-8;++l){const c=(l+1)%2;nt.isEmpty(i.get(l,6))&&i.setNumber(l,6,c),nt.isEmpty(i.get(6,l))&&i.setNumber(6,l,c)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new Zt;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,l,c){for(let h=0;h<8;++h){if(!nt.isEmpty(c.get(i+h,l)))throw new Zt;c.setNumber(i+h,l,0)}}static embedVerticalSeparationPattern(i,l,c){for(let h=0;h<7;++h){if(!nt.isEmpty(c.get(i,l+h)))throw new Zt;c.setNumber(i,l+h,0)}}static embedPositionAdjustmentPattern(i,l,c){for(let h=0;h<5;++h){const m=nt.POSITION_ADJUSTMENT_PATTERN[h];for(let g=0;g<5;++g)c.setNumber(i+g,l+h,m[g])}}static embedPositionDetectionPattern(i,l,c){for(let h=0;h<7;++h){const m=nt.POSITION_DETECTION_PATTERN[h];for(let g=0;g<7;++g)c.setNumber(i+g,l+h,m[g])}}static embedPositionDetectionPatternsAndSeparators(i){const l=nt.POSITION_DETECTION_PATTERN[0].length;nt.embedPositionDetectionPattern(0,0,i),nt.embedPositionDetectionPattern(i.getWidth()-l,0,i),nt.embedPositionDetectionPattern(0,i.getWidth()-l,i);const c=8;nt.embedHorizontalSeparationPattern(0,c-1,i),nt.embedHorizontalSeparationPattern(i.getWidth()-c,c-1,i),nt.embedHorizontalSeparationPattern(0,i.getWidth()-c,i);const h=7;nt.embedVerticalSeparationPattern(h,0,i),nt.embedVerticalSeparationPattern(i.getHeight()-h-1,0,i),nt.embedVerticalSeparationPattern(h,i.getHeight()-h,i)}static maybeEmbedPositionAdjustmentPatterns(i,l){if(i.getVersionNumber()<2)return;const c=i.getVersionNumber()-1,h=nt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[c];for(let m=0,g=h.length;m!==g;m++){const y=h[m];if(y>=0)for(let E=0;E!==g;E++){const I=h[E];I>=0&&nt.isEmpty(l.get(I,y))&&nt.embedPositionAdjustmentPattern(I-2,y-2,l)}}}}nt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),nt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),nt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),nt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),nt.VERSION_INFO_POLY=7973,nt.TYPE_INFO_POLY=1335,nt.TYPE_INFO_MASK_PATTERN=21522;class kk{constructor(i,l){this.dataBytes=i,this.errorCorrectionBytes=l}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class ar{constructor(){}static calculateMaskPenalty(i){return br.applyMaskPenaltyRule1(i)+br.applyMaskPenaltyRule2(i)+br.applyMaskPenaltyRule3(i)+br.applyMaskPenaltyRule4(i)}static encode(i,l,c=null){let h=ar.DEFAULT_BYTE_MODE_ENCODING;const m=c!==null&&c.get(Lr.CHARACTER_SET)!==void 0;m&&(h=c.get(Lr.CHARACTER_SET).toString());const g=this.chooseMode(i,h),y=new T;if(g===tt.BYTE&&(m||ar.DEFAULT_BYTE_MODE_ENCODING!==h)){const Fe=P.getCharacterSetECIByName(h);Fe!==void 0&&this.appendECI(Fe,y)}this.appendModeInfo(g,y);const E=new T;this.appendBytes(i,g,E,h);let I;if(c!==null&&c.get(Lr.QR_VERSION)!==void 0){const Fe=Number.parseInt(c.get(Lr.QR_VERSION).toString(),10);I=et.getVersionForNumber(Fe);const Oe=this.calculateBitsNeeded(g,y,E,I);if(!this.willFit(Oe,I,l))throw new Zt("Data too big for requested version")}else I=this.recommendVersion(l,g,y,E);const D=new T;D.appendBitArray(y);const z=g===tt.BYTE?E.getSizeInBytes():i.length;this.appendLengthInfo(z,I,g,D),D.appendBitArray(E);const $=I.getECBlocksForLevel(l),Z=I.getTotalCodewords()-$.getTotalECCodewords();this.terminateBits(Z,D);const re=this.interleaveWithECBytes(D,I.getTotalCodewords(),Z,$.getNumBlocks()),ne=new go;ne.setECLevel(l),ne.setMode(g),ne.setVersion(I);const he=I.getDimensionForVersion(),ge=new Zu(he,he),Le=this.chooseMaskPattern(re,l,I,ge);return ne.setMaskPattern(Le),nt.buildMatrix(re,l,I,Le,ge),ne.setMatrix(ge),ne}static recommendVersion(i,l,c,h){const m=this.calculateBitsNeeded(l,c,h,et.getVersionForNumber(1)),g=this.chooseVersion(m,i),y=this.calculateBitsNeeded(l,c,h,g);return this.chooseVersion(y,i)}static calculateBitsNeeded(i,l,c,h){return l.getSize()+i.getCharacterCountBits(h)+c.getSize()}static getAlphanumericCode(i){return i<ar.ALPHANUMERIC_TABLE.length?ar.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,l=null){if(P.SJIS.getName()===l&&this.isOnlyDoubleByteKanji(i))return tt.KANJI;let c=!1,h=!1;for(let m=0,g=i.length;m<g;++m){const y=i.charAt(m);if(ar.isDigit(y))c=!0;else if(this.getAlphanumericCode(y.charCodeAt(0))!==-1)h=!0;else return tt.BYTE}return h?tt.ALPHANUMERIC:c?tt.NUMERIC:tt.BYTE}static isOnlyDoubleByteKanji(i){let l;try{l=G.encode(i,P.SJIS)}catch{return!1}const c=l.length;if(c%2!==0)return!1;for(let h=0;h<c;h+=2){const m=l[h]&255;if((m<129||m>159)&&(m<224||m>235))return!1}return!0}static chooseMaskPattern(i,l,c,h){let m=Number.MAX_SAFE_INTEGER,g=-1;for(let y=0;y<go.NUM_MASK_PATTERNS;y++){nt.buildMatrix(i,l,c,y,h);let E=this.calculateMaskPenalty(h);E<m&&(m=E,g=y)}return g}static chooseVersion(i,l){for(let c=1;c<=40;c++){const h=et.getVersionForNumber(c);if(ar.willFit(i,h,l))return h}throw new Zt("Data too big")}static willFit(i,l,c){const h=l.getTotalCodewords(),g=l.getECBlocksForLevel(c).getTotalECCodewords(),y=h-g,E=(i+7)/8;return y>=E}static terminateBits(i,l){const c=i*8;if(l.getSize()>c)throw new Zt("data bits cannot fit in the QR Code"+l.getSize()+" > "+c);for(let g=0;g<4&&l.getSize()<c;++g)l.appendBit(!1);const h=l.getSize()&7;if(h>0)for(let g=h;g<8;g++)l.appendBit(!1);const m=i-l.getSizeInBytes();for(let g=0;g<m;++g)l.appendBits(g&1?17:236,8);if(l.getSize()!==c)throw new Zt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,l,c,h,m,g){if(h>=c)throw new Zt("Block ID too large");const y=i%c,E=c-y,I=Math.floor(i/c),D=I+1,z=Math.floor(l/c),$=z+1,Z=I-z,re=D-$;if(Z!==re)throw new Zt("EC bytes mismatch");if(c!==E+y)throw new Zt("RS blocks mismatch");if(i!==(z+Z)*E+($+re)*y)throw new Zt("Total bytes mismatch");h<E?(m[0]=z,g[0]=Z):(m[0]=$,g[0]=re)}static interleaveWithECBytes(i,l,c,h){if(i.getSizeInBytes()!==c)throw new Zt("Number of bits and data bytes does not match");let m=0,g=0,y=0;const E=new Array;for(let D=0;D<h;++D){const z=new Int32Array(1),$=new Int32Array(1);ar.getNumDataBytesAndNumECBytesForBlockID(l,c,h,D,z,$);const Z=z[0],re=new Uint8Array(Z);i.toBytes(8*m,re,0,Z);const ne=ar.generateECBytes(re,$[0]);E.push(new kk(re,ne)),g=Math.max(g,Z),y=Math.max(y,ne.length),m+=z[0]}if(c!==m)throw new Zt("Data bytes does not match offset");const I=new T;for(let D=0;D<g;++D)for(const z of E){const $=z.getDataBytes();D<$.length&&I.appendBits($[D],8)}for(let D=0;D<y;++D)for(const z of E){const $=z.getErrorCorrectionBytes();D<$.length&&I.appendBits($[D],8)}if(l!==I.getSizeInBytes())throw new Zt("Interleaving error: "+l+" and "+I.getSizeInBytes()+" differ.");return I}static generateECBytes(i,l){const c=i.length,h=new Int32Array(c+l);for(let g=0;g<c;g++)h[g]=i[g]&255;new Np(we.QR_CODE_FIELD_256).encode(h,l);const m=new Uint8Array(l);for(let g=0;g<l;g++)m[g]=h[c+g];return m}static appendModeInfo(i,l){l.appendBits(i.getBits(),4)}static appendLengthInfo(i,l,c,h){const m=c.getCharacterCountBits(l);if(i>=1<<m)throw new Zt(i+" is bigger than "+((1<<m)-1));h.appendBits(i,m)}static appendBytes(i,l,c,h){switch(l){case tt.NUMERIC:ar.appendNumericBytes(i,c);break;case tt.ALPHANUMERIC:ar.appendAlphanumericBytes(i,c);break;case tt.BYTE:ar.append8BitBytes(i,c,h);break;case tt.KANJI:ar.appendKanjiBytes(i,c);break;default:throw new Zt("Invalid mode: "+l)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const l=ar.getDigit(i);return l>=0&&l<=9}static appendNumericBytes(i,l){const c=i.length;let h=0;for(;h<c;){const m=ar.getDigit(i.charAt(h));if(h+2<c){const g=ar.getDigit(i.charAt(h+1)),y=ar.getDigit(i.charAt(h+2));l.appendBits(m*100+g*10+y,10),h+=3}else if(h+1<c){const g=ar.getDigit(i.charAt(h+1));l.appendBits(m*10+g,7),h+=2}else l.appendBits(m,4),h++}}static appendAlphanumericBytes(i,l){const c=i.length;let h=0;for(;h<c;){const m=ar.getAlphanumericCode(i.charCodeAt(h));if(m===-1)throw new Zt;if(h+1<c){const g=ar.getAlphanumericCode(i.charCodeAt(h+1));if(g===-1)throw new Zt;l.appendBits(m*45+g,11),h+=2}else l.appendBits(m,6),h++}}static append8BitBytes(i,l,c){let h;try{h=G.encode(i,c)}catch(m){throw new Zt(m)}for(let m=0,g=h.length;m!==g;m++){const y=h[m];l.appendBits(y,8)}}static appendKanjiBytes(i,l){let c;try{c=G.encode(i,P.SJIS)}catch(m){throw new Zt(m)}const h=c.length;for(let m=0;m<h;m+=2){const g=c[m]&255,y=c[m+1]&255,E=g<<8&4294967295|y;let I=-1;if(E>=33088&&E<=40956?I=E-33088:E>=57408&&E<=60351&&(I=E-49472),I===-1)throw new Zt("Invalid byte sequence");const D=(I>>8)*192+(I&255);l.appendBits(D,13)}}static appendECI(i,l){l.appendBits(tt.ECI.getBits(),4),l.appendBits(i.getValue(),8)}}ar.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),ar.DEFAULT_BYTE_MODE_ENCODING=P.UTF8.getName();class xo{write(i,l,c,h=null){if(i.length===0)throw new w("Found empty contents");if(l<0||c<0)throw new w("Requested dimensions are too small: "+l+"x"+c);let m=rr.L,g=xo.QUIET_ZONE_SIZE;h!==null&&(h.get(Lr.ERROR_CORRECTION)!==void 0&&(m=rr.fromString(h.get(Lr.ERROR_CORRECTION).toString())),h.get(Lr.MARGIN)!==void 0&&(g=Number.parseInt(h.get(Lr.MARGIN).toString(),10)));const y=ar.encode(i,m,h);return this.renderResult(y,l,c,g)}writeToDom(i,l,c,h,m=null){typeof i=="string"&&(i=document.querySelector(i));const g=this.write(l,c,h,m);i&&i.appendChild(g)}renderResult(i,l,c,h){const m=i.getMatrix();if(m===null)throw new _e;const g=m.getWidth(),y=m.getHeight(),E=g+h*2,I=y+h*2,D=Math.max(l,E),z=Math.max(c,I),$=Math.min(Math.floor(D/E),Math.floor(z/I)),Z=Math.floor((D-g*$)/2),re=Math.floor((z-y*$)/2),ne=this.createSVGElement(D,z);for(let he=0,ge=re;he<y;he++,ge+=$)for(let Le=0,Fe=Z;Le<g;Le++,Fe+=$)if(m.get(Le,he)===1){const Oe=this.createSvgRectElement(Fe,ge,$,$);ne.appendChild(Oe)}return ne}createSVGElement(i,l){const c=document.createElementNS(xo.SVG_NS,"svg");return c.setAttributeNS(null,"height",i.toString()),c.setAttributeNS(null,"width",l.toString()),c}createSvgRectElement(i,l,c,h){const m=document.createElementNS(xo.SVG_NS,"rect");return m.setAttributeNS(null,"x",i.toString()),m.setAttributeNS(null,"y",l.toString()),m.setAttributeNS(null,"height",c.toString()),m.setAttributeNS(null,"width",h.toString()),m.setAttributeNS(null,"fill","#000000"),m}}xo.QUIET_ZONE_SIZE=4,xo.SVG_NS="http://www.w3.org/2000/svg";class bl{encode(i,l,c,h,m){if(i.length===0)throw new w("Found empty contents");if(l!==de.QR_CODE)throw new w("Can only encode QR_CODE, but got "+l);if(c<0||h<0)throw new w(`Requested dimensions are too small: ${c}x${h}`);let g=rr.L,y=bl.QUIET_ZONE_SIZE;m!==null&&(m.get(Lr.ERROR_CORRECTION)!==void 0&&(g=rr.fromString(m.get(Lr.ERROR_CORRECTION).toString())),m.get(Lr.MARGIN)!==void 0&&(y=Number.parseInt(m.get(Lr.MARGIN).toString(),10)));const E=ar.encode(i,g,m);return bl.renderResult(E,c,h,y)}static renderResult(i,l,c,h){const m=i.getMatrix();if(m===null)throw new _e;const g=m.getWidth(),y=m.getHeight(),E=g+h*2,I=y+h*2,D=Math.max(l,E),z=Math.max(c,I),$=Math.min(Math.floor(D/E),Math.floor(z/I)),Z=Math.floor((D-g*$)/2),re=Math.floor((z-y*$)/2),ne=new ee(D,z);for(let he=0,ge=re;he<y;he++,ge+=$)for(let Le=0,Fe=Z;Le<g;Le++,Fe+=$)m.get(Le,he)===1&&ne.setRegion(Fe,ge,$,$);return ne}}bl.QUIET_ZONE_SIZE=4;class Tk{encode(i,l,c,h,m){let g;switch(l){case de.QR_CODE:g=new bl;break;default:throw new w("No encoder available for format "+l)}return g.encode(i,l,c,h,m)}}class da extends oe{constructor(i,l,c,h,m,g,y,E){if(super(g,y),this.yuvData=i,this.dataWidth=l,this.dataHeight=c,this.left=h,this.top=m,h+g>l||m+y>c)throw new w("Crop rectangle does not fit within image data.");E&&this.reverseHorizontal(g,y)}getRow(i,l){if(i<0||i>=this.getHeight())throw new w("Requested row is outside the image: "+i);const c=this.getWidth();(l==null||l.length<c)&&(l=new Uint8ClampedArray(c));const h=(i+this.top)*this.dataWidth+this.left;return C.arraycopy(this.yuvData,h,l,0,c),l}getMatrix(){const i=this.getWidth(),l=this.getHeight();if(i===this.dataWidth&&l===this.dataHeight)return this.yuvData;const c=i*l,h=new Uint8ClampedArray(c);let m=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return C.arraycopy(this.yuvData,m,h,0,c),h;for(let g=0;g<l;g++){const y=g*i;C.arraycopy(this.yuvData,m,h,y,i),m+=this.dataWidth}return h}isCropSupported(){return!0}crop(i,l,c,h){return new da(this.yuvData,this.dataWidth,this.dataHeight,this.left+i,this.top+l,c,h,!1)}renderThumbnail(){const i=this.getWidth()/da.THUMBNAIL_SCALE_FACTOR,l=this.getHeight()/da.THUMBNAIL_SCALE_FACTOR,c=new Int32Array(i*l),h=this.yuvData;let m=this.top*this.dataWidth+this.left;for(let g=0;g<l;g++){const y=g*i;for(let E=0;E<i;E++){const I=h[m+E*da.THUMBNAIL_SCALE_FACTOR]&255;c[y+E]=4278190080|I*65793}m+=this.dataWidth*da.THUMBNAIL_SCALE_FACTOR}return c}getThumbnailWidth(){return this.getWidth()/da.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/da.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(i,l){const c=this.yuvData;for(let h=0,m=this.top*this.dataWidth+this.left;h<l;h++,m+=this.dataWidth){const g=m+i/2;for(let y=m,E=m+i-1;y<g;y++,E--){const I=c[y];c[y]=c[E],c[E]=I}}}invert(){return new te(this)}}da.THUMBNAIL_SCALE_FACTOR=2;class jp extends oe{constructor(i,l,c,h,m,g,y){if(super(l,c),this.dataWidth=h,this.dataHeight=m,this.left=g,this.top=y,i.BYTES_PER_ELEMENT===4){const E=l*c,I=new Uint8ClampedArray(E);for(let D=0;D<E;D++){const z=i[D],$=z>>16&255,Z=z>>7&510,re=z&255;I[D]=($+Z+re)/4&255}this.luminances=I}else this.luminances=i;if(h===void 0&&(this.dataWidth=l),m===void 0&&(this.dataHeight=c),g===void 0&&(this.left=0),y===void 0&&(this.top=0),this.left+l>this.dataWidth||this.top+c>this.dataHeight)throw new w("Crop rectangle does not fit within image data.")}getRow(i,l){if(i<0||i>=this.getHeight())throw new w("Requested row is outside the image: "+i);const c=this.getWidth();(l==null||l.length<c)&&(l=new Uint8ClampedArray(c));const h=(i+this.top)*this.dataWidth+this.left;return C.arraycopy(this.luminances,h,l,0,c),l}getMatrix(){const i=this.getWidth(),l=this.getHeight();if(i===this.dataWidth&&l===this.dataHeight)return this.luminances;const c=i*l,h=new Uint8ClampedArray(c);let m=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return C.arraycopy(this.luminances,m,h,0,c),h;for(let g=0;g<l;g++){const y=g*i;C.arraycopy(this.luminances,m,h,y,i),m+=this.dataWidth}return h}isCropSupported(){return!0}crop(i,l,c,h){return new jp(this.luminances,c,h,this.dataWidth,this.dataHeight,this.left+i,this.top+l)}invert(){return new te(this)}}class Vv extends P{static forName(i){return this.getCharacterSetECIByName(i)}}class Cp{}Cp.ISO_8859_1=P.ISO8859_1;class Wv{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class Hv{static singletonList(i){return[i]}static min(i,l){return i.sort(l)[0]}}class Ik{constructor(i){this.previous=i}getPrevious(){return this.previous}}class _l extends Ik{constructor(i,l,c){super(i),this.value=l,this.bitCount=c}appendTo(i,l){i.appendBits(this.value,this.bitCount)}add(i,l){return new _l(this,i,l)}addBinaryShift(i,l){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new _l(this,i,l)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+b.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class Ep extends _l{constructor(i,l,c){super(i,0,0),this.binaryShiftStart=l,this.binaryShiftByteCount=c}appendTo(i,l){for(let c=0;c<this.binaryShiftByteCount;c++)(c===0||c===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):c===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(l[this.binaryShiftStart+c],8)}addBinaryShift(i,l){return new Ep(this,i,l)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Rk(F,i,l){return new Ep(F,i,l)}function rd(F,i,l){return new _l(F,i,l)}const Pk=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ci=0,Ju=1,ys=2,Gv=3,ua=4,Ok=new _l(null,0,0),Sp=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Dk(F){for(let i of F)k.fill(i,-1);return F[ci][ua]=0,F[Ju][ua]=0,F[Ju][ci]=28,F[Gv][ua]=0,F[ys][ua]=0,F[ys][ci]=15,F}const Xv=Dk(k.createInt32Array(6,6));class ha{constructor(i,l,c,h){this.token=i,this.mode=l,this.binaryShiftByteCount=c,this.bitCount=h}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,l){let c=this.bitCount,h=this.token;if(i!==this.mode){let g=Sp[this.mode][i];h=rd(h,g&65535,g>>16),c+=g>>16}let m=i===ys?4:5;return h=rd(h,l,m),new ha(h,i,0,c+m)}shiftAndAppend(i,l){let c=this.token,h=this.mode===ys?4:5;return c=rd(c,Xv[this.mode][i],h),c=rd(c,l,5),new ha(c,this.mode,0,this.bitCount+h+5)}addBinaryShiftChar(i){let l=this.token,c=this.mode,h=this.bitCount;if(this.mode===ua||this.mode===ys){let y=Sp[c][ci];l=rd(l,y&65535,y>>16),h+=y>>16,c=ci}let m=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,g=new ha(l,c,this.binaryShiftByteCount+1,h+m);return g.binaryShiftByteCount===2078&&(g=g.endBinaryShift(i+1)),g}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let l=this.token;return l=Rk(l,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new ha(l,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let l=this.bitCount+(Sp[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?l+=ha.calculateBinaryShiftCost(i)-ha.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(l+=10),l<=i.bitCount}toBitArray(i){let l=[];for(let h=this.endBinaryShift(i.length).token;h!==null;h=h.getPrevious())l.unshift(h);let c=new T;for(const h of l)h.appendTo(c,i);return c}toString(){return B.format("%s bits=%d bytes=%d",Pk[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}ha.INITIAL_STATE=new ha(Ok,ci,0,0);function Mk(F){const i=B.getCharCode(" "),l=B.getCharCode("."),c=B.getCharCode(",");F[ci][i]=1;const h=B.getCharCode("Z"),m=B.getCharCode("A");for(let $=m;$<=h;$++)F[ci][$]=$-m+2;F[Ju][i]=1;const g=B.getCharCode("z"),y=B.getCharCode("a");for(let $=y;$<=g;$++)F[Ju][$]=$-y+2;F[ys][i]=1;const E=B.getCharCode("9"),I=B.getCharCode("0");for(let $=I;$<=E;$++)F[ys][$]=$-I+2;F[ys][c]=12,F[ys][l]=13;const D=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let $=0;$<D.length;$++)F[Gv][B.getCharCode(D[$])]=$;const z=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let $=0;$<z.length;$++)B.getCharCode(z[$])>0&&(F[ua][B.getCharCode(z[$])]=$);return F}const Ap=Mk(k.createInt32Array(5,256));class nd{constructor(i){this.text=i}encode(){const i=B.getCharCode(" "),l=B.getCharCode(`
`);let c=Hv.singletonList(ha.INITIAL_STATE);for(let m=0;m<this.text.length;m++){let g,y=m+1<this.text.length?this.text[m+1]:0;switch(this.text[m]){case B.getCharCode("\r"):g=y===l?2:0;break;case B.getCharCode("."):g=y===i?3:0;break;case B.getCharCode(","):g=y===i?4:0;break;case B.getCharCode(":"):g=y===i?5:0;break;default:g=0}g>0?(c=nd.updateStateListForPair(c,m,g),m++):c=this.updateStateListForChar(c,m)}return Hv.min(c,(m,g)=>m.getBitCount()-g.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,l){const c=[];for(let h of i)this.updateStateForChar(h,l,c);return nd.simplifyStates(c)}updateStateForChar(i,l,c){let h=this.text[l]&255,m=Ap[i.getMode()][h]>0,g=null;for(let y=0;y<=ua;y++){let E=Ap[y][h];if(E>0){if(g==null&&(g=i.endBinaryShift(l)),!m||y===i.getMode()||y===ys){const I=g.latchAndAppend(y,E);c.push(I)}if(!m&&Xv[i.getMode()][y]>=0){const I=g.shiftAndAppend(y,E);c.push(I)}}}if(i.getBinaryShiftByteCount()>0||Ap[i.getMode()][h]===0){let y=i.addBinaryShiftChar(l);c.push(y)}}static updateStateListForPair(i,l,c){const h=[];for(let m of i)this.updateStateForPair(m,l,c,h);return this.simplifyStates(h)}static updateStateForPair(i,l,c,h){let m=i.endBinaryShift(l);if(h.push(m.latchAndAppend(ua,c)),i.getMode()!==ua&&h.push(m.shiftAndAppend(ua,c)),c===3||c===4){let g=m.latchAndAppend(ys,16-c).latchAndAppend(ys,1);h.push(g)}if(i.getBinaryShiftByteCount()>0){let g=i.addBinaryShiftChar(l).addBinaryShiftChar(l+1);h.push(g)}}static simplifyStates(i){let l=[];for(const c of i){let h=!0;for(const m of l){if(m.isBetterThanOrEqualTo(c)){h=!1;break}c.isBetterThanOrEqualTo(m)&&(l=l.filter(g=>g!==m))}h&&l.push(c)}return l}}class Dt{constructor(){}static encodeBytes(i){return Dt.encode(i,Dt.DEFAULT_EC_PERCENT,Dt.DEFAULT_AZTEC_LAYERS)}static encode(i,l,c){let h=new nd(i).encode(),m=b.truncDivision(h.getSize()*l,100)+11,g=h.getSize()+m,y,E,I,D,z;if(c!==Dt.DEFAULT_AZTEC_LAYERS){if(y=c<0,E=Math.abs(c),E>(y?Dt.MAX_NB_BITS_COMPACT:Dt.MAX_NB_BITS))throw new w(B.format("Illegal value %s for layers",c));I=Dt.totalBitsInLayer(E,y),D=Dt.WORD_SIZE[E];let Oe=I-I%D;if(z=Dt.stuffBits(h,D),z.getSize()+m>Oe)throw new w("Data to large for user specified layer");if(y&&z.getSize()>D*64)throw new w("Data to large for user specified layer")}else{D=0,z=null;for(let Oe=0;;Oe++){if(Oe>Dt.MAX_NB_BITS)throw new w("Data too large for an Aztec code");if(y=Oe<=3,E=y?Oe+1:Oe,I=Dt.totalBitsInLayer(E,y),g>I)continue;(z==null||D!==Dt.WORD_SIZE[E])&&(D=Dt.WORD_SIZE[E],z=Dt.stuffBits(h,D));let jt=I-I%D;if(!(y&&z.getSize()>D*64)&&z.getSize()+m<=jt)break}}let $=Dt.generateCheckWords(z,I,D),Z=z.getSize()/D,re=Dt.generateModeMessage(y,E,Z),ne=(y?11:14)+E*4,he=new Int32Array(ne),ge;if(y){ge=ne;for(let Oe=0;Oe<he.length;Oe++)he[Oe]=Oe}else{ge=ne+1+2*b.truncDivision(b.truncDivision(ne,2)-1,15);let Oe=b.truncDivision(ne,2),jt=b.truncDivision(ge,2);for(let ft=0;ft<Oe;ft++){let Mn=ft+b.truncDivision(ft,15);he[Oe-ft-1]=jt-Mn-1,he[Oe+ft]=jt+Mn+1}}let Le=new ee(ge);for(let Oe=0,jt=0;Oe<E;Oe++){let ft=(E-Oe)*4+(y?9:12);for(let Mn=0;Mn<ft;Mn++){let zs=Mn*2;for(let Ln=0;Ln<2;Ln++)$.get(jt+zs+Ln)&&Le.set(he[Oe*2+Ln],he[Oe*2+Mn]),$.get(jt+ft*2+zs+Ln)&&Le.set(he[Oe*2+Mn],he[ne-1-Oe*2-Ln]),$.get(jt+ft*4+zs+Ln)&&Le.set(he[ne-1-Oe*2-Ln],he[ne-1-Oe*2-Mn]),$.get(jt+ft*6+zs+Ln)&&Le.set(he[ne-1-Oe*2-Mn],he[Oe*2+Ln])}jt+=ft*8}if(Dt.drawModeMessage(Le,y,ge,re),y)Dt.drawBullsEye(Le,b.truncDivision(ge,2),5);else{Dt.drawBullsEye(Le,b.truncDivision(ge,2),7);for(let Oe=0,jt=0;Oe<b.truncDivision(ne,2)-1;Oe+=15,jt+=16)for(let ft=b.truncDivision(ge,2)&1;ft<ge;ft+=2)Le.set(b.truncDivision(ge,2)-jt,ft),Le.set(b.truncDivision(ge,2)+jt,ft),Le.set(ft,b.truncDivision(ge,2)-jt),Le.set(ft,b.truncDivision(ge,2)+jt)}let Fe=new Wv;return Fe.setCompact(y),Fe.setSize(ge),Fe.setLayers(E),Fe.setCodeWords(Z),Fe.setMatrix(Le),Fe}static drawBullsEye(i,l,c){for(let h=0;h<c;h+=2)for(let m=l-h;m<=l+h;m++)i.set(m,l-h),i.set(m,l+h),i.set(l-h,m),i.set(l+h,m);i.set(l-c,l-c),i.set(l-c+1,l-c),i.set(l-c,l-c+1),i.set(l+c,l-c),i.set(l+c,l-c+1),i.set(l+c,l+c-1)}static generateModeMessage(i,l,c){let h=new T;return i?(h.appendBits(l-1,2),h.appendBits(c-1,6),h=Dt.generateCheckWords(h,28,4)):(h.appendBits(l-1,5),h.appendBits(c-1,11),h=Dt.generateCheckWords(h,40,4)),h}static drawModeMessage(i,l,c,h){let m=b.truncDivision(c,2);if(l)for(let g=0;g<7;g++){let y=m-3+g;h.get(g)&&i.set(y,m-5),h.get(g+7)&&i.set(m+5,y),h.get(20-g)&&i.set(y,m+5),h.get(27-g)&&i.set(m-5,y)}else for(let g=0;g<10;g++){let y=m-5+g+b.truncDivision(g,5);h.get(g)&&i.set(y,m-7),h.get(g+10)&&i.set(m+7,y),h.get(29-g)&&i.set(y,m+7),h.get(39-g)&&i.set(m-7,y)}}static generateCheckWords(i,l,c){let h=i.getSize()/c,m=new Np(Dt.getGF(c)),g=b.truncDivision(l,c),y=Dt.bitsToWords(i,c,g);m.encode(y,g-h);let E=l%c,I=new T;I.appendBits(0,E);for(const D of Array.from(y))I.appendBits(D,c);return I}static bitsToWords(i,l,c){let h=new Int32Array(c),m,g;for(m=0,g=i.getSize()/l;m<g;m++){let y=0;for(let E=0;E<l;E++)y|=i.get(m*l+E)?1<<l-E-1:0;h[m]=y}return h}static getGF(i){switch(i){case 4:return we.AZTEC_PARAM;case 6:return we.AZTEC_DATA_6;case 8:return we.AZTEC_DATA_8;case 10:return we.AZTEC_DATA_10;case 12:return we.AZTEC_DATA_12;default:throw new w("Unsupported word size "+i)}}static stuffBits(i,l){let c=new T,h=i.getSize(),m=(1<<l)-2;for(let g=0;g<h;g+=l){let y=0;for(let E=0;E<l;E++)(g+E>=h||i.get(g+E))&&(y|=1<<l-1-E);(y&m)===m?(c.appendBits(y&m,l),g--):y&m?c.appendBits(y,l):(c.appendBits(y|1,l),g--)}return c}static totalBitsInLayer(i,l){return((l?88:112)+16*i)*i}}Dt.DEFAULT_EC_PERCENT=33,Dt.DEFAULT_AZTEC_LAYERS=0,Dt.MAX_NB_BITS=32,Dt.MAX_NB_BITS_COMPACT=4,Dt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class eh{encode(i,l,c,h){return this.encodeWithHints(i,l,c,h,null)}encodeWithHints(i,l,c,h,m){let g=Cp.ISO_8859_1,y=Dt.DEFAULT_EC_PERCENT,E=Dt.DEFAULT_AZTEC_LAYERS;return m!=null&&(m.has(Lr.CHARACTER_SET)&&(g=Vv.forName(m.get(Lr.CHARACTER_SET).toString())),m.has(Lr.ERROR_CORRECTION)&&(y=b.parseInt(m.get(Lr.ERROR_CORRECTION).toString())),m.has(Lr.AZTEC_LAYERS)&&(E=b.parseInt(m.get(Lr.AZTEC_LAYERS).toString()))),eh.encodeLayers(i,l,c,h,g,y,E)}static encodeLayers(i,l,c,h,m,g,y){if(l!==de.AZTEC)throw new w("Can only encode AZTEC, but got "+l);let E=Dt.encode(B.getBytes(i,m),g,y);return eh.renderResult(E,c,h)}static renderResult(i,l,c){let h=i.getMatrix();if(h==null)throw new _e;let m=h.getWidth(),g=h.getHeight(),y=Math.max(l,m),E=Math.max(c,g),I=Math.min(y/m,E/g),D=(y-m*I)/2,z=(E-g*I)/2,$=new ee(y,E);for(let Z=0,re=z;Z<g;Z++,re+=I)for(let ne=0,he=D;ne<m;ne++,he+=I)h.get(ne,Z)&&$.setRegion(he,re,I,I);return $}}r.AbstractExpandedDecoder=fp,r.ArgumentException=x,r.ArithmeticException=Ne,r.AztecCode=Wv,r.AztecCodeReader=dt,r.AztecCodeWriter=eh,r.AztecDecoder=Se,r.AztecDetector=Ie,r.AztecDetectorResult=yt,r.AztecEncoder=Dt,r.AztecHighLevelEncoder=nd,r.AztecPoint=Ve,r.BarcodeFormat=de,r.Binarizer=N,r.BinaryBitmap=_,r.BitArray=T,r.BitMatrix=ee,r.BitSource=xp,r.BrowserAztecCodeReader=it,r.BrowserBarcodeReader=fk,r.BrowserCodeReader=J,r.BrowserDatamatrixCodeReader=pk,r.BrowserMultiFormatReader=Ek,r.BrowserPDF417Reader=Sk,r.BrowserQRCodeReader=Ak,r.BrowserQRCodeSvgWriter=xo,r.CharacterSetECI=P,r.ChecksumException=j,r.Code128Reader=Pe,r.Code39Reader=Ot,r.DataMatrixDecodedBitStreamParser=ai,r.DataMatrixReader=ii,r.DecodeHintType=L,r.DecoderResult=Re,r.DefaultGridSampler=Wr,r.DetectorResult=Lt,r.EAN13Reader=fn,r.EncodeHintType=Lr,r.Exception=p,r.FormatException=R,r.GenericGF=we,r.GenericGFPoly=ye,r.GlobalHistogramBinarizer=le,r.GridSampler=Xt,r.GridSamplerInstance=Qt,r.HTMLCanvasElementLuminanceSource=be,r.HybridBinarizer=ue,r.ITFReader=ht,r.IllegalArgumentException=w,r.IllegalStateException=_e,r.InvertedLuminanceSource=te,r.LuminanceSource=oe,r.MathUtils=ke,r.MultiFormatOneDReader=wl,r.MultiFormatReader=qv,r.MultiFormatWriter=Tk,r.NotFoundException=X,r.OneDReader=ut,r.PDF417DecodedBitStreamParser=pe,r.PDF417DecoderErrorCorrection=Lv,r.PDF417Reader=tn,r.PDF417ResultMetadata=Bv,r.PerspectiveTransform=xt,r.PlanarYUVLuminanceSource=da,r.QRCodeByteMatrix=Zu,r.QRCodeDataMask=vs,r.QRCodeDecodedBitStreamParser=mr,r.QRCodeDecoderErrorCorrectionLevel=rr,r.QRCodeDecoderFormatInformation=pn,r.QRCodeEncoder=ar,r.QRCodeEncoderQRCode=go,r.QRCodeMaskUtil=br,r.QRCodeMatrixUtil=nt,r.QRCodeMode=tt,r.QRCodeReader=oi,r.QRCodeVersion=et,r.QRCodeWriter=bl,r.RGBLuminanceSource=jp,r.RSS14Reader=yr,r.RSSExpandedReader=Te,r.ReaderException=Qu,r.ReedSolomonDecoder=Qe,r.ReedSolomonEncoder=Np,r.ReedSolomonException=Xe,r.Result=K,r.ResultMetadataType=me,r.ResultPoint=Ae,r.StringUtils=B,r.UnsupportedOperationException=q,r.VideoInputDevice=ve,r.WhiteRectangleDetector=It,r.WriterException=Zt,r.ZXingArrays=k,r.ZXingCharset=Vv,r.ZXingInteger=b,r.ZXingStandardCharsets=Cp,r.ZXingStringBuilder=V,r.ZXingStringEncoding=G,r.ZXingSystem=C,r.createAbstractExpandedDecoder=Dv,Object.defineProperty(r,"__esModule",{value:!0})})})(g0,g0.exports);var lr=g0.exports;const v$=b0(lr),w$=T2({__proto__:null,default:v$},[lr]);var n2=function(){function e(t,r,s){if(this.formatMap=new Map([[Ye.QR_CODE,lr.BarcodeFormat.QR_CODE],[Ye.AZTEC,lr.BarcodeFormat.AZTEC],[Ye.CODABAR,lr.BarcodeFormat.CODABAR],[Ye.CODE_39,lr.BarcodeFormat.CODE_39],[Ye.CODE_93,lr.BarcodeFormat.CODE_93],[Ye.CODE_128,lr.BarcodeFormat.CODE_128],[Ye.DATA_MATRIX,lr.BarcodeFormat.DATA_MATRIX],[Ye.MAXICODE,lr.BarcodeFormat.MAXICODE],[Ye.ITF,lr.BarcodeFormat.ITF],[Ye.EAN_13,lr.BarcodeFormat.EAN_13],[Ye.EAN_8,lr.BarcodeFormat.EAN_8],[Ye.PDF_417,lr.BarcodeFormat.PDF_417],[Ye.RSS_14,lr.BarcodeFormat.RSS_14],[Ye.RSS_EXPANDED,lr.BarcodeFormat.RSS_EXPANDED],[Ye.UPC_A,lr.BarcodeFormat.UPC_A],[Ye.UPC_E,lr.BarcodeFormat.UPC_E],[Ye.UPC_EAN_EXTENSION,lr.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!w$)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=s;var a=this.createZXingFormats(t),o=new Map;o.set(lr.DecodeHintType.POSSIBLE_FORMATS,a),o.set(lr.DecodeHintType.TRY_HARDER,!1),this.hints=o}return e.prototype.decodeAsync=function(t){var r=this;return new Promise(function(s,a){try{s(r.decode(t))}catch(o){a(o)}})},e.prototype.decode=function(t){var r=new lr.MultiFormatReader(this.verbose,this.hints),s=new lr.HTMLCanvasElementLuminanceSource(t),a=new lr.BinaryBitmap(new lr.HybridBinarizer(s)),o=r.decode(a);return{text:o.text,format:eA.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,s,a){t.set(r,s)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var r=[],s=0,a=t;s<a.length;s++){var o=a[s];this.formatMap.has(o)?r.push(this.formatMap.get(o)):this.logger.logError("".concat(o," is not supported by")+"ZXingHtml5QrcodeShim")}return r},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),y$=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(d){d(o)})}return new(r||(r=Promise))(function(o,d){function u(x){try{p(s.next(x))}catch(w){d(w)}}function f(x){try{p(s.throw(x))}catch(w){d(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})},b$=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},s,a,o,d;return d={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function u(p){return function(x){return f([p,x])}}function f(p){if(s)throw new TypeError("Generator is already executing.");for(;d&&(d=0,p[0]&&(r=0)),r;)try{if(s=1,a&&(o=p[0]&2?a.return:p[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,p[1])).done)return o;switch(a=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,a=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){r.label=p[1];break}if(p[0]===6&&r.label<o[1]){r.label=o[1],o=p;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(p);break}o[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(x){p=[6,x],a=0}finally{s=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},s2=function(){function e(t,r,s){if(this.formatMap=new Map([[Ye.QR_CODE,"qr_code"],[Ye.AZTEC,"aztec"],[Ye.CODABAR,"codabar"],[Ye.CODE_39,"code_39"],[Ye.CODE_93,"code_93"],[Ye.CODE_128,"code_128"],[Ye.DATA_MATRIX,"data_matrix"],[Ye.ITF,"itf"],[Ye.EAN_13,"ean_13"],[Ye.EAN_8,"ean_8"],[Ye.PDF_417,"pdf417"],[Ye.UPC_A,"upc_a"],[Ye.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=s;var a=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return y$(this,void 0,void 0,function(){var r,s;return b$(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(t)];case 1:if(r=a.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return s=this.selectLargestBarcode(r),[2,{text:s.rawValue,format:eA.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var r=null,s=0,a=0,o=t;a<o.length;a++){var d=o[a],u=d.boundingBox.width*d.boundingBox.height;u>s&&(s=u,r=d)}if(!r)throw"No largest barcode found";return r},e.prototype.createBarcodeDetectorFormats=function(t){for(var r=[],s=0,a=t;s<a.length;s++){var o=a[s];this.formatMap.has(o)?r.push(this.formatMap.get(o)):this.logger.warn("".concat(o," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,s,a){t.set(r,s)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),a2=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(d){d(o)})}return new(r||(r=Promise))(function(o,d){function u(x){try{p(s.next(x))}catch(w){d(w)}}function f(x){try{p(s.throw(x))}catch(w){d(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})},i2=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},s,a,o,d;return d={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function u(p){return function(x){return f([p,x])}}function f(p){if(s)throw new TypeError("Generator is already executing.");for(;d&&(d=0,p[0]&&(r=0)),r;)try{if(s=1,a&&(o=p[0]&2?a.return:p[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,p[1])).done)return o;switch(a=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,a=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){r.label=p[1];break}if(p[0]===6&&r.label<o[1]){r.label=o[1],o=p;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(p);break}o[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(x){p=[6,x],a=0}finally{s=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},_$=function(){function e(t,r,s,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=s,r&&s2.isSupported()?(this.primaryDecoder=new s2(t,s,a),this.secondaryDecoder=new n2(t,s,a)):this.primaryDecoder=new n2(t,s,a)}return e.prototype.decodeAsync=function(t){return a2(this,void 0,void 0,function(){var r;return i2(this,function(s){switch(s.label){case 0:r=performance.now(),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,s.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return a2(this,void 0,void 0,function(){var r,s;return i2(this,function(a){switch(a.label){case 0:r=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,a.sent()];case 3:if(s=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw s;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var r=performance.now()-t;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,r=0,s=this.executionResults;r<s.length;r++){var a=s[r];t+=a}var o=t/this.executionResults.length;console.log("".concat(o," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),Nv=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(s[o]=a[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),Kf=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(d){d(o)})}return new(r||(r=Promise))(function(o,d){function u(x){try{p(s.next(x))}catch(w){d(w)}}function f(x){try{p(s.throw(x))}catch(w){d(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})},Yf=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},s,a,o,d;return d={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function u(p){return function(x){return f([p,x])}}function f(p){if(s)throw new TypeError("Generator is already executing.");for(;d&&(d=0,p[0]&&(r=0)),r;)try{if(s=1,a&&(o=p[0]&2?a.return:p[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,p[1])).done)return o;switch(a=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,a=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){r.label=p[1];break}if(p[0]===6&&r.label<o[1]){r.label=o[1],o=p;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(p);break}o[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(x){p=[6,x],a=0}finally{s=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},rA=function(){function e(t,r){this.name=t,this.track=r}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var r={};r[this.name]=t;var s={advanced:[r]};return this.track.applyConstraints(s)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var r=t[this.name];return r}return null},e}(),N$=function(e){Nv(t,e);function t(r,s){return e.call(this,r,s)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(r){var s={};s[this.name]=r;var a={advanced:[s]};return this.track.applyConstraints(a)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),s=r[this.name];return{min:s.min,max:s.max,step:s.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(rA),j$=function(e){Nv(t,e);function t(r){return e.call(this,"zoom",r)||this}return t}(N$),C$=function(e){Nv(t,e);function t(r){return e.call(this,"torch",r)||this}return t}(rA),E$=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new j$(this.track)},e.prototype.torchFeature=function(){return new C$(this.track)},e}(),S$=function(){function e(t,r,s){this.isClosed=!1,this.parentElement=t,this.mediaStream=r,this.callbacks=s,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var r=document.createElement("video");return r.style.width="".concat(t,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var s=t.surface.clientWidth,a=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(s,a),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,r,s,a){return Kf(this,void 0,void 0,function(){var o,d;return Yf(this,function(u){switch(u.label){case 0:return o=new e(t,r,a),s.aspectRatio?(d={aspectRatio:s.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(d)]):[3,2];case 1:u.sent(),u.label=2;case 2:return o.setupSurface(),[2,o]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var r=this,s=function(){setTimeout(t,200),r.surface.removeEventListener("playing",s)};this.surface.addEventListener("playing",s),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return Kf(this,void 0,void 0,function(){return Yf(this,function(r){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(r,s){var a=t.mediaStream.getVideoTracks(),o=a.length,d=0;t.mediaStream.getVideoTracks().forEach(function(u){t.mediaStream.removeTrack(u),u.stop(),++d,d>=o&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),r())})})},e.prototype.getCapabilities=function(){return new E$(this.getFirstTrackOrFail())},e}(),A$=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,r,s){return Kf(this,void 0,void 0,function(){return Yf(this,function(a){return[2,S$.create(t,this.mediaStream,r,s)]})})},e.create=function(t){return Kf(this,void 0,void 0,function(){var r,s;return Yf(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return s=a.sent(),[2,new e(s)]}})})},e}(),o2=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(d){d(o)})}return new(r||(r=Promise))(function(o,d){function u(x){try{p(s.next(x))}catch(w){d(w)}}function f(x){try{p(s.throw(x))}catch(w){d(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})},l2=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},s,a,o,d;return d={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function u(p){return function(x){return f([p,x])}}function f(p){if(s)throw new TypeError("Generator is already executing.");for(;d&&(d=0,p[0]&&(r=0)),r;)try{if(s=1,a&&(o=p[0]&2?a.return:p[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,p[1])).done)return o;switch(a=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,a=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){r.label=p[1];break}if(p[0]===6&&r.label<o[1]){r.label=o[1],o=p;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(p);break}o[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(x){p=[6,x],a=0}finally{s=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},k$=function(){function e(){}return e.failIfNotSupported=function(){return o2(this,void 0,void 0,function(){return l2(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return o2(this,void 0,void 0,function(){return l2(this,function(r){return[2,A$.create(t)]})})},e}(),T$=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(d){d(o)})}return new(r||(r=Promise))(function(o,d){function u(x){try{p(s.next(x))}catch(w){d(w)}}function f(x){try{p(s.throw(x))}catch(w){d(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})},I$=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},s,a,o,d;return d={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function u(p){return function(x){return f([p,x])}}function f(p){if(s)throw new TypeError("Generator is already executing.");for(;d&&(d=0,p[0]&&(r=0)),r;)try{if(s=1,a&&(o=p[0]&2?a.return:p[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,p[1])).done)return o;switch(a=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,a=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){r.label=p[1];break}if(p[0]===6&&r.label<o[1]){r.label=o[1],o=p;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(p);break}o[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(x){p=[6,x],a=0}finally{s=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},R$=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Zl.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Zl.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return T$(this,void 0,void 0,function(){var t,r,s,a,o,d,u;return I$(this,function(f){switch(f.label){case 0:return t=function(p){for(var x=p.getVideoTracks(),w=0,_=x;w<_.length;w++){var j=_[w];j.enabled=!1,j.stop(),p.removeTrack(j)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=f.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(s=f.sent(),a=[],o=0,d=s;o<d.length;o++)u=d[o],u.kind==="videoinput"&&a.push({id:u.deviceId,label:u.label});return t(r),[2,a]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,r){var s=function(o){for(var d=[],u=0,f=o;u<f.length;u++){var p=f[u];p.kind==="video"&&d.push({id:p.id,label:p.label})}t(d)},a=MediaStreamTrack;a.getSources(s)})},e}(),Nr;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(Nr||(Nr={}));var P$=function(){function e(){this.state=Nr.NOT_STARTED,this.onGoingTransactionNewState=Nr.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Nr.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Nr.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Nr.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Nr.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Nr.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case Nr.UNKNOWN:throw"Transition from unknown is not allowed";case Nr.NOT_STARTED:this.failIfNewStateIs(t,[Nr.PAUSED]);break;case Nr.SCANNING:break;case Nr.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,r){for(var s=0,a=r;s<a.length;s++){var o=a[s];if(t===o)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),O$=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Nr.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Nr.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Nr.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Nr.PAUSED},e}(),D$=function(){function e(){}return e.create=function(){return new O$(new P$)},e}(),M$=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(s[o]=a[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),Jn=function(e){M$(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(p$),L$=function(){function e(t,r){this.logger=r,this.fps=Jn.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=Jn.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?tA.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Ba(this.qrbox)},e.create=function(t,r){return new e(t,r)},e}(),F$=function(){function e(t,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var s;typeof r=="boolean"?this.verbose=r===!0:r&&(s=r,this.verbose=s.verbose===!0,s.experimentalFeatures),this.logger=new x$(this.verbose),this.qrcode=new _$(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(s),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=D$.create()}return e.prototype.start=function(t,r,s,a){var o=this;if(!t)throw"cameraIdOrConfig is required";if(!s||typeof s!="function")throw"qrCodeSuccessCallback is required and should be a function.";var d;a?d=a:d=this.verbose?this.logger.log:function(){};var u=L$.create(r,this.logger);this.clearElement();var f=!1;u.videoConstraints&&(u.isMediaStreamConstraintsValid()?f=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var p=f,x=document.getElementById(this.elementId);x.clientWidth?x.clientWidth:Jn.DEFAULT_WIDTH,x.style.position="relative",this.shouldScan=!0,this.element=x;var w=this,_=this.stateManagerProxy.startTransition(Nr.SCANNING);return new Promise(function(j,N){var C=p?u.videoConstraints:w.createVideoConstraints(t);if(!C){_.cancel(),N("videoConstraints should be defined");return}var A={};(!p||u.aspectRatio)&&(A.aspectRatio=u.aspectRatio);var S={onRenderSurfaceReady:function(k,b){w.setupUi(k,b,u),w.isScanning=!0,w.foreverScan(u,s,d)}};k$.failIfNotSupported().then(function(k){k.create(C).then(function(b){return b.render(o.element,A,S).then(function(T){w.renderedCamera=T,_.execute(),j(null)}).catch(function(T){_.cancel(),N(T)})}).catch(function(b){_.cancel(),N(Zl.errorGettingUserMedia(b))})}).catch(function(k){_.cancel(),N(Zl.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Nr.PAUSED),this.showPausedState(),(Ba(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,r=function(){t.stateManagerProxy.directTransition(Nr.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(Nr.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var s=function(){if(t.element){var o=document.getElementById(Jn.SHADED_REGION_ELEMENT_ID);o&&t.element.removeChild(o)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),s(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),r.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,r){return this.scanFileV2(t,r).then(function(s){return s.decodedText})},e.prototype.scanFileV2=function(t,r){var s=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Ba(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,o){s.possiblyCloseLastScanImageFile(),s.clearElement(),s.lastScanImageFile=URL.createObjectURL(t);var d=new Image;d.onload=function(){var u=d.width,f=d.height,p=document.getElementById(s.elementId),x=p.clientWidth?p.clientWidth:Jn.DEFAULT_WIDTH,w=Math.max(p.clientHeight?p.clientHeight:f,Jn.FILE_SCAN_MIN_HEIGHT),_=s.computeCanvasDrawConfig(u,f,x,w);if(r){var j=s.createCanvasElement(x,w,"qr-canvas-visible");j.style.display="inline-block",p.appendChild(j);var N=j.getContext("2d");if(!N)throw"Unable to get 2d context from canvas";N.canvas.width=x,N.canvas.height=w,N.drawImage(d,0,0,u,f,_.x,_.y,_.width,_.height)}var C=Jn.FILE_SCAN_HIDDEN_CANVAS_PADDING,A=Math.max(d.width,_.width),S=Math.max(d.height,_.height),k=A+2*C,b=S+2*C,T=s.createCanvasElement(k,b);p.appendChild(T);var O=T.getContext("2d");if(!O)throw"Unable to get 2d context from canvas";O.canvas.width=k,O.canvas.height=b,O.drawImage(d,0,0,u,f,C,C,A,S);try{s.qrcode.decodeRobustlyAsync(T).then(function(L){a(r2.createFromQrcodeResult(L))}).catch(o)}catch(L){o("QR code parse error, error = ".concat(L))}},d.onerror=o,d.onabort=o,d.onstalled=o,d.onsuspend=o,d.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return R$.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!tA.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var r=[Ye.QR_CODE,Ye.AZTEC,Ye.CODABAR,Ye.CODE_39,Ye.CODE_93,Ye.CODE_128,Ye.DATA_MATRIX,Ye.MAXICODE,Ye.ITF,Ye.EAN_13,Ye.EAN_8,Ye.PDF_417,Ye.RSS_14,Ye.RSS_EXPANDED,Ye.UPC_A,Ye.UPC_E,Ye.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return r;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var s=[],a=0,o=t.formatsToSupport;a<o.length;a++){var d=o[a];m$(d)?s.push(d):this.logger.warn("Invalid format: ".concat(d," passed in config, ignoring."))}if(s.length===0)throw"None of formatsToSupport match supported values.";return s},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(Ba(t))return!0;if(!Ba(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(Ba(t.experimentalFeatures))return!0;var r=t.experimentalFeatures;return Ba(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,r,s){var a=this,o=s.qrbox;this.validateQrboxConfig(o);var d=this.toQrdimensions(t,r,o),u=function(p){if(p<Jn.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Jn.MIN_QR_BOX_SIZE,"px.")},f=function(p){return p>t&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),p=t),p};u(d.width),u(d.height),d.width=f(d.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,r,s){if(typeof s=="number")return{width:s,height:s};if(typeof s=="function")try{return s(t,r)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return s},e.prototype.setupUi=function(t,r,s){s.isShadedBoxEnabled()&&this.validateQrboxSize(t,r,s);var a=Ba(s.qrbox)?{width:t,height:r}:s.qrbox;this.validateQrboxConfig(a);var o=this.toQrdimensions(t,r,a);o.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var d=s.isShadedBoxEnabled()&&o.height<=r,u={x:0,y:0,width:t,height:r},f=d?this.getShadedRegionBounds(t,r,o):u,p=this.createCanvasElement(f.width,f.height),x={willReadFrequently:!0},w=p.getContext("2d",x);w.canvas.width=f.width,w.canvas.height=f.height,this.element.append(p),d&&this.possiblyInsertShadingElement(this.element,t,r,o),this.createScannerPausedUiElement(this.element),this.qrRegion=f,this.context=w,this.canvasElement=p},e.prototype.createScannerPausedUiElement=function(t){var r=document.createElement("div");r.innerText=Zl.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",t.appendChild(r),this.scannerPausedUiElement=r},e.prototype.scanContext=function(t,r){var s=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return t(a.text,r2.createFromQrcodeResult(a)),s.possiblyUpdateShaders(!0),!0}).catch(function(a){s.possiblyUpdateShaders(!1);var o=Zl.codeParseError(a);return r(o,g$.createFrom(o)),!1})},e.prototype.foreverScan=function(t,r,s){var a=this;if(this.shouldScan&&this.renderedCamera){var o=this.renderedCamera.getSurface(),d=o.videoWidth/o.clientWidth,u=o.videoHeight/o.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var f=this.qrRegion.width*d,p=this.qrRegion.height*u,x=this.qrRegion.x*d,w=this.qrRegion.y*u;this.context.drawImage(o,x,w,f,p,0,0,this.qrRegion.width,this.qrRegion.height);var _=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(t,r,s)},a.getTimeoutFps(t.fps))};this.scanContext(r,s).then(function(j){!j&&t.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(r,s).finally(function(){_()})):_()}).catch(function(j){a.logger.logError("Error happend while scanning context",j),_()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var r="facingMode",s="deviceId",a={user:!0,environment:!0},o="exact",d=function(N){if(N in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(N,"'")},u=Object.keys(t);if(u.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(u.length," keys");var f=Object.keys(t)[0];if(f!==r&&f!==s)throw"Only '".concat(r,"' and '").concat(s,"' ")+" are supported for 'cameraIdOrConfig'";if(f===r){var p=t.facingMode;if(typeof p=="string"){if(d(p))return{facingMode:p}}else if(typeof p=="object")if(o in p){if(d(p["".concat(o)]))return{facingMode:{exact:p["".concat(o)]}}}else throw"'facingMode' should be string or object with"+" ".concat(o," as key.");else{var x=typeof p;throw"Invalid type of 'facingMode' = ".concat(x)}}else{var w=t.deviceId;if(typeof w=="string")return{deviceId:w};if(typeof w=="object"){if(o in w)return{deviceId:{exact:w["".concat(o)]}};throw"'deviceId' should be string or object with"+" ".concat(o," as key.")}else{var _=typeof w;throw"Invalid type of 'deviceId' = ".concat(_)}}}var j=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(j)},e.prototype.computeCanvasDrawConfig=function(t,r,s,a){if(t<=s&&r<=a){var o=(s-t)/2,d=(a-r)/2;return{x:o,y:d,width:t,height:r}}else{var u=t,f=r;return t>s&&(r=s/t*r,t=s),r>a&&(t=a/r*t,r=a),this.logger.log("Image downsampled from "+"".concat(u,"X").concat(f)+" to ".concat(t,"X").concat(r,".")),this.computeCanvasDrawConfig(t,r,s,a)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=t?Jn.BORDER_SHADER_MATCH_COLOR:Jn.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,r,s){var a=t,o=r,d=document.createElement("canvas");return d.style.width="".concat(a,"px"),d.style.height="".concat(o,"px"),d.style.display="none",d.id=Ba(s)?"qr-canvas":s,d},e.prototype.getShadedRegionBounds=function(t,r,s){if(s.width>t||s.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-s.width)/2,y:(r-s.height)/2,width:s.width,height:s.height}},e.prototype.possiblyInsertShadingElement=function(t,r,s,a){if(!(r-a.width<1||s-a.height<1)){var o=document.createElement("div");o.style.position="absolute";var d=(r-a.width)/2,u=(s-a.height)/2;if(o.style.borderLeft="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderRight="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderTop="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderBottom="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),o.style.boxSizing="border-box",o.style.top="0px",o.style.bottom="0px",o.style.left="0px",o.style.right="0px",o.id="".concat(Jn.SHADED_REGION_ELEMENT_ID),r-a.width<11||s-a.height<11)this.hasBorderShaders=!1;else{var f=5,p=40;this.insertShaderBorders(o,p,f,-f,null,0,!0),this.insertShaderBorders(o,p,f,-f,null,0,!1),this.insertShaderBorders(o,p,f,null,-f,0,!0),this.insertShaderBorders(o,p,f,null,-f,0,!1),this.insertShaderBorders(o,f,p+f,-f,null,-f,!0),this.insertShaderBorders(o,f,p+f,null,-f,-f,!0),this.insertShaderBorders(o,f,p+f,-f,null,-f,!1),this.insertShaderBorders(o,f,p+f,null,-f,-f,!1),this.hasBorderShaders=!0}t.append(o)}},e.prototype.insertShaderBorders=function(t,r,s,a,o,d,u){var f=document.createElement("div");f.style.position="absolute",f.style.backgroundColor=Jn.BORDER_SHADER_DEFAULT_COLOR,f.style.width="".concat(r,"px"),f.style.height="".concat(s,"px"),a!==null&&(f.style.top="".concat(a,"px")),o!==null&&(f.style.bottom="".concat(o,"px")),u?f.style.left="".concat(d,"px"):f.style.right="".concat(d,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(f),t.appendChild(f)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),c2;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(c2||(c2={}));function d2({eventId:e}){var R,M,P,q;const{user:t}=wt(),[r,s]=v.useState(!1),[a,o]=v.useState(null),[d,u]=v.useState(!1),[f,p]=v.useState(!1),[x,w]=v.useState(!1),[_,j]=v.useState(""),[N,C]=v.useState(!1),A=v.useRef(null),S=rs.isNativePlatform();v.useEffect(()=>()=>{A.current&&A.current.stop().catch(()=>{})},[]),v.useEffect(()=>{if(!r||S&&!N)return;let G=!1;return(async()=>{try{for(let ee=0;ee<20&&!document.getElementById("qr-reader");ee++)await new Promise(X=>setTimeout(X,50));if(G)return;const V=new F$("qr-reader");A.current=V,await V.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},async ee=>{try{await V.stop().catch(()=>{})}finally{s(!1)}await L(ee)},()=>{})}catch(V){console.error("Error starting web scanner:",V),W.error("Erro ao acessar câmera. Use o código manual."),s(!1),w(!0)}})(),()=>{G=!0}},[r,S]);const k=async()=>{S?await b():s(!0)},b=async()=>{try{if((await Jb.requestPermissions()).camera!=="granted"){W.error("Permissão de câmera negada");return}s(!0);const B=await Jb.scan();if(B.barcodes&&B.barcodes.length>0){const V=B.barcodes[0].rawValue;await L(V)}s(!1)}catch(G){console.error("Error scanning QR code:",G),W.error("Erro ao escanear QR Code"),C(!0),s(!0)}},T=async()=>{var G,B;if(A.current)try{await A.current.stop(),(B=(G=A.current).clear)==null||B.call(G)}catch(V){console.error("Error stopping scanner:",V)}C(!1),s(!1)},O=async()=>{if(!_.trim()){W.error("Digite o código do ingresso");return}await L(_.trim()),j(""),w(!1)},L=async G=>{try{const{data:B,error:V}=await U.from("ticket_sales").select(`
          *,
          event:events!inner(id, title),
          ticket_type:ticket_types(name)
        `).eq("id",G).eq("event_id",e).eq("payment_status","completed").maybeSingle();if(V)throw V;if(!B){W.error("Ingresso não encontrado ou inválido");return}let ee=null;if(B.user_id){const{data:le}=await U.from("profiles").select("avatar_url, display_name").eq("user_id",B.user_id).maybeSingle();ee=le}if(B.validated_at){o({...B,user:ee}),u(!0),W.warning("Ingresso já foi validado anteriormente");return}const{error:X}=await U.from("ticket_sales").update({validated_at:new Date().toISOString(),validated_by:t==null?void 0:t.id}).eq("id",G);if(X)throw X;o({...B,validated_at:new Date().toISOString(),user:ee}),u(!0),W.success("Ingresso validado com sucesso!")}catch(B){console.error("Error validating ticket:",B),W.error("Erro ao validar ingresso")}};return n.jsxs(n.Fragment,{children:[n.jsxs(Y,{onClick:()=>p(!0),disabled:r,size:"sm",variant:"outline",children:[n.jsx(Cn,{className:"h-4 w-4 mr-2"}),"Validar"]}),n.jsx(zt,{open:f,onOpenChange:p,children:n.jsxs(Ft,{className:"sm:max-w-md",children:[n.jsxs(gr,{children:[n.jsx(xr,{children:"Validar Ingresso"}),n.jsx(as,{children:"Escolha como deseja validar o ingresso"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs(Y,{className:"w-full h-20 flex flex-col gap-2",onClick:()=>{p(!1),C(!1),k()},children:[n.jsx(Cn,{className:"h-6 w-6"}),n.jsx("span",{children:"Escanear QR Code"})]}),n.jsxs(Y,{variant:"outline",className:"w-full h-20 flex flex-col gap-2",onClick:()=>{p(!1),w(!0)},children:[n.jsx(x8,{className:"h-6 w-6"}),n.jsx("span",{children:"Digitar Código"})]})]})]})}),n.jsx(zt,{open:r&&(!S||N),onOpenChange:G=>!G&&T(),children:n.jsxs(Ft,{className:"sm:max-w-md",children:[n.jsxs(gr,{children:[n.jsx(xr,{children:"Escanear QR Code"}),n.jsx(as,{children:"Posicione o QR Code do ingresso na câmera"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{id:"qr-reader",className:"w-full"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Y,{variant:"outline",className:"flex-1",onClick:()=>{T(),w(!0)},children:"Código Manual"}),n.jsx(Y,{variant:"outline",onClick:T,children:n.jsx(Jr,{className:"h-4 w-4"})})]})]})]})}),n.jsx(zt,{open:x,onOpenChange:w,children:n.jsxs(Ft,{className:"sm:max-w-md",children:[n.jsxs(gr,{children:[n.jsx(xr,{children:"Código Manual"}),n.jsx(as,{children:"Digite o código do ingresso manualmente"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"manual-code",children:"Código do Ingresso"}),n.jsx(xe,{id:"manual-code",placeholder:"Cole o código aqui",value:_,onChange:G=>j(G.target.value),onKeyPress:G=>G.key==="Enter"&&O()})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Y,{variant:"outline",className:"flex-1",onClick:()=>w(!1),children:"Cancelar"}),n.jsx(Y,{className:"flex-1",onClick:O,children:"Validar"})]})]})]})}),n.jsx(zt,{open:d,onOpenChange:u,children:n.jsxs(Ft,{children:[n.jsxs(gr,{children:[n.jsx(xr,{children:a!=null&&a.validated_at&&new Date(a.validated_at).getTime()<Date.now()-1e3?"Ingresso Já Validado":"Ingresso Validado!"}),n.jsx(as,{children:"Informações do ingresso"})]}),a&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-4 p-4 bg-muted rounded-lg",children:[n.jsxs(Vt,{className:"h-16 w-16",children:[n.jsx(Yt,{src:(R=a.user)==null?void 0:R.avatar_url}),n.jsx(Wt,{children:((M=a.buyer_name)==null?void 0:M.charAt(0).toUpperCase())||"?"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-lg",children:a.buyer_name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:((P=a.user)==null?void 0:P.display_name)||a.buyer_email})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Email"}),n.jsx("p",{className:"text-sm",children:a.buyer_email})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Tipo de Ingresso"}),n.jsx("p",{className:"text-sm",children:(q=a.ticket_type)==null?void 0:q.name})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Quantidade"}),n.jsxs("p",{className:"text-sm",children:[a.quantity,"x"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Valor"}),n.jsxs("p",{className:"text-sm",children:["R$ ",a.total_amount.toFixed(2)]})]}),a.validated_at&&n.jsxs("div",{className:"pt-2 border-t",children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Validado em"}),n.jsx("p",{className:"text-sm",children:new Date(a.validated_at).toLocaleString("pt-BR")})]})]})]})]})})]})}function B$({onCreateEvent:e,onManageRegistrations:t,onViewAttendances:r}){const s=_t(),{events:a,loading:o,updateEvent:d,deleteEvent:u}=ri(),[f,p]=v.useState(null),[x,w]=v.useState(null),[_,j]=v.useState(null),[N,C]=v.useState({title:"",description:"",location:"",event_date:"",max_attendees:0}),A=a.filter(P=>P.status==="upcoming"),S=a.filter(P=>P.status==="completed"),k=a.reduce((P,q)=>P+q.current_attendees,0),b={upcoming:A.length,registrations:k,completed:S.length},T=P=>{j(null),setTimeout(()=>{p(P),C({title:P.title,description:P.description||"",location:P.location,event_date:new Date(P.event_date).toISOString().slice(0,16),max_attendees:P.max_attendees||0})},100)},O=async()=>{f&&(await d(f.id,{...N,event_date:new Date(N.event_date).toISOString()}),p(null))},L=async()=>{x&&(await u(x),w(null))},R=P=>{j(null),setTimeout(()=>{w(P)},100)},M=async P=>{await d(P,{is_live:!1,status:"completed"})};return o?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Meus Eventos"}),n.jsx(Y,{size:"sm",onClick:e,children:"+ Criar Evento"})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsx(je,{children:n.jsxs(Ee,{className:"p-4 text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-primary",children:b.upcoming}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Próximos"})]})}),n.jsx(je,{children:n.jsxs(Ee,{className:"p-4 text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-emerald-500",children:b.registrations}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Cadastros"})]})}),n.jsx(je,{children:n.jsxs(Ee,{className:"p-4 text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-orange-500",children:b.completed}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Realizados"})]})})]}),n.jsxs(Gm,{defaultValue:"upcoming",className:"space-y-4",children:[n.jsxs(Lu,{className:"grid w-full grid-cols-3",children:[n.jsx(is,{value:"upcoming",children:"Próximos"}),n.jsx(is,{value:"completed",children:"Realizados"}),n.jsx(is,{value:"all",children:"Todos"})]}),n.jsx(os,{value:"upcoming",className:"space-y-4",children:A.length>0?n.jsx(n.Fragment,{children:A.map(P=>n.jsx(je,{className:"overflow-hidden",children:n.jsxs(Ee,{className:"p-4",children:[n.jsxs("div",{className:"flex gap-3",children:[P.image_url&&n.jsx("img",{src:P.image_url,alt:P.title,className:"w-16 h-16 rounded-lg object-cover flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-medium text-foreground line-clamp-1",children:P.title}),n.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground mt-1",children:[n.jsx(kt,{className:"h-3 w-3"}),n.jsx("span",{children:new Date(P.event_date).toLocaleDateString("pt-BR")})]}),n.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[n.jsx(Tt,{className:"h-3 w-3"}),n.jsx("span",{className:"line-clamp-1",children:P.location})]})]}),n.jsxs("div",{className:"flex flex-col gap-1 items-end",children:[P.is_live&&n.jsxs(ct,{variant:"destructive",className:"mb-1",children:[n.jsx("div",{className:"h-2 w-2 bg-white rounded-full animate-pulse mr-1"}),"AO VIVO"]}),n.jsx(ct,{variant:"secondary",className:"bg-primary/10 text-primary",children:P.status==="upcoming"?"Próximo":P.status})]})]}),n.jsxs("div",{className:"flex items-center gap-1 text-sm text-emerald-600 mt-2",children:[n.jsx(tr,{className:"h-3 w-3"}),n.jsxs("span",{children:[P.current_attendees,"/",P.max_attendees||"∞"," participantes"]})]})]})]}),n.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t border-border",children:[P.is_live&&n.jsxs(Y,{variant:"destructive",size:"sm",onClick:()=>M(P.id),children:[n.jsx(Co,{className:"h-4 w-4 mr-1"}),"Encerrar Evento"]}),n.jsxs(Y,{variant:"outline",size:"sm",className:"flex-1",disabled:!P.requires_registration,onClick:()=>t==null?void 0:t(P.id),children:[n.jsx(ag,{className:"h-4 w-4 mr-1"}),"Cadastros"]}),P.has_paid_tickets&&n.jsxs(n.Fragment,{children:[n.jsxs(Y,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>s(`/event/${P.id}/sales`),children:[n.jsx(Sn,{className:"h-4 w-4 mr-1"}),"Vendas"]}),n.jsx(d2,{eventId:P.id})]}),n.jsxs(tf,{open:_===P.id,onOpenChange:q=>j(q?P.id:null),children:[n.jsx(rf,{asChild:!0,children:n.jsx(Y,{variant:"ghost",size:"sm",children:n.jsx(Uo,{className:"h-4 w-4"})})}),n.jsxs(Ld,{align:"end",children:[n.jsxs(Bn,{onClick:()=>T(P),children:[n.jsx(Aa,{className:"h-4 w-4 mr-2"}),"Editar"]}),n.jsxs(Bn,{onClick:()=>{j(null),M(P.id)},className:"text-orange-600",children:[n.jsx(Co,{className:"h-4 w-4 mr-2"}),"Encerrar Evento"]}),n.jsxs(Bn,{onClick:()=>R(P.id),className:"text-destructive",children:[n.jsx(Gn,{className:"h-4 w-4 mr-2"}),"Excluir"]})]})]})]})]})},P.id))}):n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(kt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{className:"mb-4",children:"Nenhum evento próximo"}),n.jsx(Y,{onClick:e,children:"Criar Primeiro Evento"})]})}),n.jsx(os,{value:"completed",className:"space-y-4",children:S.length>0?S.map(P=>n.jsx(je,{className:"overflow-hidden",children:n.jsxs(Ee,{className:"p-4",children:[n.jsxs("div",{className:"flex gap-3",children:[P.image_url&&n.jsx("img",{src:P.image_url,alt:P.title,className:"w-16 h-16 rounded-lg object-cover flex-shrink-0"}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-medium text-foreground line-clamp-1",children:P.title}),n.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground mt-1",children:[n.jsx(kt,{className:"h-3 w-3"}),n.jsx("span",{children:new Date(P.event_date).toLocaleDateString("pt-BR")})]}),n.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[n.jsx(Tt,{className:"h-3 w-3"}),n.jsx("span",{className:"line-clamp-1",children:P.location})]})]}),n.jsx(ct,{variant:"secondary",className:"bg-emerald-500/10 text-emerald-600",children:"Realizado"})]})})]}),n.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t border-border",children:[P.requires_registration&&n.jsxs(Y,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>t==null?void 0:t(P.id),children:[n.jsx(ag,{className:"h-4 w-4 mr-1"}),"Cadastros"]}),P.has_paid_tickets&&n.jsxs(n.Fragment,{children:[n.jsxs(Y,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>s(`/event/${P.id}/sales`),children:[n.jsx(Sn,{className:"h-4 w-4 mr-1"}),"Vendas"]}),n.jsx(d2,{eventId:P.id})]}),n.jsxs(Y,{variant:"outline",size:"sm",onClick:()=>r==null?void 0:r(P.id),children:[n.jsx(tr,{className:"h-4 w-4 mr-1"}),"Confirmações"]}),n.jsxs(tf,{open:_===P.id,onOpenChange:q=>j(q?P.id:null),children:[n.jsx(rf,{asChild:!0,children:n.jsx(Y,{variant:"ghost",size:"sm",children:n.jsx(Uo,{className:"h-4 w-4"})})}),n.jsxs(Ld,{align:"end",children:[n.jsxs(Bn,{onClick:()=>T(P),children:[n.jsx(Aa,{className:"h-4 w-4 mr-2"}),"Editar"]}),n.jsxs(Bn,{onClick:()=>{j(null),M(P.id)},className:"text-orange-600",children:[n.jsx(Co,{className:"h-4 w-4 mr-2"}),"Encerrar Evento"]}),n.jsxs(Bn,{onClick:()=>R(P.id),className:"text-destructive",children:[n.jsx(Gn,{className:"h-4 w-4 mr-2"}),"Excluir"]})]})]})]})]})},P.id)):n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(kt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"Nenhum evento realizado ainda"})]})}),n.jsx(os,{value:"all",className:"space-y-4",children:a.length>0?a.map(P=>n.jsx(je,{className:"overflow-hidden",children:n.jsxs(Ee,{className:"p-4",children:[n.jsxs("div",{className:"flex gap-3",children:[P.image_url&&n.jsx("img",{src:P.image_url,alt:P.title,className:"w-16 h-16 rounded-lg object-cover flex-shrink-0"}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-medium text-foreground line-clamp-1",children:P.title}),n.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground mt-1",children:[n.jsx(kt,{className:"h-3 w-3"}),n.jsx("span",{children:new Date(P.event_date).toLocaleDateString("pt-BR")})]}),n.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[n.jsx(Tt,{className:"h-3 w-3"}),n.jsx("span",{className:"line-clamp-1",children:P.location})]})]}),n.jsxs("div",{className:"flex flex-col gap-1 items-end",children:[P.is_live&&n.jsxs(ct,{variant:"destructive",className:"mb-1",children:[n.jsx("div",{className:"h-2 w-2 bg-white rounded-full animate-pulse mr-1"}),"AO VIVO"]}),n.jsx(ct,{variant:"secondary",className:P.status==="completed"?"bg-emerald-500/10 text-emerald-600":"bg-primary/10 text-primary",children:P.status==="upcoming"?"Próximo":P.status==="completed"?"Realizado":P.status})]})]})})]}),n.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t border-border",children:[P.is_live&&n.jsxs(Y,{variant:"destructive",size:"sm",onClick:()=>M(P.id),children:[n.jsx(Co,{className:"h-4 w-4 mr-1"}),"Encerrar Evento"]}),n.jsxs(tf,{open:_===P.id,onOpenChange:q=>j(q?P.id:null),children:[n.jsx(rf,{asChild:!0,children:n.jsxs(Y,{variant:"outline",size:"sm",className:"flex-1",children:[n.jsx(Uo,{className:"h-4 w-4 mr-2"}),"Gerenciar"]})}),n.jsxs(Ld,{align:"end",children:[n.jsxs(Bn,{onClick:()=>t==null?void 0:t(P.id),children:[n.jsx(ag,{className:"h-4 w-4 mr-2"}),"Ver Cadastros"]}),P.has_paid_tickets&&n.jsxs(Bn,{onClick:()=>s(`/event/${P.id}/sales`),children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),"Ver Vendas"]}),n.jsxs(Bn,{onClick:()=>r==null?void 0:r(P.id),children:[n.jsx(tr,{className:"h-4 w-4 mr-2"}),"Ver Confirmações"]}),n.jsxs(Bn,{onClick:()=>T(P),children:[n.jsx(Aa,{className:"h-4 w-4 mr-2"}),"Editar"]}),n.jsxs(Bn,{onClick:()=>{j(null),M(P.id)},className:"text-orange-600",children:[n.jsx(Co,{className:"h-4 w-4 mr-2"}),"Encerrar Evento"]}),n.jsxs(Bn,{onClick:()=>R(P.id),className:"text-destructive",children:[n.jsx(Gn,{className:"h-4 w-4 mr-2"}),"Excluir"]})]})]})]})]})},P.id)):n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(kt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{className:"mb-4",children:"Nenhum evento criado ainda"}),n.jsx(Y,{onClick:e,children:"Criar Primeiro Evento"})]})})]}),n.jsx(zt,{open:!!f,onOpenChange:P=>!P&&p(null),children:n.jsxs(Ft,{children:[n.jsx(gr,{children:n.jsx(xr,{children:"Editar Evento"})}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"title",children:"Título"}),n.jsx(xe,{id:"title",value:N.title,onChange:P=>C({...N,title:P.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"description",children:"Descrição"}),n.jsx(An,{id:"description",value:N.description,onChange:P=>C({...N,description:P.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"location",children:"Local"}),n.jsx(xe,{id:"location",value:N.location,onChange:P=>C({...N,location:P.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"event_date",children:"Data e Hora"}),n.jsx(xe,{id:"event_date",type:"datetime-local",value:N.event_date,onChange:P=>C({...N,event_date:P.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"max_attendees",children:"Máximo de Participantes"}),n.jsx(xe,{id:"max_attendees",type:"number",value:N.max_attendees,onChange:P=>C({...N,max_attendees:parseInt(P.target.value)})})]})]}),n.jsxs("div",{className:"flex gap-2 justify-end",children:[n.jsx(Y,{variant:"outline",onClick:()=>p(null),children:"Cancelar"}),n.jsx(Y,{onClick:O,children:"Salvar Alterações"})]})]})}),n.jsx(Jo,{open:!!x,onOpenChange:P=>!P&&w(null),children:n.jsxs(Qi,{children:[n.jsxs(el,{children:[n.jsx(tl,{children:"Confirmar Exclusão"}),n.jsx(rl,{children:"Tem certeza que deseja excluir este evento? Esta ação não pode ser desfeita."})]}),n.jsxs(Zi,{children:[n.jsx(eo,{children:"Cancelar"}),n.jsx(Ji,{onClick:L,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Excluir"})]})]})})]})}function z$(){const e=_t(),{signOut:t}=wt(),{organizerData:r,updateOrganizerProfile:s}=ri(),[a,o]=v.useState(!1),[d,u]=v.useState({whatsapp_url:"",instagram_url:"",playlist_url:"",location_url:"",website_url:"",show_whatsapp:!1,show_instagram:!1,show_playlist:!1,show_location:!1,show_website:!1}),[f,p]=v.useState({notify_new_registrations:!0,notify_event_reminders:!0,public_page_visible:!0,show_statistics:!0}),[x,w]=v.useState(!1),[_,j]=v.useState(""),[N,C]=v.useState("");v.useEffect(()=>{r&&(u({whatsapp_url:r.whatsapp_url||"",instagram_url:r.instagram_url||"",playlist_url:r.playlist_url||"",location_url:r.location_url||"",website_url:r.website_url||"",show_whatsapp:r.show_whatsapp||!1,show_instagram:r.show_instagram||!1,show_playlist:r.show_playlist||!1,show_location:r.show_location||!1,show_website:r.show_website||!1}),p({notify_new_registrations:r.notify_new_registrations??!0,notify_event_reminders:r.notify_event_reminders??!0,public_page_visible:r.public_page_visible??!0,show_statistics:r.show_statistics??!0}))},[r]);const A=async()=>{await t()},S=async()=>{try{const{data:{session:T}}=await U.auth.getSession();if(!T){W.error("Você precisa estar logado para deletar sua conta");return}const{error:O}=await U.functions.invoke("delete-user",{headers:{Authorization:`Bearer ${T.access_token}`}});if(O){console.error("Error deleting account:",O),W.error("Erro ao deletar conta. Tente novamente.");return}W.success("Conta deletada com sucesso!"),await U.auth.signOut(),window.location.href="/auth"}catch(T){console.error("Error:",T),W.error("Erro ao deletar conta. Tente novamente.")}},k=async(T,O)=>{const L={...f,[T]:O};p(L);try{await s({[T]:O}),W.success("Configuração atualizada!")}catch(R){console.error("Error updating setting:",R),W.error("Erro ao atualizar configuração"),p(f)}},b=async()=>{if(_!==N){W.error("As senhas não coincidem");return}if(_.length<6){W.error("A senha deve ter pelo menos 6 caracteres");return}try{const{error:T}=await U.auth.updateUser({password:_});if(T)throw T;W.success("Senha alterada com sucesso!"),w(!1),j(""),C("")}catch(T){console.error("Error changing password:",T),W.error("Erro ao alterar senha")}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(E1,{className:"h-5 w-5 text-primary"}),n.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Configurações"})]}),n.jsxs(je,{children:[n.jsx(qe,{children:n.jsxs(We,{className:"flex items-center gap-2",children:[n.jsx(hs,{className:"h-4 w-4"}),"Conta"]})}),n.jsxs(Ee,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-foreground",children:"Editar Perfil"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Alterar informações pessoais"})]}),n.jsx(Y,{variant:"outline",size:"sm",onClick:()=>e("/organizer-profile"),children:"Editar"})]}),n.jsx(Ms,{}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-foreground",children:"Alterar Senha"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Atualizar sua senha de acesso"})]}),n.jsxs(zt,{open:x,onOpenChange:w,children:[n.jsx(OE,{asChild:!0,children:n.jsxs(Y,{variant:"outline",size:"sm",children:[n.jsx(kx,{className:"h-4 w-4 mr-1"}),"Alterar"]})}),n.jsxs(Ft,{children:[n.jsxs(gr,{children:[n.jsx(xr,{children:"Alterar Senha"}),n.jsx(as,{children:"Digite sua nova senha. Ela deve ter pelo menos 6 caracteres."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"new-password",children:"Nova Senha"}),n.jsx(xe,{id:"new-password",type:"password",value:_,onChange:T=>j(T.target.value),placeholder:"Digite a nova senha"})]}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"confirm-password",children:"Confirmar Senha"}),n.jsx(xe,{id:"confirm-password",type:"password",value:N,onChange:T=>C(T.target.value),placeholder:"Confirme a nova senha"})]})]}),n.jsxs(Du,{children:[n.jsx(Y,{variant:"outline",onClick:()=>w(!1),children:"Cancelar"}),n.jsx(Y,{onClick:b,children:"Salvar Nova Senha"})]})]})]})]})]})]}),n.jsxs(je,{children:[n.jsx(qe,{children:n.jsxs(We,{className:"flex items-center gap-2",children:[n.jsx(Ga,{className:"h-4 w-4"}),"Notificações"]})}),n.jsxs(Ee,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-foreground",children:"Novos Cadastros"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Receber quando alguém se cadastrar"})]}),n.jsx(Ar,{checked:f.notify_new_registrations,onCheckedChange:T=>k("notify_new_registrations",T)})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-foreground",children:"Lembrete de Eventos"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Notificar 1 hora antes do evento"})]}),n.jsx(Ar,{checked:f.notify_event_reminders,onCheckedChange:T=>k("notify_event_reminders",T)})]})]})]}),n.jsxs(je,{children:[n.jsx(qe,{children:n.jsxs(We,{className:"flex items-center gap-2",children:[n.jsx(kx,{className:"h-4 w-4"}),"Privacidade"]})}),n.jsxs(Ee,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-foreground",children:"Página Pública"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Permitir que outros vejam sua página"})]}),n.jsx(Ar,{checked:f.public_page_visible,onCheckedChange:T=>k("public_page_visible",T)})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-foreground",children:"Mostrar Estatísticas"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Exibir número de seguidores e eventos"})]}),n.jsx(Ar,{checked:f.show_statistics,onCheckedChange:T=>k("show_statistics",T)})]})]})]}),n.jsxs(je,{children:[n.jsx(qe,{children:n.jsxs(We,{className:"flex items-center gap-2",children:[n.jsx(hy,{className:"h-4 w-4"}),"Ajuda e Suporte"]})}),n.jsxs(Ee,{className:"space-y-4",children:[n.jsxs(Y,{variant:"outline",className:"w-full justify-start",children:[n.jsx(hy,{className:"h-4 w-4 mr-2"}),"Central de Ajuda"]}),n.jsxs(Y,{variant:"outline",className:"w-full justify-start",children:[n.jsx(Ga,{className:"h-4 w-4 mr-2"}),"Reportar Problema"]})]})]}),n.jsx(je,{children:n.jsx(Ee,{className:"p-6",children:n.jsxs(Jo,{children:[n.jsx(Hf,{asChild:!0,children:n.jsxs(Y,{variant:"outline",className:"w-full text-orange-600 hover:text-orange-700 hover:bg-orange-50",children:[n.jsx(Nj,{className:"h-4 w-4 mr-2"}),"Sair da Conta"]})}),n.jsxs(Qi,{children:[n.jsxs(el,{children:[n.jsx(tl,{children:"Confirmar Logout"}),n.jsx(rl,{children:"Tem certeza que deseja sair da sua conta? Você precisará fazer login novamente para acessar."})]}),n.jsxs(Zi,{children:[n.jsx(eo,{children:"Cancelar"}),n.jsx(Ji,{onClick:A,children:"Sair"})]})]})]})})}),n.jsxs(je,{className:"border-destructive/20",children:[n.jsx(qe,{children:n.jsxs(We,{className:"flex items-center gap-2 text-destructive",children:[n.jsx(Gn,{className:"h-4 w-4"}),"Zona de Perigo"]})}),n.jsx(Ee,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs(je,{children:[n.jsx(qe,{children:n.jsx(We,{children:"Ações Rápidas"})}),n.jsxs(Ee,{className:"space-y-3",children:[n.jsxs(Y,{variant:"outline",className:"w-full justify-start",onClick:()=>window.open("/registrations","_blank"),children:[n.jsx(tr,{className:"h-4 w-4 mr-2"}),"Ver Todos os Cadastros"]}),n.jsxs(Y,{variant:"outline",className:"w-full justify-start",children:[n.jsx(Xo,{className:"h-4 w-4 mr-2"}),"Exportar Dados"]})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-foreground",children:"Excluir Conta"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Esta ação não pode ser desfeita. Todos os seus dados serão permanentemente removidos."})]}),n.jsxs(Jo,{children:[n.jsx(Hf,{asChild:!0,children:n.jsxs(Y,{variant:"destructive",size:"sm",children:[n.jsx(Gn,{className:"h-4 w-4 mr-2"}),"Excluir Conta"]})}),n.jsxs(Qi,{children:[n.jsxs(el,{children:[n.jsx(tl,{children:"Excluir Conta Permanentemente"}),n.jsx(rl,{children:"Esta ação é irreversível. Todos os seus eventos, cadastros e dados serão permanentemente excluídos. Você poderá criar uma nova conta a qualquer momento com o mesmo email."})]}),n.jsxs(Zi,{children:[n.jsx(eo,{children:"Cancelar"}),n.jsx(Ji,{onClick:S,className:"bg-destructive hover:bg-destructive/90",children:"Excluir Definitivamente"})]})]})]})]})})]})]})}const U$={text:Yh,email:Au,phone:Bc,date:kt,select:j1,checkbox:Aj,photo:Hi,file:Ec};function $$({fields:e,onChange:t}){const[r,s]=v.useState(null),a=()=>{const f={id:`field_${Date.now()}`,type:"text",label:"Novo Campo",required:!1};t([...e,f]),s(f.id)},o=f=>{t(e.filter(p=>p.id!==f))},d=(f,p)=>{t(e.map(x=>x.id===f?{...x,...p}:x))},u=(f,p)=>{const x=[...e],w=p==="up"?f-1:f+1;w<0||w>=x.length||([x[f],x[w]]=[x[w],x[f]],t(x))};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure os campos que deseja coletar dos participantes"}),n.jsxs(Y,{onClick:a,size:"sm",variant:"outline",children:[n.jsx(zc,{className:"h-4 w-4 mr-1"}),"Adicionar Campo"]})]}),e.length===0?n.jsx(je,{children:n.jsxs(Ee,{className:"py-8 text-center text-muted-foreground",children:[n.jsx(Yh,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),n.jsx("p",{className:"text-sm",children:"Nenhum campo personalizado ainda"}),n.jsx("p",{className:"text-xs mt-1",children:'Clique em "Adicionar Campo" para começar'})]})}):n.jsx("div",{className:"space-y-2",children:e.map((f,p)=>{const x=U$[f.type],w=r===f.id;return n.jsx(je,{className:"overflow-hidden",children:n.jsx(Ee,{className:"p-4",children:w?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(ie,{className:"text-xs",children:"Tipo do Campo"}),n.jsxs(Zs,{value:f.type,onValueChange:_=>d(f.id,{type:_}),children:[n.jsx(Es,{className:"h-9",children:n.jsx(Js,{})}),n.jsxs(Ss,{children:[n.jsx(qt,{value:"text",children:"Texto"}),n.jsx(qt,{value:"email",children:"Email"}),n.jsx(qt,{value:"phone",children:"Telefone"}),n.jsx(qt,{value:"date",children:"Data"}),n.jsx(qt,{value:"select",children:"Seleção Única"}),n.jsx(qt,{value:"checkbox",children:"Múltipla Escolha"}),n.jsx(qt,{value:"photo",children:"Upload de Foto"}),n.jsx(qt,{value:"file",children:"Upload de Arquivo"})]})]})]}),n.jsxs("div",{children:[n.jsx(ie,{className:"text-xs",children:"Nome do Campo"}),n.jsx(xe,{value:f.label,onChange:_=>d(f.id,{label:_.target.value}),placeholder:"Ex: Nome completo",className:"h-9"})]})]}),(f.type==="select"||f.type==="checkbox")&&n.jsxs("div",{children:[n.jsx(ie,{className:"text-xs",children:f.type==="select"?"Opções (pressione Enter para nova linha)":"Opções para selecionar (pressione Enter para nova linha)"}),n.jsx("textarea",{value:(f.options||[]).join(`
`),onChange:_=>d(f.id,{options:_.target.value.split(`
`).filter(j=>j.trim())}),onKeyDown:_=>{if(_.key==="Enter"){_.preventDefault(),_.stopPropagation();const j=_.currentTarget,N=j.selectionStart??j.value.length,C=j.selectionEnd??j.value.length,A=j.value.slice(0,N)+`
`+j.value.slice(C);d(f.id,{options:A.split(`
`).filter(S=>S.trim())}),setTimeout(()=>{try{j.setSelectionRange(N+1,N+1)}catch{}},0)}},placeholder:`Digite uma opção e pressione Enter
Segunda opção
Terceira opção`,className:"w-full min-h-[100px] px-3 py-2 text-sm rounded-md border border-input bg-background resize-y",rows:4}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:f.type==="checkbox"?"Participante poderá selecionar múltiplas opções":"Participante poderá selecionar apenas uma opção"})]}),f.type==="photo"&&n.jsx("div",{className:"rounded-lg border border-border bg-surface/30 p-3",children:n.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.jsx(Hi,{className:"h-3 w-3 inline mr-1"}),"Participante poderá enviar uma foto (JPG, PNG, até 5MB)"]})}),f.type==="file"&&n.jsx("div",{className:"rounded-lg border border-border bg-surface/30 p-3",children:n.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.jsx(Ec,{className:"h-3 w-3 inline mr-1"}),"Participante poderá enviar um arquivo (PDF, DOC, até 10MB)"]})}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ar,{checked:f.required,onCheckedChange:_=>d(f.id,{required:_})}),n.jsx(ie,{className:"text-xs",children:"Campo obrigatório"})]}),n.jsx(Y,{onClick:()=>s(null),size:"sm",variant:"outline",children:"Concluir"})]})]}):n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx(Y,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>u(p,"up"),disabled:p===0,children:n.jsx(my,{className:"h-3 w-3"})}),n.jsx(Y,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>u(p,"down"),disabled:p===e.length-1,children:n.jsx(my,{className:"h-3 w-3"})})]}),n.jsx(x,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium",children:f.label}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[f.type==="text"&&"Texto",f.type==="email"&&"Email",f.type==="phone"&&"Telefone",f.type==="date"&&"Data",f.type==="select"&&"Seleção Única",f.type==="checkbox"&&"Múltipla Escolha",f.type==="photo"&&"Upload de Foto",f.type==="file"&&"Upload de Arquivo",f.required&&" • Obrigatório",f.options&&f.options.length>0&&` • ${f.options.length} opções`]})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(Y,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>s(f.id),children:n.jsx(Yh,{className:"h-3 w-3"})}),n.jsx(Y,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:()=>o(f.id),children:n.jsx(Gn,{className:"h-3 w-3"})})]})]})})},f.id)})}),n.jsxs("div",{className:"rounded-lg border border-border bg-surface/50 p-4 space-y-2",children:[n.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.jsx("strong",{children:"Dica:"}),' Os campos "Nome", "Email" e "Telefone" já são coletados por padrão. Use campos personalizados para informações adicionais específicas do seu evento.']}),n.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[n.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[n.jsx(Yh,{className:"h-3 w-3"})," Texto livre"]}),n.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[n.jsx(j1,{className:"h-3 w-3"})," Escolha única"]}),n.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[n.jsx(Aj,{className:"h-3 w-3"})," Múltiplas opções"]}),n.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[n.jsx(Hi,{className:"h-3 w-3"})," Fotos"]}),n.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[n.jsx(Ec,{className:"h-3 w-3"})," Arquivos"]})]})]})]})}function nA({open:e,onOpenChange:t,fields:r,onSave:s}){const[a,o]=v.useState(r),d=()=>{s(a),t(!1)};return n.jsx(zt,{open:e,onOpenChange:t,children:n.jsxs(Ft,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[n.jsxs(gr,{children:[n.jsxs(xr,{className:"flex items-center gap-2",children:[n.jsx(Ec,{className:"h-5 w-5"}),"Configurar Formulário de Cadastro"]}),n.jsx(as,{children:"Personalize os campos que serão coletados dos participantes do evento. Nome, email e telefone já são campos padrão."})]}),n.jsx("div",{className:"py-4",children:n.jsx($$,{fields:a,onChange:o})}),n.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[n.jsx(Y,{variant:"outline",onClick:()=>t(!1),children:"Cancelar"}),n.jsx(Y,{onClick:d,children:"Salvar Formulário"})]})]})})}const q$=Cu("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),$u=v.forwardRef(({className:e,variant:t,...r},s)=>n.jsx("div",{ref:s,role:"alert",className:Be(q$({variant:t}),e),...r}));$u.displayName="Alert";const sA=v.forwardRef(({className:e,...t},r)=>n.jsx("h5",{ref:r,className:Be("mb-1 font-medium leading-none tracking-tight",e),...t}));sA.displayName="AlertTitle";const qu=v.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Be("text-sm [&_p]:leading-relaxed",e),...t}));qu.displayName="AlertDescription";const u2=[{value:"facebook",label:"Meta Pixel (Facebook/Instagram)",icon:"📘"},{value:"google_ads",label:"Google Ads",icon:"🔍"},{value:"tiktok",label:"TikTok Pixel",icon:"🎵"},{value:"linkedin",label:"LinkedIn Insight Tag",icon:"💼"},{value:"twitter",label:"Twitter Pixel",icon:"🐦"},{value:"custom",label:"Pixel Personalizado",icon:"⚙️"}];function V$({eventId:e}){const[t,r]=v.useState([]),[s,a]=v.useState(!0),[o,d]=v.useState(!1),[u,f]=v.useState(null),[p,x]=v.useState({platform:"",pixel_id:"",is_active:!0});v.useEffect(()=>{w()},[e]);const w=async()=>{try{a(!0);const{data:S,error:k}=await U.from("event_pixels").select("*").eq("event_id",e).order("created_at",{ascending:!1});if(k)throw k;r(S||[])}catch(S){console.error("Error loading pixels:",S),W.error("Erro ao carregar pixels")}finally{a(!1)}},_=S=>{S?(f(S),x({platform:S.platform,pixel_id:S.pixel_id,is_active:S.is_active})):(f(null),x({platform:"",pixel_id:"",is_active:!0})),d(!0)},j=async()=>{try{if(!p.platform||!p.pixel_id){W.error("Preencha todos os campos obrigatórios");return}if(u){const{error:S}=await U.from("event_pixels").update({platform:p.platform,pixel_id:p.pixel_id,is_active:p.is_active}).eq("id",u.id);if(S)throw S;W.success("Pixel atualizado com sucesso")}else{const{error:S}=await U.from("event_pixels").insert({event_id:e,platform:p.platform,pixel_id:p.pixel_id,is_active:p.is_active});if(S)throw S;W.success("Pixel adicionado com sucesso")}d(!1),w()}catch(S){console.error("Error saving pixel:",S),W.error(S.message||"Erro ao salvar pixel")}},N=async S=>{if(confirm("Tem certeza que deseja remover este pixel?"))try{const{error:k}=await U.from("event_pixels").delete().eq("id",S);if(k)throw k;W.success("Pixel removido com sucesso"),w()}catch(k){console.error("Error deleting pixel:",k),W.error("Erro ao remover pixel")}},C=async S=>{try{const{error:k}=await U.from("event_pixels").update({is_active:!S.is_active}).eq("id",S.id);if(k)throw k;W.success(S.is_active?"Pixel desativado":"Pixel ativado"),w()}catch(k){console.error("Error toggling pixel:",k),W.error("Erro ao alterar status do pixel")}},A=S=>u2.find(k=>k.value===S)||{label:S,icon:"📊"};return s?n.jsx(je,{children:n.jsx(Ee,{className:"p-6",children:n.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando pixels..."})})}):n.jsxs(n.Fragment,{children:[n.jsxs(je,{children:[n.jsx(qe,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(We,{children:"Integrações de Pixels"}),n.jsx(Qr,{children:"Adicione pixels de rastreamento para monitorar conversões e criar audiências"})]}),n.jsxs(Y,{onClick:()=>_(),size:"sm",children:[n.jsx(zc,{className:"h-4 w-4 mr-2"}),"Adicionar Pixel"]})]})}),n.jsxs(Ee,{className:"space-y-4",children:[n.jsxs($u,{children:[n.jsx(Su,{className:"h-4 w-4"}),n.jsx(qu,{children:"Os pixels serão disparados quando usuários visualizarem o evento, se registrarem e comprarem ingressos."})]}),t.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(xy,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),n.jsx("p",{className:"text-sm",children:"Nenhum pixel configurado ainda"}),n.jsx("p",{className:"text-xs mt-1",children:"Adicione pixels para rastrear suas conversões"})]}):n.jsx("div",{className:"space-y-3",children:t.map(S=>{const k=A(S.platform);return n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[n.jsx("span",{className:"text-2xl",children:k.icon}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium",children:k.label}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["ID: ",S.pixel_id]})]}),n.jsx(Ar,{checked:S.is_active,onCheckedChange:()=>C(S)})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[n.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>_(S),children:n.jsx(xy,{className:"h-4 w-4"})}),n.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>N(S.id),children:n.jsx(Gn,{className:"h-4 w-4"})})]})]},S.id)})})]})]}),n.jsx(zt,{open:o,onOpenChange:d,children:n.jsxs(Ft,{children:[n.jsxs(gr,{children:[n.jsx(xr,{children:u?"Editar Pixel":"Adicionar Pixel"}),n.jsx(as,{children:"Configure o pixel de rastreamento para este evento"})]}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"platform",children:"Plataforma"}),n.jsxs(Zs,{value:p.platform,onValueChange:S=>x({...p,platform:S}),children:[n.jsx(Es,{id:"platform",children:n.jsx(Js,{placeholder:"Selecione a plataforma"})}),n.jsx(Ss,{children:u2.map(S=>n.jsxs(qt,{value:S.value,children:[S.icon," ",S.label]},S.value))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"pixel_id",children:"ID do Pixel"}),n.jsx(xe,{id:"pixel_id",placeholder:"Ex: 1234567890",value:p.pixel_id,onChange:S=>x({...p,pixel_id:S.target.value})}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Cole o ID do pixel fornecido pela plataforma"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ar,{id:"active",checked:p.is_active,onCheckedChange:S=>x({...p,is_active:S})}),n.jsx(ie,{htmlFor:"active",children:"Pixel ativo"})]})]}),n.jsxs(Du,{children:[n.jsx(Y,{variant:"outline",onClick:()=>d(!1),children:"Cancelar"}),n.jsx(Y,{onClick:j,children:u?"Atualizar":"Adicionar"})]})]})})]})}function W$({ticketTypes:e,ticketSettings:t,onTicketTypesChange:r,onTicketSettingsChange:s,termsAccepted:a,onTermsAccepted:o,organizerId:d,eventId:u}){const[f,p]=v.useState(null),[x,w]=v.useState(!1),[_,j]=v.useState(!1);_t();const N=()=>{const b={id:Date.now().toString(),name:"",description:"",price:0,quantity:100,minQuantity:1,maxQuantity:10};p(b),w(!0)},C=b=>{p({...b}),w(!0)},A=()=>{if(!f)return;const b=e.findIndex(T=>T.id===f.id);if(b>=0){const T=[...e];T[b]=f,r(T)}else r([...e,f]);w(!1),p(null)},S=b=>{r(e.filter(T=>T.id!==b))},k=b=>{const T=b*t.platformFeePercentage/100,O=b*t.paymentProcessingFeePercentage/100+t.paymentProcessingFeeFixed,L=T+O;return t.feePayer==="buyer"?{subtotal:b,fees:L,total:b+L,organizerReceives:b}:{subtotal:b,fees:L,total:b,organizerReceives:b-L}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs(je,{children:[n.jsxs(qe,{children:[n.jsx(We,{className:"text-sm",children:"Configurações de Taxas"}),n.jsx(Qr,{children:"Defina quem paga as taxas da plataforma e processamento"})]}),n.jsxs(Ee,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ie,{className:"mb-2 block",children:"Quem paga as taxas?"}),n.jsxs(Ui,{value:t.feePayer,onValueChange:b=>s({...t,feePayer:b}),children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(an,{value:"buyer",id:"buyer"}),n.jsx(ie,{htmlFor:"buyer",className:"cursor-pointer font-normal",children:"Comprador (taxa adicionada ao valor do ingresso)"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(an,{value:"organizer",id:"organizer"}),n.jsx(ie,{htmlFor:"organizer",className:"cursor-pointer font-normal",children:"Organizador (taxa descontada do valor recebido)"})]})]})]}),n.jsxs($u,{children:[n.jsx(g8,{className:"h-4 w-4"}),n.jsx(qu,{className:"text-xs",children:n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Taxa da Plataforma:"})," ",t.platformFeePercentage,"% por ingresso"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Taxa de Processamento:"})," ",t.paymentProcessingFeePercentage,"% + R$ ",t.paymentProcessingFeeFixed.toFixed(2)]})]})})]}),e.length>0&&n.jsxs("div",{className:"bg-muted p-3 rounded-lg text-xs space-y-1",children:[n.jsxs("p",{className:"font-semibold mb-2",children:["Exemplo com ingresso de R$ ",e[0].price.toFixed(2),":"]}),(()=>{const b=k(e[0].price);return n.jsxs(n.Fragment,{children:[n.jsxs("p",{children:["Valor do ingresso: R$ ",b.subtotal.toFixed(2)]}),n.jsxs("p",{children:["Taxas totais: R$ ",b.fees.toFixed(2)]}),n.jsx("p",{className:"font-semibold text-primary",children:t.feePayer==="buyer"?`Comprador paga: R$ ${b.total.toFixed(2)}`:`Organizador recebe: R$ ${b.organizerReceives.toFixed(2)}`})]})})()]})]})]}),n.jsxs(je,{children:[n.jsx(qe,{children:n.jsx(We,{className:"text-sm",children:"Formas de Pagamento"})}),n.jsxs(Ee,{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(ie,{htmlFor:"pix",children:"PIX"}),n.jsx(Ar,{id:"pix",checked:t.acceptsPix,onCheckedChange:b=>s({...t,acceptsPix:b})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(ie,{htmlFor:"credit",children:"Cartão de Crédito"}),n.jsx(Ar,{id:"credit",checked:t.acceptsCreditCard,onCheckedChange:b=>s({...t,acceptsCreditCard:b})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(ie,{htmlFor:"debit",children:"Cartão de Débito"}),n.jsx(Ar,{id:"debit",checked:t.acceptsDebitCard,onCheckedChange:b=>s({...t,acceptsDebitCard:b})})]}),t.acceptsCreditCard&&n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"installments",children:"Máximo de Parcelas"}),n.jsxs(Zs,{value:t.maxInstallments.toString(),onValueChange:b=>s({...t,maxInstallments:parseInt(b)}),children:[n.jsx(Es,{children:n.jsx(Js,{})}),n.jsx(Ss,{children:[1,2,3,4,5,6,7,8,9,10,11,12].map(b=>n.jsxs(qt,{value:b.toString(),children:[b,"x"]},b))})]})]})]})]}),n.jsxs(je,{children:[n.jsx(qe,{children:n.jsx(We,{className:"text-sm",children:"Política de Cancelamento"})}),n.jsx(Ee,{children:n.jsx(An,{placeholder:"Exemplo: Cancelamento com reembolso total até 7 dias antes do evento. Após esse período, não haverá reembolso.",value:t.cancellationPolicy,onChange:b=>s({...t,cancellationPolicy:b.target.value}),rows:3})})]}),n.jsxs(je,{children:[n.jsx(qe,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(We,{className:"text-sm",children:"Tipos de Ingressos / Lotes"}),n.jsx(Qr,{children:"Configure os diferentes tipos e lotes de ingressos"})]}),n.jsxs(Y,{size:"sm",onClick:N,children:[n.jsx(zc,{className:"h-4 w-4 mr-1"}),"Adicionar"]})]})}),n.jsx(Ee,{children:e.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx("p",{className:"mb-2",children:"Nenhum tipo de ingresso configurado"}),n.jsx(Y,{variant:"outline",size:"sm",onClick:N,children:"Criar Primeiro Lote"})]}):n.jsx("div",{className:"space-y-3",children:e.map(b=>n.jsx(je,{children:n.jsx(Ee,{className:"p-4",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-semibold",children:b.name}),b.description&&n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:b.description}),n.jsxs("div",{className:"flex gap-4 mt-2 text-sm",children:[n.jsxs("span",{className:"text-primary font-semibold",children:["R$ ",b.price.toFixed(2)]}),n.jsxs("span",{className:"text-muted-foreground",children:[b.quantity," ingressos"]}),n.jsxs("span",{className:"text-muted-foreground",children:["Min: ",b.minQuantity," / Máx: ",b.maxQuantity]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>C(b),children:n.jsx(b8,{className:"h-4 w-4"})}),n.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>S(b.id),children:n.jsx(Gn,{className:"h-4 w-4"})})]})]})})},b.id))})})]}),u&&e.length>0&&n.jsx(V$,{eventId:u}),n.jsx(je,{children:n.jsx(Ee,{className:"pt-6",children:n.jsxs("div",{className:"flex items-start space-x-2",children:[n.jsx(Ar,{id:"terms",checked:a,onCheckedChange:o}),n.jsxs("div",{className:"flex-1",children:[n.jsxs(ie,{htmlFor:"terms",className:"cursor-pointer",children:["Aceito os"," ",n.jsx("button",{type:"button",onClick:()=>j(!0),className:"text-primary underline",children:"termos e condições"})," ","para venda de ingressos na plataforma"]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Ao aceitar, você concorda com as taxas de serviço e políticas da plataforma"})]})]})})}),n.jsx(zt,{open:x,onOpenChange:w,children:n.jsxs(Ft,{className:"max-w-md max-h-[90vh] overflow-y-auto",children:[n.jsxs(gr,{children:[n.jsx(xr,{children:f&&e.find(b=>b.id===f.id)?"Editar Ingresso":"Novo Ingresso"}),n.jsx(as,{children:"Configure as informações do tipo de ingresso ou lote"})]}),f&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"ticket-name",children:"Nome do Lote *"}),n.jsx(xe,{id:"ticket-name",placeholder:"Ex: 1º Lote, VIP, Pista...",value:f.name,onChange:b=>p({...f,name:b.target.value})})]}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"ticket-description",children:"Descrição"}),n.jsx(An,{id:"ticket-description",placeholder:"Descreva o que inclui neste ingresso...",value:f.description,onChange:b=>p({...f,description:b.target.value}),rows:2})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"ticket-price",children:"Preço (R$) *"}),n.jsx(xe,{id:"ticket-price",type:"number",step:"0.01",min:"0",value:f.price,onChange:b=>p({...f,price:parseFloat(b.target.value)||0})})]}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"ticket-quantity",children:"Quantidade *"}),n.jsx(xe,{id:"ticket-quantity",type:"number",min:"1",value:f.quantity,onChange:b=>p({...f,quantity:parseInt(b.target.value)||1})})]})]}),n.jsx(Ms,{}),n.jsxs("div",{children:[n.jsx(ie,{className:"mb-2 block",children:"Período de Vendas (Opcional)"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"sales-start",className:"text-xs text-muted-foreground",children:"Início das Vendas"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx(xe,{id:"sales-start",type:"date",value:f.salesStartDate||"",onChange:b=>p({...f,salesStartDate:b.target.value})}),n.jsx(xe,{type:"time",value:f.salesStartTime||"",onChange:b=>p({...f,salesStartTime:b.target.value})})]})]}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"sales-end",className:"text-xs text-muted-foreground",children:"Fim das Vendas"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx(xe,{id:"sales-end",type:"date",value:f.salesEndDate||"",onChange:b=>p({...f,salesEndDate:b.target.value})}),n.jsx(xe,{type:"time",value:f.salesEndTime||"",onChange:b=>p({...f,salesEndTime:b.target.value})})]})]})]})]}),n.jsx(Ms,{}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"min-qty",children:"Mín. por Compra"}),n.jsx(xe,{id:"min-qty",type:"number",min:"1",value:f.minQuantity,onChange:b=>p({...f,minQuantity:parseInt(b.target.value)||1})})]}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"max-qty",children:"Máx. por Compra"}),n.jsx(xe,{id:"max-qty",type:"number",min:"1",value:f.maxQuantity,onChange:b=>p({...f,maxQuantity:parseInt(b.target.value)||1})})]})]}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsx(Y,{type:"button",variant:"outline",className:"flex-1",onClick:()=>w(!1),children:"Cancelar"}),n.jsx(Y,{type:"button",className:"flex-1",onClick:A,disabled:!f.name||f.price<=0,children:"Salvar"})]})]})]})}),n.jsx(zt,{open:_,onOpenChange:j,children:n.jsxs(Ft,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[n.jsx(gr,{children:n.jsx(xr,{children:"Termos e Condições - Venda de Ingressos"})}),n.jsxs("div",{className:"space-y-4 text-sm",children:[n.jsxs("section",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"1. Taxas e Repasses"}),n.jsxs("p",{className:"text-muted-foreground",children:["A plataforma cobra uma taxa de serviço de ",t.platformFeePercentage,"% sobre cada ingresso vendido, além da taxa de processamento de pagamento de ",t.paymentProcessingFeePercentage,"% + R$ ",t.paymentProcessingFeeFixed.toFixed(2)," por transação."]})]}),n.jsxs("section",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"2. Repasse de Valores"}),n.jsx("p",{className:"text-muted-foreground",children:"Os valores das vendas serão repassados ao organizador em até 30 dias após a realização do evento, descontadas as taxas aplicáveis (se o organizador for o pagador das taxas)."})]}),n.jsxs("section",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"3. Responsabilidades do Organizador"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground",children:[n.jsx("li",{children:"Garantir a realização do evento conforme anunciado"}),n.jsx("li",{children:"Respeitar a política de cancelamento estabelecida"}),n.jsx("li",{children:"Fornecer suporte aos participantes"}),n.jsx("li",{children:"Manter dados fiscais atualizados para emissão de notas fiscais"})]})]}),n.jsxs("section",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"4. Cancelamentos e Reembolsos"}),n.jsx("p",{className:"text-muted-foreground",children:"Em caso de cancelamento do evento, o organizador deve solicitar o cancelamento na plataforma e os valores serão reembolsados aos participantes de acordo com a política estabelecida. As taxas da plataforma não são reembolsáveis."})]}),n.jsxs("section",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"5. Processamento de Pagamentos"}),n.jsx("p",{className:"text-muted-foreground",children:"Os pagamentos são processados centralmente pela plataforma através do Stripe. Você não precisa ter uma conta Stripe - a plataforma gerencia todos os pagamentos e repassa os valores para você."})]}),n.jsxs("section",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"6. Dados para Recebimento"}),n.jsx("p",{className:"text-muted-foreground",children:"Para receber os pagamentos, você precisa fornecer seus dados bancários e fiscais (CPF/CNPJ) através da plataforma. Os valores serão transferidos diretamente para sua conta."})]})]}),n.jsx("div",{className:"flex justify-end gap-2 pt-4",children:n.jsx(Y,{variant:"outline",onClick:()=>j(!1),children:"Fechar"})})]})})]})}function H$({open:e,onOpenChange:t,eventId:r,eventTitle:s,shareUrl:a,onViewEvent:o}){const[d,u]=v.useState(!1),f=async()=>{try{await navigator.clipboard.writeText(a),u(!0),W.success("Link copiado!"),setTimeout(()=>u(!1),2e3)}catch{W.error("Erro ao copiar link")}},p=async()=>{if(navigator.share)try{await navigator.share({title:s,text:`Confira este evento: ${s}`,url:a})}catch{console.log("Compartilhamento cancelado")}else f(),W.info("Use o botão 'Copiar Link' para compartilhar")};return n.jsx(zt,{open:e,onOpenChange:t,children:n.jsxs(Ft,{className:"max-w-sm mx-auto",children:[n.jsx(gr,{children:n.jsx(xr,{className:"text-center text-xl",children:"🎉 Evento Criado com Sucesso!"})}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsx("p",{className:"text-center text-muted-foreground",children:"Seu evento está pronto! Compartilhe com seus participantes."}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs(Y,{onClick:f,variant:"outline",className:"w-full justify-start gap-2",children:[n.jsx(bj,{className:"h-4 w-4"}),d?"Link Copiado!":"Copiar Link"]}),n.jsxs(Y,{onClick:p,variant:"outline",className:"w-full justify-start gap-2",children:[n.jsx(ks,{className:"h-4 w-4"}),"Compartilhar Evento"]}),n.jsxs(Y,{onClick:o,className:"w-full justify-start gap-2 btn-glow",children:[n.jsx(Ko,{className:"h-4 w-4"}),"Ver Evento"]})]}),n.jsx(Y,{onClick:()=>t(!1),variant:"ghost",className:"w-full",children:"Fechar"})]})]})})}var sp="Popover",[aA]=qr(sp,[ao]),Vu=ao(),[G$,co]=aA(sp),iA=e=>{const{__scopePopover:t,children:r,open:s,defaultOpen:a,onOpenChange:o,modal:d=!1}=e,u=Vu(t),f=v.useRef(null),[p,x]=v.useState(!1),[w,_]=sa({prop:s,defaultProp:a??!1,onChange:o,caller:sp});return n.jsx(L1,{...u,children:n.jsx(G$,{scope:t,contentId:un(),triggerRef:f,open:w,onOpenChange:_,onOpenToggle:v.useCallback(()=>_(j=>!j),[_]),hasCustomAnchor:p,onCustomAnchorAdd:v.useCallback(()=>x(!0),[]),onCustomAnchorRemove:v.useCallback(()=>x(!1),[]),modal:d,children:r})})};iA.displayName=sp;var oA="PopoverAnchor",X$=v.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=co(oA,r),o=Vu(r),{onCustomAnchorAdd:d,onCustomAnchorRemove:u}=a;return v.useEffect(()=>(d(),()=>u()),[d,u]),n.jsx(Tu,{...o,...s,ref:t})});X$.displayName=oA;var lA="PopoverTrigger",cA=v.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=co(lA,r),o=Vu(r),d=at(t,a.triggerRef),u=n.jsx(He.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":mA(a.open),...s,ref:d,onClick:De(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?u:n.jsx(Tu,{asChild:!0,...o,children:u})});cA.displayName=lA;var jv="PopoverPortal",[K$,Y$]=aA(jv,{forceMount:void 0}),dA=e=>{const{__scopePopover:t,forceMount:r,children:s,container:a}=e,o=co(jv,t);return n.jsx(K$,{scope:t,forceMount:r,children:n.jsx(Vr,{present:r||o.open,children:n.jsx(Fc,{asChild:!0,container:a,children:s})})})};dA.displayName=jv;var Oc="PopoverContent",uA=v.forwardRef((e,t)=>{const r=Y$(Oc,e.__scopePopover),{forceMount:s=r.forceMount,...a}=e,o=co(Oc,e.__scopePopover);return n.jsx(Vr,{present:s||o.open,children:o.modal?n.jsx(Z$,{...a,ref:t}):n.jsx(J$,{...a,ref:t})})});uA.displayName=Oc;var Q$=Wi("PopoverContent.RemoveScroll"),Z$=v.forwardRef((e,t)=>{const r=co(Oc,e.__scopePopover),s=v.useRef(null),a=at(t,s),o=v.useRef(!1);return v.useEffect(()=>{const d=s.current;if(d)return zm(d)},[]),n.jsx(Ou,{as:Q$,allowPinchZoom:!0,children:n.jsx(hA,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:De(e.onCloseAutoFocus,d=>{var u;d.preventDefault(),o.current||(u=r.triggerRef.current)==null||u.focus()}),onPointerDownOutside:De(e.onPointerDownOutside,d=>{const u=d.detail.originalEvent,f=u.button===0&&u.ctrlKey===!0,p=u.button===2||f;o.current=p},{checkForDefaultPrevented:!1}),onFocusOutside:De(e.onFocusOutside,d=>d.preventDefault(),{checkForDefaultPrevented:!1})})})}),J$=v.forwardRef((e,t)=>{const r=co(Oc,e.__scopePopover),s=v.useRef(!1),a=v.useRef(!1);return n.jsx(hA,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var d,u;(d=e.onCloseAutoFocus)==null||d.call(e,o),o.defaultPrevented||(s.current||(u=r.triggerRef.current)==null||u.focus(),o.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:o=>{var f,p;(f=e.onInteractOutside)==null||f.call(e,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const d=o.target;((p=r.triggerRef.current)==null?void 0:p.contains(d))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),hA=v.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:d,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:p,onInteractOutside:x,...w}=e,_=co(Oc,r),j=Vu(r);return Fm(),n.jsx(Pu,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:o,children:n.jsx(dl,{asChild:!0,disableOutsidePointerEvents:d,onInteractOutside:x,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:p,onDismiss:()=>_.onOpenChange(!1),children:n.jsx(_m,{"data-state":mA(_.open),role:"dialog",id:_.contentId,...j,...w,ref:t,style:{...w.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),fA="PopoverClose",eq=v.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=co(fA,r);return n.jsx(He.button,{type:"button",...s,ref:t,onClick:De(e.onClick,()=>a.onOpenChange(!1))})});eq.displayName=fA;var tq="PopoverArrow",rq=v.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=Vu(r);return n.jsx(Nm,{...a,...s,ref:t})});rq.displayName=tq;function mA(e){return e?"open":"closed"}var nq=iA,sq=cA,aq=dA,pA=uA;const iq=nq,oq=sq,gA=v.forwardRef(({className:e,align:t="center",sideOffset:r=4,...s},a)=>n.jsx(aq,{children:n.jsx(pA,{ref:a,align:t,sideOffset:r,className:Be("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));gA.displayName=pA.displayName;var h2=1,lq=.9,cq=.8,dq=.17,Ag=.1,kg=.999,uq=.9999,hq=.99,fq=/[\\\/_+.#"@\[\(\{&]/,mq=/[\\\/_+.#"@\[\(\{&]/g,pq=/[\s-]/,xA=/[\s-]/g;function x0(e,t,r,s,a,o,d){if(o===t.length)return a===e.length?h2:hq;var u=`${a},${o}`;if(d[u]!==void 0)return d[u];for(var f=s.charAt(o),p=r.indexOf(f,a),x=0,w,_,j,N;p>=0;)w=x0(e,t,r,s,p+1,o+1,d),w>x&&(p===a?w*=h2:fq.test(e.charAt(p-1))?(w*=cq,j=e.slice(a,p-1).match(mq),j&&a>0&&(w*=Math.pow(kg,j.length))):pq.test(e.charAt(p-1))?(w*=lq,N=e.slice(a,p-1).match(xA),N&&a>0&&(w*=Math.pow(kg,N.length))):(w*=dq,a>0&&(w*=Math.pow(kg,p-a))),e.charAt(p)!==t.charAt(o)&&(w*=uq)),(w<Ag&&r.charAt(p-1)===s.charAt(o+1)||s.charAt(o+1)===s.charAt(o)&&r.charAt(p-1)!==s.charAt(o))&&(_=x0(e,t,r,s,p+1,o+2,d),_*Ag>w&&(w=_*Ag)),w>x&&(x=w),p=r.indexOf(f,p+1);return d[u]=x,x}function f2(e){return e.toLowerCase().replace(xA," ")}function gq(e,t,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,x0(e,t,f2(e),f2(t),0,0,{})}var gd='[cmdk-group=""]',Tg='[cmdk-group-items=""]',xq='[cmdk-group-heading=""]',vA='[cmdk-item=""]',m2=`${vA}:not([aria-disabled="true"])`,v0="cmdk-item-select",Fl="data-value",vq=(e,t,r)=>gq(e,t,r),wA=v.createContext(void 0),Wu=()=>v.useContext(wA),yA=v.createContext(void 0),Cv=()=>v.useContext(yA),bA=v.createContext(void 0),_A=v.forwardRef((e,t)=>{let r=Bl(()=>{var H,J;return{search:"",value:(J=(H=e.value)!=null?H:e.defaultValue)!=null?J:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),s=Bl(()=>new Set),a=Bl(()=>new Map),o=Bl(()=>new Map),d=Bl(()=>new Set),u=NA(e),{label:f,children:p,value:x,onValueChange:w,filter:_,shouldFilter:j,loop:N,disablePointerSelection:C=!1,vimBindings:A=!0,...S}=e,k=un(),b=un(),T=un(),O=v.useRef(null),L=kq();al(()=>{if(x!==void 0){let H=x.trim();r.current.value=H,R.emit()}},[x]),al(()=>{L(6,V)},[]);let R=v.useMemo(()=>({subscribe:H=>(d.current.add(H),()=>d.current.delete(H)),snapshot:()=>r.current,setState:(H,J,K)=>{var ae,de,se,me;if(!Object.is(r.current[H],J)){if(r.current[H]=J,H==="search")B(),q(),L(1,G);else if(H==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let Re=document.getElementById(T);Re?Re.focus():(ae=document.getElementById(k))==null||ae.focus()}if(L(7,()=>{var Re;r.current.selectedItemId=(Re=ee())==null?void 0:Re.id,R.emit()}),K||L(5,V),((de=u.current)==null?void 0:de.value)!==void 0){let Re=J??"";(me=(se=u.current).onValueChange)==null||me.call(se,Re);return}}R.emit()}},emit:()=>{d.current.forEach(H=>H())}}),[]),M=v.useMemo(()=>({value:(H,J,K)=>{var ae;J!==((ae=o.current.get(H))==null?void 0:ae.value)&&(o.current.set(H,{value:J,keywords:K}),r.current.filtered.items.set(H,P(J,K)),L(2,()=>{q(),R.emit()}))},item:(H,J)=>(s.current.add(H),J&&(a.current.has(J)?a.current.get(J).add(H):a.current.set(J,new Set([H]))),L(3,()=>{B(),q(),r.current.value||G(),R.emit()}),()=>{o.current.delete(H),s.current.delete(H),r.current.filtered.items.delete(H);let K=ee();L(4,()=>{B(),(K==null?void 0:K.getAttribute("id"))===H&&G(),R.emit()})}),group:H=>(a.current.has(H)||a.current.set(H,new Set),()=>{o.current.delete(H),a.current.delete(H)}),filter:()=>u.current.shouldFilter,label:f||e["aria-label"],getDisablePointerSelection:()=>u.current.disablePointerSelection,listId:k,inputId:T,labelId:b,listInnerRef:O}),[]);function P(H,J){var K,ae;let de=(ae=(K=u.current)==null?void 0:K.filter)!=null?ae:vq;return H?de(H,r.current.search,J):0}function q(){if(!r.current.search||u.current.shouldFilter===!1)return;let H=r.current.filtered.items,J=[];r.current.filtered.groups.forEach(ae=>{let de=a.current.get(ae),se=0;de.forEach(me=>{let Re=H.get(me);se=Math.max(Re,se)}),J.push([ae,se])});let K=O.current;X().sort((ae,de)=>{var se,me;let Re=ae.getAttribute("id"),ze=de.getAttribute("id");return((se=H.get(ze))!=null?se:0)-((me=H.get(Re))!=null?me:0)}).forEach(ae=>{let de=ae.closest(Tg);de?de.appendChild(ae.parentElement===de?ae:ae.closest(`${Tg} > *`)):K.appendChild(ae.parentElement===K?ae:ae.closest(`${Tg} > *`))}),J.sort((ae,de)=>de[1]-ae[1]).forEach(ae=>{var de;let se=(de=O.current)==null?void 0:de.querySelector(`${gd}[${Fl}="${encodeURIComponent(ae[0])}"]`);se==null||se.parentElement.appendChild(se)})}function G(){let H=X().find(K=>K.getAttribute("aria-disabled")!=="true"),J=H==null?void 0:H.getAttribute(Fl);R.setState("value",J||void 0)}function B(){var H,J,K,ae;if(!r.current.search||u.current.shouldFilter===!1){r.current.filtered.count=s.current.size;return}r.current.filtered.groups=new Set;let de=0;for(let se of s.current){let me=(J=(H=o.current.get(se))==null?void 0:H.value)!=null?J:"",Re=(ae=(K=o.current.get(se))==null?void 0:K.keywords)!=null?ae:[],ze=P(me,Re);r.current.filtered.items.set(se,ze),ze>0&&de++}for(let[se,me]of a.current)for(let Re of me)if(r.current.filtered.items.get(Re)>0){r.current.filtered.groups.add(se);break}r.current.filtered.count=de}function V(){var H,J,K;let ae=ee();ae&&(((H=ae.parentElement)==null?void 0:H.firstChild)===ae&&((K=(J=ae.closest(gd))==null?void 0:J.querySelector(xq))==null||K.scrollIntoView({block:"nearest"})),ae.scrollIntoView({block:"nearest"}))}function ee(){var H;return(H=O.current)==null?void 0:H.querySelector(`${vA}[aria-selected="true"]`)}function X(){var H;return Array.from(((H=O.current)==null?void 0:H.querySelectorAll(m2))||[])}function le(H){let J=X()[H];J&&R.setState("value",J.getAttribute(Fl))}function ue(H){var J;let K=ee(),ae=X(),de=ae.findIndex(me=>me===K),se=ae[de+H];(J=u.current)!=null&&J.loop&&(se=de+H<0?ae[ae.length-1]:de+H===ae.length?ae[0]:ae[de+H]),se&&R.setState("value",se.getAttribute(Fl))}function oe(H){let J=ee(),K=J==null?void 0:J.closest(gd),ae;for(;K&&!ae;)K=H>0?Sq(K,gd):Aq(K,gd),ae=K==null?void 0:K.querySelector(m2);ae?R.setState("value",ae.getAttribute(Fl)):ue(H)}let te=()=>le(X().length-1),be=H=>{H.preventDefault(),H.metaKey?te():H.altKey?oe(1):ue(1)},ve=H=>{H.preventDefault(),H.metaKey?le(0):H.altKey?oe(-1):ue(-1)};return v.createElement(He.div,{ref:t,tabIndex:-1,...S,"cmdk-root":"",onKeyDown:H=>{var J;(J=S.onKeyDown)==null||J.call(S,H);let K=H.nativeEvent.isComposing||H.keyCode===229;if(!(H.defaultPrevented||K))switch(H.key){case"n":case"j":{A&&H.ctrlKey&&be(H);break}case"ArrowDown":{be(H);break}case"p":case"k":{A&&H.ctrlKey&&ve(H);break}case"ArrowUp":{ve(H);break}case"Home":{H.preventDefault(),le(0);break}case"End":{H.preventDefault(),te();break}case"Enter":{H.preventDefault();let ae=ee();if(ae){let de=new Event(v0);ae.dispatchEvent(de)}}}}},v.createElement("label",{"cmdk-label":"",htmlFor:M.inputId,id:M.labelId,style:Iq},f),ap(e,H=>v.createElement(yA.Provider,{value:R},v.createElement(wA.Provider,{value:M},H))))}),wq=v.forwardRef((e,t)=>{var r,s;let a=un(),o=v.useRef(null),d=v.useContext(bA),u=Wu(),f=NA(e),p=(s=(r=f.current)==null?void 0:r.forceMount)!=null?s:d==null?void 0:d.forceMount;al(()=>{if(!p)return u.item(a,d==null?void 0:d.id)},[p]);let x=jA(a,o,[e.value,e.children,o],e.keywords),w=Cv(),_=to(L=>L.value&&L.value===x.current),j=to(L=>p||u.filter()===!1?!0:L.search?L.filtered.items.get(a)>0:!0);v.useEffect(()=>{let L=o.current;if(!(!L||e.disabled))return L.addEventListener(v0,N),()=>L.removeEventListener(v0,N)},[j,e.onSelect,e.disabled]);function N(){var L,R;C(),(R=(L=f.current).onSelect)==null||R.call(L,x.current)}function C(){w.setState("value",x.current,!0)}if(!j)return null;let{disabled:A,value:S,onSelect:k,forceMount:b,keywords:T,...O}=e;return v.createElement(He.div,{ref:Za(o,t),...O,id:a,"cmdk-item":"",role:"option","aria-disabled":!!A,"aria-selected":!!_,"data-disabled":!!A,"data-selected":!!_,onPointerMove:A||u.getDisablePointerSelection()?void 0:C,onClick:A?void 0:N},e.children)}),yq=v.forwardRef((e,t)=>{let{heading:r,children:s,forceMount:a,...o}=e,d=un(),u=v.useRef(null),f=v.useRef(null),p=un(),x=Wu(),w=to(j=>a||x.filter()===!1?!0:j.search?j.filtered.groups.has(d):!0);al(()=>x.group(d),[]),jA(d,u,[e.value,e.heading,f]);let _=v.useMemo(()=>({id:d,forceMount:a}),[a]);return v.createElement(He.div,{ref:Za(u,t),...o,"cmdk-group":"",role:"presentation",hidden:w?void 0:!0},r&&v.createElement("div",{ref:f,"cmdk-group-heading":"","aria-hidden":!0,id:p},r),ap(e,j=>v.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?p:void 0},v.createElement(bA.Provider,{value:_},j))))}),bq=v.forwardRef((e,t)=>{let{alwaysRender:r,...s}=e,a=v.useRef(null),o=to(d=>!d.search);return!r&&!o?null:v.createElement(He.div,{ref:Za(a,t),...s,"cmdk-separator":"",role:"separator"})}),_q=v.forwardRef((e,t)=>{let{onValueChange:r,...s}=e,a=e.value!=null,o=Cv(),d=to(p=>p.search),u=to(p=>p.selectedItemId),f=Wu();return v.useEffect(()=>{e.value!=null&&o.setState("search",e.value)},[e.value]),v.createElement(He.input,{ref:t,...s,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":f.listId,"aria-labelledby":f.labelId,"aria-activedescendant":u,id:f.inputId,type:"text",value:a?e.value:d,onChange:p=>{a||o.setState("search",p.target.value),r==null||r(p.target.value)}})}),Nq=v.forwardRef((e,t)=>{let{children:r,label:s="Suggestions",...a}=e,o=v.useRef(null),d=v.useRef(null),u=to(p=>p.selectedItemId),f=Wu();return v.useEffect(()=>{if(d.current&&o.current){let p=d.current,x=o.current,w,_=new ResizeObserver(()=>{w=requestAnimationFrame(()=>{let j=p.offsetHeight;x.style.setProperty("--cmdk-list-height",j.toFixed(1)+"px")})});return _.observe(p),()=>{cancelAnimationFrame(w),_.unobserve(p)}}},[]),v.createElement(He.div,{ref:Za(o,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":u,"aria-label":s,id:f.listId},ap(e,p=>v.createElement("div",{ref:Za(d,f.listInnerRef),"cmdk-list-sizer":""},p)))}),jq=v.forwardRef((e,t)=>{let{open:r,onOpenChange:s,overlayClassName:a,contentClassName:o,container:d,...u}=e;return v.createElement(J1,{open:r,onOpenChange:s},v.createElement(ev,{container:d},v.createElement($m,{"cmdk-overlay":"",className:a}),v.createElement(qm,{"aria-label":e.label,"cmdk-dialog":"",className:o},v.createElement(_A,{ref:t,...u}))))}),Cq=v.forwardRef((e,t)=>to(r=>r.filtered.count===0)?v.createElement(He.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Eq=v.forwardRef((e,t)=>{let{progress:r,children:s,label:a="Loading...",...o}=e;return v.createElement(He.div,{ref:t,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},ap(e,d=>v.createElement("div",{"aria-hidden":!0},d)))}),Kn=Object.assign(_A,{List:Nq,Item:wq,Input:_q,Group:yq,Separator:bq,Dialog:jq,Empty:Cq,Loading:Eq});function Sq(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function Aq(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function NA(e){let t=v.useRef(e);return al(()=>{t.current=e}),t}var al=typeof window>"u"?v.useEffect:v.useLayoutEffect;function Bl(e){let t=v.useRef();return t.current===void 0&&(t.current=e()),t}function to(e){let t=Cv(),r=()=>e(t.snapshot());return v.useSyncExternalStore(t.subscribe,r,r)}function jA(e,t,r,s=[]){let a=v.useRef(),o=Wu();return al(()=>{var d;let u=(()=>{var p;for(let x of r){if(typeof x=="string")return x.trim();if(typeof x=="object"&&"current"in x)return x.current?(p=x.current.textContent)==null?void 0:p.trim():a.current}})(),f=s.map(p=>p.trim());o.value(e,u,f),(d=t.current)==null||d.setAttribute(Fl,u),a.current=u}),a}var kq=()=>{let[e,t]=v.useState(),r=Bl(()=>new Map);return al(()=>{r.current.forEach(s=>s()),r.current=new Map},[e]),(s,a)=>{r.current.set(s,a),t({})}};function Tq(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function ap({asChild:e,children:t},r){return e&&v.isValidElement(t)?v.cloneElement(Tq(t),{ref:t.ref},r(t.props.children)):r(t)}var Iq={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const CA=v.forwardRef(({className:e,...t},r)=>n.jsx(Kn,{ref:r,className:Be("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));CA.displayName=Kn.displayName;const EA=v.forwardRef(({className:e,...t},r)=>n.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[n.jsx(nu,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),n.jsx(Kn.Input,{ref:r,className:Be("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));EA.displayName=Kn.Input.displayName;const Rq=v.forwardRef(({className:e,...t},r)=>n.jsx(Kn.List,{ref:r,className:Be("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));Rq.displayName=Kn.List.displayName;const SA=v.forwardRef((e,t)=>n.jsx(Kn.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));SA.displayName=Kn.Empty.displayName;const AA=v.forwardRef(({className:e,...t},r)=>n.jsx(Kn.Group,{ref:r,className:Be("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));AA.displayName=Kn.Group.displayName;const Pq=v.forwardRef(({className:e,...t},r)=>n.jsx(Kn.Separator,{ref:r,className:Be("-mx-1 h-px bg-border",e),...t}));Pq.displayName=Kn.Separator.displayName;const kA=v.forwardRef(({className:e,...t},r)=>n.jsx(Kn.Item,{ref:r,className:Be("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));kA.displayName=Kn.Item.displayName;function ip({value:e,onChange:t,placeholder:r="Selecione categorias..."}){const s=e||[],a=d=>{s.includes(d)?t(s.filter(u=>u!==d)):t([...s,d])},o=d=>{t(s.filter(u=>u!==d))};return n.jsxs("div",{className:"space-y-2",children:[n.jsxs(iq,{children:[n.jsx(oq,{asChild:!0,children:n.jsxs(Y,{variant:"outline",role:"combobox",className:"w-full justify-between",children:[s.length>0?n.jsxs("span",{children:[s.length," categoria",s.length>1?"s":""," selecionada",s.length>1?"s":""]}):n.jsx("span",{className:"text-muted-foreground",children:r}),n.jsx(u8,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),n.jsx(gA,{className:"w-full p-0",align:"start",children:n.jsxs(CA,{children:[n.jsx(EA,{placeholder:"Buscar categoria..."}),n.jsx(SA,{children:"Nenhuma categoria encontrada."}),n.jsx(AA,{className:"max-h-64 overflow-auto",children:a0.map(d=>n.jsxs(kA,{onSelect:()=>a(d.value),children:[n.jsx(Os,{className:Be("mr-2 h-4 w-4",s.includes(d.value)?"opacity-100":"opacity-0")}),d.label]},d.value))})]})})]}),s.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(d=>{const u=a0.find(f=>f.value===d);return u?n.jsxs(ct,{variant:"secondary",className:"gap-1",children:[u.label,n.jsx("button",{type:"button",onClick:()=>o(d),className:"ml-1 hover:bg-muted rounded-full",children:n.jsx(Jr,{className:"h-3 w-3"})})]},d):null})})]})}function TA(){const[e,t]=v.useState({isNativeApp:!1,isWebBrowser:!0,isMobileWeb:!1,platform:"web"});return v.useEffect(()=>{const r=rs.isNativePlatform(),s=rs.getPlatform(),a=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);t({isNativeApp:r,isWebBrowser:!r,isMobileWeb:!r&&a,platform:s})},[]),e}function Oq({featureName:e="venda de ingressos pela plataforma",description:t="Esta funcionalidade está disponível apenas através do navegador web. Para continuar, acesse pelo computador ou abra este link no navegador do seu celular."}){const r=()=>{const a=window.location.href;navigator.clipboard.writeText(a).then(()=>{W.success("Link copiado! Cole no navegador para continuar.")}).catch(()=>{W.error("Erro ao copiar link")})},s=()=>{const a=window.location.href;window.open(a,"_blank")};return n.jsxs($u,{className:"border-amber-500/50 bg-amber-500/10",children:[n.jsx(Su,{className:"h-4 w-4 text-amber-500"}),n.jsx(sA,{className:"text-amber-500 font-semibold",children:"Recurso disponível apenas no navegador"}),n.jsxs(qu,{className:"space-y-3 mt-2",children:[n.jsxs("p",{className:"text-sm text-foreground/80",children:["A funcionalidade de ",n.jsx("strong",{children:e})," requer acesso através do navegador web."]}),n.jsx("p",{className:"text-sm text-foreground/80",children:t}),n.jsxs("div",{className:"flex flex-col gap-2 mt-4",children:[n.jsxs(Y,{variant:"outline",size:"sm",onClick:r,className:"w-full justify-start gap-2",children:[n.jsx(bj,{className:"h-4 w-4"}),"Copiar link desta página"]}),n.jsxs(Y,{variant:"outline",size:"sm",onClick:s,className:"w-full justify-start gap-2",children:[n.jsx(zr,{className:"h-4 w-4"}),"Abrir no navegador"]})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"💡 Dica: Você pode criar eventos gratuitos normalmente pelo app. A restrição aplica-se apenas à venda de ingressos."})]})]})}function w0({onBack:e,eventId:t}){const{createEvent:r,organizerData:s}=ri(),{profile:a,updateProfile:o}=Lm(),{isAdmin:d}=Fs(),{isNativeApp:u}=TA(),[f,p]=v.useState(!1),[x,w]=v.useState({title:"",description:"",date:"",time:"",endDate:"",endTime:"",location:"",address:"",locationLink:"",maxAttendees:"",ticketPrice:"",ticketLink:""}),[_,j]=v.useState([]),[N,C]=v.useState(null),[A,S]=v.useState(null),[k,b]=v.useState(!1),[T,O]=v.useState([]),[L,R]=v.useState(!1),[M,P]=v.useState(!1),[q,G]=v.useState(!1),[B,V]=v.useState(null),ee=_t(),[X,le]=v.useState(""),[ue,oe]=v.useState((a==null?void 0:a.notes)||""),[te,be]=v.useState(!0),[ve,H]=v.useState("presencial"),[J,K]=v.useState("free"),[ae,de]=v.useState([]),[se,me]=v.useState({feePayer:"buyer",platformFeePercentage:5,paymentProcessingFeePercentage:3.99,paymentProcessingFeeFixed:.39,cancellationPolicy:"",acceptsPix:!0,acceptsCreditCard:!0,acceptsDebitCard:!0,maxInstallments:12}),[Re,ze]=v.useState(!1),[ye,Ne]=v.useState(!1),[we,Xe]=v.useState(""),[_e,Qe]=v.useState(""),[ce,Se]=v.useState("corrente"),[ke,Je]=v.useState(""),[Ae,Lt]=v.useState(""),[yt,It]=v.useState(""),[Xt,xt]=v.useState("");v.useEffect(()=>{(async()=>{var dt;if(t){p(!0);try{const{data:it,error:ut}=await U.from("events").select("*").eq("id",t).single();if(ut)throw ut;if(it){const Pe=new Date(it.event_date),Ot=Pe.toISOString().split("T")[0],ht=Pe.toTimeString().slice(0,5);let Rt="",Rn="";if(it.end_date){const Bs=new Date(it.end_date);Rt=Bs.toISOString().split("T")[0],Rn=Bs.toTimeString().slice(0,5)}w({title:it.title||"",description:it.description||"",date:Ot,time:ht,endDate:Rt,endTime:Rn,location:it.location||"",address:it.is_live?"":it.location||"",locationLink:it.location_link||"",maxAttendees:((dt=it.max_attendees)==null?void 0:dt.toString())||"",ticketPrice:"",ticketLink:""}),j(it.category||[]),C(it.image_url||null),H(it.is_live?"live":"presencial"),b(it.requires_registration||!1),it.interests&&it.interests.length>0&&le(it.interests[0])}}catch(it){console.error("Error loading event:",it),W.error("Erro ao carregar evento")}}})()},[t]);const Wr=Ie=>{var it;const dt=(it=Ie.target.files)==null?void 0:it[0];if(dt){S(dt);const ut=new FileReader;ut.onload=Pe=>{var Ot;C((Ot=Pe.target)==null?void 0:Ot.result)},ut.readAsDataURL(dt)}},Qt=(Ie,dt)=>{w(it=>({...it,[Ie]:dt}))},Ve=async Ie=>{if(Ie.preventDefault(),!x.title||!x.date||!x.time||!x.endDate||!x.endTime){W.error("Preencha todos os campos obrigatórios");return}if(ve==="presencial"&&!x.address){W.error("Preencha o endereço do evento");return}if(ve==="live"&&!x.locationLink){W.error("Preencha o link da transmissão");return}if(J==="platform"){if(u){W.error("Venda pela plataforma disponível apenas no navegador"),Ne(!0);return}if(ae.length===0){W.error("Configure pelo menos um tipo de ingresso");return}if(!Re){W.error("Você precisa aceitar os termos e condições");return}if(!we&&(!_e||!ke||!Ae||!yt||!Xt)){W.error("Preencha sua chave PIX ou dados bancários completos para receber os pagamentos");return}}if(J==="external"&&!x.ticketLink){W.error("Preencha o link de compra do ingresso");return}try{P(!0);let dt=null;if(A){const Pe=A.name.split(".").pop(),Ot=`events/${Date.now()}.${Pe}`,{error:ht}=await U.storage.from("user-uploads").upload(Ot,A);if(ht)throw ht;const{data:{publicUrl:Rt}}=U.storage.from("user-uploads").getPublicUrl(Ot);dt=Rt}const it=new Date(`${x.date}T${x.time}`),ut=new Date(`${x.endDate}T${x.endTime}`);if(ue!==(a==null?void 0:a.notes)&&await o({notes:ue}),f&&t){const{error:Pe}=await U.from("events").update({title:x.title,description:x.description,event_date:it.toISOString(),end_date:ut.toISOString(),location:ve==="live"?"Online":x.address,location_link:x.locationLink||null,image_url:dt||N,max_attendees:x.maxAttendees?parseInt(x.maxAttendees):null,interests:X?[X]:[],is_live:ve==="live",requires_registration:k,category:_.length>0?_:null,ticket_price:x.ticketPrice?parseFloat(x.ticketPrice):0,ticket_link:x.ticketLink||null,updated_at:new Date().toISOString()}).eq("id",t);if(Pe)throw Pe;W.success("Evento atualizado com sucesso!")}else{const Pe={title:x.title,description:x.description,event_date:it.toISOString(),end_date:ut.toISOString(),location:ve==="live"?"Online":x.address,location_link:x.locationLink||null,image_url:dt,max_attendees:x.maxAttendees?parseInt(x.maxAttendees):null,interests:X?[X]:[],is_live:ve==="live",status:"upcoming",requires_registration:k,category:_.length>0?_:null,form_fields:k?T:[],ticket_price:J==="external"&&x.ticketPrice?parseFloat(x.ticketPrice):0,ticket_link:J==="external"&&x.ticketLink||null,has_platform_tickets:J==="platform",...J==="platform"&&{pix_key:we||null,bank_name:_e||null,bank_account_type:ce||null,bank_agency:ke||null,bank_account:Ae||null,bank_account_holder:yt||null,bank_document:Xt||null}};await r(Pe);const{data:{user:Ot}}=await U.auth.getUser();if(!Ot)throw new Error("User not authenticated");const{data:ht}=await U.from("organizers").select("id").eq("user_id",Ot.id).single();if(!ht)throw new Error("Organizer not found");const{data:Rt}=await U.from("events").select("id").eq("organizer_id",ht.id).eq("title",x.title).order("created_at",{ascending:!1}).limit(1).single(),Rn=fn=>fn.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),Bs=(s==null?void 0:s.username)||(s!=null&&s.page_title?Rn(s.page_title):"")||(a!=null&&a.display_name?Rn(a.display_name):"organizador"),ho=Rn(x.title),Et=`${window.location.origin}/${Bs}/${ho}`;if(V({id:Rt.id,title:x.title,shareUrl:Et}),G(!0),J==="platform"&&Rt){const{error:fn}=await U.from("event_ticket_settings").insert({event_id:Rt.id,accepts_platform_payment:!0,fee_payer:se.feePayer,platform_fee_percentage:se.platformFeePercentage,payment_processing_fee_percentage:se.paymentProcessingFeePercentage,payment_processing_fee_fixed:se.paymentProcessingFeeFixed,cancellation_policy:se.cancellationPolicy,accepts_pix:se.acceptsPix,accepts_credit_card:se.acceptsCreditCard,accepts_debit_card:se.acceptsDebitCard,max_installments:se.maxInstallments,terms_accepted:Re,terms_accepted_at:new Date().toISOString()});if(fn)throw fn;const Yn=ae.map((Ge,Pt)=>({event_id:Rt.id,name:Ge.name,description:Ge.description,price:Ge.price,quantity:Ge.quantity,sales_start_date:Ge.salesStartDate&&Ge.salesStartTime?new Date(`${Ge.salesStartDate}T${Ge.salesStartTime}`).toISOString():null,sales_end_date:Ge.salesEndDate&&Ge.salesEndTime?new Date(`${Ge.salesEndDate}T${Ge.salesEndTime}`).toISOString():null,min_quantity_per_purchase:Ge.minQuantity,max_quantity_per_purchase:Ge.maxQuantity,sort_order:Pt})),{error:fo}=await U.from("ticket_types").insert(Yn);if(fo)throw fo}}f&&e()}catch(dt){console.error("Error saving event:",dt),W.error(f?"Erro ao atualizar evento":"Erro ao criar evento")}finally{P(!1)}};return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b border-border",children:n.jsxs("div",{className:"flex items-center justify-between p-4 max-w-md mx-auto",children:[n.jsx(Y,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(mt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:f?"Editar Evento":"Criar Evento"}),n.jsx("div",{className:"w-10"})]})}),n.jsx("div",{className:"p-4 max-w-md mx-auto pb-20",children:n.jsxs("form",{onSubmit:Ve,className:"space-y-6",children:[n.jsxs(je,{children:[n.jsx(qe,{children:n.jsx(We,{className:"text-sm",children:"Arte do Evento"})}),n.jsx(Ee,{children:n.jsx("div",{className:"relative",children:N?n.jsxs("div",{className:"relative h-48 rounded-lg overflow-hidden",children:[n.jsx("img",{src:N,alt:"Preview do evento",className:"w-full h-full object-cover"}),n.jsx(Y,{type:"button",variant:"secondary",size:"sm",className:"absolute top-2 right-2",onClick:()=>C(null),children:"Remover"})]}):n.jsxs("label",{className:"flex flex-col items-center justify-center h-48 border-2 border-dashed border-border rounded-lg cursor-pointer hover:border-primary/50 transition-colors",children:[n.jsx(Ds,{className:"h-8 w-8 text-muted-foreground mb-2"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"Clique para adicionar uma imagem"}),n.jsx("input",{type:"file",accept:"image/*",onChange:Wr,className:"hidden"})]})})})]}),n.jsxs(je,{children:[n.jsx(qe,{children:n.jsx(We,{className:"text-sm",children:"Informações Básicas"})}),n.jsxs(Ee,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"title",children:"Nome do Evento"}),n.jsx(xe,{id:"title",placeholder:"Digite o nome do evento",value:x.title,onChange:Ie=>Qt("title",Ie.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"description",children:"Descrição"}),n.jsx(An,{id:"description",placeholder:"Descreva seu evento...",value:x.description,onChange:Ie=>Qt("description",Ie.target.value),rows:3})]}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"category",children:"Categorias"}),n.jsx(ip,{value:_,onChange:j,placeholder:"Selecione uma ou mais categorias"})]})]})]}),n.jsxs(je,{children:[n.jsx(qe,{children:n.jsx(We,{className:"text-sm",children:"Tipo de Evento"})}),n.jsx(Ee,{children:n.jsxs(Ui,{value:ve,onValueChange:Ie=>H(Ie),children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(an,{value:"presencial",id:"presencial"}),n.jsx(ie,{htmlFor:"presencial",className:"cursor-pointer",children:"📍 Evento Presencial"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(an,{value:"live",id:"live"}),n.jsx(ie,{htmlFor:"live",className:"cursor-pointer",children:"🔴 Evento Live (Online)"})]})]})})]}),n.jsxs(je,{children:[n.jsx(qe,{children:n.jsxs(We,{className:"text-sm flex items-center gap-2",children:[n.jsx(kt,{className:"h-4 w-4"}),"Data e Hora"]})}),n.jsxs(Ee,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ie,{className:"text-sm font-medium mb-2 block",children:"Início do Evento"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"date",className:"text-xs text-muted-foreground",children:"Data"}),n.jsx(xe,{id:"date",type:"date",value:x.date,onChange:Ie=>Qt("date",Ie.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"time",className:"text-xs text-muted-foreground",children:"Horário"}),n.jsx(xe,{id:"time",type:"time",value:x.time,onChange:Ie=>Qt("time",Ie.target.value),required:!0})]})]})]}),n.jsxs("div",{className:"pt-2 border-t",children:[n.jsx(ie,{className:"text-sm font-medium mb-2 block",children:"Encerramento do Evento *"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"endDate",className:"text-xs text-muted-foreground",children:"Data"}),n.jsx(xe,{id:"endDate",type:"date",value:x.endDate,onChange:Ie=>Qt("endDate",Ie.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"endTime",className:"text-xs text-muted-foreground",children:"Horário"}),n.jsx(xe,{id:"endTime",type:"time",value:x.endTime,onChange:Ie=>Qt("endTime",Ie.target.value),required:!0})]})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Data e hora em que o evento será encerrado automaticamente"})]})]})]}),n.jsxs(je,{children:[n.jsx(qe,{children:n.jsxs(We,{className:"text-sm flex items-center gap-2",children:[n.jsx(Tt,{className:"h-4 w-4"}),ve==="live"?"Link da Transmissão":"Localização"]})}),n.jsx(Ee,{className:"space-y-4",children:ve==="presencial"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"address",children:"Endereço Completo"}),n.jsx(xe,{id:"address",placeholder:"Rua, número, bairro, cidade...",value:x.address,onChange:Ie=>Qt("address",Ie.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"locationLink",children:"Link do Endereço"}),n.jsx(xe,{id:"locationLink",type:"url",placeholder:"https://maps.google.com/...",value:x.locationLink,onChange:Ie=>Qt("locationLink",Ie.target.value)}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Cole o link do Google Maps ou Waze"})]})]}):n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"locationLink",children:"Link da Live"}),n.jsx(xe,{id:"locationLink",type:"url",placeholder:"https://youtube.com/live/... ou https://twitch.tv/...",value:x.locationLink,onChange:Ie=>Qt("locationLink",Ie.target.value),required:!0}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Cole o link da transmissão (YouTube, Twitch, etc)"})]})})]}),n.jsxs(je,{children:[n.jsx(qe,{children:n.jsx(We,{className:"text-sm",children:"Capacidade e Ingressos"})}),n.jsxs(Ee,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs(ie,{htmlFor:"maxAttendees",className:"flex items-center gap-1",children:[n.jsx(tr,{className:"h-3 w-3"}),"Capacidade Máxima"]}),n.jsx(xe,{id:"maxAttendees",type:"number",placeholder:"300",value:x.maxAttendees,onChange:Ie=>Qt("maxAttendees",Ie.target.value)})]}),n.jsx(Ms,{}),n.jsxs("div",{children:[n.jsx(ie,{className:"mb-2 block",children:"Tipo de Ingresso"}),n.jsxs(Ui,{value:J,onValueChange:Ie=>{if(Ie==="platform"&&u){Ne(!0),W.info("Esta opção está disponível apenas no navegador");return}K(Ie),Ne(!1)},children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(an,{value:"free",id:"free"}),n.jsx(ie,{htmlFor:"free",className:"cursor-pointer",children:"🎫 Evento Gratuito"})]}),d&&n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(an,{value:"external",id:"external"}),n.jsx(ie,{htmlFor:"external",className:"cursor-pointer",children:"🔗 Link Externo (Sympla, Eventbrite, etc)"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(an,{value:"platform",id:"platform",disabled:u}),n.jsxs(ie,{htmlFor:"platform",className:u?"cursor-not-allowed opacity-50":"cursor-pointer",children:["💳 Vender pela plataforma ",u&&"🔒"]})]})]}),u&&n.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"💡 A venda pela plataforma está disponível apenas no navegador web"})]}),ye&&u&&n.jsx("div",{className:"pt-4",children:n.jsx(Oq,{})}),J==="external"&&d&&n.jsxs("div",{className:"pt-2 border-t",children:[n.jsx(ie,{htmlFor:"ticketLink",children:"Link de Compra do Ingresso"}),n.jsx(xe,{id:"ticketLink",type:"url",placeholder:"https://www.sympla.com.br/...",value:x.ticketLink,onChange:Ie=>Qt("ticketLink",Ie.target.value)}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Cole o link onde os participantes podem comprar o ingresso"})]})]})]}),J==="platform"&&n.jsxs(je,{children:[n.jsxs(qe,{children:[n.jsx(We,{className:"text-sm",children:"Dados para Recebimento"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Informe seus dados para receber os valores das vendas"})]}),n.jsxs(Ee,{className:"space-y-4",children:[n.jsx("div",{className:"p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:n.jsx("p",{className:"text-xs text-blue-400 font-medium",children:"💰 Os valores serão transferidos em até 3 dias úteis após a finalização do evento"})}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"pixKey",children:"Chave PIX"}),n.jsx(xe,{id:"pixKey",placeholder:"Digite sua chave PIX (CPF, CNPJ, email, telefone ou chave aleatória)",value:we,onChange:Ie=>Xe(Ie.target.value)}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Recomendado: mais rápido e prático"})]}),n.jsx(Ms,{}),n.jsx("p",{className:"text-sm font-medium",children:"Ou informe seus dados bancários"}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"bankName",children:"Banco"}),n.jsx(xe,{id:"bankName",placeholder:"Ex: Banco do Brasil, Nubank, Itaú...",value:_e,onChange:Ie=>Qe(Ie.target.value)})]}),n.jsxs("div",{children:[n.jsx(ie,{children:"Tipo de Conta"}),n.jsxs(Ui,{value:ce,onValueChange:Ie=>Se(Ie),children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(an,{value:"corrente",id:"corrente"}),n.jsx(ie,{htmlFor:"corrente",className:"cursor-pointer",children:"Conta Corrente"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(an,{value:"poupanca",id:"poupanca"}),n.jsx(ie,{htmlFor:"poupanca",className:"cursor-pointer",children:"Conta Poupança"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"bankAgency",children:"Agência"}),n.jsx(xe,{id:"bankAgency",placeholder:"0001",value:ke,onChange:Ie=>Je(Ie.target.value)})]}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"bankAccount",children:"Conta"}),n.jsx(xe,{id:"bankAccount",placeholder:"12345-6",value:Ae,onChange:Ie=>Lt(Ie.target.value)})]})]}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"bankAccountHolder",children:"Titular da Conta"}),n.jsx(xe,{id:"bankAccountHolder",placeholder:"Nome completo do titular",value:yt,onChange:Ie=>It(Ie.target.value)})]}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"bankDocument",children:"CPF/CNPJ do Titular"}),n.jsx(xe,{id:"bankDocument",placeholder:"000.000.000-00",value:Xt,onChange:Ie=>xt(Ie.target.value)})]})]})]}),J==="platform"&&n.jsxs(je,{children:[n.jsxs(qe,{children:[n.jsx(We,{className:"text-sm",children:"Configuração de Venda"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Configure os tipos de ingressos, preços e formas de pagamento"})]}),n.jsx(Ee,{children:n.jsx(W$,{ticketTypes:ae,ticketSettings:se,onTicketTypesChange:de,onTicketSettingsChange:me,termsAccepted:Re,onTermsAccepted:ze,organizerId:(s==null?void 0:s.id)||"",eventId:t})})]}),n.jsxs(je,{children:[n.jsx(qe,{children:n.jsxs(We,{className:"text-sm flex items-center gap-2",children:[n.jsx(Ec,{className:"h-4 w-4"}),"Formulário de Cadastro"]})}),n.jsxs(Ee,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(ie,{children:"Exigir cadastro para participar"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Participantes precisarão se cadastrar antes do evento"})]}),n.jsx(Ar,{checked:k,onCheckedChange:b})]}),k&&n.jsxs(Y,{type:"button",variant:"outline",className:"w-full",onClick:()=>R(!0),children:[n.jsx(Uo,{className:"h-4 w-4 mr-2"}),"Configurar Campos do Formulário ",T.length>0&&`(${T.length} campos)`]})]})]}),n.jsx(nA,{open:L,onOpenChange:R,fields:T,onSave:O}),B&&n.jsx(H$,{open:q,onOpenChange:G,eventId:B.id,eventTitle:B.title,shareUrl:B.shareUrl,onViewEvent:()=>{G(!1),ee(`/e/${B.id}`)}}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(Y,{type:"submit",className:"w-full btn-glow",disabled:M,children:M?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Criando Evento..."]}):"Criar Evento"}),n.jsx(Y,{type:"button",variant:"outline",className:"w-full",onClick:e,children:"Cancelar"})]})]})})]})}function Ev({onBack:e,eventId:t}){const[r,s]=v.useState([]),[a,o]=v.useState(!0),[d,u]=v.useState(""),[f,p]=v.useState(null),[x,w]=v.useState(null),{user:_}=wt();v.useEffect(()=>{(async()=>{if(_)try{o(!0);let k=U.from("event_registrations").select(`
            id,
            user_id,
            user_name,
            user_email,
            user_phone,
            status,
            created_at,
            registration_data,
            event:events!inner(
              id,
              title,
              event_date,
              location,
              form_fields,
              organizer:organizers!inner(
                user_id
              )
            )
          `).eq("event.organizer.user_id",_.id);t&&(k=k.eq("event_id",t));const{data:b,error:T}=await k.order("created_at",{ascending:!1});if(T){console.error("Error fetching registrations:",T),W.error("Erro ao carregar cadastros");return}const O=(b==null?void 0:b.map(M=>M.user_id))||[],{data:L}=await U.from("profiles").select("user_id, avatar_url").in("user_id",O),R=new Map((L==null?void 0:L.map(M=>[M.user_id,M.avatar_url]))||[]);s((b==null?void 0:b.map(M=>({...M,user_avatar:R.get(M.user_id),registration_data:M.registration_data||{},event:{...M.event,form_fields:M.event.form_fields||[]}})))||[])}catch(k){console.error("Error:",k),W.error("Erro ao carregar cadastros")}finally{o(!1)}})()},[_,t]);const j=r.filter(S=>S.user_name.toLowerCase().includes(d.toLowerCase())||S.user_email.toLowerCase().includes(d.toLowerCase())||S.event.title.toLowerCase().includes(d.toLowerCase())),N=S=>{const k={confirmed:"bg-green-500/20 text-green-400",pending:"bg-yellow-500/20 text-yellow-400",cancelled:"bg-red-500/20 text-red-400"};return k[S]||k.confirmed},C=(S,k)=>{if(typeof k=="string"&&k.startsWith("data:")){const b=document.createElement("a");b.href=k,b.download=`${S}.${k.split(";")[0].split("/")[1]}`,document.body.appendChild(b),b.click(),document.body.removeChild(b),W.success("Download iniciado")}else W.error("Arquivo não disponível para download")},A=async S=>{try{const{error:k}=await U.from("event_registrations").delete().eq("id",S);if(k){console.error("Error deleting registration:",k),W.error("Erro ao excluir cadastro");return}s(b=>b.filter(T=>T.id!==S)),p(null),w(null),W.success("Cadastro excluído com sucesso. O usuário pode se cadastrar novamente.")}catch(k){console.error("Error:",k),W.error("Erro ao excluir cadastro")}};return a?n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsxs("div",{className:"flex items-center gap-4 p-4 border-b border-border bg-surface/50 backdrop-blur-sm sticky top-0 z-10",children:[n.jsx(Y,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(mt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Cadastros dos Eventos"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando..."})]})]}),n.jsx("div",{className:"flex items-center justify-center p-8",children:n.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})})]}):n.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[n.jsxs("div",{className:"flex items-center gap-4 p-4 border-b border-border bg-surface/50 backdrop-blur-sm sticky top-0 z-10",children:[n.jsx(Y,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(mt,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Cadastros dos Eventos"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[j.length," cadastro(s) encontrado(s)"]})]})]}),n.jsxs("div",{className:"p-4 max-w-md mx-auto",children:[n.jsxs("div",{className:"relative mb-4",children:[n.jsx(nu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(xe,{placeholder:"Buscar por nome, email ou evento...",value:d,onChange:S=>u(S.target.value),className:"pl-10"})]}),j.length>0?n.jsx("div",{className:"space-y-2",children:j.map(S=>n.jsx(je,{className:"cursor-pointer hover:bg-accent/50 transition-colors",onClick:()=>p(S),children:n.jsx(Ee,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs(Vt,{className:"h-12 w-12",children:[n.jsx(Yt,{src:S.user_avatar}),n.jsx(Wt,{children:S.user_name.charAt(0).toUpperCase()})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium text-foreground truncate",children:S.user_name}),n.jsx("p",{className:"text-sm text-muted-foreground truncate",children:S.event.title})]}),n.jsx(Eu,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"})]})})},S.id))}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(tr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:d?"Nenhum cadastro encontrado":"Nenhum cadastro ainda"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:d?"Tente buscar por outro termo":"Os cadastros dos seus eventos aparecerão aqui"})]})]}),n.jsx(zt,{open:!!f,onOpenChange:S=>!S&&p(null),children:n.jsx(Ft,{className:"max-w-md max-h-[80vh] overflow-y-auto",children:f&&n.jsxs(n.Fragment,{children:[n.jsx(gr,{children:n.jsx(xr,{children:"Detalhes do Cadastro"})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b",children:[n.jsxs(Vt,{className:"h-16 w-16",children:[n.jsx(Yt,{src:f.user_avatar}),n.jsx(Wt,{className:"text-lg",children:f.user_name.charAt(0).toUpperCase()})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-lg",children:f.user_name}),n.jsx(ct,{className:N(f.status),children:f.status==="confirmed"?"Confirmado":f.status==="pending"?"Pendente":"Cancelado"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Au,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{children:f.user_email})]}),f.user_phone&&n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Bc,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{children:f.user_phone})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(kt,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("span",{children:["Evento: ",new Date(f.event.event_date).toLocaleDateString("pt-BR")]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Tt,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{children:f.event.location})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(tr,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("span",{children:["Cadastrado em: ",new Date(f.created_at).toLocaleDateString("pt-BR")]})]})]}),f.registration_data&&Object.keys(f.registration_data).length>0&&n.jsxs("div",{className:"pt-4 border-t space-y-3",children:[n.jsx("h4",{className:"font-semibold text-sm",children:"Dados Personalizados"}),Object.entries(f.registration_data).map(([S,k])=>{const b=typeof k=="string"&&k.startsWith("data:image/"),T=typeof k=="string"&&k.startsWith("data:");return n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm font-medium",children:S}),b?n.jsxs("div",{className:"space-y-2",children:[n.jsx("img",{src:k,alt:S,className:"w-full h-auto rounded border max-h-64 object-contain"}),n.jsxs(Y,{variant:"outline",size:"sm",onClick:()=>C(S,k),className:"w-full",children:[n.jsx(Xo,{className:"h-4 w-4 mr-2"}),"Baixar Imagem"]})]}):T?n.jsxs(Y,{variant:"outline",size:"sm",onClick:()=>C(S,k),className:"w-full",children:[n.jsx(Xo,{className:"h-4 w-4 mr-2"}),"Baixar Arquivo"]}):Array.isArray(k)?n.jsx("p",{className:"text-sm text-muted-foreground",children:k.join(", ")}):n.jsx("p",{className:"text-sm text-muted-foreground",children:String(k)})]},S)})]}),n.jsxs("div",{className:"pt-4 border-t",children:[n.jsxs(Y,{variant:"destructive",className:"w-full",onClick:()=>w(f.id),children:[n.jsx(Gn,{className:"h-4 w-4 mr-2"}),"Excluir Cadastro"]}),n.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:"Ao excluir, o usuário poderá se cadastrar novamente"})]})]})]})})}),n.jsx(Jo,{open:!!x,onOpenChange:S=>!S&&w(null),children:n.jsxs(Qi,{children:[n.jsxs(el,{children:[n.jsx(tl,{children:"Excluir Cadastro?"}),n.jsx(rl,{children:"Esta ação não pode ser desfeita. O cadastro será permanentemente excluído e o usuário poderá se cadastrar novamente no evento."})]}),n.jsxs(Zi,{children:[n.jsx(eo,{children:"Cancelar"}),n.jsx(Ji,{onClick:()=>x&&A(x),className:"bg-destructive hover:bg-destructive/90",children:"Excluir"})]})]})})]})}function Sv({onBack:e,eventId:t}){const[r,s]=v.useState([]),[a,o]=v.useState(!0),{user:d}=wt();return v.useEffect(()=>{(async()=>{if(d)try{o(!0);let f=U.from("event_registrations").select("id, user_name, user_email, created_at, event:events!inner(id, organizer:organizers!inner(user_id))").eq("status","confirmed").eq("event.organizer.user_id",d.id);t&&(f=f.eq("event_id",t));const{data:p,error:x}=await f.order("created_at",{ascending:!1});if(x){console.error("Error fetching attendances:",x),W.error("Erro ao carregar presenças");return}const w=(p||[]).map(_=>({id:_.id,user_name:_.user_name,user_email:_.user_email,created_at:_.created_at}));s(w)}catch(f){console.error(f),W.error("Erro ao carregar presenças")}finally{o(!1)}})()},[d,t]),a?n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsxs("div",{className:"flex items-center gap-4 p-4 border-b border-border bg-surface/50 backdrop-blur-sm sticky top-0 z-10",children:[n.jsx(Y,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(mt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Presenças Confirmadas"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando..."})]})]}),n.jsx("div",{className:"flex items-center justify-center p-8",children:n.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})})]}):n.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[n.jsxs("div",{className:"flex items-center gap-4 p-4 border-b border-border bg-surface/50 backdrop-blur-sm sticky top-0 z-10",children:[n.jsx(Y,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(mt,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Presenças Confirmadas"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.length," presença(s) confirmada(s)"]})]})]}),n.jsx("div",{className:"p-4 max-w-md mx-auto",children:r.length>0?n.jsx("div",{className:"space-y-4",children:r.map(u=>n.jsxs(je,{children:[n.jsx(qe,{className:"pb-2",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs(We,{className:"text-base flex items-center gap-2",children:[n.jsx(hs,{className:"h-4 w-4"}),u.user_name]}),n.jsx(ct,{className:"bg-primary/10 text-primary border-primary/20",children:"Confirmado"})]})}),n.jsx(Ee,{children:n.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[n.jsx("div",{children:u.user_email}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(kt,{className:"h-3 w-3"}),"Confirmado em: ",new Date(u.created_at).toLocaleDateString("pt-BR")]})]})})]},u.id))}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(tr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Nenhuma presença confirmada ainda"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Assim que alguém confirmar presença, aparecerá aqui."})]})})]})}function Dq(){const e=_t(),[t,r]=v.useState("profile"),[s,a]=v.useState(!1),[o,d]=v.useState(!1),[u,f]=v.useState(!1),[p,x]=v.useState(null),[w,_]=v.useState(null),[j,N]=v.useState(!1),[C,A]=v.useState(!1),[S,k]=v.useState(!1),[b,T]=v.useState(!1),[O,L]=v.useState(""),[R,M]=v.useState({followers_count:0,events_count:0,page_views:0}),P=v.useRef(null),q=v.useRef(null),[G,B]=v.useState({bio:"",instagram:"",website:""}),[V,ee]=v.useState({title:"",subtitle:"",description:"",primaryColor:"#8B5CF6",showStats:!0,showEvents:!0,showContact:!0}),[X,le]=v.useState({title:"",description:"",username:""}),[ue,oe]=v.useState(null),[te,be]=v.useState(!1),[ve,H]=v.useState({instagram:{url:"",visible:!1},whatsapp:{url:"",visible:!1},location:{url:"",visible:!1},playlist:{url:"",visible:!1},website:{url:"",visible:!1}}),{user:J}=wt(),{organizerData:K,events:ae,loading:de,updateOrganizerProfile:se}=ri(),{photoSessions:me,loading:Re,uploadPhotos:ze,deletePhoto:ye}=h$();if(v.useEffect(()=>{K&&((async()=>{const{data:Se}=await U.from("organizer_stats").select("*").eq("organizer_id",K.id).maybeSingle();M(Se?{followers_count:Se.followers_count||0,events_count:ae.length,page_views:0}:{followers_count:0,events_count:ae.length,page_views:0})})(),ee({title:K.page_title||"",subtitle:K.page_subtitle||"",description:K.page_description||"",primaryColor:K.primary_color||"#8B5CF6",showStats:K.show_statistics,showEvents:K.show_events,showContact:K.show_contact}),le({title:K.page_title||"",description:K.page_description||"",username:K.username||""}))},[K,ae]),de)return n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Carregando..."})]})});const Ne={name:(K==null?void 0:K.page_title)||"Meu Perfil",bio:(K==null?void 0:K.page_description)||"Organizador de eventos",followers:R.followers_count,events:R.events_count,pageViews:R.page_views},we=async ce=>{var ke;const Se=(ke=ce.target.files)==null?void 0:ke[0];if(!(!Se||!K||!J))try{A(!0);const Je=Se.name.split(".").pop(),Ae=`${J.id}/cover.${Je}`,{error:Lt}=await U.storage.from("user-uploads").upload(Ae,Se,{upsert:!0});if(Lt)throw Lt;const{data:{publicUrl:yt}}=U.storage.from("user-uploads").getPublicUrl(Ae);await se({cover_image_url:yt}),W.success("Imagem de capa atualizada!")}catch(Je){console.error("Error uploading cover:",Je),W.error("Erro ao fazer upload da imagem")}finally{A(!1)}},Xe=async ce=>{var ke;const Se=(ke=ce.target.files)==null?void 0:ke[0];if(!(!Se||!K||!J))try{k(!0);const Je=Se.name.split(".").pop(),Ae=`${J.id}/avatar.${Je}`,{error:Lt}=await U.storage.from("user-uploads").upload(Ae,Se,{upsert:!0});if(Lt)throw Lt;const{data:{publicUrl:yt}}=U.storage.from("user-uploads").getPublicUrl(Ae);await se({avatar_url:yt}),await U.from("profiles").update({avatar_url:yt}).eq("user_id",J.id),W.success("Foto de perfil atualizada em todos os lugares!")}catch(Je){console.error("Error uploading avatar:",Je),W.error("Erro ao fazer upload da foto")}finally{k(!1)}},_e=()=>{const ce=`${window.location.origin}/${K==null?void 0:K.username}`;navigator.clipboard.writeText(ce),W.success("Link copiado para a área de transferência!")},Qe=async ce=>{const Se=ce.target.files;if(!Se||Se.length===0)return;if(!O){W.error("Selecione um evento para associar as fotos");return}await ze(Se,O)&&(N(!1),L(""),P.current&&(P.current.value=""))};return s?n.jsx(w0,{onBack:()=>a(!1)}):o?n.jsx(Ev,{onBack:()=>d(!1),eventId:p||void 0}):u?n.jsx(Sv,{onBack:()=>f(!1),eventId:w||void 0}):n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsxs("div",{className:"max-w-md mx-auto bg-background",children:[n.jsxs(Gm,{value:t,onValueChange:r,className:"w-full",children:[n.jsxs(Lu,{className:"grid w-full grid-cols-4",children:[n.jsxs(is,{value:"profile",className:"flex items-center gap-2",children:[n.jsx(hs,{className:"h-4 w-4"}),"Perfil"]}),n.jsxs(is,{value:"events",className:"flex items-center gap-2",children:[n.jsx(j1,{className:"h-4 w-4"}),"Eventos"]}),n.jsxs(is,{value:"photos",className:"flex items-center gap-2",children:[n.jsx(Hi,{className:"h-4 w-4"}),"Fotos"]}),n.jsxs(is,{value:"settings",className:"flex items-center gap-2",children:[n.jsx(Uo,{className:"h-4 w-4"}),"Config"]})]}),n.jsx(os,{value:"profile",className:"space-y-6",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("header",{className:`relative h-64 bg-gradient-to-b from-surface to-background rounded-lg overflow-hidden ${b?"group cursor-pointer":""}`,children:[b&&n.jsxs(n.Fragment,{children:[n.jsx("input",{type:"file",accept:"image/*",onChange:we,className:"hidden",id:"cover-upload"}),n.jsxs("label",{htmlFor:"cover-upload",className:"absolute inset-0 cursor-pointer",children:[K!=null&&K.cover_image_url?n.jsx("img",{src:K==null?void 0:K.cover_image_url,alt:"Cover",className:"w-full h-full object-cover opacity-30"}):n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-primary/20 to-secondary/20"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-background"}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity",children:C?n.jsx("div",{className:"w-8 h-8 border-4 border-white border-t-transparent rounded-full animate-spin"}):n.jsxs("div",{className:"text-white text-center",children:[n.jsx(Cn,{className:"h-12 w-12 mx-auto mb-2"}),n.jsx("p",{className:"text-sm font-medium",children:"Clique para alterar a capa"})]})})]})]}),!b&&n.jsxs(n.Fragment,{children:[K!=null&&K.cover_image_url?n.jsx("img",{src:K==null?void 0:K.cover_image_url,alt:"Cover",className:"w-full h-full object-cover opacity-30"}):n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-primary/20 to-secondary/20"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-background"})]}),n.jsx("div",{className:"absolute top-4 right-4 flex gap-2 z-10",children:n.jsx(Y,{variant:"ghost",size:"icon",className:"bg-surface/80 backdrop-blur-sm",onClick:_e,children:n.jsx(ks,{className:"h-5 w-5"})})})]}),n.jsxs("div",{className:"-mt-16 relative z-10",children:[n.jsxs("div",{className:"flex items-end gap-4 mb-4",children:[n.jsxs("div",{className:"avatar-story relative group",children:[n.jsx(Vt,{className:"h-20 w-20 border-4 border-background",children:K!=null&&K.avatar_url?n.jsx("img",{src:K.avatar_url,alt:"Avatar",className:"w-full h-full object-cover"}):n.jsx(Wt,{className:"bg-surface text-lg font-bold",children:X.title.charAt(0)||"O"})}),b&&n.jsxs(n.Fragment,{children:[n.jsx("input",{type:"file",accept:"image/*",ref:q,onChange:Xe,className:"hidden",id:"avatar-upload"}),n.jsx("label",{htmlFor:"avatar-upload",className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:S?n.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):n.jsx(Ds,{className:"h-5 w-5 text-white"})})]})]}),n.jsx("div",{className:"flex-1 pb-2 space-y-2",children:b?n.jsxs(n.Fragment,{children:[n.jsx(xe,{value:X.title,onChange:ce=>le(Se=>({...Se,title:ce.target.value})),className:"text-xl font-bold bg-transparent border-border",placeholder:"Nome do perfil"}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"@"}),n.jsx(xe,{value:X.username,onChange:async ce=>{const Se=ce.target.value.toLowerCase().replace(/[^a-z0-9._]/g,"");if(le(ke=>({...ke,username:Se})),Se.length>=3&&Se!==(K==null?void 0:K.username)){be(!0),oe(null);const{data:ke,error:Je}=await U.rpc("check_username_available",{username_to_check:Se,current_organizer_id:K==null?void 0:K.id});be(!1),Je?oe("Erro ao verificar username"):ke||oe("Username já está em uso")}},className:"text-sm bg-transparent border-border pl-7",placeholder:"username"})]}),te&&n.jsx("p",{className:"text-xs text-muted-foreground",children:"Verificando disponibilidade..."}),ue&&n.jsx("p",{className:"text-xs text-destructive",children:ue}),!ue&&!te&&X.username&&X.username!==(K==null?void 0:K.username)&&n.jsx("p",{className:"text-xs text-green-600",children:"Username disponível!"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Mínimo 3 caracteres. Apenas letras minúsculas, números, ponto e underline."})]}),n.jsx(An,{value:X.description,onChange:ce=>le(Se=>({...Se,description:ce.target.value})),className:"text-sm bg-transparent border-border min-h-[60px]",placeholder:"Descrição"})]}):n.jsxs(n.Fragment,{children:[n.jsx("h1",{className:"text-xl font-bold text-foreground",children:X.title||"Seu Nome"}),(K==null?void 0:K.username)&&n.jsxs("p",{className:"text-sm text-muted-foreground",children:["@",K.username]})]})}),(K==null?void 0:K.username)&&!b&&n.jsxs(Y,{variant:"outline",size:"sm",onClick:()=>window.open(`${Xm()}/${K.username}`,"_blank"),className:"mb-2",children:[n.jsx(zr,{className:"h-4 w-4 mr-2"}),"Ver Página"]})]}),b?n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx(Y,{variant:"default",size:"sm",disabled:!!ue||te||X.username.length<3,onClick:async()=>{try{if(X.username!==(K==null?void 0:K.username)){const{data:ce,error:Se}=await U.rpc("check_username_available",{username_to_check:X.username,current_organizer_id:K==null?void 0:K.id});if(Se||!ce){W.error("Username já está em uso");return}}await se({page_title:X.title,page_description:X.description,username:X.username}),J&&await U.from("profiles").update({display_name:X.title,bio:X.description}).eq("user_id",J.id),T(!1),oe(null)}catch(ce){console.error("Error updating profile:",ce)}},children:"Salvar"}),n.jsx(Y,{variant:"outline",size:"sm",onClick:()=>{le({title:(K==null?void 0:K.page_title)||"",description:(K==null?void 0:K.page_description)||"",username:(K==null?void 0:K.username)||""}),oe(null),T(!1)},children:"Cancelar"})]}):n.jsxs(Y,{variant:"outline",size:"sm",onClick:()=>T(!0),children:[n.jsx(y8,{className:"h-4 w-4"}),"Editar"]})]}),V.showStats&&n.jsxs("div",{className:"flex items-center justify-around py-4 mb-6 bg-card rounded-lg",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-lg font-bold text-foreground",children:Ne.followers}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Seguidores"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-lg font-bold text-foreground",children:Ne.events}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Eventos"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-lg font-bold text-foreground",children:Ne.pageViews}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Visualizações"})]})]}),n.jsxs("div",{className:"space-y-4 bg-card rounded-lg p-4",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:"Links Sociais"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(ie,{htmlFor:"whatsapp",className:"flex items-center gap-2",children:[n.jsx(Bc,{className:"h-4 w-4"}),"WhatsApp"]}),n.jsx(Ar,{checked:K==null?void 0:K.show_whatsapp,onCheckedChange:async ce=>{await se({show_whatsapp:ce})}})]}),n.jsx(xe,{id:"whatsapp",placeholder:"https://wa.me/...",value:(K==null?void 0:K.whatsapp_url)||"",onChange:ce=>se({whatsapp_url:ce.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(ie,{htmlFor:"instagram",className:"flex items-center gap-2",children:[n.jsx(Gi,{className:"h-4 w-4"}),"Instagram"]}),n.jsx(Ar,{checked:K==null?void 0:K.show_instagram,onCheckedChange:async ce=>{await se({show_instagram:ce})}})]}),n.jsx(xe,{id:"instagram",placeholder:"https://instagram.com/...",value:(K==null?void 0:K.instagram_url)||"",onChange:ce=>se({instagram_url:ce.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(ie,{htmlFor:"playlist",className:"flex items-center gap-2",children:[n.jsx(ru,{className:"h-4 w-4"}),"Playlist"]}),n.jsx(Ar,{checked:K==null?void 0:K.show_playlist,onCheckedChange:async ce=>{await se({show_playlist:ce})}})]}),n.jsx(xe,{id:"playlist",placeholder:"https://open.spotify.com/...",value:(K==null?void 0:K.playlist_url)||"",onChange:ce=>se({playlist_url:ce.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(ie,{htmlFor:"location",className:"flex items-center gap-2",children:[n.jsx(Tt,{className:"h-4 w-4"}),"Localização"]}),n.jsx(Ar,{checked:K==null?void 0:K.show_location,onCheckedChange:async ce=>{await se({show_location:ce})}})]}),n.jsx(xe,{id:"location",placeholder:"https://maps.google.com/...",value:(K==null?void 0:K.location_url)||"",onChange:ce=>se({location_url:ce.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(ie,{htmlFor:"website",className:"flex items-center gap-2",children:[n.jsx(tu,{className:"h-4 w-4"}),"Website"]}),n.jsx(Ar,{checked:K==null?void 0:K.show_website,onCheckedChange:async ce=>{await se({show_website:ce})}})]}),n.jsx(xe,{id:"website",placeholder:"https://seusite.com",value:(K==null?void 0:K.website_url)||"",onChange:ce=>se({website_url:ce.target.value})})]})]})]}),n.jsxs("div",{className:"space-y-4 bg-card rounded-lg p-4",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:"Categoria do Perfil"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"category",children:"Categoria"}),n.jsxs(Zs,{value:(K==null?void 0:K.category)||"",onValueChange:ce=>se({category:ce}),children:[n.jsx(Es,{children:n.jsx(Js,{placeholder:"Selecione uma categoria"})}),n.jsxs(Ss,{children:[n.jsx(qt,{value:"festas",children:"🎉 Festas"}),n.jsx(qt,{value:"shows",children:"🎤 Shows"}),n.jsx(qt,{value:"fitness",children:"💪 Fitness"}),n.jsx(qt,{value:"igreja",children:"🙏 Igreja"}),n.jsx(qt,{value:"cursos",children:"📚 Cursos"}),n.jsx(qt,{value:"bares",children:"🍻 Bares"}),n.jsx(qt,{value:"boates",children:"🪩 Boates"}),n.jsx(qt,{value:"esportes",children:"⚽ Esportes"}),n.jsx(qt,{value:"encontros",children:"👥 Encontros"})]})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"A categoria ajuda os usuários a encontrar seu perfil"})]})]})]})}),n.jsxs(os,{value:"events",className:"space-y-6",children:[n.jsx("div",{className:"p-4 md:p-6 space-y-6",children:n.jsx("div",{className:"bg-gradient-to-r from-green-500/10 via-emerald-500/10 to-blue-500/10 border border-green-500/20 rounded-xl p-5 md:p-6 shadow-sm hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2.5",children:[n.jsx("div",{className:"p-2 bg-green-500/10 rounded-lg",children:n.jsx(Sn,{className:"h-5 w-5 md:h-6 md:w-6 text-green-600"})}),n.jsx("h3",{className:"text-lg md:text-xl font-bold text-foreground",children:"Gestão Financeira"})]}),n.jsx("p",{className:"text-sm md:text-base text-muted-foreground leading-relaxed",children:"Visão consolidada de todos os seus eventos, vendas de ingressos e repasses"})]}),n.jsxs(Y,{variant:"default",size:"default",className:"w-full md:w-auto md:min-w-[120px] bg-green-600 hover:bg-green-700",onClick:()=>{window.innerWidth<768?window.open(window.location.origin+"/organizer-financial","_blank"):e("/organizer-financial")},children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),"Acessar"]})]})})}),n.jsx(B$,{onCreateEvent:()=>a(!0),onManageRegistrations:ce=>{x(ce),d(!0)},onViewAttendances:ce=>{_(ce),f(!0)}})]}),n.jsx(os,{value:"photos",className:"space-y-6 p-4",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Minhas Fotos"}),n.jsxs(Y,{variant:"outline",size:"sm",onClick:()=>N(!0),children:[n.jsx(Cn,{className:"h-4 w-4 mr-2"}),"Adicionar"]})]}),Re?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Carregando fotos..."})]}):me.length>0?n.jsx("div",{className:"space-y-6",children:me.map((ce,Se)=>n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-foreground",children:ce.eventName||"Sem evento"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[ce.photos.length," foto",ce.photos.length!==1?"s":""," • ",ce.date]})]})}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[ce.photos.slice(0,3).map(ke=>n.jsxs("div",{className:"aspect-square bg-surface rounded-lg overflow-hidden relative group",children:[n.jsx("img",{src:ke.photo_url,alt:ke.caption||"Foto do evento",className:"w-full h-full object-cover hover:scale-105 transition-transform cursor-pointer"}),n.jsx(Y,{variant:"destructive",size:"icon",className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity h-8 w-8",onClick:()=>ye(ke.id),children:n.jsx(Gn,{className:"h-4 w-4"})})]},ke.id)),ce.photos.length>3&&n.jsxs("div",{className:"aspect-square bg-surface rounded-lg overflow-hidden relative",children:[n.jsx("img",{src:ce.photos[3].photo_url,alt:"Mais fotos",className:"w-full h-full object-cover"}),n.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:n.jsxs("span",{className:"text-white font-semibold text-lg",children:["+",ce.photos.length-3]})})]})]})]},Se))}):n.jsxs("div",{className:"text-center py-12 space-y-4",children:[n.jsx("div",{className:"w-16 h-16 mx-auto bg-surface rounded-full flex items-center justify-center",children:n.jsx(Cn,{className:"h-8 w-8 text-muted-foreground"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"Nenhuma foto ainda"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Adicione fotos dos seus eventos para mostrar seu trabalho"}),n.jsxs(Y,{variant:"outline",onClick:()=>N(!0),children:[n.jsx(Cn,{className:"h-4 w-4 mr-2"}),"Adicionar Primeira Foto"]})]})]})]})}),n.jsx(os,{value:"settings",className:"space-y-6",children:n.jsx(z$,{})})]}),n.jsx(zt,{open:j,onOpenChange:N,children:n.jsxs(Ft,{children:[n.jsx(gr,{children:n.jsx(xr,{children:"Adicionar Fotos do Evento"})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"event-select",children:"Evento *"}),n.jsxs(Zs,{value:O,onValueChange:L,children:[n.jsx(Es,{children:n.jsx(Js,{placeholder:"Selecione um evento"})}),n.jsx(Ss,{children:ae.length===0?n.jsx(qt,{value:"none",disabled:!0,children:"Nenhum evento cadastrado"}):ae.map(ce=>n.jsx(qt,{value:ce.id,children:ce.title},ce.id))})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"As fotos serão associadas a este evento"})]}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"photos-upload",children:"Selecionar Fotos *"}),n.jsx(xe,{ref:P,id:"photos-upload",type:"file",accept:"image/*",multiple:!0,onChange:Qe}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Você pode selecionar várias fotos de uma vez"})]}),n.jsx("div",{className:"flex gap-2",children:n.jsx(Y,{variant:"outline",onClick:()=>{N(!1),L("")},className:"flex-1",children:"Cancelar"})})]})]})})]}),n.jsx("footer",{className:"mt-8 pb-6 text-center border-t border-border pt-6",children:n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Esse site foi desenvolvido pela ",n.jsx("a",{href:"https://flatgrowth.com.br/",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Flat Company"})]})})]})}function Mq(){const{user:e}=wt(),[t,r]=v.useState("prompt"),[s,a]=v.useState(!1);v.useEffect(()=>{const x=rs.isNativePlatform();a(x),!(!x||!e)&&d()},[e]);const o=()=>{var x;if(!rs.isNativePlatform())return null;try{return(x=rs.Plugins)==null?void 0:x.PushNotifications}catch{return null}},d=async()=>{const x=o();if(!x){console.log("PushNotifications plugin not available"),a(!1);return}try{let w=await x.checkPermissions();if(w.receive==="prompt"&&(w=await x.requestPermissions()),w.receive!=="granted"){r("denied"),console.log("Push notification permission denied");return}r("granted"),await x.register(),x.addListener("registration",async _=>{console.log("Push registration success, token:",_.value),await u(_.value)}),x.addListener("registrationError",_=>{console.error("Push registration error:",_),W.error("Erro ao registrar notificações push")}),x.addListener("pushNotificationReceived",_=>{console.log("Push notification received:",_),W.success(_.title||"Nova notificação",{description:_.body})}),x.addListener("pushNotificationActionPerformed",_=>{console.log("Push notification action performed:",_)})}catch(w){console.error("Error initializing push notifications:",w),a(!1)}},u=async x=>{if(e)try{const w=rs.getPlatform(),{error:_}=await U.from("push_tokens").upsert({user_id:e.id,token:x,platform:w,device_info:{platform:w,capacitor_version:rs.getPlatform()},updated_at:new Date().toISOString()},{onConflict:"user_id,token"});_?console.error("Error saving push token:",_):console.log("Push token saved successfully")}catch(w){console.error("Error in savePushToken:",w)}};return{isSupported:s,permissionStatus:t,requestPermission:async()=>{if(!s)return W.error("Notificações push não suportadas neste dispositivo"),!1;const x=o();if(!x)return W.error("Plugin de notificações não disponível"),!1;try{return(await x.requestPermissions()).receive==="granted"?(r("granted"),await x.register(),W.success("Notificações ativadas!"),!0):(r("denied"),W.error("Permissão de notificações negada"),!1)}catch(w){return console.error("Error requesting permission:",w),W.error("Erro ao solicitar permissão"),!1}},removePushToken:async x=>{if(e)try{const{error:w}=await U.from("push_tokens").delete().eq("user_id",e.id).eq("token",x);w&&console.error("Error removing push token:",w)}catch(w){console.error("Error in removePushToken:",w)}}}}function Lq(){const{isSupported:e,permissionStatus:t,requestPermission:r}=Mq();return e?n.jsxs(je,{children:[n.jsxs(qe,{children:[n.jsxs(We,{className:"flex items-center gap-2",children:[n.jsx(Ga,{className:"h-5 w-5"}),"Notificações Push"]}),n.jsx(Qr,{children:"Receba notificações em tempo real no seu dispositivo"})]}),n.jsx(Ee,{className:"space-y-4",children:t==="granted"?n.jsx("div",{className:"flex items-center justify-between p-3 bg-green-500/10 border border-green-500/20 rounded-lg",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ga,{className:"h-4 w-4 text-green-500"}),n.jsx("span",{className:"text-sm text-green-500",children:"Notificações ativadas"})]})}):t==="denied"?n.jsx("div",{className:"flex items-center justify-between p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(c8,{className:"h-4 w-4 text-red-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-red-500",children:"Notificações desativadas"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Ative nas configurações do dispositivo"})]})]})}):n.jsxs("div",{className:"space-y-3",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Ative as notificações para receber:"}),n.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[n.jsxs("li",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),"Curtidas no seu perfil"]}),n.jsxs("li",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),"Solicitações de amizade"]}),n.jsxs("li",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),"Novas mensagens"]}),n.jsxs("li",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),"Novos eventos dos organizadores que você segue"]})]}),n.jsxs(Y,{onClick:r,className:"w-full",children:[n.jsx(Ga,{className:"h-4 w-4 mr-2"}),"Ativar Notificações"]})]})})]}):null}const p2=[{id:"instagram",label:"Instagram",icon:Gi,color:"text-pink-500",placeholder:"https://instagram.com/seuperfil",field:"instagram_url"},{id:"whatsapp",label:"WhatsApp",icon:us,color:"text-green-500",placeholder:"https://wa.me/5511999999999",field:"phone"}];function Fq({userType:e}){const t=_t(),[r,s]=v.useState("profile"),[a,o]=v.useState(!1),[d,u]=v.useState(null),[f,p]=v.useState(!1),[x,w]=v.useState({display_name:"",bio:"",location:"",age:"",notes:"",notes_visible:!0,phone:"",website:"",instagram_url:"",twitter_url:"",linkedin_url:"",facebook_url:"",tiktok_url:"",youtube_url:"",interest:"curtição",relationship_status:"preferencia_nao_informar"}),{user:_,signOut:j}=wt(),{profile:N,loading:C,saving:A,updateProfile:S,uploadAvatar:k}=Lm(),b=v.useRef(null),T=async()=>{try{const{data:{session:G}}=await U.auth.getSession();if(!G){W.error("Você precisa estar logado para deletar sua conta");return}const{error:B}=await U.functions.invoke("delete-user",{headers:{Authorization:`Bearer ${G.access_token}`}});if(B){console.error("Error deleting account:",B),W.error("Erro ao deletar conta. Tente novamente.");return}W.success("Conta deletada com sucesso!"),await U.auth.signOut(),window.location.href="/auth"}catch(G){console.error("Error:",G),W.error("Erro ao deletar conta. Tente novamente.")}},O=N!=null&&N.birth_date?Y7(N.birth_date):null;v.useEffect(()=>{N&&(w({display_name:N.display_name||"",bio:N.bio||"",location:N.location||"",age:(O==null?void 0:O.toString())||"",notes:N.notes||"",notes_visible:N.notes_visible??!0,phone:N.phone||"",website:N.website||"",instagram_url:N.instagram_url||"",twitter_url:N.twitter_url||"",linkedin_url:N.linkedin_url||"",facebook_url:N.facebook_url||"",tiktok_url:N.tiktok_url||"",youtube_url:N.youtube_url||"",interest:N.interest||"curtição",relationship_status:N.relationship_status||"preferencia_nao_informar"}),p(!1))},[N,O]);const L=async G=>{const B=x[G],V={[G]:B||null};G==="age"&&(V.age=B?parseInt(B):null);const ee=await S(V);return ee&&u(null),ee},R=async()=>{const G={display_name:x.display_name||null,bio:x.bio||null,location:x.location||null,instagram_url:x.instagram_url||null,phone:x.phone||null,twitter_url:x.twitter_url||null,linkedin_url:x.linkedin_url||null,facebook_url:x.facebook_url||null,tiktok_url:x.tiktok_url||null,youtube_url:x.youtube_url||null,website:x.website||null};await S(G)&&(o(!1),W.success("Perfil atualizado com sucesso!"))},M=async G=>{var V;const B=(V=G.target.files)==null?void 0:V[0];if(B){if(!B.type.startsWith("image/")){W.error("Por favor, selecione apenas arquivos de imagem");return}if(B.size>5*1024*1024){W.error("A imagem deve ter no máximo 5MB");return}await k(B)}};if(C)return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx(n0,{title:"Meu Perfil"}),n.jsx("div",{className:"flex items-center justify-center p-8",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Carregando perfil..."})]})})]});const P=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsx(je,{children:n.jsx(Ee,{className:"p-6",children:n.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[n.jsxs("div",{className:"relative mb-4",children:[n.jsx("div",{className:"h-24 w-24 rounded-full bg-primary/20 flex items-center justify-center overflow-hidden ring-4 ring-background shadow-lg",children:N!=null&&N.avatar_url?n.jsx("img",{src:N.avatar_url,alt:"Avatar",className:"w-full h-full object-cover"}):n.jsx(hs,{className:"h-10 w-10 text-primary"})}),n.jsx(Y,{size:"icon",variant:"secondary",className:"absolute bottom-0 right-0 h-8 w-8 rounded-full shadow-md",onClick:()=>{var G;return(G=b.current)==null?void 0:G.click()},disabled:A,children:n.jsx(Cn,{className:"h-4 w-4"})}),n.jsx("input",{ref:b,type:"file",accept:"image/*",onChange:M,className:"hidden"})]}),n.jsx("h2",{className:"text-2xl font-bold mb-1",children:(N==null?void 0:N.display_name)||"Seu Nome"}),n.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["@",(N==null?void 0:N.username)||"username"]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-3",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Tt,{className:"h-4 w-4"}),n.jsx("span",{children:(N==null?void 0:N.location)||"Localização"})]}),n.jsx("span",{children:"•"}),n.jsx("span",{children:O?`${O} anos`:"Idade não informada"})]}),(N==null?void 0:N.bio)&&n.jsx("p",{className:"text-sm text-muted-foreground max-w-md mb-4",children:N.bio}),n.jsxs(Y,{variant:"outline",onClick:()=>o(!0),size:"sm",children:[n.jsx(Aa,{className:"h-4 w-4 mr-2"}),"Editar Perfil"]})]})})}),n.jsxs(je,{children:[n.jsx(qe,{children:n.jsxs(We,{className:"flex items-center gap-2",children:[n.jsx(zr,{className:"h-5 w-5"}),"Redes Sociais"]})}),n.jsx(Ee,{children:n.jsx("div",{className:"space-y-3",children:p2.map(G=>{const B=G.icon,V=(N==null?void 0:N[G.field])||"";return n.jsxs("div",{className:"flex items-start gap-3 p-4 border rounded-lg bg-card",children:[n.jsx(B,{className:`h-5 w-5 ${G.color} mt-0.5 flex-shrink-0`}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium text-sm mb-1",children:G.label}),n.jsx("p",{className:"text-sm text-muted-foreground break-all",children:V||"Não configurado"})]}),V&&n.jsx(Y,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 flex-shrink-0",onClick:()=>window.open(V,"_blank"),children:n.jsx(zr,{className:"h-4 w-4"})})]},G.id)})})})]}),n.jsxs(je,{children:[n.jsx(qe,{children:n.jsxs(We,{className:"flex items-center gap-2",children:[n.jsx(tr,{className:"h-5 w-5"}),"Status de Relacionamento"]})}),n.jsx(Ee,{children:n.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"solteiro",label:"Solteiro(a)",emoji:"😊"},{value:"namorando",label:"Namorando",emoji:"💑"},{value:"casado",label:"Casado(a)",emoji:"💍"},{value:"relacionamento_aberto",label:"Relacionamento Aberto",emoji:"🌈"},{value:"preferencia_nao_informar",label:"Não informar",emoji:"🤐"}].map(G=>n.jsxs("button",{type:"button",onClick:()=>{const B=G.value;w(V=>({...V,relationship_status:B})),S({relationship_status:B})},className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${x.relationship_status===G.value?"bg-primary text-primary-foreground shadow-md":"bg-secondary text-secondary-foreground hover:bg-secondary/80"}`,children:[n.jsx("span",{className:"mr-1",children:G.emoji}),G.label]},G.value))})})]})]}),q=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsx(Lq,{}),n.jsxs(je,{children:[n.jsx(qe,{children:n.jsx(We,{children:"Informações Pessoais"})}),n.jsxs(Ee,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{children:"Email"}),n.jsx(xe,{value:(_==null?void 0:_.email)||"",disabled:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{children:"Telefone"}),d==="phone"?n.jsxs("div",{className:"flex gap-2",children:[n.jsx(xe,{value:x.phone,onChange:G=>w(B=>({...B,phone:G.target.value})),placeholder:"(11) 99999-9999"}),n.jsx(Y,{size:"sm",onClick:()=>L("phone"),disabled:A,children:"Salvar"}),n.jsx(Y,{size:"sm",variant:"outline",onClick:()=>u(null),children:"Cancelar"})]}):n.jsxs("div",{className:"flex gap-2",children:[n.jsx(xe,{value:(N==null?void 0:N.phone)||"Não informado",disabled:!0}),n.jsx(Y,{size:"sm",variant:"outline",onClick:()=>u("phone"),children:n.jsx(Aa,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{children:"Website"}),d==="website"?n.jsxs("div",{className:"flex gap-2",children:[n.jsx(xe,{value:x.website,onChange:G=>w(B=>({...B,website:G.target.value})),placeholder:"https://seusite.com"}),n.jsx(Y,{size:"sm",onClick:()=>L("website"),disabled:A,children:"Salvar"}),n.jsx(Y,{size:"sm",variant:"outline",onClick:()=>u(null),children:"Cancelar"})]}):n.jsxs("div",{className:"flex gap-2",children:[n.jsx(xe,{value:(N==null?void 0:N.website)||"Não informado",disabled:!0}),n.jsx(Y,{size:"sm",variant:"outline",onClick:()=>u("website"),children:n.jsx(Aa,{className:"h-4 w-4"})})]})]})]})]}),n.jsx(je,{children:n.jsx(Ee,{className:"p-6",children:n.jsxs(Jo,{children:[n.jsx(Hf,{asChild:!0,children:n.jsxs(Y,{variant:"outline",className:"w-full text-orange-600 hover:text-orange-700 hover:bg-orange-50",children:[n.jsx(Nj,{className:"h-4 w-4 mr-2"}),"Sair da Conta"]})}),n.jsx(Qi,{children:n.jsxs(Zi,{children:[n.jsx(eo,{children:"Cancelar"}),n.jsx(Ji,{onClick:j,children:"Sair"})]})})]})})}),n.jsxs(je,{className:"border-destructive/20",children:[n.jsx(qe,{children:n.jsxs(We,{className:"flex items-center gap-2 text-destructive",children:[n.jsx(Gn,{className:"h-4 w-4"}),"Zona de Perigo"]})}),n.jsx(Ee,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-foreground",children:"Excluir Conta"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Esta ação não pode ser desfeita. Todos os seus dados serão permanentemente removidos."})]}),n.jsxs(Jo,{children:[n.jsx(Hf,{asChild:!0,children:n.jsxs(Y,{variant:"destructive",size:"sm",children:[n.jsx(Gn,{className:"h-4 w-4 mr-2"}),"Excluir Conta"]})}),n.jsxs(Qi,{children:[n.jsxs(el,{children:[n.jsx(tl,{children:"Excluir Conta Permanentemente"}),n.jsx(rl,{children:"Esta ação é irreversível. Todos os seus dados serão permanentemente excluídos. Você poderá criar uma nova conta a qualquer momento com o mesmo email."})]}),n.jsxs(Zi,{children:[n.jsx(eo,{children:"Cancelar"}),n.jsx(Ji,{onClick:T,className:"bg-destructive hover:bg-destructive/90",children:"Excluir Definitivamente"})]})]})]})]})})]})]});return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx(n0,{title:"Meu Perfil"}),n.jsxs("div",{className:"p-4 pb-24",children:[n.jsxs("div",{className:"flex gap-2 mb-6 p-1 bg-muted rounded-lg",children:[n.jsxs("button",{onClick:()=>s("profile"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all ${r==="profile"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:[n.jsx(hs,{className:"h-4 w-4 inline mr-2"}),"Perfil"]}),n.jsxs("button",{onClick:()=>t("/my-events"),className:"flex-1 py-2 px-4 rounded-md text-sm font-medium text-muted-foreground hover:text-foreground transition-all",children:[n.jsx(Sc,{className:"h-4 w-4 inline mr-2"}),"Meus Eventos"]}),n.jsxs("button",{onClick:()=>s("settings"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all ${r==="settings"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:[n.jsx(Uo,{className:"h-4 w-4 inline mr-2"}),"Configurações"]})]}),r==="profile"&&P(),r==="settings"&&q()]}),n.jsx(zt,{open:a,onOpenChange:o,children:n.jsxs(Ft,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(gr,{children:n.jsx(xr,{children:"Editar Perfil"})}),n.jsxs("div",{className:"space-y-6 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"edit-display-name",children:"Nome"}),n.jsx(xe,{id:"edit-display-name",value:x.display_name,onChange:G=>w(B=>({...B,display_name:G.target.value})),placeholder:"Seu nome completo"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"edit-username",children:"Username"}),n.jsx(xe,{id:"edit-username",value:(N==null?void 0:N.username)||"",disabled:!0,className:"bg-muted"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Username não pode ser alterado"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"edit-location",children:"Localização"}),n.jsx(xe,{id:"edit-location",value:x.location,onChange:G=>w(B=>({...B,location:G.target.value})),placeholder:"Cidade, Estado"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"edit-bio",children:"Biografia"}),n.jsx(An,{id:"edit-bio",value:x.bio,onChange:G=>w(B=>({...B,bio:G.target.value})),placeholder:"Conte um pouco sobre você...",rows:4})]}),n.jsx(Ms,{}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"font-semibold",children:"Redes Sociais"}),p2.map(G=>{const B=G.icon,V=x[G.field]||"";return n.jsxs("div",{className:"space-y-2",children:[n.jsxs(ie,{htmlFor:`edit-${G.field}`,className:"flex items-center gap-2",children:[n.jsx(B,{className:`h-4 w-4 ${G.color}`}),G.label]}),n.jsx(xe,{id:`edit-${G.field}`,value:V,onChange:ee=>w(X=>({...X,[G.field]:ee.target.value})),placeholder:G.placeholder})]},G.id)})]})]}),n.jsxs(Du,{className:"gap-2",children:[n.jsx(Y,{variant:"outline",onClick:()=>o(!1),disabled:A,children:"Cancelar"}),n.jsx(Y,{onClick:R,disabled:A,children:A?"Salvando...":"Salvar Alterações"})]})]})})]})}function Bq({onBack:e,onEventClick:t}){const{events:r,loading:s,toggleLike:a}=oS(),o=new Date,d=r.filter(u=>{const f=new Date(u.event_date),p=u.end_date?new Date(u.end_date):null,x=(u.status||"").toLowerCase()==="completed"||(u.status||"").toLowerCase()==="ended";return f<=o&&!x&&(!p||p>o)});return s?n.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[n.jsxs("div",{className:"flex items-center gap-4 p-4 border-b border-border bg-surface/50 backdrop-blur-sm sticky top-0 z-10",children:[n.jsx(Y,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(mt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Eventos ao Vivo"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando..."})]})]}),n.jsx("div",{className:"flex items-center justify-center p-8",children:n.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})})]}):n.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[n.jsxs("div",{className:"flex items-center gap-4 p-4 border-b border-border bg-surface/50 backdrop-blur-sm sticky top-0 z-10",children:[n.jsx(Y,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(mt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Eventos ao Vivo"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:d.length>0?"Acontecendo agora":"Nenhum evento ao vivo no momento"})]})]}),n.jsx("main",{className:"px-4 py-6 max-w-md mx-auto",children:d.length>0?n.jsx("div",{className:"space-y-6",children:d.map(u=>{var f,p,x;return n.jsx(s0,{id:u.id,title:u.title,image:u.image_url||"",organizerName:((f=u.organizer)==null?void 0:f.page_title)||"Organizador",organizerAvatar:((x=(p=u.organizer)==null?void 0:p.profile)==null?void 0:x.avatar_url)||"",date:new Date(u.event_date).toLocaleDateString("pt-BR"),location:u.location,locationLink:u.location_link||void 0,estimatedAttendees:u.current_attendees||0,likes:u.likes_count||0,comments:u.comments_count||0,isLiked:u.is_liked||!1,isLive:(()=>{const w=new Date(u.event_date),_=u.end_date?new Date(u.end_date):null;return w<=o&&(!_||_>o)})(),price:u.ticket_price||0,onClick:()=>t(u.id),onLike:()=>a(u.id),showJoinButton:!0,isPlatformEvent:u.is_platform_event||!1},u.id)})}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx("p",{className:"text-muted-foreground",children:"Nenhum evento ao vivo no momento"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Volte mais tarde para ver eventos acontecendo"})]})})]})}const g2=[{code:"001",name:"Banco do Brasil"},{code:"033",name:"Santander"},{code:"104",name:"Caixa Econômica Federal"},{code:"237",name:"Bradesco"},{code:"341",name:"Itaú"},{code:"077",name:"Banco Inter"},{code:"260",name:"Nu Pagamentos (Nubank)"},{code:"290",name:"PagSeguro"},{code:"323",name:"Mercado Pago"},{code:"212",name:"Banco Original"},{code:"756",name:"Bancoob (Sicoob)"},{code:"748",name:"Sicredi"},{code:"422",name:"Banco Safra"}],zq=["AC","AL","AP","AM","BA","CE","DF","ES","GO","MA","MT","MS","MG","PA","PB","PR","PE","PI","RJ","RN","RS","RO","RR","SC","SP","SE","TO"];function IA({organizerId:e}){const{toast:t}=WN(),[r,s]=v.useState(!1),[a,o]=v.useState(!1),[d,u]=v.useState(!1),[f,p]=v.useState({document_type:"cpf",document_number:"",legal_name:"",trading_name:"",zip_code:"",street:"",number:"",complement:"",neighborhood:"",city:"",state:"SP",bank_code:"",bank_name:"",account_type:"corrente",agency:"",agency_digit:"",account_number:"",account_digit:"",phone:"",email:"",auto_transfer:!1,transfer_day:5,is_verified:!1});v.useEffect(()=>{x()},[e]);const x=async()=>{s(!0);try{const{data:b,error:T}=await U.from("organizer_financial_data").select("*").eq("organizer_id",e).maybeSingle();if(T)throw T;b&&(p(b),u(!0))}catch(b){console.error("Error loading financial data:",b),t({title:"Erro ao carregar dados",description:b.message,variant:"destructive"})}finally{s(!1)}},w=b=>{const T=g2.find(O=>O.code===b);p({...f,bank_code:b,bank_name:(T==null?void 0:T.name)||""})},_=b=>{const T=b.replace(/\D/g,"");return T.length<=11?T.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"):b},j=b=>{const T=b.replace(/\D/g,"");return T.length<=14?T.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,"$1.$2.$3/$4-$5"):b},N=b=>b.replace(/\D/g,"").replace(/(\d{5})(\d{3})/,"$1-$2"),C=b=>{const T=b.replace(/\D/g,"");return T.length<=10?T.replace(/(\d{2})(\d{4})(\d{4})/,"($1) $2-$3"):T.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3")},A=b=>{let T=b;f.document_type==="cpf"?T=_(b):T=j(b),p({...f,document_number:T})},S=async()=>{const b=f.zip_code.replace(/\D/g,"");if(b.length===8)try{const O=await(await fetch(`https://viacep.com.br/ws/${b}/json/`)).json();O.erro||p({...f,street:O.logradouro||"",neighborhood:O.bairro||"",city:O.localidade||"",state:O.uf||""})}catch(T){console.error("Error fetching zip code:",T)}},k=async b=>{b.preventDefault(),o(!0);try{const T={organizer_id:e,...f};if(d){const{error:O}=await U.from("organizer_financial_data").update(T).eq("organizer_id",e);if(O)throw O}else{const{error:O}=await U.from("organizer_financial_data").insert([T]);if(O)throw O;u(!0)}t({title:"Dados salvos com sucesso!",description:"Suas informações financeiras foram atualizadas."})}catch(T){console.error("Error saving financial data:",T),t({title:"Erro ao salvar dados",description:T.message,variant:"destructive"})}finally{o(!1)}};return r?n.jsx("div",{className:"flex justify-center p-8",children:"Carregando..."}):n.jsxs("form",{onSubmit:k,className:"space-y-6",children:[n.jsxs(je,{children:[n.jsx(qe,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(We,{className:"flex items-center gap-2",children:[n.jsx(b1,{className:"h-5 w-5"}),"Dados Fiscais"]}),n.jsx(Qr,{children:"Informações do responsável legal pela conta"})]}),f.is_verified&&n.jsxs(ct,{variant:"default",className:"gap-1",children:[n.jsx(E1,{className:"h-3 w-3"}),"Verificado"]})]})}),n.jsxs(Ee,{className:"space-y-4",children:[!f.is_verified&&n.jsxs($u,{children:[n.jsx(Su,{className:"h-4 w-4"}),n.jsx(qu,{children:"Seus dados serão verificados pela equipe antes de liberar os repasses"})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{children:"Tipo de Documento"}),n.jsxs(Zs,{value:f.document_type,onValueChange:b=>p({...f,document_type:b,document_number:""}),children:[n.jsx(Es,{children:n.jsx(Js,{})}),n.jsxs(Ss,{children:[n.jsx(qt,{value:"cpf",children:"CPF - Pessoa Física"}),n.jsx(qt,{value:"cnpj",children:"CNPJ - Pessoa Jurídica"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{children:f.document_type==="cpf"?"CPF":"CNPJ"}),n.jsx(xe,{value:f.document_number,onChange:b=>A(b.target.value),placeholder:f.document_type==="cpf"?"000.000.000-00":"00.000.000/0000-00",required:!0})]}),n.jsxs("div",{className:"space-y-2 md:col-span-2",children:[n.jsx(ie,{children:"Razão Social / Nome Completo"}),n.jsx(xe,{value:f.legal_name,onChange:b=>p({...f,legal_name:b.target.value}),placeholder:"Nome legal conforme documento",required:!0})]}),f.document_type==="cnpj"&&n.jsxs("div",{className:"space-y-2 md:col-span-2",children:[n.jsx(ie,{children:"Nome Fantasia"}),n.jsx(xe,{value:f.trading_name,onChange:b=>p({...f,trading_name:b.target.value}),placeholder:"Nome fantasia da empresa"})]})]})]})]}),n.jsxs(je,{children:[n.jsxs(qe,{children:[n.jsxs(We,{className:"flex items-center gap-2",children:[n.jsx(Tt,{className:"h-5 w-5"}),"Endereço Fiscal"]}),n.jsx(Qr,{children:"Endereço conforme documento fiscal"})]}),n.jsx(Ee,{className:"space-y-4",children:n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{children:"CEP"}),n.jsx(xe,{value:f.zip_code,onChange:b=>p({...f,zip_code:N(b.target.value)}),onBlur:S,placeholder:"00000-000",required:!0})]}),n.jsxs("div",{className:"space-y-2 md:col-span-2",children:[n.jsx(ie,{children:"Logradouro"}),n.jsx(xe,{value:f.street,onChange:b=>p({...f,street:b.target.value}),placeholder:"Rua, Avenida, etc",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{children:"Número"}),n.jsx(xe,{value:f.number,onChange:b=>p({...f,number:b.target.value}),placeholder:"123",required:!0})]}),n.jsxs("div",{className:"space-y-2 md:col-span-2",children:[n.jsx(ie,{children:"Complemento"}),n.jsx(xe,{value:f.complement,onChange:b=>p({...f,complement:b.target.value}),placeholder:"Apartamento, sala, etc"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{children:"Bairro"}),n.jsx(xe,{value:f.neighborhood,onChange:b=>p({...f,neighborhood:b.target.value}),placeholder:"Bairro",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{children:"Cidade"}),n.jsx(xe,{value:f.city,onChange:b=>p({...f,city:b.target.value}),placeholder:"Cidade",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{children:"Estado"}),n.jsxs(Zs,{value:f.state,onValueChange:b=>p({...f,state:b}),children:[n.jsx(Es,{children:n.jsx(Js,{})}),n.jsx(Ss,{children:zq.map(b=>n.jsx(qt,{value:b,children:b},b))})]})]})]})})]}),n.jsxs(je,{children:[n.jsxs(qe,{children:[n.jsxs(We,{className:"flex items-center gap-2",children:[n.jsx(f8,{className:"h-5 w-5"}),"Dados Bancários"]}),n.jsx(Qr,{children:"Conta para recebimento dos repasses"})]}),n.jsx(Ee,{className:"space-y-4",children:n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"space-y-2 md:col-span-2",children:[n.jsx(ie,{children:"Banco"}),n.jsxs(Zs,{value:f.bank_code,onValueChange:w,children:[n.jsx(Es,{children:n.jsx(Js,{placeholder:"Selecione o banco"})}),n.jsx(Ss,{children:g2.map(b=>n.jsxs(qt,{value:b.code,children:[b.code," - ",b.name]},b.code))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{children:"Tipo de Conta"}),n.jsxs(Zs,{value:f.account_type,onValueChange:b=>p({...f,account_type:b}),children:[n.jsx(Es,{children:n.jsx(Js,{})}),n.jsxs(Ss,{children:[n.jsx(qt,{value:"corrente",children:"Conta Corrente"}),n.jsx(qt,{value:"poupanca",children:"Conta Poupança"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{children:"Agência"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(xe,{value:f.agency,onChange:b=>p({...f,agency:b.target.value.replace(/\D/g,"")}),placeholder:"0000",className:"flex-1",required:!0}),n.jsx(xe,{value:f.agency_digit,onChange:b=>p({...f,agency_digit:b.target.value}),placeholder:"X",className:"w-16",maxLength:1})]})]}),n.jsxs("div",{className:"space-y-2 md:col-span-2",children:[n.jsx(ie,{children:"Número da Conta"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(xe,{value:f.account_number,onChange:b=>p({...f,account_number:b.target.value.replace(/\D/g,"")}),placeholder:"00000000",className:"flex-1",required:!0}),n.jsx(xe,{value:f.account_digit,onChange:b=>p({...f,account_digit:b.target.value}),placeholder:"X",className:"w-16",maxLength:2,required:!0})]})]})]})})]}),n.jsxs(je,{children:[n.jsxs(qe,{children:[n.jsxs(We,{className:"flex items-center gap-2",children:[n.jsx(Bc,{className:"h-5 w-5"}),"Dados de Contato"]}),n.jsx(Qr,{children:"Informações para comunicação sobre repasses"})]}),n.jsxs(Ee,{className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{children:"Telefone"}),n.jsx(xe,{value:f.phone,onChange:b=>p({...f,phone:C(b.target.value)}),placeholder:"(00) 00000-0000",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{children:"Email"}),n.jsx(xe,{type:"email",value:f.email,onChange:b=>p({...f,email:b.target.value}),placeholder:"email@example.com",required:!0})]})]}),n.jsx(Ms,{}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(ie,{children:"Repasse Automático"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Receba automaticamente sem precisar solicitar"})]}),n.jsx(Ar,{checked:f.auto_transfer,onCheckedChange:b=>p({...f,auto_transfer:b})})]}),f.auto_transfer&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{children:"Dia do Repasse"}),n.jsxs(Zs,{value:f.transfer_day.toString(),onValueChange:b=>p({...f,transfer_day:parseInt(b)}),children:[n.jsx(Es,{children:n.jsx(Js,{})}),n.jsx(Ss,{children:Array.from({length:28},(b,T)=>T+1).map(b=>n.jsxs(qt,{value:b.toString(),children:["Dia ",b," de cada mês"]},b))})]})]})]})]})]}),n.jsx("div",{className:"flex justify-end gap-4",children:n.jsx(Y,{type:"submit",size:"lg",disabled:a,children:a?"Salvando...":d?"Atualizar Dados":"Salvar Dados"})})]})}function RA({organizerId:e}){const[t,r]=v.useState(!0),[s,a]=v.useState([]),[o,d]=v.useState({total_gross:0,total_fees:0,total_net:0,pending_amount:0,completed_amount:0,transaction_count:0});v.useEffect(()=>{u()},[e]);const u=async()=>{r(!0);try{const{data:w,error:_}=await U.from("ticket_sales_transactions").select(`
          *,
          events (
            title,
            slug
          )
        `).eq("organizer_id",e).order("created_at",{ascending:!1});if(_)throw _;a(w||[]);const j={total_gross:0,total_fees:0,total_net:0,pending_amount:0,completed_amount:0,transaction_count:(w==null?void 0:w.length)||0};w==null||w.forEach(N=>{j.total_gross+=Number(N.gross_amount),j.total_fees+=Number(N.platform_fee)+Number(N.payment_gateway_fee),j.total_net+=Number(N.net_amount),N.transaction_status==="completed"?j.completed_amount+=Number(N.net_amount):(N.transaction_status==="pending"||N.transaction_status==="processing")&&(j.pending_amount+=Number(N.net_amount))}),d(j)}catch(w){console.error("Error loading transactions:",w)}finally{r(!1)}},f=w=>{switch(w){case"completed":return n.jsxs(ct,{variant:"default",className:"gap-1",children:[n.jsx(ss,{className:"h-3 w-3"}),"Recebido"]});case"processing":return n.jsxs(ct,{variant:"secondary",className:"gap-1",children:[n.jsx(Kh,{className:"h-3 w-3"}),"Processando"]});case"pending":return n.jsxs(ct,{variant:"outline",className:"gap-1",children:[n.jsx(Kh,{className:"h-3 w-3"}),"Pendente"]});case"failed":return n.jsxs(ct,{variant:"destructive",className:"gap-1",children:[n.jsx(Su,{className:"h-3 w-3"}),"Falhou"]});case"refunded":return n.jsx(ct,{variant:"secondary",children:"Reembolsado"});default:return n.jsx(ct,{variant:"outline",children:w})}},p=w=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(w),x=()=>{const w=[["Data","Evento","Valor Bruto","Taxas","Valor Líquido","Status","Data Pagamento","Data Repasse"].join(","),...s.map(N=>{var C;return[new Date(N.created_at).toLocaleDateString("pt-BR"),((C=N.events)==null?void 0:C.title)||"N/A",N.gross_amount,(Number(N.platform_fee)+Number(N.payment_gateway_fee)).toFixed(2),N.net_amount,N.transaction_status,N.payment_date?new Date(N.payment_date).toLocaleDateString("pt-BR"):"N/A",N.transfer_date?new Date(N.transfer_date).toLocaleDateString("pt-BR"):"N/A"].join(",")})].join(`
`),_=new Blob([w],{type:"text/csv;charset=utf-8;"}),j=document.createElement("a");j.href=URL.createObjectURL(_),j.download=`transacoes_${new Date().toISOString().split("T")[0]}.csv`,j.click()};return t?n.jsx("div",{className:"flex justify-center p-8",children:"Carregando vendas..."}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[n.jsxs(je,{children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(We,{className:"text-sm font-medium",children:"Vendas Brutas"}),n.jsx(Sn,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ee,{children:[n.jsx("div",{className:"text-2xl font-bold",children:p(o.total_gross)}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[o.transaction_count," transações"]})]})]}),n.jsxs(je,{children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(We,{className:"text-sm font-medium",children:"Total em Taxas"}),n.jsx(C8,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ee,{children:[n.jsx("div",{className:"text-2xl font-bold",children:p(o.total_fees)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Plataforma + Gateway"})]})]}),n.jsxs(je,{children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(We,{className:"text-sm font-medium",children:"A Receber"}),n.jsx(Kh,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ee,{children:[n.jsx("div",{className:"text-2xl font-bold",children:p(o.pending_amount)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Aguardando repasse"})]})]}),n.jsxs(je,{children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(We,{className:"text-sm font-medium",children:"Recebido"}),n.jsx(ss,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ee,{children:[n.jsx("div",{className:"text-2xl font-bold",children:p(o.completed_amount)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Total transferido"})]})]})]}),n.jsxs(je,{children:[n.jsx(qe,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(We,{children:"Histórico de Transações"}),n.jsx(Qr,{children:"Todas as vendas de ingressos e seus respectivos repasses"})]}),s.length>0&&n.jsxs(Y,{variant:"outline",size:"sm",onClick:x,children:[n.jsx(Xo,{className:"h-4 w-4 mr-2"}),"Exportar CSV"]})]})}),n.jsx(Ee,{children:s.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Nenhuma transação encontrada"}):n.jsx("div",{className:"space-y-4",children:s.map(w=>{var _;return n.jsxs("div",{className:"border rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium",children:((_=w.events)==null?void 0:_.title)||"Evento"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:qf(new Date(w.created_at),{addSuffix:!0,locale:Pr})})]}),f(w.transaction_status)]}),n.jsx(Ms,{className:"my-2"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground",children:"Valor Bruto"}),n.jsx("div",{className:"font-medium",children:p(Number(w.gross_amount))})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground",children:"Taxas"}),n.jsxs("div",{className:"font-medium text-red-600",children:["-",p(Number(w.platform_fee)+Number(w.payment_gateway_fee))]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground",children:"Valor Líquido"}),n.jsx("div",{className:"font-medium text-green-600",children:p(Number(w.net_amount))})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground",children:w.transfer_date?"Recebido em":"Previsão"}),n.jsx("div",{className:"font-medium",children:w.transfer_date?new Date(w.transfer_date).toLocaleDateString("pt-BR"):w.transfer_scheduled_date?new Date(w.transfer_scheduled_date).toLocaleDateString("pt-BR"):"A definir"})]})]})]},w.id)})})})]})]})}function Uq(e){const[t,r]=v.useState(null),[s,a]=v.useState([]),[o,d]=v.useState([]),[u,f]=v.useState(!1),p=async()=>{if(e)try{f(!0);const{data:x,error:w}=await U.from("organizers").select("*").eq("id",e).eq("is_page_active",!0).maybeSingle();if(w)throw w;if(!x)return;const{data:_}=await U.from("profiles").select("display_name, avatar_url, bio").eq("user_id",x.user_id).maybeSingle(),{data:j}=await U.from("organizer_stats").select("*").eq("organizer_id",e).maybeSingle(),N={...x,profile:_,stats:j||{followers_count:0,events_count:0,average_rating:0,total_ratings:0}};r(N);const{data:C,error:A}=await U.from("events").select("*").eq("organizer_id",e).order("event_date",{ascending:!1});if(A)throw A;const S=await Promise.all((C||[]).map(async T=>{const{count:O}=await U.from("event_likes").select("*",{count:"exact",head:!0}).eq("event_id",T.id),{count:L}=await U.from("event_comments").select("*",{count:"exact",head:!0}).eq("event_id",T.id);return{...T,likes_count:O||0,comments_count:L||0}}));a(S);const{data:k,error:b}=await U.from("custom_links").select("*").eq("organizer_id",e).eq("is_active",!0).order("sort_order",{ascending:!0});if(b)throw b;d(k||[])}catch(x){console.error("Error fetching organizer details:",x)}finally{f(!1)}};return v.useEffect(()=>{p()},[e]),v.useEffect(()=>{if(!t)return;const x=U.channel("realtime-organizer-profile-details").on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles",filter:`user_id=eq.${t.user_id}`},w=>{const _=w.new;r(j=>{var N,C,A;return j&&{...j,profile:{...j.profile||{},display_name:_.display_name??((N=j.profile)==null?void 0:N.display_name),avatar_url:_.avatar_url??((C=j.profile)==null?void 0:C.avatar_url),bio:_.bio??((A=j.profile)==null?void 0:A.bio)}}})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"organizers",filter:`id=eq.${t.id}`},w=>{const _=w.new;r(j=>j&&{...j,page_title:_.page_title??j.page_title,avatar_url:_.avatar_url??j.avatar_url,page_description:_.page_description??j.page_description,updated_at:_.updated_at??j.updated_at})}).subscribe();return()=>{U.removeChannel(x)}},[t==null?void 0:t.id,t==null?void 0:t.user_id]),{organizer:t,events:s,customLinks:o,loading:u,refetch:p}}function $q(e){const[t,r]=v.useState(!1),[s,a]=v.useState(!0),{user:o}=wt();v.useEffect(()=>{if(!o||!e){a(!1);return}d()},[o,e]);const d=async()=>{if(!(!o||!e))try{const{data:f,error:p}=await U.from("followers").select("id").eq("user_id",o.id).eq("organizer_id",e).maybeSingle();p&&p.code!=="PGRST116"&&console.error("Error checking follow status:",p),r(!!f)}catch(f){console.error("Error:",f)}finally{a(!1)}};return{isFollowing:t,loading:s,toggleFollow:async()=>{if(!o)return W.error("Faça login para seguir organizadores"),!1;if(!e)return W.error("ID do organizador não encontrado"),!1;a(!0);try{if(t){const{error:f}=await U.from("followers").delete().eq("user_id",o.id).eq("organizer_id",e);if(f)throw f;return r(!1),W.success("Você deixou de seguir este organizador"),!0}else{const{error:f}=await U.from("followers").insert({user_id:o.id,organizer_id:e});if(f)throw f;return r(!0),W.success("Agora você está seguindo este organizador!"),!0}}catch(f){return console.error("Error toggling follow:",f),W.error("Erro ao atualizar status de seguidor"),!1}finally{a(!1)}}}}function qq({eventId:e,organizerId:t}){var P,q,G;const[r,s]=v.useState([]),[a,o]=v.useState(!0),[d,u]=v.useState(!1),[f,p]=v.useState(!1),[x,w]=v.useState(0),[_,j]=v.useState(!1),[N,C]=v.useState(""),{user:A}=wt();if(_t(),Xn(),v.useEffect(()=>{(async()=>{try{const{data:V,error:ee}=await U.from("organizer_photos").select("*").eq("organizer_id",t).eq("event_id",e).eq("is_active",!0).order("created_at",{ascending:!1});if(ee)throw ee;s(V||[])}catch(V){console.error("Error fetching event photos:",V)}finally{o(!1)}})()},[e,t]),a)return n.jsx("div",{className:"grid grid-cols-2 gap-2",children:[1,2,3,4].map(B=>n.jsx(Ct,{className:"aspect-square rounded-lg"},B))});if(r.length===0)return n.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Nenhuma foto deste evento ainda"});const S=B=>{if(!A){C("para ver as fotos ampliadas"),j(!0);return}w(B),p(!0)},k=()=>{if(!A){C("para ver todas as fotos"),j(!0);return}u(!0)},b=B=>{w(B),u(!1),p(!0)},T=async(B,V)=>{try{const X=await(await fetch(B)).blob(),le=window.URL.createObjectURL(X),ue=document.createElement("a");ue.href=le,ue.download=V||"foto-evento.jpg",document.body.appendChild(ue),ue.click(),document.body.removeChild(ue),window.URL.revokeObjectURL(le),W.success("Foto baixada com sucesso!")}catch(ee){console.error("Error downloading photo:",ee),W.error("Erro ao baixar a foto")}},O=()=>{w(B=>B>0?B-1:r.length-1)},L=()=>{w(B=>B<r.length-1?B+1:0)},R=r.slice(0,3),M=r.length-3;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[R.map((B,V)=>n.jsx("div",{className:"aspect-square bg-surface rounded-lg overflow-hidden relative group cursor-pointer",onClick:()=>S(V),children:n.jsx("img",{src:B.photo_url,alt:B.caption||"Foto do evento",className:"w-full h-full object-cover hover:scale-105 transition-transform"})},B.id)),M>0&&n.jsxs("div",{className:"aspect-square bg-surface rounded-lg overflow-hidden relative cursor-pointer",onClick:k,children:[n.jsx("img",{src:r[3].photo_url,alt:"Mais fotos",className:"w-full h-full object-cover"}),n.jsx("div",{className:"absolute inset-0 bg-black/60 hover:bg-black/70 transition-colors flex items-center justify-center",children:n.jsxs("span",{className:"text-white font-bold text-2xl",children:["+",M+1]})})]})]}),n.jsx(zt,{open:d,onOpenChange:u,children:n.jsx(Ft,{className:"max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-lg font-semibold",children:["Todas as fotos (",r.length,")"]}),n.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>u(!1),children:n.jsx(Jr,{className:"h-5 w-5"})})]}),n.jsx("div",{className:"grid grid-cols-3 gap-3",children:r.map((B,V)=>n.jsx("div",{className:"aspect-square bg-surface rounded-lg overflow-hidden cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>b(V),children:n.jsx("img",{src:B.photo_url,alt:B.caption||`Foto ${V+1}`,className:"w-full h-full object-cover"})},B.id))})]})})}),n.jsx(zt,{open:f,onOpenChange:p,children:n.jsx(Ft,{className:"max-w-4xl w-full h-[90vh] p-0 bg-black",children:n.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[n.jsx(Y,{variant:"ghost",size:"icon",className:"absolute top-4 right-4 z-50 bg-black/50 hover:bg-black/70 text-white",onClick:()=>p(!1),children:n.jsx(Jr,{className:"h-6 w-6"})}),n.jsx(Y,{variant:"ghost",size:"icon",className:"absolute top-4 right-16 z-50 bg-black/50 hover:bg-black/70 text-white",onClick:()=>T(r[x].photo_url,r[x].caption),children:n.jsx(Xo,{className:"h-6 w-6"})}),r.length>1&&n.jsx(Y,{variant:"ghost",size:"icon",className:"absolute left-4 z-50 bg-black/50 hover:bg-black/70 text-white",onClick:O,children:n.jsx(N1,{className:"h-8 w-8"})}),r.length>1&&n.jsx(Y,{variant:"ghost",size:"icon",className:"absolute right-4 z-50 bg-black/50 hover:bg-black/70 text-white",onClick:L,children:n.jsx(Eu,{className:"h-8 w-8"})}),n.jsx("img",{src:(P=r[x])==null?void 0:P.photo_url,alt:((q=r[x])==null?void 0:q.caption)||"Foto do evento",className:"max-h-full max-w-full object-contain"}),n.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/50 text-white px-4 py-2 rounded-full text-sm",children:[x+1," / ",r.length]}),((G=r[x])==null?void 0:G.caption)&&n.jsx("div",{className:"absolute bottom-16 left-1/2 -translate-x-1/2 bg-black/50 text-white px-4 py-2 rounded-lg text-sm max-w-md text-center",children:r[x].caption})]})})}),n.jsx(Fu,{open:_,onOpenChange:j,actionDescription:N})]})}function Vq({onBack:e,organizerId:t,onEventClick:r}){var K,ae,de,se,me,Re,ze;const[s,a]=v.useState("eventos"),[o,d]=v.useState([]),[u,f]=v.useState(!1),[p,x]=v.useState(!1),[w,_]=v.useState(!1),[j,N]=v.useState(""),[C,A]=v.useState(!1),[S,k]=v.useState(""),b=v.useRef(null),{organizersWithStories:T,toggleLike:O,markAsViewed:L,deleteStory:R}=dv(),{organizer:M,events:P,customLinks:q,loading:G}=Uq(t),{updateOrganizerProfile:B}=ri(),{user:V}=wt();_t(),Xn();const{isFollowing:ee,loading:X,toggleFollow:le}=$q(t);v.useEffect(()=>{s==="fotos"&&(async()=>{if(!t)return;const{data:Ne}=await U.from("events").select("*").eq("organizer_id",t).order("event_date",{ascending:!1});d(Ne||[])})()},[t,s]);const ue=()=>{if(!M)return;const ye=`${Xm()}/${M.username}`;navigator.clipboard.writeText(ye).then(()=>{W.success("Link copiado!",{description:"O link da página foi copiado para a área de transferência"})}).catch(()=>{W.error("Erro ao copiar link")})},oe=async ye=>{var _e;const Ne=(_e=ye.target.files)==null?void 0:_e[0];if(!Ne||!V)return;const we=Ne.type.toLowerCase();if(!["image/jpeg","image/jpg","image/png","image/webp","image/gif"].includes(we)){W.error("Formato não suportado",{description:"Por favor, use imagens JPG, PNG ou WEBP. Se você está no iPhone, abra a foto no app Fotos e compartilhe > Salvar imagem para converter automaticamente para JPG."});return}if(Ne.size>5*1024*1024){W.error("Arquivo muito grande",{description:"A imagem deve ter no máximo 5MB"});return}try{f(!0);const Qe=await te(Ne);if(!Qe){W.error("Erro ao processar imagem");return}const ce=Date.now(),Se=`${V.id}/cover-${ce}.jpg`,{error:ke}=await U.storage.from("user-uploads").upload(Se,Qe,{upsert:!0});if(ke)throw ke;const{data:{publicUrl:Je}}=U.storage.from("user-uploads").getPublicUrl(Se);await B({cover_image_url:Je}),W.success("Capa atualizada com sucesso!"),window.location.reload()}catch(Qe){console.error("Error uploading cover:",Qe),W.error("Erro ao atualizar capa")}finally{f(!1)}},te=ye=>new Promise(Ne=>{const we=new FileReader;we.onload=Xe=>{var Qe;const _e=new Image;_e.onload=()=>{const ce=document.createElement("canvas"),Se=Math.min(_e.width,_e.height),ke=800;ce.width=ke,ce.height=ke;const Je=ce.getContext("2d");if(!Je){Ne(null);return}const Ae=(_e.width-Se)/2,Lt=(_e.height-Se)/2;Je.drawImage(_e,Ae,Lt,Se,Se,0,0,ke,ke),ce.toBlob(yt=>{Ne(yt?new File([yt],"cover.jpg",{type:"image/jpeg"}):null)},"image/jpeg",.95)},_e.onerror=()=>Ne(null),_e.src=(Qe=Xe.target)==null?void 0:Qe.result},we.onerror=()=>Ne(null),we.readAsDataURL(ye)}),be=async()=>{if(V)try{x(!0),await B({cover_image_url:null}),W.success("Capa removida com sucesso!"),window.location.reload()}catch(ye){console.error("Error removing cover:",ye),W.error("Erro ao remover capa")}finally{x(!1)}},ve=ye=>{const Ne=new Date(ye),Xe=["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"][Ne.getDay()],_e=Ne.getHours().toString().padStart(2,"0"),Qe=Ne.getMinutes().toString().padStart(2,"0");return`${Xe}, ${_e}:${Qe}`};if(G)return n.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[n.jsxs("div",{className:"flex items-center gap-4 p-4",children:[n.jsx(Y,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(mt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Organizador"})]}),n.jsxs("div",{className:"px-4 pb-6 text-center space-y-4",children:[n.jsx(Ct,{className:"h-24 w-24 rounded-full mx-auto"}),n.jsx(Ct,{className:"h-6 w-48 mx-auto"}),n.jsx(Ct,{className:"h-4 w-64 mx-auto"}),n.jsx("div",{className:"flex justify-center gap-6",children:[1,2,3].map(ye=>n.jsxs("div",{className:"text-center",children:[n.jsx(Ct,{className:"h-6 w-12 mx-auto mb-1"}),n.jsx(Ct,{className:"h-3 w-16 mx-auto"})]},ye))})]})]});if(!M)return n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-muted-foreground mb-4",children:"Organizador não encontrado"}),n.jsx(Y,{variant:"outline",onClick:e,children:"Voltar"})]})});const H=V&&M.user_id===V.id,J=[{id:"eventos",label:"Eventos",icon:kt},{id:"links",label:"Links",icon:zr},{id:"fotos",label:"Fotos",icon:Cn},...H?[{id:"financeiro",label:"Financeiro",icon:Sn}]:[]];return n.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[n.jsxs("div",{className:"relative h-[200px] overflow-hidden",style:{backgroundImage:M.cover_image_url?`url(${M.cover_image_url})`:"linear-gradient(135deg, hsl(var(--primary)) 0%, hsl(var(--primary) / 0.8) 25%, hsl(220 70% 50%) 50%, hsl(200 70% 50%) 75%, hsl(var(--primary) / 0.6) 100%)",backgroundSize:"cover",backgroundPosition:"center"},children:[n.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:"rgba(0, 0, 0, 0.5)",zIndex:0}}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 pointer-events-none",style:{height:"120px",background:"linear-gradient(to top, hsl(var(--background)) 0%, hsl(var(--background) / 0.95) 40%, transparent 100%)",zIndex:1}}),n.jsxs("div",{className:"flex items-center justify-between p-4 relative",style:{zIndex:10},children:[n.jsx(Y,{variant:"ghost",size:"icon",onClick:e,className:"bg-black/20 hover:bg-black/40 backdrop-blur-sm",children:n.jsx(mt,{className:"h-5 w-5 text-white"})}),n.jsx(Y,{variant:"ghost",size:"icon",onClick:ue,className:"bg-black/20 hover:bg-black/40 backdrop-blur-sm",children:n.jsx(ks,{className:"h-5 w-5 text-white"})})]}),V&&M.user_id===V.id&&n.jsxs(n.Fragment,{children:[n.jsx("input",{ref:b,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp,image/gif",onChange:oe,className:"hidden"}),n.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",style:{zIndex:10},children:[M.cover_image_url&&n.jsx(Y,{variant:"ghost",size:"icon",onClick:be,disabled:p,className:"bg-red-500/80 hover:bg-red-600/90 backdrop-blur-sm text-white",title:"Remover capa",children:p?n.jsx("div",{className:"h-5 w-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):n.jsx(Cn,{className:"h-5 w-5"})}),n.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>{var ye;return(ye=b.current)==null?void 0:ye.click()},disabled:u,className:"bg-black/20 hover:bg-black/40 backdrop-blur-sm text-white",title:M.cover_image_url?"Alterar capa":"Adicionar capa",children:u?n.jsx("div",{className:"h-5 w-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):n.jsx(Cn,{className:"h-5 w-5"})})]})]})]}),n.jsxs("div",{className:"px-4 pb-6 text-center -mt-24 relative z-10",children:[n.jsx(Vt,{className:"h-24 w-24 mx-auto mb-4 border-4 border-background shadow-lg cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>{if(t){const ye=T.find(Ne=>Ne.id===t);ye&&ye.stories.length>0&&A(!0)}},children:M.avatar_url||(K=M.profile)!=null&&K.avatar_url?n.jsx(Yt,{src:M.avatar_url||((ae=M.profile)==null?void 0:ae.avatar_url),alt:M.page_title}):n.jsx(Wt,{className:"bg-primary text-primary-foreground text-2xl",children:M.page_title.charAt(0)})}),n.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:((de=M.profile)==null?void 0:de.display_name)||M.page_title}),n.jsx("p",{className:"text-muted-foreground max-w-sm mx-auto mb-4",children:((se=M.profile)==null?void 0:se.bio)||M.page_description||"Organizador de eventos"}),n.jsxs("div",{className:"flex justify-center gap-8 mb-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-lg font-semibold text-foreground",children:((Re=(me=M.stats)==null?void 0:me.followers_count)==null?void 0:Re.toLocaleString())||"0"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Seguidores"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-lg font-semibold text-foreground",children:((ze=M.stats)==null?void 0:ze.events_count)||P.length}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Eventos"})]})]}),!V||M.user_id!==V.id?n.jsxs("div",{className:"flex justify-center gap-3",children:[n.jsx(Y,{variant:"glow",size:"lg",className:"flex-1 max-w-[200px]",onClick:async()=>{V?await le():(N("para seguir este organizador"),_(!0))},disabled:X,children:X?"Carregando...":ee?n.jsxs(n.Fragment,{children:[n.jsx(kj,{className:"h-4 w-4 mr-2"}),"Seguindo"]}):n.jsxs(n.Fragment,{children:[n.jsx(S1,{className:"h-4 w-4 mr-2"}),"Seguir"]})}),n.jsxs(Y,{variant:"outline",size:"lg",onClick:ue,children:[n.jsx(ks,{className:"h-4 w-4 mr-2"}),"Compartilhar"]})]}):n.jsx("div",{className:"flex justify-center",children:n.jsxs(Y,{variant:"outline",size:"lg",onClick:ue,children:[n.jsx(ks,{className:"h-4 w-4 mr-2"}),"Compartilhar minha página"]})})]}),n.jsx("div",{className:"px-4 mb-6 -mt-4 relative",style:{zIndex:10},children:n.jsx("div",{className:"flex gap-2 justify-center",children:J.map(ye=>{const Ne=ye.icon;return n.jsxs("button",{onClick:()=>a(ye.id),className:`flex-shrink-0 flex items-center gap-2 px-4 py-2 rounded-full border transition-all ${s===ye.id?"bg-primary text-primary-foreground border-primary":"bg-surface border-border text-muted-foreground hover:text-foreground hover:border-primary/50"}`,children:[n.jsx(Ne,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm font-medium",children:ye.label})]},ye.id)})})}),n.jsxs("div",{className:"px-4 max-w-md mx-auto",children:[s==="eventos"&&n.jsx("div",{className:"space-y-4",children:P.length>0?P.map(ye=>n.jsxs(je,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>r==null?void 0:r(ye.id),children:[n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:ye.image_url||"/placeholder.svg",alt:ye.title,className:"w-full h-32 object-cover"}),ye.is_live&&n.jsxs(ct,{className:"absolute top-2 right-2 bg-destructive text-destructive-foreground",children:[n.jsx("div",{className:"h-2 w-2 bg-white rounded-full animate-pulse mr-1"}),"AO VIVO"]})]}),n.jsxs(Ee,{className:"p-4",children:[n.jsx("h3",{className:"font-semibold text-foreground mb-1",children:ye.title}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[n.jsx(kt,{className:"h-3 w-3"}),n.jsx("span",{children:ve(ye.event_date)})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(Tt,{className:"h-3 w-3"}),n.jsx("span",{children:ye.location}),n.jsx(tr,{className:"h-3 w-3 ml-auto"}),n.jsx("span",{children:ye.current_attendees})]}),n.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Ta,{className:"h-3 w-3"}),n.jsx("span",{children:ye.likes_count||0})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(us,{className:"h-3 w-3"}),n.jsx("span",{children:ye.comments_count||0})]})]})]})]},ye.id)):n.jsxs("div",{className:"text-center py-8",children:[n.jsx("p",{className:"text-muted-foreground",children:"Nenhum evento criado ainda."}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Os eventos aparecerão aqui assim que forem criados."})]})}),s==="links"&&n.jsxs("div",{className:"space-y-3",children:[M.show_whatsapp&&M.whatsapp_url&&n.jsx(je,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ee,{className:"p-4",children:n.jsxs("a",{href:M.whatsapp_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-green-500 text-white",children:n.jsx(us,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:"WhatsApp"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Entre em contato"})]}),n.jsx(zr,{className:"h-4 w-4 text-muted-foreground"})]})})}),M.show_instagram&&M.instagram_url&&n.jsx(je,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ee,{className:"p-4",children:n.jsxs("a",{href:M.instagram_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-gradient-to-br from-purple-600 via-pink-600 to-orange-500 text-white",children:n.jsx(Gi,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:"Instagram"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Siga no Instagram"})]}),n.jsx(zr,{className:"h-4 w-4 text-muted-foreground"})]})})}),M.show_playlist&&M.playlist_url&&n.jsx(je,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ee,{className:"p-4",children:n.jsxs("a",{href:M.playlist_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-purple-600 text-white",children:n.jsx(ru,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:"Playlist"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Ouça nossa playlist"})]}),n.jsx(zr,{className:"h-4 w-4 text-muted-foreground"})]})})}),M.show_location&&M.location_url&&n.jsx(je,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ee,{className:"p-4",children:n.jsxs("a",{href:M.location_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-red-500 text-white",children:n.jsx(Tt,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:"Localização"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Veja no mapa"})]}),n.jsx(zr,{className:"h-4 w-4 text-muted-foreground"})]})})}),M.show_website&&M.website_url&&n.jsx(je,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ee,{className:"p-4",children:n.jsxs("a",{href:M.website_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-blue-600 text-white",children:n.jsx(tu,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:"Site"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Visite nosso site"})]}),n.jsx(zr,{className:"h-4 w-4 text-muted-foreground"})]})})}),q.length>0&&q.map(ye=>n.jsx(je,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ee,{className:"p-4",children:n.jsxs("a",{href:ye.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white text-sm font-bold",style:{backgroundColor:ye.color},children:ye.icon||ye.title.charAt(0)}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:ye.title}),n.jsx("p",{className:"text-sm text-muted-foreground truncate",children:ye.url})]}),n.jsx(zr,{className:"h-4 w-4 text-muted-foreground"})]})})},ye.id)),!M.show_whatsapp&&!M.show_instagram&&!M.show_playlist&&!M.show_location&&!M.show_website&&q.length===0&&n.jsxs("div",{className:"text-center py-8",children:[n.jsx("p",{className:"text-muted-foreground",children:"Nenhum link adicionado ainda."}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Os links aparecerão aqui quando forem adicionados."})]})]}),s==="fotos"&&n.jsx("div",{className:"space-y-6",children:o.length===0?n.jsx("div",{className:"text-center py-8",children:n.jsxs("div",{className:"mb-4",children:[n.jsx(Cn,{className:"h-12 w-12 text-muted-foreground mx-auto mb-2"}),n.jsx("p",{className:"text-muted-foreground",children:"O organizador ainda não adicionou fotos."})]})}):o.map(ye=>n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-foreground",children:ye.title}),n.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(ye.event_date).toLocaleDateString("pt-BR")})]}),n.jsx(qq,{eventId:ye.id,organizerId:M.id})]},ye.id))}),s==="financeiro"&&H&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Dados Financeiros"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Gerencie suas informações bancárias e fiscais para receber repasses"})]}),n.jsx(IA,{organizerId:M.id})]}),n.jsx(Separator,{className:"my-8"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Vendas de Ingressos"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Acompanhe suas vendas e repasses"})]}),n.jsx(RA,{organizerId:M.id})]})]})]}),C&&t&&T.find(ye=>ye.id===t)&&n.jsx(cv,{open:C,onClose:()=>A(!1),organizer:T.find(ye=>ye.id===t),initialStoryIndex:0,onLike:O,onDelete:R,onMarkAsViewed:L}),n.jsx("footer",{className:"mt-8 pb-6 text-center border-t border-border pt-6",children:n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Esse site foi desenvolvido pela ",n.jsx("a",{href:"https://flatgrowth.com.br/",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Flat Company"})]})}),n.jsx(Fu,{open:w,onOpenChange:_,actionDescription:j})]})}function Wq(){const[e,t]=v.useState([]),[r,s]=v.useState(!1),a=async()=>{try{s(!0);const{data:o,error:d}=await U.from("organizers").select(`
          *,
          stats:organizer_stats(
            followers_count,
            events_count
          )
        `).eq("is_page_active",!0).order("created_at",{ascending:!1});if(d)throw d;const u=await Promise.all((o||[]).map(async f=>{const[p,x,w]=await Promise.all([U.from("profiles").select("display_name, avatar_url, bio").eq("user_id",f.user_id).maybeSingle(),U.from("followers").select("id",{count:"exact",head:!0}).eq("organizer_id",f.id),U.from("events").select("id",{count:"exact",head:!0}).eq("organizer_id",f.id)]),_=p.data,j=x.count??0,N=w.count??0;return{...f,profile:_,verified:Math.random()>.5,category:f.page_subtitle||"Entretenimento",stats:{followers_count:j,events_count:N}}}));t(u)}catch(o){console.error("Error fetching organizers:",o)}finally{s(!1)}};return v.useEffect(()=>{a()},[]),v.useEffect(()=>{const o=U.channel("realtime-organizer-list").on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles"},d=>{const u=d.new;t(f=>f.map(p=>{var x,w,_;return p.user_id===u.user_id?{...p,profile:{...p.profile||{},display_name:u.display_name??((x=p.profile)==null?void 0:x.display_name),avatar_url:u.avatar_url??((w=p.profile)==null?void 0:w.avatar_url),bio:u.bio??((_=p.profile)==null?void 0:_.bio)}}:p}))}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"organizers"},d=>{const u=d.new;t(f=>f.map(p=>p.id===u.id?{...p,page_title:u.page_title??p.page_title,avatar_url:u.avatar_url??p.avatar_url,page_description:u.page_description??p.page_description,updated_at:u.updated_at??p.updated_at}:p))}).on("postgres_changes",{event:"INSERT",schema:"public",table:"followers"},d=>{const u=d.new;t(f=>f.map(p=>{var x,w;if(p.id===u.organizer_id){const _=((x=p.stats)==null?void 0:x.followers_count)??0;return{...p,stats:{followers_count:_+1,events_count:((w=p.stats)==null?void 0:w.events_count)??0}}}return p}))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"followers"},d=>{const u=d.old;t(f=>f.map(p=>{var x,w;if(p.id===u.organizer_id){const _=((x=p.stats)==null?void 0:x.followers_count)??0;return{...p,stats:{followers_count:Math.max(0,_-1),events_count:((w=p.stats)==null?void 0:w.events_count)??0}}}return p}))}).on("postgres_changes",{event:"INSERT",schema:"public",table:"events"},d=>{const u=d.new;t(f=>f.map(p=>{var x,w;if(p.id===u.organizer_id){const _=((x=p.stats)==null?void 0:x.events_count)??0;return{...p,stats:{followers_count:((w=p.stats)==null?void 0:w.followers_count)??0,events_count:_+1}}}return p}))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"events"},d=>{const u=d.old;t(f=>f.map(p=>{var x,w;if(p.id===u.organizer_id){const _=((x=p.stats)==null?void 0:x.events_count)??0;return{...p,stats:{followers_count:((w=p.stats)==null?void 0:w.followers_count)??0,events_count:Math.max(0,_-1)}}}return p}))}).subscribe();return()=>{U.removeChannel(o)}},[]),{organizers:e,loading:r,fetchOrganizers:a}}function Hq({onBack:e,onOrganizerClick:t}){const[r,s]=v.useState(""),[a,o]=v.useState("todos"),{organizers:d,loading:u}=Wq(),f=[{id:"todos",label:"Todos"},{id:"festas",label:"🎉 Festas"},{id:"shows",label:"🎤 Shows"},{id:"fitness",label:"💪 Fitness"},{id:"igreja",label:"🙏 Igreja"},{id:"cursos",label:"📚 Cursos"},{id:"bares",label:"🍻 Bares"},{id:"boates",label:"🪩 Boates"},{id:"esportes",label:"⚽ Esportes"},{id:"encontros",label:"👥 Encontros"}],p=d.filter(x=>{var j;const w=x.page_title.toLowerCase().includes(r.toLowerCase())||(((j=x.profile)==null?void 0:j.bio)||"").toLowerCase().includes(r.toLowerCase()),_=a==="todos"||(x.category||"")===a;return w&&_});return u?n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b border-border",children:n.jsxs("div",{className:"flex items-center justify-between p-4 max-w-md mx-auto",children:[n.jsx(Y,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(mt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Organizadores"}),n.jsx("div",{className:"w-10"})]})}),n.jsx("div",{className:"p-4 max-w-md mx-auto pb-20 space-y-4",children:[1,2,3,4].map(x=>n.jsx("div",{className:"p-4 space-y-3",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Ct,{className:"h-12 w-12 rounded-full"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx(Ct,{className:"h-4 w-32"}),n.jsx(Ct,{className:"h-4 w-full"}),n.jsx(Ct,{className:"h-4 w-24"})]})]})},x))})]}):n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b border-border",children:n.jsxs("div",{className:"flex items-center justify-between p-4 max-w-md mx-auto",children:[n.jsx(Y,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(mt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Organizadores"}),n.jsx("div",{className:"w-10"})]})}),n.jsxs("div",{className:"p-4 max-w-md mx-auto pb-20",children:[n.jsx("div",{className:"mb-4",children:n.jsxs("div",{className:"relative",children:[n.jsx(nu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(xe,{type:"text",placeholder:"Buscar organizadores...",value:r,onChange:x=>s(x.target.value),className:"pl-10"})]})}),n.jsx("div",{className:"mb-6",children:n.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:f.map(x=>n.jsx("button",{onClick:()=>o(x.id),className:`flex-shrink-0 px-4 py-2 rounded-full border transition-all ${a===x.id?"bg-primary text-primary-foreground border-primary":"bg-surface border-border text-muted-foreground hover:text-foreground hover:border-primary/50"}`,children:n.jsx("span",{className:"text-sm font-medium",children:x.label})},x.id))})}),n.jsx("div",{className:"space-y-4",children:p.map(x=>{var w,_,j,N,C;return n.jsx("div",{onClick:()=>t(x.id),className:"p-4 bg-card rounded-lg border border-border hover:border-primary/30 transition-all cursor-pointer event-card",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"avatar-story",children:n.jsxs(Vt,{className:"h-12 w-12",children:[n.jsx(Yt,{src:((w=x.profile)==null?void 0:w.avatar_url)||x.avatar_url}),n.jsx(Wt,{className:"bg-surface text-lg font-bold",children:x.page_title.charAt(0)})]})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h3",{className:"font-semibold text-foreground line-clamp-1",children:((_=x.profile)==null?void 0:_.display_name)||x.page_title}),x.verified&&n.jsx(ct,{variant:"secondary",className:"text-xs",children:"✓ Verificado"})]}),n.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:((j=x.profile)==null?void 0:j.bio)||x.page_description||"Organizador de eventos"}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(tr,{className:"h-3 w-3"}),n.jsxs("span",{children:[(((N=x.stats)==null?void 0:N.followers_count)||0).toLocaleString()," seguidores"]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(kt,{className:"h-3 w-3"}),n.jsxs("span",{children:[((C=x.stats)==null?void 0:C.events_count)||0," eventos"]})]})]}),x.category&&n.jsx("div",{className:"mt-2",children:n.jsx(ct,{variant:"outline",className:"text-xs",children:x.category.charAt(0).toUpperCase()+x.category.slice(1)})})]})]})},x.id)})}),p.length===0&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx(nu,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"Nenhum organizador encontrado"}),n.jsx("p",{className:"text-muted-foreground",children:"Tente ajustar os filtros ou buscar por outros termos"})]})]})]})}var op="Checkbox",[Gq]=qr(op),[Xq,Av]=Gq(op);function Kq(e){const{__scopeCheckbox:t,checked:r,children:s,defaultChecked:a,disabled:o,form:d,name:u,onCheckedChange:f,required:p,value:x="on",internal_do_not_use_render:w}=e,[_,j]=sa({prop:r,defaultProp:a??!1,onChange:f,caller:op}),[N,C]=v.useState(null),[A,S]=v.useState(null),k=v.useRef(!1),b=N?!!d||!!N.closest("form"):!0,T={checked:_,disabled:o,setChecked:j,control:N,setControl:C,name:u,form:d,value:x,hasConsumerStoppedPropagationRef:k,required:p,defaultChecked:$i(a)?!1:a,isFormControl:b,bubbleInput:A,setBubbleInput:S};return n.jsx(Xq,{scope:t,...T,children:Yq(w)?w(T):s})}var PA="CheckboxTrigger",OA=v.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...s},a)=>{const{control:o,value:d,disabled:u,checked:f,required:p,setControl:x,setChecked:w,hasConsumerStoppedPropagationRef:_,isFormControl:j,bubbleInput:N}=Av(PA,e),C=at(a,x),A=v.useRef(f);return v.useEffect(()=>{const S=o==null?void 0:o.form;if(S){const k=()=>w(A.current);return S.addEventListener("reset",k),()=>S.removeEventListener("reset",k)}},[o,w]),n.jsx(He.button,{type:"button",role:"checkbox","aria-checked":$i(f)?"mixed":f,"aria-required":p,"data-state":BA(f),"data-disabled":u?"":void 0,disabled:u,value:d,...s,ref:C,onKeyDown:De(t,S=>{S.key==="Enter"&&S.preventDefault()}),onClick:De(r,S=>{w(k=>$i(k)?!0:!k),N&&j&&(_.current=S.isPropagationStopped(),_.current||S.stopPropagation())})})});OA.displayName=PA;var kv=v.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:s,checked:a,defaultChecked:o,required:d,disabled:u,value:f,onCheckedChange:p,form:x,...w}=e;return n.jsx(Kq,{__scopeCheckbox:r,checked:a,defaultChecked:o,disabled:u,required:d,onCheckedChange:p,name:s,form:x,value:f,internal_do_not_use_render:({isFormControl:_})=>n.jsxs(n.Fragment,{children:[n.jsx(OA,{...w,ref:t,__scopeCheckbox:r}),_&&n.jsx(FA,{__scopeCheckbox:r})]})})});kv.displayName=op;var DA="CheckboxIndicator",MA=v.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:s,...a}=e,o=Av(DA,r);return n.jsx(Vr,{present:s||$i(o.checked)||o.checked===!0,children:n.jsx(He.span,{"data-state":BA(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});MA.displayName=DA;var LA="CheckboxBubbleInput",FA=v.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:s,hasConsumerStoppedPropagationRef:a,checked:o,defaultChecked:d,required:u,disabled:f,name:p,value:x,form:w,bubbleInput:_,setBubbleInput:j}=Av(LA,e),N=at(r,j),C=Zm(o),A=bm(s);v.useEffect(()=>{const k=_;if(!k)return;const b=window.HTMLInputElement.prototype,O=Object.getOwnPropertyDescriptor(b,"checked").set,L=!a.current;if(C!==o&&O){const R=new Event("click",{bubbles:L});k.indeterminate=$i(o),O.call(k,$i(o)?!1:o),k.dispatchEvent(R)}},[_,C,o,a]);const S=v.useRef($i(o)?!1:o);return n.jsx(He.input,{type:"checkbox","aria-hidden":!0,defaultChecked:d??S.current,required:u,disabled:f,name:p,value:x,form:w,...t,tabIndex:-1,ref:N,style:{...t.style,...A,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});FA.displayName=LA;function Yq(e){return typeof e=="function"}function $i(e){return e==="indeterminate"}function BA(e){return $i(e)?"indeterminate":e?"checked":"unchecked"}const zA=v.forwardRef(({className:e,...t},r)=>n.jsx(kv,{ref:r,className:Be("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:n.jsx(MA,{className:Be("flex items-center justify-center text-current"),children:n.jsx(Os,{className:"h-4 w-4"})})}));zA.displayName=kv.displayName;function UA({onBack:e,eventId:t}){const{user:r}=wt(),[s,a]=v.useState(null),[o,d]=v.useState(!0),[u,f]=v.useState({name:"",email:(r==null?void 0:r.email)||"",phone:""}),[p,x]=v.useState({}),[w,_]=v.useState(!1),[j,N]=v.useState(!1);v.useEffect(()=>{t&&C()},[t]);const C=async()=>{try{d(!0);const{data:b,error:T}=await U.from("events").select("*").eq("id",t).single();if(T)throw T;a(b)}catch(b){console.error("Error fetching event:",b),W.error("Erro ao carregar evento")}finally{d(!1)}},A=(b,T)=>{f(O=>({...O,[b]:T}))},S=(b,T)=>{if(T){const O=new FileReader;O.onload=L=>{var M;const R=(M=L.target)==null?void 0:M.result;x(P=>({...P,[b]:R})),A(b,T.name)},O.readAsDataURL(T)}},k=async b=>{if(b.preventDefault(),!r||!t){W.error("Você precisa estar logado");return}try{N(!0);const T={};((s==null?void 0:s.form_fields)||[]).forEach(R=>{(R.type==="photo"||R.type==="file")&&p[R.id]?T[R.label]=p[R.id]:u[R.id]&&(T[R.label]=u[R.id])});const{error:L}=await U.from("event_registrations").insert({event_id:t,user_id:r.id,user_name:u.name,user_email:u.email,user_phone:u.phone||null,registration_data:T,status:"confirmed"});if(L)throw L;W.success("Cadastro realizado com sucesso!"),_(!0)}catch(T){console.error("Error submitting registration:",T),T.code==="23505"?W.error("Você já está cadastrado neste evento"):W.error("Erro ao realizar cadastro")}finally{N(!1)}};return o?n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:n.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})}):s?w?n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:n.jsx(je,{className:"w-full max-w-md mx-4",children:n.jsxs(Ee,{className:"p-6 text-center space-y-4",children:[n.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx(Os,{className:"h-8 w-8 text-green-600"})}),n.jsx("h2",{className:"text-xl font-semibold",children:"Cadastro Realizado!"}),n.jsx("p",{className:"text-muted-foreground",children:"Seu cadastro foi enviado com sucesso. Você receberá um e-mail de confirmação em breve."}),n.jsx(Y,{onClick:e,className:"w-full",children:"Voltar ao Evento"})]})})}):n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b border-border",children:n.jsxs("div",{className:"flex items-center justify-between p-4 max-w-md mx-auto",children:[n.jsx(Y,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(mt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Cadastro no Evento"}),n.jsx("div",{className:"w-10"})]})}),n.jsxs("div",{className:"p-4 max-w-md mx-auto pb-20",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-bold mb-2",children:s.title}),n.jsx("p",{className:"text-muted-foreground text-sm",children:"Preencha os dados abaixo para confirmar sua presença no evento."})]}),n.jsxs("form",{onSubmit:k,className:"space-y-4",children:[n.jsx(je,{children:n.jsxs(Ee,{className:"p-4 space-y-4",children:[n.jsxs("div",{children:[n.jsxs(ie,{children:["Nome Completo ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(xe,{type:"text",value:u.name,onChange:b=>A("name",b.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsxs(ie,{children:["Email ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(xe,{type:"email",value:u.email,onChange:b=>A("email",b.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsx(ie,{children:"Telefone"}),n.jsx(xe,{type:"tel",placeholder:"(11) 99999-9999",value:u.phone,onChange:b=>A("phone",b.target.value)})]})]})}),s.form_fields&&Array.isArray(s.form_fields)&&s.form_fields.length>0&&n.jsx(n.Fragment,{children:s.form_fields.map(b=>{var T,O;return n.jsx(je,{children:n.jsx(Ee,{className:"p-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs(ie,{className:"flex items-center gap-1",children:[b.label,b.required&&n.jsx("span",{className:"text-destructive",children:"*"})]}),b.type==="text"&&n.jsx(xe,{type:"text",value:u[b.id]||"",onChange:L=>A(b.id,L.target.value),required:b.required}),b.type==="email"&&n.jsx(xe,{type:"email",value:u[b.id]||"",onChange:L=>A(b.id,L.target.value),required:b.required}),b.type==="phone"&&n.jsx(xe,{type:"tel",value:u[b.id]||"",onChange:L=>A(b.id,L.target.value),required:b.required}),b.type==="date"&&n.jsx(xe,{type:"date",value:u[b.id]||"",onChange:L=>A(b.id,L.target.value),required:b.required}),b.type==="select"&&n.jsxs(Zs,{value:u[b.id]||"",onValueChange:L=>A(b.id,L),children:[n.jsx(Es,{children:n.jsx(Js,{placeholder:"Selecione uma opção"})}),n.jsx(Ss,{children:(T=b.options)==null?void 0:T.map((L,R)=>n.jsx(qt,{value:L,children:L},R))})]}),b.type==="checkbox"&&n.jsx("div",{className:"space-y-2",children:(O=b.options)==null?void 0:O.map((L,R)=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(zA,{id:`${b.id}-${R}`,checked:(u[b.id]||[]).includes(L),onCheckedChange:M=>{const P=u[b.id]||[],q=M?[...P,L]:P.filter(G=>G!==L);A(b.id,q)}}),n.jsx(ie,{htmlFor:`${b.id}-${R}`,className:"font-normal cursor-pointer",children:L})]},R))}),b.type==="photo"&&n.jsx("div",{className:"space-y-2",children:p[b.id]?n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:p[b.id],alt:"Foto enviada",className:"w-full h-32 object-cover rounded border"}),n.jsx(Y,{type:"button",variant:"secondary",size:"sm",className:"absolute top-2 right-2",onClick:()=>{x(L=>({...L,[b.id]:""})),A(b.id,"")},children:"Remover"})]}):n.jsxs("label",{className:"flex flex-col items-center justify-center h-24 border-2 border-dashed border-border rounded cursor-pointer hover:border-primary/50 transition-colors",children:[n.jsx(Ds,{className:"h-6 w-6 text-muted-foreground mb-1"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"Enviar Foto"}),n.jsx("input",{type:"file",accept:"image/*",onChange:L=>{var M;const R=(M=L.target.files)==null?void 0:M[0];R&&S(b.id,R)},className:"hidden",required:b.required})]})}),b.type==="file"&&n.jsx("div",{className:"space-y-2",children:n.jsxs("label",{className:"flex flex-col items-center justify-center h-24 border-2 border-dashed border-border rounded cursor-pointer hover:border-primary/50 transition-colors",children:[n.jsx(Ds,{className:"h-6 w-6 text-muted-foreground mb-1"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:u[b.id]||"Enviar Arquivo"}),n.jsx("input",{type:"file",onChange:L=>{var M;const R=(M=L.target.files)==null?void 0:M[0];R&&A(b.id,R.name)},className:"hidden",required:b.required})]})})]})})},b.id)})}),n.jsx("div",{className:"pt-4",children:n.jsx(Y,{type:"submit",className:"w-full btn-glow",disabled:j,children:j?"Enviando...":"Confirmar Cadastro"})})]})]})]}):n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:n.jsx(je,{className:"w-full max-w-md mx-4",children:n.jsxs(Ee,{className:"p-6 text-center",children:[n.jsx("p",{className:"text-muted-foreground",children:"Evento não encontrado"}),n.jsx(Y,{onClick:e,className:"mt-4",children:"Voltar"})]})})})}function Qq(){const e=_t(),[t,r]=v.useState("home"),[s,a]=v.useState(null),[o,d]=v.useState(null),[u,f]=v.useState(null),[p,x]=v.useState("feed"),[w,_]=v.useState(null),[j,N]=v.useState(0),{user:C,userRole:A,loading:S}=wt(),{setTheme:k}=G1(),b=()=>{x("feed"),N(V=>V+1)};v.useEffect(()=>{!S&&!C&&e("/auth",{replace:!0})},[C,S,e]),v.useEffect(()=>{(async()=>{if(!C||S||A!=="organizer")return;const{data:ee}=await U.from("organizers").select("preferred_theme").eq("user_id",C.id).maybeSingle();if(ee!=null&&ee.preferred_theme){const X=ee.preferred_theme;k(X)}})()},[C,A,S,k]),v.useEffect(()=>{(async()=>{if(!(!C||S||A===null||window.location.pathname.includes("onboarding")))try{const{data:X,error:le}=await U.from("profiles").select("username").eq("user_id",C.id).maybeSingle();if(le){console.error("Error fetching profile:",le);return}if(A==="organizer"){const{data:ue}=await U.from("organizers").select("id, username").eq("user_id",C.id).maybeSingle();(!ue||!ue.username)&&e("/organizer-onboarding",{replace:!0})}else A==="user"&&(!X||!X.username)&&e("/user-onboarding",{replace:!0})}catch(X){console.error("Error checking onboarding:",X)}})()},[C,A,S,e]);const T=Xn();v.useEffect(()=>{const V=T.state||null;V!=null&&V.initialTab&&(r(V.initialTab),e(T.pathname,{replace:!0,state:{}}))},[T,e]);const O=V=>{V==="live-events"?x("liveEvents"):V==="register"?x("eventRegistration"):V==="registrations"?x("eventRegistrations"):(a(V),x("eventDetails"))},L=()=>{x("findFriends")},R=V=>{if(console.log("handleOrganizerClick chamado com ID:",V),!V){console.error("ID do organizador está vazio!");return}d(V),x("organizerProfile")},M=()=>{x("organizersList")},P=V=>{f(V)},q=V=>{_(V),x("editEvent")},G=()=>{x("feed"),a(null),d(null),_(null)};if(S)return n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Carregando..."})]})});const B=()=>{switch(t){case"home":switch(p){case"eventDetails":return n.jsx(IS,{onBack:G,eventId:s,onRegister:()=>{x("eventRegistration")},onManageRegistrations:()=>{x("eventRegistrations")},onViewAttendances:()=>{x("eventAttendances")},onFindFriends:L,onEdit:q});case"editEvent":return n.jsx(w0,{onBack:G,eventId:w||void 0});case"findFriends":return n.jsx(c0,{onBack:G});case"liveEvents":return n.jsx(Bq,{onBack:G,onEventClick:O});case"organizerProfile":return n.jsx(Vq,{onBack:G,organizerId:o||void 0,onEventClick:O});case"organizersList":return n.jsx(Hq,{onBack:G,onOrganizerClick:R});case"eventRegistration":return n.jsx(UA,{onBack:G,eventId:s||void 0});case"eventRegistrations":return n.jsx(Ev,{onBack:G,eventId:s||void 0});case"eventAttendances":return n.jsx(Sv,{onBack:G,eventId:s||void 0});default:return n.jsx(Rb,{onEventClick:O,onFindFriends:L,onOrganizerClick:R,onShowOrganizers:M,onStoryClick:P,userType:A||"user",refreshKey:j})}case"create":return A==="organizer"?n.jsx(w0,{onBack:()=>r("home")}):(r("home"),null);case"friends":return A==="user"?n.jsx(c0,{onBack:()=>r("home")}):(r("home"),null);case"profile":return A==="organizer"?n.jsx(Dq,{}):n.jsx(Fq,{userType:A||"user"});default:return n.jsx(Rb,{onEventClick:O,onFindFriends:L,onOrganizerClick:R,onShowOrganizers:M,onStoryClick:P,userType:A||"user"})}};return n.jsxs("div",{className:"min-h-screen bg-background",children:[B(),n.jsx(X7,{activeTab:t,onTabChange:r,userType:A||"user",onHomeRefresh:b})]})}function Zq({eventId:e,organizerId:t}){var P,q,G;const[r,s]=v.useState([]),[a,o]=v.useState(!0),[d,u]=v.useState(!1),[f,p]=v.useState(!1),[x,w]=v.useState(0),[_,j]=v.useState(!1),[N,C]=v.useState(""),{user:A}=wt();if(_t(),Xn(),v.useEffect(()=>{(async()=>{try{console.log("Buscando fotos para:",{eventId:e,organizerId:t});const{data:V,error:ee}=await U.from("organizer_photos").select("*").eq("organizer_id",t).eq("event_id",e).eq("is_active",!0).order("created_at",{ascending:!1});if(console.log("Fotos encontradas:",V),ee)throw console.error("Erro ao buscar fotos:",ee),ee;s(V||[])}catch(V){console.error("Error fetching event photos:",V)}finally{o(!1)}})()},[e,t]),a)return n.jsx("div",{className:"grid grid-cols-2 gap-2",children:[1,2,3,4].map(B=>n.jsx(Ct,{className:"aspect-square rounded-lg"},B))});if(r.length===0)return n.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Nenhuma foto deste evento ainda"});const S=B=>{if(!A){C("para ver as fotos ampliadas"),j(!0);return}w(B),p(!0)},k=()=>{if(!A){C("para ver todas as fotos"),j(!0);return}u(!0)},b=B=>{w(B),u(!1),p(!0)},T=async(B,V)=>{try{const X=await(await fetch(B)).blob(),le=window.URL.createObjectURL(X),ue=document.createElement("a");ue.href=le,ue.download=V||"foto-evento.jpg",document.body.appendChild(ue),ue.click(),document.body.removeChild(ue),window.URL.revokeObjectURL(le),W.success("Foto baixada com sucesso!")}catch(ee){console.error("Error downloading photo:",ee),W.error("Erro ao baixar a foto")}},O=()=>{w(B=>B>0?B-1:r.length-1)},L=()=>{w(B=>B<r.length-1?B+1:0)},R=r.slice(0,3),M=r.length-3;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[R.map((B,V)=>n.jsx("div",{className:"aspect-square bg-surface rounded-lg overflow-hidden relative group cursor-pointer",onClick:()=>S(V),children:n.jsx("img",{src:B.photo_url,alt:B.caption||"Foto do evento",className:"w-full h-full object-cover hover:scale-105 transition-transform"})},B.id)),M>0&&n.jsxs("div",{className:"aspect-square bg-surface rounded-lg overflow-hidden relative cursor-pointer",onClick:k,children:[n.jsx("img",{src:r[3].photo_url,alt:"Mais fotos",className:"w-full h-full object-cover"}),n.jsx("div",{className:"absolute inset-0 bg-black/60 hover:bg-black/70 transition-colors flex items-center justify-center",children:n.jsxs("span",{className:"text-white font-bold text-2xl",children:["+",M+1]})})]})]}),n.jsx(zt,{open:d,onOpenChange:u,children:n.jsx(Ft,{className:"max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-lg font-semibold",children:["Todas as fotos (",r.length,")"]}),n.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>u(!1),children:n.jsx(Jr,{className:"h-5 w-5"})})]}),n.jsx("div",{className:"grid grid-cols-3 gap-3",children:r.map((B,V)=>n.jsx("div",{className:"aspect-square bg-surface rounded-lg overflow-hidden cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>b(V),children:n.jsx("img",{src:B.photo_url,alt:B.caption||`Foto ${V+1}`,className:"w-full h-full object-cover"})},B.id))})]})})}),n.jsx(zt,{open:f,onOpenChange:p,children:n.jsx(Ft,{className:"max-w-4xl w-full h-[90vh] p-0 bg-black",children:n.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[n.jsx(Y,{variant:"ghost",size:"icon",className:"absolute top-4 right-4 z-50 bg-black/50 hover:bg-black/70 text-white",onClick:()=>p(!1),children:n.jsx(Jr,{className:"h-6 w-6"})}),n.jsx(Y,{variant:"ghost",size:"icon",className:"absolute top-4 right-16 z-50 bg-black/50 hover:bg-black/70 text-white",onClick:()=>T(r[x].photo_url,r[x].caption),children:n.jsx(Xo,{className:"h-6 w-6"})}),r.length>1&&n.jsx(Y,{variant:"ghost",size:"icon",className:"absolute left-4 z-50 bg-black/50 hover:bg-black/70 text-white",onClick:O,children:n.jsx(N1,{className:"h-8 w-8"})}),r.length>1&&n.jsx(Y,{variant:"ghost",size:"icon",className:"absolute right-4 z-50 bg-black/50 hover:bg-black/70 text-white",onClick:L,children:n.jsx(Eu,{className:"h-8 w-8"})}),n.jsx("img",{src:(P=r[x])==null?void 0:P.photo_url,alt:((q=r[x])==null?void 0:q.caption)||"Foto do evento",className:"max-h-full max-w-full object-contain"}),n.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/50 text-white px-4 py-2 rounded-full text-sm",children:[x+1," / ",r.length]}),((G=r[x])==null?void 0:G.caption)&&n.jsx("div",{className:"absolute bottom-16 left-1/2 -translate-x-1/2 bg-black/50 text-white px-4 py-2 rounded-lg text-sm max-w-md text-center",children:r[x].caption})]})})}),n.jsx(Fu,{open:_,onOpenChange:j,actionDescription:N})]})}function Jq(){var ue,oe,te,be,ve;const{slug:e}=hl(),t=_t();Xn();const{user:r}=wt(),[s,a]=v.useState("eventos"),[o,d]=v.useState(null),[u,f]=v.useState([]),[p,x]=v.useState([]),[w,_]=v.useState([]),[j,N]=v.useState(!0),[C,A]=v.useState(!1),[S,k]=v.useState(!1),[b,T]=v.useState(!1),[O,L]=v.useState(""),[R,M]=v.useState(!1),{organizersWithStories:P,toggleLike:q,markAsViewed:G,deleteStory:B}=dv();v.useEffect(()=>{s==="fotos"&&o&&(async()=>{if(!o)return;const{data:J}=await U.from("events").select("*").eq("organizer_id",o.id).order("event_date",{ascending:!1});x(J||[])})()},[s,o]),v.useEffect(()=>((async()=>{if(e)try{N(!0);const{data:J,error:K}=await U.from("organizers").select("*").eq("username",e).eq("is_page_active",!0).maybeSingle();if(K)throw K;if(!J){t("/404");return}const ae=J.preferred_theme||"dark",de=document.documentElement;if(de.classList.remove("dark","light"),de.classList.add(ae),r&&J.user_id===r.id?k(!0):k(!1),r){const{data:we}=await U.from("followers").select("id").eq("user_id",r.id).eq("organizer_id",J.id).maybeSingle();A(!!we)}const{data:se}=await U.from("profiles").select("display_name, avatar_url, bio").eq("user_id",J.user_id).maybeSingle(),{data:me}=await U.from("organizer_stats").select("*").eq("organizer_id",J.id).maybeSingle(),Re={...J,profile:se||void 0,stats:me||{followers_count:0,events_count:0,average_rating:0}};d(Re);const{data:ze}=await U.from("events").select("*").eq("organizer_id",J.id).eq("status","upcoming").order("event_date",{ascending:!0}),ye=await Promise.all((ze||[]).map(async we=>{const{count:Xe}=await U.from("event_likes").select("*",{count:"exact",head:!0}).eq("event_id",we.id),{count:_e}=await U.from("event_comments").select("*",{count:"exact",head:!0}).eq("event_id",we.id);return{...we,likes_count:Xe||0,comments_count:_e||0}}));f(ye);const{data:Ne}=await U.from("custom_links").select("*").eq("organizer_id",J.id).eq("is_active",!0).order("sort_order",{ascending:!0});_(Ne||[])}catch(J){console.error("Error fetching organizer data:",J)}finally{N(!1)}})(),()=>{const J=localStorage.getItem("theme")||"dark",K=document.documentElement;K.classList.remove("dark","light"),K.classList.add(J)}),[e,r,t]),v.useEffect(()=>{if(!o)return;const H=U.channel("realtime-public-organizer-profile").on("postgres_changes",{event:"UPDATE",schema:"public",table:"organizers",filter:`id=eq.${o.id}`},J=>{const K=J.new;d(ae=>ae&&{...ae,...K})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles",filter:`user_id=eq.${o.user_id}`},J=>{const K=J.new;d(ae=>ae&&{...ae,profile:{display_name:K.display_name,avatar_url:K.avatar_url,bio:K.bio}})}).subscribe();return()=>{U.removeChannel(H)}},[o==null?void 0:o.id,o==null?void 0:o.user_id]);const V=async()=>{if(!r){L("para seguir este organizador"),T(!0);return}if(o)try{if(C){const{error:H}=await U.from("followers").delete().eq("user_id",r.id).eq("organizer_id",o.id);if(H)throw H;A(!1),W.success("Você deixou de seguir este organizador")}else{const{error:H}=await U.from("followers").insert({user_id:r.id,organizer_id:o.id});if(H)throw H;A(!0),W.success("Você está seguindo este organizador!")}}catch(H){console.error("Error following/unfollowing:",H),W.error("Erro ao processar sua solicitação")}},ee=()=>{if(!o)return;const H=`${Xm()}/${o.username}`;navigator.clipboard.writeText(H).then(()=>{W.success("Link copiado!",{description:"O link da página foi copiado para a área de transferência"})}).catch(()=>{W.error("Erro ao copiar link")})},X=H=>{const J=new Date(H),ae=["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"][J.getDay()],de=J.getHours().toString().padStart(2,"0"),se=J.getMinutes().toString().padStart(2,"0");return`${ae}, ${de}:${se}`},le=[{id:"eventos",label:"Eventos",icon:kt},{id:"links",label:"Links",icon:zr},{id:"fotos",label:"Fotos",icon:Cn}];return j?n.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[n.jsxs("div",{className:"flex items-center justify-between p-4",children:[n.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>t("/"),children:n.jsx(mt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Organizador"}),n.jsx("div",{className:"w-10"})]}),n.jsxs("div",{className:"px-4 pb-6 text-center space-y-4",children:[n.jsx(Ct,{className:"h-24 w-24 rounded-full mx-auto"}),n.jsx(Ct,{className:"h-6 w-48 mx-auto"}),n.jsx(Ct,{className:"h-4 w-64 mx-auto"})]})]}):o?n.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[n.jsxs("div",{className:"relative h-[200px] overflow-hidden",style:{backgroundImage:o.cover_image_url?`url(${o.cover_image_url})`:"linear-gradient(135deg, hsl(var(--primary)) 0%, hsl(var(--primary) / 0.8) 25%, hsl(220 70% 50%) 50%, hsl(200 70% 50%) 75%, hsl(var(--primary) / 0.6) 100%)",backgroundSize:"cover",backgroundPosition:"center"},children:[n.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:"rgba(0, 0, 0, 0.5)",zIndex:0}}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 pointer-events-none",style:{height:"120px",background:"linear-gradient(to top, hsl(var(--background)) 0%, hsl(var(--background) / 0.95) 40%, transparent 100%)",zIndex:1}}),n.jsxs("div",{className:"flex items-center justify-between p-4 relative",style:{zIndex:10},children:[n.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>t("/"),className:"bg-black/20 hover:bg-black/40 backdrop-blur-sm",children:n.jsx(mt,{className:"h-5 w-5 text-white"})}),n.jsx("h1",{className:"text-lg font-semibold text-white",children:"Organizador"}),n.jsx(Y,{variant:"ghost",size:"icon",onClick:ee,className:"bg-black/20 hover:bg-black/40 backdrop-blur-sm",children:n.jsx(ks,{className:"h-5 w-5 text-white"})})]})]}),n.jsxs("div",{className:"px-4 pb-6 text-center -mt-24 relative z-10",children:[(()=>{var K,ae,de,se;const H=P.find(me=>me.id===o.id),J=H&&H.stories.length>0;return console.log("Debug Stories:",{organizerId:o.id,organizersWithStories:P,currentOrganizerStories:H,hasStories:J}),J?n.jsx("div",{className:"relative inline-block mb-4 p-1 rounded-full cursor-pointer hover:opacity-90 transition-opacity animate-pulse",style:{background:"linear-gradient(45deg, #a855f7, #d946ef, #ec4899, #a855f7)",backgroundSize:"300% 300%"},onClick:()=>M(!0),children:n.jsx("div",{className:"p-[3px] bg-background rounded-full",children:n.jsx(Vt,{className:"h-24 w-24 shadow-lg",children:o.avatar_url||(K=o.profile)!=null&&K.avatar_url?n.jsx(Yt,{src:o.avatar_url||((ae=o.profile)==null?void 0:ae.avatar_url),alt:o.page_title}):n.jsx(Wt,{className:"bg-primary text-primary-foreground text-2xl",children:o.page_title.charAt(0)})})})}):n.jsx("div",{className:"relative inline-block mb-4",children:n.jsx(Vt,{className:"h-24 w-24 mx-auto border-4 border-background shadow-lg",children:o.avatar_url||(de=o.profile)!=null&&de.avatar_url?n.jsx(Yt,{src:o.avatar_url||((se=o.profile)==null?void 0:se.avatar_url),alt:o.page_title}):n.jsx(Wt,{className:"bg-primary text-primary-foreground text-2xl",children:o.page_title.charAt(0)})})})})(),n.jsx("h2",{className:"text-2xl font-bold text-foreground mb-1",children:((ue=o.profile)==null?void 0:ue.display_name)||o.page_title}),o.username&&n.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["@",o.username]}),n.jsx("p",{className:"text-muted-foreground max-w-sm mx-auto mb-4",children:((oe=o.profile)==null?void 0:oe.bio)||o.page_description||"Organizador de eventos"}),o.show_statistics&&n.jsxs("div",{className:"flex justify-center gap-8 mb-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-lg font-semibold text-foreground",children:((be=(te=o.stats)==null?void 0:te.followers_count)==null?void 0:be.toLocaleString())||"0"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Seguidores"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-lg font-semibold text-foreground",children:((ve=o.stats)==null?void 0:ve.events_count)||u.length}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Eventos"})]})]}),!S&&n.jsxs("div",{className:"flex justify-center gap-3",children:[n.jsx(Y,{variant:"glow",size:"lg",className:"flex-1 max-w-[200px]",onClick:V,children:C?"Seguindo":"Seguir"}),n.jsxs(Y,{variant:"outline",size:"lg",onClick:ee,children:[n.jsx(ks,{className:"h-4 w-4 mr-2"}),"Compartilhar"]})]}),S&&n.jsx("div",{className:"flex justify-center",children:n.jsxs(Y,{variant:"outline",size:"lg",onClick:ee,children:[n.jsx(ks,{className:"h-4 w-4 mr-2"}),"Compartilhar"]})}),S&&n.jsx("div",{className:"flex justify-center",children:n.jsxs(Y,{variant:"outline",size:"lg",className:"bg-black/20 hover:bg-black/40 backdrop-blur-sm text-white border-white/20",onClick:ee,children:[n.jsx(ks,{className:"h-4 w-4 mr-2"}),"Compartilhar minha página"]})})]}),n.jsx("div",{className:"px-4 mb-6",children:n.jsx("div",{className:"flex gap-2 justify-center",children:le.map(H=>{const J=H.icon;return n.jsxs("button",{onClick:()=>a(H.id),className:`flex-shrink-0 flex items-center gap-2 px-4 py-2 rounded-full border transition-all ${s===H.id?"bg-primary text-primary-foreground border-primary":"bg-surface border-border text-muted-foreground hover:text-foreground hover:border-primary/50"}`,children:[n.jsx(J,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm font-medium",children:H.label})]},H.id)})})}),n.jsxs("div",{className:"px-4 max-w-md mx-auto",children:[s==="eventos"&&o.show_events&&n.jsx("div",{className:"space-y-4",children:u.length>0?u.map(H=>{const J=se=>se.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),K=J(o.username||o.page_title),ae=J(H.title),de=`/${K}/${ae}`;return n.jsxs(je,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>t(de),children:[n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:H.image_url||"/placeholder.svg",alt:H.title,className:"w-full h-32 object-cover"}),H.is_live&&n.jsxs(ct,{className:"absolute top-2 right-2 bg-destructive text-destructive-foreground",children:[n.jsx("div",{className:"h-2 w-2 bg-white rounded-full animate-pulse mr-1"}),"AO VIVO"]})]}),n.jsxs(Ee,{className:"p-4",children:[n.jsx("h3",{className:"font-semibold text-foreground mb-1",children:H.title}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[n.jsx(kt,{className:"h-3 w-3"}),n.jsx("span",{children:X(H.event_date)})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(Tt,{className:"h-3 w-3"}),n.jsx("span",{children:H.location}),n.jsx(tr,{className:"h-3 w-3 ml-auto"}),n.jsx("span",{children:H.current_attendees})]}),n.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Ta,{className:"h-3 w-3"}),n.jsx("span",{children:H.likes_count||0})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(us,{className:"h-3 w-3"}),n.jsx("span",{children:H.comments_count||0})]})]})]})]},H.id)}):n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-muted-foreground",children:"Nenhum evento disponível no momento."})})}),s==="links"&&o.show_contact&&n.jsxs("div",{className:"space-y-3",children:[o.show_whatsapp&&o.whatsapp_url&&n.jsx(je,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ee,{className:"p-4",children:n.jsxs("a",{href:o.whatsapp_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-green-500 text-white",children:n.jsx(us,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:"WhatsApp"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Entre em contato"})]}),n.jsx(zr,{className:"h-4 w-4 text-muted-foreground"})]})})}),o.show_instagram&&o.instagram_url&&n.jsx(je,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ee,{className:"p-4",children:n.jsxs("a",{href:o.instagram_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-gradient-to-br from-purple-600 via-pink-600 to-orange-500 text-white",children:n.jsx(Gi,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:"Instagram"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Siga no Instagram"})]}),n.jsx(zr,{className:"h-4 w-4 text-muted-foreground"})]})})}),o.show_playlist&&o.playlist_url&&n.jsx(je,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ee,{className:"p-4",children:n.jsxs("a",{href:o.playlist_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-purple-600 text-white",children:n.jsx(ru,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:"Playlist"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Ouça nossa playlist"})]}),n.jsx(zr,{className:"h-4 w-4 text-muted-foreground"})]})})}),o.show_location&&o.location_url&&n.jsx(je,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ee,{className:"p-4",children:n.jsxs("a",{href:o.location_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-red-500 text-white",children:n.jsx(Tt,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:"Localização"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Veja no mapa"})]}),n.jsx(zr,{className:"h-4 w-4 text-muted-foreground"})]})})}),o.show_website&&o.website_url&&n.jsx(je,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ee,{className:"p-4",children:n.jsxs("a",{href:o.website_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-blue-600 text-white",children:n.jsx(tu,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:"Site"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Visite nosso site"})]}),n.jsx(zr,{className:"h-4 w-4 text-muted-foreground"})]})})}),w.map(H=>n.jsx(je,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ee,{className:"p-4",children:n.jsxs("a",{href:H.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white text-sm font-bold",style:{backgroundColor:H.color},children:H.icon||H.title.charAt(0)}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:H.title}),n.jsx("p",{className:"text-sm text-muted-foreground truncate",children:H.url})]}),n.jsx(zr,{className:"h-4 w-4 text-muted-foreground"})]})})},H.id)),!o.show_whatsapp&&!o.show_instagram&&!o.show_playlist&&!o.show_location&&!o.show_website&&w.length===0&&n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-muted-foreground",children:"Nenhum link disponível."})})]}),s==="fotos"&&n.jsx("div",{className:"space-y-6",children:p.length===0?n.jsx("div",{className:"text-center py-8",children:n.jsxs("div",{className:"mb-4",children:[n.jsx(Cn,{className:"h-12 w-12 text-muted-foreground mx-auto mb-2"}),n.jsx("p",{className:"text-muted-foreground",children:"Nenhuma foto adicionada ainda."}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"As fotos dos eventos aparecerão aqui quando forem adicionadas pelo organizador."})]})}):p.map(H=>n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-foreground",children:H.title}),n.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(H.event_date).toLocaleDateString("pt-BR")})]}),n.jsx(Zq,{eventId:H.id,organizerId:o.id})]},H.id))})]}),R&&P.find(H=>H.id===o.id)&&n.jsx(cv,{open:R,onClose:()=>M(!1),organizer:P.find(H=>H.id===o.id),initialStoryIndex:0,onLike:q,onDelete:B,onMarkAsViewed:G}),n.jsx("footer",{className:"mt-8 pb-6 text-center border-t border-border pt-6",children:n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Esse site foi desenvolvido pela ",n.jsx("a",{href:"https://flatgrowth.com.br/",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Flat Company"})]})}),n.jsx(Fu,{open:b,onOpenChange:T,actionDescription:O})]}):null}const Ig=e=>e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();function x2(){const e=hl(),t=_t(),{user:r}=wt(),[s,a]=v.useState(null),[o,d]=v.useState(!0),[u,f]=v.useState(!1);return TS(s),v.useEffect(()=>((async()=>{var x;try{if(d(!0),e.eventId){if(console.log("Usando ID direto do evento:",e.eventId),a(e.eventId),r){const{data:R}=await U.from("events").select("organizer_id").eq("id",e.eventId).single();if(R){const{data:M}=await U.from("organizers").select("user_id, preferred_theme").eq("id",R.organizer_id).single();if(M){M.user_id===r.id&&f(!0);const P=document.documentElement;P.classList.remove("dark","light"),P.classList.add(M.preferred_theme||"dark")}}}d(!1);return}if(!e.organizerSlug||!e.eventSlug){console.log("Formato de URL inválido"),d(!1);return}const w=e.organizerSlug,_=e.eventSlug;console.log("Procurando evento:",{organizerSlug:w,eventSlug:_});let j=null,N="dark";const C=w.replace(/-/g," "),{data:A,error:S}=await U.from("organizers").select(`
            id,
            user_id,
            page_title,
            username,
            preferred_theme,
            profile:profiles!organizers_user_id_fkey(display_name)
          `);if(S)throw S;if(A&&A.length>0)for(const R of A){const M=((x=R.profile)==null?void 0:x.display_name)||"";if(R.username===w){j=R.id,N=R.preferred_theme||"dark",console.log("Match found by username:",R.username);break}if(Ig(M)===w){j=R.id,N=R.preferred_theme||"dark",console.log("Match found by display_name:",M);break}if(R.page_title&&Ig(R.page_title)===w){j=R.id,N=R.preferred_theme||"dark",console.log("Match found by page_title:",R.page_title);break}}if(!j){console.error("Nenhum organizador encontrado com slug:",w),console.log("Organizadores disponíveis:",A==null?void 0:A.map(R=>{var M;return{username:R.username,page_title:R.page_title,display_name:(M=R.profile)==null?void 0:M.display_name}})),d(!1),W.error("Organizador não encontrado");return}const k=document.documentElement;k.classList.remove("dark","light"),k.classList.add(N);const{data:b,error:T}=await U.from("events").select("id, title, organizer_id").eq("organizer_id",j);if(T)throw T;const O=_.toLowerCase(),L=(b||[]).find(R=>Ig(R.title)===O);if(!L){d(!1),W.error("Evento não encontrado");return}if(a(L.id),r){const{data:R}=await U.from("organizers").select("user_id").eq("id",L.organizer_id).single();R&&R.user_id===r.id&&f(!0)}}catch(w){console.error("Error resolving event by slug:",w),W.error("Erro ao carregar evento")}finally{d(!1)}})(),()=>{const x=localStorage.getItem("theme")||"dark",w=document.documentElement;w.classList.remove("dark","light"),w.classList.add(x)}),[e.organizerSlug,e.eventSlug,e.eventId,r]),o?n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"relative",children:n.jsx(Ct,{className:"w-full h-80"})}),n.jsxs("div",{className:"px-4 py-6 max-w-md mx-auto space-y-4",children:[n.jsx(Ct,{className:"h-8 w-3/4"}),n.jsx(Ct,{className:"h-4 w-1/2"}),n.jsx(Ct,{className:"h-20 w-full"})]})]}):s?n.jsx(IS,{onBack:()=>t("/"),eventId:s,onRegister:()=>t(`/event/${s}/register`),onManageRegistrations:u?()=>t(`/event/${s}/registrations`):void 0,onViewAttendances:u?()=>t(`/event/${s}/attendances`):void 0,onEdit:u?p=>t(`/event/edit/${p}`):void 0,onFindFriends:()=>t(`/event/${s}/find-friends`)}):n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-muted-foreground",children:"Página não encontrada"}),n.jsx(Y,{variant:"outline",onClick:()=>t("/"),className:"mt-4",children:"Voltar ao início"})]})})}function eV({onLogin:e}){const t=_t(),[r]=$1(),[s,a]=v.useState(!0),[o,d]=v.useState(!1),[u,f]=v.useState("user"),[p,x]=v.useState(!1),[w,_]=v.useState({name:"",email:"",password:""}),{signUp:j,signIn:N,user:C}=wt(),{theme:A,toggleTheme:S}=G1();v.useEffect(()=>{if(C){const M=r.get("redirect")||"/";t(M)}},[C,t,r]);const k=async M=>{if(M.preventDefault(),s){x(!0);try{const{error:P}=await N(w.email,w.password);if(!P){const q=r.get("redirect")||"/";t(q)}}finally{x(!1)}}else t("/user-onboarding",{state:{email:w.email,password:w.password,name:w.name}})},b=()=>{t("/organizer-onboarding")},T=(M,P)=>{_(q=>({...q,[M]:P}))},R=u==="user"?[{icon:tr,text:"Conecte-se com pessoas de interesses em comum"},{icon:kt,text:"Encontre eventos na sua cidade"},{icon:fy,text:"Descubra eventos por categorias"},{icon:gy,text:"Encontre pessoas num raio de 100 metros"},{icon:ks,text:"Rede social de interação"},{icon:Tt,text:"Veja quem está próximo em tempo real"}]:[{icon:kt,text:"Crie e gerencie seus eventos"},{icon:tr,text:"Alcance seu público-alvo"},{icon:fy,text:"Organize eventos por categorias"},{icon:Tt,text:"Localize participantes próximos"},{icon:ks,text:"Divulgue seus eventos"},{icon:gy,text:"Conecte-se com participantes interessados"}];return n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-4 py-8",children:n.jsx("div",{className:"w-full max-w-6xl",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12 items-center",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center lg:text-left space-y-4",children:[n.jsx("h1",{className:"font-bold gradient-primary bg-clip-text text-[#147dc7] text-4xl md:text-5xl",children:"MeetLines"}),n.jsx("p",{className:"text-lg text-muted-foreground",children:"Conecte-se com pessoas e descubra eventos incríveis"}),n.jsx("div",{className:"flex items-center justify-center lg:justify-start pt-2",children:n.jsxs("div",{className:"flex bg-surface rounded-lg p-1 border border-border",children:[n.jsx("button",{type:"button",onClick:()=>f("user"),className:`px-6 py-2 text-sm font-medium rounded-md transition-smooth ${u==="user"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground"}`,children:"👤 Usuário"}),n.jsx("button",{type:"button",onClick:()=>f("organizer"),className:`px-6 py-2 text-sm font-medium rounded-md transition-smooth ${u==="organizer"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground"}`,children:"🎯 Organizador"})]})})]}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:R.map((M,P)=>{const q=M.icon;return n.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg bg-card/50 border border-border/50 hover:border-primary/50 transition-colors",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:n.jsx(q,{className:"h-5 w-5 text-primary"})}),n.jsx("p",{className:"text-sm text-muted-foreground text-left",children:M.text})]},P)})})]}),n.jsxs("div",{className:"w-full max-w-md mx-auto lg:mx-0 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[s?n.jsxs("button",{type:"button",onClick:b,className:"text-xs text-muted-foreground hover:text-primary transition-smooth",children:["Quer criar eventos? ",n.jsx("span",{className:"text-primary font-medium",children:"Registrar como organizador"})]}):n.jsx("div",{className:"w-8"}),n.jsx(Y,{variant:"ghost",size:"icon",onClick:S,className:"h-8 w-8",children:A==="dark"?n.jsx(Ej,{className:"h-4 w-4"}):n.jsx(jj,{className:"h-4 w-4"})})]}),n.jsx("div",{className:"text-center space-y-2 bg-card/50 p-6 rounded-lg border border-border/50",children:n.jsx("p",{className:"text-lg font-semibold",children:s?"Entre na sua conta":"Crie sua conta"})}),n.jsx("div",{children:n.jsxs("form",{onSubmit:k,className:"space-y-4",children:[!s&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"name",children:"Nome completo"}),n.jsxs("div",{className:"relative",children:[n.jsx(hs,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(xe,{id:"name",type:"text",placeholder:"Seu nome",value:w.name,onChange:M=>T("name",M.target.value),className:"pl-10",required:!s})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"email",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(Au,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(xe,{id:"email",type:"email",placeholder:"seu@email.com",value:w.email,onChange:M=>T("email",M.target.value),className:"pl-10",required:!0})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"password",children:"Senha"}),n.jsxs("div",{className:"relative",children:[n.jsx(kx,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(xe,{id:"password",type:o?"text":"password",placeholder:"Sua senha",value:w.password,onChange:M=>T("password",M.target.value),className:"pl-10 pr-10",required:!0}),n.jsx("button",{type:"button",onClick:()=>d(!o),className:"absolute right-3 top-3 text-muted-foreground hover:text-foreground",children:o?n.jsx(Ax,{className:"h-4 w-4"}):n.jsx(Ko,{className:"h-4 w-4"})})]})]}),n.jsx(Y,{type:"submit",variant:"glow",size:"lg",className:"w-full",disabled:p,children:p?"Carregando...":s?"Entrar":"Continuar"})]})}),n.jsx("div",{className:"text-center",children:n.jsxs("button",{type:"button",onClick:()=>{a(!s)},className:"text-sm text-muted-foreground hover:text-primary transition-smooth",children:[s?"Não tem uma conta? ":"Já tem uma conta? ",n.jsx("span",{className:"text-primary font-medium",children:s?"Cadastre-se":"Entre"})]})}),n.jsx("div",{className:"text-center pt-6 pb-4",children:n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Esse site foi desenvolvido pela ",n.jsx("a",{href:"https://flatgrowth.com.br/",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Flat Company"})]})})]})]})})})}var Tv="Progress",Iv=100,[tV]=qr(Tv),[rV,nV]=tV(Tv),$A=v.forwardRef((e,t)=>{const{__scopeProgress:r,value:s=null,max:a,getValueLabel:o=sV,...d}=e;(a||a===0)&&!v2(a)&&console.error(aV(`${a}`,"Progress"));const u=v2(a)?a:Iv;s!==null&&!w2(s,u)&&console.error(iV(`${s}`,"Progress"));const f=w2(s,u)?s:null,p=Qf(f)?o(f,u):void 0;return n.jsx(rV,{scope:r,value:f,max:u,children:n.jsx(He.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":Qf(f)?f:void 0,"aria-valuetext":p,role:"progressbar","data-state":WA(f,u),"data-value":f??void 0,"data-max":u,...d,ref:t})})});$A.displayName=Tv;var qA="ProgressIndicator",VA=v.forwardRef((e,t)=>{const{__scopeProgress:r,...s}=e,a=nV(qA,r);return n.jsx(He.div,{"data-state":WA(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...s,ref:t})});VA.displayName=qA;function sV(e,t){return`${Math.round(e/t*100)}%`}function WA(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Qf(e){return typeof e=="number"}function v2(e){return Qf(e)&&!isNaN(e)&&e>0}function w2(e,t){return Qf(e)&&!isNaN(e)&&e<=t&&e>=0}function aV(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Iv}\`.`}function iV(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Iv} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var HA=$A,oV=VA;const Rv=v.forwardRef(({className:e,value:t,...r},s)=>n.jsx(HA,{ref:s,className:Be("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:n.jsx(oV,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Rv.displayName=HA.displayName;function GA({value:e,onChange:t,label:r="Cidade",placeholder:s="Buscar cidade...",required:a=!1,showUseLocation:o=!0,autoRequestLocation:d=!1}){const[u,f]=v.useState([]),[p,x]=v.useState([]),[w,_]=v.useState(""),[j,N]=v.useState(null),[C,A]=v.useState(!1),[S,k]=v.useState(!1),{getCurrentPosition:b,loading:T}=K1();v.useEffect(()=>{d&&!C&&!e&&(A(!0),R())},[d,C,e]),v.useEffect(()=>{e&&O(e)},[e]),v.useEffect(()=>{const G=setTimeout(async()=>{if(w.trim()===""||w.length<2){x([]);return}k(!0);try{const B=w.trim(),{data:V,error:ee}=await U.from("cities").select("*").or(`name.ilike.%${B}%,state.ilike.%${B}%`).limit(100);if(ee)throw ee;const X=(V||[]).sort((le,ue)=>{const oe=le.name.toLowerCase().startsWith(B.toLowerCase()),te=ue.name.toLowerCase().startsWith(B.toLowerCase());return oe&&!te?-1:!oe&&te?1:le.name.localeCompare(ue.name)});x(X.slice(0,50))}catch(B){console.error("Error searching cities:",B)}finally{k(!1)}},300);return()=>clearTimeout(G)},[w]);const O=async q=>{try{const{data:G,error:B}=await U.from("cities").select("*").eq("id",q).maybeSingle();if(B)throw B;N(G)}catch(G){console.error("Error loading selected city:",G)}},L=q=>{N(q),t(q.id,q.name),_("")},R=async()=>{const q=await b();if(!q){W.error("Não foi possível obter sua localização");return}try{const B=await(await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${q.lat}&lon=${q.lon}&format=json`)).json(),V=B.address.city||B.address.town||B.address.municipality;if(V){const{data:ee,error:X}=await U.from("cities").select("*").ilike("name",V).limit(1);if(X){console.error("Error searching city:",X),W.error("Erro ao buscar cidade");return}let le=ee==null?void 0:ee[0];if(!le){const ue=B.address.state,oe=M(ue),{data:te,error:be}=await U.from("cities").insert({name:V,state:oe,country:"Brasil"}).select().single();if(be){console.error("Error creating city:",be),W.error("Erro ao adicionar cidade");return}le=te}le&&(L(le),W.success(`Localização detectada: ${le.name}`))}else W.error("Não foi possível identificar sua cidade")}catch(G){console.error("Error fetching location:",G),W.error("Erro ao obter localização")}},M=q=>({Acre:"AC",Alagoas:"AL",Amapá:"AP",Amazonas:"AM",Bahia:"BA",Ceará:"CE","Distrito Federal":"DF","Espírito Santo":"ES",Goiás:"GO",Maranhão:"MA","Mato Grosso":"MT","Mato Grosso do Sul":"MS","Minas Gerais":"MG",Pará:"PA",Paraíba:"PB",Paraná:"PR",Pernambuco:"PE",Piauí:"PI","Rio de Janeiro":"RJ","Rio Grande do Norte":"RN","Rio Grande do Sul":"RS",Rondônia:"RO",Roraima:"RR","Santa Catarina":"SC","São Paulo":"SP",Sergipe:"SE",Tocantins:"TO"})[q]||"BR",P=p.reduce((q,G)=>(q[G.state]||(q[G.state]=[]),q[G.state].push(G),q),{});return n.jsxs("div",{className:"space-y-3",children:[n.jsxs(ie,{htmlFor:"city",children:[r," ",a&&n.jsx("span",{className:"text-destructive",children:"*"})]}),o&&n.jsxs(Y,{type:"button",variant:"outline",onClick:R,disabled:T,className:"w-full justify-start",children:[n.jsx(Cj,{className:"h-4 w-4 mr-2 text-primary"}),T?"Detectando localização...":"Usar minha localização atual"]}),j&&n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-primary/10 border border-primary/20 rounded-lg",children:[n.jsx(Tt,{className:"h-4 w-4 text-primary"}),n.jsxs("span",{className:"text-sm font-medium",children:[j.name,", ",j.state]}),n.jsx("span",{className:"ml-auto text-xs text-primary",children:"✓ Selecionada"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(xe,{id:"city",type:"text",placeholder:s,value:w,onChange:q=>_(q.target.value)}),w&&w.length>=2&&n.jsx(Zo,{className:"h-[200px] w-full border rounded-md",children:n.jsx("div",{className:"p-2 space-y-1",children:S?n.jsx("p",{className:"text-sm text-muted-foreground p-2",children:"Buscando..."}):Object.entries(P).length===0?n.jsx("p",{className:"text-sm text-muted-foreground p-2",children:"Nenhuma cidade encontrada"}):Object.entries(P).map(([q,G])=>n.jsxs("div",{className:"mb-3",children:[n.jsx("h3",{className:"text-xs font-semibold text-muted-foreground mb-1 px-2",children:q}),G.map(B=>n.jsx("button",{type:"button",onClick:()=>L(B),className:"w-full text-left px-2 py-2 text-sm hover:bg-accent rounded-md transition-colors",children:B.name},B.id))]},q))})})]}),a&&!j&&n.jsx("p",{className:"text-xs text-muted-foreground",children:"Selecione sua cidade para que os usuários possam encontrar seus eventos"})]})}function lV(){const e=_t(),t=Xn(),{email:r,password:s,name:a}=t.state||{},[o,d]=v.useState(r||""),[u,f]=v.useState(s||""),[p,x]=v.useState(a||""),[w,_]=v.useState(r&&s?1:0),[j,N]=v.useState(!1),[C,A]=v.useState(""),[S,k]=v.useState(a||""),[b,T]=v.useState(""),[O,L]=v.useState(null),R=v.useMemo(()=>O?URL.createObjectURL(O):"",[O]),[M,P]=v.useState(""),q=v.useRef(null),[G,B]=v.useState(""),[V,ee]=v.useState(""),[X,le]=v.useState(""),[ue,oe]=v.useState(""),[te,be]=v.useState(""),[ve,H]=v.useState(null),[J,K]=v.useState(""),[ae,de]=v.useState("dark"),se=5,me=(w+1)/se*100;v.useEffect(()=>{},[]);const Re=async _e=>{if(T(""),!/^[a-z0-9._]+$/.test(_e))return T("Use apenas letras minúsculas, números, pontos e underscores"),!1;if(_e.length<3)return T("Username deve ter no mínimo 3 caracteres"),!1;if(_e.length>30)return T("Username deve ter no máximo 30 caracteres"),!1;const{data:ce}=await U.from("organizers").select("id").eq("username",_e).maybeSingle();return ce?(T("Este username já está em uso"),!1):!0},ze=async()=>{if(!o||!u||!p){W.error("Preencha email, senha e nome");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)){W.error("Email inválido");return}if(u.length<6){W.error("Senha deve ter no mínimo 6 caracteres");return}k(p),_(1)},ye=async()=>{if(!C||!S){W.error("Preencha todos os campos");return}N(!0);const _e=await Re(C);N(!1),_e&&_(2)},Ne=()=>{if(!M){W.error("Escreva uma bio para seu perfil");return}if(!ve){W.error("Selecione sua cidade");return}_(3)},we=()=>{_(4)},Xe=async()=>{N(!0);try{const _e=`${window.location.origin}/`,{data:Qe,error:ce}=await U.auth.signUp({email:o,password:u,options:{emailRedirectTo:_e,data:{display_name:S,role:"organizer"}}});if(ce)throw ce;Qe.session||await U.auth.signInWithPassword({email:o,password:u});const{data:Se}=await U.auth.getUser(),ke=Se.user;if(!ke){W.success("Conta criada! Verifique seu email para confirmar o acesso."),e("/");return}await U.from("organizers").delete().eq("user_id",ke.id),await U.from("profiles").delete().eq("user_id",ke.id);let Je;if(O){const yt=O.name.split(".").pop(),It=`${ke.id}/avatar.${yt}`,{error:Xt}=await U.storage.from("user-uploads").upload(It,O,{upsert:!0});if(Xt)console.warn("Erro ao subir avatar, continuando sem avatar:",Xt);else{const{data:xt}=U.storage.from("user-uploads").getPublicUrl(It);Je=xt.publicUrl}}await U.from("profiles").insert({user_id:ke.id,display_name:S,avatar_url:Je,bio:M,role:"organizer"});const{data:Ae,error:Lt}=await U.from("organizers").insert({user_id:ke.id,username:C,page_title:S,page_subtitle:"Organizador de Eventos",page_description:M,avatar_url:Je,whatsapp_url:G||null,instagram_url:V||null,playlist_url:X||null,location_url:ue||null,website_url:te||null,show_whatsapp:!!G,show_instagram:!!V,show_playlist:!!X,show_location:!!ue,show_website:!!te,preferred_theme:ae,city_id:ve}).select().maybeSingle();if(Lt)throw Lt;Ae!=null&&Ae.id&&await U.from("organizer_stats").insert({organizer_id:Ae.id,followers_count:0,events_count:0,average_rating:0,total_ratings:0}),W.success("Perfil criado com sucesso! 🎉"),e("/")}catch(_e){console.error("Error completing onboarding:",_e),W.error((_e==null?void 0:_e.message)||"Erro ao criar perfil")}finally{N(!1)}};return n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:n.jsxs(je,{className:"w-full max-w-md",children:[n.jsxs(qe,{children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsxs(Y,{variant:"ghost",size:"sm",onClick:()=>e("/auth"),className:"text-muted-foreground hover:text-foreground",children:[n.jsx(mt,{className:"h-4 w-4 mr-2"}),"Cancelar"]})}),n.jsx(We,{children:"Configure seu Perfil de Organizador"}),n.jsxs(Qr,{children:["Etapa ",w+1," de ",se]}),n.jsx(Rv,{value:me,className:"mt-2"})]}),n.jsxs(Ee,{children:[w===0&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx(Au,{className:"h-12 w-12 mx-auto text-primary mb-2"}),n.jsx("h3",{className:"text-lg font-semibold",children:"Crie seu acesso"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Informe seu email, senha e nome"})]}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"email",children:"Email"}),n.jsx(xe,{id:"email",type:"email",value:o,onChange:_e=>d(_e.target.value),placeholder:"voce@email.com"})]}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"password",children:"Senha"}),n.jsx(xe,{id:"password",type:"password",value:u,onChange:_e=>f(_e.target.value),placeholder:"••••••••"})]}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"name",children:"Seu nome ou da marca"}),n.jsx(xe,{id:"name",value:p,onChange:_e=>x(_e.target.value),placeholder:"Minha Marca"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Y,{variant:"outline",onClick:()=>e("/auth"),className:"flex-1",children:[n.jsx(mt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsx(Y,{onClick:ze,className:"flex-1",children:"Próximo"})]})]}),w===1&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx(hs,{className:"h-12 w-12 mx-auto text-primary mb-2"}),n.jsx("h3",{className:"text-lg font-semibold",children:"Escolha seu Username"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Seu username é único e não pode ser alterado depois"})]}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"username",children:"Username (como @instagram)"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"@"}),n.jsx(xe,{id:"username",value:C,onChange:_e=>{const Qe=_e.target.value.toLowerCase();A(Qe),Qe.length>=3&&Re(Qe)},placeholder:"seuusername",className:"pl-8",maxLength:30})]}),b&&n.jsx("p",{className:"text-sm text-destructive mt-1",children:b}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Apenas letras minúsculas, números, . e _"})]}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"displayName",children:"Nome de Exibição"}),n.jsx(xe,{id:"displayName",value:S,onChange:_e=>k(_e.target.value),placeholder:"Nome da sua empresa/marca",maxLength:50}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Este nome pode ser alterado depois"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Y,{variant:"outline",onClick:()=>_(0),className:"flex-1",disabled:j,children:[n.jsx(mt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsx(Y,{onClick:ye,className:"flex-1",disabled:j||!C||!S||!!b,children:j?"Verificando...":"Próximo"})]})]}),w===2&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx(Ds,{className:"h-12 w-12 mx-auto text-primary mb-2"}),n.jsx("h3",{className:"text-lg font-semibold",children:"Foto e Biografia"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Ajude as pessoas a conhecerem você"})]}),n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsx(Vt,{className:"h-24 w-24",children:R?n.jsx(Yt,{src:R}):n.jsx(Wt,{className:"bg-surface text-2xl",children:S.charAt(0)||"U"})}),n.jsx("input",{ref:q,type:"file",accept:"image/*",onChange:_e=>{var ce;const Qe=((ce=_e.target.files)==null?void 0:ce[0])||null;L(Qe)},className:"hidden"}),n.jsxs(Y,{variant:"outline",className:"w-full",type:"button",onClick:()=>{var _e;return(_e=q.current)==null?void 0:_e.click()},children:[n.jsx(Ds,{className:"h-4 w-4 mr-2"}),R?"Trocar Foto":"Adicionar Foto"]}),n.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Foto de perfil (opcional)"})]}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"bio",children:"Biografia *"}),n.jsx(An,{id:"bio",value:M,onChange:_e=>P(_e.target.value),placeholder:"Conte um pouco sobre você e seus eventos...",rows:4,maxLength:500}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[M.length,"/500 caracteres"]})]}),n.jsx(GA,{value:ve||void 0,onChange:(_e,Qe)=>{H(_e),K(Qe)},label:"Localização",placeholder:"Em qual cidade você organiza eventos?",required:!0,showUseLocation:!0}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Y,{variant:"outline",onClick:()=>_(1),className:"flex-1",children:[n.jsx(mt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsx(Y,{onClick:Ne,className:"flex-1",disabled:!M||!ve,children:"Próximo"})]})]}),w===3&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx(_j,{className:"h-12 w-12 mx-auto text-primary mb-2"}),n.jsx("h3",{className:"text-lg font-semibold",children:"Links e Redes Sociais"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Selecione as redes que deseja adicionar (opcional)"})]}),n.jsxs("div",{className:"grid grid-cols-5 gap-4 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>{B(G?"":"https://wa.me/")},className:`p-4 rounded-lg border-2 transition-all ${G?"border-green-500 bg-green-500/10":"border-border hover:border-green-500/50"}`,children:n.jsx(us,{className:`h-6 w-6 mx-auto ${G?"text-green-500":"text-muted-foreground"}`})}),n.jsx("button",{type:"button",onClick:()=>{ee(V?"":"https://instagram.com/")},className:`p-4 rounded-lg border-2 transition-all ${V?"border-pink-500 bg-pink-500/10":"border-border hover:border-pink-500/50"}`,children:n.jsx(Gi,{className:`h-6 w-6 mx-auto ${V?"text-pink-500":"text-muted-foreground"}`})}),n.jsx("button",{type:"button",onClick:()=>{le(X?"":"https://open.spotify.com/")},className:`p-4 rounded-lg border-2 transition-all ${X?"border-purple-500 bg-purple-500/10":"border-border hover:border-purple-500/50"}`,children:n.jsx(ru,{className:`h-6 w-6 mx-auto ${X?"text-purple-500":"text-muted-foreground"}`})}),n.jsx("button",{type:"button",onClick:()=>{oe(ue?"":"https://maps.google.com/")},className:`p-4 rounded-lg border-2 transition-all ${ue?"border-red-500 bg-red-500/10":"border-border hover:border-red-500/50"}`,children:n.jsx(Tt,{className:`h-6 w-6 mx-auto ${ue?"text-red-500":"text-muted-foreground"}`})}),n.jsx("button",{type:"button",onClick:()=>{be(te?"":"https://")},className:`p-4 rounded-lg border-2 transition-all ${te?"border-blue-500 bg-blue-500/10":"border-border hover:border-blue-500/50"}`,children:n.jsx(tu,{className:`h-6 w-6 mx-auto ${te?"text-blue-500":"text-muted-foreground"}`})})]}),G&&n.jsxs("div",{children:[n.jsxs(ie,{htmlFor:"whatsapp",className:"flex items-center gap-2",children:[n.jsx(us,{className:"h-4 w-4 text-green-500"}),"WhatsApp"]}),n.jsx(xe,{id:"whatsapp",value:G,onChange:_e=>B(_e.target.value),placeholder:"https://wa.me/5511999999999"})]}),V&&n.jsxs("div",{children:[n.jsxs(ie,{htmlFor:"instagram",className:"flex items-center gap-2",children:[n.jsx(Gi,{className:"h-4 w-4 text-pink-500"}),"Instagram"]}),n.jsx(xe,{id:"instagram",value:V,onChange:_e=>ee(_e.target.value),placeholder:"https://instagram.com/seu_perfil"})]}),X&&n.jsxs("div",{children:[n.jsxs(ie,{htmlFor:"playlist",className:"flex items-center gap-2",children:[n.jsx(ru,{className:"h-4 w-4 text-purple-500"}),"Playlist"]}),n.jsx(xe,{id:"playlist",value:X,onChange:_e=>le(_e.target.value),placeholder:"https://open.spotify.com/playlist/..."})]}),ue&&n.jsxs("div",{children:[n.jsxs(ie,{htmlFor:"location",className:"flex items-center gap-2",children:[n.jsx(Tt,{className:"h-4 w-4 text-red-500"}),"Localização"]}),n.jsx(xe,{id:"location",value:ue,onChange:_e=>oe(_e.target.value),placeholder:"https://maps.google.com/..."})]}),te&&n.jsxs("div",{children:[n.jsxs(ie,{htmlFor:"website",className:"flex items-center gap-2",children:[n.jsx(tu,{className:"h-4 w-4 text-blue-500"}),"Site"]}),n.jsx(xe,{id:"website",value:te,onChange:_e=>be(_e.target.value),placeholder:"https://seusite.com.br"})]}),n.jsxs("div",{className:"flex gap-2 mt-6",children:[n.jsxs(Y,{variant:"outline",onClick:()=>_(2),className:"flex-1",children:[n.jsx(mt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsx(Y,{onClick:we,className:"flex-1",children:"Próximo"})]})]}),w===4&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx(w8,{className:"h-12 w-12 mx-auto text-primary mb-2"}),n.jsx("h3",{className:"text-lg font-semibold",children:"Escolha o Tema da Sua Página"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Selecione como seus visitantes verão sua página"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx("button",{type:"button",onClick:()=>de("dark"),className:`p-6 rounded-lg border-2 transition-all ${ae==="dark"?"border-primary bg-primary/10":"border-border hover:border-primary/50"}`,children:n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"w-full h-24 bg-gradient-to-br from-gray-900 to-gray-800 rounded-md flex items-center justify-center",children:n.jsx("div",{className:"text-white text-xs font-medium",children:"Modo Escuro"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"font-medium text-sm",children:"Dark Mode"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Visual moderno e elegante"})]})]})}),n.jsx("button",{type:"button",onClick:()=>de("light"),className:`p-6 rounded-lg border-2 transition-all ${ae==="light"?"border-primary bg-primary/10":"border-border hover:border-primary/50"}`,children:n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"w-full h-24 bg-gradient-to-br from-blue-400 via-pink-400 to-orange-400 rounded-md flex items-center justify-center",children:n.jsx("div",{className:"text-white text-xs font-medium",children:"Modo Claro"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"font-medium text-sm",children:"Light Mode"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Visual colorido e vibrante"})]})]})})]}),n.jsx("div",{className:"bg-muted/50 p-4 rounded-lg",children:n.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"💡 Seus visitantes sempre verão sua página no tema que você escolher aqui"})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Y,{variant:"outline",onClick:()=>_(3),className:"flex-1",disabled:j,children:[n.jsx(mt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsx(Y,{onClick:Xe,className:"flex-1",disabled:j,children:j?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Criando..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ss,{className:"h-4 w-4 mr-2"}),"Concluir"]})})]})]})]})]})})}const cV=a0.map(e=>{var t;return{id:e.value,label:e.label.replace(/^.+\s/,""),icon:((t=e.label.match(/^(.+?)\s/))==null?void 0:t[1])||"✨"}});function dV(){const e=_t(),r=Xn().state,[s,a]=v.useState((r==null?void 0:r.email)||""),[o,d]=v.useState((r==null?void 0:r.password)||""),[u,f]=v.useState((r==null?void 0:r.name)||""),[p,x]=v.useState(""),[w,_]=v.useState(""),[j,N]=v.useState(null),[C,A]=v.useState(""),[S,k]=v.useState(""),[b,T]=v.useState(""),[O,L]=v.useState([]),[R,M]=v.useState([]),[P,q]=v.useState([]),[G,B]=v.useState(""),[V,ee]=v.useState(0),[X,le]=v.useState(!1),[ue,oe]=v.useState(""),[te,be]=v.useState(!1),[ve,H]=v.useState(null),J=["Dados Básicos","Localização","Foto de Perfil","Redes Sociais","Interesses","Sugestões"],K=(V+1)/J.length*100;v.useEffect(()=>{(async()=>{var ke;const{data:{session:Se}}=await U.auth.getSession();if(Se!=null&&Se.user){be(!0),H(Se.user.id),a(Se.user.email||"");const Je=(ke=Se.user.user_metadata)==null?void 0:ke.display_name;Je&&f(Je),ee(1)}})()},[]);const ae=async()=>{try{await U.auth.signOut(),W.info("Sessão encerrada. Você pode criar uma nova conta."),be(!1),H(null),ee(0),a(""),d(""),f(""),_(""),e("/auth")}catch(ce){console.error("Error logging out:",ce),W.error("Erro ao sair. Tente novamente.")}},de=async ce=>{if(!ce)return oe("Username é obrigatório"),!1;if(!/^[a-z0-9_]{3,20}$/.test(ce))return oe("Use apenas letras minúsculas, números e _ (3-20 caracteres)"),!1;try{const{data:Se,error:ke}=await U.from("profiles").select("username").eq("username",ce).maybeSingle();return ke&&ke.code!=="PGRST116"?(console.error("Error checking username:",ke),oe("Erro ao verificar username"),!1):Se?(oe("Username já está em uso"),!1):(oe(""),!0)}catch(Se){return console.error("Error:",Se),oe("Erro ao verificar username"),!1}},se=async ce=>{var Je;const Se=(Je=ce.target.files)==null?void 0:Je[0];if(!Se)return;if(!Se.type.startsWith("image/")){W.error("Por favor, selecione apenas arquivos de imagem");return}if(Se.size>5*1024*1024){W.error("A imagem deve ter no máximo 5MB");return}const ke=await me(Se);if(ke){N(ke);const Ae=new FileReader;Ae.onloadend=()=>{A(Ae.result)},Ae.readAsDataURL(ke)}},me=ce=>new Promise(Se=>{const ke=new FileReader;ke.onload=Je=>{var Lt;const Ae=new Image;Ae.onload=()=>{const yt=document.createElement("canvas"),It=Math.min(Ae.width,Ae.height),Xt=800;yt.width=Xt,yt.height=Xt;const xt=yt.getContext("2d");if(!xt){Se(null);return}const Wr=(Ae.width-It)/2,Qt=(Ae.height-It)/2;xt.drawImage(Ae,Wr,Qt,It,It,0,0,Xt,Xt),yt.toBlob(Ve=>{Se(Ve?new File([Ve],"avatar.jpg",{type:"image/jpeg"}):null)},"image/jpeg",.95)},Ae.onerror=()=>Se(null),Ae.src=(Lt=Je.target)==null?void 0:Lt.result},ke.onerror=()=>Se(null),ke.readAsDataURL(ce)}),Re=ce=>{L(Se=>Se.includes(ce)?Se.filter(ke=>ke!==ce):[...Se,ce])},ze=()=>{if(!s||!o||!u||!p){W.error("Preencha todos os campos");return}const ce=new Date,Se=new Date(p),ke=ce.getFullYear()-Se.getFullYear(),Je=ce.getMonth()-Se.getMonth();if((Je<0||Je===0&&ce.getDate()<Se.getDate()?ke-1:ke)<13){W.error("Você precisa ter pelo menos 13 anos para se cadastrar");return}ee(1)},ye=async()=>{await de(w)&&ee(3)},Ne=()=>{ee(4)},we=async()=>{if(O.length===0){W.error("Selecione pelo menos um interesse");return}ee(5)};v.useEffect(()=>{V===5&&O.length>0&&Xe()},[V,O]);const Xe=async()=>{try{le(!0);const{data:ce,error:Se}=await U.from("organizers").select(`
          id,
          page_title,
          avatar_url,
          category,
          user_id
        `).eq("is_page_active",!0).limit(10);if(Se)throw Se;const ke=await Promise.all((ce||[]).map(async Je=>{const[Ae,Lt]=await Promise.all([U.from("followers").select("id",{count:"exact",head:!0}).eq("organizer_id",Je.id),U.from("events").select("id",{count:"exact",head:!0}).eq("organizer_id",Je.id)]);return{...Je,followers_count:Ae.count??0,events_count:Lt.count??0}}));ke.sort((Je,Ae)=>Ae.followers_count+Ae.events_count-(Je.followers_count+Je.events_count)),M(ke.slice(0,6))}catch(ce){console.error("Error fetching suggested organizers:",ce)}finally{le(!1)}},_e=ce=>{q(Se=>Se.includes(ce)?Se.filter(ke=>ke!==ce):[...Se,ce])},Qe=async()=>{var ce,Se,ke;le(!0);try{let Je;if(te&&ve)Je=ve;else{const{data:yt,error:It}=await U.auth.signUp({email:s,password:o,options:{emailRedirectTo:`${window.location.origin}/`,data:{display_name:u,role:"user"}}});if(It)if((ce=It.message)!=null&&ce.includes("already registered")||(Se=It.message)!=null&&Se.includes("User already registered")){const{data:Xt,error:xt}=await U.auth.signInWithPassword({email:s,password:o});if(xt){W.error("Email já cadastrado. Verifique sua senha e tente novamente."),ee(0);return}if(!Xt.user)throw new Error("Falha ao fazer login");Je=Xt.user.id,W.info("Login realizado! Complete seu perfil."),await new Promise(Wr=>setTimeout(Wr,1e3))}else throw It;else{if(!yt.user)throw new Error("Falha ao criar usuário");const{error:Xt}=await U.auth.signInWithPassword({email:s,password:o});if(Xt){W.success("Conta criada! Verifique seu email para confirmar."),e("/auth");return}Je=yt.user.id,await new Promise(xt=>setTimeout(xt,1500))}}let Ae="";if(j){const yt=j.name.split(".").pop(),It=`${Je}/avatar.${yt}`,{error:Xt}=await U.storage.from("user-uploads").upload(It,j,{upsert:!0});if(Xt)console.error("Error uploading avatar:",Xt);else{const{data:{publicUrl:xt}}=U.storage.from("user-uploads").getPublicUrl(It);Ae=xt}}const{error:Lt}=await U.from("profiles").update({display_name:u,username:w,avatar_url:Ae||null,instagram_url:S||null,phone:b||null,interests:O,city_id:G||null,birth_date:p||null,notes:`Interesses: ${O.join(", ")}`}).eq("user_id",Je);if(Lt)throw console.error("Profile update error:",Lt),new Error(`Erro ao atualizar perfil: ${Lt.message}`);if(P.length>0){const yt=P.map(It=>U.from("followers").insert({user_id:Je,organizer_id:It}));await Promise.all(yt)}W.success("Perfil criado com sucesso!"),e("/")}catch(Je){console.error("Error creating profile:",Je),(ke=Je.message)!=null&&ke.includes("Username cannot be changed")?W.error("Erro: Username já foi definido. Tente fazer login."):Je.message?W.error(Je.message):W.error("Erro ao criar perfil. Tente novamente.")}finally{le(!1)}};return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/10 via-background to-primary/5 flex items-center justify-center p-4",children:n.jsx(je,{className:"w-full max-w-md",children:n.jsxs(Ee,{className:"p-6",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsxs(Y,{variant:"ghost",size:"sm",onClick:()=>e("/auth"),className:"text-muted-foreground hover:text-foreground",children:[n.jsx(mt,{className:"h-4 w-4 mr-2"}),"Cancelar"]})}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary/10 mb-4",children:n.jsx(hs,{className:"h-8 w-8 text-primary"})}),n.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Complete seu Perfil"}),n.jsx("p",{className:"text-muted-foreground text-sm",children:J[V]}),!te&&V===0&&n.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Já tem conta?"," ",n.jsx("button",{onClick:()=>e("/auth"),className:"text-primary hover:underline font-medium",children:"Fazer login"})]}),te&&n.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Conectado como ",s,"."," ",n.jsx("button",{onClick:ae,className:"text-destructive hover:underline font-medium",children:"Sair"})]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx(Rv,{value:K,className:"h-2"}),n.jsxs("div",{className:"flex justify-between mt-2 text-xs text-muted-foreground",children:[n.jsxs("span",{children:["Passo ",V+1," de ",J.length]}),n.jsxs("span",{children:[Math.round(K),"%"]})]})]}),V===0&&n.jsx("div",{className:"space-y-4",children:!te&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"name",children:"Nome Completo"}),n.jsx(xe,{id:"name",value:u,onChange:ce=>f(ce.target.value),placeholder:"Seu nome"})]}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"email",children:"Email"}),n.jsx(xe,{id:"email",type:"email",value:s,onChange:ce=>a(ce.target.value),placeholder:"seu@email.com"})]}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"password",children:"Senha"}),n.jsx(xe,{id:"password",type:"password",value:o,onChange:ce=>d(ce.target.value),placeholder:"Mínimo 6 caracteres"})]}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"birthDate",children:"Data de Nascimento"}),n.jsx(xe,{id:"birthDate",type:"date",value:p,onChange:ce=>x(ce.target.value),max:new Date().toISOString().split("T")[0]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Sua idade será calculada automaticamente"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Y,{variant:"outline",onClick:()=>e("/auth"),className:"flex-1",children:[n.jsx(mt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsxs(Y,{onClick:ze,className:"flex-1",children:["Próximo ",n.jsx(hd,{className:"ml-2 h-4 w-4"})]})]})]})}),V===1&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary/10 mb-4",children:n.jsx(Tt,{className:"h-8 w-8 text-primary"})}),n.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Onde você está?"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Selecione sua cidade para ver eventos próximos"})]}),n.jsx(GA,{value:G,onChange:ce=>B(ce),label:"Sua Cidade",placeholder:"Selecione sua cidade",autoRequestLocation:!0}),n.jsx("p",{className:"text-xs text-muted-foreground text-center",children:G?"✓ Cidade selecionada! Clique em Próximo para continuar.":"💡 Clique em 'Usar minha localização' para detectar automaticamente, ou digite para buscar."}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Y,{variant:"outline",onClick:()=>te?e("/auth"):ee(0),className:"flex-1",children:[n.jsx(mt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsxs(Y,{onClick:()=>ee(2),className:"flex-1",disabled:!G,children:["Próximo ",n.jsx(hd,{className:"ml-2 h-4 w-4"})]})]})]}),V===2&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"username",children:"Username (ID único)"}),n.jsx(xe,{id:"username",value:w,onChange:ce=>{_(ce.target.value.toLowerCase()),oe("")},onBlur:ce=>de(ce.target.value),placeholder:"seu_username",className:ue?"border-destructive":""}),ue&&n.jsx("p",{className:"text-sm text-destructive mt-1",children:ue}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Use letras minúsculas, números e _"})]}),n.jsxs("div",{children:[n.jsx(ie,{children:"Foto de Perfil"}),n.jsxs("div",{className:"flex flex-col items-center gap-4 mt-2",children:[n.jsx(Vt,{className:"h-24 w-24",children:C?n.jsx(Yt,{src:C}):n.jsx(Wt,{children:n.jsx(hs,{className:"h-12 w-12"})})}),n.jsx("label",{htmlFor:"avatar-upload",children:n.jsx(Y,{type:"button",variant:"outline",size:"sm",asChild:!0,children:n.jsxs("span",{className:"cursor-pointer",children:[n.jsx(Ds,{className:"mr-2 h-4 w-4"}),C?"Trocar Foto":"Escolher Foto"]})})}),n.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",onChange:se,className:"hidden"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Y,{variant:"outline",onClick:()=>ee(1),className:"flex-1",children:[n.jsx(mt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsxs(Y,{onClick:ye,className:"flex-1",children:["Próximo ",n.jsx(hd,{className:"ml-2 h-4 w-4"})]})]})]}),V===3&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"instagram",children:"Instagram (opcional)"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Gi,{className:"h-4 w-4 text-muted-foreground"}),n.jsx(xe,{id:"instagram",value:S,onChange:ce=>k(ce.target.value),placeholder:"https://instagram.com/seu_username"})]})]}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"whatsapp",children:"WhatsApp (opcional)"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(us,{className:"h-4 w-4 text-muted-foreground"}),n.jsx(xe,{id:"whatsapp",value:b,onChange:ce=>T(ce.target.value),placeholder:"https://wa.me/5511999999999"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Y,{variant:"outline",onClick:()=>ee(1),className:"flex-1",children:[n.jsx(mt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsxs(Y,{onClick:Ne,className:"flex-1",children:["Próximo ",n.jsx(hd,{className:"ml-2 h-4 w-4"})]})]})]}),V===4&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs(ie,{className:"flex items-center gap-2 mb-3",children:[n.jsx(su,{className:"h-4 w-4"}),"Selecione seus interesses"]}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:cV.map(ce=>n.jsxs(ct,{variant:O.includes(ce.id)?"default":"outline",className:"justify-center cursor-pointer py-3 text-sm transition-all hover:scale-105",onClick:()=>Re(ce.id),children:[n.jsx("span",{className:"mr-2",children:ce.icon}),ce.label,O.includes(ce.id)&&n.jsx(Os,{className:"ml-2 h-3 w-3"})]},ce.id))}),n.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Selecione pelo menos um interesse"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Y,{variant:"outline",onClick:()=>ee(3),className:"flex-1",children:[n.jsx(mt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsxs(Y,{onClick:we,disabled:O.length===0,className:"flex-1",children:["Próximo ",n.jsx(hd,{className:"ml-2 h-4 w-4"})]})]})]}),V===5&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs(ie,{className:"flex items-center gap-2 mb-3",children:[n.jsx(tr,{className:"h-4 w-4"}),"Siga organizadores que te interessam"]}),n.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Personalize sua experiência seguindo organizadores"}),X?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Carregando sugestões..."}):R.length>0?n.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:R.map(ce=>n.jsxs("div",{onClick:()=>_e(ce.id),className:`flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all hover:bg-accent/50 ${P.includes(ce.id)?"border-primary bg-primary/5":"border-border"}`,children:[n.jsxs(Vt,{className:"h-12 w-12",children:[n.jsx(Yt,{src:ce.avatar_url}),n.jsx(Wt,{children:ce.page_title[0]})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium text-sm truncate",children:ce.page_title}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[ce.followers_count," seguidores • ",ce.events_count," eventos"]})]}),P.includes(ce.id)&&n.jsx(Os,{className:"h-5 w-5 text-primary flex-shrink-0"})]},ce.id))}):n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Nenhum organizador encontrado"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Y,{variant:"outline",onClick:()=>ee(4),className:"flex-1",children:[n.jsx(mt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsx(Y,{onClick:Qe,disabled:X,className:"flex-1",children:X?"Criando...":"Concluir"})]})]})]})})})}const uV=()=>{const e=Xn();return v.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),n.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"mb-4 text-4xl font-bold text-foreground",children:"404"}),n.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Página não encontrada"}),n.jsx("a",{href:"/",className:"text-primary underline hover:text-primary-glow transition-smooth",children:"Voltar ao Início"})]})})};function hV(){const e=_t(),{isAdmin:t,loading:r}=Fs(),[s,a]=v.useState({totalUsers:0,totalOrganizers:0,pendingClaims:0,unreadSupport:0}),[o,d]=v.useState(!0);return v.useEffect(()=>{!r&&!t&&e("/")},[t,r,e]),v.useEffect(()=>{t&&(async()=>{try{const[f,p,x,w]=await Promise.all([U.from("profiles").select("id",{count:"exact",head:!0}),U.from("organizers").select("id",{count:"exact",head:!0}),U.from("event_claim_requests").select("id",{count:"exact",head:!0}).eq("status","pending"),U.from("support_messages").select("id",{count:"exact",head:!0}).eq("read",!1).eq("is_admin_reply",!1)]);a({totalUsers:f.count||0,totalOrganizers:p.count||0,pendingClaims:x.count||0,unreadSupport:w.count||0})}catch(f){console.error("Error fetching stats:",f)}finally{d(!1)}})()},[t]),r||!t?null:n.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>e("/"),children:n.jsx(mt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Painel Administrativo"}),n.jsx("p",{className:"text-muted-foreground",children:"Gerencie a plataforma"})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[n.jsxs(je,{children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(We,{className:"text-sm font-medium",children:"Total de Usuários"}),n.jsx(tr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(Ee,{children:o?n.jsx(Ct,{className:"h-8 w-20"}):n.jsx("div",{className:"text-2xl font-bold",children:s.totalUsers})})]}),n.jsxs(je,{children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(We,{className:"text-sm font-medium",children:"Organizadores"}),n.jsx(kt,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(Ee,{children:o?n.jsx(Ct,{className:"h-8 w-20"}):n.jsx("div",{className:"text-2xl font-bold",children:s.totalOrganizers})})]}),n.jsxs(je,{className:"cursor-pointer hover:bg-accent",onClick:()=>e("/admin/claims"),children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(We,{className:"text-sm font-medium",children:"Solicitações Pendentes"}),n.jsx(Su,{className:"h-4 w-4 text-yellow-500"})]}),n.jsx(Ee,{children:o?n.jsx(Ct,{className:"h-8 w-20"}):n.jsx("div",{className:"text-2xl font-bold",children:s.pendingClaims})})]}),n.jsxs(je,{className:"cursor-pointer hover:bg-accent",onClick:()=>e("/admin/support"),children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(We,{className:"text-sm font-medium",children:"Mensagens de Suporte"}),n.jsx(Tx,{className:"h-4 w-4 text-blue-500"})]}),n.jsx(Ee,{children:o?n.jsx(Ct,{className:"h-8 w-20"}):n.jsx("div",{className:"text-2xl font-bold",children:s.unreadSupport})})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[n.jsxs(je,{children:[n.jsxs(qe,{children:[n.jsx(We,{children:"Repasses de Organizadores"}),n.jsx(Qr,{children:"Gerencie pagamentos e repasses para organizadores"})]}),n.jsx(Ee,{children:n.jsxs(Y,{onClick:()=>e("/admin/organizer-payments"),className:"w-full",children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),"Ver Repasses"]})})]}),n.jsxs(je,{children:[n.jsxs(qe,{children:[n.jsx(We,{children:"Eventos da Plataforma"}),n.jsx(Qr,{children:"Gerencie todos os eventos oficiais da plataforma"})]}),n.jsxs(Ee,{className:"space-y-2",children:[n.jsx(Y,{onClick:()=>e("/admin/platform-events"),className:"w-full",variant:"outline",children:"Ver Todos os Eventos"}),n.jsx(Y,{onClick:()=>e("/admin/create-platform-event"),className:"w-full",children:"Criar Novo Evento"})]})]}),n.jsxs(je,{children:[n.jsxs(qe,{children:[n.jsx(We,{children:"Geração Automática"}),n.jsx(Qr,{children:"Use IA para extrair eventos de APIs externas"})]}),n.jsxs(Ee,{className:"space-y-2",children:[n.jsx(Y,{onClick:()=>e("/admin/auto-generate-events"),className:"w-full",children:"Gerar Eventos com IA"}),n.jsx(Y,{onClick:()=>e("/admin/pending-events"),className:"w-full",variant:"outline",children:"Ver Eventos Pendentes"})]})]}),n.jsxs(je,{children:[n.jsxs(qe,{children:[n.jsx(We,{children:"Gerenciar Solicitações"}),n.jsx(Qr,{children:"Aprove ou rejeite pedidos de associação de eventos"})]}),n.jsx(Ee,{children:n.jsx(Y,{onClick:()=>e("/admin/claims"),variant:"outline",className:"w-full",children:"Ver Solicitações"})})]})]})]})}function fV(){const e=_t(),{user:t}=wt(),{isAdmin:r}=Fs(),[s,a]=v.useState(!1),[o,d]=v.useState("presencial"),[u,f]=v.useState(!0),[p,x]=v.useState(!1),[w,_]=v.useState([]),[j,N]=v.useState(!1),[C,A]=v.useState(null),[S,k]=v.useState(null),[b,T]=v.useState({title:"",description:"",organizer_name:"",date:"",time:"",end_date:"",end_time:"",address:"",location_link:"",max_attendees:"",ticket_price:"",ticket_link:""}),[O,L]=v.useState([]);if(!r)return e("/"),null;const R=P=>{var G;const q=(G=P.target.files)==null?void 0:G[0];if(q){k(q);const B=new FileReader;B.onload=V=>{var ee;A((ee=V.target)==null?void 0:ee.result)},B.readAsDataURL(q)}},M=async P=>{if(P.preventDefault(),!!t){if(!b.title||!b.organizer_name||!b.date||!b.time||!b.end_date||!b.end_time){W.error("Preencha todos os campos obrigatórios");return}if(o==="presencial"&&!b.address){W.error("Preencha o endereço do evento");return}if(o==="live"&&!b.location_link){W.error("Preencha o link da transmissão");return}a(!0);try{let q=null;if(S){const ee=S.name.split(".").pop(),X=`platform-events/${Date.now()}.${ee}`,{error:le}=await U.storage.from("user-uploads").upload(X,S);if(le)throw le;const{data:{publicUrl:ue}}=U.storage.from("user-uploads").getPublicUrl(X);q=ue}const G=new Date(`${b.date}T${b.time}`),B=new Date(`${b.end_date}T${b.end_time}`),{error:V}=await U.from("platform_events").insert({title:b.title,description:b.description,organizer_name:b.organizer_name,event_date:G.toISOString(),end_date:B.toISOString(),location:o==="live"?"Online":b.address,location_link:b.location_link||null,category:O.length>0?O:null,max_attendees:b.max_attendees?parseInt(b.max_attendees):null,image_url:q,created_by_admin_id:t.id});if(V)throw V;W.success("Evento da plataforma criado com sucesso!"),e("/admin")}catch(q){console.error("Error creating platform event:",q),W.error("Erro ao criar evento: "+q.message)}finally{a(!1)}}};return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b border-border",children:n.jsxs("div",{className:"flex items-center justify-between p-4 max-w-md mx-auto",children:[n.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>e("/admin"),children:n.jsx(mt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Criar Evento da Plataforma"}),n.jsx("div",{className:"w-10"})]})}),n.jsxs("div",{className:"p-4 max-w-md mx-auto pb-20",children:[n.jsx("div",{className:"mb-4 p-3 bg-primary/10 rounded-lg border border-primary/20",children:n.jsx("p",{className:"text-sm text-muted-foreground",children:"Eventos da plataforma não são associados a nenhum organizador específico. Organizadores poderão reivindicar esses eventos."})}),n.jsxs("form",{onSubmit:M,className:"space-y-6",children:[n.jsxs(je,{children:[n.jsx(qe,{children:n.jsx(We,{className:"text-sm",children:"Arte do Evento"})}),n.jsx(Ee,{children:n.jsx("div",{className:"relative",children:C?n.jsxs("div",{className:"relative h-48 rounded-lg overflow-hidden",children:[n.jsx("img",{src:C,alt:"Preview do evento",className:"w-full h-full object-cover"}),n.jsx(Y,{type:"button",variant:"secondary",size:"sm",className:"absolute top-2 right-2",onClick:()=>{A(null),k(null)},children:"Remover"})]}):n.jsxs("label",{className:"flex flex-col items-center justify-center h-48 border-2 border-dashed border-border rounded-lg cursor-pointer hover:border-primary/50 transition-colors",children:[n.jsx(Ds,{className:"h-8 w-8 text-muted-foreground mb-2"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"Clique para adicionar uma imagem"}),n.jsx("input",{type:"file",accept:"image/*",onChange:R,className:"hidden"})]})})})]}),n.jsxs(je,{children:[n.jsx(qe,{children:n.jsx(We,{className:"text-sm",children:"Informações Básicas"})}),n.jsxs(Ee,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"title",children:"Nome do Evento *"}),n.jsx(xe,{id:"title",placeholder:"Digite o nome do evento",value:b.title,onChange:P=>T({...b,title:P.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"organizer_name",children:"Nome do Organizador *"}),n.jsx(xe,{id:"organizer_name",placeholder:"Nome que aparecerá como organizador",value:b.organizer_name,onChange:P=>T({...b,organizer_name:P.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"description",children:"Descrição"}),n.jsx(An,{id:"description",placeholder:"Descreva o evento...",value:b.description,onChange:P=>T({...b,description:P.target.value}),rows:3})]}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"category",children:"Categorias"}),n.jsx(ip,{value:O,onChange:L,placeholder:"Selecione uma ou mais categorias"})]})]})]}),n.jsxs(je,{children:[n.jsx(qe,{children:n.jsx(We,{className:"text-sm",children:"Tipo de Evento"})}),n.jsx(Ee,{children:n.jsxs(Ui,{value:o,onValueChange:P=>d(P),children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(an,{value:"presencial",id:"presencial"}),n.jsx(ie,{htmlFor:"presencial",className:"cursor-pointer",children:"📍 Evento Presencial"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(an,{value:"live",id:"live"}),n.jsx(ie,{htmlFor:"live",className:"cursor-pointer",children:"🔴 Evento Live (Online)"})]})]})})]}),n.jsxs(je,{children:[n.jsx(qe,{children:n.jsxs(We,{className:"text-sm flex items-center gap-2",children:[n.jsx(kt,{className:"h-4 w-4"}),"Data e Hora"]})}),n.jsxs(Ee,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ie,{className:"text-sm font-medium mb-2 block",children:"Início do Evento"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"date",className:"text-xs text-muted-foreground",children:"Data *"}),n.jsx(xe,{id:"date",type:"date",value:b.date,onChange:P=>T({...b,date:P.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"time",className:"text-xs text-muted-foreground",children:"Horário *"}),n.jsx(xe,{id:"time",type:"time",value:b.time,onChange:P=>T({...b,time:P.target.value}),required:!0})]})]})]}),n.jsxs("div",{className:"pt-2 border-t",children:[n.jsx(ie,{className:"text-sm font-medium mb-2 block",children:"Encerramento do Evento *"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"end_date",className:"text-xs text-muted-foreground",children:"Data *"}),n.jsx(xe,{id:"end_date",type:"date",value:b.end_date,onChange:P=>T({...b,end_date:P.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"end_time",className:"text-xs text-muted-foreground",children:"Horário *"}),n.jsx(xe,{id:"end_time",type:"time",value:b.end_time,onChange:P=>T({...b,end_time:P.target.value}),required:!0})]})]})]})]})]}),n.jsxs(je,{children:[n.jsx(qe,{children:n.jsxs(We,{className:"text-sm flex items-center gap-2",children:[n.jsx(Tt,{className:"h-4 w-4"}),o==="live"?"Link da Transmissão":"Localização"]})}),n.jsx(Ee,{className:"space-y-4",children:o==="presencial"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"address",children:"Endereço Completo *"}),n.jsx(xe,{id:"address",placeholder:"Rua, número, bairro, cidade...",value:b.address,onChange:P=>T({...b,address:P.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"location_link",children:"Link do Endereço"}),n.jsx(xe,{id:"location_link",type:"url",placeholder:"https://maps.google.com/...",value:b.location_link,onChange:P=>T({...b,location_link:P.target.value})})]})]}):n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"location_link",children:"Link da Transmissão *"}),n.jsx(xe,{id:"location_link",type:"url",placeholder:"https://youtube.com/... ou outro link",value:b.location_link,onChange:P=>T({...b,location_link:P.target.value}),required:!0})]})})]}),n.jsxs(je,{children:[n.jsx(qe,{children:n.jsxs(We,{className:"text-sm flex items-center gap-2",children:[n.jsx(tr,{className:"h-4 w-4"}),"Capacidade e Ingresso"]})}),n.jsxs(Ee,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"max_attendees",children:"Número Máximo de Participantes"}),n.jsx(xe,{id:"max_attendees",type:"number",placeholder:"Deixe em branco para ilimitado",value:b.max_attendees,onChange:P=>T({...b,max_attendees:P.target.value}),min:"1"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(ie,{htmlFor:"is_free",children:"Evento Gratuito"}),n.jsx(Ar,{id:"is_free",checked:u,onCheckedChange:f})]}),!u&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsxs(ie,{htmlFor:"ticket_price",className:"flex items-center gap-2",children:[n.jsx(Sn,{className:"h-4 w-4"}),"Valor do Ingresso"]}),n.jsx(xe,{id:"ticket_price",placeholder:"Ex: R$ 50,00",value:b.ticket_price,onChange:P=>T({...b,ticket_price:P.target.value})})]}),n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"ticket_link",children:"Link para Compra"}),n.jsx(xe,{id:"ticket_link",type:"url",placeholder:"https://...",value:b.ticket_link,onChange:P=>T({...b,ticket_link:P.target.value})})]})]})]})]}),n.jsxs(je,{children:[n.jsx(qe,{children:n.jsxs(We,{className:"text-sm flex items-center gap-2",children:[n.jsx(Ec,{className:"h-4 w-4"}),"Formulário de Cadastro"]})}),n.jsxs(Ee,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(ie,{htmlFor:"requires_registration",children:"Requer Cadastro dos Participantes"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Nome, email e telefone sempre serão coletados"})]}),n.jsx(Ar,{id:"requires_registration",checked:p,onCheckedChange:x})]}),p&&n.jsxs(Y,{type:"button",variant:"outline",onClick:()=>N(!0),className:"w-full",children:["Configurar Campos Personalizados",w.length>0&&n.jsx("span",{className:"ml-2 text-xs bg-primary text-primary-foreground px-2 py-0.5 rounded",children:w.length})]})]})]}),n.jsx(Y,{type:"submit",className:"w-full",disabled:s,children:s?"Criando...":"Criar Evento"})]})]}),n.jsx(nA,{open:j,onOpenChange:N,fields:w,onSave:_})]})}function mV(){const e=_t(),{user:t}=wt(),{isAdmin:r,loading:s}=Fs(),[a,o]=v.useState([]),[d,u]=v.useState(!0);v.useEffect(()=>{if(!s&&!r){e("/");return}r&&f()},[r,s,e]);const f=async()=>{try{const{data:w,error:_}=await U.from("event_claim_requests").select(`
          *,
          platform_events (id, title, organizer_name, event_date, location, image_url, description),
          organizers (id, username, page_title, avatar_url, page_description, category)
        `).order("created_at",{ascending:!1});if(_)throw _;o(w||[])}catch(w){console.error("Error fetching requests:",w),W.error("Erro ao carregar solicitações")}finally{u(!1)}},p=async(w,_,j)=>{if(t)try{const{data:N,error:C}=await U.from("platform_events").select("*").eq("id",_).single();if(C)throw C;if(!N)throw new Error("Evento não encontrado");const{data:A}=await U.from("events").select("id").eq("organizer_id",j).eq("title",N.title).maybeSingle();if(A){W.error("Este evento já foi criado para este organizador");return}const{data:S,error:k}=await U.from("events").insert({organizer_id:j,title:N.title,description:N.description,event_date:N.event_date,end_date:N.end_date,location:N.location,location_link:N.location_link,image_url:N.image_url,category:N.category,max_attendees:N.max_attendees,ticket_price:N.ticket_price,ticket_link:N.ticket_link,status:N.status||"upcoming",current_attendees:0,is_live:!1}).select().single();if(k)throw k;const{error:b}=await U.from("platform_events").update({claimed_by_organizer_id:j,approval_status:"approved"}).eq("id",_);if(b)throw b;const{error:T}=await U.from("event_claim_requests").update({status:"approved",reviewed_at:new Date().toISOString(),reviewed_by_admin_id:t.id}).eq("id",w);if(T)throw T;W.success("Solicitação aprovada! Evento criado para o organizador e já está disponível no perfil dele."),f()}catch(N){console.error("Error approving request:",N),W.error("Erro ao aprovar: "+N.message)}},x=async w=>{if(t)try{const{error:_}=await U.from("event_claim_requests").update({status:"rejected",reviewed_at:new Date().toISOString(),reviewed_by_admin_id:t.id}).eq("id",w);if(_)throw _;W.success("Solicitação rejeitada"),f()}catch(_){console.error("Error rejecting request:",_),W.error("Erro ao rejeitar: "+_.message)}};return s||!r?null:n.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[n.jsxs(Y,{variant:"ghost",onClick:()=>e("/admin"),className:"mb-4",children:[n.jsx(mt,{className:"mr-2 h-4 w-4"}),"Voltar"]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Solicitações de Associação"}),n.jsx("p",{className:"text-muted-foreground",children:"Gerencie pedidos de organizadores para eventos da plataforma"})]}),d?n.jsx("div",{className:"space-y-4",children:[1,2,3].map(w=>n.jsxs(je,{children:[n.jsxs(qe,{children:[n.jsx(Ct,{className:"h-6 w-3/4"}),n.jsx(Ct,{className:"h-4 w-1/2 mt-2"})]}),n.jsxs(Ee,{className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsx(Ct,{className:"h-20"}),n.jsx(Ct,{className:"h-20"})]}),n.jsx(Ct,{className:"h-24"})]})]},w))}):a.length===0?n.jsx(je,{className:"border-2 border-dashed",children:n.jsxs(Ee,{className:"py-16 text-center",children:[n.jsx(Tx,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Nenhuma solicitação ainda"}),n.jsx("p",{className:"text-muted-foreground max-w-md mx-auto",children:"Quando organizadores solicitarem associação a eventos da plataforma, eles aparecerão aqui para você aprovar ou rejeitar."})]})}):n.jsx("div",{className:"space-y-6",children:a.map(w=>n.jsxs(je,{className:"overflow-hidden",children:[w.platform_events.image_url&&n.jsx("div",{className:"h-48 overflow-hidden",children:n.jsx("img",{src:w.platform_events.image_url,alt:w.platform_events.title,className:"w-full h-full object-cover"})}),n.jsx(qe,{children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"space-y-1 flex-1",children:[n.jsx(We,{className:"text-2xl",children:w.platform_events.title}),n.jsxs(Qr,{children:["Solicitado em ",cn(new Date(w.created_at),"d 'de' MMMM 'às' HH:mm",{locale:Pr})]})]}),n.jsx(ct,{variant:w.status==="pending"?"default":w.status==="approved"?"secondary":"destructive",className:"text-sm",children:w.status==="pending"?"⏳ Pendente":w.status==="approved"?"✓ Aprovado":"✗ Rejeitado"})]})}),n.jsxs(Ee,{className:"space-y-6",children:[n.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg space-y-3",children:[n.jsx("h3",{className:"font-semibold text-sm uppercase tracking-wide text-muted-foreground",children:"Detalhes do Evento"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(kt,{className:"h-4 w-4 mt-0.5 text-muted-foreground"}),n.jsx("span",{className:"text-sm",children:cn(new Date(w.platform_events.event_date),"d 'de' MMMM 'de' yyyy 'às' HH:mm",{locale:Pr})})]}),n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Tt,{className:"h-4 w-4 mt-0.5 text-muted-foreground"}),n.jsx("span",{className:"text-sm",children:w.platform_events.location})]}),w.platform_events.description&&n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:w.platform_events.description})]})]}),n.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg space-y-3",children:[n.jsx("h3",{className:"font-semibold text-sm uppercase tracking-wide text-muted-foreground",children:"Organizador Solicitante"}),n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsxs(Vt,{className:"h-16 w-16",children:[n.jsx(Yt,{src:w.organizers.avatar_url||""}),n.jsx(Wt,{children:n.jsx(hs,{className:"h-8 w-8"})})]}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("p",{className:"font-semibold text-lg",children:w.organizers.page_title}),w.organizers.category&&n.jsx(ct,{variant:"outline",className:"text-xs",children:w.organizers.category})]}),n.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["@",w.organizers.username]}),w.organizers.page_description&&n.jsx("p",{className:"text-sm text-muted-foreground",children:w.organizers.page_description})]})]})]}),w.message&&n.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex gap-2 mb-2",children:[n.jsx(Tx,{className:"h-4 w-4 text-blue-500 mt-0.5"}),n.jsx("p",{className:"text-sm font-medium text-blue-500",children:"Mensagem do Organizador"})]}),n.jsx("p",{className:"text-sm pl-6",children:w.message})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[n.jsxs(Y,{variant:"outline",onClick:()=>e(`/${w.organizers.username}`),className:"flex-1 min-w-[200px]",children:[n.jsx(zr,{className:"mr-2 h-4 w-4"}),"Ver Perfil Completo"]}),w.status==="pending"&&n.jsxs(n.Fragment,{children:[n.jsxs(Y,{onClick:()=>p(w.id,w.platform_events.id,w.organizers.id),className:"flex-1 min-w-[150px]",children:[n.jsx(ss,{className:"mr-2 h-4 w-4"}),"Aprovar"]}),n.jsxs(Y,{variant:"destructive",onClick:()=>x(w.id),className:"flex-1 min-w-[150px]",children:[n.jsx(Xh,{className:"mr-2 h-4 w-4"}),"Rejeitar"]})]})]})]})]},w.id))})]})}function pV(){const e=_t(),{isAdmin:t,loading:r}=Fs(),[s,a]=v.useState([]),[o,d]=v.useState(!0);v.useEffect(()=>{!r&&!t&&e("/")},[t,r,e]),v.useEffect(()=>{t&&u()},[t]);const u=async()=>{try{const{data:N,error:C}=await U.from("platform_events").select("*").order("event_date",{ascending:!0});if(C)throw C;const A=new Date,S=(N||[]).filter(k=>new Date(k.end_date||k.event_date)<A&&k.status!=="ended");if(S.length>0){const k=S.map(O=>U.from("platform_events").update({status:"ended"}).eq("id",O.id));await Promise.all(k),console.log(`Auto-ended ${S.length} past events`);const{data:b,error:T}=await U.from("platform_events").select("*").order("event_date",{ascending:!0});if(T)throw T;a(b||[])}else a(N||[])}catch(N){console.error("Error fetching platform events:",N),W.error("Erro ao carregar eventos")}finally{d(!1)}},f=async N=>{try{const{error:C}=await U.from("platform_events").update({status:"ended"}).eq("id",N);if(C)throw C;W.success("Evento encerrado com sucesso"),u()}catch(C){console.error("Error ending event:",C),W.error("Erro ao encerrar evento")}},p=async N=>{if(confirm("Tem certeza que deseja excluir este evento? Esta ação não pode ser desfeita."))try{const{error:C}=await U.from("platform_events").delete().eq("id",N);if(C)throw C;W.success("Evento excluído com sucesso"),u()}catch(C){console.error("Error deleting event:",C),W.error("Erro ao excluir evento")}},x=()=>{const N=new Date,C=s.filter(k=>{const b=new Date(k.event_date);return k.end_date&&new Date(k.end_date),b>N&&k.status!=="ended"}),A=s.filter(k=>{const b=new Date(k.event_date),T=k.end_date?new Date(k.end_date):null;return b<=N&&(!T||T>N)&&k.status!=="ended"}),S=s.filter(k=>(k.end_date?new Date(k.end_date):new Date(k.event_date))<N||k.status==="ended");return{upcoming:C,live:A,ended:S}},{upcoming:w,live:_,ended:j}=x();return r||!t?null:n.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx(Y,{variant:"ghost",onClick:()=>e("/admin"),children:"← Voltar"}),n.jsx("h1",{className:"text-3xl font-bold mt-2",children:"Eventos da Plataforma"}),n.jsx("p",{className:"text-muted-foreground",children:"Gerencie todos os eventos criados pela plataforma"})]}),n.jsx(Y,{onClick:()=>e("/admin/create-platform-event"),children:"Criar Novo Evento"})]}),o?n.jsx("div",{className:"grid gap-4 md:grid-cols-3 lg:grid-cols-4",children:[1,2,3,4].map(N=>n.jsx(Ct,{className:"h-48"},N))}):s.length===0?n.jsx(je,{children:n.jsx(Ee,{className:"py-12 text-center",children:n.jsx("p",{className:"text-muted-foreground",children:"Nenhum evento da plataforma encontrado"})})}):n.jsxs("div",{className:"space-y-8",children:[_.length>0&&n.jsxs("div",{children:[n.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[n.jsx("div",{className:"h-3 w-3 bg-green-500 rounded-full animate-pulse"}),"Acontecendo Agora (",_.length,")"]}),n.jsx("div",{className:"grid gap-3 md:grid-cols-3 lg:grid-cols-4",children:_.map(N=>n.jsxs(je,{className:"overflow-hidden",children:[N.image_url&&n.jsx("div",{className:"h-32 overflow-hidden",children:n.jsx("img",{src:N.image_url,alt:N.title,className:"w-full h-full object-cover"})}),n.jsxs(qe,{className:"p-3",children:[n.jsx(We,{className:"text-sm line-clamp-2",children:N.title}),n.jsx("p",{className:"text-xs text-muted-foreground",children:N.organizer_name})]}),n.jsxs(Ee,{className:"p-3 pt-0 space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[n.jsx(kt,{className:"h-3 w-3"}),n.jsx("span",{className:"truncate",children:cn(new Date(N.event_date),"d/MM 'às' HH:mm",{locale:Pr})})]}),n.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[n.jsx(Tt,{className:"h-3 w-3"}),n.jsx("span",{className:"truncate",children:N.location})]}),n.jsxs("div",{className:"flex gap-1 pt-1",children:[n.jsx(Y,{variant:"outline",size:"sm",onClick:()=>e(`/admin/platform-event/${N.id}/edit`),className:"flex-1 h-7 text-xs",children:n.jsx(Aa,{className:"h-3 w-3"})}),n.jsx(Y,{variant:"outline",size:"sm",onClick:()=>e(`/admin/platform-event/${N.id}/registrations`),className:"flex-1 h-7 text-xs",children:n.jsx(ss,{className:"h-3 w-3"})}),n.jsx(Y,{variant:"destructive",size:"sm",onClick:()=>f(N.id),className:"h-7 text-xs",children:n.jsx(Xh,{className:"h-3 w-3"})})]})]})]},N.id))})]}),w.length>0&&n.jsxs("div",{children:[n.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[n.jsx(kt,{className:"h-5 w-5 text-blue-500"}),"Próximos Eventos (",w.length,")"]}),n.jsx("div",{className:"grid gap-3 md:grid-cols-3 lg:grid-cols-4",children:w.map(N=>n.jsxs(je,{className:"overflow-hidden",children:[N.image_url&&n.jsx("div",{className:"h-32 overflow-hidden",children:n.jsx("img",{src:N.image_url,alt:N.title,className:"w-full h-full object-cover"})}),n.jsxs(qe,{className:"p-3",children:[n.jsx(We,{className:"text-sm line-clamp-2",children:N.title}),n.jsx("p",{className:"text-xs text-muted-foreground",children:N.organizer_name})]}),n.jsxs(Ee,{className:"p-3 pt-0 space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[n.jsx(kt,{className:"h-3 w-3"}),n.jsx("span",{className:"truncate",children:cn(new Date(N.event_date),"d/MM 'às' HH:mm",{locale:Pr})})]}),n.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[n.jsx(Tt,{className:"h-3 w-3"}),n.jsx("span",{className:"truncate",children:N.location})]}),n.jsxs("div",{className:"flex gap-1 pt-1",children:[n.jsx(Y,{variant:"outline",size:"sm",onClick:()=>e(`/admin/platform-event/${N.id}/edit`),className:"flex-1 h-7 text-xs",children:n.jsx(Aa,{className:"h-3 w-3"})}),n.jsx(Y,{variant:"outline",size:"sm",onClick:()=>e(`/admin/platform-event/${N.id}/registrations`),className:"flex-1 h-7 text-xs",children:n.jsx(ss,{className:"h-3 w-3"})}),n.jsx(Y,{variant:"destructive",size:"sm",onClick:()=>f(N.id),className:"h-7 text-xs",children:n.jsx(Xh,{className:"h-3 w-3"})})]})]})]},N.id))})]}),j.length>0&&n.jsxs("div",{children:[n.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2 text-muted-foreground",children:[n.jsx(ss,{className:"h-5 w-5"}),"Eventos Realizados (",j.length,")"]}),n.jsx("div",{className:"grid gap-3 md:grid-cols-3 lg:grid-cols-4",children:j.map(N=>n.jsxs(je,{className:"overflow-hidden opacity-75",children:[N.image_url&&n.jsx("div",{className:"h-32 overflow-hidden",children:n.jsx("img",{src:N.image_url,alt:N.title,className:"w-full h-full object-cover grayscale"})}),n.jsxs(qe,{className:"p-3",children:[n.jsx(We,{className:"text-sm line-clamp-2",children:N.title}),n.jsx("p",{className:"text-xs text-muted-foreground",children:N.organizer_name})]}),n.jsxs(Ee,{className:"p-3 pt-0 space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[n.jsx(kt,{className:"h-3 w-3"}),n.jsx("span",{className:"truncate",children:cn(new Date(N.event_date),"d/MM 'às' HH:mm",{locale:Pr})})]}),n.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[n.jsx(Tt,{className:"h-3 w-3"}),n.jsx("span",{className:"truncate",children:N.location})]}),n.jsxs("div",{className:"flex gap-1 pt-1",children:[n.jsx(Y,{variant:"outline",size:"sm",onClick:()=>e(`/admin/platform-event/${N.id}/registrations`),className:"flex-1 h-7 text-xs",children:n.jsx(ss,{className:"h-3 w-3"})}),n.jsx(Y,{variant:"destructive",size:"sm",onClick:()=>p(N.id),className:"h-7 text-xs",children:n.jsx(Xh,{className:"h-3 w-3"})})]})]})]},N.id))})]})]})]})}function gV(){const{eventId:e}=hl(),t=_t(),{isAdmin:r,loading:s}=Fs(),[a,o]=v.useState(!0),[d,u]=v.useState(!1),[f,p]=v.useState(!1),[x,w]=v.useState({title:"",description:"",event_date:"",end_date:"",location:"",location_link:"",organizer_name:"",max_attendees:"",ticket_price:"",ticket_link:""}),[_,j]=v.useState([]),[N,C]=v.useState(null),[A,S]=v.useState(null),[k,b]=v.useState(!1);v.useEffect(()=>{!s&&!r&&t("/")},[r,s,t]),v.useEffect(()=>{r&&e&&T()},[r,e]);const T=async()=>{var M,P;try{const{data:q,error:G}=await U.from("platform_events").select("*").eq("id",e).single();if(G)throw G;w({title:q.title,description:q.description||"",event_date:q.event_date,end_date:q.end_date||"",location:q.location,location_link:q.location_link||"",organizer_name:q.organizer_name,max_attendees:((M=q.max_attendees)==null?void 0:M.toString())||"",ticket_price:((P=q.ticket_price)==null?void 0:P.toString())||"",ticket_link:q.ticket_link||""}),j(q.category||[]),C(q.image_url||null);const B=q.ticket_price,V=q.ticket_link;b(!!(B&&B>0)||!!V)}catch(q){console.error("Error fetching event:",q),W.error("Erro ao carregar evento")}finally{o(!1)}},O=M=>{var q;const P=(q=M.target.files)==null?void 0:q[0];if(P){S(P);const G=new FileReader;G.onload=B=>{var V;C((V=B.target)==null?void 0:V.result)},G.readAsDataURL(P)}},L=async M=>{M.preventDefault(),u(!0);try{let P=N;if(A){const G=A.name.split(".").pop(),B=`platform-events/${Date.now()}.${G}`,{error:V}=await U.storage.from("user-uploads").upload(B,A);if(V)throw V;const{data:{publicUrl:ee}}=U.storage.from("user-uploads").getPublicUrl(B);P=ee}const{error:q}=await U.from("platform_events").update({title:x.title,description:x.description,event_date:x.event_date,end_date:x.end_date||null,location:x.location,location_link:x.location_link||null,organizer_name:x.organizer_name,max_attendees:x.max_attendees?parseInt(x.max_attendees):null,category:_.length>0?_:null,image_url:P,ticket_price:k&&x.ticket_price?parseFloat(x.ticket_price):0,ticket_link:k&&x.ticket_link||null,updated_at:new Date().toISOString()}).eq("id",e);if(q)throw q;W.success("Evento atualizado com sucesso!"),t("/admin/platform-events")}catch(P){console.error("Error updating event:",P),W.error("Erro ao atualizar evento")}finally{u(!1)}},R=async()=>{if(!x.title||!x.organizer_name||!x.event_date||!x.location){W.error("Preencha os campos obrigatórios antes de gerar a descrição");return}p(!0);try{const{data:M,error:P}=await U.functions.invoke("generate-event-description",{body:{title:x.title,organizerName:x.organizer_name,eventDate:x.event_date,location:x.location,category:_,ticketPrice:k&&x.ticket_price?parseFloat(x.ticket_price):0}});if(P)throw P;if(M!=null&&M.description)w({...x,description:M.description}),W.success("Descrição gerada com sucesso!");else throw new Error("Nenhuma descrição foi gerada")}catch(M){console.error("Error generating description:",M),W.error("Erro ao gerar descrição. Tente novamente.")}finally{p(!1)}};return s||!r||a?null:n.jsxs("div",{className:"container mx-auto p-6 max-w-2xl",children:[n.jsx(Y,{variant:"ghost",onClick:()=>t("/admin/platform-events"),className:"mb-4",children:"← Voltar"}),n.jsxs(je,{children:[n.jsx(qe,{children:n.jsx(We,{children:"Editar Evento da Plataforma"})}),n.jsx(Ee,{children:n.jsxs("form",{onSubmit:L,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ie,{children:"Banner do Evento"}),n.jsx("div",{className:"mt-2",children:N?n.jsxs("div",{className:"relative h-48 rounded-lg overflow-hidden",children:[n.jsx("img",{src:N,alt:"Preview do evento",className:"w-full h-full object-cover"}),n.jsx(Y,{type:"button",variant:"secondary",size:"sm",className:"absolute top-2 right-2",onClick:()=>{C(null),S(null)},children:"Remover"})]}):n.jsxs("label",{className:"flex flex-col items-center justify-center h-48 border-2 border-dashed border-border rounded-lg cursor-pointer hover:border-primary/50 transition-colors",children:[n.jsx(Ds,{className:"h-8 w-8 text-muted-foreground mb-2"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"Clique para adicionar uma imagem"}),n.jsx("input",{type:"file",accept:"image/*",onChange:O,className:"hidden"})]})})]}),n.jsxs("div",{children:[n.jsx(ie,{children:"Título do Evento"}),n.jsx(xe,{value:x.title,onChange:M=>w({...x,title:M.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsx(ie,{children:"Nome do Organizador"}),n.jsx(xe,{value:x.organizer_name,onChange:M=>w({...x,organizer_name:M.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx(ie,{children:"Descrição"}),n.jsxs(Y,{type:"button",variant:"outline",size:"sm",onClick:R,disabled:f||!x.title,children:[n.jsx(su,{className:"h-4 w-4 mr-2"}),f?"Gerando...":"Gerar com IA"]})]}),n.jsx(An,{value:x.description,onChange:M=>w({...x,description:M.target.value}),rows:4,placeholder:"Clique em 'Gerar com IA' para criar uma descrição automática ou escreva manualmente"})]}),n.jsxs("div",{children:[n.jsx(ie,{children:"Categorias"}),n.jsx(ip,{value:_,onChange:j,placeholder:"Selecione uma ou mais categorias"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(ie,{children:"Data/Hora Início *"}),n.jsx(xe,{type:"datetime-local",value:x.event_date,onChange:M=>w({...x,event_date:M.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsx(ie,{children:"Data/Hora Fim *"}),n.jsx(xe,{type:"datetime-local",value:x.end_date,onChange:M=>w({...x,end_date:M.target.value}),required:!0})]})]}),n.jsxs("div",{children:[n.jsx(ie,{children:"Local"}),n.jsx(xe,{value:x.location,onChange:M=>w({...x,location:M.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsx(ie,{children:"Link do Local"}),n.jsx(xe,{type:"url",value:x.location_link,onChange:M=>w({...x,location_link:M.target.value}),placeholder:"https://maps.google.com/..."})]}),n.jsxs("div",{children:[n.jsx(ie,{children:"Capacidade Máxima"}),n.jsx(xe,{type:"number",value:x.max_attendees,onChange:M=>w({...x,max_attendees:M.target.value}),placeholder:"Deixe em branco para ilimitado"})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[n.jsx("h3",{className:"font-medium",children:"Informações de Pagamento"}),n.jsxs("div",{children:[n.jsx(ie,{children:"Tipo de Evento"}),n.jsxs(Ui,{value:k?"paid":"free",onValueChange:M=>{b(M==="paid"),M==="free"&&w({...x,ticket_price:"",ticket_link:""})},className:"flex gap-4 mt-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(an,{value:"free",id:"free"}),n.jsx(ie,{htmlFor:"free",className:"cursor-pointer font-normal",children:"💚 Gratuito"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(an,{value:"paid",id:"paid"}),n.jsx(ie,{htmlFor:"paid",className:"cursor-pointer font-normal",children:"💰 Pago"})]})]})]}),k&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(ie,{children:"Preço do Ingresso (R$)"}),n.jsx(xe,{type:"number",step:"0.01",min:"0",value:x.ticket_price,onChange:M=>w({...x,ticket_price:M.target.value}),placeholder:"Ex: 50.00"})]}),n.jsxs("div",{children:[n.jsx(ie,{children:"Link de Pagamento/Ingresso"}),n.jsx(xe,{type:"url",value:x.ticket_link,onChange:M=>w({...x,ticket_link:M.target.value}),placeholder:"https://sympla.com.br/..."}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Link externo para compra de ingressos (Sympla, Eventbrite, etc)"})]})]})]}),n.jsxs(Y,{type:"submit",className:"w-full",disabled:d,children:[d&&n.jsx(Ia,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvar Alterações"]})]})})]})]})}function xV(){const{eventId:e}=hl(),t=_t(),{isAdmin:r,loading:s}=Fs(),[a,o]=v.useState([]),[d,u]=v.useState(""),[f,p]=v.useState(!0);v.useEffect(()=>{!s&&!r&&t("/")},[r,s,t]),v.useEffect(()=>{r&&e&&x()},[r,e]);const x=async()=>{try{const{data:_,error:j}=await U.from("platform_events").select("title").eq("id",e).single();if(j)throw j;u(_.title);const{data:N,error:C}=await U.from("event_registrations").select("*").eq("event_id",e).order("created_at",{ascending:!1});if(C)throw C;o(N||[])}catch(_){console.error("Error fetching data:",_),W.error("Erro ao carregar dados")}finally{p(!1)}};if(s||!r)return null;const w=a.filter(_=>_.attendance_confirmed).length;return n.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx(Y,{variant:"ghost",onClick:()=>t("/admin/platform-events"),children:"← Voltar"}),n.jsx("h1",{className:"text-3xl font-bold mt-2",children:d}),n.jsxs("p",{className:"text-muted-foreground",children:[a.length," cadastros | ",w," presenças confirmadas"]})]}),f?n.jsx("div",{className:"space-y-4",children:[1,2,3].map(_=>n.jsx(Ct,{className:"h-32"},_))}):a.length===0?n.jsx(je,{children:n.jsx(Ee,{className:"py-12 text-center",children:n.jsx("p",{className:"text-muted-foreground",children:"Nenhum cadastro encontrado"})})}):n.jsx("div",{className:"space-y-4",children:a.map(_=>n.jsxs(je,{children:[n.jsx(qe,{children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs(We,{className:"text-lg flex items-center gap-2",children:[n.jsx(hs,{className:"h-5 w-5"}),_.user_name]}),_.attendance_confirmed&&n.jsxs("span",{className:"flex items-center gap-1 px-3 py-1 rounded-full bg-green-500/20 text-green-500 text-sm",children:[n.jsx(ss,{className:"h-4 w-4"}),"Presença Confirmada"]})]})}),n.jsxs(Ee,{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Au,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("a",{href:`mailto:${_.user_email}`,className:"hover:underline",children:_.user_email})]}),_.user_phone&&n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Bc,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("a",{href:`tel:${_.user_phone}`,className:"hover:underline",children:_.user_phone})]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Cadastrado em: ",cn(new Date(_.created_at),"d 'de' MMMM 'de' yyyy 'às' HH:mm",{locale:Pr})]}),_.registration_data&&n.jsxs("div",{className:"mt-4 p-3 bg-muted rounded-lg",children:[n.jsx("p",{className:"text-sm font-medium mb-2",children:"Dados adicionais:"}),n.jsx("pre",{className:"text-xs overflow-auto",children:JSON.stringify(_.registration_data,null,2)})]})]})]},_.id))})]})}function vV(){var A;const e=_t(),{isAdmin:t}=Fs(),[r,s]=v.useState({}),[a,o]=v.useState(null),[d,u]=v.useState(""),[f,p]=v.useState(!0),[x,w]=v.useState(!1);v.useEffect(()=>{if(!t){e("/");return}_();const S=U.channel("support-messages").on("postgres_changes",{event:"*",schema:"public",table:"support_messages"},()=>{_()}).subscribe();return()=>{U.removeChannel(S)}},[t,e]);const _=async()=>{try{const{data:S,error:k}=await U.from("support_messages").select("*").order("created_at",{ascending:!0});if(k)throw k;const b=[...new Set((S==null?void 0:S.map(M=>M.user_id))||[])],{data:T,error:O}=await U.from("profiles").select("user_id, display_name, avatar_url").in("user_id",b);if(O)throw O;const L=new Map((T==null?void 0:T.map(M=>[M.user_id,M]))||[]),R={};S==null||S.forEach(M=>{const P=L.get(M.user_id);R[M.user_id]||(R[M.user_id]={user:{display_name:(P==null?void 0:P.display_name)||"Usuário",avatar_url:(P==null?void 0:P.avatar_url)||""},messages:[]}),R[M.user_id].messages.push({...M,profiles:{display_name:(P==null?void 0:P.display_name)||"Usuário",avatar_url:(P==null?void 0:P.avatar_url)||""}})}),s(R)}catch(S){console.error("Error fetching messages:",S),W.error("Erro ao carregar mensagens")}finally{p(!1)}},j=async()=>{if(!(!a||!d.trim())){w(!0);try{const{error:S}=await U.from("support_messages").insert({user_id:a,message:d,is_admin_reply:!0});if(S)throw S;u(""),W.success("Resposta enviada!"),_()}catch(S){console.error("Error sending reply:",S),W.error("Erro ao enviar: "+S.message)}finally{w(!1)}}},N=async S=>{try{await U.from("support_messages").update({read:!0}).eq("user_id",S).eq("is_admin_reply",!1)}catch(k){console.error("Error marking as read:",k)}};if(!t)return null;const C=a?((A=r[a])==null?void 0:A.messages)||[]:[];return n.jsxs("div",{className:"container mx-auto p-6 max-w-6xl",children:[n.jsxs(Y,{variant:"ghost",onClick:()=>e("/admin"),className:"mb-4",children:[n.jsx(mt,{className:"mr-2 h-4 w-4"}),"Voltar"]}),n.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Chat de Suporte"}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[n.jsx(je,{className:"md:col-span-1",children:n.jsxs(Ee,{className:"p-4 space-y-2",children:[n.jsx("h2",{className:"font-semibold mb-4",children:"Conversas"}),f?n.jsx("div",{children:"Carregando..."}):Object.keys(r).length===0?n.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhuma mensagem"}):Object.entries(r).map(([S,k])=>{const b=k.messages.filter(T=>!T.is_admin_reply&&!T.read).length;return n.jsx("div",{onClick:()=>{o(S),N(S)},className:`p-3 rounded cursor-pointer hover:bg-accent ${a===S?"bg-accent":""}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[k.user.avatar_url&&n.jsx("img",{src:k.user.avatar_url,alt:"",className:"w-8 h-8 rounded-full"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-sm",children:k.user.display_name}),b>0&&n.jsxs("span",{className:"text-xs text-primary",children:[b," nova(s)"]})]})]})},S)})]})}),n.jsx(je,{className:"md:col-span-2",children:n.jsx(Ee,{className:"p-4",children:a?n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"h-[400px] overflow-y-auto space-y-3 mb-4",children:C.map(S=>n.jsx("div",{className:`flex ${S.is_admin_reply?"justify-end":"justify-start"}`,children:n.jsxs("div",{className:`max-w-[70%] p-3 rounded-lg ${S.is_admin_reply?"bg-primary text-primary-foreground":"bg-muted"}`,children:[n.jsx("p",{className:"text-sm",children:S.message}),n.jsx("p",{className:"text-xs opacity-70 mt-1",children:cn(new Date(S.created_at),"HH:mm",{locale:Pr})})]})},S.id))}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(An,{value:d,onChange:S=>u(S.target.value),placeholder:"Digite sua resposta...",rows:3}),n.jsx(Y,{onClick:j,disabled:x||!d.trim(),children:n.jsx(C1,{className:"h-4 w-4"})})]})]}):n.jsx("div",{className:"h-[400px] flex items-center justify-center text-muted-foreground",children:"Selecione uma conversa"})})})]})]})}function wV(){const e=_t(),{isAdmin:t,loading:r}=Fs(),[s,a]=v.useState(""),[o,d]=v.useState(""),[u,f]=v.useState(!1),[p,x]=v.useState(null),[w,_]=v.useState(null);if(r)return null;if(!t)return e("/"),null;const j=A=>{var k;const S=(k=A.target.files)==null?void 0:k[0];if(S){x(S);const b=new FileReader;b.onloadend=()=>{_(b.result)},b.readAsDataURL(S)}},N=async()=>{if(!p){W.error("Por favor, selecione uma imagem");return}f(!0);try{const A=new FileReader;A.onloadend=async()=>{const S=A.result,{data:k,error:b}=await U.functions.invoke("extract-event-from-image",{body:{image:S}});if(b)throw b;if(k!=null&&k.success){const T=k.message||"Evento extraído da imagem com sucesso!";W.success(T+" Verifique e complete os campos necessários na revisão."),e("/admin/pending-events")}else throw new Error((k==null?void 0:k.error)||"Erro ao extrair evento da imagem")},A.readAsDataURL(p)}catch(A){console.error("Error extracting from image:",A);const S=A instanceof Error?A.message:"Erro ao processar imagem";W.error(S)}finally{f(!1)}},C=async()=>{if(!s.trim()){W.error("Por favor, insira um endpoint de API");return}f(!0);try{const{data:A,error:S}=await U.functions.invoke("extract-events",{body:{apiEndpoint:s.trim(),apiKey:o.trim()||void 0}});if(S)throw S;if(A!=null&&A.success)W.success(A.message||"Eventos extraídos com sucesso!"),e("/admin/pending-events");else throw new Error((A==null?void 0:A.error)||"Erro ao extrair eventos")}catch(A){console.error("Error extracting events:",A),W.error(A instanceof Error?A.message:"Erro ao processar dados")}finally{f(!1)}};return n.jsxs("div",{className:"container mx-auto p-6 space-y-6 max-w-2xl",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>e("/admin"),children:n.jsx(mt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Gerar Eventos Automaticamente"}),n.jsx("p",{className:"text-muted-foreground",children:"Use IA para extrair eventos de APIs externas"})]})]}),n.jsxs(je,{children:[n.jsxs(qe,{children:[n.jsxs(We,{className:"flex items-center gap-2",children:[n.jsx(Hi,{className:"h-5 w-5"}),"Extrair de Imagem"]}),n.jsx(Qr,{children:'Faça upload de uma imagem de evento (flyer, cartaz, banner promocional) e nossa IA irá extrair todas as informações disponíveis automaticamente. Não precisa ter todos os dados - você pode completar manualmente os campos que faltarem. O evento será salvo como "pendente" para revisão e edição antes da publicação.'})]}),n.jsxs(Ee,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"image",children:"Upload de Imagem *"}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx(xe,{id:"image",type:"file",accept:"image/*",onChange:j,disabled:u,className:"cursor-pointer"}),w&&n.jsx("div",{className:"relative w-full aspect-video rounded-lg overflow-hidden border",children:n.jsx("img",{src:w,alt:"Preview",className:"w-full h-full object-contain bg-muted"})})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Formatos aceitos: JPG, PNG, WEBP"})]}),n.jsx("div",{className:"pt-4",children:n.jsx(Y,{onClick:N,disabled:u||!p,className:"w-full",size:"lg",children:u?n.jsxs(n.Fragment,{children:[n.jsx(Ia,{className:"mr-2 h-4 w-4 animate-spin"}),"Analisando imagem..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ds,{className:"mr-2 h-4 w-4"}),"Extrair Evento da Imagem"]})})}),n.jsxs("div",{className:"pt-4 border-t space-y-2",children:[n.jsx("h3",{className:"font-semibold text-sm",children:"Como funciona:"}),n.jsxs("ol",{className:"text-sm text-muted-foreground space-y-1 list-decimal list-inside",children:[n.jsx("li",{children:"A IA analisa a imagem e identifica informações do evento"}),n.jsx("li",{children:"Extrai título, data, local, preço e outras informações disponíveis"}),n.jsx("li",{children:'Cria o evento como "pendente" mesmo com dados incompletos'}),n.jsx("li",{children:"Você completa os campos faltantes e aprova antes de publicar"})]})]})]})]}),n.jsxs(je,{children:[n.jsxs(qe,{children:[n.jsxs(We,{className:"flex items-center gap-2",children:[n.jsx(su,{className:"h-5 w-5"}),"Extração de API Externa"]}),n.jsx(Qr,{children:'Forneça um endpoint de API que retorne dados de eventos. Nossa IA irá analisar os dados e extrair automaticamente as informações dos eventos. Os eventos serão salvos como "pendentes" para sua aprovação.'})]}),n.jsxs(Ee,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"endpoint",children:"Endpoint da API *"}),n.jsx(xe,{id:"endpoint",type:"url",placeholder:"https://api.exemplo.com/eventos",value:s,onChange:A=>a(A.target.value),disabled:u}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"URL completa do endpoint que retorna dados de eventos (JSON ou HTML)"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"apiKey",children:"Chave API (opcional)"}),n.jsx(xe,{id:"apiKey",type:"password",placeholder:"Bearer token ou API key",value:o,onChange:A=>d(A.target.value),disabled:u}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Se a API requer autenticação, insira a chave aqui"})]}),n.jsx("div",{className:"pt-4",children:n.jsx(Y,{onClick:C,disabled:u||!s.trim(),className:"w-full",size:"lg",children:u?n.jsxs(n.Fragment,{children:[n.jsx(Ia,{className:"mr-2 h-4 w-4 animate-spin"}),"Processando..."]}):n.jsxs(n.Fragment,{children:[n.jsx(su,{className:"mr-2 h-4 w-4"}),"Extrair Eventos com IA"]})})}),n.jsxs("div",{className:"pt-4 border-t space-y-2",children:[n.jsx("h3",{className:"font-semibold text-sm",children:"Como funciona:"}),n.jsxs("ol",{className:"text-sm text-muted-foreground space-y-1 list-decimal list-inside",children:[n.jsx("li",{children:"A IA busca dados do endpoint fornecido"}),n.jsx("li",{children:"Analisa e extrai informações de eventos automaticamente"}),n.jsx("li",{children:'Cria eventos como "pendentes" para revisão'}),n.jsx("li",{children:"Você revisa e aprova os eventos antes de publicá-los"})]})]})]})]})]})}function yV(){const e=_t(),{isAdmin:t,loading:r}=Fs(),[s,a]=v.useState([]),[o,d]=v.useState(!0);v.useEffect(()=>{!r&&!t&&e("/")},[t,r,e]),v.useEffect(()=>{t&&u()},[t]);const u=async()=>{try{const{data:x,error:w}=await U.from("platform_events").select("*").eq("auto_generated",!0).eq("approval_status","pending").order("created_at",{ascending:!1});if(w)throw w;a(x||[])}catch(x){console.error("Error fetching pending events:",x),W.error("Erro ao carregar eventos pendentes")}finally{d(!1)}},f=async x=>{try{const{error:w}=await U.from("platform_events").update({approval_status:"approved"}).eq("id",x);if(w)throw w;W.success("Evento aprovado com sucesso!"),u()}catch(w){console.error("Error approving event:",w),W.error("Erro ao aprovar evento")}},p=async x=>{try{const{error:w}=await U.from("platform_events").delete().eq("id",x);if(w)throw w;W.success("Evento rejeitado"),u()}catch(w){console.error("Error rejecting event:",w),W.error("Erro ao rejeitar evento")}};return r||!t?null:n.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>e("/admin"),children:n.jsx(mt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Eventos Pendentes de Aprovação"}),n.jsx("p",{className:"text-muted-foreground",children:"Eventos gerados automaticamente aguardando revisão"})]})]}),o?n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:[1,2,3,4].map(x=>n.jsx(Ct,{className:"h-80"},x))}):s.length===0?n.jsx(je,{children:n.jsxs(Ee,{className:"py-12 text-center space-y-4",children:[n.jsx("p",{className:"text-muted-foreground",children:"Nenhum evento pendente de aprovação"}),n.jsx(Y,{onClick:()=>e("/admin/auto-generate-events"),children:"Gerar Novos Eventos"})]})}):n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:s.map(x=>n.jsxs(je,{className:"overflow-hidden",children:[x.image_url&&x.image_url.trim()!==""&&n.jsx("div",{className:"h-48 overflow-hidden",children:n.jsx("img",{src:x.image_url,alt:x.title,className:"w-full h-full object-cover"})}),n.jsxs(qe,{children:[n.jsx(We,{className:"text-xl",children:x.title}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Por: ",x.organizer_name]})]}),n.jsxs(Ee,{className:"space-y-4",children:[x.description&&n.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:x.description}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(kt,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{children:cn(new Date(x.event_date),"d 'de' MMMM 'às' HH:mm",{locale:Pr})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Tt,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{children:x.location})]}),x.category&&n.jsx("div",{className:"inline-block px-2 py-1 bg-primary/10 rounded-full text-xs",children:x.category})]}),n.jsxs("div",{className:"flex gap-2 pt-2",children:[n.jsxs(Y,{onClick:()=>e(`/admin/pending-event/${x.id}/edit`),variant:"outline",className:"flex-1",children:[n.jsx(Aa,{className:"h-4 w-4 mr-1"}),"Editar"]}),n.jsxs(Y,{onClick:()=>f(x.id),className:"flex-1",children:[n.jsx(Os,{className:"h-4 w-4 mr-1"}),"Aprovar"]}),n.jsxs(Y,{onClick:()=>p(x.id),variant:"destructive",children:[n.jsx(Jr,{className:"h-4 w-4 mr-1"}),"Rejeitar"]})]})]})]},x.id))})]})}function bV(){const e=_t(),{eventId:t}=hl(),{isAdmin:r,loading:s}=Fs(),[a,o]=v.useState(!0),[d,u]=v.useState(!1),[f,p]=v.useState(!1),[x,w]=v.useState(null),[_,j]=v.useState(null),[N,C]=v.useState({title:"",description:"",organizer_name:"",event_date:"",end_date:"",location:"",location_link:"",ticket_price:0,ticket_link:"",max_attendees:null}),[A,S]=v.useState([]);v.useEffect(()=>{!s&&!r&&e("/")},[r,s,e]),v.useEffect(()=>{r&&t&&k()},[r,t]);const k=async()=>{try{const{data:R,error:M}=await U.from("platform_events").select("*").eq("id",t).eq("approval_status","pending").single();if(M)throw M;R&&(C({title:R.title||"",description:R.description||"",organizer_name:R.organizer_name||"",event_date:R.event_date||"",end_date:R.end_date||"",location:R.location||"",location_link:R.location_link||"",ticket_price:R.ticket_price||0,ticket_link:R.ticket_link||"",max_attendees:R.max_attendees}),S(R.category||[]),R.image_url&&w(R.image_url))}catch(R){console.error("Error fetching event:",R),W.error("Erro ao carregar evento"),e("/admin/pending-events")}finally{o(!1)}},b=R=>{var P;const M=(P=R.target.files)==null?void 0:P[0];if(M){j(M);const q=new FileReader;q.onloadend=()=>{w(q.result)},q.readAsDataURL(M)}},T=async()=>{if(!N.title||!N.organizer_name||!N.event_date||!N.location){W.error("Preencha todos os campos obrigatórios");return}u(!0);try{let R=x;if(_){const P=_.name.split(".").pop(),G=`${`${Math.random().toString(36).substring(2)}.${P}`}`,{error:B}=await U.storage.from("user-uploads").upload(G,_);if(B)throw B;const{data:{publicUrl:V}}=U.storage.from("user-uploads").getPublicUrl(G);R=V}const{error:M}=await U.from("platform_events").update({title:N.title,description:N.description||null,organizer_name:N.organizer_name,event_date:N.event_date,end_date:N.end_date||N.event_date,location:N.location,location_link:N.location_link||null,image_url:R||null,category:A.length>0?A:null,ticket_price:N.ticket_price||0,ticket_link:N.ticket_link||null,max_attendees:N.max_attendees}).eq("id",t);if(M)throw M;W.success("Evento salvo com sucesso!")}catch(R){console.error("Error saving event:",R),W.error("Erro ao salvar evento")}finally{u(!1)}},O=async()=>{await T();try{const{error:R}=await U.from("platform_events").update({approval_status:"approved"}).eq("id",t);if(R)throw R;W.success("Evento aprovado e publicado!"),e("/admin/pending-events")}catch(R){console.error("Error approving event:",R),W.error("Erro ao publicar evento")}},L=async()=>{if(!N.title||!N.organizer_name||!N.event_date||!N.location){W.error("Preencha os campos obrigatórios antes de gerar a descrição");return}p(!0);try{const{data:R,error:M}=await U.functions.invoke("generate-event-description",{body:{title:N.title,organizerName:N.organizer_name,eventDate:N.event_date,location:N.location,category:A,ticketPrice:N.ticket_price}});if(M)throw M;if(R!=null&&R.description)C({...N,description:R.description}),W.success("Descrição gerada com sucesso!");else throw new Error("Nenhuma descrição foi gerada")}catch(R){console.error("Error generating description:",R),W.error("Erro ao gerar descrição. Tente novamente.")}finally{p(!1)}};return s||a||!r?null:n.jsxs("div",{className:"container mx-auto p-6 space-y-6 max-w-3xl",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>e("/admin/pending-events"),children:n.jsx(mt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Editar Evento Pendente"}),n.jsx("p",{className:"text-muted-foreground",children:"Revise e ajuste os dados antes de publicar"})]})]}),n.jsxs(je,{children:[n.jsx(qe,{children:n.jsx(We,{children:"Informações do Evento"})}),n.jsxs(Ee,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{children:"Banner do Evento"}),x?n.jsxs("div",{className:"relative h-48 rounded-lg overflow-hidden",children:[n.jsx("img",{src:x,alt:"Preview do evento",className:"w-full h-full object-cover"}),n.jsx(Y,{type:"button",variant:"secondary",size:"sm",className:"absolute top-2 right-2",onClick:()=>{w(null),j(null)},children:"Remover"})]}):n.jsxs("label",{className:"flex flex-col items-center justify-center h-48 border-2 border-dashed border-border rounded-lg cursor-pointer hover:border-primary/50 transition-colors",children:[n.jsx(Ds,{className:"h-8 w-8 text-muted-foreground mb-2"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"Clique para adicionar uma imagem"}),n.jsx("input",{type:"file",accept:"image/*",onChange:b,className:"hidden"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"title",children:"Título *"}),n.jsx(xe,{id:"title",value:N.title,onChange:R=>C({...N,title:R.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx(ie,{htmlFor:"description",children:"Descrição"}),n.jsxs(Y,{type:"button",variant:"outline",size:"sm",onClick:L,disabled:f||!N.title,children:[n.jsx(su,{className:"h-4 w-4 mr-2"}),f?"Gerando...":"Gerar com IA"]})]}),n.jsx(An,{id:"description",value:N.description,onChange:R=>C({...N,description:R.target.value}),rows:4,placeholder:"Clique em 'Gerar com IA' para criar uma descrição automática ou escreva manualmente"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"organizer_name",children:"Nome do Organizador *"}),n.jsx(xe,{id:"organizer_name",value:N.organizer_name,onChange:R=>C({...N,organizer_name:R.target.value})})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"event_date",children:"Data de Início *"}),n.jsx(xe,{id:"event_date",type:"datetime-local",value:N.event_date,onChange:R=>C({...N,event_date:R.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"end_date",children:"Data de Término"}),n.jsx(xe,{id:"end_date",type:"datetime-local",value:N.end_date,onChange:R=>C({...N,end_date:R.target.value})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"location",children:"Local *"}),n.jsx(xe,{id:"location",value:N.location,onChange:R=>C({...N,location:R.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"location_link",children:"Link do Local (Google Maps)"}),n.jsx(xe,{id:"location_link",type:"url",value:N.location_link,onChange:R=>C({...N,location_link:R.target.value})})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"category",children:"Categorias"}),n.jsx(ip,{value:A,onChange:S,placeholder:"Selecione uma ou mais categorias"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"max_attendees",children:"Capacidade Máxima"}),n.jsx(xe,{id:"max_attendees",type:"number",value:N.max_attendees||"",onChange:R=>C({...N,max_attendees:R.target.value?parseInt(R.target.value):null})})]})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"ticket_price",children:"Preço do Ingresso (R$)"}),n.jsx(xe,{id:"ticket_price",type:"number",step:"0.01",value:N.ticket_price,onChange:R=>C({...N,ticket_price:parseFloat(R.target.value)||0})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ie,{htmlFor:"ticket_link",children:"Link de Compra"}),n.jsx(xe,{id:"ticket_link",type:"url",value:N.ticket_link,onChange:R=>C({...N,ticket_link:R.target.value})})]})]}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsxs(Y,{onClick:T,disabled:d,variant:"outline",className:"flex-1",children:[n.jsx(N8,{className:"h-4 w-4 mr-2"}),"Salvar Alterações"]}),n.jsxs(Y,{onClick:O,disabled:d,className:"flex-1",children:[n.jsx(Os,{className:"h-4 w-4 mr-2"}),"Salvar e Publicar"]})]})]})]})]})}function _V(){const[e,t]=v.useState(!1);return{loading:e,acceptFriendRequest:async(a,o)=>{t(!0);try{const{error:d}=await U.from("friendships").update({status:"accepted"}).or(`and(id.eq.${a}),and(user_id.eq.${o})`);if(d)throw d;return W.success("Solicitação aceita!"),!0}catch(d){return console.error("Error accepting friend request:",d),W.error("Erro ao aceitar solicitação"),!1}finally{t(!1)}},declineFriendRequest:async(a,o)=>{t(!0);try{const{error:d}=await U.from("friendships").delete().or(`and(id.eq.${a}),and(user_id.eq.${o})`);if(d)throw d;return W.success("Solicitação recusada"),!0}catch(d){return console.error("Error declining friend request:",d),W.error("Erro ao recusar solicitação"),!1}finally{t(!1)}}}}function NV(){const{user:e}=wt(),t=_t(),{notifications:r,loading:s,markAsRead:a,deleteNotification:o}=iE(),{acceptFriendRequest:d,declineFriendRequest:u,loading:f}=_V(),[p,x]=v.useState({}),[w,_]=v.useState({}),j=r.filter(q=>{const G=new Date(q.created_at),B=new Date;return G.toDateString()===B.toDateString()}),N=r.filter(q=>{const G=new Date(q.created_at),B=new Date;return B.setDate(B.getDate()-1),G.toDateString()===B.toDateString()}),C=r.filter(q=>{const G=new Date(q.created_at),B=new Date;return B.setDate(B.getDate()-1),G<B&&G.toDateString()!==B.toDateString()});v.useEffect(()=>{const q=async()=>{const G=r.filter(ee=>ee.type==="friend_request"),B=r.filter(ee=>["user_like","user_message","event_like"].includes(ee.type));for(const ee of G){const{data:X}=await U.from("friendships").select("user_id").eq("friend_id",e==null?void 0:e.id).eq("status","pending").order("created_at",{ascending:!1}).limit(1).maybeSingle();if(X){const{data:le}=await U.from("profiles").select("user_id, display_name, avatar_url, interest, relationship_status").eq("user_id",X.user_id).maybeSingle();le&&x(ue=>({...ue,[ee.id]:{...le,friendshipUserId:X.user_id}}))}}const V=B.map(ee=>{try{const X=typeof ee.data=="string"?JSON.parse(ee.data):ee.data;return(X==null?void 0:X.from_user_id)||(X==null?void 0:X.user_id)}catch{return null}}).filter(Boolean);if(V.length>0){const{data:ee}=await U.from("profiles").select("user_id, display_name, avatar_url").in("user_id",V);if(ee){const X={};ee.forEach(le=>{X[le.user_id]=le}),_(X)}}};e&&r.length>0&&q()},[r,e]);const A=q=>{var G,B;if(q.type==="friend_request")return(G=p[q.id])==null?void 0:G.avatar_url;try{const V=typeof q.data=="string"?JSON.parse(q.data):q.data,ee=(V==null?void 0:V.from_user_id)||(V==null?void 0:V.user_id);return ee?(B=w[ee])==null?void 0:B.avatar_url:null}catch{return null}},S=q=>{var G,B;if(q.type==="friend_request")return((G=p[q.id])==null?void 0:G.display_name)||"Usuário";try{const V=typeof q.data=="string"?JSON.parse(q.data):q.data,ee=(V==null?void 0:V.from_user_id)||(V==null?void 0:V.user_id);return ee&&((B=w[ee])==null?void 0:B.display_name)||"Usuário"}catch{return"Usuário"}},k=q=>{switch(q){case"event_created":case"event_updated":case"event_cancelled":return kt;case"friend_request":return S1;case"user_like":case"event_like":return Ta;case"user_message":return us;default:return Ga}},b=q=>{try{return qf(new Date(q),{addSuffix:!0,locale:Pr})}catch{return"recentemente"}},T=async q=>{if(q.type==="friend_request"){await a(q.id);return}await a(q.id),q.type==="user_message"||q.type==="user_like"?t("/find-friends"):q.event_id&&t(`/e/${q.event_id}`)},O=async(q,G)=>{await d("",G)&&o(q)},L=async(q,G)=>{await u("",G)&&o(q)},R=q=>({solteiro:"Solteiro(a)",relacionamento:"Em relacionamento",casado:"Casado(a)",preferencia_nao_informar:"Prefiro não informar"})[q]||q,M=q=>({curtição:"Curtição",namoro:"Namoro",amizade:"Amizade"})[q]||q;if(!e)return t("/auth"),null;const P=(q,G)=>q.length===0?null:n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-sm font-semibold text-foreground px-4 py-3 sticky top-[73px] bg-background z-10",children:G}),n.jsx("div",{children:q.map(B=>{const V=k(B.type),ee=B.type==="friend_request",X=ee?p[B.id]:null,le=A(B),ue=S(B),oe=["user_like","user_message","event_like","friend_request"].includes(B.type);return n.jsx("div",{className:`px-4 py-3 ${ee?"":"hover:bg-surface/50 cursor-pointer"} transition-colors group ${B.read?"":"bg-primary/5"}`,onClick:()=>T(B),children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"relative flex-shrink-0",children:oe&&le?n.jsxs(n.Fragment,{children:[n.jsxs(Vt,{className:"h-12 w-12 border-2 border-background",children:[n.jsx(Yt,{src:le,alt:ue}),n.jsx(Wt,{className:"bg-surface",children:ue.charAt(0).toUpperCase()})]}),n.jsx("div",{className:`absolute -bottom-1 -right-1 h-6 w-6 rounded-full flex items-center justify-center ${B.type==="user_like"||B.type==="event_like"?"bg-red-500":B.type==="user_message"?"bg-blue-500":"bg-primary"}`,children:n.jsx(V,{className:"h-3.5 w-3.5 text-white"})})]}):n.jsx("div",{className:`h-12 w-12 rounded-full flex items-center justify-center ${B.read?"bg-surface":"bg-primary/20"}`,children:n.jsx(V,{className:"h-6 w-6 text-primary"})})}),n.jsx("div",{className:"flex-1 min-w-0",children:ee&&X?n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-sm",children:[n.jsx("span",{className:"font-semibold text-foreground",children:ue})," ","solicitou seguir você."]}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:[M(X.interest)," • ",R(X.relationship_status)]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:b(B.created_at)})]}),!B.read&&n.jsx("div",{className:"h-2 w-2 rounded-full bg-blue-500 ml-2 flex-shrink-0"})]}),n.jsxs("div",{className:"flex gap-3 mt-3",children:[n.jsx(Y,{size:"sm",className:"flex-1 h-8",onClick:te=>{te.stopPropagation(),O(B.id,X.friendshipUserId)},disabled:f,children:"Aceitar"}),n.jsx(Y,{size:"sm",variant:"outline",className:"flex-1 h-8",onClick:te=>{te.stopPropagation(),L(B.id,X.friendshipUserId)},disabled:f,children:"Recusar"})]})]}):n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm",children:oe?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"font-semibold text-foreground",children:ue})," ",B.message||B.title]}):n.jsx("span",{className:"text-foreground",children:B.title||B.message})}),B.message&&!oe&&n.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:B.message}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:b(B.created_at)})]}),!B.read&&n.jsx("div",{className:"h-2 w-2 rounded-full bg-blue-500 ml-2 flex-shrink-0"})]})})]})},B.id)})})]});return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-20 bg-background border-b border-border",children:n.jsx("div",{className:"px-4 py-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>t(-1),className:"flex-shrink-0",children:n.jsx(mt,{className:"h-6 w-6"})}),n.jsx("h1",{className:"text-xl font-bold text-foreground",children:"Notificações"})]})})}),n.jsx("div",{className:"pb-20",children:s?n.jsxs("div",{className:"p-12 text-center text-muted-foreground",children:[n.jsx(Ga,{className:"h-12 w-12 mx-auto mb-4 opacity-50 animate-pulse"}),n.jsx("p",{className:"text-lg",children:"Carregando..."})]}):r.length===0?n.jsxs("div",{className:"p-12 text-center text-muted-foreground",children:[n.jsx(Ga,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{className:"text-lg font-medium mb-2",children:"Nenhuma notificação"}),n.jsx("p",{className:"text-sm",children:"Você está em dia!"})]}):n.jsxs(n.Fragment,{children:[P(j,"Hoje"),P(N,"Ontem"),P(C,"Últimos 7 dias")]})})]})}var lp={},XA={exports:{}},jV="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",CV=jV,EV=CV;function KA(){}function YA(){}YA.resetWarningCache=KA;var SV=function(){function e(s,a,o,d,u,f){if(f!==EV){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:YA,resetWarningCache:KA};return r.PropTypes=r,r};XA.exports=SV();var QA=XA.exports,ZA={L:1,M:0,Q:3,H:2},JA={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},AV=JA;function ek(e){this.mode=AV.MODE_8BIT_BYTE,this.data=e}ek.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}};var kV=ek,Rh=ZA;function Na(e,t){this.totalCount=e,this.dataCount=t}Na.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];Na.getRSBlocks=function(e,t){var r=Na.getRsBlockTable(e,t);if(r==null)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var s=r.length/3,a=new Array,o=0;o<s;o++)for(var d=r[o*3+0],u=r[o*3+1],f=r[o*3+2],p=0;p<d;p++)a.push(new Na(u,f));return a};Na.getRsBlockTable=function(e,t){switch(t){case Rh.L:return Na.RS_BLOCK_TABLE[(e-1)*4+0];case Rh.M:return Na.RS_BLOCK_TABLE[(e-1)*4+1];case Rh.Q:return Na.RS_BLOCK_TABLE[(e-1)*4+2];case Rh.H:return Na.RS_BLOCK_TABLE[(e-1)*4+3];default:return}};var TV=Na;function tk(){this.buffer=new Array,this.length=0}tk.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var r=0;r<t;r++)this.putBit((e>>>t-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var IV=tk,ea={glog:function(e){if(e<1)throw new Error("glog("+e+")");return ea.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return ea.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var on=0;on<8;on++)ea.EXP_TABLE[on]=1<<on;for(var on=8;on<256;on++)ea.EXP_TABLE[on]=ea.EXP_TABLE[on-4]^ea.EXP_TABLE[on-5]^ea.EXP_TABLE[on-6]^ea.EXP_TABLE[on-8];for(var on=0;on<255;on++)ea.LOG_TABLE[ea.EXP_TABLE[on]]=on;var rk=ea,yo=rk;function nf(e,t){if(e.length==null)throw new Error(e.length+"/"+t);for(var r=0;r<e.length&&e[r]==0;)r++;this.num=new Array(e.length-r+t);for(var s=0;s<e.length-r;s++)this.num[s]=e[s+r]}nf.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),r=0;r<this.getLength();r++)for(var s=0;s<e.getLength();s++)t[r+s]^=yo.gexp(yo.glog(this.get(r))+yo.glog(e.get(s)));return new nf(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=yo.glog(this.get(0))-yo.glog(e.get(0)),r=new Array(this.getLength()),s=0;s<this.getLength();s++)r[s]=this.get(s);for(var s=0;s<e.getLength();s++)r[s]^=yo.gexp(yo.glog(e.get(s))+t);return new nf(r,0).mod(e)}};var nk=nf,bs=JA,y2=nk,RV=rk,pi={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},nn={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;nn.getBCHDigit(t)-nn.getBCHDigit(nn.G15)>=0;)t^=nn.G15<<nn.getBCHDigit(t)-nn.getBCHDigit(nn.G15);return(e<<10|t)^nn.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;nn.getBCHDigit(t)-nn.getBCHDigit(nn.G18)>=0;)t^=nn.G18<<nn.getBCHDigit(t)-nn.getBCHDigit(nn.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;e!=0;)t++,e>>>=1;return t},getPatternPosition:function(e){return nn.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,r){switch(e){case pi.PATTERN000:return(t+r)%2==0;case pi.PATTERN001:return t%2==0;case pi.PATTERN010:return r%3==0;case pi.PATTERN011:return(t+r)%3==0;case pi.PATTERN100:return(Math.floor(t/2)+Math.floor(r/3))%2==0;case pi.PATTERN101:return t*r%2+t*r%3==0;case pi.PATTERN110:return(t*r%2+t*r%3)%2==0;case pi.PATTERN111:return(t*r%3+(t+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new y2([1],0),r=0;r<e;r++)t=t.multiply(new y2([1,RV.gexp(r)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case bs.MODE_NUMBER:return 10;case bs.MODE_ALPHA_NUM:return 9;case bs.MODE_8BIT_BYTE:return 8;case bs.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case bs.MODE_NUMBER:return 12;case bs.MODE_ALPHA_NUM:return 11;case bs.MODE_8BIT_BYTE:return 16;case bs.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else if(t<41)switch(e){case bs.MODE_NUMBER:return 14;case bs.MODE_ALPHA_NUM:return 13;case bs.MODE_8BIT_BYTE:return 16;case bs.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}else throw new Error("type:"+t)},getLostPoint:function(e){for(var t=e.getModuleCount(),r=0,s=0;s<t;s++)for(var a=0;a<t;a++){for(var o=0,d=e.isDark(s,a),u=-1;u<=1;u++)if(!(s+u<0||t<=s+u))for(var f=-1;f<=1;f++)a+f<0||t<=a+f||u==0&&f==0||d==e.isDark(s+u,a+f)&&o++;o>5&&(r+=3+o-5)}for(var s=0;s<t-1;s++)for(var a=0;a<t-1;a++){var p=0;e.isDark(s,a)&&p++,e.isDark(s+1,a)&&p++,e.isDark(s,a+1)&&p++,e.isDark(s+1,a+1)&&p++,(p==0||p==4)&&(r+=3)}for(var s=0;s<t;s++)for(var a=0;a<t-6;a++)e.isDark(s,a)&&!e.isDark(s,a+1)&&e.isDark(s,a+2)&&e.isDark(s,a+3)&&e.isDark(s,a+4)&&!e.isDark(s,a+5)&&e.isDark(s,a+6)&&(r+=40);for(var a=0;a<t;a++)for(var s=0;s<t-6;s++)e.isDark(s,a)&&!e.isDark(s+1,a)&&e.isDark(s+2,a)&&e.isDark(s+3,a)&&e.isDark(s+4,a)&&!e.isDark(s+5,a)&&e.isDark(s+6,a)&&(r+=40);for(var x=0,a=0;a<t;a++)for(var s=0;s<t;s++)e.isDark(s,a)&&x++;var w=Math.abs(100*x/t/t-50)/5;return r+=w*10,r}},PV=nn,OV=kV,sk=TV,ak=IV,uo=PV,DV=nk;function Ca(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var ps=Ca.prototype;ps.addData=function(e){var t=new OV(e);this.dataList.push(t),this.dataCache=null};ps.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]};ps.getModuleCount=function(){return this.moduleCount};ps.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=sk.getRSBlocks(e,this.errorCorrectLevel),r=new ak,s=0,a=0;a<t.length;a++)s+=t[a].dataCount;for(var a=0;a<this.dataList.length;a++){var o=this.dataList[a];r.put(o.mode,4),r.put(o.getLength(),uo.getLengthInBits(o.mode,e)),o.write(r)}if(r.getLengthInBits()<=s*8)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())};ps.makeImpl=function(e,t){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var s=0;s<this.moduleCount;s++)this.modules[r][s]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache==null&&(this.dataCache=Ca.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)};ps.setupPositionProbePattern=function(e,t){for(var r=-1;r<=7;r++)if(!(e+r<=-1||this.moduleCount<=e+r))for(var s=-1;s<=7;s++)t+s<=-1||this.moduleCount<=t+s||(0<=r&&r<=6&&(s==0||s==6)||0<=s&&s<=6&&(r==0||r==6)||2<=r&&r<=4&&2<=s&&s<=4?this.modules[e+r][t+s]=!0:this.modules[e+r][t+s]=!1)};ps.getBestMaskPattern=function(){for(var e=0,t=0,r=0;r<8;r++){this.makeImpl(!0,r);var s=uo.getLostPoint(this);(r==0||e>s)&&(e=s,t=r)}return t};ps.createMovieClip=function(e,t,r){var s=e.createEmptyMovieClip(t,r),a=1;this.make();for(var o=0;o<this.modules.length;o++)for(var d=o*a,u=0;u<this.modules[o].length;u++){var f=u*a,p=this.modules[o][u];p&&(s.beginFill(0,100),s.moveTo(f,d),s.lineTo(f+a,d),s.lineTo(f+a,d+a),s.lineTo(f,d+a),s.endFill())}return s};ps.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)this.modules[e][6]==null&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)};ps.setupPositionAdjustPattern=function(){for(var e=uo.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var r=0;r<e.length;r++){var s=e[t],a=e[r];if(this.modules[s][a]==null)for(var o=-2;o<=2;o++)for(var d=-2;d<=2;d++)o==-2||o==2||d==-2||d==2||o==0&&d==0?this.modules[s+o][a+d]=!0:this.modules[s+o][a+d]=!1}};ps.setupTypeNumber=function(e){for(var t=uo.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var s=!e&&(t>>r&1)==1;this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=s}for(var r=0;r<18;r++){var s=!e&&(t>>r&1)==1;this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=s}};ps.setupTypeInfo=function(e,t){for(var r=this.errorCorrectLevel<<3|t,s=uo.getBCHTypeInfo(r),a=0;a<15;a++){var o=!e&&(s>>a&1)==1;a<6?this.modules[a][8]=o:a<8?this.modules[a+1][8]=o:this.modules[this.moduleCount-15+a][8]=o}for(var a=0;a<15;a++){var o=!e&&(s>>a&1)==1;a<8?this.modules[8][this.moduleCount-a-1]=o:a<9?this.modules[8][15-a-1+1]=o:this.modules[8][15-a-1]=o}this.modules[this.moduleCount-8][8]=!e};ps.mapData=function(e,t){for(var r=-1,s=this.moduleCount-1,a=7,o=0,d=this.moduleCount-1;d>0;d-=2)for(d==6&&d--;;){for(var u=0;u<2;u++)if(this.modules[s][d-u]==null){var f=!1;o<e.length&&(f=(e[o]>>>a&1)==1);var p=uo.getMask(t,s,d-u);p&&(f=!f),this.modules[s][d-u]=f,a--,a==-1&&(o++,a=7)}if(s+=r,s<0||this.moduleCount<=s){s-=r,r=-r;break}}};Ca.PAD0=236;Ca.PAD1=17;Ca.createData=function(e,t,r){for(var s=sk.getRSBlocks(e,t),a=new ak,o=0;o<r.length;o++){var d=r[o];a.put(d.mode,4),a.put(d.getLength(),uo.getLengthInBits(d.mode,e)),d.write(a)}for(var u=0,o=0;o<s.length;o++)u+=s[o].dataCount;if(a.getLengthInBits()>u*8)throw new Error("code length overflow. ("+a.getLengthInBits()+">"+u*8+")");for(a.getLengthInBits()+4<=u*8&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(!1);for(;!(a.getLengthInBits()>=u*8||(a.put(Ca.PAD0,8),a.getLengthInBits()>=u*8));)a.put(Ca.PAD1,8);return Ca.createBytes(a,s)};Ca.createBytes=function(e,t){for(var r=0,s=0,a=0,o=new Array(t.length),d=new Array(t.length),u=0;u<t.length;u++){var f=t[u].dataCount,p=t[u].totalCount-f;s=Math.max(s,f),a=Math.max(a,p),o[u]=new Array(f);for(var x=0;x<o[u].length;x++)o[u][x]=255&e.buffer[x+r];r+=f;var w=uo.getErrorCorrectPolynomial(p),_=new DV(o[u],w.getLength()-1),j=_.mod(w);d[u]=new Array(w.getLength()-1);for(var x=0;x<d[u].length;x++){var N=x+j.getLength()-d[u].length;d[u][x]=N>=0?j.get(N):0}}for(var C=0,x=0;x<t.length;x++)C+=t[x].totalCount;for(var A=new Array(C),S=0,x=0;x<s;x++)for(var u=0;u<t.length;u++)x<o[u].length&&(A[S++]=o[u][x]);for(var x=0;x<a;x++)for(var u=0;u<t.length;u++)x<d[u].length&&(A[S++]=d[u][x]);return A};var MV=Ca,Pv={};Object.defineProperty(Pv,"__esModule",{value:!0});var LV=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},FV=QA,_s=ok(FV),ik=v,Ph=ok(ik);function ok(e){return e&&e.__esModule?e:{default:e}}function BV(e,t){var r={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r}var zV={bgColor:_s.default.oneOfType([_s.default.object,_s.default.string]).isRequired,bgD:_s.default.string.isRequired,fgColor:_s.default.oneOfType([_s.default.object,_s.default.string]).isRequired,fgD:_s.default.string.isRequired,size:_s.default.number.isRequired,title:_s.default.string,viewBoxSize:_s.default.number.isRequired,xmlns:_s.default.string},Ov=(0,ik.forwardRef)(function(e,t){var r=e.bgColor,s=e.bgD,a=e.fgD,o=e.fgColor,d=e.size,u=e.title,f=e.viewBoxSize,p=e.xmlns,x=p===void 0?"http://www.w3.org/2000/svg":p,w=BV(e,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return Ph.default.createElement("svg",LV({},w,{height:d,ref:t,viewBox:"0 0 "+f+" "+f,width:d,xmlns:x}),u?Ph.default.createElement("title",null,u):null,Ph.default.createElement("path",{d:s,fill:r}),Ph.default.createElement("path",{d:a,fill:o}))});Ov.displayName="QRCodeSvg";Ov.propTypes=zV;Pv.default=Ov;Object.defineProperty(lp,"__esModule",{value:!0});lp.QRCode=void 0;var UV=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},$V=QA,La=Hu($V),qV=ZA,VV=Hu(qV),WV=MV,HV=Hu(WV),lk=v,GV=Hu(lk),XV=Pv,KV=Hu(XV);function Hu(e){return e&&e.__esModule?e:{default:e}}function YV(e,t){var r={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r}var QV={bgColor:La.default.oneOfType([La.default.object,La.default.string]),fgColor:La.default.oneOfType([La.default.object,La.default.string]),level:La.default.string,size:La.default.number,value:La.default.string.isRequired},cp=(0,lk.forwardRef)(function(e,t){var r=e.bgColor,s=r===void 0?"#FFFFFF":r,a=e.fgColor,o=a===void 0?"#000000":a,d=e.level,u=d===void 0?"L":d,f=e.size,p=f===void 0?256:f,x=e.value,w=YV(e,["bgColor","fgColor","level","size","value"]),_=new HV.default(-1,VV.default[u]);_.addData(x),_.make();var j=_.modules;return GV.default.createElement(KV.default,UV({},w,{bgColor:s,bgD:j.map(function(N,C){return N.map(function(A,S){return A?"":"M "+S+" "+C+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:o,fgD:j.map(function(N,C){return N.map(function(A,S){return A?"M "+S+" "+C+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:t,size:p,viewBoxSize:j.length}))});lp.QRCode=cp;cp.displayName="QRCode";cp.propTypes=QV;var ck=lp.default=cp;function ZV(){const[e]=$1(),t=_t(),[r,s]=v.useState(!0),[a,o]=v.useState(null),d=e.get("session_id");if(v.useEffect(()=>{(async()=>{var p,x,w,_,j;if(!d){W.error("ID da sessão não encontrado"),t("/");return}try{let N=5,C=null;for(;N>0&&!C;){const{data:b,error:T}=await U.from("ticket_sales").select(`
              id,
              quantity,
              total_amount,
              buyer_name,
              payment_status,
              event_id,
              ticket_type_id
            `).eq("stripe_checkout_session_id",d).maybeSingle();if(b){C=b;break}if(T&&T.code!=="PGRST116")throw T;if(N>1){const O=(6-N)*400+600;await new Promise(L=>setTimeout(L,O))}N--}if(!C)throw new Error("Ingresso não encontrado");const[A,S]=await Promise.all([U.from("events").select("title, event_date, location, image_url").eq("id",C.event_id).single(),U.from("ticket_types").select("name, is_active").eq("id",C.ticket_type_id).maybeSingle()]),k={id:C.id,quantity:C.quantity,total_amount:C.total_amount,buyer_name:C.buyer_name,event:{title:((p=A.data)==null?void 0:p.title)??"Ingresso",event_date:((x=A.data)==null?void 0:x.event_date)??new Date().toISOString(),location:((w=A.data)==null?void 0:w.location)??"",image_url:((_=A.data)==null?void 0:_.image_url)??null},ticket_type:{name:((j=S.data)==null?void 0:j.name)??"Ingresso"}};if(o(k),C.payment_status==="pending")try{const{data:b,error:T}=await U.functions.invoke("verify-ticket-payment",{body:{sessionId:d}});if(T)throw T;b==null||b.payment_status}catch(b){console.warn("Verify payment failed:",b)}}catch(N){console.error("Error fetching ticket details:",N),W.error("Erro ao carregar detalhes do ingresso"),setTimeout(()=>t("/"),2e3)}finally{s(!1)}})()},[d,t]),r)return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:n.jsx(Ia,{className:"h-8 w-8 animate-spin text-primary"})});if(!a)return null;const u=JSON.stringify({ticketId:a.id,eventTitle:a.event.title,buyerName:a.buyer_name,quantity:a.quantity});return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background to-secondary/20 py-8 px-4",children:n.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("div",{className:"flex justify-center",children:n.jsx(ss,{className:"h-16 w-16 text-green-500"})}),n.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Compra Finalizada com Sucesso!"}),n.jsx("p",{className:"text-muted-foreground",children:"Seu ingresso foi confirmado. Guarde o QR Code abaixo para apresentar no evento."})]}),n.jsxs(je,{className:"overflow-hidden",children:[n.jsx(qe,{className:"bg-primary/5",children:n.jsxs(We,{className:"flex items-center gap-2",children:[n.jsx(Sc,{className:"h-5 w-5"}),"Detalhes do Ingresso"]})}),n.jsxs(Ee,{className:"space-y-6 pt-6",children:[n.jsx("div",{className:"flex justify-center p-6 bg-white rounded-lg",children:n.jsx(ck,{value:u,size:200})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg text-foreground mb-2",children:a.event.title}),n.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(kt,{className:"h-4 w-4"}),n.jsx("span",{children:cn(new Date(a.event.event_date),"dd 'de' MMMM 'de' yyyy 'às' HH:mm",{locale:Pr})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Tt,{className:"h-4 w-4"}),n.jsx("span",{children:a.event.location})]})]})]}),n.jsxs("div",{className:"border-t pt-4",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Tipo de Ingresso:"}),n.jsx("span",{className:"font-medium",children:a.ticket_type.name})]}),n.jsxs("div",{className:"flex justify-between text-sm mt-2",children:[n.jsx("span",{className:"text-muted-foreground",children:"Quantidade:"}),n.jsxs("span",{className:"font-medium",children:[a.quantity,"x"]})]}),n.jsxs("div",{className:"flex justify-between text-sm mt-2",children:[n.jsx("span",{className:"text-muted-foreground",children:"Comprador:"}),n.jsx("span",{className:"font-medium",children:a.buyer_name})]}),n.jsxs("div",{className:"flex justify-between text-lg font-bold mt-4 pt-4 border-t",children:[n.jsx("span",{children:"Total Pago:"}),n.jsxs("span",{className:"text-primary",children:["R$ ",a.total_amount.toFixed(2)]})]})]})]}),n.jsxs("div",{className:"space-y-2 pt-4",children:[n.jsx(Y,{onClick:()=>window.print(),variant:"outline",className:"w-full",children:"Imprimir Ingresso"}),n.jsx(Y,{onClick:()=>t("/"),className:"w-full",children:"Voltar para Home"})]})]})]}),n.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:[n.jsx("p",{children:"Este QR Code é único e intransferível."}),n.jsx("p",{children:"Guarde-o com segurança para apresentar no dia do evento."})]})]})})}const dp=v.forwardRef(({className:e,...t},r)=>n.jsx("div",{className:"relative w-full overflow-auto",children:n.jsx("table",{ref:r,className:Be("w-full caption-bottom text-sm",e),...t})}));dp.displayName="Table";const up=v.forwardRef(({className:e,...t},r)=>n.jsx("thead",{ref:r,className:Be("[&_tr]:border-b",e),...t}));up.displayName="TableHeader";const hp=v.forwardRef(({className:e,...t},r)=>n.jsx("tbody",{ref:r,className:Be("[&_tr:last-child]:border-0",e),...t}));hp.displayName="TableBody";const JV=v.forwardRef(({className:e,...t},r)=>n.jsx("tfoot",{ref:r,className:Be("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));JV.displayName="TableFooter";const il=v.forwardRef(({className:e,...t},r)=>n.jsx("tr",{ref:r,className:Be("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",e),...t}));il.displayName="TableRow";const ur=v.forwardRef(({className:e,...t},r)=>n.jsx("th",{ref:r,className:Be("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));ur.displayName="TableHead";const hr=v.forwardRef(({className:e,...t},r)=>n.jsx("td",{ref:r,className:Be("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));hr.displayName="TableCell";const eW=v.forwardRef(({className:e,...t},r)=>n.jsx("caption",{ref:r,className:Be("mt-4 text-sm text-muted-foreground",e),...t}));eW.displayName="TableCaption";function tW(){const{eventId:e}=hl(),t=_t(),[r,s]=v.useState(!0),[a,o]=v.useState([]),[d,u]=v.useState(null),[f,p]=v.useState({totalSales:0,totalRevenue:0,totalTickets:0,grossRevenue:0,netRevenue:0});v.useEffect(()=>{(async()=>{if(e)try{const{data:j,error:N}=await U.from("events").select("title, event_date").eq("id",e).single();if(N)throw N;u(j);const{data:C,error:A}=await U.from("ticket_sales").select(`
            id,
            buyer_name,
            buyer_email,
            buyer_phone,
            quantity,
            unit_price,
            total_amount,
            payment_status,
            created_at,
            paid_at,
            ticket_type:ticket_types(name)
          `).eq("event_id",e).order("created_at",{ascending:!1});if(A)throw A;o(C||[]);const S=(C==null?void 0:C.filter(L=>L.payment_status==="completed"))||[],k=S.reduce((L,R)=>L+Number(R.total_amount),0),b=k*.05,T=k*.0399+S.length*.39,O=k-b-T;p({totalSales:S.length,totalRevenue:k,totalTickets:S.reduce((L,R)=>L+R.quantity,0),grossRevenue:k,netRevenue:O})}catch(j){console.error("Error fetching sales data:",j),W.error("Erro ao carregar dados de vendas")}finally{s(!1)}})()},[e]);const x=_=>{switch(_){case"completed":return n.jsx(ct,{className:"bg-green-600",children:"Pago"});case"pending":return n.jsx(ct,{variant:"secondary",children:"Pendente"});case"cancelled":return n.jsx(ct,{variant:"destructive",children:"Cancelado"});default:return n.jsx(ct,{variant:"outline",children:_})}},w=()=>{const _=["Data","Comprador","Email","Telefone","Tipo","Quantidade","Total","Status"],j=a.map(S=>[cn(new Date(S.created_at),"dd/MM/yyyy HH:mm"),S.buyer_name,S.buyer_email,S.buyer_phone||"-",S.ticket_type.name,S.quantity,`R$ ${S.total_amount.toFixed(2)}`,S.payment_status==="completed"?"Pago":S.payment_status]),N=[_,...j].map(S=>S.join(",")).join(`
`),C=new Blob([N],{type:"text/csv;charset=utf-8;"}),A=document.createElement("a");A.href=URL.createObjectURL(C),A.download=`vendas_${e}_${Date.now()}.csv`,A.click(),W.success("Relatório exportado com sucesso!")};return r?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:n.jsx(Ia,{className:"h-8 w-8 animate-spin text-primary"})}):n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b border-border",children:n.jsxs("div",{className:"flex items-center justify-between p-4 max-w-6xl mx-auto",children:[n.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>t(-1),children:n.jsx(mt,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1 ml-4",children:[n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Vendas de Ingressos"}),d&&n.jsx("p",{className:"text-sm text-muted-foreground",children:d.title})]}),n.jsxs(Y,{variant:"outline",size:"sm",onClick:w,children:[n.jsx(Xo,{className:"h-4 w-4 mr-2"}),"Exportar"]})]})}),n.jsxs("div",{className:"p-4 max-w-6xl mx-auto pb-20",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[n.jsxs(je,{children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(We,{className:"text-sm font-medium",children:"Total de Vendas"}),n.jsx(tr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ee,{children:[n.jsx("div",{className:"text-2xl font-bold",children:f.totalSales}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"vendas confirmadas"})]})]}),n.jsxs(je,{children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(We,{className:"text-sm font-medium",children:"Ingressos Vendidos"}),n.jsx(Sc,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ee,{children:[n.jsx("div",{className:"text-2xl font-bold",children:f.totalTickets}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"ingressos no total"})]})]}),n.jsxs(je,{children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(We,{className:"text-sm font-medium",children:"Receita Bruta"}),n.jsx(Sn,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ee,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:["R$ ",f.grossRevenue.toFixed(2)]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"valor total de vendas"})]})]}),n.jsxs(je,{className:"border-primary/50",children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(We,{className:"text-sm font-medium",children:"Valor a Receber"}),n.jsx(Sn,{className:"h-4 w-4 text-primary"})]}),n.jsxs(Ee,{children:[n.jsxs("div",{className:"text-2xl font-bold text-primary",children:["R$ ",f.netRevenue.toFixed(2)]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"após taxas (5% + Stripe)"})]})]}),n.jsxs(je,{className:"bg-muted/50",children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(We,{className:"text-sm font-medium",children:"Taxas Totais"}),n.jsx(Sn,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ee,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:["R$ ",(f.grossRevenue-f.netRevenue).toFixed(2)]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"plataforma + processamento"})]})]})]}),n.jsxs(je,{children:[n.jsx(qe,{children:n.jsx(We,{children:"Lista de Vendas"})}),n.jsx(Ee,{children:a.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(Sc,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"Nenhuma venda registrada ainda"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(dp,{children:[n.jsx(up,{children:n.jsxs(il,{children:[n.jsx(ur,{children:"Data"}),n.jsx(ur,{children:"Comprador"}),n.jsx(ur,{children:"Contato"}),n.jsx(ur,{children:"Tipo"}),n.jsx(ur,{className:"text-center",children:"Qtd"}),n.jsx(ur,{className:"text-right",children:"Valor"}),n.jsx(ur,{className:"text-center",children:"Status"})]})}),n.jsx(hp,{children:a.map(_=>n.jsxs(il,{children:[n.jsx(hr,{className:"whitespace-nowrap",children:cn(new Date(_.created_at),"dd/MM/yy HH:mm",{locale:Pr})}),n.jsx(hr,{children:n.jsx("div",{className:"font-medium",children:_.buyer_name})}),n.jsx(hr,{children:n.jsxs("div",{className:"text-sm",children:[n.jsx("div",{className:"text-muted-foreground",children:_.buyer_email}),_.buyer_phone&&n.jsx("div",{className:"text-muted-foreground",children:_.buyer_phone})]})}),n.jsx(hr,{children:_.ticket_type.name}),n.jsxs(hr,{className:"text-center",children:[_.quantity,"x"]}),n.jsxs(hr,{className:"text-right font-medium",children:["R$ ",_.total_amount.toFixed(2)]}),n.jsx(hr,{className:"text-center",children:x(_.payment_status)})]},_.id))})]})})})]})]})]})}function rW(){const e=_t(),[t,r]=v.useState(!0),[s,a]=v.useState([]);v.useEffect(()=>{o()},[]);const o=async()=>{try{const{data:d,error:u}=await U.from("events").select(`
          id,
          title,
          end_date,
          organizer_id,
          organizers!inner (
            id,
            page_title,
            avatar_url
          ),
          event_ticket_settings!inner (
            accepts_platform_payment
          )
        `).eq("event_ticket_settings.accepts_platform_payment",!0);if(u)throw u;const{data:f,error:p}=await U.from("ticket_sales").select("*").eq("payment_status","completed");if(p)throw p;const x=new Map;for(const _ of f||[])x.has(_.event_id)||x.set(_.event_id,[]),x.get(_.event_id).push(_);const w=[];for(const _ of d||[]){const j=_,N=j.organizers,C=x.get(j.id)||[],A=C.reduce((O,L)=>O+Number(L.total_amount),0),{data:S}=await U.from("organizer_payouts").select("*").eq("event_id",j.id).maybeSingle(),k=(S==null?void 0:S.platform_fee)||(A>0?A*.05:0),b=(S==null?void 0:S.processing_fee)||(A>0?A*.0399+.39:0),T=A-k-b;w.push({event_id:j.id,event_title:j.title,event_end_date:j.end_date,organizer_id:N.id,organizer_name:N.page_title,organizer_avatar:N.avatar_url,total_sales:C.length,gross_amount:A,platform_fee:k,processing_fee:b,net_amount:T,has_payout:!!S,payout_status:(S==null?void 0:S.payout_status)||null,payout_date:(S==null?void 0:S.payout_date)||null})}a(w)}catch(d){console.error("Error fetching events:",d),W.error("Erro ao carregar eventos")}finally{r(!1)}};return t?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:n.jsx(Ia,{className:"h-8 w-8 animate-spin text-primary"})}):n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b border-border",children:n.jsx("div",{className:"flex items-center justify-between p-4 max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>e("/admin"),children:n.jsx(mt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Repasses de Organizadores"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Gerencie pagamentos dos organizadores"})]})]})})}),n.jsxs("div",{className:"p-4 max-w-7xl mx-auto pb-20",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[n.jsxs(je,{children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(We,{className:"text-sm font-medium",children:"Total Eventos"}),n.jsx(kt,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ee,{children:[n.jsx("div",{className:"text-2xl font-bold",children:s.length}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"com vendas"})]})]}),n.jsxs(je,{children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(We,{className:"text-sm font-medium",children:"Total Bruto"}),n.jsx(Sn,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ee,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:["R$ ",s.reduce((d,u)=>d+u.gross_amount,0).toFixed(2)]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"em vendas"})]})]}),n.jsxs(je,{children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(We,{className:"text-sm font-medium",children:"Total Líquido"}),n.jsx(Sn,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ee,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:["R$ ",s.reduce((d,u)=>d+u.net_amount,0).toFixed(2)]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"a repassar"})]})]})]}),n.jsxs(je,{children:[n.jsx(qe,{children:n.jsx(We,{children:"Eventos com Vendas"})}),n.jsx(Ee,{children:s.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(kt,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"Nenhum evento com vendas"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(dp,{children:[n.jsx(up,{children:n.jsxs(il,{children:[n.jsx(ur,{children:"Evento"}),n.jsx(ur,{children:"Organizador"}),n.jsx(ur,{className:"text-center",children:"Vendas"}),n.jsx(ur,{className:"text-right",children:"Bruto"}),n.jsx(ur,{className:"text-right",children:"Líquido"}),n.jsx(ur,{className:"text-center",children:"Status"}),n.jsx(ur,{className:"text-center",children:"Ações"})]})}),n.jsx(hp,{children:s.map(d=>n.jsxs(il,{children:[n.jsxs(hr,{children:[n.jsx("div",{className:"font-medium",children:d.event_title}),d.event_end_date&&n.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(d.event_end_date).toLocaleDateString("pt-BR")})]}),n.jsx(hr,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[d.organizer_avatar?n.jsx("img",{src:d.organizer_avatar,alt:d.organizer_name,className:"w-8 h-8 rounded-full object-cover"}):n.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx(b1,{className:"h-4 w-4 text-primary"})}),n.jsx("span",{className:"text-sm",children:d.organizer_name})]})}),n.jsx(hr,{className:"text-center",children:n.jsx(ct,{variant:"secondary",children:d.total_sales})}),n.jsxs(hr,{className:"text-right",children:["R$ ",d.gross_amount.toFixed(2)]}),n.jsxs(hr,{className:"text-right font-medium text-primary",children:["R$ ",d.net_amount.toFixed(2)]}),n.jsx(hr,{className:"text-center",children:d.has_payout?n.jsx(ct,{variant:d.payout_status==="completed"?"default":"secondary",children:d.payout_status==="completed"?"Pago":"Pendente"}):n.jsx(ct,{variant:"outline",children:"Sem repasse"})}),n.jsx(hr,{className:"text-center",children:n.jsx(Y,{size:"sm",onClick:()=>e(`/admin/organizer-payments/${d.organizer_id}?event=${d.event_id}`),children:"Ver Detalhes"})})]},d.event_id))})]})})})]})]})]})}function nW(){const{organizerId:e}=hl(),t=_t(),[r]=$1(),s=r.get("event"),[a,o]=v.useState(!0),[d,u]=v.useState(null),[f,p]=v.useState([]),[x,w]=v.useState({open:!1,payoutId:null,eventId:""}),[_,j]=v.useState("");v.useEffect(()=>{N()},[e]);const N=async()=>{var T,O;if(e)try{const{data:L,error:R}=await U.from("organizers").select("id, page_title, avatar_url, user_id").eq("id",e).single();if(R)throw R;u(L);const{data:M,error:P}=await U.from("events").select(`
          *,
          event_ticket_settings (
            accepts_platform_payment
          )
        `).eq("organizer_id",e);if(P)throw P;const q=[];for(const B of M||[]){const{data:V}=await U.from("ticket_sales").select("*").eq("event_id",B.id).eq("payment_status","completed"),ee=Array.isArray(B.event_ticket_settings)?(T=B.event_ticket_settings[0])==null?void 0:T.accepts_platform_payment:(O=B.event_ticket_settings)==null?void 0:O.accepts_platform_payment,{data:X}=await U.from("organizer_payouts").select("*").eq("event_id",B.id).maybeSingle(),le=V||[],ue=le.reduce((ve,H)=>ve+Number(H.total_amount),0),oe=le.length>0?ue*.05:0,te=le.length>0?ue*.0399+le.length*.39:0,be=ue-oe-te;if(le.length>0||ee){const ve=C(new Date(B.end_date));q.push({event_id:B.id,event_title:B.title,event_end_date:B.end_date,gross_amount:ue,platform_fee:oe,processing_fee:te,net_amount:be,payout_due_date:ve,payout_status:(X==null?void 0:X.payout_status)||"pending",payout_id:(X==null?void 0:X.id)||null,bank_name:B.bank_name,bank_account:B.bank_account,bank_agency:B.bank_agency,bank_account_holder:B.bank_account_holder,bank_document:B.bank_document,bank_account_type:B.bank_account_type,pix_key:B.pix_key})}}const G=s?q.filter(B=>B.event_id===s):q;p(G)}catch(L){console.error("Error fetching organizer details:",L),W.error("Erro ao carregar detalhes")}finally{o(!1)}},C=T=>{const O=new Date(T);let L=0;for(;L<3;)O.setDate(O.getDate()+1),O.getDay()!==0&&O.getDay()!==6&&L++;return O.toISOString()},A=async()=>{if(!(!x.payoutId&&!x.eventId))try{const T=f.find(O=>O.event_id===x.eventId);if(!T)return;if(x.payoutId){const{error:O}=await U.from("organizer_payouts").update({payout_status:"completed",payout_date:new Date().toISOString(),payout_notes:_}).eq("id",x.payoutId);if(O)throw O}else{const{error:O}=await U.from("organizer_payouts").insert({event_id:T.event_id,organizer_id:e,gross_amount:T.gross_amount,platform_fee:T.platform_fee,processing_fee:T.processing_fee,net_amount:T.net_amount,payout_due_date:T.payout_due_date,payout_status:"completed",payout_date:new Date().toISOString(),payout_notes:_});if(O)throw O}W.success("Repasse marcado como pago!"),w({open:!1,payoutId:null,eventId:""}),j(""),N()}catch(T){console.error("Error marking payout as paid:",T),W.error("Erro ao marcar repasse como pago")}},S=T=>{switch(T){case"completed":return n.jsx(ct,{className:"bg-green-600",children:"Pago"});case"pending":return n.jsx(ct,{variant:"secondary",children:"Pendente"});default:return n.jsx(ct,{variant:"outline",children:T})}};if(a)return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:n.jsx(Ia,{className:"h-8 w-8 animate-spin text-primary"})});if(!d)return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:n.jsx("p",{children:"Organizador não encontrado"})});const k=f.filter(T=>T.payout_status==="pending").reduce((T,O)=>T+O.net_amount,0),b=f.filter(T=>T.payout_status==="completed").reduce((T,O)=>T+O.net_amount,0);return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b border-border",children:n.jsx("div",{className:"flex items-center justify-between p-4 max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>t("/admin/organizer-payments"),children:n.jsx(mt,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex items-center gap-3",children:[d.avatar_url?n.jsx("img",{src:d.avatar_url,alt:d.page_title,className:"w-12 h-12 rounded-full object-cover"}):n.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx(b1,{className:"h-6 w-6 text-primary"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:d.page_title}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Detalhes de repasses"})]})]})]})})}),n.jsxs("div",{className:"p-4 max-w-7xl mx-auto pb-20",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[n.jsxs(je,{children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(We,{className:"text-sm font-medium",children:"Total Pendente"}),n.jsx(Sn,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ee,{children:[n.jsxs("div",{className:"text-2xl font-bold text-primary",children:["R$ ",k.toFixed(2)]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[f.filter(T=>T.payout_status==="pending").length," eventos"]})]})]}),n.jsxs(je,{children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(We,{className:"text-sm font-medium",children:"Total Pago"}),n.jsx(Os,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ee,{children:[n.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["R$ ",b.toFixed(2)]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[f.filter(T=>T.payout_status==="completed").length," eventos"]})]})]}),n.jsxs(je,{children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(We,{className:"text-sm font-medium",children:"Total de Eventos"}),n.jsx(kt,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ee,{children:[n.jsx("div",{className:"text-2xl font-bold",children:f.length}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"com vendas"})]})]})]}),n.jsxs(je,{className:"mb-6",children:[n.jsx(qe,{children:n.jsx(We,{children:"Repasses por Evento"})}),n.jsx(Ee,{children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(dp,{children:[n.jsx(up,{children:n.jsxs(il,{children:[n.jsx(ur,{children:"Evento"}),n.jsx(ur,{children:"Fim do Evento"}),n.jsx(ur,{className:"text-right",children:"Receita Bruta"}),n.jsx(ur,{className:"text-right",children:"Taxa Plataforma"}),n.jsx(ur,{className:"text-right",children:"Taxa Stripe"}),n.jsx(ur,{className:"text-right",children:"Valor Líquido"}),n.jsx(ur,{children:"Data Repasse"}),n.jsx(ur,{className:"text-center",children:"Status"}),n.jsx(ur,{className:"text-center",children:"Ações"})]})}),n.jsx(hp,{children:f.map(T=>n.jsxs(il,{children:[n.jsx(hr,{className:"font-medium",children:T.event_title}),n.jsx(hr,{children:cn(new Date(T.event_end_date),"dd/MM/yyyy",{locale:Pr})}),n.jsxs(hr,{className:"text-right",children:["R$ ",T.gross_amount.toFixed(2)]}),n.jsxs(hr,{className:"text-right text-red-600",children:["-R$ ",T.platform_fee.toFixed(2)]}),n.jsxs(hr,{className:"text-right text-red-600",children:["-R$ ",T.processing_fee.toFixed(2)]}),n.jsxs(hr,{className:"text-right font-bold text-primary",children:["R$ ",T.net_amount.toFixed(2)]}),n.jsx(hr,{children:cn(new Date(T.payout_due_date),"dd/MM/yyyy",{locale:Pr})}),n.jsx(hr,{className:"text-center",children:S(T.payout_status)}),n.jsx(hr,{className:"text-center",children:T.payout_status==="pending"&&n.jsx(Y,{size:"sm",onClick:()=>w({open:!0,payoutId:T.payout_id,eventId:T.event_id}),children:"Marcar como Pago"})})]},T.event_id))})]})})})]}),f.length>0&&n.jsxs(je,{children:[n.jsx(qe,{children:n.jsx(We,{children:"Dados para Repasse"})}),n.jsxs(Ee,{className:"space-y-4",children:[f[0].pix_key&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Chave PIX"}),n.jsx("p",{className:"text-sm bg-muted p-3 rounded",children:f[0].pix_key})]}),f[0].bank_name&&n.jsxs(n.Fragment,{children:[n.jsx(Ms,{}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Dados Bancários"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Banco:"}),n.jsx("p",{className:"font-medium",children:f[0].bank_name})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Tipo de Conta:"}),n.jsx("p",{className:"font-medium",children:f[0].bank_account_type})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Agência:"}),n.jsx("p",{className:"font-medium",children:f[0].bank_agency})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Conta:"}),n.jsx("p",{className:"font-medium",children:f[0].bank_account})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Titular:"}),n.jsx("p",{className:"font-medium",children:f[0].bank_account_holder})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"CPF/CNPJ:"}),n.jsx("p",{className:"font-medium",children:f[0].bank_document})]})]})]})]})]})]})]}),n.jsx(zt,{open:x.open,onOpenChange:T=>!T&&w({open:!1,payoutId:null,eventId:""}),children:n.jsxs(Ft,{children:[n.jsxs(gr,{children:[n.jsx(xr,{children:"Confirmar Repasse"}),n.jsx(as,{children:"Tem certeza que deseja marcar este repasse como pago? Esta ação não pode ser desfeita."})]}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Observações (opcional)"}),n.jsx(An,{value:_,onChange:T=>j(T.target.value),placeholder:"Adicione informações sobre o pagamento...",className:"mt-2"})]})}),n.jsxs(Du,{children:[n.jsx(Y,{variant:"outline",onClick:()=>w({open:!1,payoutId:null,eventId:""}),children:"Cancelar"}),n.jsx(Y,{onClick:A,children:"Confirmar Pagamento"})]})]})})]})}function sW(){const e=_t(),{user:t}=wt(),[r,s]=v.useState(!0),[a,o]=v.useState([]),[d,u]=v.useState([]),[f,p]=v.useState(null),x=v.useRef(null),w=A=>A.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();v.useEffect(()=>{t&&_()},[t]);const _=async()=>{if(t)try{s(!0);const{data:A,error:S}=await U.from("event_registrations").select(`
          id,
          event_id,
          attendance_confirmed,
          created_at,
          events!inner (
            id,
            title,
            event_date,
            location,
            image_url,
            organizers!inner (
              page_title
            )
          )
        `).eq("user_id",t.id).order("created_at",{ascending:!1});if(S)throw S;const{data:k,error:b}=await U.from("ticket_sales").select(`
          id,
          event_id,
          quantity,
          total_amount,
          payment_status,
          created_at,
          buyer_name,
          buyer_email,
          ticket_type_id,
          ticket_types!inner (
            name
          ),
          events!inner (
            id,
            title,
            event_date,
            location,
            image_url,
            organizers!inner (
              page_title
            )
          )
        `).eq("user_id",t.id).eq("payment_status","completed").order("created_at",{ascending:!1});if(b)throw b;o((A||[]).map(T=>({...T,event:{...T.events,organizer:T.events.organizers}}))),u((k||[]).map(T=>({...T,event:{...T.events,organizer:T.events.organizers},ticket_type:T.ticket_types})))}catch(A){console.error("Error fetching user events:",A),W.error("Erro ao carregar eventos")}finally{s(!1)}},j=a.filter(A=>A.attendance_confirmed),N=a.filter(A=>!A.attendance_confirmed),C=({event:A,type:S,registration:k,purchase:b})=>n.jsx(je,{className:S==="purchase"?"":"cursor-pointer hover:shadow-lg transition-shadow",onClick:S==="purchase"?void 0:()=>e(`/events/${A.id}`),children:n.jsxs("div",{className:"flex gap-4 p-4",children:[A.image_url&&n.jsx("img",{src:A.image_url,alt:A.title,className:"w-24 h-24 rounded-lg object-cover"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-lg mb-1",children:A.title}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:A.organizer.page_title}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[n.jsx(kt,{className:"h-4 w-4"}),n.jsx("span",{children:cn(new Date(A.event_date),"PPP 'às' HH:mm",{locale:Pr})})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(Tt,{className:"h-4 w-4"}),n.jsx("span",{className:"line-clamp-1",children:A.location})]}),S==="purchase"&&b&&n.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(ct,{variant:"secondary",children:b.ticket_type.name}),n.jsxs("span",{className:"ml-2 text-sm text-muted-foreground",children:[b.quantity,"x - R$ ",b.total_amount.toFixed(2)]})]}),n.jsxs(Y,{size:"sm",onClick:()=>p(b),children:[n.jsx(_8,{className:"h-4 w-4 mr-2"}),"Ver Ingresso"]})]}),S==="confirmed"&&n.jsxs(ct,{className:"mt-2 bg-green-600",children:[n.jsx(ss,{className:"h-3 w-3 mr-1"}),"Presença Confirmada"]})]})]})});return r?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:n.jsx(Ia,{className:"h-8 w-8 animate-spin text-primary"})}):n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b border-border",children:n.jsx("div",{className:"flex items-center justify-between p-4 max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>e("/",{state:{initialTab:"profile"}}),children:n.jsx(mt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Meus Eventos"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Cadastros, confirmações e ingressos"})]})]})})}),n.jsx("div",{className:"p-4 max-w-7xl mx-auto pb-20",children:n.jsxs(Gm,{defaultValue:"purchases",className:"w-full",children:[n.jsxs(Lu,{className:"grid w-full grid-cols-3",children:[n.jsxs(is,{value:"purchases",children:[n.jsx(Sc,{className:"h-4 w-4 mr-2"}),"Ingressos (",d.length,")"]}),n.jsxs(is,{value:"confirmed",children:[n.jsx(ss,{className:"h-4 w-4 mr-2"}),"Confirmados (",j.length,")"]}),n.jsxs(is,{value:"registrations",children:[n.jsx(kt,{className:"h-4 w-4 mr-2"}),"Cadastros (",N.length,")"]})]}),n.jsx(os,{value:"purchases",className:"space-y-4 mt-6",children:d.length===0?n.jsx(je,{children:n.jsxs(Ee,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(Sc,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("p",{className:"text-muted-foreground text-center",children:"Você ainda não comprou nenhum ingresso"})]})}):d.map(A=>n.jsx(C,{event:A.event,type:"purchase",purchase:A},A.id))}),n.jsx(os,{value:"confirmed",className:"space-y-4 mt-6",children:j.length===0?n.jsx(je,{children:n.jsxs(Ee,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(ss,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("p",{className:"text-muted-foreground text-center",children:"Você ainda não confirmou presença em nenhum evento"})]})}):j.map(A=>n.jsx(C,{event:A.event,type:"confirmed",registration:A},A.id))}),n.jsx(os,{value:"registrations",className:"space-y-4 mt-6",children:N.length===0?n.jsx(je,{children:n.jsxs(Ee,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(kt,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("p",{className:"text-muted-foreground text-center",children:"Você não tem cadastros pendentes em eventos"})]})}):N.map(A=>n.jsx(C,{event:A.event,type:"registration",registration:A},A.id))})]})}),n.jsx(zt,{open:!!f,onOpenChange:()=>p(null),children:n.jsxs(Ft,{className:"sm:max-w-lg max-h-[90vh] overflow-y-auto",children:[n.jsxs(gr,{children:[n.jsx(xr,{children:"Seu Ingresso Digital"}),n.jsx(as,{children:"Apresente este QR Code na entrada do evento"})]}),f&&n.jsxs("div",{className:"space-y-4 pb-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Titular do Ingresso"}),n.jsx("p",{className:"font-semibold",children:f.buyer_name})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Email"}),n.jsx("p",{className:"font-medium text-sm",children:f.buyer_email})]})]}),n.jsx("div",{className:"border-t border-dashed"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Evento"}),n.jsx("p",{className:"font-semibold",children:f.event.title})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Organizador"}),n.jsx("p",{className:"font-medium text-sm",children:f.event.organizer.page_title})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Data"}),n.jsx("p",{className:"font-medium text-sm",children:cn(new Date(f.event.event_date),"dd/MM/yyyy",{locale:Pr})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Horário"}),n.jsx("p",{className:"font-medium text-sm",children:cn(new Date(f.event.event_date),"HH:mm",{locale:Pr})})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Local"}),n.jsx("p",{className:"font-medium text-sm",children:f.event.location})]})]}),n.jsx("div",{className:"border-t border-dashed"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Tipo de Ingresso"}),n.jsx("p",{className:"font-semibold text-sm",children:f.ticket_type.name})]}),n.jsxs(ct,{variant:"secondary",children:[f.quantity,"x"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Valor Total"}),n.jsxs("p",{className:"font-bold text-lg text-primary",children:["R$ ",f.total_amount.toFixed(2)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Data da Compra"}),n.jsx("p",{className:"font-medium text-sm",children:cn(new Date(f.created_at),"dd/MM/yyyy 'às' HH:mm",{locale:Pr})})]})]}),n.jsx("div",{className:"border-t border-dashed"}),n.jsxs("div",{className:"flex flex-col items-center gap-3 py-2",children:[n.jsx("div",{ref:x,className:"bg-white p-4 rounded-lg shadow-sm",children:n.jsx(ck,{value:f.id,size:200})}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Código do Ingresso"}),n.jsx("p",{className:"text-xs font-mono bg-muted px-2 py-1 rounded",children:f.id})]})]}),n.jsxs("div",{className:"flex gap-2 pt-2",children:[n.jsx(Y,{variant:"outline",className:"flex-1",onClick:()=>{var L;const A=(L=x.current)==null?void 0:L.querySelector("svg");if(!A){W.error("Erro ao gerar QR Code");return}const k=new XMLSerializer().serializeToString(A),b=new Blob([k],{type:"image/svg+xml;charset=utf-8"}),T=URL.createObjectURL(b),O=new Image;O.onload=()=>{const R=document.createElement("canvas"),M=R.getContext("2d");if(!M)return;R.width=400,R.height=500,M.fillStyle="white",M.fillRect(0,0,R.width,R.height),M.fillStyle="black",M.textAlign="center",M.font="bold 18px Arial",M.fillText("Ingresso Digital",R.width/2,30),M.font="14px Arial",M.fillText(f.event.title,R.width/2,60),M.drawImage(O,100,80,200,200),M.font="12px Arial",M.fillText(`Tipo: ${f.ticket_type.name}`,R.width/2,300),M.fillText(`Quantidade: ${f.quantity}x`,R.width/2,320),M.fillText(`Titular: ${f.buyer_name}`,R.width/2,340),M.font="10px monospace",M.fillText(f.id,R.width/2,380);const P=R.toDataURL("image/png"),q=document.createElement("a");q.download=`ingresso-${f.event.title.replace(/\s+/g,"-").toLowerCase()}.png`,q.href=P,q.click(),URL.revokeObjectURL(T),W.success("Ingresso baixado com sucesso!")},O.onerror=()=>{URL.revokeObjectURL(T),W.error("Erro ao processar QR Code")},O.src=T},children:"Baixar Ingresso"}),new Date(f.event.event_date)>new Date&&n.jsx(Y,{className:"flex-1",onClick:async()=>{var S;if(!f)return;const{data:A}=await U.from("organizers").select("username").eq("id",(S=(await U.from("events").select("organizer_id").eq("id",f.event_id).maybeSingle()).data)==null?void 0:S.organizer_id).maybeSingle();if(A!=null&&A.username){const k=w(f.event.title);p(null),e(`/${A.username}/${k}`)}else W.error("Erro ao abrir evento")},children:"Ver Evento"})]})]})]})})]})}function aW(){const e=_t(),{organizerData:t}=ri(),{isNativeApp:r}=TA(),[s,a]=v.useState(!1);return v.useEffect(()=>{a(window.innerWidth<768)},[]),t!=null&&t.id?n.jsx("div",{className:"min-h-screen bg-background pb-20",children:n.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 md:px-6 lg:px-8 py-4 md:py-6 lg:py-8",children:[n.jsxs("div",{className:"mb-6 md:mb-8",children:[n.jsxs(Y,{variant:"ghost",onClick:()=>{s&&!r?window.close():e(-1)},className:"mb-4 hover:bg-accent",children:[n.jsx(mt,{className:"h-4 w-4 mr-2"}),"Voltar"]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h1",{className:"text-2xl md:text-3xl lg:text-4xl font-bold",children:"Gestão Financeira"}),n.jsx("p",{className:"text-sm md:text-base text-muted-foreground",children:"Gerencie seus dados bancários e acompanhe suas vendas"})]})]}),n.jsxs("div",{className:"grid gap-6 md:gap-8 lg:grid-cols-2 xl:gap-10",children:[n.jsx("div",{className:"space-y-4 md:space-y-6",children:n.jsxs("div",{className:"bg-card rounded-xl border p-4 md:p-6",children:[n.jsxs("div",{className:"mb-4 md:mb-6",children:[n.jsx("h2",{className:"text-xl md:text-2xl font-bold mb-1",children:"Dados Financeiros"}),n.jsx("p",{className:"text-sm md:text-base text-muted-foreground",children:"Configure suas informações bancárias e fiscais"})]}),n.jsx(IA,{organizerId:t.id})]})}),n.jsx("div",{className:"space-y-4 md:space-y-6",children:n.jsxs("div",{className:"bg-card rounded-xl border p-4 md:p-6",children:[n.jsxs("div",{className:"mb-4 md:mb-6",children:[n.jsx("h2",{className:"text-xl md:text-2xl font-bold mb-1",children:"Vendas de Ingressos"}),n.jsx("p",{className:"text-sm md:text-base text-muted-foreground",children:"Acompanhe suas vendas e repasses"})]}),n.jsx(RA,{organizerId:t.id})]})})]})]})}):n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:n.jsx("div",{className:"text-center",children:n.jsx("p",{className:"text-muted-foreground mb-4",children:"Carregando..."})})})}const iW=new QO,oW=()=>n.jsxs(K5,{children:[n.jsx(W7,{}),n.jsxs(W5,{children:[n.jsx($t,{path:"/",element:n.jsx(Qq,{})}),n.jsx($t,{path:"/auth",element:n.jsx(eV,{onLogin:()=>{}})}),n.jsx($t,{path:"/organizer-onboarding",element:n.jsx(lV,{})}),n.jsx($t,{path:"/user-onboarding",element:n.jsx(dV,{})}),n.jsx($t,{path:"/notifications",element:n.jsx(NV,{})}),n.jsx($t,{path:"/ticket-success",element:n.jsx(ZV,{})}),n.jsx($t,{path:"/my-events",element:n.jsx(sW,{})}),n.jsx($t,{path:"/organizer-financial",element:n.jsx(aW,{})}),n.jsx($t,{path:"/event/:eventId/sales",element:n.jsx(tW,{})}),n.jsx($t,{path:"/event/:eventId/register",element:n.jsx(UA,{})}),n.jsx($t,{path:"/event/:eventId/registrations",element:n.jsx(Ev,{})}),n.jsx($t,{path:"/event/:eventId/attendances",element:n.jsx(Sv,{})}),n.jsx($t,{path:"/event/:eventId/find-friends",element:n.jsx(c0,{})}),n.jsx($t,{path:"/e/:eventId",element:n.jsx(x2,{})}),n.jsx($t,{path:"/admin",element:n.jsx(hV,{})}),n.jsx($t,{path:"/admin/create-platform-event",element:n.jsx(fV,{})}),n.jsx($t,{path:"/admin/claims",element:n.jsx(mV,{})}),n.jsx($t,{path:"/admin/platform-events",element:n.jsx(pV,{})}),n.jsx($t,{path:"/admin/platform-event/:eventId/edit",element:n.jsx(gV,{})}),n.jsx($t,{path:"/admin/platform-event/:eventId/registrations",element:n.jsx(xV,{})}),n.jsx($t,{path:"/admin/support",element:n.jsx(vV,{})}),n.jsx($t,{path:"/admin/auto-generate-events",element:n.jsx(wV,{})}),n.jsx($t,{path:"/admin/pending-events",element:n.jsx(yV,{})}),n.jsx($t,{path:"/admin/pending-event/:eventId/edit",element:n.jsx(bV,{})}),n.jsx($t,{path:"/admin/organizer-payments",element:n.jsx(rW,{})}),n.jsx($t,{path:"/admin/organizer-payments/:organizerId",element:n.jsx(nW,{})}),n.jsx($t,{path:"/:organizerSlug/:eventSlug",element:n.jsx(x2,{})}),n.jsx($t,{path:"/:slug",element:n.jsx(Jq,{})}),n.jsx($t,{path:"*",element:n.jsx(uV,{})})]})]}),lW=()=>n.jsx(JO,{client:iW,children:n.jsx(jO,{children:n.jsx(I7,{children:n.jsxs(R7,{children:[n.jsx(lP,{}),n.jsx(zP,{}),n.jsx(oW,{})]})})})});VN(document.getElementById("root")).render(n.jsx(v.StrictMode,{children:n.jsx(lW,{})}));export{Wb as B,vg as C,Ic as E,Gb as L,aE as W};
