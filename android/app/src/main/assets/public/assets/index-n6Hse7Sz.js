var tw=e=>{throw TypeError(e)};var Pp=(e,t,r)=>t.has(e)||tw("Cannot "+r);var Ne=(e,t,r)=>(Pp(e,t,"read from private field"),r?r.call(e):t.get(e)),It=(e,t,r)=>t.has(e)?tw("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),ct=(e,t,r,s)=>(Pp(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),gn=(e,t,r)=>(Pp(e,t,"access private method"),r);var oh=(e,t,r,s)=>({set _(a){ct(e,t,a,r)},get _(){return Ne(e,t,s)}});function D2(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const o=Object.getOwnPropertyDescriptor(s,a);o&&Object.defineProperty(e,a,o.get?o:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var on=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function E0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function oT(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var a=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,a.get?a:{enumerable:!0,get:function(){return e[s]}})}),r}var M2={exports:{}},nm={},L2={exports:{}},jt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nu=Symbol.for("react.element"),lT=Symbol.for("react.portal"),cT=Symbol.for("react.fragment"),dT=Symbol.for("react.strict_mode"),uT=Symbol.for("react.profiler"),hT=Symbol.for("react.provider"),fT=Symbol.for("react.context"),mT=Symbol.for("react.forward_ref"),pT=Symbol.for("react.suspense"),gT=Symbol.for("react.memo"),xT=Symbol.for("react.lazy"),rw=Symbol.iterator;function vT(e){return e===null||typeof e!="object"?null:(e=rw&&e[rw]||e["@@iterator"],typeof e=="function"?e:null)}var F2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B2=Object.assign,z2={};function Mc(e,t,r){this.props=e,this.context=t,this.refs=z2,this.updater=r||F2}Mc.prototype.isReactComponent={};Mc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Mc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function U2(){}U2.prototype=Mc.prototype;function S0(e,t,r){this.props=e,this.context=t,this.refs=z2,this.updater=r||F2}var A0=S0.prototype=new U2;A0.constructor=S0;B2(A0,Mc.prototype);A0.isPureReactComponent=!0;var nw=Array.isArray,$2=Object.prototype.hasOwnProperty,k0={current:null},V2={key:!0,ref:!0,__self:!0,__source:!0};function q2(e,t,r){var s,a={},o=null,c=null;if(t!=null)for(s in t.ref!==void 0&&(c=t.ref),t.key!==void 0&&(o=""+t.key),t)$2.call(t,s)&&!V2.hasOwnProperty(s)&&(a[s]=t[s]);var u=arguments.length-2;if(u===1)a.children=r;else if(1<u){for(var f=Array(u),p=0;p<u;p++)f[p]=arguments[p+2];a.children=f}if(e&&e.defaultProps)for(s in u=e.defaultProps,u)a[s]===void 0&&(a[s]=u[s]);return{$$typeof:Nu,type:e,key:o,ref:c,props:a,_owner:k0.current}}function wT(e,t){return{$$typeof:Nu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function T0(e){return typeof e=="object"&&e!==null&&e.$$typeof===Nu}function yT(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var sw=/\/+/g;function Op(e,t){return typeof e=="object"&&e!==null&&e.key!=null?yT(""+e.key):t.toString(36)}function zh(e,t,r,s,a){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var c=!1;if(e===null)c=!0;else switch(o){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case Nu:case lT:c=!0}}if(c)return c=e,a=a(c),e=s===""?"."+Op(c,0):s,nw(a)?(r="",e!=null&&(r=e.replace(sw,"$&/")+"/"),zh(a,t,r,"",function(p){return p})):a!=null&&(T0(a)&&(a=wT(a,r+(!a.key||c&&c.key===a.key?"":(""+a.key).replace(sw,"$&/")+"/")+e)),t.push(a)),1;if(c=0,s=s===""?".":s+":",nw(e))for(var u=0;u<e.length;u++){o=e[u];var f=s+Op(o,u);c+=zh(o,t,r,f,a)}else if(f=vT(e),typeof f=="function")for(e=f.call(e),u=0;!(o=e.next()).done;)o=o.value,f=s+Op(o,u++),c+=zh(o,t,r,f,a);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function lh(e,t,r){if(e==null)return e;var s=[],a=0;return zh(e,s,"","",function(o){return t.call(r,o,a++)}),s}function bT(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var kn={current:null},Uh={transition:null},_T={ReactCurrentDispatcher:kn,ReactCurrentBatchConfig:Uh,ReactCurrentOwner:k0};function W2(){throw Error("act(...) is not supported in production builds of React.")}jt.Children={map:lh,forEach:function(e,t,r){lh(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return lh(e,function(){t++}),t},toArray:function(e){return lh(e,function(t){return t})||[]},only:function(e){if(!T0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};jt.Component=Mc;jt.Fragment=cT;jt.Profiler=uT;jt.PureComponent=S0;jt.StrictMode=dT;jt.Suspense=pT;jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_T;jt.act=W2;jt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=B2({},e.props),a=e.key,o=e.ref,c=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,c=k0.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(f in t)$2.call(t,f)&&!V2.hasOwnProperty(f)&&(s[f]=t[f]===void 0&&u!==void 0?u[f]:t[f])}var f=arguments.length-2;if(f===1)s.children=r;else if(1<f){u=Array(f);for(var p=0;p<f;p++)u[p]=arguments[p+2];s.children=u}return{$$typeof:Nu,type:e.type,key:a,ref:o,props:s,_owner:c}};jt.createContext=function(e){return e={$$typeof:fT,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:hT,_context:e},e.Consumer=e};jt.createElement=q2;jt.createFactory=function(e){var t=q2.bind(null,e);return t.type=e,t};jt.createRef=function(){return{current:null}};jt.forwardRef=function(e){return{$$typeof:mT,render:e}};jt.isValidElement=T0;jt.lazy=function(e){return{$$typeof:xT,_payload:{_status:-1,_result:e},_init:bT}};jt.memo=function(e,t){return{$$typeof:gT,type:e,compare:t===void 0?null:t}};jt.startTransition=function(e){var t=Uh.transition;Uh.transition={};try{e()}finally{Uh.transition=t}};jt.unstable_act=W2;jt.useCallback=function(e,t){return kn.current.useCallback(e,t)};jt.useContext=function(e){return kn.current.useContext(e)};jt.useDebugValue=function(){};jt.useDeferredValue=function(e){return kn.current.useDeferredValue(e)};jt.useEffect=function(e,t){return kn.current.useEffect(e,t)};jt.useId=function(){return kn.current.useId()};jt.useImperativeHandle=function(e,t,r){return kn.current.useImperativeHandle(e,t,r)};jt.useInsertionEffect=function(e,t){return kn.current.useInsertionEffect(e,t)};jt.useLayoutEffect=function(e,t){return kn.current.useLayoutEffect(e,t)};jt.useMemo=function(e,t){return kn.current.useMemo(e,t)};jt.useReducer=function(e,t,r){return kn.current.useReducer(e,t,r)};jt.useRef=function(e){return kn.current.useRef(e)};jt.useState=function(e){return kn.current.useState(e)};jt.useSyncExternalStore=function(e,t,r){return kn.current.useSyncExternalStore(e,t,r)};jt.useTransition=function(){return kn.current.useTransition()};jt.version="18.3.1";L2.exports=jt;var v=L2.exports;const $e=E0(v),I0=D2({__proto__:null,default:$e},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NT=v,jT=Symbol.for("react.element"),CT=Symbol.for("react.fragment"),ET=Object.prototype.hasOwnProperty,ST=NT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,AT={key:!0,ref:!0,__self:!0,__source:!0};function H2(e,t,r){var s,a={},o=null,c=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(c=t.ref);for(s in t)ET.call(t,s)&&!AT.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:jT,type:e,key:o,ref:c,props:a,_owner:ST.current}}nm.Fragment=CT;nm.jsx=H2;nm.jsxs=H2;M2.exports=nm;var n=M2.exports,G2={exports:{}},fs={},X2={exports:{}},K2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ie,te){var ye=ie.length;ie.push(te);e:for(;0<ye;){var ge=ye-1>>>1,W=ie[ge];if(0<a(W,te))ie[ge]=te,ie[ye]=W,ye=ge;else break e}}function r(ie){return ie.length===0?null:ie[0]}function s(ie){if(ie.length===0)return null;var te=ie[0],ye=ie.pop();if(ye!==te){ie[0]=ye;e:for(var ge=0,W=ie.length,J=W>>>1;ge<J;){var G=2*(ge+1)-1,se=ie[G],ce=G+1,ne=ie[ce];if(0>a(se,ye))ce<W&&0>a(ne,se)?(ie[ge]=ne,ie[ce]=ye,ge=ce):(ie[ge]=se,ie[G]=ye,ge=G);else if(ce<W&&0>a(ne,ye))ie[ge]=ne,ie[ce]=ye,ge=ce;else break e}}return te}function a(ie,te){var ye=ie.sortIndex-te.sortIndex;return ye!==0?ye:ie.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();e.unstable_now=function(){return c.now()-u}}var f=[],p=[],x=1,w=null,_=3,j=!1,N=!1,C=!1,T=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(ie){for(var te=r(p);te!==null;){if(te.callback===null)s(p);else if(te.startTime<=ie)s(p),te.sortIndex=te.expirationTime,t(f,te);else break;te=r(p)}}function k(ie){if(C=!1,b(ie),!N)if(r(f)!==null)N=!0,re(O);else{var te=r(p);te!==null&&ae(k,te.startTime-ie)}}function O(ie,te){N=!1,C&&(C=!1,E(M),M=-1),j=!0;var ye=_;try{for(b(te),w=r(f);w!==null&&(!(w.expirationTime>te)||ie&&!Y());){var ge=w.callback;if(typeof ge=="function"){w.callback=null,_=w.priorityLevel;var W=ge(w.expirationTime<=te);te=e.unstable_now(),typeof W=="function"?w.callback=W:w===r(f)&&s(f),b(te)}else s(f);w=r(f)}if(w!==null)var J=!0;else{var G=r(p);G!==null&&ae(k,G.startTime-te),J=!1}return J}finally{w=null,_=ye,j=!1}}var L=!1,P=null,M=-1,R=5,$=-1;function Y(){return!(e.unstable_now()-$<R)}function z(){if(P!==null){var ie=e.unstable_now();$=ie;var te=!0;try{te=P(!0,ie)}finally{te?q():(L=!1,P=null)}}else L=!1}var q;if(typeof S=="function")q=function(){S(z)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,H=ee.port2;ee.port1.onmessage=z,q=function(){H.postMessage(null)}}else q=function(){T(z,0)};function re(ie){P=ie,L||(L=!0,q())}function ae(ie,te){M=T(function(){ie(e.unstable_now())},te)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ie){ie.callback=null},e.unstable_continueExecution=function(){N||j||(N=!0,re(O))},e.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<ie?Math.floor(1e3/ie):5},e.unstable_getCurrentPriorityLevel=function(){return _},e.unstable_getFirstCallbackNode=function(){return r(f)},e.unstable_next=function(ie){switch(_){case 1:case 2:case 3:var te=3;break;default:te=_}var ye=_;_=te;try{return ie()}finally{_=ye}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ie,te){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ye=_;_=ie;try{return te()}finally{_=ye}},e.unstable_scheduleCallback=function(ie,te,ye){var ge=e.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?ge+ye:ge):ye=ge,ie){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=ye+W,ie={id:x++,callback:te,priorityLevel:ie,startTime:ye,expirationTime:W,sortIndex:-1},ye>ge?(ie.sortIndex=ye,t(p,ie),r(f)===null&&ie===r(p)&&(C?(E(M),M=-1):C=!0,ae(k,ye-ge))):(ie.sortIndex=W,t(f,ie),N||j||(N=!0,re(O))),ie},e.unstable_shouldYield=Y,e.unstable_wrapCallback=function(ie){var te=_;return function(){var ye=_;_=te;try{return ie.apply(this,arguments)}finally{_=ye}}}})(K2);X2.exports=K2;var kT=X2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TT=v,us=kT;function Oe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Y2=new Set,zd={};function il(e,t){yc(e,t),yc(e+"Capture",t)}function yc(e,t){for(zd[e]=t,e=0;e<t.length;e++)Y2.add(t[e])}var Ha=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mg=Object.prototype.hasOwnProperty,IT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,aw={},iw={};function RT(e){return Mg.call(iw,e)?!0:Mg.call(aw,e)?!1:IT.test(e)?iw[e]=!0:(aw[e]=!0,!1)}function PT(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function OT(e,t,r,s){if(t===null||typeof t>"u"||PT(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Tn(e,t,r,s,a,o,c){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=c}var hn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){hn[e]=new Tn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];hn[t]=new Tn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){hn[e]=new Tn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){hn[e]=new Tn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){hn[e]=new Tn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){hn[e]=new Tn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){hn[e]=new Tn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){hn[e]=new Tn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){hn[e]=new Tn(e,5,!1,e.toLowerCase(),null,!1,!1)});var R0=/[\-:]([a-z])/g;function P0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(R0,P0);hn[t]=new Tn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(R0,P0);hn[t]=new Tn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(R0,P0);hn[t]=new Tn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){hn[e]=new Tn(e,1,!1,e.toLowerCase(),null,!1,!1)});hn.xlinkHref=new Tn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){hn[e]=new Tn(e,1,!1,e.toLowerCase(),null,!0,!0)});function O0(e,t,r,s){var a=hn.hasOwnProperty(t)?hn[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(OT(t,r,a,s)&&(r=null),s||a===null?RT(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,s=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var ei=TT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ch=Symbol.for("react.element"),Ul=Symbol.for("react.portal"),$l=Symbol.for("react.fragment"),D0=Symbol.for("react.strict_mode"),Lg=Symbol.for("react.profiler"),Q2=Symbol.for("react.provider"),Z2=Symbol.for("react.context"),M0=Symbol.for("react.forward_ref"),Fg=Symbol.for("react.suspense"),Bg=Symbol.for("react.suspense_list"),L0=Symbol.for("react.memo"),vi=Symbol.for("react.lazy"),J2=Symbol.for("react.offscreen"),ow=Symbol.iterator;function ad(e){return e===null||typeof e!="object"?null:(e=ow&&e[ow]||e["@@iterator"],typeof e=="function"?e:null)}var yr=Object.assign,Dp;function wd(e){if(Dp===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Dp=t&&t[1]||""}return`
`+Dp+e}var Mp=!1;function Lp(e,t){if(!e||Mp)return"";Mp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(p){var s=p}Reflect.construct(e,[],t)}else{try{t.call()}catch(p){s=p}e.call(t.prototype)}else{try{throw Error()}catch(p){s=p}e()}}catch(p){if(p&&s&&typeof p.stack=="string"){for(var a=p.stack.split(`
`),o=s.stack.split(`
`),c=a.length-1,u=o.length-1;1<=c&&0<=u&&a[c]!==o[u];)u--;for(;1<=c&&0<=u;c--,u--)if(a[c]!==o[u]){if(c!==1||u!==1)do if(c--,u--,0>u||a[c]!==o[u]){var f=`
`+a[c].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=c&&0<=u);break}}}finally{Mp=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?wd(e):""}function DT(e){switch(e.tag){case 5:return wd(e.type);case 16:return wd("Lazy");case 13:return wd("Suspense");case 19:return wd("SuspenseList");case 0:case 2:case 15:return e=Lp(e.type,!1),e;case 11:return e=Lp(e.type.render,!1),e;case 1:return e=Lp(e.type,!0),e;default:return""}}function zg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $l:return"Fragment";case Ul:return"Portal";case Lg:return"Profiler";case D0:return"StrictMode";case Fg:return"Suspense";case Bg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Z2:return(e.displayName||"Context")+".Consumer";case Q2:return(e._context.displayName||"Context")+".Provider";case M0:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case L0:return t=e.displayName||null,t!==null?t:zg(e.type)||"Memo";case vi:t=e._payload,e=e._init;try{return zg(e(t))}catch{}}return null}function MT(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zg(t);case 8:return t===D0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function $i(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function e_(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function LT(e){var t=e_(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(c){s=""+c,o.call(this,c)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(c){s=""+c},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function dh(e){e._valueTracker||(e._valueTracker=LT(e))}function t_(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=e_(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function uf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ug(e,t){var r=t.checked;return yr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function lw(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=$i(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function r_(e,t){t=t.checked,t!=null&&O0(e,"checked",t,!1)}function $g(e,t){r_(e,t);var r=$i(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Vg(e,t.type,r):t.hasOwnProperty("defaultValue")&&Vg(e,t.type,$i(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function cw(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Vg(e,t,r){(t!=="number"||uf(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var yd=Array.isArray;function ec(e,t,r,s){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&s&&(e[r].defaultSelected=!0)}else{for(r=""+$i(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function qg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Oe(91));return yr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function dw(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Oe(92));if(yd(r)){if(1<r.length)throw Error(Oe(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:$i(r)}}function n_(e,t){var r=$i(t.value),s=$i(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function uw(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function s_(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?s_(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var uh,a_=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(uh=uh||document.createElement("div"),uh.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=uh.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ud(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ed={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},FT=["Webkit","ms","Moz","O"];Object.keys(Ed).forEach(function(e){FT.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ed[t]=Ed[e]})});function i_(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ed.hasOwnProperty(e)&&Ed[e]?(""+t).trim():t+"px"}function o_(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=i_(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,a):e[r]=a}}var BT=yr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hg(e,t){if(t){if(BT[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Oe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Oe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Oe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Oe(62))}}function Gg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xg=null;function F0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Kg=null,tc=null,rc=null;function hw(e){if(e=Eu(e)){if(typeof Kg!="function")throw Error(Oe(280));var t=e.stateNode;t&&(t=lm(t),Kg(e.stateNode,e.type,t))}}function l_(e){tc?rc?rc.push(e):rc=[e]:tc=e}function c_(){if(tc){var e=tc,t=rc;if(rc=tc=null,hw(e),t)for(e=0;e<t.length;e++)hw(t[e])}}function d_(e,t){return e(t)}function u_(){}var Fp=!1;function h_(e,t,r){if(Fp)return e(t,r);Fp=!0;try{return d_(e,t,r)}finally{Fp=!1,(tc!==null||rc!==null)&&(u_(),c_())}}function $d(e,t){var r=e.stateNode;if(r===null)return null;var s=lm(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Oe(231,t,typeof r));return r}var Yg=!1;if(Ha)try{var id={};Object.defineProperty(id,"passive",{get:function(){Yg=!0}}),window.addEventListener("test",id,id),window.removeEventListener("test",id,id)}catch{Yg=!1}function zT(e,t,r,s,a,o,c,u,f){var p=Array.prototype.slice.call(arguments,3);try{t.apply(r,p)}catch(x){this.onError(x)}}var Sd=!1,hf=null,ff=!1,Qg=null,UT={onError:function(e){Sd=!0,hf=e}};function $T(e,t,r,s,a,o,c,u,f){Sd=!1,hf=null,zT.apply(UT,arguments)}function VT(e,t,r,s,a,o,c,u,f){if($T.apply(this,arguments),Sd){if(Sd){var p=hf;Sd=!1,hf=null}else throw Error(Oe(198));ff||(ff=!0,Qg=p)}}function ol(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function f_(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function fw(e){if(ol(e)!==e)throw Error(Oe(188))}function qT(e){var t=e.alternate;if(!t){if(t=ol(e),t===null)throw Error(Oe(188));return t!==e?null:e}for(var r=e,s=t;;){var a=r.return;if(a===null)break;var o=a.alternate;if(o===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===r)return fw(a),e;if(o===s)return fw(a),t;o=o.sibling}throw Error(Oe(188))}if(r.return!==s.return)r=a,s=o;else{for(var c=!1,u=a.child;u;){if(u===r){c=!0,r=a,s=o;break}if(u===s){c=!0,s=a,r=o;break}u=u.sibling}if(!c){for(u=o.child;u;){if(u===r){c=!0,r=o,s=a;break}if(u===s){c=!0,s=o,r=a;break}u=u.sibling}if(!c)throw Error(Oe(189))}}if(r.alternate!==s)throw Error(Oe(190))}if(r.tag!==3)throw Error(Oe(188));return r.stateNode.current===r?e:t}function m_(e){return e=qT(e),e!==null?p_(e):null}function p_(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=p_(e);if(t!==null)return t;e=e.sibling}return null}var g_=us.unstable_scheduleCallback,mw=us.unstable_cancelCallback,WT=us.unstable_shouldYield,HT=us.unstable_requestPaint,kr=us.unstable_now,GT=us.unstable_getCurrentPriorityLevel,B0=us.unstable_ImmediatePriority,x_=us.unstable_UserBlockingPriority,mf=us.unstable_NormalPriority,XT=us.unstable_LowPriority,v_=us.unstable_IdlePriority,sm=null,Ea=null;function KT(e){if(Ea&&typeof Ea.onCommitFiberRoot=="function")try{Ea.onCommitFiberRoot(sm,e,void 0,(e.current.flags&128)===128)}catch{}}var ta=Math.clz32?Math.clz32:ZT,YT=Math.log,QT=Math.LN2;function ZT(e){return e>>>=0,e===0?32:31-(YT(e)/QT|0)|0}var hh=64,fh=4194304;function bd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pf(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,a=e.suspendedLanes,o=e.pingedLanes,c=r&268435455;if(c!==0){var u=c&~a;u!==0?s=bd(u):(o&=c,o!==0&&(s=bd(o)))}else c=r&~a,c!==0?s=bd(c):o!==0&&(s=bd(o));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,o=t&-t,a>=o||a===16&&(o&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-ta(t),a=1<<r,s|=e[r],t&=~a;return s}function JT(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eI(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var c=31-ta(o),u=1<<c,f=a[c];f===-1?(!(u&r)||u&s)&&(a[c]=JT(u,t)):f<=t&&(e.expiredLanes|=u),o&=~u}}function Zg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function w_(){var e=hh;return hh<<=1,!(hh&4194240)&&(hh=64),e}function Bp(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ju(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ta(t),e[t]=r}function tI(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-ta(r),o=1<<a;t[a]=0,s[a]=-1,e[a]=-1,r&=~o}}function z0(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-ta(r),a=1<<s;a&t|e[s]&t&&(e[s]|=t),r&=~a}}var Xt=0;function y_(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var b_,U0,__,N_,j_,Jg=!1,mh=[],Ri=null,Pi=null,Oi=null,Vd=new Map,qd=new Map,yi=[],rI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pw(e,t){switch(e){case"focusin":case"focusout":Ri=null;break;case"dragenter":case"dragleave":Pi=null;break;case"mouseover":case"mouseout":Oi=null;break;case"pointerover":case"pointerout":Vd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":qd.delete(t.pointerId)}}function od(e,t,r,s,a,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:o,targetContainers:[a]},t!==null&&(t=Eu(t),t!==null&&U0(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function nI(e,t,r,s,a){switch(t){case"focusin":return Ri=od(Ri,e,t,r,s,a),!0;case"dragenter":return Pi=od(Pi,e,t,r,s,a),!0;case"mouseover":return Oi=od(Oi,e,t,r,s,a),!0;case"pointerover":var o=a.pointerId;return Vd.set(o,od(Vd.get(o)||null,e,t,r,s,a)),!0;case"gotpointercapture":return o=a.pointerId,qd.set(o,od(qd.get(o)||null,e,t,r,s,a)),!0}return!1}function C_(e){var t=So(e.target);if(t!==null){var r=ol(t);if(r!==null){if(t=r.tag,t===13){if(t=f_(r),t!==null){e.blockedOn=t,j_(e.priority,function(){__(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $h(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=ex(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);Xg=s,r.target.dispatchEvent(s),Xg=null}else return t=Eu(r),t!==null&&U0(t),e.blockedOn=r,!1;t.shift()}return!0}function gw(e,t,r){$h(e)&&r.delete(t)}function sI(){Jg=!1,Ri!==null&&$h(Ri)&&(Ri=null),Pi!==null&&$h(Pi)&&(Pi=null),Oi!==null&&$h(Oi)&&(Oi=null),Vd.forEach(gw),qd.forEach(gw)}function ld(e,t){e.blockedOn===t&&(e.blockedOn=null,Jg||(Jg=!0,us.unstable_scheduleCallback(us.unstable_NormalPriority,sI)))}function Wd(e){function t(a){return ld(a,e)}if(0<mh.length){ld(mh[0],e);for(var r=1;r<mh.length;r++){var s=mh[r];s.blockedOn===e&&(s.blockedOn=null)}}for(Ri!==null&&ld(Ri,e),Pi!==null&&ld(Pi,e),Oi!==null&&ld(Oi,e),Vd.forEach(t),qd.forEach(t),r=0;r<yi.length;r++)s=yi[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<yi.length&&(r=yi[0],r.blockedOn===null);)C_(r),r.blockedOn===null&&yi.shift()}var nc=ei.ReactCurrentBatchConfig,gf=!0;function aI(e,t,r,s){var a=Xt,o=nc.transition;nc.transition=null;try{Xt=1,$0(e,t,r,s)}finally{Xt=a,nc.transition=o}}function iI(e,t,r,s){var a=Xt,o=nc.transition;nc.transition=null;try{Xt=4,$0(e,t,r,s)}finally{Xt=a,nc.transition=o}}function $0(e,t,r,s){if(gf){var a=ex(e,t,r,s);if(a===null)Kp(e,t,s,xf,r),pw(e,s);else if(nI(a,e,t,r,s))s.stopPropagation();else if(pw(e,s),t&4&&-1<rI.indexOf(e)){for(;a!==null;){var o=Eu(a);if(o!==null&&b_(o),o=ex(e,t,r,s),o===null&&Kp(e,t,s,xf,r),o===a)break;a=o}a!==null&&s.stopPropagation()}else Kp(e,t,s,null,r)}}var xf=null;function ex(e,t,r,s){if(xf=null,e=F0(s),e=So(e),e!==null)if(t=ol(e),t===null)e=null;else if(r=t.tag,r===13){if(e=f_(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return xf=e,null}function E_(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(GT()){case B0:return 1;case x_:return 4;case mf:case XT:return 16;case v_:return 536870912;default:return 16}default:return 16}}var ki=null,V0=null,Vh=null;function S_(){if(Vh)return Vh;var e,t=V0,r=t.length,s,a="value"in ki?ki.value:ki.textContent,o=a.length;for(e=0;e<r&&t[e]===a[e];e++);var c=r-e;for(s=1;s<=c&&t[r-s]===a[o-s];s++);return Vh=a.slice(e,1<s?1-s:void 0)}function qh(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ph(){return!0}function xw(){return!1}function ms(e){function t(r,s,a,o,c){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=o,this.target=c,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(r=e[u],this[u]=r?r(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ph:xw,this.isPropagationStopped=xw,this}return yr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ph)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ph)},persist:function(){},isPersistent:ph}),t}var Lc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},q0=ms(Lc),Cu=yr({},Lc,{view:0,detail:0}),oI=ms(Cu),zp,Up,cd,am=yr({},Cu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:W0,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cd&&(cd&&e.type==="mousemove"?(zp=e.screenX-cd.screenX,Up=e.screenY-cd.screenY):Up=zp=0,cd=e),zp)},movementY:function(e){return"movementY"in e?e.movementY:Up}}),vw=ms(am),lI=yr({},am,{dataTransfer:0}),cI=ms(lI),dI=yr({},Cu,{relatedTarget:0}),$p=ms(dI),uI=yr({},Lc,{animationName:0,elapsedTime:0,pseudoElement:0}),hI=ms(uI),fI=yr({},Lc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mI=ms(fI),pI=yr({},Lc,{data:0}),ww=ms(pI),gI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wI(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=vI[e])?!!t[e]:!1}function W0(){return wI}var yI=yr({},Cu,{key:function(e){if(e.key){var t=gI[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=qh(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?xI[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:W0,charCode:function(e){return e.type==="keypress"?qh(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?qh(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),bI=ms(yI),_I=yr({},am,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yw=ms(_I),NI=yr({},Cu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:W0}),jI=ms(NI),CI=yr({},Lc,{propertyName:0,elapsedTime:0,pseudoElement:0}),EI=ms(CI),SI=yr({},am,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),AI=ms(SI),kI=[9,13,27,32],H0=Ha&&"CompositionEvent"in window,Ad=null;Ha&&"documentMode"in document&&(Ad=document.documentMode);var TI=Ha&&"TextEvent"in window&&!Ad,A_=Ha&&(!H0||Ad&&8<Ad&&11>=Ad),bw=" ",_w=!1;function k_(e,t){switch(e){case"keyup":return kI.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function T_(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vl=!1;function II(e,t){switch(e){case"compositionend":return T_(t);case"keypress":return t.which!==32?null:(_w=!0,bw);case"textInput":return e=t.data,e===bw&&_w?null:e;default:return null}}function RI(e,t){if(Vl)return e==="compositionend"||!H0&&k_(e,t)?(e=S_(),Vh=V0=ki=null,Vl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return A_&&t.locale!=="ko"?null:t.data;default:return null}}var PI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!PI[e.type]:t==="textarea"}function I_(e,t,r,s){l_(s),t=vf(t,"onChange"),0<t.length&&(r=new q0("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var kd=null,Hd=null;function OI(e){$_(e,0)}function im(e){var t=Hl(e);if(t_(t))return e}function DI(e,t){if(e==="change")return t}var R_=!1;if(Ha){var Vp;if(Ha){var qp="oninput"in document;if(!qp){var jw=document.createElement("div");jw.setAttribute("oninput","return;"),qp=typeof jw.oninput=="function"}Vp=qp}else Vp=!1;R_=Vp&&(!document.documentMode||9<document.documentMode)}function Cw(){kd&&(kd.detachEvent("onpropertychange",P_),Hd=kd=null)}function P_(e){if(e.propertyName==="value"&&im(Hd)){var t=[];I_(t,Hd,e,F0(e)),h_(OI,t)}}function MI(e,t,r){e==="focusin"?(Cw(),kd=t,Hd=r,kd.attachEvent("onpropertychange",P_)):e==="focusout"&&Cw()}function LI(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return im(Hd)}function FI(e,t){if(e==="click")return im(t)}function BI(e,t){if(e==="input"||e==="change")return im(t)}function zI(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var na=typeof Object.is=="function"?Object.is:zI;function Gd(e,t){if(na(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!Mg.call(t,a)||!na(e[a],t[a]))return!1}return!0}function Ew(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Sw(e,t){var r=Ew(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ew(r)}}function O_(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?O_(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function D_(){for(var e=window,t=uf();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=uf(e.document)}return t}function G0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function UI(e){var t=D_(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&O_(r.ownerDocument.documentElement,r)){if(s!==null&&G0(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,o=Math.min(s.start,a);s=s.end===void 0?o:Math.min(s.end,a),!e.extend&&o>s&&(a=s,s=o,o=a),a=Sw(r,o);var c=Sw(r,s);a&&c&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==c.node||e.focusOffset!==c.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),o>s?(e.addRange(t),e.extend(c.node,c.offset)):(t.setEnd(c.node,c.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var $I=Ha&&"documentMode"in document&&11>=document.documentMode,ql=null,tx=null,Td=null,rx=!1;function Aw(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;rx||ql==null||ql!==uf(s)||(s=ql,"selectionStart"in s&&G0(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Td&&Gd(Td,s)||(Td=s,s=vf(tx,"onSelect"),0<s.length&&(t=new q0("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=ql)))}function gh(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Wl={animationend:gh("Animation","AnimationEnd"),animationiteration:gh("Animation","AnimationIteration"),animationstart:gh("Animation","AnimationStart"),transitionend:gh("Transition","TransitionEnd")},Wp={},M_={};Ha&&(M_=document.createElement("div").style,"AnimationEvent"in window||(delete Wl.animationend.animation,delete Wl.animationiteration.animation,delete Wl.animationstart.animation),"TransitionEvent"in window||delete Wl.transitionend.transition);function om(e){if(Wp[e])return Wp[e];if(!Wl[e])return e;var t=Wl[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in M_)return Wp[e]=t[r];return e}var L_=om("animationend"),F_=om("animationiteration"),B_=om("animationstart"),z_=om("transitionend"),U_=new Map,kw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function to(e,t){U_.set(e,t),il(t,[e])}for(var Hp=0;Hp<kw.length;Hp++){var Gp=kw[Hp],VI=Gp.toLowerCase(),qI=Gp[0].toUpperCase()+Gp.slice(1);to(VI,"on"+qI)}to(L_,"onAnimationEnd");to(F_,"onAnimationIteration");to(B_,"onAnimationStart");to("dblclick","onDoubleClick");to("focusin","onFocus");to("focusout","onBlur");to(z_,"onTransitionEnd");yc("onMouseEnter",["mouseout","mouseover"]);yc("onMouseLeave",["mouseout","mouseover"]);yc("onPointerEnter",["pointerout","pointerover"]);yc("onPointerLeave",["pointerout","pointerover"]);il("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));il("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));il("onBeforeInput",["compositionend","keypress","textInput","paste"]);il("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));il("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));il("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _d="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WI=new Set("cancel close invalid load scroll toggle".split(" ").concat(_d));function Tw(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,VT(s,t,void 0,e),e.currentTarget=null}function $_(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],a=s.event;s=s.listeners;e:{var o=void 0;if(t)for(var c=s.length-1;0<=c;c--){var u=s[c],f=u.instance,p=u.currentTarget;if(u=u.listener,f!==o&&a.isPropagationStopped())break e;Tw(a,u,p),o=f}else for(c=0;c<s.length;c++){if(u=s[c],f=u.instance,p=u.currentTarget,u=u.listener,f!==o&&a.isPropagationStopped())break e;Tw(a,u,p),o=f}}}if(ff)throw e=Qg,ff=!1,Qg=null,e}function lr(e,t){var r=t[ox];r===void 0&&(r=t[ox]=new Set);var s=e+"__bubble";r.has(s)||(V_(t,e,2,!1),r.add(s))}function Xp(e,t,r){var s=0;t&&(s|=4),V_(r,e,s,t)}var xh="_reactListening"+Math.random().toString(36).slice(2);function Xd(e){if(!e[xh]){e[xh]=!0,Y2.forEach(function(r){r!=="selectionchange"&&(WI.has(r)||Xp(r,!1,e),Xp(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[xh]||(t[xh]=!0,Xp("selectionchange",!1,t))}}function V_(e,t,r,s){switch(E_(t)){case 1:var a=aI;break;case 4:a=iI;break;default:a=$0}r=a.bind(null,t,r,e),a=void 0,!Yg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Kp(e,t,r,s,a){var o=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var c=s.tag;if(c===3||c===4){var u=s.stateNode.containerInfo;if(u===a||u.nodeType===8&&u.parentNode===a)break;if(c===4)for(c=s.return;c!==null;){var f=c.tag;if((f===3||f===4)&&(f=c.stateNode.containerInfo,f===a||f.nodeType===8&&f.parentNode===a))return;c=c.return}for(;u!==null;){if(c=So(u),c===null)return;if(f=c.tag,f===5||f===6){s=o=c;continue e}u=u.parentNode}}s=s.return}h_(function(){var p=o,x=F0(r),w=[];e:{var _=U_.get(e);if(_!==void 0){var j=q0,N=e;switch(e){case"keypress":if(qh(r)===0)break e;case"keydown":case"keyup":j=bI;break;case"focusin":N="focus",j=$p;break;case"focusout":N="blur",j=$p;break;case"beforeblur":case"afterblur":j=$p;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=vw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=cI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=jI;break;case L_:case F_:case B_:j=hI;break;case z_:j=EI;break;case"scroll":j=oI;break;case"wheel":j=AI;break;case"copy":case"cut":case"paste":j=mI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=yw}var C=(t&4)!==0,T=!C&&e==="scroll",E=C?_!==null?_+"Capture":null:_;C=[];for(var S=p,b;S!==null;){b=S;var k=b.stateNode;if(b.tag===5&&k!==null&&(b=k,E!==null&&(k=$d(S,E),k!=null&&C.push(Kd(S,k,b)))),T)break;S=S.return}0<C.length&&(_=new j(_,N,null,r,x),w.push({event:_,listeners:C}))}}if(!(t&7)){e:{if(_=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",_&&r!==Xg&&(N=r.relatedTarget||r.fromElement)&&(So(N)||N[Ga]))break e;if((j||_)&&(_=x.window===x?x:(_=x.ownerDocument)?_.defaultView||_.parentWindow:window,j?(N=r.relatedTarget||r.toElement,j=p,N=N?So(N):null,N!==null&&(T=ol(N),N!==T||N.tag!==5&&N.tag!==6)&&(N=null)):(j=null,N=p),j!==N)){if(C=vw,k="onMouseLeave",E="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(C=yw,k="onPointerLeave",E="onPointerEnter",S="pointer"),T=j==null?_:Hl(j),b=N==null?_:Hl(N),_=new C(k,S+"leave",j,r,x),_.target=T,_.relatedTarget=b,k=null,So(x)===p&&(C=new C(E,S+"enter",N,r,x),C.target=b,C.relatedTarget=T,k=C),T=k,j&&N)t:{for(C=j,E=N,S=0,b=C;b;b=El(b))S++;for(b=0,k=E;k;k=El(k))b++;for(;0<S-b;)C=El(C),S--;for(;0<b-S;)E=El(E),b--;for(;S--;){if(C===E||E!==null&&C===E.alternate)break t;C=El(C),E=El(E)}C=null}else C=null;j!==null&&Iw(w,_,j,C,!1),N!==null&&T!==null&&Iw(w,T,N,C,!0)}}e:{if(_=p?Hl(p):window,j=_.nodeName&&_.nodeName.toLowerCase(),j==="select"||j==="input"&&_.type==="file")var O=DI;else if(Nw(_))if(R_)O=BI;else{O=LI;var L=MI}else(j=_.nodeName)&&j.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(O=FI);if(O&&(O=O(e,p))){I_(w,O,r,x);break e}L&&L(e,_,p),e==="focusout"&&(L=_._wrapperState)&&L.controlled&&_.type==="number"&&Vg(_,"number",_.value)}switch(L=p?Hl(p):window,e){case"focusin":(Nw(L)||L.contentEditable==="true")&&(ql=L,tx=p,Td=null);break;case"focusout":Td=tx=ql=null;break;case"mousedown":rx=!0;break;case"contextmenu":case"mouseup":case"dragend":rx=!1,Aw(w,r,x);break;case"selectionchange":if($I)break;case"keydown":case"keyup":Aw(w,r,x)}var P;if(H0)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Vl?k_(e,r)&&(M="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(M="onCompositionStart");M&&(A_&&r.locale!=="ko"&&(Vl||M!=="onCompositionStart"?M==="onCompositionEnd"&&Vl&&(P=S_()):(ki=x,V0="value"in ki?ki.value:ki.textContent,Vl=!0)),L=vf(p,M),0<L.length&&(M=new ww(M,e,null,r,x),w.push({event:M,listeners:L}),P?M.data=P:(P=T_(r),P!==null&&(M.data=P)))),(P=TI?II(e,r):RI(e,r))&&(p=vf(p,"onBeforeInput"),0<p.length&&(x=new ww("onBeforeInput","beforeinput",null,r,x),w.push({event:x,listeners:p}),x.data=P))}$_(w,t)})}function Kd(e,t,r){return{instance:e,listener:t,currentTarget:r}}function vf(e,t){for(var r=t+"Capture",s=[];e!==null;){var a=e,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=$d(e,r),o!=null&&s.unshift(Kd(e,o,a)),o=$d(e,t),o!=null&&s.push(Kd(e,o,a))),e=e.return}return s}function El(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Iw(e,t,r,s,a){for(var o=t._reactName,c=[];r!==null&&r!==s;){var u=r,f=u.alternate,p=u.stateNode;if(f!==null&&f===s)break;u.tag===5&&p!==null&&(u=p,a?(f=$d(r,o),f!=null&&c.unshift(Kd(r,f,u))):a||(f=$d(r,o),f!=null&&c.push(Kd(r,f,u)))),r=r.return}c.length!==0&&e.push({event:t,listeners:c})}var HI=/\r\n?/g,GI=/\u0000|\uFFFD/g;function Rw(e){return(typeof e=="string"?e:""+e).replace(HI,`
`).replace(GI,"")}function vh(e,t,r){if(t=Rw(t),Rw(e)!==t&&r)throw Error(Oe(425))}function wf(){}var nx=null,sx=null;function ax(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ix=typeof setTimeout=="function"?setTimeout:void 0,XI=typeof clearTimeout=="function"?clearTimeout:void 0,Pw=typeof Promise=="function"?Promise:void 0,KI=typeof queueMicrotask=="function"?queueMicrotask:typeof Pw<"u"?function(e){return Pw.resolve(null).then(e).catch(YI)}:ix;function YI(e){setTimeout(function(){throw e})}function Yp(e,t){var r=t,s=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){e.removeChild(a),Wd(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);Wd(t)}function Di(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ow(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Fc=Math.random().toString(36).slice(2),wa="__reactFiber$"+Fc,Yd="__reactProps$"+Fc,Ga="__reactContainer$"+Fc,ox="__reactEvents$"+Fc,QI="__reactListeners$"+Fc,ZI="__reactHandles$"+Fc;function So(e){var t=e[wa];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ga]||r[wa]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Ow(e);e!==null;){if(r=e[wa])return r;e=Ow(e)}return t}e=r,r=e.parentNode}return null}function Eu(e){return e=e[wa]||e[Ga],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Hl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Oe(33))}function lm(e){return e[Yd]||null}var lx=[],Gl=-1;function ro(e){return{current:e}}function dr(e){0>Gl||(e.current=lx[Gl],lx[Gl]=null,Gl--)}function nr(e,t){Gl++,lx[Gl]=e.current,e.current=t}var Vi={},yn=ro(Vi),qn=ro(!1),Uo=Vi;function bc(e,t){var r=e.type.contextTypes;if(!r)return Vi;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in r)a[o]=t[o];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Wn(e){return e=e.childContextTypes,e!=null}function yf(){dr(qn),dr(yn)}function Dw(e,t,r){if(yn.current!==Vi)throw Error(Oe(168));nr(yn,t),nr(qn,r)}function q_(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(Oe(108,MT(e)||"Unknown",a));return yr({},r,s)}function bf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vi,Uo=yn.current,nr(yn,e),nr(qn,qn.current),!0}function Mw(e,t,r){var s=e.stateNode;if(!s)throw Error(Oe(169));r?(e=q_(e,t,Uo),s.__reactInternalMemoizedMergedChildContext=e,dr(qn),dr(yn),nr(yn,e)):dr(qn),nr(qn,r)}var za=null,cm=!1,Qp=!1;function W_(e){za===null?za=[e]:za.push(e)}function JI(e){cm=!0,W_(e)}function no(){if(!Qp&&za!==null){Qp=!0;var e=0,t=Xt;try{var r=za;for(Xt=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}za=null,cm=!1}catch(a){throw za!==null&&(za=za.slice(e+1)),g_(B0,no),a}finally{Xt=t,Qp=!1}}return null}var Xl=[],Kl=0,_f=null,Nf=0,js=[],Cs=0,$o=null,$a=1,Va="";function yo(e,t){Xl[Kl++]=Nf,Xl[Kl++]=_f,_f=e,Nf=t}function H_(e,t,r){js[Cs++]=$a,js[Cs++]=Va,js[Cs++]=$o,$o=e;var s=$a;e=Va;var a=32-ta(s)-1;s&=~(1<<a),r+=1;var o=32-ta(t)+a;if(30<o){var c=a-a%5;o=(s&(1<<c)-1).toString(32),s>>=c,a-=c,$a=1<<32-ta(t)+a|r<<a|s,Va=o+e}else $a=1<<o|r<<a|s,Va=e}function X0(e){e.return!==null&&(yo(e,1),H_(e,1,0))}function K0(e){for(;e===_f;)_f=Xl[--Kl],Xl[Kl]=null,Nf=Xl[--Kl],Xl[Kl]=null;for(;e===$o;)$o=js[--Cs],js[Cs]=null,Va=js[--Cs],js[Cs]=null,$a=js[--Cs],js[Cs]=null}var cs=null,ss=null,mr=!1,Qs=null;function G_(e,t){var r=As(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Lw(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,cs=e,ss=Di(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,cs=e,ss=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=$o!==null?{id:$a,overflow:Va}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=As(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,cs=e,ss=null,!0):!1;default:return!1}}function cx(e){return(e.mode&1)!==0&&(e.flags&128)===0}function dx(e){if(mr){var t=ss;if(t){var r=t;if(!Lw(e,t)){if(cx(e))throw Error(Oe(418));t=Di(r.nextSibling);var s=cs;t&&Lw(e,t)?G_(s,r):(e.flags=e.flags&-4097|2,mr=!1,cs=e)}}else{if(cx(e))throw Error(Oe(418));e.flags=e.flags&-4097|2,mr=!1,cs=e}}}function Fw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;cs=e}function wh(e){if(e!==cs)return!1;if(!mr)return Fw(e),mr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ax(e.type,e.memoizedProps)),t&&(t=ss)){if(cx(e))throw X_(),Error(Oe(418));for(;t;)G_(e,t),t=Di(t.nextSibling)}if(Fw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Oe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ss=Di(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ss=null}}else ss=cs?Di(e.stateNode.nextSibling):null;return!0}function X_(){for(var e=ss;e;)e=Di(e.nextSibling)}function _c(){ss=cs=null,mr=!1}function Y0(e){Qs===null?Qs=[e]:Qs.push(e)}var eR=ei.ReactCurrentBatchConfig;function dd(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Oe(309));var s=r.stateNode}if(!s)throw Error(Oe(147,e));var a=s,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(c){var u=a.refs;c===null?delete u[o]:u[o]=c},t._stringRef=o,t)}if(typeof e!="string")throw Error(Oe(284));if(!r._owner)throw Error(Oe(290,e))}return e}function yh(e,t){throw e=Object.prototype.toString.call(t),Error(Oe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Bw(e){var t=e._init;return t(e._payload)}function K_(e){function t(E,S){if(e){var b=E.deletions;b===null?(E.deletions=[S],E.flags|=16):b.push(S)}}function r(E,S){if(!e)return null;for(;S!==null;)t(E,S),S=S.sibling;return null}function s(E,S){for(E=new Map;S!==null;)S.key!==null?E.set(S.key,S):E.set(S.index,S),S=S.sibling;return E}function a(E,S){return E=Bi(E,S),E.index=0,E.sibling=null,E}function o(E,S,b){return E.index=b,e?(b=E.alternate,b!==null?(b=b.index,b<S?(E.flags|=2,S):b):(E.flags|=2,S)):(E.flags|=1048576,S)}function c(E){return e&&E.alternate===null&&(E.flags|=2),E}function u(E,S,b,k){return S===null||S.tag!==6?(S=sg(b,E.mode,k),S.return=E,S):(S=a(S,b),S.return=E,S)}function f(E,S,b,k){var O=b.type;return O===$l?x(E,S,b.props.children,k,b.key):S!==null&&(S.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===vi&&Bw(O)===S.type)?(k=a(S,b.props),k.ref=dd(E,S,b),k.return=E,k):(k=Qh(b.type,b.key,b.props,null,E.mode,k),k.ref=dd(E,S,b),k.return=E,k)}function p(E,S,b,k){return S===null||S.tag!==4||S.stateNode.containerInfo!==b.containerInfo||S.stateNode.implementation!==b.implementation?(S=ag(b,E.mode,k),S.return=E,S):(S=a(S,b.children||[]),S.return=E,S)}function x(E,S,b,k,O){return S===null||S.tag!==7?(S=Fo(b,E.mode,k,O),S.return=E,S):(S=a(S,b),S.return=E,S)}function w(E,S,b){if(typeof S=="string"&&S!==""||typeof S=="number")return S=sg(""+S,E.mode,b),S.return=E,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ch:return b=Qh(S.type,S.key,S.props,null,E.mode,b),b.ref=dd(E,null,S),b.return=E,b;case Ul:return S=ag(S,E.mode,b),S.return=E,S;case vi:var k=S._init;return w(E,k(S._payload),b)}if(yd(S)||ad(S))return S=Fo(S,E.mode,b,null),S.return=E,S;yh(E,S)}return null}function _(E,S,b,k){var O=S!==null?S.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return O!==null?null:u(E,S,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ch:return b.key===O?f(E,S,b,k):null;case Ul:return b.key===O?p(E,S,b,k):null;case vi:return O=b._init,_(E,S,O(b._payload),k)}if(yd(b)||ad(b))return O!==null?null:x(E,S,b,k,null);yh(E,b)}return null}function j(E,S,b,k,O){if(typeof k=="string"&&k!==""||typeof k=="number")return E=E.get(b)||null,u(S,E,""+k,O);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case ch:return E=E.get(k.key===null?b:k.key)||null,f(S,E,k,O);case Ul:return E=E.get(k.key===null?b:k.key)||null,p(S,E,k,O);case vi:var L=k._init;return j(E,S,b,L(k._payload),O)}if(yd(k)||ad(k))return E=E.get(b)||null,x(S,E,k,O,null);yh(S,k)}return null}function N(E,S,b,k){for(var O=null,L=null,P=S,M=S=0,R=null;P!==null&&M<b.length;M++){P.index>M?(R=P,P=null):R=P.sibling;var $=_(E,P,b[M],k);if($===null){P===null&&(P=R);break}e&&P&&$.alternate===null&&t(E,P),S=o($,S,M),L===null?O=$:L.sibling=$,L=$,P=R}if(M===b.length)return r(E,P),mr&&yo(E,M),O;if(P===null){for(;M<b.length;M++)P=w(E,b[M],k),P!==null&&(S=o(P,S,M),L===null?O=P:L.sibling=P,L=P);return mr&&yo(E,M),O}for(P=s(E,P);M<b.length;M++)R=j(P,E,M,b[M],k),R!==null&&(e&&R.alternate!==null&&P.delete(R.key===null?M:R.key),S=o(R,S,M),L===null?O=R:L.sibling=R,L=R);return e&&P.forEach(function(Y){return t(E,Y)}),mr&&yo(E,M),O}function C(E,S,b,k){var O=ad(b);if(typeof O!="function")throw Error(Oe(150));if(b=O.call(b),b==null)throw Error(Oe(151));for(var L=O=null,P=S,M=S=0,R=null,$=b.next();P!==null&&!$.done;M++,$=b.next()){P.index>M?(R=P,P=null):R=P.sibling;var Y=_(E,P,$.value,k);if(Y===null){P===null&&(P=R);break}e&&P&&Y.alternate===null&&t(E,P),S=o(Y,S,M),L===null?O=Y:L.sibling=Y,L=Y,P=R}if($.done)return r(E,P),mr&&yo(E,M),O;if(P===null){for(;!$.done;M++,$=b.next())$=w(E,$.value,k),$!==null&&(S=o($,S,M),L===null?O=$:L.sibling=$,L=$);return mr&&yo(E,M),O}for(P=s(E,P);!$.done;M++,$=b.next())$=j(P,E,M,$.value,k),$!==null&&(e&&$.alternate!==null&&P.delete($.key===null?M:$.key),S=o($,S,M),L===null?O=$:L.sibling=$,L=$);return e&&P.forEach(function(z){return t(E,z)}),mr&&yo(E,M),O}function T(E,S,b,k){if(typeof b=="object"&&b!==null&&b.type===$l&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case ch:e:{for(var O=b.key,L=S;L!==null;){if(L.key===O){if(O=b.type,O===$l){if(L.tag===7){r(E,L.sibling),S=a(L,b.props.children),S.return=E,E=S;break e}}else if(L.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===vi&&Bw(O)===L.type){r(E,L.sibling),S=a(L,b.props),S.ref=dd(E,L,b),S.return=E,E=S;break e}r(E,L);break}else t(E,L);L=L.sibling}b.type===$l?(S=Fo(b.props.children,E.mode,k,b.key),S.return=E,E=S):(k=Qh(b.type,b.key,b.props,null,E.mode,k),k.ref=dd(E,S,b),k.return=E,E=k)}return c(E);case Ul:e:{for(L=b.key;S!==null;){if(S.key===L)if(S.tag===4&&S.stateNode.containerInfo===b.containerInfo&&S.stateNode.implementation===b.implementation){r(E,S.sibling),S=a(S,b.children||[]),S.return=E,E=S;break e}else{r(E,S);break}else t(E,S);S=S.sibling}S=ag(b,E.mode,k),S.return=E,E=S}return c(E);case vi:return L=b._init,T(E,S,L(b._payload),k)}if(yd(b))return N(E,S,b,k);if(ad(b))return C(E,S,b,k);yh(E,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,S!==null&&S.tag===6?(r(E,S.sibling),S=a(S,b),S.return=E,E=S):(r(E,S),S=sg(b,E.mode,k),S.return=E,E=S),c(E)):r(E,S)}return T}var Nc=K_(!0),Y_=K_(!1),jf=ro(null),Cf=null,Yl=null,Q0=null;function Z0(){Q0=Yl=Cf=null}function J0(e){var t=jf.current;dr(jf),e._currentValue=t}function ux(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function sc(e,t){Cf=e,Q0=Yl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Vn=!0),e.firstContext=null)}function Rs(e){var t=e._currentValue;if(Q0!==e)if(e={context:e,memoizedValue:t,next:null},Yl===null){if(Cf===null)throw Error(Oe(308));Yl=e,Cf.dependencies={lanes:0,firstContext:e}}else Yl=Yl.next=e;return t}var Ao=null;function e1(e){Ao===null?Ao=[e]:Ao.push(e)}function Q_(e,t,r,s){var a=t.interleaved;return a===null?(r.next=r,e1(t)):(r.next=a.next,a.next=r),t.interleaved=r,Xa(e,s)}function Xa(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var wi=!1;function t1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Z_(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Wa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mi(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Lt&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,Xa(e,r)}return a=s.interleaved,a===null?(t.next=t,e1(s)):(t.next=a.next,a.next=t),s.interleaved=t,Xa(e,r)}function Wh(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,z0(e,r)}}function zw(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var c={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?a=o=c:o=o.next=c,r=r.next}while(r!==null);o===null?a=o=t:o=o.next=t}else a=o=t;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ef(e,t,r,s){var a=e.updateQueue;wi=!1;var o=a.firstBaseUpdate,c=a.lastBaseUpdate,u=a.shared.pending;if(u!==null){a.shared.pending=null;var f=u,p=f.next;f.next=null,c===null?o=p:c.next=p,c=f;var x=e.alternate;x!==null&&(x=x.updateQueue,u=x.lastBaseUpdate,u!==c&&(u===null?x.firstBaseUpdate=p:u.next=p,x.lastBaseUpdate=f))}if(o!==null){var w=a.baseState;c=0,x=p=f=null,u=o;do{var _=u.lane,j=u.eventTime;if((s&_)===_){x!==null&&(x=x.next={eventTime:j,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var N=e,C=u;switch(_=t,j=r,C.tag){case 1:if(N=C.payload,typeof N=="function"){w=N.call(j,w,_);break e}w=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=C.payload,_=typeof N=="function"?N.call(j,w,_):N,_==null)break e;w=yr({},w,_);break e;case 2:wi=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,_=a.effects,_===null?a.effects=[u]:_.push(u))}else j={eventTime:j,lane:_,tag:u.tag,payload:u.payload,callback:u.callback,next:null},x===null?(p=x=j,f=w):x=x.next=j,c|=_;if(u=u.next,u===null){if(u=a.shared.pending,u===null)break;_=u,u=_.next,_.next=null,a.lastBaseUpdate=_,a.shared.pending=null}}while(!0);if(x===null&&(f=w),a.baseState=f,a.firstBaseUpdate=p,a.lastBaseUpdate=x,t=a.shared.interleaved,t!==null){a=t;do c|=a.lane,a=a.next;while(a!==t)}else o===null&&(a.shared.lanes=0);qo|=c,e.lanes=c,e.memoizedState=w}}function Uw(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(Oe(191,a));a.call(s)}}}var Su={},Sa=ro(Su),Qd=ro(Su),Zd=ro(Su);function ko(e){if(e===Su)throw Error(Oe(174));return e}function r1(e,t){switch(nr(Zd,t),nr(Qd,e),nr(Sa,Su),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Wg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Wg(t,e)}dr(Sa),nr(Sa,t)}function jc(){dr(Sa),dr(Qd),dr(Zd)}function J_(e){ko(Zd.current);var t=ko(Sa.current),r=Wg(t,e.type);t!==r&&(nr(Qd,e),nr(Sa,r))}function n1(e){Qd.current===e&&(dr(Sa),dr(Qd))}var gr=ro(0);function Sf(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Zp=[];function s1(){for(var e=0;e<Zp.length;e++)Zp[e]._workInProgressVersionPrimary=null;Zp.length=0}var Hh=ei.ReactCurrentDispatcher,Jp=ei.ReactCurrentBatchConfig,Vo=0,wr=null,$r=null,Qr=null,Af=!1,Id=!1,Jd=0,tR=0;function xn(){throw Error(Oe(321))}function a1(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!na(e[r],t[r]))return!1;return!0}function i1(e,t,r,s,a,o){if(Vo=o,wr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Hh.current=e===null||e.memoizedState===null?aR:iR,e=r(s,a),Id){o=0;do{if(Id=!1,Jd=0,25<=o)throw Error(Oe(301));o+=1,Qr=$r=null,t.updateQueue=null,Hh.current=oR,e=r(s,a)}while(Id)}if(Hh.current=kf,t=$r!==null&&$r.next!==null,Vo=0,Qr=$r=wr=null,Af=!1,t)throw Error(Oe(300));return e}function o1(){var e=Jd!==0;return Jd=0,e}function ma(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qr===null?wr.memoizedState=Qr=e:Qr=Qr.next=e,Qr}function Ps(){if($r===null){var e=wr.alternate;e=e!==null?e.memoizedState:null}else e=$r.next;var t=Qr===null?wr.memoizedState:Qr.next;if(t!==null)Qr=t,$r=e;else{if(e===null)throw Error(Oe(310));$r=e,e={memoizedState:$r.memoizedState,baseState:$r.baseState,baseQueue:$r.baseQueue,queue:$r.queue,next:null},Qr===null?wr.memoizedState=Qr=e:Qr=Qr.next=e}return Qr}function eu(e,t){return typeof t=="function"?t(e):t}function eg(e){var t=Ps(),r=t.queue;if(r===null)throw Error(Oe(311));r.lastRenderedReducer=e;var s=$r,a=s.baseQueue,o=r.pending;if(o!==null){if(a!==null){var c=a.next;a.next=o.next,o.next=c}s.baseQueue=a=o,r.pending=null}if(a!==null){o=a.next,s=s.baseState;var u=c=null,f=null,p=o;do{var x=p.lane;if((Vo&x)===x)f!==null&&(f=f.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),s=p.hasEagerState?p.eagerState:e(s,p.action);else{var w={lane:x,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};f===null?(u=f=w,c=s):f=f.next=w,wr.lanes|=x,qo|=x}p=p.next}while(p!==null&&p!==o);f===null?c=s:f.next=u,na(s,t.memoizedState)||(Vn=!0),t.memoizedState=s,t.baseState=c,t.baseQueue=f,r.lastRenderedState=s}if(e=r.interleaved,e!==null){a=e;do o=a.lane,wr.lanes|=o,qo|=o,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function tg(e){var t=Ps(),r=t.queue;if(r===null)throw Error(Oe(311));r.lastRenderedReducer=e;var s=r.dispatch,a=r.pending,o=t.memoizedState;if(a!==null){r.pending=null;var c=a=a.next;do o=e(o,c.action),c=c.next;while(c!==a);na(o,t.memoizedState)||(Vn=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,s]}function eN(){}function tN(e,t){var r=wr,s=Ps(),a=t(),o=!na(s.memoizedState,a);if(o&&(s.memoizedState=a,Vn=!0),s=s.queue,l1(sN.bind(null,r,s,e),[e]),s.getSnapshot!==t||o||Qr!==null&&Qr.memoizedState.tag&1){if(r.flags|=2048,tu(9,nN.bind(null,r,s,a,t),void 0,null),Zr===null)throw Error(Oe(349));Vo&30||rN(r,t,a)}return a}function rN(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=wr.updateQueue,t===null?(t={lastEffect:null,stores:null},wr.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function nN(e,t,r,s){t.value=r,t.getSnapshot=s,aN(t)&&iN(e)}function sN(e,t,r){return r(function(){aN(t)&&iN(e)})}function aN(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!na(e,r)}catch{return!0}}function iN(e){var t=Xa(e,1);t!==null&&ra(t,e,1,-1)}function $w(e){var t=ma();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:eu,lastRenderedState:e},t.queue=e,e=e.dispatch=sR.bind(null,wr,e),[t.memoizedState,e]}function tu(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=wr.updateQueue,t===null?(t={lastEffect:null,stores:null},wr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function oN(){return Ps().memoizedState}function Gh(e,t,r,s){var a=ma();wr.flags|=e,a.memoizedState=tu(1|t,r,void 0,s===void 0?null:s)}function dm(e,t,r,s){var a=Ps();s=s===void 0?null:s;var o=void 0;if($r!==null){var c=$r.memoizedState;if(o=c.destroy,s!==null&&a1(s,c.deps)){a.memoizedState=tu(t,r,o,s);return}}wr.flags|=e,a.memoizedState=tu(1|t,r,o,s)}function Vw(e,t){return Gh(8390656,8,e,t)}function l1(e,t){return dm(2048,8,e,t)}function lN(e,t){return dm(4,2,e,t)}function cN(e,t){return dm(4,4,e,t)}function dN(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function uN(e,t,r){return r=r!=null?r.concat([e]):null,dm(4,4,dN.bind(null,t,e),r)}function c1(){}function hN(e,t){var r=Ps();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&a1(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function fN(e,t){var r=Ps();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&a1(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function mN(e,t,r){return Vo&21?(na(r,t)||(r=w_(),wr.lanes|=r,qo|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Vn=!0),e.memoizedState=r)}function rR(e,t){var r=Xt;Xt=r!==0&&4>r?r:4,e(!0);var s=Jp.transition;Jp.transition={};try{e(!1),t()}finally{Xt=r,Jp.transition=s}}function pN(){return Ps().memoizedState}function nR(e,t,r){var s=Fi(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},gN(e))xN(t,r);else if(r=Q_(e,t,r,s),r!==null){var a=En();ra(r,e,s,a),vN(r,t,s)}}function sR(e,t,r){var s=Fi(e),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(gN(e))xN(t,a);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var c=t.lastRenderedState,u=o(c,r);if(a.hasEagerState=!0,a.eagerState=u,na(u,c)){var f=t.interleaved;f===null?(a.next=a,e1(t)):(a.next=f.next,f.next=a),t.interleaved=a;return}}catch{}finally{}r=Q_(e,t,a,s),r!==null&&(a=En(),ra(r,e,s,a),vN(r,t,s))}}function gN(e){var t=e.alternate;return e===wr||t!==null&&t===wr}function xN(e,t){Id=Af=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function vN(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,z0(e,r)}}var kf={readContext:Rs,useCallback:xn,useContext:xn,useEffect:xn,useImperativeHandle:xn,useInsertionEffect:xn,useLayoutEffect:xn,useMemo:xn,useReducer:xn,useRef:xn,useState:xn,useDebugValue:xn,useDeferredValue:xn,useTransition:xn,useMutableSource:xn,useSyncExternalStore:xn,useId:xn,unstable_isNewReconciler:!1},aR={readContext:Rs,useCallback:function(e,t){return ma().memoizedState=[e,t===void 0?null:t],e},useContext:Rs,useEffect:Vw,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Gh(4194308,4,dN.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Gh(4194308,4,e,t)},useInsertionEffect:function(e,t){return Gh(4,2,e,t)},useMemo:function(e,t){var r=ma();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=ma();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=nR.bind(null,wr,e),[s.memoizedState,e]},useRef:function(e){var t=ma();return e={current:e},t.memoizedState=e},useState:$w,useDebugValue:c1,useDeferredValue:function(e){return ma().memoizedState=e},useTransition:function(){var e=$w(!1),t=e[0];return e=rR.bind(null,e[1]),ma().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=wr,a=ma();if(mr){if(r===void 0)throw Error(Oe(407));r=r()}else{if(r=t(),Zr===null)throw Error(Oe(349));Vo&30||rN(s,t,r)}a.memoizedState=r;var o={value:r,getSnapshot:t};return a.queue=o,Vw(sN.bind(null,s,o,e),[e]),s.flags|=2048,tu(9,nN.bind(null,s,o,r,t),void 0,null),r},useId:function(){var e=ma(),t=Zr.identifierPrefix;if(mr){var r=Va,s=$a;r=(s&~(1<<32-ta(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=Jd++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=tR++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},iR={readContext:Rs,useCallback:hN,useContext:Rs,useEffect:l1,useImperativeHandle:uN,useInsertionEffect:lN,useLayoutEffect:cN,useMemo:fN,useReducer:eg,useRef:oN,useState:function(){return eg(eu)},useDebugValue:c1,useDeferredValue:function(e){var t=Ps();return mN(t,$r.memoizedState,e)},useTransition:function(){var e=eg(eu)[0],t=Ps().memoizedState;return[e,t]},useMutableSource:eN,useSyncExternalStore:tN,useId:pN,unstable_isNewReconciler:!1},oR={readContext:Rs,useCallback:hN,useContext:Rs,useEffect:l1,useImperativeHandle:uN,useInsertionEffect:lN,useLayoutEffect:cN,useMemo:fN,useReducer:tg,useRef:oN,useState:function(){return tg(eu)},useDebugValue:c1,useDeferredValue:function(e){var t=Ps();return $r===null?t.memoizedState=e:mN(t,$r.memoizedState,e)},useTransition:function(){var e=tg(eu)[0],t=Ps().memoizedState;return[e,t]},useMutableSource:eN,useSyncExternalStore:tN,useId:pN,unstable_isNewReconciler:!1};function Ws(e,t){if(e&&e.defaultProps){t=yr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function hx(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:yr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var um={isMounted:function(e){return(e=e._reactInternals)?ol(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=En(),a=Fi(e),o=Wa(s,a);o.payload=t,r!=null&&(o.callback=r),t=Mi(e,o,a),t!==null&&(ra(t,e,a,s),Wh(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=En(),a=Fi(e),o=Wa(s,a);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=Mi(e,o,a),t!==null&&(ra(t,e,a,s),Wh(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=En(),s=Fi(e),a=Wa(r,s);a.tag=2,t!=null&&(a.callback=t),t=Mi(e,a,s),t!==null&&(ra(t,e,s,r),Wh(t,e,s))}};function qw(e,t,r,s,a,o,c){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,o,c):t.prototype&&t.prototype.isPureReactComponent?!Gd(r,s)||!Gd(a,o):!0}function wN(e,t,r){var s=!1,a=Vi,o=t.contextType;return typeof o=="object"&&o!==null?o=Rs(o):(a=Wn(t)?Uo:yn.current,s=t.contextTypes,o=(s=s!=null)?bc(e,a):Vi),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=um,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ww(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&um.enqueueReplaceState(t,t.state,null)}function fx(e,t,r,s){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},t1(e);var o=t.contextType;typeof o=="object"&&o!==null?a.context=Rs(o):(o=Wn(t)?Uo:yn.current,a.context=bc(e,o)),a.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(hx(e,t,o,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&um.enqueueReplaceState(a,a.state,null),Ef(e,r,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Cc(e,t){try{var r="",s=t;do r+=DT(s),s=s.return;while(s);var a=r}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:a,digest:null}}function rg(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function mx(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var lR=typeof WeakMap=="function"?WeakMap:Map;function yN(e,t,r){r=Wa(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){If||(If=!0,jx=s),mx(e,t)},r}function bN(e,t,r){r=Wa(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;r.payload=function(){return s(a)},r.callback=function(){mx(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){mx(e,t),typeof s!="function"&&(Li===null?Li=new Set([this]):Li.add(this));var c=t.stack;this.componentDidCatch(t.value,{componentStack:c!==null?c:""})}),r}function Hw(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new lR;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(r)||(a.add(r),e=_R.bind(null,e,t,r),t.then(e,e))}function Gw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Xw(e,t,r,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Wa(-1,1),t.tag=2,Mi(r,t,1))),r.lanes|=1),e)}var cR=ei.ReactCurrentOwner,Vn=!1;function Nn(e,t,r,s){t.child=e===null?Y_(t,null,r,s):Nc(t,e.child,r,s)}function Kw(e,t,r,s,a){r=r.render;var o=t.ref;return sc(t,a),s=i1(e,t,r,s,o,a),r=o1(),e!==null&&!Vn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ka(e,t,a)):(mr&&r&&X0(t),t.flags|=1,Nn(e,t,s,a),t.child)}function Yw(e,t,r,s,a){if(e===null){var o=r.type;return typeof o=="function"&&!x1(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,_N(e,t,o,s,a)):(e=Qh(r.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&a)){var c=o.memoizedProps;if(r=r.compare,r=r!==null?r:Gd,r(c,s)&&e.ref===t.ref)return Ka(e,t,a)}return t.flags|=1,e=Bi(o,s),e.ref=t.ref,e.return=t,t.child=e}function _N(e,t,r,s,a){if(e!==null){var o=e.memoizedProps;if(Gd(o,s)&&e.ref===t.ref)if(Vn=!1,t.pendingProps=s=o,(e.lanes&a)!==0)e.flags&131072&&(Vn=!0);else return t.lanes=e.lanes,Ka(e,t,a)}return px(e,t,r,s,a)}function NN(e,t,r){var s=t.pendingProps,a=s.children,o=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},nr(Zl,ts),ts|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,nr(Zl,ts),ts|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=o!==null?o.baseLanes:r,nr(Zl,ts),ts|=s}else o!==null?(s=o.baseLanes|r,t.memoizedState=null):s=r,nr(Zl,ts),ts|=s;return Nn(e,t,a,r),t.child}function jN(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function px(e,t,r,s,a){var o=Wn(r)?Uo:yn.current;return o=bc(t,o),sc(t,a),r=i1(e,t,r,s,o,a),s=o1(),e!==null&&!Vn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ka(e,t,a)):(mr&&s&&X0(t),t.flags|=1,Nn(e,t,r,a),t.child)}function Qw(e,t,r,s,a){if(Wn(r)){var o=!0;bf(t)}else o=!1;if(sc(t,a),t.stateNode===null)Xh(e,t),wN(t,r,s),fx(t,r,s,a),s=!0;else if(e===null){var c=t.stateNode,u=t.memoizedProps;c.props=u;var f=c.context,p=r.contextType;typeof p=="object"&&p!==null?p=Rs(p):(p=Wn(r)?Uo:yn.current,p=bc(t,p));var x=r.getDerivedStateFromProps,w=typeof x=="function"||typeof c.getSnapshotBeforeUpdate=="function";w||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(u!==s||f!==p)&&Ww(t,c,s,p),wi=!1;var _=t.memoizedState;c.state=_,Ef(t,s,c,a),f=t.memoizedState,u!==s||_!==f||qn.current||wi?(typeof x=="function"&&(hx(t,r,x,s),f=t.memoizedState),(u=wi||qw(t,r,u,s,_,f,p))?(w||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=f),c.props=s,c.state=f,c.context=p,s=u):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{c=t.stateNode,Z_(e,t),u=t.memoizedProps,p=t.type===t.elementType?u:Ws(t.type,u),c.props=p,w=t.pendingProps,_=c.context,f=r.contextType,typeof f=="object"&&f!==null?f=Rs(f):(f=Wn(r)?Uo:yn.current,f=bc(t,f));var j=r.getDerivedStateFromProps;(x=typeof j=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(u!==w||_!==f)&&Ww(t,c,s,f),wi=!1,_=t.memoizedState,c.state=_,Ef(t,s,c,a);var N=t.memoizedState;u!==w||_!==N||qn.current||wi?(typeof j=="function"&&(hx(t,r,j,s),N=t.memoizedState),(p=wi||qw(t,r,p,s,_,N,f)||!1)?(x||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(s,N,f),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(s,N,f)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||u===e.memoizedProps&&_===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&_===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=N),c.props=s,c.state=N,c.context=f,s=p):(typeof c.componentDidUpdate!="function"||u===e.memoizedProps&&_===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&_===e.memoizedState||(t.flags|=1024),s=!1)}return gx(e,t,r,s,o,a)}function gx(e,t,r,s,a,o){jN(e,t);var c=(t.flags&128)!==0;if(!s&&!c)return a&&Mw(t,r,!1),Ka(e,t,o);s=t.stateNode,cR.current=t;var u=c&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&c?(t.child=Nc(t,e.child,null,o),t.child=Nc(t,null,u,o)):Nn(e,t,u,o),t.memoizedState=s.state,a&&Mw(t,r,!0),t.child}function CN(e){var t=e.stateNode;t.pendingContext?Dw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Dw(e,t.context,!1),r1(e,t.containerInfo)}function Zw(e,t,r,s,a){return _c(),Y0(a),t.flags|=256,Nn(e,t,r,s),t.child}var xx={dehydrated:null,treeContext:null,retryLane:0};function vx(e){return{baseLanes:e,cachePool:null,transitions:null}}function EN(e,t,r){var s=t.pendingProps,a=gr.current,o=!1,c=(t.flags&128)!==0,u;if((u=c)||(u=e!==null&&e.memoizedState===null?!1:(a&2)!==0),u?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),nr(gr,a&1),e===null)return dx(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(c=s.children,e=s.fallback,o?(s=t.mode,o=t.child,c={mode:"hidden",children:c},!(s&1)&&o!==null?(o.childLanes=0,o.pendingProps=c):o=mm(c,s,0,null),e=Fo(e,s,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=vx(r),t.memoizedState=xx,e):d1(t,c));if(a=e.memoizedState,a!==null&&(u=a.dehydrated,u!==null))return dR(e,t,c,s,u,a,r);if(o){o=s.fallback,c=t.mode,a=e.child,u=a.sibling;var f={mode:"hidden",children:s.children};return!(c&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=f,t.deletions=null):(s=Bi(a,f),s.subtreeFlags=a.subtreeFlags&14680064),u!==null?o=Bi(u,o):(o=Fo(o,c,r,null),o.flags|=2),o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,c=e.child.memoizedState,c=c===null?vx(r):{baseLanes:c.baseLanes|r,cachePool:null,transitions:c.transitions},o.memoizedState=c,o.childLanes=e.childLanes&~r,t.memoizedState=xx,s}return o=e.child,e=o.sibling,s=Bi(o,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function d1(e,t){return t=mm({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function bh(e,t,r,s){return s!==null&&Y0(s),Nc(t,e.child,null,r),e=d1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function dR(e,t,r,s,a,o,c){if(r)return t.flags&256?(t.flags&=-257,s=rg(Error(Oe(422))),bh(e,t,c,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=s.fallback,a=t.mode,s=mm({mode:"visible",children:s.children},a,0,null),o=Fo(o,a,c,null),o.flags|=2,s.return=t,o.return=t,s.sibling=o,t.child=s,t.mode&1&&Nc(t,e.child,null,c),t.child.memoizedState=vx(c),t.memoizedState=xx,o);if(!(t.mode&1))return bh(e,t,c,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var u=s.dgst;return s=u,o=Error(Oe(419)),s=rg(o,s,void 0),bh(e,t,c,s)}if(u=(c&e.childLanes)!==0,Vn||u){if(s=Zr,s!==null){switch(c&-c){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|c)?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,Xa(e,a),ra(s,e,a,-1))}return g1(),s=rg(Error(Oe(421))),bh(e,t,c,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=NR.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,ss=Di(a.nextSibling),cs=t,mr=!0,Qs=null,e!==null&&(js[Cs++]=$a,js[Cs++]=Va,js[Cs++]=$o,$a=e.id,Va=e.overflow,$o=t),t=d1(t,s.children),t.flags|=4096,t)}function Jw(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),ux(e.return,t,r)}function ng(e,t,r,s,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=r,o.tailMode=a)}function SN(e,t,r){var s=t.pendingProps,a=s.revealOrder,o=s.tail;if(Nn(e,t,s.children,r),s=gr.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Jw(e,r,t);else if(e.tag===19)Jw(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(nr(gr,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Sf(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),ng(t,!1,a,r,o);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Sf(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}ng(t,!0,r,null,o);break;case"together":ng(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xh(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ka(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),qo|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Oe(153));if(t.child!==null){for(e=t.child,r=Bi(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Bi(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function uR(e,t,r){switch(t.tag){case 3:CN(t),_c();break;case 5:J_(t);break;case 1:Wn(t.type)&&bf(t);break;case 4:r1(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;nr(jf,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(nr(gr,gr.current&1),t.flags|=128,null):r&t.child.childLanes?EN(e,t,r):(nr(gr,gr.current&1),e=Ka(e,t,r),e!==null?e.sibling:null);nr(gr,gr.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return SN(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),nr(gr,gr.current),s)break;return null;case 22:case 23:return t.lanes=0,NN(e,t,r)}return Ka(e,t,r)}var AN,wx,kN,TN;AN=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};wx=function(){};kN=function(e,t,r,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,ko(Sa.current);var o=null;switch(r){case"input":a=Ug(e,a),s=Ug(e,s),o=[];break;case"select":a=yr({},a,{value:void 0}),s=yr({},s,{value:void 0}),o=[];break;case"textarea":a=qg(e,a),s=qg(e,s),o=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=wf)}Hg(r,s);var c;r=null;for(p in a)if(!s.hasOwnProperty(p)&&a.hasOwnProperty(p)&&a[p]!=null)if(p==="style"){var u=a[p];for(c in u)u.hasOwnProperty(c)&&(r||(r={}),r[c]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(zd.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in s){var f=s[p];if(u=a!=null?a[p]:void 0,s.hasOwnProperty(p)&&f!==u&&(f!=null||u!=null))if(p==="style")if(u){for(c in u)!u.hasOwnProperty(c)||f&&f.hasOwnProperty(c)||(r||(r={}),r[c]="");for(c in f)f.hasOwnProperty(c)&&u[c]!==f[c]&&(r||(r={}),r[c]=f[c])}else r||(o||(o=[]),o.push(p,r)),r=f;else p==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,u=u?u.__html:void 0,f!=null&&u!==f&&(o=o||[]).push(p,f)):p==="children"?typeof f!="string"&&typeof f!="number"||(o=o||[]).push(p,""+f):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(zd.hasOwnProperty(p)?(f!=null&&p==="onScroll"&&lr("scroll",e),o||u===f||(o=[])):(o=o||[]).push(p,f))}r&&(o=o||[]).push("style",r);var p=o;(t.updateQueue=p)&&(t.flags|=4)}};TN=function(e,t,r,s){r!==s&&(t.flags|=4)};function ud(e,t){if(!mr)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function vn(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function hR(e,t,r){var s=t.pendingProps;switch(K0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(t),null;case 1:return Wn(t.type)&&yf(),vn(t),null;case 3:return s=t.stateNode,jc(),dr(qn),dr(yn),s1(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(wh(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Qs!==null&&(Sx(Qs),Qs=null))),wx(e,t),vn(t),null;case 5:n1(t);var a=ko(Zd.current);if(r=t.type,e!==null&&t.stateNode!=null)kN(e,t,r,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(Oe(166));return vn(t),null}if(e=ko(Sa.current),wh(t)){s=t.stateNode,r=t.type;var o=t.memoizedProps;switch(s[wa]=t,s[Yd]=o,e=(t.mode&1)!==0,r){case"dialog":lr("cancel",s),lr("close",s);break;case"iframe":case"object":case"embed":lr("load",s);break;case"video":case"audio":for(a=0;a<_d.length;a++)lr(_d[a],s);break;case"source":lr("error",s);break;case"img":case"image":case"link":lr("error",s),lr("load",s);break;case"details":lr("toggle",s);break;case"input":lw(s,o),lr("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!o.multiple},lr("invalid",s);break;case"textarea":dw(s,o),lr("invalid",s)}Hg(r,o),a=null;for(var c in o)if(o.hasOwnProperty(c)){var u=o[c];c==="children"?typeof u=="string"?s.textContent!==u&&(o.suppressHydrationWarning!==!0&&vh(s.textContent,u,e),a=["children",u]):typeof u=="number"&&s.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&vh(s.textContent,u,e),a=["children",""+u]):zd.hasOwnProperty(c)&&u!=null&&c==="onScroll"&&lr("scroll",s)}switch(r){case"input":dh(s),cw(s,o,!0);break;case"textarea":dh(s),uw(s);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(s.onclick=wf)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{c=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=s_(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=c.createElement(r,{is:s.is}):(e=c.createElement(r),r==="select"&&(c=e,s.multiple?c.multiple=!0:s.size&&(c.size=s.size))):e=c.createElementNS(e,r),e[wa]=t,e[Yd]=s,AN(e,t,!1,!1),t.stateNode=e;e:{switch(c=Gg(r,s),r){case"dialog":lr("cancel",e),lr("close",e),a=s;break;case"iframe":case"object":case"embed":lr("load",e),a=s;break;case"video":case"audio":for(a=0;a<_d.length;a++)lr(_d[a],e);a=s;break;case"source":lr("error",e),a=s;break;case"img":case"image":case"link":lr("error",e),lr("load",e),a=s;break;case"details":lr("toggle",e),a=s;break;case"input":lw(e,s),a=Ug(e,s),lr("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=yr({},s,{value:void 0}),lr("invalid",e);break;case"textarea":dw(e,s),a=qg(e,s),lr("invalid",e);break;default:a=s}Hg(r,a),u=a;for(o in u)if(u.hasOwnProperty(o)){var f=u[o];o==="style"?o_(e,f):o==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&a_(e,f)):o==="children"?typeof f=="string"?(r!=="textarea"||f!=="")&&Ud(e,f):typeof f=="number"&&Ud(e,""+f):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(zd.hasOwnProperty(o)?f!=null&&o==="onScroll"&&lr("scroll",e):f!=null&&O0(e,o,f,c))}switch(r){case"input":dh(e),cw(e,s,!1);break;case"textarea":dh(e),uw(e);break;case"option":s.value!=null&&e.setAttribute("value",""+$i(s.value));break;case"select":e.multiple=!!s.multiple,o=s.value,o!=null?ec(e,!!s.multiple,o,!1):s.defaultValue!=null&&ec(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=wf)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return vn(t),null;case 6:if(e&&t.stateNode!=null)TN(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(Oe(166));if(r=ko(Zd.current),ko(Sa.current),wh(t)){if(s=t.stateNode,r=t.memoizedProps,s[wa]=t,(o=s.nodeValue!==r)&&(e=cs,e!==null))switch(e.tag){case 3:vh(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&vh(s.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[wa]=t,t.stateNode=s}return vn(t),null;case 13:if(dr(gr),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(mr&&ss!==null&&t.mode&1&&!(t.flags&128))X_(),_c(),t.flags|=98560,o=!1;else if(o=wh(t),s!==null&&s.dehydrated!==null){if(e===null){if(!o)throw Error(Oe(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Oe(317));o[wa]=t}else _c(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;vn(t),o=!1}else Qs!==null&&(Sx(Qs),Qs=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||gr.current&1?qr===0&&(qr=3):g1())),t.updateQueue!==null&&(t.flags|=4),vn(t),null);case 4:return jc(),wx(e,t),e===null&&Xd(t.stateNode.containerInfo),vn(t),null;case 10:return J0(t.type._context),vn(t),null;case 17:return Wn(t.type)&&yf(),vn(t),null;case 19:if(dr(gr),o=t.memoizedState,o===null)return vn(t),null;if(s=(t.flags&128)!==0,c=o.rendering,c===null)if(s)ud(o,!1);else{if(qr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(c=Sf(e),c!==null){for(t.flags|=128,ud(o,!1),s=c.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)o=r,e=s,o.flags&=14680066,c=o.alternate,c===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,e=c.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return nr(gr,gr.current&1|2),t.child}e=e.sibling}o.tail!==null&&kr()>Ec&&(t.flags|=128,s=!0,ud(o,!1),t.lanes=4194304)}else{if(!s)if(e=Sf(c),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ud(o,!0),o.tail===null&&o.tailMode==="hidden"&&!c.alternate&&!mr)return vn(t),null}else 2*kr()-o.renderingStartTime>Ec&&r!==1073741824&&(t.flags|=128,s=!0,ud(o,!1),t.lanes=4194304);o.isBackwards?(c.sibling=t.child,t.child=c):(r=o.last,r!==null?r.sibling=c:t.child=c,o.last=c)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=kr(),t.sibling=null,r=gr.current,nr(gr,s?r&1|2:r&1),t):(vn(t),null);case 22:case 23:return p1(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?ts&1073741824&&(vn(t),t.subtreeFlags&6&&(t.flags|=8192)):vn(t),null;case 24:return null;case 25:return null}throw Error(Oe(156,t.tag))}function fR(e,t){switch(K0(t),t.tag){case 1:return Wn(t.type)&&yf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return jc(),dr(qn),dr(yn),s1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return n1(t),null;case 13:if(dr(gr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Oe(340));_c()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return dr(gr),null;case 4:return jc(),null;case 10:return J0(t.type._context),null;case 22:case 23:return p1(),null;case 24:return null;default:return null}}var _h=!1,wn=!1,mR=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function Ql(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Cr(e,t,s)}else r.current=null}function yx(e,t,r){try{r()}catch(s){Cr(e,t,s)}}var ey=!1;function pR(e,t){if(nx=gf,e=D_(),G0(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var c=0,u=-1,f=-1,p=0,x=0,w=e,_=null;t:for(;;){for(var j;w!==r||a!==0&&w.nodeType!==3||(u=c+a),w!==o||s!==0&&w.nodeType!==3||(f=c+s),w.nodeType===3&&(c+=w.nodeValue.length),(j=w.firstChild)!==null;)_=w,w=j;for(;;){if(w===e)break t;if(_===r&&++p===a&&(u=c),_===o&&++x===s&&(f=c),(j=w.nextSibling)!==null)break;w=_,_=w.parentNode}w=j}r=u===-1||f===-1?null:{start:u,end:f}}else r=null}r=r||{start:0,end:0}}else r=null;for(sx={focusedElem:e,selectionRange:r},gf=!1,Qe=t;Qe!==null;)if(t=Qe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Qe=e;else for(;Qe!==null;){t=Qe;try{var N=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var C=N.memoizedProps,T=N.memoizedState,E=t.stateNode,S=E.getSnapshotBeforeUpdate(t.elementType===t.type?C:Ws(t.type,C),T);E.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Oe(163))}}catch(k){Cr(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,Qe=e;break}Qe=t.return}return N=ey,ey=!1,N}function Rd(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,o!==void 0&&yx(t,r,o)}a=a.next}while(a!==s)}}function hm(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function bx(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function IN(e){var t=e.alternate;t!==null&&(e.alternate=null,IN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[wa],delete t[Yd],delete t[ox],delete t[QI],delete t[ZI])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function RN(e){return e.tag===5||e.tag===3||e.tag===4}function ty(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||RN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _x(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=wf));else if(s!==4&&(e=e.child,e!==null))for(_x(e,t,r),e=e.sibling;e!==null;)_x(e,t,r),e=e.sibling}function Nx(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Nx(e,t,r),e=e.sibling;e!==null;)Nx(e,t,r),e=e.sibling}var nn=null,Ks=!1;function ci(e,t,r){for(r=r.child;r!==null;)PN(e,t,r),r=r.sibling}function PN(e,t,r){if(Ea&&typeof Ea.onCommitFiberUnmount=="function")try{Ea.onCommitFiberUnmount(sm,r)}catch{}switch(r.tag){case 5:wn||Ql(r,t);case 6:var s=nn,a=Ks;nn=null,ci(e,t,r),nn=s,Ks=a,nn!==null&&(Ks?(e=nn,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):nn.removeChild(r.stateNode));break;case 18:nn!==null&&(Ks?(e=nn,r=r.stateNode,e.nodeType===8?Yp(e.parentNode,r):e.nodeType===1&&Yp(e,r),Wd(e)):Yp(nn,r.stateNode));break;case 4:s=nn,a=Ks,nn=r.stateNode.containerInfo,Ks=!0,ci(e,t,r),nn=s,Ks=a;break;case 0:case 11:case 14:case 15:if(!wn&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var o=a,c=o.destroy;o=o.tag,c!==void 0&&(o&2||o&4)&&yx(r,t,c),a=a.next}while(a!==s)}ci(e,t,r);break;case 1:if(!wn&&(Ql(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(u){Cr(r,t,u)}ci(e,t,r);break;case 21:ci(e,t,r);break;case 22:r.mode&1?(wn=(s=wn)||r.memoizedState!==null,ci(e,t,r),wn=s):ci(e,t,r);break;default:ci(e,t,r)}}function ry(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new mR),t.forEach(function(s){var a=jR.bind(null,e,s);r.has(s)||(r.add(s),s.then(a,a))})}}function Us(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var o=e,c=t,u=c;e:for(;u!==null;){switch(u.tag){case 5:nn=u.stateNode,Ks=!1;break e;case 3:nn=u.stateNode.containerInfo,Ks=!0;break e;case 4:nn=u.stateNode.containerInfo,Ks=!0;break e}u=u.return}if(nn===null)throw Error(Oe(160));PN(o,c,a),nn=null,Ks=!1;var f=a.alternate;f!==null&&(f.return=null),a.return=null}catch(p){Cr(a,t,p)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ON(t,e),t=t.sibling}function ON(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Us(t,e),fa(e),s&4){try{Rd(3,e,e.return),hm(3,e)}catch(C){Cr(e,e.return,C)}try{Rd(5,e,e.return)}catch(C){Cr(e,e.return,C)}}break;case 1:Us(t,e),fa(e),s&512&&r!==null&&Ql(r,r.return);break;case 5:if(Us(t,e),fa(e),s&512&&r!==null&&Ql(r,r.return),e.flags&32){var a=e.stateNode;try{Ud(a,"")}catch(C){Cr(e,e.return,C)}}if(s&4&&(a=e.stateNode,a!=null)){var o=e.memoizedProps,c=r!==null?r.memoizedProps:o,u=e.type,f=e.updateQueue;if(e.updateQueue=null,f!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&r_(a,o),Gg(u,c);var p=Gg(u,o);for(c=0;c<f.length;c+=2){var x=f[c],w=f[c+1];x==="style"?o_(a,w):x==="dangerouslySetInnerHTML"?a_(a,w):x==="children"?Ud(a,w):O0(a,x,w,p)}switch(u){case"input":$g(a,o);break;case"textarea":n_(a,o);break;case"select":var _=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var j=o.value;j!=null?ec(a,!!o.multiple,j,!1):_!==!!o.multiple&&(o.defaultValue!=null?ec(a,!!o.multiple,o.defaultValue,!0):ec(a,!!o.multiple,o.multiple?[]:"",!1))}a[Yd]=o}catch(C){Cr(e,e.return,C)}}break;case 6:if(Us(t,e),fa(e),s&4){if(e.stateNode===null)throw Error(Oe(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(C){Cr(e,e.return,C)}}break;case 3:if(Us(t,e),fa(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Wd(t.containerInfo)}catch(C){Cr(e,e.return,C)}break;case 4:Us(t,e),fa(e);break;case 13:Us(t,e),fa(e),a=e.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||(f1=kr())),s&4&&ry(e);break;case 22:if(x=r!==null&&r.memoizedState!==null,e.mode&1?(wn=(p=wn)||x,Us(t,e),wn=p):Us(t,e),fa(e),s&8192){if(p=e.memoizedState!==null,(e.stateNode.isHidden=p)&&!x&&e.mode&1)for(Qe=e,x=e.child;x!==null;){for(w=Qe=x;Qe!==null;){switch(_=Qe,j=_.child,_.tag){case 0:case 11:case 14:case 15:Rd(4,_,_.return);break;case 1:Ql(_,_.return);var N=_.stateNode;if(typeof N.componentWillUnmount=="function"){s=_,r=_.return;try{t=s,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch(C){Cr(s,r,C)}}break;case 5:Ql(_,_.return);break;case 22:if(_.memoizedState!==null){sy(w);continue}}j!==null?(j.return=_,Qe=j):sy(w)}x=x.sibling}e:for(x=null,w=e;;){if(w.tag===5){if(x===null){x=w;try{a=w.stateNode,p?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=w.stateNode,f=w.memoizedProps.style,c=f!=null&&f.hasOwnProperty("display")?f.display:null,u.style.display=i_("display",c))}catch(C){Cr(e,e.return,C)}}}else if(w.tag===6){if(x===null)try{w.stateNode.nodeValue=p?"":w.memoizedProps}catch(C){Cr(e,e.return,C)}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===e)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===e)break e;for(;w.sibling===null;){if(w.return===null||w.return===e)break e;x===w&&(x=null),w=w.return}x===w&&(x=null),w.sibling.return=w.return,w=w.sibling}}break;case 19:Us(t,e),fa(e),s&4&&ry(e);break;case 21:break;default:Us(t,e),fa(e)}}function fa(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(RN(r)){var s=r;break e}r=r.return}throw Error(Oe(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(Ud(a,""),s.flags&=-33);var o=ty(e);Nx(e,o,a);break;case 3:case 4:var c=s.stateNode.containerInfo,u=ty(e);_x(e,u,c);break;default:throw Error(Oe(161))}}catch(f){Cr(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function gR(e,t,r){Qe=e,DN(e)}function DN(e,t,r){for(var s=(e.mode&1)!==0;Qe!==null;){var a=Qe,o=a.child;if(a.tag===22&&s){var c=a.memoizedState!==null||_h;if(!c){var u=a.alternate,f=u!==null&&u.memoizedState!==null||wn;u=_h;var p=wn;if(_h=c,(wn=f)&&!p)for(Qe=a;Qe!==null;)c=Qe,f=c.child,c.tag===22&&c.memoizedState!==null?ay(a):f!==null?(f.return=c,Qe=f):ay(a);for(;o!==null;)Qe=o,DN(o),o=o.sibling;Qe=a,_h=u,wn=p}ny(e)}else a.subtreeFlags&8772&&o!==null?(o.return=a,Qe=o):ny(e)}}function ny(e){for(;Qe!==null;){var t=Qe;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:wn||hm(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!wn)if(r===null)s.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Ws(t.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Uw(t,o,s);break;case 3:var c=t.updateQueue;if(c!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Uw(t,c,r)}break;case 5:var u=t.stateNode;if(r===null&&t.flags&4){r=u;var f=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&r.focus();break;case"img":f.src&&(r.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var p=t.alternate;if(p!==null){var x=p.memoizedState;if(x!==null){var w=x.dehydrated;w!==null&&Wd(w)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Oe(163))}wn||t.flags&512&&bx(t)}catch(_){Cr(t,t.return,_)}}if(t===e){Qe=null;break}if(r=t.sibling,r!==null){r.return=t.return,Qe=r;break}Qe=t.return}}function sy(e){for(;Qe!==null;){var t=Qe;if(t===e){Qe=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Qe=r;break}Qe=t.return}}function ay(e){for(;Qe!==null;){var t=Qe;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{hm(4,t)}catch(f){Cr(t,r,f)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(f){Cr(t,a,f)}}var o=t.return;try{bx(t)}catch(f){Cr(t,o,f)}break;case 5:var c=t.return;try{bx(t)}catch(f){Cr(t,c,f)}}}catch(f){Cr(t,t.return,f)}if(t===e){Qe=null;break}var u=t.sibling;if(u!==null){u.return=t.return,Qe=u;break}Qe=t.return}}var xR=Math.ceil,Tf=ei.ReactCurrentDispatcher,u1=ei.ReactCurrentOwner,Ts=ei.ReactCurrentBatchConfig,Lt=0,Zr=null,Dr=null,dn=0,ts=0,Zl=ro(0),qr=0,ru=null,qo=0,fm=0,h1=0,Pd=null,Un=null,f1=0,Ec=1/0,Fa=null,If=!1,jx=null,Li=null,Nh=!1,Ti=null,Rf=0,Od=0,Cx=null,Kh=-1,Yh=0;function En(){return Lt&6?kr():Kh!==-1?Kh:Kh=kr()}function Fi(e){return e.mode&1?Lt&2&&dn!==0?dn&-dn:eR.transition!==null?(Yh===0&&(Yh=w_()),Yh):(e=Xt,e!==0||(e=window.event,e=e===void 0?16:E_(e.type)),e):1}function ra(e,t,r,s){if(50<Od)throw Od=0,Cx=null,Error(Oe(185));ju(e,r,s),(!(Lt&2)||e!==Zr)&&(e===Zr&&(!(Lt&2)&&(fm|=r),qr===4&&bi(e,dn)),Hn(e,s),r===1&&Lt===0&&!(t.mode&1)&&(Ec=kr()+500,cm&&no()))}function Hn(e,t){var r=e.callbackNode;eI(e,t);var s=pf(e,e===Zr?dn:0);if(s===0)r!==null&&mw(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&mw(r),t===1)e.tag===0?JI(iy.bind(null,e)):W_(iy.bind(null,e)),KI(function(){!(Lt&6)&&no()}),r=null;else{switch(y_(s)){case 1:r=B0;break;case 4:r=x_;break;case 16:r=mf;break;case 536870912:r=v_;break;default:r=mf}r=VN(r,MN.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function MN(e,t){if(Kh=-1,Yh=0,Lt&6)throw Error(Oe(327));var r=e.callbackNode;if(ac()&&e.callbackNode!==r)return null;var s=pf(e,e===Zr?dn:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Pf(e,s);else{t=s;var a=Lt;Lt|=2;var o=FN();(Zr!==e||dn!==t)&&(Fa=null,Ec=kr()+500,Lo(e,t));do try{yR();break}catch(u){LN(e,u)}while(!0);Z0(),Tf.current=o,Lt=a,Dr!==null?t=0:(Zr=null,dn=0,t=qr)}if(t!==0){if(t===2&&(a=Zg(e),a!==0&&(s=a,t=Ex(e,a))),t===1)throw r=ru,Lo(e,0),bi(e,s),Hn(e,kr()),r;if(t===6)bi(e,s);else{if(a=e.current.alternate,!(s&30)&&!vR(a)&&(t=Pf(e,s),t===2&&(o=Zg(e),o!==0&&(s=o,t=Ex(e,o))),t===1))throw r=ru,Lo(e,0),bi(e,s),Hn(e,kr()),r;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(Oe(345));case 2:bo(e,Un,Fa);break;case 3:if(bi(e,s),(s&130023424)===s&&(t=f1+500-kr(),10<t)){if(pf(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){En(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ix(bo.bind(null,e,Un,Fa),t);break}bo(e,Un,Fa);break;case 4:if(bi(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var c=31-ta(s);o=1<<c,c=t[c],c>a&&(a=c),s&=~o}if(s=a,s=kr()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*xR(s/1960))-s,10<s){e.timeoutHandle=ix(bo.bind(null,e,Un,Fa),s);break}bo(e,Un,Fa);break;case 5:bo(e,Un,Fa);break;default:throw Error(Oe(329))}}}return Hn(e,kr()),e.callbackNode===r?MN.bind(null,e):null}function Ex(e,t){var r=Pd;return e.current.memoizedState.isDehydrated&&(Lo(e,t).flags|=256),e=Pf(e,t),e!==2&&(t=Un,Un=r,t!==null&&Sx(t)),e}function Sx(e){Un===null?Un=e:Un.push.apply(Un,e)}function vR(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],o=a.getSnapshot;a=a.value;try{if(!na(o(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function bi(e,t){for(t&=~h1,t&=~fm,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ta(t),s=1<<r;e[r]=-1,t&=~s}}function iy(e){if(Lt&6)throw Error(Oe(327));ac();var t=pf(e,0);if(!(t&1))return Hn(e,kr()),null;var r=Pf(e,t);if(e.tag!==0&&r===2){var s=Zg(e);s!==0&&(t=s,r=Ex(e,s))}if(r===1)throw r=ru,Lo(e,0),bi(e,t),Hn(e,kr()),r;if(r===6)throw Error(Oe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bo(e,Un,Fa),Hn(e,kr()),null}function m1(e,t){var r=Lt;Lt|=1;try{return e(t)}finally{Lt=r,Lt===0&&(Ec=kr()+500,cm&&no())}}function Wo(e){Ti!==null&&Ti.tag===0&&!(Lt&6)&&ac();var t=Lt;Lt|=1;var r=Ts.transition,s=Xt;try{if(Ts.transition=null,Xt=1,e)return e()}finally{Xt=s,Ts.transition=r,Lt=t,!(Lt&6)&&no()}}function p1(){ts=Zl.current,dr(Zl)}function Lo(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,XI(r)),Dr!==null)for(r=Dr.return;r!==null;){var s=r;switch(K0(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&yf();break;case 3:jc(),dr(qn),dr(yn),s1();break;case 5:n1(s);break;case 4:jc();break;case 13:dr(gr);break;case 19:dr(gr);break;case 10:J0(s.type._context);break;case 22:case 23:p1()}r=r.return}if(Zr=e,Dr=e=Bi(e.current,null),dn=ts=t,qr=0,ru=null,h1=fm=qo=0,Un=Pd=null,Ao!==null){for(t=0;t<Ao.length;t++)if(r=Ao[t],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,o=r.pending;if(o!==null){var c=o.next;o.next=a,s.next=c}r.pending=s}Ao=null}return e}function LN(e,t){do{var r=Dr;try{if(Z0(),Hh.current=kf,Af){for(var s=wr.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Af=!1}if(Vo=0,Qr=$r=wr=null,Id=!1,Jd=0,u1.current=null,r===null||r.return===null){qr=1,ru=t,Dr=null;break}e:{var o=e,c=r.return,u=r,f=t;if(t=dn,u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var p=f,x=u,w=x.tag;if(!(x.mode&1)&&(w===0||w===11||w===15)){var _=x.alternate;_?(x.updateQueue=_.updateQueue,x.memoizedState=_.memoizedState,x.lanes=_.lanes):(x.updateQueue=null,x.memoizedState=null)}var j=Gw(c);if(j!==null){j.flags&=-257,Xw(j,c,u,o,t),j.mode&1&&Hw(o,p,t),t=j,f=p;var N=t.updateQueue;if(N===null){var C=new Set;C.add(f),t.updateQueue=C}else N.add(f);break e}else{if(!(t&1)){Hw(o,p,t),g1();break e}f=Error(Oe(426))}}else if(mr&&u.mode&1){var T=Gw(c);if(T!==null){!(T.flags&65536)&&(T.flags|=256),Xw(T,c,u,o,t),Y0(Cc(f,u));break e}}o=f=Cc(f,u),qr!==4&&(qr=2),Pd===null?Pd=[o]:Pd.push(o),o=c;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var E=yN(o,f,t);zw(o,E);break e;case 1:u=f;var S=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof S.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Li===null||!Li.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t;var k=bN(o,u,t);zw(o,k);break e}}o=o.return}while(o!==null)}zN(r)}catch(O){t=O,Dr===r&&r!==null&&(Dr=r=r.return);continue}break}while(!0)}function FN(){var e=Tf.current;return Tf.current=kf,e===null?kf:e}function g1(){(qr===0||qr===3||qr===2)&&(qr=4),Zr===null||!(qo&268435455)&&!(fm&268435455)||bi(Zr,dn)}function Pf(e,t){var r=Lt;Lt|=2;var s=FN();(Zr!==e||dn!==t)&&(Fa=null,Lo(e,t));do try{wR();break}catch(a){LN(e,a)}while(!0);if(Z0(),Lt=r,Tf.current=s,Dr!==null)throw Error(Oe(261));return Zr=null,dn=0,qr}function wR(){for(;Dr!==null;)BN(Dr)}function yR(){for(;Dr!==null&&!WT();)BN(Dr)}function BN(e){var t=$N(e.alternate,e,ts);e.memoizedProps=e.pendingProps,t===null?zN(e):Dr=t,u1.current=null}function zN(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=fR(r,t),r!==null){r.flags&=32767,Dr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qr=6,Dr=null;return}}else if(r=hR(r,t,ts),r!==null){Dr=r;return}if(t=t.sibling,t!==null){Dr=t;return}Dr=t=e}while(t!==null);qr===0&&(qr=5)}function bo(e,t,r){var s=Xt,a=Ts.transition;try{Ts.transition=null,Xt=1,bR(e,t,r,s)}finally{Ts.transition=a,Xt=s}return null}function bR(e,t,r,s){do ac();while(Ti!==null);if(Lt&6)throw Error(Oe(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Oe(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(tI(e,o),e===Zr&&(Dr=Zr=null,dn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Nh||(Nh=!0,VN(mf,function(){return ac(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Ts.transition,Ts.transition=null;var c=Xt;Xt=1;var u=Lt;Lt|=4,u1.current=null,pR(e,r),ON(r,e),UI(sx),gf=!!nx,sx=nx=null,e.current=r,gR(r),HT(),Lt=u,Xt=c,Ts.transition=o}else e.current=r;if(Nh&&(Nh=!1,Ti=e,Rf=a),o=e.pendingLanes,o===0&&(Li=null),KT(r.stateNode),Hn(e,kr()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(If)throw If=!1,e=jx,jx=null,e;return Rf&1&&e.tag!==0&&ac(),o=e.pendingLanes,o&1?e===Cx?Od++:(Od=0,Cx=e):Od=0,no(),null}function ac(){if(Ti!==null){var e=y_(Rf),t=Ts.transition,r=Xt;try{if(Ts.transition=null,Xt=16>e?16:e,Ti===null)var s=!1;else{if(e=Ti,Ti=null,Rf=0,Lt&6)throw Error(Oe(331));var a=Lt;for(Lt|=4,Qe=e.current;Qe!==null;){var o=Qe,c=o.child;if(Qe.flags&16){var u=o.deletions;if(u!==null){for(var f=0;f<u.length;f++){var p=u[f];for(Qe=p;Qe!==null;){var x=Qe;switch(x.tag){case 0:case 11:case 15:Rd(8,x,o)}var w=x.child;if(w!==null)w.return=x,Qe=w;else for(;Qe!==null;){x=Qe;var _=x.sibling,j=x.return;if(IN(x),x===p){Qe=null;break}if(_!==null){_.return=j,Qe=_;break}Qe=j}}}var N=o.alternate;if(N!==null){var C=N.child;if(C!==null){N.child=null;do{var T=C.sibling;C.sibling=null,C=T}while(C!==null)}}Qe=o}}if(o.subtreeFlags&2064&&c!==null)c.return=o,Qe=c;else e:for(;Qe!==null;){if(o=Qe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Rd(9,o,o.return)}var E=o.sibling;if(E!==null){E.return=o.return,Qe=E;break e}Qe=o.return}}var S=e.current;for(Qe=S;Qe!==null;){c=Qe;var b=c.child;if(c.subtreeFlags&2064&&b!==null)b.return=c,Qe=b;else e:for(c=S;Qe!==null;){if(u=Qe,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:hm(9,u)}}catch(O){Cr(u,u.return,O)}if(u===c){Qe=null;break e}var k=u.sibling;if(k!==null){k.return=u.return,Qe=k;break e}Qe=u.return}}if(Lt=a,no(),Ea&&typeof Ea.onPostCommitFiberRoot=="function")try{Ea.onPostCommitFiberRoot(sm,e)}catch{}s=!0}return s}finally{Xt=r,Ts.transition=t}}return!1}function oy(e,t,r){t=Cc(r,t),t=yN(e,t,1),e=Mi(e,t,1),t=En(),e!==null&&(ju(e,1,t),Hn(e,t))}function Cr(e,t,r){if(e.tag===3)oy(e,e,r);else for(;t!==null;){if(t.tag===3){oy(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Li===null||!Li.has(s))){e=Cc(r,e),e=bN(t,e,1),t=Mi(t,e,1),e=En(),t!==null&&(ju(t,1,e),Hn(t,e));break}}t=t.return}}function _R(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=En(),e.pingedLanes|=e.suspendedLanes&r,Zr===e&&(dn&r)===r&&(qr===4||qr===3&&(dn&130023424)===dn&&500>kr()-f1?Lo(e,0):h1|=r),Hn(e,t)}function UN(e,t){t===0&&(e.mode&1?(t=fh,fh<<=1,!(fh&130023424)&&(fh=4194304)):t=1);var r=En();e=Xa(e,t),e!==null&&(ju(e,t,r),Hn(e,r))}function NR(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),UN(e,r)}function jR(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(Oe(314))}s!==null&&s.delete(t),UN(e,r)}var $N;$N=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||qn.current)Vn=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Vn=!1,uR(e,t,r);Vn=!!(e.flags&131072)}else Vn=!1,mr&&t.flags&1048576&&H_(t,Nf,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Xh(e,t),e=t.pendingProps;var a=bc(t,yn.current);sc(t,r),a=i1(null,t,s,e,a,r);var o=o1();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Wn(s)?(o=!0,bf(t)):o=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,t1(t),a.updater=um,t.stateNode=a,a._reactInternals=t,fx(t,s,e,r),t=gx(null,t,s,!0,o,r)):(t.tag=0,mr&&o&&X0(t),Nn(null,t,a,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Xh(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=ER(s),e=Ws(s,e),a){case 0:t=px(null,t,s,e,r);break e;case 1:t=Qw(null,t,s,e,r);break e;case 11:t=Kw(null,t,s,e,r);break e;case 14:t=Yw(null,t,s,Ws(s.type,e),r);break e}throw Error(Oe(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Ws(s,a),px(e,t,s,a,r);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Ws(s,a),Qw(e,t,s,a,r);case 3:e:{if(CN(t),e===null)throw Error(Oe(387));s=t.pendingProps,o=t.memoizedState,a=o.element,Z_(e,t),Ef(t,s,null,r);var c=t.memoizedState;if(s=c.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){a=Cc(Error(Oe(423)),t),t=Zw(e,t,s,r,a);break e}else if(s!==a){a=Cc(Error(Oe(424)),t),t=Zw(e,t,s,r,a);break e}else for(ss=Di(t.stateNode.containerInfo.firstChild),cs=t,mr=!0,Qs=null,r=Y_(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(_c(),s===a){t=Ka(e,t,r);break e}Nn(e,t,s,r)}t=t.child}return t;case 5:return J_(t),e===null&&dx(t),s=t.type,a=t.pendingProps,o=e!==null?e.memoizedProps:null,c=a.children,ax(s,a)?c=null:o!==null&&ax(s,o)&&(t.flags|=32),jN(e,t),Nn(e,t,c,r),t.child;case 6:return e===null&&dx(t),null;case 13:return EN(e,t,r);case 4:return r1(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Nc(t,null,s,r):Nn(e,t,s,r),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Ws(s,a),Kw(e,t,s,a,r);case 7:return Nn(e,t,t.pendingProps,r),t.child;case 8:return Nn(e,t,t.pendingProps.children,r),t.child;case 12:return Nn(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,o=t.memoizedProps,c=a.value,nr(jf,s._currentValue),s._currentValue=c,o!==null)if(na(o.value,c)){if(o.children===a.children&&!qn.current){t=Ka(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var u=o.dependencies;if(u!==null){c=o.child;for(var f=u.firstContext;f!==null;){if(f.context===s){if(o.tag===1){f=Wa(-1,r&-r),f.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var x=p.pending;x===null?f.next=f:(f.next=x.next,x.next=f),p.pending=f}}o.lanes|=r,f=o.alternate,f!==null&&(f.lanes|=r),ux(o.return,r,t),u.lanes|=r;break}f=f.next}}else if(o.tag===10)c=o.type===t.type?null:o.child;else if(o.tag===18){if(c=o.return,c===null)throw Error(Oe(341));c.lanes|=r,u=c.alternate,u!==null&&(u.lanes|=r),ux(c,r,t),c=o.sibling}else c=o.child;if(c!==null)c.return=o;else for(c=o;c!==null;){if(c===t){c=null;break}if(o=c.sibling,o!==null){o.return=c.return,c=o;break}c=c.return}o=c}Nn(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,sc(t,r),a=Rs(a),s=s(a),t.flags|=1,Nn(e,t,s,r),t.child;case 14:return s=t.type,a=Ws(s,t.pendingProps),a=Ws(s.type,a),Yw(e,t,s,a,r);case 15:return _N(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Ws(s,a),Xh(e,t),t.tag=1,Wn(s)?(e=!0,bf(t)):e=!1,sc(t,r),wN(t,s,a),fx(t,s,a,r),gx(null,t,s,!0,e,r);case 19:return SN(e,t,r);case 22:return NN(e,t,r)}throw Error(Oe(156,t.tag))};function VN(e,t){return g_(e,t)}function CR(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function As(e,t,r,s){return new CR(e,t,r,s)}function x1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ER(e){if(typeof e=="function")return x1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===M0)return 11;if(e===L0)return 14}return 2}function Bi(e,t){var r=e.alternate;return r===null?(r=As(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Qh(e,t,r,s,a,o){var c=2;if(s=e,typeof e=="function")x1(e)&&(c=1);else if(typeof e=="string")c=5;else e:switch(e){case $l:return Fo(r.children,a,o,t);case D0:c=8,a|=8;break;case Lg:return e=As(12,r,t,a|2),e.elementType=Lg,e.lanes=o,e;case Fg:return e=As(13,r,t,a),e.elementType=Fg,e.lanes=o,e;case Bg:return e=As(19,r,t,a),e.elementType=Bg,e.lanes=o,e;case J2:return mm(r,a,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Q2:c=10;break e;case Z2:c=9;break e;case M0:c=11;break e;case L0:c=14;break e;case vi:c=16,s=null;break e}throw Error(Oe(130,e==null?e:typeof e,""))}return t=As(c,r,t,a),t.elementType=e,t.type=s,t.lanes=o,t}function Fo(e,t,r,s){return e=As(7,e,s,t),e.lanes=r,e}function mm(e,t,r,s){return e=As(22,e,s,t),e.elementType=J2,e.lanes=r,e.stateNode={isHidden:!1},e}function sg(e,t,r){return e=As(6,e,null,t),e.lanes=r,e}function ag(e,t,r){return t=As(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function SR(e,t,r,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bp(0),this.expirationTimes=Bp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bp(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function v1(e,t,r,s,a,o,c,u,f){return e=new SR(e,t,r,u,f),t===1?(t=1,o===!0&&(t|=8)):t=0,o=As(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},t1(o),e}function AR(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ul,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function qN(e){if(!e)return Vi;e=e._reactInternals;e:{if(ol(e)!==e||e.tag!==1)throw Error(Oe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Wn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Oe(171))}if(e.tag===1){var r=e.type;if(Wn(r))return q_(e,r,t)}return t}function WN(e,t,r,s,a,o,c,u,f){return e=v1(r,s,!0,e,a,o,c,u,f),e.context=qN(null),r=e.current,s=En(),a=Fi(r),o=Wa(s,a),o.callback=t??null,Mi(r,o,a),e.current.lanes=a,ju(e,a,s),Hn(e,s),e}function pm(e,t,r,s){var a=t.current,o=En(),c=Fi(a);return r=qN(r),t.context===null?t.context=r:t.pendingContext=r,t=Wa(o,c),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Mi(a,t,c),e!==null&&(ra(e,a,c,o),Wh(e,a,c)),c}function Of(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ly(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function w1(e,t){ly(e,t),(e=e.alternate)&&ly(e,t)}function kR(){return null}var HN=typeof reportError=="function"?reportError:function(e){console.error(e)};function y1(e){this._internalRoot=e}gm.prototype.render=y1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Oe(409));pm(e,t,null,null)};gm.prototype.unmount=y1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Wo(function(){pm(null,e,null,null)}),t[Ga]=null}};function gm(e){this._internalRoot=e}gm.prototype.unstable_scheduleHydration=function(e){if(e){var t=N_();e={blockedOn:null,target:e,priority:t};for(var r=0;r<yi.length&&t!==0&&t<yi[r].priority;r++);yi.splice(r,0,e),r===0&&C_(e)}};function b1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function xm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function cy(){}function TR(e,t,r,s,a){if(a){if(typeof s=="function"){var o=s;s=function(){var p=Of(c);o.call(p)}}var c=WN(t,s,e,0,null,!1,!1,"",cy);return e._reactRootContainer=c,e[Ga]=c.current,Xd(e.nodeType===8?e.parentNode:e),Wo(),c}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var u=s;s=function(){var p=Of(f);u.call(p)}}var f=v1(e,0,!1,null,null,!1,!1,"",cy);return e._reactRootContainer=f,e[Ga]=f.current,Xd(e.nodeType===8?e.parentNode:e),Wo(function(){pm(t,f,r,s)}),f}function vm(e,t,r,s,a){var o=r._reactRootContainer;if(o){var c=o;if(typeof a=="function"){var u=a;a=function(){var f=Of(c);u.call(f)}}pm(t,c,e,a)}else c=TR(r,t,e,a,s);return Of(c)}b_=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=bd(t.pendingLanes);r!==0&&(z0(t,r|1),Hn(t,kr()),!(Lt&6)&&(Ec=kr()+500,no()))}break;case 13:Wo(function(){var s=Xa(e,1);if(s!==null){var a=En();ra(s,e,1,a)}}),w1(e,1)}};U0=function(e){if(e.tag===13){var t=Xa(e,134217728);if(t!==null){var r=En();ra(t,e,134217728,r)}w1(e,134217728)}};__=function(e){if(e.tag===13){var t=Fi(e),r=Xa(e,t);if(r!==null){var s=En();ra(r,e,t,s)}w1(e,t)}};N_=function(){return Xt};j_=function(e,t){var r=Xt;try{return Xt=e,t()}finally{Xt=r}};Kg=function(e,t,r){switch(t){case"input":if($g(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var a=lm(s);if(!a)throw Error(Oe(90));t_(s),$g(s,a)}}}break;case"textarea":n_(e,r);break;case"select":t=r.value,t!=null&&ec(e,!!r.multiple,t,!1)}};d_=m1;u_=Wo;var IR={usingClientEntryPoint:!1,Events:[Eu,Hl,lm,l_,c_,m1]},hd={findFiberByHostInstance:So,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},RR={bundleType:hd.bundleType,version:hd.version,rendererPackageName:hd.rendererPackageName,rendererConfig:hd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ei.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=m_(e),e===null?null:e.stateNode},findFiberByHostInstance:hd.findFiberByHostInstance||kR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jh.isDisabled&&jh.supportsFiber)try{sm=jh.inject(RR),Ea=jh}catch{}}fs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IR;fs.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b1(t))throw Error(Oe(200));return AR(e,t,null,r)};fs.createRoot=function(e,t){if(!b1(e))throw Error(Oe(299));var r=!1,s="",a=HN;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=v1(e,1,!1,null,null,r,!1,s,a),e[Ga]=t.current,Xd(e.nodeType===8?e.parentNode:e),new y1(t)};fs.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Oe(188)):(e=Object.keys(e).join(","),Error(Oe(268,e)));return e=m_(t),e=e===null?null:e.stateNode,e};fs.flushSync=function(e){return Wo(e)};fs.hydrate=function(e,t,r){if(!xm(t))throw Error(Oe(200));return vm(null,e,t,!0,r)};fs.hydrateRoot=function(e,t,r){if(!b1(e))throw Error(Oe(405));var s=r!=null&&r.hydratedSources||null,a=!1,o="",c=HN;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(c=r.onRecoverableError)),t=WN(t,null,e,1,r??null,a,!1,o,c),e[Ga]=t.current,Xd(e),s)for(e=0;e<s.length;e++)r=s[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new gm(t)};fs.render=function(e,t,r){if(!xm(t))throw Error(Oe(200));return vm(null,e,t,!1,r)};fs.unmountComponentAtNode=function(e){if(!xm(e))throw Error(Oe(40));return e._reactRootContainer?(Wo(function(){vm(null,null,e,!1,function(){e._reactRootContainer=null,e[Ga]=null})}),!0):!1};fs.unstable_batchedUpdates=m1;fs.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!xm(r))throw Error(Oe(200));if(e==null||e._reactInternals===void 0)throw Error(Oe(38));return vm(e,t,r,!1,s)};fs.version="18.3.1-next-f1338f8080-20240426";function GN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(GN)}catch(e){console.error(e)}}GN(),G2.exports=fs;var ll=G2.exports;const XN=E0(ll);var KN,dy=ll;KN=dy.createRoot,dy.hydrateRoot;const PR=1,OR=1e6;let ig=0;function DR(){return ig=(ig+1)%Number.MAX_SAFE_INTEGER,ig.toString()}const og=new Map,uy=e=>{if(og.has(e))return;const t=setTimeout(()=>{og.delete(e),Dd({type:"REMOVE_TOAST",toastId:e})},OR);og.set(e,t)},MR=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,PR)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?uy(r):e.toasts.forEach(s=>{uy(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===r||r===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},Zh=[];let Jh={toasts:[]};function Dd(e){Jh=MR(Jh,e),Zh.forEach(t=>{t(Jh)})}function LR({...e}){const t=DR(),r=a=>Dd({type:"UPDATE_TOAST",toast:{...a,id:t}}),s=()=>Dd({type:"DISMISS_TOAST",toastId:t});return Dd({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||s()}}}),{id:t,dismiss:s,update:r}}function YN(){const[e,t]=v.useState(Jh);return v.useEffect(()=>(Zh.push(t),()=>{const r=Zh.indexOf(t);r>-1&&Zh.splice(r,1)}),[e]),{...e,toast:LR,dismiss:r=>Dd({type:"DISMISS_TOAST",toastId:r})}}function Ie(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function hy(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Ya(...e){return t=>{let r=!1;const s=e.map(a=>{const o=hy(a,t);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let a=0;a<s.length;a++){const o=s[a];typeof o=="function"?o():hy(e[a],null)}}}}function tt(...e){return v.useCallback(Ya(...e),e)}function FR(e,t){const r=v.createContext(t),s=o=>{const{children:c,...u}=o,f=v.useMemo(()=>u,Object.values(u));return n.jsx(r.Provider,{value:f,children:c})};s.displayName=e+"Provider";function a(o){const c=v.useContext(r);if(c)return c;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[s,a]}function Mr(e,t=[]){let r=[];function s(o,c){const u=v.createContext(c),f=r.length;r=[...r,c];const p=w=>{var E;const{scope:_,children:j,...N}=w,C=((E=_==null?void 0:_[e])==null?void 0:E[f])||u,T=v.useMemo(()=>N,Object.values(N));return n.jsx(C.Provider,{value:T,children:j})};p.displayName=o+"Provider";function x(w,_){var C;const j=((C=_==null?void 0:_[e])==null?void 0:C[f])||u,N=v.useContext(j);if(N)return N;if(c!==void 0)return c;throw new Error(`\`${w}\` must be used within \`${o}\``)}return[p,x]}const a=()=>{const o=r.map(c=>v.createContext(c));return function(u){const f=(u==null?void 0:u[e])||o;return v.useMemo(()=>({[`__scope${e}`]:{...u,[e]:f}}),[u,f])}};return a.scopeName=e,[s,BR(a,...t)]}function BR(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const c=s.reduce((u,{useScope:f,scopeName:p})=>{const w=f(o)[`__scope${p}`];return{...u,...w}},{});return v.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return r.scopeName=t.scopeName,r}function qi(e){const t=UR(e),r=v.forwardRef((s,a)=>{const{children:o,...c}=s,u=v.Children.toArray(o),f=u.find($R);if(f){const p=f.props.children,x=u.map(w=>w===f?v.Children.count(p)>1?v.Children.only(null):v.isValidElement(p)?p.props.children:null:w);return n.jsx(t,{...c,ref:a,children:v.isValidElement(p)?v.cloneElement(p,void 0,x):null})}return n.jsx(t,{...c,ref:a,children:o})});return r.displayName=`${e}.Slot`,r}var zR=qi("Slot");function UR(e){const t=v.forwardRef((r,s)=>{const{children:a,...o}=r;if(v.isValidElement(a)){const c=qR(a),u=VR(o,a.props);return a.type!==v.Fragment&&(u.ref=s?Ya(s,c):c),v.cloneElement(a,u)}return v.Children.count(a)>1?v.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var QN=Symbol("radix.slottable");function ZN(e){const t=({children:r})=>n.jsx(n.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=QN,t}function $R(e){return v.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===QN}function VR(e,t){const r={...t};for(const s in t){const a=e[s],o=t[s];/^on[A-Z]/.test(s)?a&&o?r[s]=(...u)=>{const f=o(...u);return a(...u),f}:a&&(r[s]=a):s==="style"?r[s]={...a,...o}:s==="className"&&(r[s]=[a,o].filter(Boolean).join(" "))}return{...e,...r}}function qR(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Au(e){const t=e+"CollectionProvider",[r,s]=Mr(t),[a,o]=r(t,{collectionRef:{current:null},itemMap:new Map}),c=C=>{const{scope:T,children:E}=C,S=$e.useRef(null),b=$e.useRef(new Map).current;return n.jsx(a,{scope:T,itemMap:b,collectionRef:S,children:E})};c.displayName=t;const u=e+"CollectionSlot",f=qi(u),p=$e.forwardRef((C,T)=>{const{scope:E,children:S}=C,b=o(u,E),k=tt(T,b.collectionRef);return n.jsx(f,{ref:k,children:S})});p.displayName=u;const x=e+"CollectionItemSlot",w="data-radix-collection-item",_=qi(x),j=$e.forwardRef((C,T)=>{const{scope:E,children:S,...b}=C,k=$e.useRef(null),O=tt(T,k),L=o(x,E);return $e.useEffect(()=>(L.itemMap.set(k,{ref:k,...b}),()=>void L.itemMap.delete(k))),n.jsx(_,{[w]:"",ref:O,children:S})});j.displayName=x;function N(C){const T=o(e+"CollectionConsumer",C);return $e.useCallback(()=>{const S=T.collectionRef.current;if(!S)return[];const b=Array.from(S.querySelectorAll(`[${w}]`));return Array.from(T.itemMap.values()).sort((L,P)=>b.indexOf(L.ref.current)-b.indexOf(P.ref.current))},[T.collectionRef,T.itemMap])}return[{Provider:c,Slot:p,ItemSlot:j},N,s]}var WR=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],qe=WR.reduce((e,t)=>{const r=qi(`Primitive.${t}`),s=v.forwardRef((a,o)=>{const{asChild:c,...u}=a,f=c?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(f,{...u,ref:o})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function _1(e,t){e&&ll.flushSync(()=>e.dispatchEvent(t))}function Er(e){const t=v.useRef(e);return v.useEffect(()=>{t.current=e}),v.useMemo(()=>(...r)=>{var s;return(s=t.current)==null?void 0:s.call(t,...r)},[])}function HR(e,t=globalThis==null?void 0:globalThis.document){const r=Er(e);v.useEffect(()=>{const s=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[r,t])}var GR="DismissableLayer",Ax="dismissableLayer.update",XR="dismissableLayer.pointerDownOutside",KR="dismissableLayer.focusOutside",fy,JN=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),cl=v.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:c,onDismiss:u,...f}=e,p=v.useContext(JN),[x,w]=v.useState(null),_=(x==null?void 0:x.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,j]=v.useState({}),N=tt(t,P=>w(P)),C=Array.from(p.layers),[T]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),E=C.indexOf(T),S=x?C.indexOf(x):-1,b=p.layersWithOutsidePointerEventsDisabled.size>0,k=S>=E,O=QR(P=>{const M=P.target,R=[...p.branches].some($=>$.contains(M));!k||R||(a==null||a(P),c==null||c(P),P.defaultPrevented||u==null||u())},_),L=ZR(P=>{const M=P.target;[...p.branches].some($=>$.contains(M))||(o==null||o(P),c==null||c(P),P.defaultPrevented||u==null||u())},_);return HR(P=>{S===p.layers.size-1&&(s==null||s(P),!P.defaultPrevented&&u&&(P.preventDefault(),u()))},_),v.useEffect(()=>{if(x)return r&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(fy=_.body.style.pointerEvents,_.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(x)),p.layers.add(x),my(),()=>{r&&p.layersWithOutsidePointerEventsDisabled.size===1&&(_.body.style.pointerEvents=fy)}},[x,_,r,p]),v.useEffect(()=>()=>{x&&(p.layers.delete(x),p.layersWithOutsidePointerEventsDisabled.delete(x),my())},[x,p]),v.useEffect(()=>{const P=()=>j({});return document.addEventListener(Ax,P),()=>document.removeEventListener(Ax,P)},[]),n.jsx(qe.div,{...f,ref:N,style:{pointerEvents:b?k?"auto":"none":void 0,...e.style},onFocusCapture:Ie(e.onFocusCapture,L.onFocusCapture),onBlurCapture:Ie(e.onBlurCapture,L.onBlurCapture),onPointerDownCapture:Ie(e.onPointerDownCapture,O.onPointerDownCapture)})});cl.displayName=GR;var YR="DismissableLayerBranch",ej=v.forwardRef((e,t)=>{const r=v.useContext(JN),s=v.useRef(null),a=tt(t,s);return v.useEffect(()=>{const o=s.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),n.jsx(qe.div,{...e,ref:a})});ej.displayName=YR;function QR(e,t=globalThis==null?void 0:globalThis.document){const r=Er(e),s=v.useRef(!1),a=v.useRef(()=>{});return v.useEffect(()=>{const o=u=>{if(u.target&&!s.current){let f=function(){tj(XR,r,p,{discrete:!0})};const p={originalEvent:u};u.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=f,t.addEventListener("click",a.current,{once:!0})):f()}else t.removeEventListener("click",a.current);s.current=!1},c=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(c),t.removeEventListener("pointerdown",o),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>s.current=!0}}function ZR(e,t=globalThis==null?void 0:globalThis.document){const r=Er(e),s=v.useRef(!1);return v.useEffect(()=>{const a=o=>{o.target&&!s.current&&tj(KR,r,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function my(){const e=new CustomEvent(Ax);document.dispatchEvent(e)}function tj(e,t,r,{discrete:s}){const a=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),s?_1(a,o):a.dispatchEvent(o)}var JR=cl,e8=ej,Rr=globalThis!=null&&globalThis.document?v.useLayoutEffect:()=>{},t8="Portal",Bc=v.forwardRef((e,t)=>{var u;const{container:r,...s}=e,[a,o]=v.useState(!1);Rr(()=>o(!0),[]);const c=r||a&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?XN.createPortal(n.jsx(qe.div,{...s,ref:t}),c):null});Bc.displayName=t8;function r8(e,t){return v.useReducer((r,s)=>t[r][s]??r,e)}var Hr=e=>{const{present:t,children:r}=e,s=n8(t),a=typeof r=="function"?r({present:s.isPresent}):v.Children.only(r),o=tt(s.ref,s8(a));return typeof r=="function"||s.isPresent?v.cloneElement(a,{ref:o}):null};Hr.displayName="Presence";function n8(e){const[t,r]=v.useState(),s=v.useRef(null),a=v.useRef(e),o=v.useRef("none"),c=e?"mounted":"unmounted",[u,f]=r8(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return v.useEffect(()=>{const p=Ch(s.current);o.current=u==="mounted"?p:"none"},[u]),Rr(()=>{const p=s.current,x=a.current;if(x!==e){const _=o.current,j=Ch(p);e?f("MOUNT"):j==="none"||(p==null?void 0:p.display)==="none"?f("UNMOUNT"):f(x&&_!==j?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,f]),Rr(()=>{if(t){let p;const x=t.ownerDocument.defaultView??window,w=j=>{const C=Ch(s.current).includes(CSS.escape(j.animationName));if(j.target===t&&C&&(f("ANIMATION_END"),!a.current)){const T=t.style.animationFillMode;t.style.animationFillMode="forwards",p=x.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=T)})}},_=j=>{j.target===t&&(o.current=Ch(s.current))};return t.addEventListener("animationstart",_),t.addEventListener("animationcancel",w),t.addEventListener("animationend",w),()=>{x.clearTimeout(p),t.removeEventListener("animationstart",_),t.removeEventListener("animationcancel",w),t.removeEventListener("animationend",w)}}else f("ANIMATION_END")},[t,f]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:v.useCallback(p=>{s.current=p?getComputedStyle(p):null,r(p)},[])}}function Ch(e){return(e==null?void 0:e.animationName)||"none"}function s8(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var a8=I0[" useInsertionEffect ".trim().toString()]||Rr;function Os({prop:e,defaultProp:t,onChange:r=()=>{},caller:s}){const[a,o,c]=i8({defaultProp:t,onChange:r}),u=e!==void 0,f=u?e:a;{const x=v.useRef(e!==void 0);v.useEffect(()=>{const w=x.current;w!==u&&console.warn(`${s} is changing from ${w?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),x.current=u},[u,s])}const p=v.useCallback(x=>{var w;if(u){const _=o8(x)?x(e):x;_!==e&&((w=c.current)==null||w.call(c,_))}else o(x)},[u,e,o,c]);return[f,p]}function i8({defaultProp:e,onChange:t}){const[r,s]=v.useState(e),a=v.useRef(r),o=v.useRef(t);return a8(()=>{o.current=t},[t]),v.useEffect(()=>{var c;a.current!==r&&((c=o.current)==null||c.call(o,r),a.current=r)},[r,a]),[r,s,o]}function o8(e){return typeof e=="function"}var rj=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),l8="VisuallyHidden",wm=v.forwardRef((e,t)=>n.jsx(qe.span,{...e,ref:t,style:{...rj,...e.style}}));wm.displayName=l8;var c8=wm,N1="ToastProvider",[j1,d8,u8]=Au("Toast"),[nj]=Mr("Toast",[u8]),[h8,ym]=nj(N1),sj=e=>{const{__scopeToast:t,label:r="Notification",duration:s=5e3,swipeDirection:a="right",swipeThreshold:o=50,children:c}=e,[u,f]=v.useState(null),[p,x]=v.useState(0),w=v.useRef(!1),_=v.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${N1}\`. Expected non-empty \`string\`.`),n.jsx(j1.Provider,{scope:t,children:n.jsx(h8,{scope:t,label:r,duration:s,swipeDirection:a,swipeThreshold:o,toastCount:p,viewport:u,onViewportChange:f,onToastAdd:v.useCallback(()=>x(j=>j+1),[]),onToastRemove:v.useCallback(()=>x(j=>j-1),[]),isFocusedToastEscapeKeyDownRef:w,isClosePausedRef:_,children:c})})};sj.displayName=N1;var aj="ToastViewport",f8=["F8"],kx="toast.viewportPause",Tx="toast.viewportResume",ij=v.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:s=f8,label:a="Notifications ({hotkey})",...o}=e,c=ym(aj,r),u=d8(r),f=v.useRef(null),p=v.useRef(null),x=v.useRef(null),w=v.useRef(null),_=tt(t,w,c.onViewportChange),j=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),N=c.toastCount>0;v.useEffect(()=>{const T=E=>{var b;s.length!==0&&s.every(k=>E[k]||E.code===k)&&((b=w.current)==null||b.focus())};return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[s]),v.useEffect(()=>{const T=f.current,E=w.current;if(N&&T&&E){const S=()=>{if(!c.isClosePausedRef.current){const L=new CustomEvent(kx);E.dispatchEvent(L),c.isClosePausedRef.current=!0}},b=()=>{if(c.isClosePausedRef.current){const L=new CustomEvent(Tx);E.dispatchEvent(L),c.isClosePausedRef.current=!1}},k=L=>{!T.contains(L.relatedTarget)&&b()},O=()=>{T.contains(document.activeElement)||b()};return T.addEventListener("focusin",S),T.addEventListener("focusout",k),T.addEventListener("pointermove",S),T.addEventListener("pointerleave",O),window.addEventListener("blur",S),window.addEventListener("focus",b),()=>{T.removeEventListener("focusin",S),T.removeEventListener("focusout",k),T.removeEventListener("pointermove",S),T.removeEventListener("pointerleave",O),window.removeEventListener("blur",S),window.removeEventListener("focus",b)}}},[N,c.isClosePausedRef]);const C=v.useCallback(({tabbingDirection:T})=>{const S=u().map(b=>{const k=b.ref.current,O=[k,...E8(k)];return T==="forwards"?O:O.reverse()});return(T==="forwards"?S.reverse():S).flat()},[u]);return v.useEffect(()=>{const T=w.current;if(T){const E=S=>{var O,L,P;const b=S.altKey||S.ctrlKey||S.metaKey;if(S.key==="Tab"&&!b){const M=document.activeElement,R=S.shiftKey;if(S.target===T&&R){(O=p.current)==null||O.focus();return}const z=C({tabbingDirection:R?"backwards":"forwards"}),q=z.findIndex(ee=>ee===M);lg(z.slice(q+1))?S.preventDefault():R?(L=p.current)==null||L.focus():(P=x.current)==null||P.focus()}};return T.addEventListener("keydown",E),()=>T.removeEventListener("keydown",E)}},[u,C]),n.jsxs(e8,{ref:f,role:"region","aria-label":a.replace("{hotkey}",j),tabIndex:-1,style:{pointerEvents:N?void 0:"none"},children:[N&&n.jsx(Ix,{ref:p,onFocusFromOutsideViewport:()=>{const T=C({tabbingDirection:"forwards"});lg(T)}}),n.jsx(j1.Slot,{scope:r,children:n.jsx(qe.ol,{tabIndex:-1,...o,ref:_})}),N&&n.jsx(Ix,{ref:x,onFocusFromOutsideViewport:()=>{const T=C({tabbingDirection:"backwards"});lg(T)}})]})});ij.displayName=aj;var oj="ToastFocusProxy",Ix=v.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:s,...a}=e,o=ym(oj,r);return n.jsx(wm,{tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:c=>{var p;const u=c.relatedTarget;!((p=o.viewport)!=null&&p.contains(u))&&s()}})});Ix.displayName=oj;var ku="Toast",m8="toast.swipeStart",p8="toast.swipeMove",g8="toast.swipeCancel",x8="toast.swipeEnd",lj=v.forwardRef((e,t)=>{const{forceMount:r,open:s,defaultOpen:a,onOpenChange:o,...c}=e,[u,f]=Os({prop:s,defaultProp:a??!0,onChange:o,caller:ku});return n.jsx(Hr,{present:r||u,children:n.jsx(y8,{open:u,...c,ref:t,onClose:()=>f(!1),onPause:Er(e.onPause),onResume:Er(e.onResume),onSwipeStart:Ie(e.onSwipeStart,p=>{p.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ie(e.onSwipeMove,p=>{const{x,y:w}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","move"),p.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${x}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${w}px`)}),onSwipeCancel:Ie(e.onSwipeCancel,p=>{p.currentTarget.setAttribute("data-swipe","cancel"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ie(e.onSwipeEnd,p=>{const{x,y:w}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","end"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${x}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${w}px`),f(!1)})})})});lj.displayName=ku;var[v8,w8]=nj(ku,{onClose(){}}),y8=v.forwardRef((e,t)=>{const{__scopeToast:r,type:s="foreground",duration:a,open:o,onClose:c,onEscapeKeyDown:u,onPause:f,onResume:p,onSwipeStart:x,onSwipeMove:w,onSwipeCancel:_,onSwipeEnd:j,...N}=e,C=ym(ku,r),[T,E]=v.useState(null),S=tt(t,ee=>E(ee)),b=v.useRef(null),k=v.useRef(null),O=a||C.duration,L=v.useRef(0),P=v.useRef(O),M=v.useRef(0),{onToastAdd:R,onToastRemove:$}=C,Y=Er(()=>{var H;(T==null?void 0:T.contains(document.activeElement))&&((H=C.viewport)==null||H.focus()),c()}),z=v.useCallback(ee=>{!ee||ee===1/0||(window.clearTimeout(M.current),L.current=new Date().getTime(),M.current=window.setTimeout(Y,ee))},[Y]);v.useEffect(()=>{const ee=C.viewport;if(ee){const H=()=>{z(P.current),p==null||p()},re=()=>{const ae=new Date().getTime()-L.current;P.current=P.current-ae,window.clearTimeout(M.current),f==null||f()};return ee.addEventListener(kx,re),ee.addEventListener(Tx,H),()=>{ee.removeEventListener(kx,re),ee.removeEventListener(Tx,H)}}},[C.viewport,O,f,p,z]),v.useEffect(()=>{o&&!C.isClosePausedRef.current&&z(O)},[o,O,C.isClosePausedRef,z]),v.useEffect(()=>(R(),()=>$()),[R,$]);const q=v.useMemo(()=>T?pj(T):null,[T]);return C.viewport?n.jsxs(n.Fragment,{children:[q&&n.jsx(b8,{__scopeToast:r,role:"status","aria-live":s==="foreground"?"assertive":"polite",children:q}),n.jsx(v8,{scope:r,onClose:Y,children:ll.createPortal(n.jsx(j1.ItemSlot,{scope:r,children:n.jsx(JR,{asChild:!0,onEscapeKeyDown:Ie(u,()=>{C.isFocusedToastEscapeKeyDownRef.current||Y(),C.isFocusedToastEscapeKeyDownRef.current=!1}),children:n.jsx(qe.li,{tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":C.swipeDirection,...N,ref:S,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Ie(e.onKeyDown,ee=>{ee.key==="Escape"&&(u==null||u(ee.nativeEvent),ee.nativeEvent.defaultPrevented||(C.isFocusedToastEscapeKeyDownRef.current=!0,Y()))}),onPointerDown:Ie(e.onPointerDown,ee=>{ee.button===0&&(b.current={x:ee.clientX,y:ee.clientY})}),onPointerMove:Ie(e.onPointerMove,ee=>{if(!b.current)return;const H=ee.clientX-b.current.x,re=ee.clientY-b.current.y,ae=!!k.current,ie=["left","right"].includes(C.swipeDirection),te=["left","up"].includes(C.swipeDirection)?Math.min:Math.max,ye=ie?te(0,H):0,ge=ie?0:te(0,re),W=ee.pointerType==="touch"?10:2,J={x:ye,y:ge},G={originalEvent:ee,delta:J};ae?(k.current=J,Eh(p8,w,G,{discrete:!1})):py(J,C.swipeDirection,W)?(k.current=J,Eh(m8,x,G,{discrete:!1}),ee.target.setPointerCapture(ee.pointerId)):(Math.abs(H)>W||Math.abs(re)>W)&&(b.current=null)}),onPointerUp:Ie(e.onPointerUp,ee=>{const H=k.current,re=ee.target;if(re.hasPointerCapture(ee.pointerId)&&re.releasePointerCapture(ee.pointerId),k.current=null,b.current=null,H){const ae=ee.currentTarget,ie={originalEvent:ee,delta:H};py(H,C.swipeDirection,C.swipeThreshold)?Eh(x8,j,ie,{discrete:!0}):Eh(g8,_,ie,{discrete:!0}),ae.addEventListener("click",te=>te.preventDefault(),{once:!0})}})})})}),C.viewport)})]}):null}),b8=e=>{const{__scopeToast:t,children:r,...s}=e,a=ym(ku,t),[o,c]=v.useState(!1),[u,f]=v.useState(!1);return j8(()=>c(!0)),v.useEffect(()=>{const p=window.setTimeout(()=>f(!0),1e3);return()=>window.clearTimeout(p)},[]),u?null:n.jsx(Bc,{asChild:!0,children:n.jsx(wm,{...s,children:o&&n.jsxs(n.Fragment,{children:[a.label," ",r]})})})},_8="ToastTitle",cj=v.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e;return n.jsx(qe.div,{...s,ref:t})});cj.displayName=_8;var N8="ToastDescription",dj=v.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e;return n.jsx(qe.div,{...s,ref:t})});dj.displayName=N8;var uj="ToastAction",hj=v.forwardRef((e,t)=>{const{altText:r,...s}=e;return r.trim()?n.jsx(mj,{altText:r,asChild:!0,children:n.jsx(C1,{...s,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${uj}\`. Expected non-empty \`string\`.`),null)});hj.displayName=uj;var fj="ToastClose",C1=v.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e,a=w8(fj,r);return n.jsx(mj,{asChild:!0,children:n.jsx(qe.button,{type:"button",...s,ref:t,onClick:Ie(e.onClick,a.onClose)})})});C1.displayName=fj;var mj=v.forwardRef((e,t)=>{const{__scopeToast:r,altText:s,...a}=e;return n.jsx(qe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...a,ref:t})});function pj(e){const t=[];return Array.from(e.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&t.push(s.textContent),C8(s)){const a=s.ariaHidden||s.hidden||s.style.display==="none",o=s.dataset.radixToastAnnounceExclude==="";if(!a)if(o){const c=s.dataset.radixToastAnnounceAlt;c&&t.push(c)}else t.push(...pj(s))}}),t}function Eh(e,t,r,{discrete:s}){const a=r.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),s?_1(a,o):a.dispatchEvent(o)}var py=(e,t,r=0)=>{const s=Math.abs(e.x),a=Math.abs(e.y),o=s>a;return t==="left"||t==="right"?o&&s>r:!o&&a>r};function j8(e=()=>{}){const t=Er(e);Rr(()=>{let r=0,s=0;return r=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(s)}},[t])}function C8(e){return e.nodeType===e.ELEMENT_NODE}function E8(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function lg(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var S8=sj,gj=ij,xj=lj,vj=cj,wj=dj,yj=hj,bj=C1;function _j(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=_j(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function Nj(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=_j(e))&&(s&&(s+=" "),s+=t);return s}const gy=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,xy=Nj,Tu=(e,t)=>r=>{var s;if((t==null?void 0:t.variants)==null)return xy(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:o}=t,c=Object.keys(a).map(p=>{const x=r==null?void 0:r[p],w=o==null?void 0:o[p];if(x===null)return null;const _=gy(x)||gy(w);return a[p][_]}),u=r&&Object.entries(r).reduce((p,x)=>{let[w,_]=x;return _===void 0||(p[w]=_),p},{}),f=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((p,x)=>{let{class:w,className:_,...j}=x;return Object.entries(j).every(N=>{let[C,T]=N;return Array.isArray(T)?T.includes({...o,...u}[C]):{...o,...u}[C]===T})?[...p,w,_]:p},[]);return xy(e,c,f,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A8=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jj=(...e)=>e.filter((t,r,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var k8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T8=v.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:a="",children:o,iconNode:c,...u},f)=>v.createElement("svg",{ref:f,...k8,width:t,height:t,stroke:e,strokeWidth:s?Number(r)*24/Number(t):r,className:jj("lucide",a),...u},[...c.map(([p,x])=>v.createElement(p,x)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=(e,t)=>{const r=v.forwardRef(({className:s,...a},o)=>v.createElement(T8,{ref:o,iconNode:t,className:jj(`lucide-${A8(e)}`,s),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=Ue("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fd=Ue("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=Ue("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=Ue("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=Ue("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=Ue("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=Ue("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=Ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=Ue("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=Ue("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I8=Ue("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=Ue("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=Ue("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=Ue("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=Ue("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P8=Ue("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=Ue("CircleStop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ef=Ue("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=Ue("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cg=Ue("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tf=Ue("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=Ue("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O8=Ue("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D8=Ue("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=Ue("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=Ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M8=Ue("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=Ue("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=Ue("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=Ue("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=Ue("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=Ue("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=Ue("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=Ue("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=Ue("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=Ue("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=Ue("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8=Ue("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=Ue("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=Ue("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=Ue("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=Ue("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=Ue("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=Ue("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=Ue("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=Ue("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=Ue("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=Ue("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=Ue("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B8=Ue("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=Ue("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=Ue("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=Ue("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z8=Ue("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U8=Ue("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8=Ue("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=Ue("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=Ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V8=Ue("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=Ue("Radar",[["path",{d:"M19.07 4.93A10 10 0 0 0 6.99 3.34",key:"z3du51"}],["path",{d:"M4 6h.01",key:"oypzma"}],["path",{d:"M2.29 9.62A10 10 0 1 0 21.31 8.35",key:"qzzz0"}],["path",{d:"M16.24 7.76A6 6 0 1 0 8.23 16.67",key:"1yjesh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M17.99 11.66A6 6 0 0 1 15.77 16.67",key:"1u2y91"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"m13.41 10.59 5.66-5.66",key:"mhq4k0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q8=Ue("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W8=Ue("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=Ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=Ue("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=Ue("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=Ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=Ue("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=Ue("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H8=Ue("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=Ue("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=Ue("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=Ue("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=Ue("SwitchCamera",[["path",{d:"M11 19H4a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h5",key:"mtk2lu"}],["path",{d:"M13 5h7a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-5",key:"120jsl"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"m18 22-3-3 3-3",key:"kgdoj7"}],["path",{d:"m6 2 3 3-3 3",key:"1fnbkv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rf=Ue("Text",[["path",{d:"M17 6.1H3",key:"wptmhv"}],["path",{d:"M21 12.1H3",key:"1j38uz"}],["path",{d:"M15.1 18H3",key:"1nb16a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=Ue("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=Ue("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=Ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G8=Ue("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=Ue("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=Ue("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bm=Ue("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=Ue("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=Ue("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X8=Ue("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=Ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K8=Ue("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),R1="-",Y8=e=>{const t=Z8(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:c=>{const u=c.split(R1);return u[0]===""&&u.length!==1&&u.shift(),Dj(u,t)||Q8(c)},getConflictingClassGroupIds:(c,u)=>{const f=r[c]||[];return u&&s[c]?[...f,...s[c]]:f}}},Dj=(e,t)=>{var c;if(e.length===0)return t.classGroupId;const r=e[0],s=t.nextPart.get(r),a=s?Dj(e.slice(1),s):void 0;if(a)return a;if(t.validators.length===0)return;const o=e.join(R1);return(c=t.validators.find(({validator:u})=>u(o)))==null?void 0:c.classGroupId},jy=/^\[(.+)\]$/,Q8=e=>{if(jy.test(e)){const t=jy.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},Z8=e=>{const{theme:t,prefix:r}=e,s={nextPart:new Map,validators:[]};return eP(Object.entries(e.classGroups),r).forEach(([o,c])=>{Dx(c,s,o,t)}),s},Dx=(e,t,r,s)=>{e.forEach(a=>{if(typeof a=="string"){const o=a===""?t:Cy(t,a);o.classGroupId=r;return}if(typeof a=="function"){if(J8(a)){Dx(a(s),t,r,s);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([o,c])=>{Dx(c,Cy(t,o),r,s)})})},Cy=(e,t)=>{let r=e;return t.split(R1).forEach(s=>{r.nextPart.has(s)||r.nextPart.set(s,{nextPart:new Map,validators:[]}),r=r.nextPart.get(s)}),r},J8=e=>e.isThemeGetter,eP=(e,t)=>t?e.map(([r,s])=>{const a=s.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([c,u])=>[t+c,u])):o);return[r,a]}):e,tP=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,s=new Map;const a=(o,c)=>{r.set(o,c),t++,t>e&&(t=0,s=r,r=new Map)};return{get(o){let c=r.get(o);if(c!==void 0)return c;if((c=s.get(o))!==void 0)return a(o,c),c},set(o,c){r.has(o)?r.set(o,c):a(o,c)}}},Mj="!",rP=e=>{const{separator:t,experimentalParseClassName:r}=e,s=t.length===1,a=t[0],o=t.length,c=u=>{const f=[];let p=0,x=0,w;for(let T=0;T<u.length;T++){let E=u[T];if(p===0){if(E===a&&(s||u.slice(T,T+o)===t)){f.push(u.slice(x,T)),x=T+o;continue}if(E==="/"){w=T;continue}}E==="["?p++:E==="]"&&p--}const _=f.length===0?u:u.substring(x),j=_.startsWith(Mj),N=j?_.substring(1):_,C=w&&w>x?w-x:void 0;return{modifiers:f,hasImportantModifier:j,baseClassName:N,maybePostfixModifierPosition:C}};return r?u=>r({className:u,parseClassName:c}):c},nP=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(s=>{s[0]==="["?(t.push(...r.sort(),s),r=[]):r.push(s)}),t.push(...r.sort()),t},sP=e=>({cache:tP(e.cacheSize),parseClassName:rP(e),...Y8(e)}),aP=/\s+/,iP=(e,t)=>{const{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:a}=t,o=[],c=e.trim().split(aP);let u="";for(let f=c.length-1;f>=0;f-=1){const p=c[f],{modifiers:x,hasImportantModifier:w,baseClassName:_,maybePostfixModifierPosition:j}=r(p);let N=!!j,C=s(N?_.substring(0,j):_);if(!C){if(!N){u=p+(u.length>0?" "+u:u);continue}if(C=s(_),!C){u=p+(u.length>0?" "+u:u);continue}N=!1}const T=nP(x).join(":"),E=w?T+Mj:T,S=E+C;if(o.includes(S))continue;o.push(S);const b=a(C,N);for(let k=0;k<b.length;++k){const O=b[k];o.push(E+O)}u=p+(u.length>0?" "+u:u)}return u};function oP(){let e=0,t,r,s="";for(;e<arguments.length;)(t=arguments[e++])&&(r=Lj(t))&&(s&&(s+=" "),s+=r);return s}const Lj=e=>{if(typeof e=="string")return e;let t,r="";for(let s=0;s<e.length;s++)e[s]&&(t=Lj(e[s]))&&(r&&(r+=" "),r+=t);return r};function lP(e,...t){let r,s,a,o=c;function c(f){const p=t.reduce((x,w)=>w(x),e());return r=sP(p),s=r.cache.get,a=r.cache.set,o=u,u(f)}function u(f){const p=s(f);if(p)return p;const x=iP(f,r);return a(f,x),x}return function(){return o(oP.apply(null,arguments))}}const or=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},Fj=/^\[(?:([a-z-]+):)?(.+)\]$/i,cP=/^\d+\/\d+$/,dP=new Set(["px","full","screen"]),uP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,hP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,fP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,mP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,pP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Oa=e=>ic(e)||dP.has(e)||cP.test(e),di=e=>$c(e,"length",NP),ic=e=>!!e&&!Number.isNaN(Number(e)),dg=e=>$c(e,"number",ic),md=e=>!!e&&Number.isInteger(Number(e)),gP=e=>e.endsWith("%")&&ic(e.slice(0,-1)),vt=e=>Fj.test(e),ui=e=>uP.test(e),xP=new Set(["length","size","percentage"]),vP=e=>$c(e,xP,Bj),wP=e=>$c(e,"position",Bj),yP=new Set(["image","url"]),bP=e=>$c(e,yP,CP),_P=e=>$c(e,"",jP),pd=()=>!0,$c=(e,t,r)=>{const s=Fj.exec(e);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):r(s[2]):!1},NP=e=>hP.test(e)&&!fP.test(e),Bj=()=>!1,jP=e=>mP.test(e),CP=e=>pP.test(e),EP=()=>{const e=or("colors"),t=or("spacing"),r=or("blur"),s=or("brightness"),a=or("borderColor"),o=or("borderRadius"),c=or("borderSpacing"),u=or("borderWidth"),f=or("contrast"),p=or("grayscale"),x=or("hueRotate"),w=or("invert"),_=or("gap"),j=or("gradientColorStops"),N=or("gradientColorStopPositions"),C=or("inset"),T=or("margin"),E=or("opacity"),S=or("padding"),b=or("saturate"),k=or("scale"),O=or("sepia"),L=or("skew"),P=or("space"),M=or("translate"),R=()=>["auto","contain","none"],$=()=>["auto","hidden","clip","visible","scroll"],Y=()=>["auto",vt,t],z=()=>[vt,t],q=()=>["",Oa,di],ee=()=>["auto",ic,vt],H=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],re=()=>["solid","dashed","dotted","double","none"],ae=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ie=()=>["start","end","center","between","around","evenly","stretch"],te=()=>["","0",vt],ye=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ge=()=>[ic,vt];return{cacheSize:500,separator:":",theme:{colors:[pd],spacing:[Oa,di],blur:["none","",ui,vt],brightness:ge(),borderColor:[e],borderRadius:["none","","full",ui,vt],borderSpacing:z(),borderWidth:q(),contrast:ge(),grayscale:te(),hueRotate:ge(),invert:te(),gap:z(),gradientColorStops:[e],gradientColorStopPositions:[gP,di],inset:Y(),margin:Y(),opacity:ge(),padding:z(),saturate:ge(),scale:ge(),sepia:te(),skew:ge(),space:z(),translate:z()},classGroups:{aspect:[{aspect:["auto","square","video",vt]}],container:["container"],columns:[{columns:[ui]}],"break-after":[{"break-after":ye()}],"break-before":[{"break-before":ye()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...H(),vt]}],overflow:[{overflow:$()}],"overflow-x":[{"overflow-x":$()}],"overflow-y":[{"overflow-y":$()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[C]}],"inset-x":[{"inset-x":[C]}],"inset-y":[{"inset-y":[C]}],start:[{start:[C]}],end:[{end:[C]}],top:[{top:[C]}],right:[{right:[C]}],bottom:[{bottom:[C]}],left:[{left:[C]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",md,vt]}],basis:[{basis:Y()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",vt]}],grow:[{grow:te()}],shrink:[{shrink:te()}],order:[{order:["first","last","none",md,vt]}],"grid-cols":[{"grid-cols":[pd]}],"col-start-end":[{col:["auto",{span:["full",md,vt]},vt]}],"col-start":[{"col-start":ee()}],"col-end":[{"col-end":ee()}],"grid-rows":[{"grid-rows":[pd]}],"row-start-end":[{row:["auto",{span:[md,vt]},vt]}],"row-start":[{"row-start":ee()}],"row-end":[{"row-end":ee()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",vt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",vt]}],gap:[{gap:[_]}],"gap-x":[{"gap-x":[_]}],"gap-y":[{"gap-y":[_]}],"justify-content":[{justify:["normal",...ie()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...ie(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...ie(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[S]}],px:[{px:[S]}],py:[{py:[S]}],ps:[{ps:[S]}],pe:[{pe:[S]}],pt:[{pt:[S]}],pr:[{pr:[S]}],pb:[{pb:[S]}],pl:[{pl:[S]}],m:[{m:[T]}],mx:[{mx:[T]}],my:[{my:[T]}],ms:[{ms:[T]}],me:[{me:[T]}],mt:[{mt:[T]}],mr:[{mr:[T]}],mb:[{mb:[T]}],ml:[{ml:[T]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",vt,t]}],"min-w":[{"min-w":[vt,t,"min","max","fit"]}],"max-w":[{"max-w":[vt,t,"none","full","min","max","fit","prose",{screen:[ui]},ui]}],h:[{h:[vt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[vt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[vt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[vt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ui,di]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",dg]}],"font-family":[{font:[pd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",vt]}],"line-clamp":[{"line-clamp":["none",ic,dg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Oa,vt]}],"list-image":[{"list-image":["none",vt]}],"list-style-type":[{list:["none","disc","decimal",vt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...re(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Oa,di]}],"underline-offset":[{"underline-offset":["auto",Oa,vt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",vt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",vt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...H(),wP]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",vP]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},bP]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[N]}],"gradient-via-pos":[{via:[N]}],"gradient-to-pos":[{to:[N]}],"gradient-from":[{from:[j]}],"gradient-via":[{via:[j]}],"gradient-to":[{to:[j]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...re(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:re()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...re()]}],"outline-offset":[{"outline-offset":[Oa,vt]}],"outline-w":[{outline:[Oa,di]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[Oa,di]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ui,_P]}],"shadow-color":[{shadow:[pd]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...ae(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ae()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[s]}],contrast:[{contrast:[f]}],"drop-shadow":[{"drop-shadow":["","none",ui,vt]}],grayscale:[{grayscale:[p]}],"hue-rotate":[{"hue-rotate":[x]}],invert:[{invert:[w]}],saturate:[{saturate:[b]}],sepia:[{sepia:[O]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[f]}],"backdrop-grayscale":[{"backdrop-grayscale":[p]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[x]}],"backdrop-invert":[{"backdrop-invert":[w]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[O]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[c]}],"border-spacing-x":[{"border-spacing-x":[c]}],"border-spacing-y":[{"border-spacing-y":[c]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",vt]}],duration:[{duration:ge()}],ease:[{ease:["linear","in","out","in-out",vt]}],delay:[{delay:ge()}],animate:[{animate:["none","spin","ping","pulse","bounce",vt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[md,vt]}],"translate-x":[{"translate-x":[M]}],"translate-y":[{"translate-y":[M]}],"skew-x":[{"skew-x":[L]}],"skew-y":[{"skew-y":[L]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",vt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",vt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",vt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Oa,di,dg]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},SP=lP(EP);function Le(...e){return SP(Nj(e))}const AP=S8,zj=v.forwardRef(({className:e,...t},r)=>n.jsx(gj,{ref:r,className:Le("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));zj.displayName=gj.displayName;const kP=Tu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Uj=v.forwardRef(({className:e,variant:t,...r},s)=>n.jsx(xj,{ref:s,className:Le(kP({variant:t}),e),...r}));Uj.displayName=xj.displayName;const TP=v.forwardRef(({className:e,...t},r)=>n.jsx(yj,{ref:r,className:Le("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));TP.displayName=yj.displayName;const $j=v.forwardRef(({className:e,...t},r)=>n.jsx(bj,{ref:r,className:Le("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:n.jsx(sr,{className:"h-4 w-4"})}));$j.displayName=bj.displayName;const Vj=v.forwardRef(({className:e,...t},r)=>n.jsx(vj,{ref:r,className:Le("text-sm font-semibold",e),...t}));Vj.displayName=vj.displayName;const qj=v.forwardRef(({className:e,...t},r)=>n.jsx(wj,{ref:r,className:Le("text-sm opacity-90",e),...t}));qj.displayName=wj.displayName;function IP(){const{toasts:e}=YN();return n.jsxs(AP,{children:[e.map(function({id:t,title:r,description:s,action:a,...o}){return n.jsxs(Uj,{...o,children:[n.jsxs("div",{className:"grid gap-1",children:[r&&n.jsx(Vj,{children:r}),s&&n.jsx(qj,{children:s})]}),a,n.jsx($j,{})]},t)}),n.jsx(zj,{})]})}var Ey=["light","dark"],RP="(prefers-color-scheme: dark)",PP=v.createContext(void 0),OP={setTheme:e=>{},themes:[]},DP=()=>{var e;return(e=v.useContext(PP))!=null?e:OP};v.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:s,enableColorScheme:a,defaultTheme:o,value:c,attrs:u,nonce:f})=>{let p=o==="system",x=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${u.map(N=>`'${N}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,w=a?Ey.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",_=(N,C=!1,T=!0)=>{let E=c?c[N]:N,S=C?N+"|| ''":`'${E}'`,b="";return a&&T&&!C&&Ey.includes(N)&&(b+=`d.style.colorScheme = '${N}';`),r==="class"?C||E?b+=`c.add(${S})`:b+="null":E&&(b+=`d[s](n,${S})`),b},j=e?`!function(){${x}${_(e)}}()`:s?`!function(){try{${x}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${p})){var t='${RP}',m=window.matchMedia(t);if(m.media!==t||m.matches){${_("dark")}}else{${_("light")}}}else if(e){${c?`var x=${JSON.stringify(c)};`:""}${_(c?"x[e]":"e",!0)}}${p?"":"else{"+_(o,!1,!1)+"}"}${w}}catch(e){}}()`:`!function(){try{${x}var e=localStorage.getItem('${t}');if(e){${c?`var x=${JSON.stringify(c)};`:""}${_(c?"x[e]":"e",!0)}}else{${_(o,!1,!1)};}${w}}catch(t){}}();`;return v.createElement("script",{nonce:f,dangerouslySetInnerHTML:{__html:j}})});var MP=e=>{switch(e){case"success":return BP;case"info":return UP;case"warning":return zP;case"error":return $P;default:return null}},LP=Array(12).fill(0),FP=({visible:e,className:t})=>$e.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},$e.createElement("div",{className:"sonner-spinner"},LP.map((r,s)=>$e.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),BP=$e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$e.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),zP=$e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},$e.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),UP=$e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),$P=$e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),VP=$e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},$e.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),$e.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),qP=()=>{let[e,t]=$e.useState(document.hidden);return $e.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},Mx=1,WP=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...s}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Mx++,o=this.toasts.find(u=>u.id===a),c=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),o?this.toasts=this.toasts.map(u=>u.id===a?(this.publish({...u,...e,id:a,title:r}),{...u,...e,id:a,dismissible:c,title:r}):u):this.addToast({title:r,...s,dismissible:c,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let s=e instanceof Promise?e:e(),a=r!==void 0,o,c=s.then(async f=>{if(o=["resolve",f],$e.isValidElement(f))a=!1,this.create({id:r,type:"default",message:f});else if(GP(f)&&!f.ok){a=!1;let p=typeof t.error=="function"?await t.error(`HTTP error! status: ${f.status}`):t.error,x=typeof t.description=="function"?await t.description(`HTTP error! status: ${f.status}`):t.description;this.create({id:r,type:"error",message:p,description:x})}else if(t.success!==void 0){a=!1;let p=typeof t.success=="function"?await t.success(f):t.success,x=typeof t.description=="function"?await t.description(f):t.description;this.create({id:r,type:"success",message:p,description:x})}}).catch(async f=>{if(o=["reject",f],t.error!==void 0){a=!1;let p=typeof t.error=="function"?await t.error(f):t.error,x=typeof t.description=="function"?await t.description(f):t.description;this.create({id:r,type:"error",message:p,description:x})}}).finally(()=>{var f;a&&(this.dismiss(r),r=void 0),(f=t.finally)==null||f.call(t)}),u=()=>new Promise((f,p)=>c.then(()=>o[0]==="reject"?p(o[1]):f(o[1])).catch(p));return typeof r!="string"&&typeof r!="number"?{unwrap:u}:Object.assign(r,{unwrap:u})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||Mx++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},zn=new WP,HP=(e,t)=>{let r=(t==null?void 0:t.id)||Mx++;return zn.addToast({title:e,...t,id:r}),r},GP=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",XP=HP,KP=()=>zn.toasts,YP=()=>zn.getActiveToasts(),X=Object.assign(XP,{success:zn.success,info:zn.info,warning:zn.warning,error:zn.error,custom:zn.custom,message:zn.message,promise:zn.promise,dismiss:zn.dismiss,loading:zn.loading},{getHistory:KP,getToasts:YP});function QP(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t==="top"&&r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}QP(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Sh(e){return e.label!==void 0}var ZP=3,JP="32px",e6="16px",Sy=4e3,t6=356,r6=14,n6=20,s6=200;function $s(...e){return e.filter(Boolean).join(" ")}function a6(e){let[t,r]=e.split("-"),s=[];return t&&s.push(t),r&&s.push(r),s}var i6=e=>{var t,r,s,a,o,c,u,f,p,x,w;let{invert:_,toast:j,unstyled:N,interacting:C,setHeights:T,visibleToasts:E,heights:S,index:b,toasts:k,expanded:O,removeToast:L,defaultRichColors:P,closeButton:M,style:R,cancelButtonStyle:$,actionButtonStyle:Y,className:z="",descriptionClassName:q="",duration:ee,position:H,gap:re,loadingIcon:ae,expandByDefault:ie,classNames:te,icons:ye,closeButtonAriaLabel:ge="Close toast",pauseWhenPageIsHidden:W}=e,[J,G]=$e.useState(null),[se,ce]=$e.useState(null),[ne,he]=$e.useState(!1),[Ae,Pe]=$e.useState(!1),[Be,Ee]=$e.useState(!1),[ue,Fe]=$e.useState(!1),[_e,Ze]=$e.useState(!1),[be,ze]=$e.useState(0),[He,Ft]=$e.useState(0),pe=$e.useRef(j.duration||ee||Sy),Je=$e.useRef(null),at=$e.useRef(null),it=b===0,ar=b+1<=E,Nt=j.type,Sr=j.dismissible!==!1,At=j.className||"",Ve=j.descriptionClassName||"",Se=$e.useMemo(()=>S.findIndex(Xe=>Xe.toastId===j.id)||0,[S,j.id]),ut=$e.useMemo(()=>{var Xe;return(Xe=j.closeButton)!=null?Xe:M},[j.closeButton,M]),lt=$e.useMemo(()=>j.duration||ee||Sy,[j.duration,ee]),ft=$e.useRef(0),Te=$e.useRef(0),Dt=$e.useRef(0),mt=$e.useRef(null),[Pt,Rn]=H.split("-"),Bs=$e.useMemo(()=>S.reduce((Xe,Ot,xt)=>xt>=Se?Xe:Xe+Ot.height,0),[S,Se]),uo=qP(),kt=j.invert||_,fn=Nt==="loading";Te.current=$e.useMemo(()=>Se*re+Bs,[Se,Bs]),$e.useEffect(()=>{pe.current=lt},[lt]),$e.useEffect(()=>{he(!0)},[]),$e.useEffect(()=>{let Xe=at.current;if(Xe){let Ot=Xe.getBoundingClientRect().height;return Ft(Ot),T(xt=>[{toastId:j.id,height:Ot,position:j.position},...xt]),()=>T(xt=>xt.filter(Gr=>Gr.toastId!==j.id))}},[T,j.id]),$e.useLayoutEffect(()=>{if(!ne)return;let Xe=at.current,Ot=Xe.style.height;Xe.style.height="auto";let xt=Xe.getBoundingClientRect().height;Xe.style.height=Ot,Ft(xt),T(Gr=>Gr.find(mn=>mn.toastId===j.id)?Gr.map(mn=>mn.toastId===j.id?{...mn,height:xt}:mn):[{toastId:j.id,height:xt,position:j.position},...Gr])},[ne,j.title,j.description,T,j.id]);let Qn=$e.useCallback(()=>{Pe(!0),ze(Te.current),T(Xe=>Xe.filter(Ot=>Ot.toastId!==j.id)),setTimeout(()=>{L(j)},s6)},[j,L,T,Te]);$e.useEffect(()=>{if(j.promise&&Nt==="loading"||j.duration===1/0||j.type==="loading")return;let Xe;return O||C||W&&uo?(()=>{if(Dt.current<ft.current){let Ot=new Date().getTime()-ft.current;pe.current=pe.current-Ot}Dt.current=new Date().getTime()})():pe.current!==1/0&&(ft.current=new Date().getTime(),Xe=setTimeout(()=>{var Ot;(Ot=j.onAutoClose)==null||Ot.call(j,j),Qn()},pe.current)),()=>clearTimeout(Xe)},[O,C,j,Nt,W,uo,Qn]),$e.useEffect(()=>{j.delete&&Qn()},[Qn,j.delete]);function ho(){var Xe,Ot,xt;return ye!=null&&ye.loading?$e.createElement("div",{className:$s(te==null?void 0:te.loader,(Xe=j==null?void 0:j.classNames)==null?void 0:Xe.loader,"sonner-loader"),"data-visible":Nt==="loading"},ye.loading):ae?$e.createElement("div",{className:$s(te==null?void 0:te.loader,(Ot=j==null?void 0:j.classNames)==null?void 0:Ot.loader,"sonner-loader"),"data-visible":Nt==="loading"},ae):$e.createElement(FP,{className:$s(te==null?void 0:te.loader,(xt=j==null?void 0:j.classNames)==null?void 0:xt.loader),visible:Nt==="loading"})}return $e.createElement("li",{tabIndex:0,ref:at,className:$s(z,At,te==null?void 0:te.toast,(t=j==null?void 0:j.classNames)==null?void 0:t.toast,te==null?void 0:te.default,te==null?void 0:te[Nt],(r=j==null?void 0:j.classNames)==null?void 0:r[Nt]),"data-sonner-toast":"","data-rich-colors":(s=j.richColors)!=null?s:P,"data-styled":!(j.jsx||j.unstyled||N),"data-mounted":ne,"data-promise":!!j.promise,"data-swiped":_e,"data-removed":Ae,"data-visible":ar,"data-y-position":Pt,"data-x-position":Rn,"data-index":b,"data-front":it,"data-swiping":Be,"data-dismissible":Sr,"data-type":Nt,"data-invert":kt,"data-swipe-out":ue,"data-swipe-direction":se,"data-expanded":!!(O||ie&&ne),style:{"--index":b,"--toasts-before":b,"--z-index":k.length-b,"--offset":`${Ae?be:Te.current}px`,"--initial-height":ie?"auto":`${He}px`,...R,...j.style},onDragEnd:()=>{Ee(!1),G(null),mt.current=null},onPointerDown:Xe=>{fn||!Sr||(Je.current=new Date,ze(Te.current),Xe.target.setPointerCapture(Xe.pointerId),Xe.target.tagName!=="BUTTON"&&(Ee(!0),mt.current={x:Xe.clientX,y:Xe.clientY}))},onPointerUp:()=>{var Xe,Ot,xt,Gr;if(ue||!Sr)return;mt.current=null;let mn=Number(((Xe=at.current)==null?void 0:Xe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Lr=Number(((Ot=at.current)==null?void 0:Ot.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Pa=new Date().getTime()-((xt=Je.current)==null?void 0:xt.getTime()),Fr=J==="x"?mn:Lr,gs=Math.abs(Fr)/Pa;if(Math.abs(Fr)>=n6||gs>.11){ze(Te.current),(Gr=j.onDismiss)==null||Gr.call(j,j),ce(J==="x"?mn>0?"right":"left":Lr>0?"down":"up"),Qn(),Fe(!0),Ze(!1);return}Ee(!1),G(null)},onPointerMove:Xe=>{var Ot,xt,Gr,mn;if(!mt.current||!Sr||((Ot=window.getSelection())==null?void 0:Ot.toString().length)>0)return;let Lr=Xe.clientY-mt.current.y,Pa=Xe.clientX-mt.current.x,Fr=(xt=e.swipeDirections)!=null?xt:a6(H);!J&&(Math.abs(Pa)>1||Math.abs(Lr)>1)&&G(Math.abs(Pa)>Math.abs(Lr)?"x":"y");let gs={x:0,y:0};J==="y"?(Fr.includes("top")||Fr.includes("bottom"))&&(Fr.includes("top")&&Lr<0||Fr.includes("bottom")&&Lr>0)&&(gs.y=Lr):J==="x"&&(Fr.includes("left")||Fr.includes("right"))&&(Fr.includes("left")&&Pa<0||Fr.includes("right")&&Pa>0)&&(gs.x=Pa),(Math.abs(gs.x)>0||Math.abs(gs.y)>0)&&Ze(!0),(Gr=at.current)==null||Gr.style.setProperty("--swipe-amount-x",`${gs.x}px`),(mn=at.current)==null||mn.style.setProperty("--swipe-amount-y",`${gs.y}px`)}},ut&&!j.jsx?$e.createElement("button",{"aria-label":ge,"data-disabled":fn,"data-close-button":!0,onClick:fn||!Sr?()=>{}:()=>{var Xe;Qn(),(Xe=j.onDismiss)==null||Xe.call(j,j)},className:$s(te==null?void 0:te.closeButton,(a=j==null?void 0:j.classNames)==null?void 0:a.closeButton)},(o=ye==null?void 0:ye.close)!=null?o:VP):null,j.jsx||v.isValidElement(j.title)?j.jsx?j.jsx:typeof j.title=="function"?j.title():j.title:$e.createElement($e.Fragment,null,Nt||j.icon||j.promise?$e.createElement("div",{"data-icon":"",className:$s(te==null?void 0:te.icon,(c=j==null?void 0:j.classNames)==null?void 0:c.icon)},j.promise||j.type==="loading"&&!j.icon?j.icon||ho():null,j.type!=="loading"?j.icon||(ye==null?void 0:ye[Nt])||MP(Nt):null):null,$e.createElement("div",{"data-content":"",className:$s(te==null?void 0:te.content,(u=j==null?void 0:j.classNames)==null?void 0:u.content)},$e.createElement("div",{"data-title":"",className:$s(te==null?void 0:te.title,(f=j==null?void 0:j.classNames)==null?void 0:f.title)},typeof j.title=="function"?j.title():j.title),j.description?$e.createElement("div",{"data-description":"",className:$s(q,Ve,te==null?void 0:te.description,(p=j==null?void 0:j.classNames)==null?void 0:p.description)},typeof j.description=="function"?j.description():j.description):null),v.isValidElement(j.cancel)?j.cancel:j.cancel&&Sh(j.cancel)?$e.createElement("button",{"data-button":!0,"data-cancel":!0,style:j.cancelButtonStyle||$,onClick:Xe=>{var Ot,xt;Sh(j.cancel)&&Sr&&((xt=(Ot=j.cancel).onClick)==null||xt.call(Ot,Xe),Qn())},className:$s(te==null?void 0:te.cancelButton,(x=j==null?void 0:j.classNames)==null?void 0:x.cancelButton)},j.cancel.label):null,v.isValidElement(j.action)?j.action:j.action&&Sh(j.action)?$e.createElement("button",{"data-button":!0,"data-action":!0,style:j.actionButtonStyle||Y,onClick:Xe=>{var Ot,xt;Sh(j.action)&&((xt=(Ot=j.action).onClick)==null||xt.call(Ot,Xe),!Xe.defaultPrevented&&Qn())},className:$s(te==null?void 0:te.actionButton,(w=j==null?void 0:j.classNames)==null?void 0:w.actionButton)},j.action.label):null))};function Ay(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function o6(e,t){let r={};return[e,t].forEach((s,a)=>{let o=a===1,c=o?"--mobile-offset":"--offset",u=o?e6:JP;function f(p){["top","right","bottom","left"].forEach(x=>{r[`${c}-${x}`]=typeof p=="number"?`${p}px`:p})}typeof s=="number"||typeof s=="string"?f(s):typeof s=="object"?["top","right","bottom","left"].forEach(p=>{s[p]===void 0?r[`${c}-${p}`]=u:r[`${c}-${p}`]=typeof s[p]=="number"?`${s[p]}px`:s[p]}):f(u)}),r}var l6=v.forwardRef(function(e,t){let{invert:r,position:s="bottom-right",hotkey:a=["altKey","KeyT"],expand:o,closeButton:c,className:u,offset:f,mobileOffset:p,theme:x="light",richColors:w,duration:_,style:j,visibleToasts:N=ZP,toastOptions:C,dir:T=Ay(),gap:E=r6,loadingIcon:S,icons:b,containerAriaLabel:k="Notifications",pauseWhenPageIsHidden:O}=e,[L,P]=$e.useState([]),M=$e.useMemo(()=>Array.from(new Set([s].concat(L.filter(W=>W.position).map(W=>W.position)))),[L,s]),[R,$]=$e.useState([]),[Y,z]=$e.useState(!1),[q,ee]=$e.useState(!1),[H,re]=$e.useState(x!=="system"?x:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ae=$e.useRef(null),ie=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),te=$e.useRef(null),ye=$e.useRef(!1),ge=$e.useCallback(W=>{P(J=>{var G;return(G=J.find(se=>se.id===W.id))!=null&&G.delete||zn.dismiss(W.id),J.filter(({id:se})=>se!==W.id)})},[]);return $e.useEffect(()=>zn.subscribe(W=>{if(W.dismiss){P(J=>J.map(G=>G.id===W.id?{...G,delete:!0}:G));return}setTimeout(()=>{XN.flushSync(()=>{P(J=>{let G=J.findIndex(se=>se.id===W.id);return G!==-1?[...J.slice(0,G),{...J[G],...W},...J.slice(G+1)]:[W,...J]})})})}),[]),$e.useEffect(()=>{if(x!=="system"){re(x);return}if(x==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?re("dark"):re("light")),typeof window>"u")return;let W=window.matchMedia("(prefers-color-scheme: dark)");try{W.addEventListener("change",({matches:J})=>{re(J?"dark":"light")})}catch{W.addListener(({matches:G})=>{try{re(G?"dark":"light")}catch(se){console.error(se)}})}},[x]),$e.useEffect(()=>{L.length<=1&&z(!1)},[L]),$e.useEffect(()=>{let W=J=>{var G,se;a.every(ce=>J[ce]||J.code===ce)&&(z(!0),(G=ae.current)==null||G.focus()),J.code==="Escape"&&(document.activeElement===ae.current||(se=ae.current)!=null&&se.contains(document.activeElement))&&z(!1)};return document.addEventListener("keydown",W),()=>document.removeEventListener("keydown",W)},[a]),$e.useEffect(()=>{if(ae.current)return()=>{te.current&&(te.current.focus({preventScroll:!0}),te.current=null,ye.current=!1)}},[ae.current]),$e.createElement("section",{ref:t,"aria-label":`${k} ${ie}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},M.map((W,J)=>{var G;let[se,ce]=W.split("-");return L.length?$e.createElement("ol",{key:W,dir:T==="auto"?Ay():T,tabIndex:-1,ref:ae,className:u,"data-sonner-toaster":!0,"data-theme":H,"data-y-position":se,"data-lifted":Y&&L.length>1&&!o,"data-x-position":ce,style:{"--front-toast-height":`${((G=R[0])==null?void 0:G.height)||0}px`,"--width":`${t6}px`,"--gap":`${E}px`,...j,...o6(f,p)},onBlur:ne=>{ye.current&&!ne.currentTarget.contains(ne.relatedTarget)&&(ye.current=!1,te.current&&(te.current.focus({preventScroll:!0}),te.current=null))},onFocus:ne=>{ne.target instanceof HTMLElement&&ne.target.dataset.dismissible==="false"||ye.current||(ye.current=!0,te.current=ne.relatedTarget)},onMouseEnter:()=>z(!0),onMouseMove:()=>z(!0),onMouseLeave:()=>{q||z(!1)},onDragEnd:()=>z(!1),onPointerDown:ne=>{ne.target instanceof HTMLElement&&ne.target.dataset.dismissible==="false"||ee(!0)},onPointerUp:()=>ee(!1)},L.filter(ne=>!ne.position&&J===0||ne.position===W).map((ne,he)=>{var Ae,Pe;return $e.createElement(i6,{key:ne.id,icons:b,index:he,toast:ne,defaultRichColors:w,duration:(Ae=C==null?void 0:C.duration)!=null?Ae:_,className:C==null?void 0:C.className,descriptionClassName:C==null?void 0:C.descriptionClassName,invert:r,visibleToasts:N,closeButton:(Pe=C==null?void 0:C.closeButton)!=null?Pe:c,interacting:q,position:W,style:C==null?void 0:C.style,unstyled:C==null?void 0:C.unstyled,classNames:C==null?void 0:C.classNames,cancelButtonStyle:C==null?void 0:C.cancelButtonStyle,actionButtonStyle:C==null?void 0:C.actionButtonStyle,removeToast:ge,toasts:L.filter(Be=>Be.position==ne.position),heights:R.filter(Be=>Be.position==ne.position),setHeights:$,expandByDefault:o,gap:E,loadingIcon:S,expanded:Y,pauseWhenPageIsHidden:O,swipeDirections:e.swipeDirections})})):null}))});const c6=({...e})=>{const{theme:t="system"}=DP();return n.jsx(l6,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var d6=I0[" useId ".trim().toString()]||(()=>{}),u6=0;function un(e){const[t,r]=v.useState(d6());return Rr(()=>{r(s=>s??String(u6++))},[e]),t?`radix-${t}`:""}const h6=["top","right","bottom","left"],Gi=Math.min,ns=Math.max,Df=Math.round,Ah=Math.floor,Aa=e=>({x:e,y:e}),f6={left:"right",right:"left",bottom:"top",top:"bottom"},m6={start:"end",end:"start"};function Lx(e,t,r){return ns(e,Gi(t,r))}function Za(e,t){return typeof e=="function"?e(t):e}function Ja(e){return e.split("-")[0]}function Vc(e){return e.split("-")[1]}function P1(e){return e==="x"?"y":"x"}function O1(e){return e==="y"?"height":"width"}const p6=new Set(["top","bottom"]);function ja(e){return p6.has(Ja(e))?"y":"x"}function D1(e){return P1(ja(e))}function g6(e,t,r){r===void 0&&(r=!1);const s=Vc(e),a=D1(e),o=O1(a);let c=a==="x"?s===(r?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(c=Mf(c)),[c,Mf(c)]}function x6(e){const t=Mf(e);return[Fx(e),t,Fx(t)]}function Fx(e){return e.replace(/start|end/g,t=>m6[t])}const ky=["left","right"],Ty=["right","left"],v6=["top","bottom"],w6=["bottom","top"];function y6(e,t,r){switch(e){case"top":case"bottom":return r?t?Ty:ky:t?ky:Ty;case"left":case"right":return t?v6:w6;default:return[]}}function b6(e,t,r,s){const a=Vc(e);let o=y6(Ja(e),r==="start",s);return a&&(o=o.map(c=>c+"-"+a),t&&(o=o.concat(o.map(Fx)))),o}function Mf(e){return e.replace(/left|right|bottom|top/g,t=>f6[t])}function _6(e){return{top:0,right:0,bottom:0,left:0,...e}}function Wj(e){return typeof e!="number"?_6(e):{top:e,right:e,bottom:e,left:e}}function Lf(e){const{x:t,y:r,width:s,height:a}=e;return{width:s,height:a,top:r,left:t,right:t+s,bottom:r+a,x:t,y:r}}function Iy(e,t,r){let{reference:s,floating:a}=e;const o=ja(t),c=D1(t),u=O1(c),f=Ja(t),p=o==="y",x=s.x+s.width/2-a.width/2,w=s.y+s.height/2-a.height/2,_=s[u]/2-a[u]/2;let j;switch(f){case"top":j={x,y:s.y-a.height};break;case"bottom":j={x,y:s.y+s.height};break;case"right":j={x:s.x+s.width,y:w};break;case"left":j={x:s.x-a.width,y:w};break;default:j={x:s.x,y:s.y}}switch(Vc(t)){case"start":j[c]-=_*(r&&p?-1:1);break;case"end":j[c]+=_*(r&&p?-1:1);break}return j}const N6=async(e,t,r)=>{const{placement:s="bottom",strategy:a="absolute",middleware:o=[],platform:c}=r,u=o.filter(Boolean),f=await(c.isRTL==null?void 0:c.isRTL(t));let p=await c.getElementRects({reference:e,floating:t,strategy:a}),{x,y:w}=Iy(p,s,f),_=s,j={},N=0;for(let C=0;C<u.length;C++){const{name:T,fn:E}=u[C],{x:S,y:b,data:k,reset:O}=await E({x,y:w,initialPlacement:s,placement:_,strategy:a,middlewareData:j,rects:p,platform:c,elements:{reference:e,floating:t}});x=S??x,w=b??w,j={...j,[T]:{...j[T],...k}},O&&N<=50&&(N++,typeof O=="object"&&(O.placement&&(_=O.placement),O.rects&&(p=O.rects===!0?await c.getElementRects({reference:e,floating:t,strategy:a}):O.rects),{x,y:w}=Iy(p,_,f)),C=-1)}return{x,y:w,placement:_,strategy:a,middlewareData:j}};async function ou(e,t){var r;t===void 0&&(t={});const{x:s,y:a,platform:o,rects:c,elements:u,strategy:f}=e,{boundary:p="clippingAncestors",rootBoundary:x="viewport",elementContext:w="floating",altBoundary:_=!1,padding:j=0}=Za(t,e),N=Wj(j),T=u[_?w==="floating"?"reference":"floating":w],E=Lf(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(T)))==null||r?T:T.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:p,rootBoundary:x,strategy:f})),S=w==="floating"?{x:s,y:a,width:c.floating.width,height:c.floating.height}:c.reference,b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),k=await(o.isElement==null?void 0:o.isElement(b))?await(o.getScale==null?void 0:o.getScale(b))||{x:1,y:1}:{x:1,y:1},O=Lf(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:S,offsetParent:b,strategy:f}):S);return{top:(E.top-O.top+N.top)/k.y,bottom:(O.bottom-E.bottom+N.bottom)/k.y,left:(E.left-O.left+N.left)/k.x,right:(O.right-E.right+N.right)/k.x}}const j6=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:s,placement:a,rects:o,platform:c,elements:u,middlewareData:f}=t,{element:p,padding:x=0}=Za(e,t)||{};if(p==null)return{};const w=Wj(x),_={x:r,y:s},j=D1(a),N=O1(j),C=await c.getDimensions(p),T=j==="y",E=T?"top":"left",S=T?"bottom":"right",b=T?"clientHeight":"clientWidth",k=o.reference[N]+o.reference[j]-_[j]-o.floating[N],O=_[j]-o.reference[j],L=await(c.getOffsetParent==null?void 0:c.getOffsetParent(p));let P=L?L[b]:0;(!P||!await(c.isElement==null?void 0:c.isElement(L)))&&(P=u.floating[b]||o.floating[N]);const M=k/2-O/2,R=P/2-C[N]/2-1,$=Gi(w[E],R),Y=Gi(w[S],R),z=$,q=P-C[N]-Y,ee=P/2-C[N]/2+M,H=Lx(z,ee,q),re=!f.arrow&&Vc(a)!=null&&ee!==H&&o.reference[N]/2-(ee<z?$:Y)-C[N]/2<0,ae=re?ee<z?ee-z:ee-q:0;return{[j]:_[j]+ae,data:{[j]:H,centerOffset:ee-H-ae,...re&&{alignmentOffset:ae}},reset:re}}}),C6=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,s;const{placement:a,middlewareData:o,rects:c,initialPlacement:u,platform:f,elements:p}=t,{mainAxis:x=!0,crossAxis:w=!0,fallbackPlacements:_,fallbackStrategy:j="bestFit",fallbackAxisSideDirection:N="none",flipAlignment:C=!0,...T}=Za(e,t);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const E=Ja(a),S=ja(u),b=Ja(u)===u,k=await(f.isRTL==null?void 0:f.isRTL(p.floating)),O=_||(b||!C?[Mf(u)]:x6(u)),L=N!=="none";!_&&L&&O.push(...b6(u,C,N,k));const P=[u,...O],M=await ou(t,T),R=[];let $=((s=o.flip)==null?void 0:s.overflows)||[];if(x&&R.push(M[E]),w){const ee=g6(a,c,k);R.push(M[ee[0]],M[ee[1]])}if($=[...$,{placement:a,overflows:R}],!R.every(ee=>ee<=0)){var Y,z;const ee=(((Y=o.flip)==null?void 0:Y.index)||0)+1,H=P[ee];if(H&&(!(w==="alignment"?S!==ja(H):!1)||$.every(ie=>ja(ie.placement)===S?ie.overflows[0]>0:!0)))return{data:{index:ee,overflows:$},reset:{placement:H}};let re=(z=$.filter(ae=>ae.overflows[0]<=0).sort((ae,ie)=>ae.overflows[1]-ie.overflows[1])[0])==null?void 0:z.placement;if(!re)switch(j){case"bestFit":{var q;const ae=(q=$.filter(ie=>{if(L){const te=ja(ie.placement);return te===S||te==="y"}return!0}).map(ie=>[ie.placement,ie.overflows.filter(te=>te>0).reduce((te,ye)=>te+ye,0)]).sort((ie,te)=>ie[1]-te[1])[0])==null?void 0:q[0];ae&&(re=ae);break}case"initialPlacement":re=u;break}if(a!==re)return{reset:{placement:re}}}return{}}}};function Ry(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Py(e){return h6.some(t=>e[t]>=0)}const E6=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:s="referenceHidden",...a}=Za(e,t);switch(s){case"referenceHidden":{const o=await ou(t,{...a,elementContext:"reference"}),c=Ry(o,r.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:Py(c)}}}case"escaped":{const o=await ou(t,{...a,altBoundary:!0}),c=Ry(o,r.floating);return{data:{escapedOffsets:c,escaped:Py(c)}}}default:return{}}}}},Hj=new Set(["left","top"]);async function S6(e,t){const{placement:r,platform:s,elements:a}=e,o=await(s.isRTL==null?void 0:s.isRTL(a.floating)),c=Ja(r),u=Vc(r),f=ja(r)==="y",p=Hj.has(c)?-1:1,x=o&&f?-1:1,w=Za(t,e);let{mainAxis:_,crossAxis:j,alignmentAxis:N}=typeof w=="number"?{mainAxis:w,crossAxis:0,alignmentAxis:null}:{mainAxis:w.mainAxis||0,crossAxis:w.crossAxis||0,alignmentAxis:w.alignmentAxis};return u&&typeof N=="number"&&(j=u==="end"?N*-1:N),f?{x:j*x,y:_*p}:{x:_*p,y:j*x}}const A6=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,s;const{x:a,y:o,placement:c,middlewareData:u}=t,f=await S6(t,e);return c===((r=u.offset)==null?void 0:r.placement)&&(s=u.arrow)!=null&&s.alignmentOffset?{}:{x:a+f.x,y:o+f.y,data:{...f,placement:c}}}}},k6=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:s,placement:a}=t,{mainAxis:o=!0,crossAxis:c=!1,limiter:u={fn:T=>{let{x:E,y:S}=T;return{x:E,y:S}}},...f}=Za(e,t),p={x:r,y:s},x=await ou(t,f),w=ja(Ja(a)),_=P1(w);let j=p[_],N=p[w];if(o){const T=_==="y"?"top":"left",E=_==="y"?"bottom":"right",S=j+x[T],b=j-x[E];j=Lx(S,j,b)}if(c){const T=w==="y"?"top":"left",E=w==="y"?"bottom":"right",S=N+x[T],b=N-x[E];N=Lx(S,N,b)}const C=u.fn({...t,[_]:j,[w]:N});return{...C,data:{x:C.x-r,y:C.y-s,enabled:{[_]:o,[w]:c}}}}}},T6=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:s,placement:a,rects:o,middlewareData:c}=t,{offset:u=0,mainAxis:f=!0,crossAxis:p=!0}=Za(e,t),x={x:r,y:s},w=ja(a),_=P1(w);let j=x[_],N=x[w];const C=Za(u,t),T=typeof C=="number"?{mainAxis:C,crossAxis:0}:{mainAxis:0,crossAxis:0,...C};if(f){const b=_==="y"?"height":"width",k=o.reference[_]-o.floating[b]+T.mainAxis,O=o.reference[_]+o.reference[b]-T.mainAxis;j<k?j=k:j>O&&(j=O)}if(p){var E,S;const b=_==="y"?"width":"height",k=Hj.has(Ja(a)),O=o.reference[w]-o.floating[b]+(k&&((E=c.offset)==null?void 0:E[w])||0)+(k?0:T.crossAxis),L=o.reference[w]+o.reference[b]+(k?0:((S=c.offset)==null?void 0:S[w])||0)-(k?T.crossAxis:0);N<O?N=O:N>L&&(N=L)}return{[_]:j,[w]:N}}}},I6=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,s;const{placement:a,rects:o,platform:c,elements:u}=t,{apply:f=()=>{},...p}=Za(e,t),x=await ou(t,p),w=Ja(a),_=Vc(a),j=ja(a)==="y",{width:N,height:C}=o.floating;let T,E;w==="top"||w==="bottom"?(T=w,E=_===(await(c.isRTL==null?void 0:c.isRTL(u.floating))?"start":"end")?"left":"right"):(E=w,T=_==="end"?"top":"bottom");const S=C-x.top-x.bottom,b=N-x.left-x.right,k=Gi(C-x[T],S),O=Gi(N-x[E],b),L=!t.middlewareData.shift;let P=k,M=O;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(M=b),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(P=S),L&&!_){const $=ns(x.left,0),Y=ns(x.right,0),z=ns(x.top,0),q=ns(x.bottom,0);j?M=N-2*($!==0||Y!==0?$+Y:ns(x.left,x.right)):P=C-2*(z!==0||q!==0?z+q:ns(x.top,x.bottom))}await f({...t,availableWidth:M,availableHeight:P});const R=await c.getDimensions(u.floating);return N!==R.width||C!==R.height?{reset:{rects:!0}}:{}}}};function _m(){return typeof window<"u"}function qc(e){return Gj(e)?(e.nodeName||"").toLowerCase():"#document"}function ds(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ia(e){var t;return(t=(Gj(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Gj(e){return _m()?e instanceof Node||e instanceof ds(e).Node:!1}function sa(e){return _m()?e instanceof Element||e instanceof ds(e).Element:!1}function Ta(e){return _m()?e instanceof HTMLElement||e instanceof ds(e).HTMLElement:!1}function Oy(e){return!_m()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ds(e).ShadowRoot}const R6=new Set(["inline","contents"]);function Pu(e){const{overflow:t,overflowX:r,overflowY:s,display:a}=aa(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+r)&&!R6.has(a)}const P6=new Set(["table","td","th"]);function O6(e){return P6.has(qc(e))}const D6=[":popover-open",":modal"];function Nm(e){return D6.some(t=>{try{return e.matches(t)}catch{return!1}})}const M6=["transform","translate","scale","rotate","perspective"],L6=["transform","translate","scale","rotate","perspective","filter"],F6=["paint","layout","strict","content"];function M1(e){const t=L1(),r=sa(e)?aa(e):e;return M6.some(s=>r[s]?r[s]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||L6.some(s=>(r.willChange||"").includes(s))||F6.some(s=>(r.contain||"").includes(s))}function B6(e){let t=Xi(e);for(;Ta(t)&&!kc(t);){if(M1(t))return t;if(Nm(t))return null;t=Xi(t)}return null}function L1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const z6=new Set(["html","body","#document"]);function kc(e){return z6.has(qc(e))}function aa(e){return ds(e).getComputedStyle(e)}function jm(e){return sa(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Xi(e){if(qc(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Oy(e)&&e.host||Ia(e);return Oy(t)?t.host:t}function Xj(e){const t=Xi(e);return kc(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ta(t)&&Pu(t)?t:Xj(t)}function lu(e,t,r){var s;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=Xj(e),o=a===((s=e.ownerDocument)==null?void 0:s.body),c=ds(a);if(o){const u=Bx(c);return t.concat(c,c.visualViewport||[],Pu(a)?a:[],u&&r?lu(u):[])}return t.concat(a,lu(a,[],r))}function Bx(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Kj(e){const t=aa(e);let r=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const a=Ta(e),o=a?e.offsetWidth:r,c=a?e.offsetHeight:s,u=Df(r)!==o||Df(s)!==c;return u&&(r=o,s=c),{width:r,height:s,$:u}}function F1(e){return sa(e)?e:e.contextElement}function oc(e){const t=F1(e);if(!Ta(t))return Aa(1);const r=t.getBoundingClientRect(),{width:s,height:a,$:o}=Kj(t);let c=(o?Df(r.width):r.width)/s,u=(o?Df(r.height):r.height)/a;return(!c||!Number.isFinite(c))&&(c=1),(!u||!Number.isFinite(u))&&(u=1),{x:c,y:u}}const U6=Aa(0);function Yj(e){const t=ds(e);return!L1()||!t.visualViewport?U6:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function $6(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==ds(e)?!1:t}function Xo(e,t,r,s){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),o=F1(e);let c=Aa(1);t&&(s?sa(s)&&(c=oc(s)):c=oc(e));const u=$6(o,r,s)?Yj(o):Aa(0);let f=(a.left+u.x)/c.x,p=(a.top+u.y)/c.y,x=a.width/c.x,w=a.height/c.y;if(o){const _=ds(o),j=s&&sa(s)?ds(s):s;let N=_,C=Bx(N);for(;C&&s&&j!==N;){const T=oc(C),E=C.getBoundingClientRect(),S=aa(C),b=E.left+(C.clientLeft+parseFloat(S.paddingLeft))*T.x,k=E.top+(C.clientTop+parseFloat(S.paddingTop))*T.y;f*=T.x,p*=T.y,x*=T.x,w*=T.y,f+=b,p+=k,N=ds(C),C=Bx(N)}}return Lf({width:x,height:w,x:f,y:p})}function Cm(e,t){const r=jm(e).scrollLeft;return t?t.left+r:Xo(Ia(e)).left+r}function Qj(e,t){const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-Cm(e,r),a=r.top+t.scrollTop;return{x:s,y:a}}function V6(e){let{elements:t,rect:r,offsetParent:s,strategy:a}=e;const o=a==="fixed",c=Ia(s),u=t?Nm(t.floating):!1;if(s===c||u&&o)return r;let f={scrollLeft:0,scrollTop:0},p=Aa(1);const x=Aa(0),w=Ta(s);if((w||!w&&!o)&&((qc(s)!=="body"||Pu(c))&&(f=jm(s)),Ta(s))){const j=Xo(s);p=oc(s),x.x=j.x+s.clientLeft,x.y=j.y+s.clientTop}const _=c&&!w&&!o?Qj(c,f):Aa(0);return{width:r.width*p.x,height:r.height*p.y,x:r.x*p.x-f.scrollLeft*p.x+x.x+_.x,y:r.y*p.y-f.scrollTop*p.y+x.y+_.y}}function q6(e){return Array.from(e.getClientRects())}function W6(e){const t=Ia(e),r=jm(e),s=e.ownerDocument.body,a=ns(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),o=ns(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let c=-r.scrollLeft+Cm(e);const u=-r.scrollTop;return aa(s).direction==="rtl"&&(c+=ns(t.clientWidth,s.clientWidth)-a),{width:a,height:o,x:c,y:u}}const Dy=25;function H6(e,t){const r=ds(e),s=Ia(e),a=r.visualViewport;let o=s.clientWidth,c=s.clientHeight,u=0,f=0;if(a){o=a.width,c=a.height;const x=L1();(!x||x&&t==="fixed")&&(u=a.offsetLeft,f=a.offsetTop)}const p=Cm(s);if(p<=0){const x=s.ownerDocument,w=x.body,_=getComputedStyle(w),j=x.compatMode==="CSS1Compat"&&parseFloat(_.marginLeft)+parseFloat(_.marginRight)||0,N=Math.abs(s.clientWidth-w.clientWidth-j);N<=Dy&&(o-=N)}else p<=Dy&&(o+=p);return{width:o,height:c,x:u,y:f}}const G6=new Set(["absolute","fixed"]);function X6(e,t){const r=Xo(e,!0,t==="fixed"),s=r.top+e.clientTop,a=r.left+e.clientLeft,o=Ta(e)?oc(e):Aa(1),c=e.clientWidth*o.x,u=e.clientHeight*o.y,f=a*o.x,p=s*o.y;return{width:c,height:u,x:f,y:p}}function My(e,t,r){let s;if(t==="viewport")s=H6(e,r);else if(t==="document")s=W6(Ia(e));else if(sa(t))s=X6(t,r);else{const a=Yj(e);s={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Lf(s)}function Zj(e,t){const r=Xi(e);return r===t||!sa(r)||kc(r)?!1:aa(r).position==="fixed"||Zj(r,t)}function K6(e,t){const r=t.get(e);if(r)return r;let s=lu(e,[],!1).filter(u=>sa(u)&&qc(u)!=="body"),a=null;const o=aa(e).position==="fixed";let c=o?Xi(e):e;for(;sa(c)&&!kc(c);){const u=aa(c),f=M1(c);!f&&u.position==="fixed"&&(a=null),(o?!f&&!a:!f&&u.position==="static"&&!!a&&G6.has(a.position)||Pu(c)&&!f&&Zj(e,c))?s=s.filter(x=>x!==c):a=u,c=Xi(c)}return t.set(e,s),s}function Y6(e){let{element:t,boundary:r,rootBoundary:s,strategy:a}=e;const c=[...r==="clippingAncestors"?Nm(t)?[]:K6(t,this._c):[].concat(r),s],u=c[0],f=c.reduce((p,x)=>{const w=My(t,x,a);return p.top=ns(w.top,p.top),p.right=Gi(w.right,p.right),p.bottom=Gi(w.bottom,p.bottom),p.left=ns(w.left,p.left),p},My(t,u,a));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function Q6(e){const{width:t,height:r}=Kj(e);return{width:t,height:r}}function Z6(e,t,r){const s=Ta(t),a=Ia(t),o=r==="fixed",c=Xo(e,!0,o,t);let u={scrollLeft:0,scrollTop:0};const f=Aa(0);function p(){f.x=Cm(a)}if(s||!s&&!o)if((qc(t)!=="body"||Pu(a))&&(u=jm(t)),s){const j=Xo(t,!0,o,t);f.x=j.x+t.clientLeft,f.y=j.y+t.clientTop}else a&&p();o&&!s&&a&&p();const x=a&&!s&&!o?Qj(a,u):Aa(0),w=c.left+u.scrollLeft-f.x-x.x,_=c.top+u.scrollTop-f.y-x.y;return{x:w,y:_,width:c.width,height:c.height}}function ug(e){return aa(e).position==="static"}function Ly(e,t){if(!Ta(e)||aa(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Ia(e)===r&&(r=r.ownerDocument.body),r}function Jj(e,t){const r=ds(e);if(Nm(e))return r;if(!Ta(e)){let a=Xi(e);for(;a&&!kc(a);){if(sa(a)&&!ug(a))return a;a=Xi(a)}return r}let s=Ly(e,t);for(;s&&O6(s)&&ug(s);)s=Ly(s,t);return s&&kc(s)&&ug(s)&&!M1(s)?r:s||B6(e)||r}const J6=async function(e){const t=this.getOffsetParent||Jj,r=this.getDimensions,s=await r(e.floating);return{reference:Z6(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function eO(e){return aa(e).direction==="rtl"}const tO={convertOffsetParentRelativeRectToViewportRelativeRect:V6,getDocumentElement:Ia,getClippingRect:Y6,getOffsetParent:Jj,getElementRects:J6,getClientRects:q6,getDimensions:Q6,getScale:oc,isElement:sa,isRTL:eO};function eC(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function rO(e,t){let r=null,s;const a=Ia(e);function o(){var u;clearTimeout(s),(u=r)==null||u.disconnect(),r=null}function c(u,f){u===void 0&&(u=!1),f===void 0&&(f=1),o();const p=e.getBoundingClientRect(),{left:x,top:w,width:_,height:j}=p;if(u||t(),!_||!j)return;const N=Ah(w),C=Ah(a.clientWidth-(x+_)),T=Ah(a.clientHeight-(w+j)),E=Ah(x),b={rootMargin:-N+"px "+-C+"px "+-T+"px "+-E+"px",threshold:ns(0,Gi(1,f))||1};let k=!0;function O(L){const P=L[0].intersectionRatio;if(P!==f){if(!k)return c();P?c(!1,P):s=setTimeout(()=>{c(!1,1e-7)},1e3)}P===1&&!eC(p,e.getBoundingClientRect())&&c(),k=!1}try{r=new IntersectionObserver(O,{...b,root:a.ownerDocument})}catch{r=new IntersectionObserver(O,b)}r.observe(e)}return c(!0),o}function nO(e,t,r,s){s===void 0&&(s={});const{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:f=!1}=s,p=F1(e),x=a||o?[...p?lu(p):[],...lu(t)]:[];x.forEach(E=>{a&&E.addEventListener("scroll",r,{passive:!0}),o&&E.addEventListener("resize",r)});const w=p&&u?rO(p,r):null;let _=-1,j=null;c&&(j=new ResizeObserver(E=>{let[S]=E;S&&S.target===p&&j&&(j.unobserve(t),cancelAnimationFrame(_),_=requestAnimationFrame(()=>{var b;(b=j)==null||b.observe(t)})),r()}),p&&!f&&j.observe(p),j.observe(t));let N,C=f?Xo(e):null;f&&T();function T(){const E=Xo(e);C&&!eC(C,E)&&r(),C=E,N=requestAnimationFrame(T)}return r(),()=>{var E;x.forEach(S=>{a&&S.removeEventListener("scroll",r),o&&S.removeEventListener("resize",r)}),w==null||w(),(E=j)==null||E.disconnect(),j=null,f&&cancelAnimationFrame(N)}}const sO=A6,aO=k6,iO=C6,oO=I6,lO=E6,Fy=j6,cO=T6,dO=(e,t,r)=>{const s=new Map,a={platform:tO,...r},o={...a.platform,_c:s};return N6(e,t,{...a,platform:o})};var uO=typeof document<"u",hO=function(){},nf=uO?v.useLayoutEffect:hO;function Ff(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,s,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(s=r;s--!==0;)if(!Ff(e[s],t[s]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(s=r;s--!==0;)if(!{}.hasOwnProperty.call(t,a[s]))return!1;for(s=r;s--!==0;){const o=a[s];if(!(o==="_owner"&&e.$$typeof)&&!Ff(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function tC(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function By(e,t){const r=tC(e);return Math.round(t*r)/r}function hg(e){const t=v.useRef(e);return nf(()=>{t.current=e}),t}function fO(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:s=[],platform:a,elements:{reference:o,floating:c}={},transform:u=!0,whileElementsMounted:f,open:p}=e,[x,w]=v.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[_,j]=v.useState(s);Ff(_,s)||j(s);const[N,C]=v.useState(null),[T,E]=v.useState(null),S=v.useCallback(ie=>{ie!==L.current&&(L.current=ie,C(ie))},[]),b=v.useCallback(ie=>{ie!==P.current&&(P.current=ie,E(ie))},[]),k=o||N,O=c||T,L=v.useRef(null),P=v.useRef(null),M=v.useRef(x),R=f!=null,$=hg(f),Y=hg(a),z=hg(p),q=v.useCallback(()=>{if(!L.current||!P.current)return;const ie={placement:t,strategy:r,middleware:_};Y.current&&(ie.platform=Y.current),dO(L.current,P.current,ie).then(te=>{const ye={...te,isPositioned:z.current!==!1};ee.current&&!Ff(M.current,ye)&&(M.current=ye,ll.flushSync(()=>{w(ye)}))})},[_,t,r,Y,z]);nf(()=>{p===!1&&M.current.isPositioned&&(M.current.isPositioned=!1,w(ie=>({...ie,isPositioned:!1})))},[p]);const ee=v.useRef(!1);nf(()=>(ee.current=!0,()=>{ee.current=!1}),[]),nf(()=>{if(k&&(L.current=k),O&&(P.current=O),k&&O){if($.current)return $.current(k,O,q);q()}},[k,O,q,$,R]);const H=v.useMemo(()=>({reference:L,floating:P,setReference:S,setFloating:b}),[S,b]),re=v.useMemo(()=>({reference:k,floating:O}),[k,O]),ae=v.useMemo(()=>{const ie={position:r,left:0,top:0};if(!re.floating)return ie;const te=By(re.floating,x.x),ye=By(re.floating,x.y);return u?{...ie,transform:"translate("+te+"px, "+ye+"px)",...tC(re.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:te,top:ye}},[r,u,re.floating,x.x,x.y]);return v.useMemo(()=>({...x,update:q,refs:H,elements:re,floatingStyles:ae}),[x,q,H,re,ae])}const mO=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:s,padding:a}=typeof e=="function"?e(r):e;return s&&t(s)?s.current!=null?Fy({element:s.current,padding:a}).fn(r):{}:s?Fy({element:s,padding:a}).fn(r):{}}}},pO=(e,t)=>({...sO(e),options:[e,t]}),gO=(e,t)=>({...aO(e),options:[e,t]}),xO=(e,t)=>({...cO(e),options:[e,t]}),vO=(e,t)=>({...iO(e),options:[e,t]}),wO=(e,t)=>({...oO(e),options:[e,t]}),yO=(e,t)=>({...lO(e),options:[e,t]}),bO=(e,t)=>({...mO(e),options:[e,t]});var _O="Arrow",rC=v.forwardRef((e,t)=>{const{children:r,width:s=10,height:a=5,...o}=e;return n.jsx(qe.svg,{...o,ref:t,width:s,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:n.jsx("polygon",{points:"0,0 30,0 15,10"})})});rC.displayName=_O;var NO=rC;function Ou(e){const[t,r]=v.useState(void 0);return Rr(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const o=a[0];let c,u;if("borderBoxSize"in o){const f=o.borderBoxSize,p=Array.isArray(f)?f[0]:f;c=p.inlineSize,u=p.blockSize}else c=e.offsetWidth,u=e.offsetHeight;r({width:c,height:u})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else r(void 0)},[e]),t}var B1="Popper",[nC,so]=Mr(B1),[jO,sC]=nC(B1),aC=e=>{const{__scopePopper:t,children:r}=e,[s,a]=v.useState(null);return n.jsx(jO,{scope:t,anchor:s,onAnchorChange:a,children:r})};aC.displayName=B1;var iC="PopperAnchor",oC=v.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:s,...a}=e,o=sC(iC,r),c=v.useRef(null),u=tt(t,c),f=v.useRef(null);return v.useEffect(()=>{const p=f.current;f.current=(s==null?void 0:s.current)||c.current,p!==f.current&&o.onAnchorChange(f.current)}),s?null:n.jsx(qe.div,{...a,ref:u})});oC.displayName=iC;var z1="PopperContent",[CO,EO]=nC(z1),lC=v.forwardRef((e,t)=>{var ne,he,Ae,Pe,Be,Ee;const{__scopePopper:r,side:s="bottom",sideOffset:a=0,align:o="center",alignOffset:c=0,arrowPadding:u=0,avoidCollisions:f=!0,collisionBoundary:p=[],collisionPadding:x=0,sticky:w="partial",hideWhenDetached:_=!1,updatePositionStrategy:j="optimized",onPlaced:N,...C}=e,T=sC(z1,r),[E,S]=v.useState(null),b=tt(t,ue=>S(ue)),[k,O]=v.useState(null),L=Ou(k),P=(L==null?void 0:L.width)??0,M=(L==null?void 0:L.height)??0,R=s+(o!=="center"?"-"+o:""),$=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},Y=Array.isArray(p)?p:[p],z=Y.length>0,q={padding:$,boundary:Y.filter(AO),altBoundary:z},{refs:ee,floatingStyles:H,placement:re,isPositioned:ae,middlewareData:ie}=fO({strategy:"fixed",placement:R,whileElementsMounted:(...ue)=>nO(...ue,{animationFrame:j==="always"}),elements:{reference:T.anchor},middleware:[pO({mainAxis:a+M,alignmentAxis:c}),f&&gO({mainAxis:!0,crossAxis:!1,limiter:w==="partial"?xO():void 0,...q}),f&&vO({...q}),wO({...q,apply:({elements:ue,rects:Fe,availableWidth:_e,availableHeight:Ze})=>{const{width:be,height:ze}=Fe.reference,He=ue.floating.style;He.setProperty("--radix-popper-available-width",`${_e}px`),He.setProperty("--radix-popper-available-height",`${Ze}px`),He.setProperty("--radix-popper-anchor-width",`${be}px`),He.setProperty("--radix-popper-anchor-height",`${ze}px`)}}),k&&bO({element:k,padding:u}),kO({arrowWidth:P,arrowHeight:M}),_&&yO({strategy:"referenceHidden",...q})]}),[te,ye]=uC(re),ge=Er(N);Rr(()=>{ae&&(ge==null||ge())},[ae,ge]);const W=(ne=ie.arrow)==null?void 0:ne.x,J=(he=ie.arrow)==null?void 0:he.y,G=((Ae=ie.arrow)==null?void 0:Ae.centerOffset)!==0,[se,ce]=v.useState();return Rr(()=>{E&&ce(window.getComputedStyle(E).zIndex)},[E]),n.jsx("div",{ref:ee.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:ae?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:se,"--radix-popper-transform-origin":[(Pe=ie.transformOrigin)==null?void 0:Pe.x,(Be=ie.transformOrigin)==null?void 0:Be.y].join(" "),...((Ee=ie.hide)==null?void 0:Ee.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:n.jsx(CO,{scope:r,placedSide:te,onArrowChange:O,arrowX:W,arrowY:J,shouldHideArrow:G,children:n.jsx(qe.div,{"data-side":te,"data-align":ye,...C,ref:b,style:{...C.style,animation:ae?void 0:"none"}})})})});lC.displayName=z1;var cC="PopperArrow",SO={top:"bottom",right:"left",bottom:"top",left:"right"},dC=v.forwardRef(function(t,r){const{__scopePopper:s,...a}=t,o=EO(cC,s),c=SO[o.placedSide];return n.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:n.jsx(NO,{...a,ref:r,style:{...a.style,display:"block"}})})});dC.displayName=cC;function AO(e){return e!==null}var kO=e=>({name:"transformOrigin",options:e,fn(t){var T,E,S;const{placement:r,rects:s,middlewareData:a}=t,c=((T=a.arrow)==null?void 0:T.centerOffset)!==0,u=c?0:e.arrowWidth,f=c?0:e.arrowHeight,[p,x]=uC(r),w={start:"0%",center:"50%",end:"100%"}[x],_=(((E=a.arrow)==null?void 0:E.x)??0)+u/2,j=(((S=a.arrow)==null?void 0:S.y)??0)+f/2;let N="",C="";return p==="bottom"?(N=c?w:`${_}px`,C=`${-f}px`):p==="top"?(N=c?w:`${_}px`,C=`${s.floating.height+f}px`):p==="right"?(N=`${-f}px`,C=c?w:`${j}px`):p==="left"&&(N=`${s.floating.width+f}px`,C=c?w:`${j}px`),{data:{x:N,y:C}}}});function uC(e){const[t,r="center"]=e.split("-");return[t,r]}var U1=aC,Du=oC,Em=lC,Sm=dC,[Am]=Mr("Tooltip",[so]),$1=so(),hC="TooltipProvider",TO=700,zy="tooltip.open",[IO,fC]=Am(hC),mC=e=>{const{__scopeTooltip:t,delayDuration:r=TO,skipDelayDuration:s=300,disableHoverableContent:a=!1,children:o}=e,c=v.useRef(!0),u=v.useRef(!1),f=v.useRef(0);return v.useEffect(()=>{const p=f.current;return()=>window.clearTimeout(p)},[]),n.jsx(IO,{scope:t,isOpenDelayedRef:c,delayDuration:r,onOpen:v.useCallback(()=>{window.clearTimeout(f.current),c.current=!1},[]),onClose:v.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>c.current=!0,s)},[s]),isPointerInTransitRef:u,onPointerInTransitChange:v.useCallback(p=>{u.current=p},[]),disableHoverableContent:a,children:o})};mC.displayName=hC;var pC="Tooltip",[HW,km]=Am(pC),zx="TooltipTrigger",RO=v.forwardRef((e,t)=>{const{__scopeTooltip:r,...s}=e,a=km(zx,r),o=fC(zx,r),c=$1(r),u=v.useRef(null),f=tt(t,u,a.onTriggerChange),p=v.useRef(!1),x=v.useRef(!1),w=v.useCallback(()=>p.current=!1,[]);return v.useEffect(()=>()=>document.removeEventListener("pointerup",w),[w]),n.jsx(Du,{asChild:!0,...c,children:n.jsx(qe.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...s,ref:f,onPointerMove:Ie(e.onPointerMove,_=>{_.pointerType!=="touch"&&!x.current&&!o.isPointerInTransitRef.current&&(a.onTriggerEnter(),x.current=!0)}),onPointerLeave:Ie(e.onPointerLeave,()=>{a.onTriggerLeave(),x.current=!1}),onPointerDown:Ie(e.onPointerDown,()=>{a.open&&a.onClose(),p.current=!0,document.addEventListener("pointerup",w,{once:!0})}),onFocus:Ie(e.onFocus,()=>{p.current||a.onOpen()}),onBlur:Ie(e.onBlur,a.onClose),onClick:Ie(e.onClick,a.onClose)})})});RO.displayName=zx;var PO="TooltipPortal",[GW,OO]=Am(PO,{forceMount:void 0}),Tc="TooltipContent",gC=v.forwardRef((e,t)=>{const r=OO(Tc,e.__scopeTooltip),{forceMount:s=r.forceMount,side:a="top",...o}=e,c=km(Tc,e.__scopeTooltip);return n.jsx(Hr,{present:s||c.open,children:c.disableHoverableContent?n.jsx(xC,{side:a,...o,ref:t}):n.jsx(DO,{side:a,...o,ref:t})})}),DO=v.forwardRef((e,t)=>{const r=km(Tc,e.__scopeTooltip),s=fC(Tc,e.__scopeTooltip),a=v.useRef(null),o=tt(t,a),[c,u]=v.useState(null),{trigger:f,onClose:p}=r,x=a.current,{onPointerInTransitChange:w}=s,_=v.useCallback(()=>{u(null),w(!1)},[w]),j=v.useCallback((N,C)=>{const T=N.currentTarget,E={x:N.clientX,y:N.clientY},S=zO(E,T.getBoundingClientRect()),b=UO(E,S),k=$O(C.getBoundingClientRect()),O=qO([...b,...k]);u(O),w(!0)},[w]);return v.useEffect(()=>()=>_(),[_]),v.useEffect(()=>{if(f&&x){const N=T=>j(T,x),C=T=>j(T,f);return f.addEventListener("pointerleave",N),x.addEventListener("pointerleave",C),()=>{f.removeEventListener("pointerleave",N),x.removeEventListener("pointerleave",C)}}},[f,x,j,_]),v.useEffect(()=>{if(c){const N=C=>{const T=C.target,E={x:C.clientX,y:C.clientY},S=(f==null?void 0:f.contains(T))||(x==null?void 0:x.contains(T)),b=!VO(E,c);S?_():b&&(_(),p())};return document.addEventListener("pointermove",N),()=>document.removeEventListener("pointermove",N)}},[f,x,c,p,_]),n.jsx(xC,{...e,ref:o})}),[MO,LO]=Am(pC,{isInside:!1}),FO=ZN("TooltipContent"),xC=v.forwardRef((e,t)=>{const{__scopeTooltip:r,children:s,"aria-label":a,onEscapeKeyDown:o,onPointerDownOutside:c,...u}=e,f=km(Tc,r),p=$1(r),{onClose:x}=f;return v.useEffect(()=>(document.addEventListener(zy,x),()=>document.removeEventListener(zy,x)),[x]),v.useEffect(()=>{if(f.trigger){const w=_=>{const j=_.target;j!=null&&j.contains(f.trigger)&&x()};return window.addEventListener("scroll",w,{capture:!0}),()=>window.removeEventListener("scroll",w,{capture:!0})}},[f.trigger,x]),n.jsx(cl,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:w=>w.preventDefault(),onDismiss:x,children:n.jsxs(Em,{"data-state":f.stateAttribute,...p,...u,ref:t,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[n.jsx(FO,{children:s}),n.jsx(MO,{scope:r,isInside:!0,children:n.jsx(c8,{id:f.contentId,role:"tooltip",children:a||s})})]})})});gC.displayName=Tc;var vC="TooltipArrow",BO=v.forwardRef((e,t)=>{const{__scopeTooltip:r,...s}=e,a=$1(r);return LO(vC,r).isInside?null:n.jsx(Sm,{...a,...s,ref:t})});BO.displayName=vC;function zO(e,t){const r=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(r,s,a,o)){case o:return"left";case a:return"right";case r:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function UO(e,t,r=5){const s=[];switch(t){case"top":s.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":s.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":s.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":s.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return s}function $O(e){const{top:t,right:r,bottom:s,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:s},{x:a,y:s}]}function VO(e,t){const{x:r,y:s}=e;let a=!1;for(let o=0,c=t.length-1;o<t.length;c=o++){const u=t[o],f=t[c],p=u.x,x=u.y,w=f.x,_=f.y;x>s!=_>s&&r<(w-p)*(s-x)/(_-x)+p&&(a=!a)}return a}function qO(e){const t=e.slice();return t.sort((r,s)=>r.x<s.x?-1:r.x>s.x?1:r.y<s.y?-1:r.y>s.y?1:0),WO(t)}function WO(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const a=e[s];for(;t.length>=2;){const o=t[t.length-1],c=t[t.length-2];if((o.x-c.x)*(a.y-c.y)>=(o.y-c.y)*(a.x-c.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let s=e.length-1;s>=0;s--){const a=e[s];for(;r.length>=2;){const o=r[r.length-1],c=r[r.length-2];if((o.x-c.x)*(a.y-c.y)>=(o.y-c.y)*(a.x-c.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var HO=mC,wC=gC;const GO=HO,XO=v.forwardRef(({className:e,sideOffset:t=4,...r},s)=>n.jsx(wC,{ref:s,sideOffset:t,className:Le("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));XO.displayName=wC.displayName;var Tm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},KO={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Ni,C0,E2,YO=(E2=class{constructor(){It(this,Ni,KO);It(this,C0,!1)}setTimeoutProvider(e){ct(this,Ni,e)}setTimeout(e,t){return Ne(this,Ni).setTimeout(e,t)}clearTimeout(e){Ne(this,Ni).clearTimeout(e)}setInterval(e,t){return Ne(this,Ni).setInterval(e,t)}clearInterval(e){Ne(this,Ni).clearInterval(e)}},Ni=new WeakMap,C0=new WeakMap,E2),Ux=new YO;function QO(e){setTimeout(e,0)}var Im=typeof window>"u"||"Deno"in globalThis;function Hs(){}function ZO(e,t){return typeof e=="function"?e(t):e}function JO(e){return typeof e=="number"&&e>=0&&e!==1/0}function e5(e,t){return Math.max(e+(t||0)-Date.now(),0)}function $x(e,t){return typeof e=="function"?e(t):e}function t5(e,t){return typeof e=="function"?e(t):e}function Uy(e,t){const{type:r="all",exact:s,fetchStatus:a,predicate:o,queryKey:c,stale:u}=e;if(c){if(s){if(t.queryHash!==V1(c,t.options))return!1}else if(!du(t.queryKey,c))return!1}if(r!=="all"){const f=t.isActive();if(r==="active"&&!f||r==="inactive"&&f)return!1}return!(typeof u=="boolean"&&t.isStale()!==u||a&&a!==t.state.fetchStatus||o&&!o(t))}function $y(e,t){const{exact:r,status:s,predicate:a,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(r){if(cu(t.options.mutationKey)!==cu(o))return!1}else if(!du(t.options.mutationKey,o))return!1}return!(s&&t.state.status!==s||a&&!a(t))}function V1(e,t){return((t==null?void 0:t.queryKeyHashFn)||cu)(e)}function cu(e){return JSON.stringify(e,(t,r)=>Vx(r)?Object.keys(r).sort().reduce((s,a)=>(s[a]=r[a],s),{}):r)}function du(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>du(e[r],t[r])):!1}var r5=Object.prototype.hasOwnProperty;function yC(e,t){if(e===t)return e;const r=Vy(e)&&Vy(t);if(!r&&!(Vx(e)&&Vx(t)))return t;const a=(r?e:Object.keys(e)).length,o=r?t:Object.keys(t),c=o.length,u=r?new Array(c):{};let f=0;for(let p=0;p<c;p++){const x=r?p:o[p],w=e[x],_=t[x];if(w===_){u[x]=w,(r?p<a:r5.call(e,x))&&f++;continue}if(w===null||_===null||typeof w!="object"||typeof _!="object"){u[x]=_;continue}const j=yC(w,_);u[x]=j,j===w&&f++}return a===c&&f===a?e:u}function Vy(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Vx(e){if(!qy(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!qy(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function qy(e){return Object.prototype.toString.call(e)==="[object Object]"}function n5(e){return new Promise(t=>{Ux.setTimeout(t,e)})}function s5(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?yC(e,t):t}function a5(e,t,r=0){const s=[...e,t];return r&&s.length>r?s.slice(1):s}function i5(e,t,r=0){const s=[t,...e];return r&&s.length>r?s.slice(0,-1):s}var q1=Symbol();function bC(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===q1?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Io,ji,hc,S2,o5=(S2=class extends Tm{constructor(){super();It(this,Io);It(this,ji);It(this,hc);ct(this,hc,t=>{if(!Im&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){Ne(this,ji)||this.setEventListener(Ne(this,hc))}onUnsubscribe(){var t;this.hasListeners()||((t=Ne(this,ji))==null||t.call(this),ct(this,ji,void 0))}setEventListener(t){var r;ct(this,hc,t),(r=Ne(this,ji))==null||r.call(this),ct(this,ji,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){Ne(this,Io)!==t&&(ct(this,Io,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof Ne(this,Io)=="boolean"?Ne(this,Io):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Io=new WeakMap,ji=new WeakMap,hc=new WeakMap,S2),_C=new o5;function l5(){let e,t;const r=new Promise((a,o)=>{e=a,t=o});r.status="pending",r.catch(()=>{});function s(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{s({status:"fulfilled",value:a}),e(a)},r.reject=a=>{s({status:"rejected",reason:a}),t(a)},r}var c5=QO;function d5(){let e=[],t=0,r=u=>{u()},s=u=>{u()},a=c5;const o=u=>{t?e.push(u):a(()=>{r(u)})},c=()=>{const u=e;e=[],u.length&&a(()=>{s(()=>{u.forEach(f=>{r(f)})})})};return{batch:u=>{let f;t++;try{f=u()}finally{t--,t||c()}return f},batchCalls:u=>(...f)=>{o(()=>{u(...f)})},schedule:o,setNotifyFunction:u=>{r=u},setBatchNotifyFunction:u=>{s=u},setScheduler:u=>{a=u}}}var jn=d5(),fc,Ci,mc,A2,u5=(A2=class extends Tm{constructor(){super();It(this,fc,!0);It(this,Ci);It(this,mc);ct(this,mc,t=>{if(!Im&&window.addEventListener){const r=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}})}onSubscribe(){Ne(this,Ci)||this.setEventListener(Ne(this,mc))}onUnsubscribe(){var t;this.hasListeners()||((t=Ne(this,Ci))==null||t.call(this),ct(this,Ci,void 0))}setEventListener(t){var r;ct(this,mc,t),(r=Ne(this,Ci))==null||r.call(this),ct(this,Ci,t(this.setOnline.bind(this)))}setOnline(t){Ne(this,fc)!==t&&(ct(this,fc,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return Ne(this,fc)}},fc=new WeakMap,Ci=new WeakMap,mc=new WeakMap,A2),Bf=new u5;function h5(e){return Math.min(1e3*2**e,3e4)}function NC(e){return(e??"online")==="online"?Bf.isOnline():!0}var qx=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function jC(e){let t=!1,r=0,s;const a=l5(),o=()=>a.status!=="pending",c=C=>{var T;if(!o()){const E=new qx(C);_(E),(T=e.onCancel)==null||T.call(e,E)}},u=()=>{t=!0},f=()=>{t=!1},p=()=>_C.isFocused()&&(e.networkMode==="always"||Bf.isOnline())&&e.canRun(),x=()=>NC(e.networkMode)&&e.canRun(),w=C=>{o()||(s==null||s(),a.resolve(C))},_=C=>{o()||(s==null||s(),a.reject(C))},j=()=>new Promise(C=>{var T;s=E=>{(o()||p())&&C(E)},(T=e.onPause)==null||T.call(e)}).then(()=>{var C;s=void 0,o()||(C=e.onContinue)==null||C.call(e)}),N=()=>{if(o())return;let C;const T=r===0?e.initialPromise:void 0;try{C=T??e.fn()}catch(E){C=Promise.reject(E)}Promise.resolve(C).then(w).catch(E=>{var L;if(o())return;const S=e.retry??(Im?0:3),b=e.retryDelay??h5,k=typeof b=="function"?b(r,E):b,O=S===!0||typeof S=="number"&&r<S||typeof S=="function"&&S(r,E);if(t||!O){_(E);return}r++,(L=e.onFail)==null||L.call(e,r,E),n5(k).then(()=>p()?void 0:j()).then(()=>{t?_(E):N()})})};return{promise:a,status:()=>a.status,cancel:c,continue:()=>(s==null||s(),a),cancelRetry:u,continueRetry:f,canStart:x,start:()=>(x()?N():j().then(N),a)}}var Ro,k2,CC=(k2=class{constructor(){It(this,Ro)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),JO(this.gcTime)&&ct(this,Ro,Ux.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Im?1/0:5*60*1e3))}clearGcTimeout(){Ne(this,Ro)&&(Ux.clearTimeout(Ne(this,Ro)),ct(this,Ro,void 0))}},Ro=new WeakMap,k2),Po,pc,Ns,Oo,Yr,yu,Do,Gs,Ma,T2,f5=(T2=class extends CC{constructor(t){super();It(this,Gs);It(this,Po);It(this,pc);It(this,Ns);It(this,Oo);It(this,Yr);It(this,yu);It(this,Do);ct(this,Do,!1),ct(this,yu,t.defaultOptions),this.setOptions(t.options),this.observers=[],ct(this,Oo,t.client),ct(this,Ns,Ne(this,Oo).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ct(this,Po,Wy(this.options)),this.state=t.state??Ne(this,Po),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Ne(this,Yr))==null?void 0:t.promise}setOptions(t){if(this.options={...Ne(this,yu),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=Wy(this.options);r.data!==void 0&&(this.setData(r.data,{updatedAt:r.dataUpdatedAt,manual:!0}),ct(this,Po,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Ne(this,Ns).remove(this)}setData(t,r){const s=s5(this.state.data,t,this.options);return gn(this,Gs,Ma).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(t,r){gn(this,Gs,Ma).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var s,a;const r=(s=Ne(this,Yr))==null?void 0:s.promise;return(a=Ne(this,Yr))==null||a.cancel(t),r?r.then(Hs).catch(Hs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Ne(this,Po))}isActive(){return this.observers.some(t=>t5(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===q1||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>$x(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!e5(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=Ne(this,Yr))==null||r.continue()}onOnline(){var r;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=Ne(this,Yr))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Ne(this,Ns).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(Ne(this,Yr)&&(Ne(this,Do)?Ne(this,Yr).cancel({revert:!0}):Ne(this,Yr).cancelRetry()),this.scheduleGc()),Ne(this,Ns).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||gn(this,Gs,Ma).call(this,{type:"invalidate"})}async fetch(t,r){var f,p,x,w,_,j,N,C,T,E,S,b;if(this.state.fetchStatus!=="idle"&&((f=Ne(this,Yr))==null?void 0:f.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Ne(this,Yr))return Ne(this,Yr).continueRetry(),Ne(this,Yr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const k=this.observers.find(O=>O.options.queryFn);k&&this.setOptions(k.options)}const s=new AbortController,a=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(ct(this,Do,!0),s.signal)})},o=()=>{const k=bC(this.options,r),L=(()=>{const P={client:Ne(this,Oo),queryKey:this.queryKey,meta:this.meta};return a(P),P})();return ct(this,Do,!1),this.options.persister?this.options.persister(k,L,this):k(L)},u=(()=>{const k={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Ne(this,Oo),state:this.state,fetchFn:o};return a(k),k})();(p=this.options.behavior)==null||p.onFetch(u,this),ct(this,pc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((x=u.fetchOptions)==null?void 0:x.meta))&&gn(this,Gs,Ma).call(this,{type:"fetch",meta:(w=u.fetchOptions)==null?void 0:w.meta}),ct(this,Yr,jC({initialPromise:r==null?void 0:r.initialPromise,fn:u.fetchFn,onCancel:k=>{k instanceof qx&&k.revert&&this.setState({...Ne(this,pc),fetchStatus:"idle"}),s.abort()},onFail:(k,O)=>{gn(this,Gs,Ma).call(this,{type:"failed",failureCount:k,error:O})},onPause:()=>{gn(this,Gs,Ma).call(this,{type:"pause"})},onContinue:()=>{gn(this,Gs,Ma).call(this,{type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0}));try{const k=await Ne(this,Yr).start();if(k===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(k),(j=(_=Ne(this,Ns).config).onSuccess)==null||j.call(_,k,this),(C=(N=Ne(this,Ns).config).onSettled)==null||C.call(N,k,this.state.error,this),k}catch(k){if(k instanceof qx){if(k.silent)return Ne(this,Yr).promise;if(k.revert){if(this.state.data===void 0)throw k;return this.state.data}}throw gn(this,Gs,Ma).call(this,{type:"error",error:k}),(E=(T=Ne(this,Ns).config).onError)==null||E.call(T,k,this),(b=(S=Ne(this,Ns).config).onSettled)==null||b.call(S,this.state.data,k,this),k}finally{this.scheduleGc()}}},Po=new WeakMap,pc=new WeakMap,Ns=new WeakMap,Oo=new WeakMap,Yr=new WeakMap,yu=new WeakMap,Do=new WeakMap,Gs=new WeakSet,Ma=function(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...m5(s.data,this.options),fetchMeta:t.meta??null};case"success":const a={...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ct(this,pc,t.manual?a:void 0),a;case"error":const o=t.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),jn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),Ne(this,Ns).notify({query:this,type:"updated",action:t})})},T2);function m5(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:NC(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Wy(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,s=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}function Hy(e){return{onFetch:(t,r)=>{var x,w,_,j,N;const s=t.options,a=(_=(w=(x=t.fetchOptions)==null?void 0:x.meta)==null?void 0:w.fetchMore)==null?void 0:_.direction,o=((j=t.state.data)==null?void 0:j.pages)||[],c=((N=t.state.data)==null?void 0:N.pageParams)||[];let u={pages:[],pageParams:[]},f=0;const p=async()=>{let C=!1;const T=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?C=!0:t.signal.addEventListener("abort",()=>{C=!0}),t.signal)})},E=bC(t.options,t.fetchOptions),S=async(b,k,O)=>{if(C)return Promise.reject();if(k==null&&b.pages.length)return Promise.resolve(b);const P=(()=>{const Y={client:t.client,queryKey:t.queryKey,pageParam:k,direction:O?"backward":"forward",meta:t.options.meta};return T(Y),Y})(),M=await E(P),{maxPages:R}=t.options,$=O?i5:a5;return{pages:$(b.pages,M,R),pageParams:$(b.pageParams,k,R)}};if(a&&o.length){const b=a==="backward",k=b?p5:Gy,O={pages:o,pageParams:c},L=k(s,O);u=await S(O,L,b)}else{const b=e??o.length;do{const k=f===0?c[0]??s.initialPageParam:Gy(s,u);if(f>0&&k==null)break;u=await S(u,k),f++}while(f<b)}return u};t.options.persister?t.fetchFn=()=>{var C,T;return(T=(C=t.options).persister)==null?void 0:T.call(C,p,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=p}}}function Gy(e,{pages:t,pageParams:r}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,r[s],r):void 0}function p5(e,{pages:t,pageParams:r}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,r[0],r):void 0}var bu,ga,_n,Mo,xa,pi,I2,g5=(I2=class extends CC{constructor(t){super();It(this,xa);It(this,bu);It(this,ga);It(this,_n);It(this,Mo);ct(this,bu,t.client),this.mutationId=t.mutationId,ct(this,_n,t.mutationCache),ct(this,ga,[]),this.state=t.state||x5(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Ne(this,ga).includes(t)||(Ne(this,ga).push(t),this.clearGcTimeout(),Ne(this,_n).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ct(this,ga,Ne(this,ga).filter(r=>r!==t)),this.scheduleGc(),Ne(this,_n).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Ne(this,ga).length||(this.state.status==="pending"?this.scheduleGc():Ne(this,_n).remove(this))}continue(){var t;return((t=Ne(this,Mo))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var c,u,f,p,x,w,_,j,N,C,T,E,S,b,k,O,L,P,M,R;const r=()=>{gn(this,xa,pi).call(this,{type:"continue"})},s={client:Ne(this,bu),meta:this.options.meta,mutationKey:this.options.mutationKey};ct(this,Mo,jC({fn:()=>this.options.mutationFn?this.options.mutationFn(t,s):Promise.reject(new Error("No mutationFn found")),onFail:($,Y)=>{gn(this,xa,pi).call(this,{type:"failed",failureCount:$,error:Y})},onPause:()=>{gn(this,xa,pi).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Ne(this,_n).canRun(this)}));const a=this.state.status==="pending",o=!Ne(this,Mo).canStart();try{if(a)r();else{gn(this,xa,pi).call(this,{type:"pending",variables:t,isPaused:o}),await((u=(c=Ne(this,_n).config).onMutate)==null?void 0:u.call(c,t,this,s));const Y=await((p=(f=this.options).onMutate)==null?void 0:p.call(f,t,s));Y!==this.state.context&&gn(this,xa,pi).call(this,{type:"pending",context:Y,variables:t,isPaused:o})}const $=await Ne(this,Mo).start();return await((w=(x=Ne(this,_n).config).onSuccess)==null?void 0:w.call(x,$,t,this.state.context,this,s)),await((j=(_=this.options).onSuccess)==null?void 0:j.call(_,$,t,this.state.context,s)),await((C=(N=Ne(this,_n).config).onSettled)==null?void 0:C.call(N,$,null,this.state.variables,this.state.context,this,s)),await((E=(T=this.options).onSettled)==null?void 0:E.call(T,$,null,t,this.state.context,s)),gn(this,xa,pi).call(this,{type:"success",data:$}),$}catch($){try{throw await((b=(S=Ne(this,_n).config).onError)==null?void 0:b.call(S,$,t,this.state.context,this,s)),await((O=(k=this.options).onError)==null?void 0:O.call(k,$,t,this.state.context,s)),await((P=(L=Ne(this,_n).config).onSettled)==null?void 0:P.call(L,void 0,$,this.state.variables,this.state.context,this,s)),await((R=(M=this.options).onSettled)==null?void 0:R.call(M,void 0,$,t,this.state.context,s)),$}finally{gn(this,xa,pi).call(this,{type:"error",error:$})}}finally{Ne(this,_n).runNext(this)}}},bu=new WeakMap,ga=new WeakMap,_n=new WeakMap,Mo=new WeakMap,xa=new WeakSet,pi=function(t){const r=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),jn.batch(()=>{Ne(this,ga).forEach(s=>{s.onMutationUpdate(t)}),Ne(this,_n).notify({mutation:this,type:"updated",action:t})})},I2);function x5(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ua,Xs,_u,R2,v5=(R2=class extends Tm{constructor(t={}){super();It(this,Ua);It(this,Xs);It(this,_u);this.config=t,ct(this,Ua,new Set),ct(this,Xs,new Map),ct(this,_u,0)}build(t,r,s){const a=new g5({client:t,mutationCache:this,mutationId:++oh(this,_u)._,options:t.defaultMutationOptions(r),state:s});return this.add(a),a}add(t){Ne(this,Ua).add(t);const r=kh(t);if(typeof r=="string"){const s=Ne(this,Xs).get(r);s?s.push(t):Ne(this,Xs).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Ne(this,Ua).delete(t)){const r=kh(t);if(typeof r=="string"){const s=Ne(this,Xs).get(r);if(s)if(s.length>1){const a=s.indexOf(t);a!==-1&&s.splice(a,1)}else s[0]===t&&Ne(this,Xs).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=kh(t);if(typeof r=="string"){const s=Ne(this,Xs).get(r),a=s==null?void 0:s.find(o=>o.state.status==="pending");return!a||a===t}else return!0}runNext(t){var s;const r=kh(t);if(typeof r=="string"){const a=(s=Ne(this,Xs).get(r))==null?void 0:s.find(o=>o!==t&&o.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){jn.batch(()=>{Ne(this,Ua).forEach(t=>{this.notify({type:"removed",mutation:t})}),Ne(this,Ua).clear(),Ne(this,Xs).clear()})}getAll(){return Array.from(Ne(this,Ua))}find(t){const r={exact:!0,...t};return this.getAll().find(s=>$y(r,s))}findAll(t={}){return this.getAll().filter(r=>$y(t,r))}notify(t){jn.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return jn.batch(()=>Promise.all(t.map(r=>r.continue().catch(Hs))))}},Ua=new WeakMap,Xs=new WeakMap,_u=new WeakMap,R2);function kh(e){var t;return(t=e.options.scope)==null?void 0:t.id}var va,P2,w5=(P2=class extends Tm{constructor(t={}){super();It(this,va);this.config=t,ct(this,va,new Map)}build(t,r,s){const a=r.queryKey,o=r.queryHash??V1(a,r);let c=this.get(o);return c||(c=new f5({client:t,queryKey:a,queryHash:o,options:t.defaultQueryOptions(r),state:s,defaultOptions:t.getQueryDefaults(a)}),this.add(c)),c}add(t){Ne(this,va).has(t.queryHash)||(Ne(this,va).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=Ne(this,va).get(t.queryHash);r&&(t.destroy(),r===t&&Ne(this,va).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){jn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Ne(this,va).get(t)}getAll(){return[...Ne(this,va).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(s=>Uy(r,s))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(s=>Uy(t,s)):r}notify(t){jn.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){jn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){jn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},va=new WeakMap,P2),Nr,Ei,Si,gc,xc,Ai,vc,wc,O2,y5=(O2=class{constructor(e={}){It(this,Nr);It(this,Ei);It(this,Si);It(this,gc);It(this,xc);It(this,Ai);It(this,vc);It(this,wc);ct(this,Nr,e.queryCache||new w5),ct(this,Ei,e.mutationCache||new v5),ct(this,Si,e.defaultOptions||{}),ct(this,gc,new Map),ct(this,xc,new Map),ct(this,Ai,0)}mount(){oh(this,Ai)._++,Ne(this,Ai)===1&&(ct(this,vc,_C.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ne(this,Nr).onFocus())})),ct(this,wc,Bf.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ne(this,Nr).onOnline())})))}unmount(){var e,t;oh(this,Ai)._--,Ne(this,Ai)===0&&((e=Ne(this,vc))==null||e.call(this),ct(this,vc,void 0),(t=Ne(this,wc))==null||t.call(this),ct(this,wc,void 0))}isFetching(e){return Ne(this,Nr).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Ne(this,Ei).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Ne(this,Nr).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=Ne(this,Nr).build(this,t),s=r.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime($x(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return Ne(this,Nr).findAll(e).map(({queryKey:t,state:r})=>{const s=r.data;return[t,s]})}setQueryData(e,t,r){const s=this.defaultQueryOptions({queryKey:e}),a=Ne(this,Nr).get(s.queryHash),o=a==null?void 0:a.state.data,c=ZO(t,o);if(c!==void 0)return Ne(this,Nr).build(this,s).setData(c,{...r,manual:!0})}setQueriesData(e,t,r){return jn.batch(()=>Ne(this,Nr).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Ne(this,Nr).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=Ne(this,Nr);jn.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=Ne(this,Nr);return jn.batch(()=>(r.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},s=jn.batch(()=>Ne(this,Nr).findAll(e).map(a=>a.cancel(r)));return Promise.all(s).then(Hs).catch(Hs)}invalidateQueries(e,t={}){return jn.batch(()=>(Ne(this,Nr).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},s=jn.batch(()=>Ne(this,Nr).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let o=a.fetch(void 0,r);return r.throwOnError||(o=o.catch(Hs)),a.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(s).then(Hs)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=Ne(this,Nr).build(this,t);return r.isStaleByTime($x(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Hs).catch(Hs)}fetchInfiniteQuery(e){return e.behavior=Hy(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Hs).catch(Hs)}ensureInfiniteQueryData(e){return e.behavior=Hy(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Bf.isOnline()?Ne(this,Ei).resumePausedMutations():Promise.resolve()}getQueryCache(){return Ne(this,Nr)}getMutationCache(){return Ne(this,Ei)}getDefaultOptions(){return Ne(this,Si)}setDefaultOptions(e){ct(this,Si,e)}setQueryDefaults(e,t){Ne(this,gc).set(cu(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Ne(this,gc).values()],r={};return t.forEach(s=>{du(e,s.queryKey)&&Object.assign(r,s.defaultOptions)}),r}setMutationDefaults(e,t){Ne(this,xc).set(cu(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Ne(this,xc).values()],r={};return t.forEach(s=>{du(e,s.mutationKey)&&Object.assign(r,s.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Ne(this,Si).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=V1(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===q1&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Ne(this,Si).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Ne(this,Nr).clear(),Ne(this,Ei).clear()}},Nr=new WeakMap,Ei=new WeakMap,Si=new WeakMap,gc=new WeakMap,xc=new WeakMap,Ai=new WeakMap,vc=new WeakMap,wc=new WeakMap,O2),b5=v.createContext(void 0),_5=({client:e,children:t})=>(v.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(b5.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uu(){return uu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},uu.apply(this,arguments)}var Ii;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ii||(Ii={}));const Xy="popstate";function N5(e){e===void 0&&(e={});function t(s,a){let{pathname:o,search:c,hash:u}=s.location;return Wx("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){return typeof a=="string"?a:SC(a)}return C5(t,r,null,e)}function Wr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function EC(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function j5(){return Math.random().toString(36).substr(2,8)}function Ky(e,t){return{usr:e.state,key:e.key,idx:t}}function Wx(e,t,r,s){return r===void 0&&(r=null),uu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Wc(t):t,{state:r,key:t&&t.key||s||j5()})}function SC(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Wc(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function C5(e,t,r,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:o=!1}=s,c=a.history,u=Ii.Pop,f=null,p=x();p==null&&(p=0,c.replaceState(uu({},c.state,{idx:p}),""));function x(){return(c.state||{idx:null}).idx}function w(){u=Ii.Pop;let T=x(),E=T==null?null:T-p;p=T,f&&f({action:u,location:C.location,delta:E})}function _(T,E){u=Ii.Push;let S=Wx(C.location,T,E);p=x()+1;let b=Ky(S,p),k=C.createHref(S);try{c.pushState(b,"",k)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;a.location.assign(k)}o&&f&&f({action:u,location:C.location,delta:1})}function j(T,E){u=Ii.Replace;let S=Wx(C.location,T,E);p=x();let b=Ky(S,p),k=C.createHref(S);c.replaceState(b,"",k),o&&f&&f({action:u,location:C.location,delta:0})}function N(T){let E=a.location.origin!=="null"?a.location.origin:a.location.href,S=typeof T=="string"?T:SC(T);return S=S.replace(/ $/,"%20"),Wr(E,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,E)}let C={get action(){return u},get location(){return e(a,c)},listen(T){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(Xy,w),f=T,()=>{a.removeEventListener(Xy,w),f=null}},createHref(T){return t(a,T)},createURL:N,encodeLocation(T){let E=N(T);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:_,replace:j,go(T){return c.go(T)}};return C}var Yy;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Yy||(Yy={}));function E5(e,t,r){return r===void 0&&(r="/"),S5(e,t,r)}function S5(e,t,r,s){let a=typeof t=="string"?Wc(t):t,o=TC(a.pathname||"/",r);if(o==null)return null;let c=AC(e);A5(c);let u=null;for(let f=0;u==null&&f<c.length;++f){let p=z5(o);u=L5(c[f],p)}return u}function AC(e,t,r,s){t===void 0&&(t=[]),r===void 0&&(r=[]),s===void 0&&(s="");let a=(o,c,u)=>{let f={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};f.relativePath.startsWith("/")&&(Wr(f.relativePath.startsWith(s),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(s.length));let p=zo([s,f.relativePath]),x=r.concat(f);o.children&&o.children.length>0&&(Wr(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),AC(o.children,t,x,p)),!(o.path==null&&!o.index)&&t.push({path:p,score:D5(p,o.index),routesMeta:x})};return e.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))a(o,c);else for(let f of kC(o.path))a(o,c,f)}),t}function kC(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,a=r.endsWith("?"),o=r.replace(/\?$/,"");if(s.length===0)return a?[o,""]:[o];let c=kC(s.join("/")),u=[];return u.push(...c.map(f=>f===""?o:[o,f].join("/"))),a&&u.push(...c),u.map(f=>e.startsWith("/")&&f===""?"/":f)}function A5(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:M5(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const k5=/^:[\w-]+$/,T5=3,I5=2,R5=1,P5=10,O5=-2,Qy=e=>e==="*";function D5(e,t){let r=e.split("/"),s=r.length;return r.some(Qy)&&(s+=O5),t&&(s+=I5),r.filter(a=>!Qy(a)).reduce((a,o)=>a+(k5.test(o)?T5:o===""?R5:P5),s)}function M5(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function L5(e,t,r){let{routesMeta:s}=e,a={},o="/",c=[];for(let u=0;u<s.length;++u){let f=s[u],p=u===s.length-1,x=o==="/"?t:t.slice(o.length)||"/",w=F5({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},x),_=f.route;if(!w)return null;Object.assign(a,w.params),c.push({params:a,pathname:zo([o,w.pathname]),pathnameBase:H5(zo([o,w.pathnameBase])),route:_}),w.pathnameBase!=="/"&&(o=zo([o,w.pathnameBase]))}return c}function F5(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=B5(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let o=a[0],c=o.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:s.reduce((p,x,w)=>{let{paramName:_,isOptional:j}=x;if(_==="*"){let C=u[w]||"";c=o.slice(0,o.length-C.length).replace(/(.)\/+$/,"$1")}const N=u[w];return j&&!N?p[_]=void 0:p[_]=(N||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:c,pattern:e}}function B5(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),EC(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,f)=>(s.push({paramName:u,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function z5(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return EC(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function TC(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function U5(e,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:a=""}=typeof e=="string"?Wc(e):e;return{pathname:r?r.startsWith("/")?r:$5(r,t):t,search:G5(s),hash:X5(a)}}function $5(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function fg(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function V5(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function q5(e,t){let r=V5(e);return t?r.map((s,a)=>a===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function W5(e,t,r,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=Wc(e):(a=uu({},e),Wr(!a.pathname||!a.pathname.includes("?"),fg("?","pathname","search",a)),Wr(!a.pathname||!a.pathname.includes("#"),fg("#","pathname","hash",a)),Wr(!a.search||!a.search.includes("#"),fg("#","search","hash",a)));let o=e===""||a.pathname==="",c=o?"/":a.pathname,u;if(c==null)u=r;else{let w=t.length-1;if(!s&&c.startsWith("..")){let _=c.split("/");for(;_[0]==="..";)_.shift(),w-=1;a.pathname=_.join("/")}u=w>=0?t[w]:"/"}let f=U5(a,u),p=c&&c!=="/"&&c.endsWith("/"),x=(o||c===".")&&r.endsWith("/");return!f.pathname.endsWith("/")&&(p||x)&&(f.pathname+="/"),f}const zo=e=>e.join("/").replace(/\/\/+/g,"/"),H5=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),G5=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,X5=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function K5(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const IC=["post","put","patch","delete"];new Set(IC);const Y5=["get",...IC];new Set(Y5);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hu(){return hu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},hu.apply(this,arguments)}const W1=v.createContext(null),Q5=v.createContext(null),Rm=v.createContext(null),Pm=v.createContext(null),ul=v.createContext({outlet:null,matches:[],isDataRoute:!1}),RC=v.createContext(null);function Om(){return v.useContext(Pm)!=null}function Kn(){return Om()||Wr(!1),v.useContext(Pm).location}function PC(e){v.useContext(Rm).static||v.useLayoutEffect(e)}function _t(){let{isDataRoute:e}=v.useContext(ul);return e?dD():Z5()}function Z5(){Om()||Wr(!1);let e=v.useContext(W1),{basename:t,future:r,navigator:s}=v.useContext(Rm),{matches:a}=v.useContext(ul),{pathname:o}=Kn(),c=JSON.stringify(q5(a,r.v7_relativeSplatPath)),u=v.useRef(!1);return PC(()=>{u.current=!0}),v.useCallback(function(p,x){if(x===void 0&&(x={}),!u.current)return;if(typeof p=="number"){s.go(p);return}let w=W5(p,JSON.parse(c),o,x.relative==="path");e==null&&t!=="/"&&(w.pathname=w.pathname==="/"?t:zo([t,w.pathname])),(x.replace?s.replace:s.push)(w,x.state,x)},[t,s,c,o,e])}function hl(){let{matches:e}=v.useContext(ul),t=e[e.length-1];return t?t.params:{}}function J5(e,t){return eD(e,t)}function eD(e,t,r,s){Om()||Wr(!1);let{navigator:a}=v.useContext(Rm),{matches:o}=v.useContext(ul),c=o[o.length-1],u=c?c.params:{};c&&c.pathname;let f=c?c.pathnameBase:"/";c&&c.route;let p=Kn(),x;if(t){var w;let T=typeof t=="string"?Wc(t):t;f==="/"||(w=T.pathname)!=null&&w.startsWith(f)||Wr(!1),x=T}else x=p;let _=x.pathname||"/",j=_;if(f!=="/"){let T=f.replace(/^\//,"").split("/");j="/"+_.replace(/^\//,"").split("/").slice(T.length).join("/")}let N=E5(e,{pathname:j}),C=aD(N&&N.map(T=>Object.assign({},T,{params:Object.assign({},u,T.params),pathname:zo([f,a.encodeLocation?a.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?f:zo([f,a.encodeLocation?a.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),o,r,s);return t&&C?v.createElement(Pm.Provider,{value:{location:hu({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:Ii.Pop}},C):C}function tD(){let e=cD(),t=K5(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),r?v.createElement("pre",{style:a},r):null,null)}const rD=v.createElement(tD,null);class nD extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?v.createElement(ul.Provider,{value:this.props.routeContext},v.createElement(RC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function sD(e){let{routeContext:t,match:r,children:s}=e,a=v.useContext(W1);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),v.createElement(ul.Provider,{value:t},s)}function aD(e,t,r,s){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var o;if(!r)return null;if(r.errors)e=r.matches;else if((o=s)!=null&&o.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let c=e,u=(a=r)==null?void 0:a.errors;if(u!=null){let x=c.findIndex(w=>w.route.id&&(u==null?void 0:u[w.route.id])!==void 0);x>=0||Wr(!1),c=c.slice(0,Math.min(c.length,x+1))}let f=!1,p=-1;if(r&&s&&s.v7_partialHydration)for(let x=0;x<c.length;x++){let w=c[x];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(p=x),w.route.id){let{loaderData:_,errors:j}=r,N=w.route.loader&&_[w.route.id]===void 0&&(!j||j[w.route.id]===void 0);if(w.route.lazy||N){f=!0,p>=0?c=c.slice(0,p+1):c=[c[0]];break}}}return c.reduceRight((x,w,_)=>{let j,N=!1,C=null,T=null;r&&(j=u&&w.route.id?u[w.route.id]:void 0,C=w.route.errorElement||rD,f&&(p<0&&_===0?(uD("route-fallback"),N=!0,T=null):p===_&&(N=!0,T=w.route.hydrateFallbackElement||null)));let E=t.concat(c.slice(0,_+1)),S=()=>{let b;return j?b=C:N?b=T:w.route.Component?b=v.createElement(w.route.Component,null):w.route.element?b=w.route.element:b=x,v.createElement(sD,{match:w,routeContext:{outlet:x,matches:E,isDataRoute:r!=null},children:b})};return r&&(w.route.ErrorBoundary||w.route.errorElement||_===0)?v.createElement(nD,{location:r.location,revalidation:r.revalidation,component:C,error:j,children:S(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):S()},null)}var OC=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(OC||{}),DC=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(DC||{});function iD(e){let t=v.useContext(W1);return t||Wr(!1),t}function oD(e){let t=v.useContext(Q5);return t||Wr(!1),t}function lD(e){let t=v.useContext(ul);return t||Wr(!1),t}function MC(e){let t=lD(),r=t.matches[t.matches.length-1];return r.route.id||Wr(!1),r.route.id}function cD(){var e;let t=v.useContext(RC),r=oD(),s=MC();return t!==void 0?t:(e=r.errors)==null?void 0:e[s]}function dD(){let{router:e}=iD(OC.UseNavigateStable),t=MC(DC.UseNavigateStable),r=v.useRef(!1);return PC(()=>{r.current=!0}),v.useCallback(function(a,o){o===void 0&&(o={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,hu({fromRouteId:t},o)))},[e,t])}const Zy={};function uD(e,t,r){Zy[e]||(Zy[e]=!0)}function hD(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Wt(e){Wr(!1)}function fD(e){let{basename:t="/",children:r=null,location:s,navigationType:a=Ii.Pop,navigator:o,static:c=!1,future:u}=e;Om()&&Wr(!1);let f=t.replace(/^\/*/,"/"),p=v.useMemo(()=>({basename:f,navigator:o,static:c,future:hu({v7_relativeSplatPath:!1},u)}),[f,u,o,c]);typeof s=="string"&&(s=Wc(s));let{pathname:x="/",search:w="",hash:_="",state:j=null,key:N="default"}=s,C=v.useMemo(()=>{let T=TC(x,f);return T==null?null:{location:{pathname:T,search:w,hash:_,state:j,key:N},navigationType:a}},[f,x,w,_,j,N,a]);return C==null?null:v.createElement(Rm.Provider,{value:p},v.createElement(Pm.Provider,{children:r,value:C}))}function mD(e){let{children:t,location:r}=e;return J5(Hx(t),r)}new Promise(()=>{});function Hx(e,t){t===void 0&&(t=[]);let r=[];return v.Children.forEach(e,(s,a)=>{if(!v.isValidElement(s))return;let o=[...t,a];if(s.type===v.Fragment){r.push.apply(r,Hx(s.props.children,o));return}s.type!==Wt&&Wr(!1),!s.props.index||!s.props.children||Wr(!1);let c={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=Hx(s.props.children,o)),r.push(c)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gx(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let s=e[r];return t.concat(Array.isArray(s)?s.map(a=>[r,a]):[[r,s]])},[]))}function pD(e,t){let r=Gx(e);return t&&t.forEach((s,a)=>{r.has(a)||t.getAll(a).forEach(o=>{r.append(a,o)})}),r}const gD="6";try{window.__reactRouterVersion=gD}catch{}const xD="startTransition",Jy=I0[xD];function vD(e){let{basename:t,children:r,future:s,window:a}=e,o=v.useRef();o.current==null&&(o.current=N5({window:a,v5Compat:!0}));let c=o.current,[u,f]=v.useState({action:c.action,location:c.location}),{v7_startTransition:p}=s||{},x=v.useCallback(w=>{p&&Jy?Jy(()=>f(w)):f(w)},[f,p]);return v.useLayoutEffect(()=>c.listen(x),[c,x]),v.useEffect(()=>hD(s),[s]),v.createElement(fD,{basename:t,children:r,location:u.location,navigationType:u.action,navigator:c,future:s})}var eb;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(eb||(eb={}));var tb;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(tb||(tb={}));function H1(e){let t=v.useRef(Gx(e)),r=v.useRef(!1),s=Kn(),a=v.useMemo(()=>pD(s.search,r.current?null:t.current),[s.search]),o=_t(),c=v.useCallback((u,f)=>{const p=Gx(typeof u=="function"?u(a):u);r.current=!0,o("?"+p,f)},[o,a]);return[a,c]}const wD="modulepreload",yD=function(e,t){return new URL(e,t).href},rb={},fl=function(t,r,s){let a=Promise.resolve();if(r&&r.length>0){const c=document.getElementsByTagName("link"),u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));a=Promise.allSettled(r.map(p=>{if(p=yD(p,s),p in rb)return;rb[p]=!0;const x=p.endsWith(".css"),w=x?'[rel="stylesheet"]':"";if(!!s)for(let N=c.length-1;N>=0;N--){const C=c[N];if(C.href===p&&(!x||C.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${p}"]${w}`))return;const j=document.createElement("link");if(j.rel=x?"stylesheet":wD,x||(j.as="script"),j.crossOrigin="",j.href=p,f&&j.setAttribute("nonce",f),document.head.appendChild(j),x)return new Promise((N,C)=>{j.addEventListener("load",N),j.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return a.then(c=>{for(const u of c||[])u.status==="rejected"&&o(u.reason);return t().catch(o)})},bD=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>fl(async()=>{const{default:s}=await Promise.resolve().then(()=>Hc);return{default:s}},void 0,import.meta.url).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)};class G1 extends Error{constructor(t,r="FunctionsError",s){super(t),this.name=r,this.context=s}}class nb extends G1{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class sb extends G1{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class ab extends G1{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Xx;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Xx||(Xx={}));var _D=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{p(s.next(x))}catch(w){c(w)}}function f(x){try{p(s.throw(x))}catch(w){c(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})};class ND{constructor(t,{headers:r={},customFetch:s,region:a=Xx.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=bD(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return _D(this,arguments,void 0,function*(r,s={}){var a;try{const{headers:o,method:c,body:u,signal:f}=s;let p={},{region:x}=s;x||(x=this.region);const w=new URL(`${this.url}/${r}`);x&&x!=="any"&&(p["x-region"]=x,w.searchParams.set("forceFunctionRegion",x));let _;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",_=u):typeof u=="string"?(p["Content-Type"]="text/plain",_=u):typeof FormData<"u"&&u instanceof FormData?_=u:(p["Content-Type"]="application/json",_=JSON.stringify(u)));const j=yield this.fetch(w.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),o),body:_,signal:f}).catch(E=>{throw E.name==="AbortError"?E:new nb(E)}),N=j.headers.get("x-relay-error");if(N&&N==="true")throw new sb(j);if(!j.ok)throw new ab(j);let C=((a=j.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),T;return C==="application/json"?T=yield j.json():C==="application/octet-stream"?T=yield j.blob():C==="text/event-stream"?T=j:C==="multipart/form-data"?T=yield j.formData():T=yield j.text(),{data:T,error:null,response:j}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new nb(o)}:{data:null,error:o,response:o instanceof ab||o instanceof sb?o.context:void 0}}})}}var $n={},X1={},Dm={},Mu={},Mm={},Lm={},jD=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ic=jD();const CD=Ic.fetch,LC=Ic.fetch.bind(Ic),FC=Ic.Headers,ED=Ic.Request,SD=Ic.Response,Hc=Object.freeze(Object.defineProperty({__proto__:null,Headers:FC,Request:ED,Response:SD,default:LC,fetch:CD},Symbol.toStringTag,{value:"Module"})),AD=oT(Hc);var Fm={};Object.defineProperty(Fm,"__esModule",{value:!0});let kD=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Fm.default=kD;var BC=on&&on.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Lm,"__esModule",{value:!0});const TD=BC(AD),ID=BC(Fm);let RD=class{constructor(t){var r,s;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(s=t.isMaybeSingle)!==null&&s!==void 0?s:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=TD.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let a=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var c,u,f,p;let x=null,w=null,_=null,j=o.status,N=o.statusText;if(o.ok){if(this.method!=="HEAD"){const S=await o.text();S===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?w=S:w=JSON.parse(S))}const T=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),E=(f=o.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");T&&E&&E.length>1&&(_=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(w)&&(w.length>1?(x={code:"PGRST116",details:`Results contain ${w.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},w=null,_=null,j=406,N="Not Acceptable"):w.length===1?w=w[0]:w=null)}else{const T=await o.text();try{x=JSON.parse(T),Array.isArray(x)&&o.status===404&&(w=[],x=null,j=200,N="OK")}catch{o.status===404&&T===""?(j=204,N="No Content"):x={message:T}}if(x&&this.isMaybeSingle&&(!((p=x==null?void 0:x.details)===null||p===void 0)&&p.includes("0 rows"))&&(x=null,j=200,N="OK"),x&&this.shouldThrowOnError)throw new ID.default(x)}return{error:x,data:w,count:_,status:j,statusText:N}});return this.shouldThrowOnError||(a=a.catch(o=>{var c,u,f;return{error:{message:`${(c=o==null?void 0:o.name)!==null&&c!==void 0?c:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(u=o==null?void 0:o.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(f=o==null?void 0:o.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,r)}returns(){return this}overrideTypes(){return this}};Lm.default=RD;var PD=on&&on.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mm,"__esModule",{value:!0});const OD=PD(Lm);let DD=class extends OD.default{select(t){let r=!1;const s=(t??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:s,foreignTable:a,referencedTable:o=a}={}){const c=o?`${o}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${t}.${r?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:s=r}={}){const a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,r,{foreignTable:s,referencedTable:a=s}={}){const o=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(c,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:s=!1,buffers:a=!1,wal:o=!1,format:c="text"}={}){var u;const f=[t?"analyze":null,r?"verbose":null,s?"settings":null,a?"buffers":null,o?"wal":null].filter(Boolean).join("|"),p=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${p}"; options=${f};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Mm.default=DD;var MD=on&&on.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mu,"__esModule",{value:!0});const LD=MD(Mm);let FD=class extends LD.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const s=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${s})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:s,type:a}={}){let o="";a==="plain"?o="pl":a==="phrase"?o="ph":a==="websearch"&&(o="w");const c=s===void 0?"":`(${s})`;return this.url.searchParams.append(t,`${o}fts${c}.${r}`),this}match(t){return Object.entries(t).forEach(([r,s])=>{this.url.searchParams.append(r,`eq.${s}`)}),this}not(t,r,s){return this.url.searchParams.append(t,`not.${r}.${s}`),this}or(t,{foreignTable:r,referencedTable:s=r}={}){const a=s?`${s}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,r,s){return this.url.searchParams.append(t,`${r}.${s}`),this}};Mu.default=FD;var BD=on&&on.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Dm,"__esModule",{value:!0});const gd=BD(Mu);let zD=class{constructor(t,{headers:r={},schema:s,fetch:a}){this.url=t,this.headers=new Headers(r),this.schema=s,this.fetch=a}select(t,r){const{head:s=!1,count:a}=r??{},o=s?"HEAD":"GET";let c=!1;const u=(t??"*").split("").map(f=>/\s/.test(f)&&!c?"":(f==='"'&&(c=!c),f)).join("");return this.url.searchParams.set("select",u),a&&this.headers.append("Prefer",`count=${a}`),new gd.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:s=!0}={}){var a;const o="POST";if(r&&this.headers.append("Prefer",`count=${r}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,f)=>u.concat(Object.keys(f)),[]);if(c.length>0){const u=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",u.join(","))}}return new gd.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:s=!1,count:a,defaultToNull:o=!0}={}){var c;const u="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),a&&this.headers.append("Prefer",`count=${a}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const f=t.reduce((p,x)=>p.concat(Object.keys(x)),[]);if(f.length>0){const p=[...new Set(f)].map(x=>`"${x}"`);this.url.searchParams.set("columns",p.join(","))}}return new gd.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(t,{count:r}={}){var s;const a="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new gd.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:t}={}){var r;const s="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new gd.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};Dm.default=zD;var zC=on&&on.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(X1,"__esModule",{value:!0});const UD=zC(Dm),$D=zC(Mu);let VD=class UC{constructor(t,{headers:r={},schema:s,fetch:a}={}){this.url=t,this.headers=new Headers(r),this.schemaName=s,this.fetch=a}from(t){const r=new URL(`${this.url}/${t}`);return new UD.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new UC(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:s=!1,get:a=!1,count:o}={}){var c;let u;const f=new URL(`${this.url}/rpc/${t}`);let p;s||a?(u=s?"HEAD":"GET",Object.entries(r).filter(([w,_])=>_!==void 0).map(([w,_])=>[w,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([w,_])=>{f.searchParams.append(w,_)})):(u="POST",p=r);const x=new Headers(this.headers);return o&&x.set("Prefer",`count=${o}`),new $D.default({method:u,url:f,headers:x,schema:this.schemaName,body:p,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}};X1.default=VD;var Gc=on&&on.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($n,"__esModule",{value:!0});$n.PostgrestError=$n.PostgrestBuilder=$n.PostgrestTransformBuilder=$n.PostgrestFilterBuilder=$n.PostgrestQueryBuilder=$n.PostgrestClient=void 0;const $C=Gc(X1);$n.PostgrestClient=$C.default;const VC=Gc(Dm);$n.PostgrestQueryBuilder=VC.default;const qC=Gc(Mu);$n.PostgrestFilterBuilder=qC.default;const WC=Gc(Mm);$n.PostgrestTransformBuilder=WC.default;const HC=Gc(Lm);$n.PostgrestBuilder=HC.default;const GC=Gc(Fm);$n.PostgrestError=GC.default;var qD=$n.default={PostgrestClient:$C.default,PostgrestQueryBuilder:VC.default,PostgrestFilterBuilder:qC.default,PostgrestTransformBuilder:WC.default,PostgrestBuilder:HC.default,PostgrestError:GC.default};const{PostgrestClient:WD,PostgrestQueryBuilder:JW,PostgrestFilterBuilder:eH,PostgrestTransformBuilder:tH,PostgrestBuilder:rH,PostgrestError:nH}=qD;class HD{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const s=r.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const s=this.getWebSocketConstructor();return new s(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const GD="2.75.0",XD=`realtime-js/${GD}`,KD="1.0.0",Kx=1e4,YD=1e3,QD=100;var Md;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Md||(Md={}));var Ur;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ur||(Ur={}));var Ys;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ys||(Ys={}));var Yx;(function(e){e.websocket="websocket"})(Yx||(Yx={}));var Co;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Co||(Co={}));class ZD{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),s=new TextDecoder;return this._decodeBroadcast(t,r,s)}_decodeBroadcast(t,r,s){const a=r.getUint8(1),o=r.getUint8(2);let c=this.HEADER_LENGTH+2;const u=s.decode(t.slice(c,c+a));c=c+a;const f=s.decode(t.slice(c,c+o));c=c+o;const p=JSON.parse(s.decode(t.slice(c,t.byteLength)));return{ref:null,topic:u,event:f,payload:p}}}class XC{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var rr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(rr||(rr={}));const ib=(e,t,r={})=>{var s;const a=(s=r.skipTypes)!==null&&s!==void 0?s:[];return t?Object.keys(t).reduce((o,c)=>(o[c]=JD(c,e,t,a),o),{}):{}},JD=(e,t,r,s)=>{const a=t.find(u=>u.name===e),o=a==null?void 0:a.type,c=r[e];return o&&!s.includes(o)?KC(o,c):Qx(c)},KC=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return nM(t,r)}switch(e){case rr.bool:return eM(t);case rr.float4:case rr.float8:case rr.int2:case rr.int4:case rr.int8:case rr.numeric:case rr.oid:return tM(t);case rr.json:case rr.jsonb:return rM(t);case rr.timestamp:return sM(t);case rr.abstime:case rr.date:case rr.daterange:case rr.int4range:case rr.int8range:case rr.money:case rr.reltime:case rr.text:case rr.time:case rr.timestamptz:case rr.timetz:case rr.tsrange:case rr.tstzrange:return Qx(t);default:return Qx(t)}},Qx=e=>e,eM=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},tM=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},rM=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},nM=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,s=e[r];if(e[0]==="{"&&s==="}"){let o;const c=e.slice(1,r);try{o=JSON.parse("["+c+"]")}catch{o=c?c.split(","):[]}return o.map(u=>KC(t,u))}return e},sM=e=>typeof e=="string"?e.replace(" ","T"):e,YC=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class mg{constructor(t,r,s={},a=Kx){this.channel=t,this.event=r,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var s;return this._hasReceived(t)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var ob;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(ob||(ob={}));class Ld{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:o,onLeave:c,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ld.syncState(this.state,a,o,c),this.pendingDiffs.forEach(f=>{this.state=Ld.syncDiff(this.state,f,o,c)}),this.pendingDiffs=[],u()}),this.channel._on(s.diff,{},a=>{const{onJoin:o,onLeave:c,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Ld.syncDiff(this.state,a,o,c),u())}),this.onJoin((a,o,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:c})}),this.onLeave((a,o,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,s,a){const o=this.cloneDeep(t),c=this.transformState(r),u={},f={};return this.map(o,(p,x)=>{c[p]||(f[p]=x)}),this.map(c,(p,x)=>{const w=o[p];if(w){const _=x.map(T=>T.presence_ref),j=w.map(T=>T.presence_ref),N=x.filter(T=>j.indexOf(T.presence_ref)<0),C=w.filter(T=>_.indexOf(T.presence_ref)<0);N.length>0&&(u[p]=N),C.length>0&&(f[p]=C)}else u[p]=x}),this.syncDiff(o,{joins:u,leaves:f},s,a)}static syncDiff(t,r,s,a){const{joins:o,leaves:c}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(o,(u,f)=>{var p;const x=(p=t[u])!==null&&p!==void 0?p:[];if(t[u]=this.cloneDeep(f),x.length>0){const w=t[u].map(j=>j.presence_ref),_=x.filter(j=>w.indexOf(j.presence_ref)<0);t[u].unshift(..._)}s(u,x,f)}),this.map(c,(u,f)=>{let p=t[u];if(!p)return;const x=f.map(w=>w.presence_ref);p=p.filter(w=>x.indexOf(w.presence_ref)<0),t[u]=p,a(u,p,f),p.length===0&&delete t[u]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(s=>r(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,s)=>{const a=t[s];return"metas"in a?r[s]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[s]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var lb;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(lb||(lb={}));var Fd;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Fd||(Fd={}));var Ba;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ba||(Ba={}));class K1{constructor(t,r={config:{}},s){var a,o;if(this.topic=t,this.params=r,this.socket=s,this.bindings={},this.state=Ur.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new mg(this,Ys.join,this.params,this.timeout),this.rejoinTimer=new XC(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ur.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ur.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Ur.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ur.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Ur.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ys.reply,{},(c,u)=>{this._trigger(this._replyEventName(u),c)}),this.presence=new Ld(this),this.broadcastEndpointURL=YC(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var s,a,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Ur.closed){const{config:{broadcast:c,presence:u,private:f}}=this.params,p=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(j=>j.filter))!==null&&a!==void 0?a:[],x=!!this.bindings[Fd.PRESENCE]&&this.bindings[Fd.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,w={},_={broadcast:c,presence:Object.assign(Object.assign({},u),{enabled:x}),postgres_changes:p,private:f};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(j=>t==null?void 0:t(Ba.CHANNEL_ERROR,j)),this._onClose(()=>t==null?void 0:t(Ba.CLOSED)),this.updateJoinPayload(Object.assign({config:_},w)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:j})=>{var N;if(this.socket.setAuth(),j===void 0){t==null||t(Ba.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,T=(N=C==null?void 0:C.length)!==null&&N!==void 0?N:0,E=[];for(let S=0;S<T;S++){const b=C[S],{filter:{event:k,schema:O,table:L,filter:P}}=b,M=j&&j[S];if(M&&M.event===k&&M.schema===O&&M.table===L&&M.filter===P)E.push(Object.assign(Object.assign({},b),{id:M.id}));else{this.unsubscribe(),this.state=Ur.errored,t==null||t(Ba.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,t&&t(Ba.SUBSCRIBED);return}}).receive("error",j=>{this.state=Ur.errored,t==null||t(Ba.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(j).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ba.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,s){return this.state===Ur.joined&&t===Fd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,s)}async send(t,r={}){var s,a;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:c}=t,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:c,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=p.body)===null||a===void 0?void 0:a.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var c,u,f;const p=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((f=(u=(c=this.params)===null||c===void 0?void 0:c.config)===null||u===void 0?void 0:u.broadcast)===null||f===void 0)&&f.ack)&&o("ok"),p.receive("ok",()=>o("ok")),p.receive("error",()=>o("error")),p.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ur.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ys.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new mg(this,Ys.leave,{},t),s.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ur.closed,this.bindings={}}async _fetchWithTimeout(t,r,s){const a=new AbortController,o=setTimeout(()=>a.abort(),s),c=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(o),c}_push(t,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new mg(this,t,r,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>QD){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,s){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,s){var a,o;const c=t.toLocaleLowerCase(),{close:u,error:f,leave:p,join:x}=Ys;if(s&&[u,f,p,x].indexOf(c)>=0&&s!==this._joinRef())return;let _=this._onMessage(c,r,s);if(r&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(j=>{var N,C,T;return((N=j.filter)===null||N===void 0?void 0:N.event)==="*"||((T=(C=j.filter)===null||C===void 0?void 0:C.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===c}).map(j=>j.callback(_,s)):(o=this.bindings[c])===null||o===void 0||o.filter(j=>{var N,C,T,E,S,b;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in j){const k=j.id,O=(N=j.filter)===null||N===void 0?void 0:N.event;return k&&((C=r.ids)===null||C===void 0?void 0:C.includes(k))&&(O==="*"||(O==null?void 0:O.toLocaleLowerCase())===((T=r.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const k=(S=(E=j==null?void 0:j.filter)===null||E===void 0?void 0:E.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return k==="*"||k===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return j.type.toLocaleLowerCase()===c}).map(j=>{if(typeof _=="object"&&"ids"in _){const N=_.data,{schema:C,table:T,commit_timestamp:E,type:S,errors:b}=N;_=Object.assign(Object.assign({},{schema:C,table:T,commit_timestamp:E,eventType:S,new:{},old:{},errors:b}),this._getPayloadRecords(N))}j.callback(_,s)})}_isClosed(){return this.state===Ur.closed}_isJoined(){return this.state===Ur.joined}_isJoining(){return this.state===Ur.joining}_isLeaving(){return this.state===Ur.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,s){const a=t.toLocaleLowerCase(),o={type:a,filter:r,callback:s};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(t,r){const s=t.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===s&&K1.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const s in t)if(t[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ys.close,{},t)}_onError(t){this._on(Ys.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ur.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=ib(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=ib(t.columns,t.old_record)),r}}const pg=()=>{},Th={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},aM=[1e3,2e3,5e3,1e4],iM=1e4,oM=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class lM{constructor(t,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Kx,this.transport=null,this.heartbeatIntervalMs=Th.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=pg,this.ref=0,this.reconnectTimer=null,this.logger=pg,this.conn=null,this.sendBuffer=[],this.serializer=new ZD,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...c)=>fl(async()=>{const{default:u}=await Promise.resolve().then(()=>Hc);return{default:u}},void 0,import.meta.url).then(({default:u})=>u(...c)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...c)=>o(...c)},!(!((s=r==null?void 0:r.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Yx.websocket}`,this.httpEndpoint=YC(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=HD.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:KD}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,s){this.logger(t,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Md.connecting:return Co.Connecting;case Md.open:return Co.Open;case Md.closing:return Co.Closing;default:return Co.Closed}}isConnected(){return this.connectionState()===Co.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const s=`realtime:${t}`,a=this.getChannels().find(o=>o.topic===s);if(a)return a;{const o=new K1(`realtime:${t}`,r,this);return this.channels.push(o),o}}push(t){const{topic:r,event:s,payload:a,ref:o}=t,c=()=>{this.encode(t,u=>{var f;(f=this.conn)===null||f===void 0||f.send(u)})};this.log("push",`${r} ${s} (${o})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(YD,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Th.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:o,ref:c}=r,u=c?`(${c})`:"",f=o.status||"";this.log("receive",`${f} ${s} ${a} ${u}`.trim(),o),this.channels.filter(p=>p._isMember(s)).forEach(p=>p._trigger(a,o,c)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ys.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const s=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${s}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const s=new Blob([oM],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const a={access_token:r,version:XD};r&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(Ys.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(s=>{try{s(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(s){this.log("error",`error triggering ${t} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new XC(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Th.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,s,a,o,c,u,f,p,x;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(s=t==null?void 0:t.timeout)!==null&&s!==void 0?s:Kx,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:Th.HEARTBEAT_INTERVAL,this.worker=(o=t==null?void 0:t.worker)!==null&&o!==void 0?o:!1,this.accessToken=(c=t==null?void 0:t.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:pg,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=t==null?void 0:t.reconnectAfterMs)!==null&&f!==void 0?f:w=>aM[w-1]||iM,this.encode=(p=t==null?void 0:t.encode)!==null&&p!==void 0?p:(w,_)=>_(JSON.stringify(w)),this.decode=(x=t==null?void 0:t.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Y1 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Or(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class cM extends Y1{constructor(t,r,s){super(t),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Zx extends Y1{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var dM=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{p(s.next(x))}catch(w){c(w)}}function f(x){try{p(s.throw(x))}catch(w){c(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})};const QC=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>fl(async()=>{const{default:s}=await Promise.resolve().then(()=>Hc);return{default:s}},void 0,import.meta.url).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)},uM=()=>dM(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield fl(()=>Promise.resolve().then(()=>Hc),void 0,import.meta.url)).Response:Response}),Jx=e=>{if(Array.isArray(e))return e.map(r=>Jx(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,s])=>{const a=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[a]=Jx(s)}),t},hM=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var ml=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{p(s.next(x))}catch(w){c(w)}}function f(x){try{p(s.throw(x))}catch(w){c(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})};const gg=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),fM=(e,t,r)=>ml(void 0,void 0,void 0,function*(){const s=yield uM();e instanceof s&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{const o=e.status||500,c=(a==null?void 0:a.statusCode)||o+"";t(new cM(gg(a),o,c))}).catch(a=>{t(new Zx(gg(a),a))}):t(new Zx(gg(e),e))}),mM=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!s?a:(hM(s)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(s)):a.body=s,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function Lu(e,t,r,s,a,o){return ml(this,void 0,void 0,function*(){return new Promise((c,u)=>{e(r,mM(t,s,a,o)).then(f=>{if(!f.ok)throw f;return s!=null&&s.noResolveJson?f:f.json()}).then(f=>c(f)).catch(f=>fM(f,u,s))})})}function zf(e,t,r,s){return ml(this,void 0,void 0,function*(){return Lu(e,"GET",t,r,s)})}function pa(e,t,r,s,a){return ml(this,void 0,void 0,function*(){return Lu(e,"POST",t,s,a,r)})}function e0(e,t,r,s,a){return ml(this,void 0,void 0,function*(){return Lu(e,"PUT",t,s,a,r)})}function pM(e,t,r,s){return ml(this,void 0,void 0,function*(){return Lu(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function ZC(e,t,r,s,a){return ml(this,void 0,void 0,function*(){return Lu(e,"DELETE",t,s,a,r)})}var gM=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{p(s.next(x))}catch(w){c(w)}}function f(x){try{p(s.throw(x))}catch(w){c(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})};class xM{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return gM(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Or(t))return{data:null,error:t};throw t}})}}var vM=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{p(s.next(x))}catch(w){c(w)}}function f(x){try{p(s.throw(x))}catch(w){c(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})};class wM{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}asStream(){return new xM(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.execute().then(t,r)}execute(){return vM(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Or(t))return{data:null,error:t};throw t}})}}var Fn=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{p(s.next(x))}catch(w){c(w)}}function f(x){try{p(s.throw(x))}catch(w){c(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})};const yM={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},cb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class bM{constructor(t,r={},s,a){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=s,this.fetch=QC(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,s,a){return Fn(this,void 0,void 0,function*(){try{let o;const c=Object.assign(Object.assign({},cb),a);let u=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(c.upsert)});const f=c.metadata;typeof Blob<"u"&&s instanceof Blob?(o=new FormData,o.append("cacheControl",c.cacheControl),f&&o.append("metadata",this.encodeMetadata(f)),o.append("",s)):typeof FormData<"u"&&s instanceof FormData?(o=s,o.append("cacheControl",c.cacheControl),f&&o.append("metadata",this.encodeMetadata(f))):(o=s,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType,f&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),a!=null&&a.headers&&(u=Object.assign(Object.assign({},u),a.headers));const p=this._removeEmptyFolders(r),x=this._getFinalPath(p),w=yield(t=="PUT"?e0:pa)(this.fetch,`${this.url}/object/${x}`,o,Object.assign({headers:u},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:p,id:w.Id,fullPath:w.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Or(o))return{data:null,error:o};throw o}})}upload(t,r,s){return Fn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,s)})}uploadToSignedUrl(t,r,s,a){return Fn(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),c=this._getFinalPath(o),u=new URL(this.url+`/object/upload/sign/${c}`);u.searchParams.set("token",r);try{let f;const p=Object.assign({upsert:cb.upsert},a),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&s instanceof Blob?(f=new FormData,f.append("cacheControl",p.cacheControl),f.append("",s)):typeof FormData<"u"&&s instanceof FormData?(f=s,f.append("cacheControl",p.cacheControl)):(f=s,x["cache-control"]=`max-age=${p.cacheControl}`,x["content-type"]=p.contentType);const w=yield e0(this.fetch,u.toString(),f,{headers:x});return{data:{path:o,fullPath:w.Key},error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(Or(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(t,r){return Fn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const o=yield pa(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),c=new URL(this.url+o.url),u=c.searchParams.get("token");if(!u)throw new Y1("No token returned by API");return{data:{signedUrl:c.toString(),path:t,token:u},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Or(s))return{data:null,error:s};throw s}})}update(t,r,s){return Fn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,s)})}move(t,r,s){return Fn(this,void 0,void 0,function*(){try{return{data:yield pa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Or(a))return{data:null,error:a};throw a}})}copy(t,r,s){return Fn(this,void 0,void 0,function*(){try{return{data:{path:(yield pa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Or(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,s){return Fn(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),o=yield pa(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const c=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${c}`)},{data:o,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Or(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,s){return Fn(this,void 0,void 0,function*(){try{const a=yield pa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${o}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Or(a))return{data:null,error:a};throw a}})}download(t,r){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),c=o?`?${o}`:"",u=this._getFinalPath(t),f=()=>zf(this.fetch,`${this.url}/${a}/${u}${c}`,{headers:this.headers,noResolveJson:!0});return new wM(f,this.shouldThrowOnError)}info(t){return Fn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const s=yield zf(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Jx(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Or(s))return{data:null,error:s};throw s}})}exists(t){return Fn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield pM(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Or(s)&&s instanceof Zx){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}})}getPublicUrl(t,r){const s=this._getFinalPath(t),a=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&a.push(o);const u=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",f=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});f!==""&&a.push(f);let p=a.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${s}${p}`)}}}remove(t){return Fn(this,void 0,void 0,function*(){try{return{data:yield ZC(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Or(r))return{data:null,error:r};throw r}})}list(t,r,s){return Fn(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},yM),r),{prefix:t||""});return{data:yield pa(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Or(a))return{data:null,error:a};throw a}})}listV2(t,r){return Fn(this,void 0,void 0,function*(){try{const s=Object.assign({},t);return{data:yield pa(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Or(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const _M="2.75.0",NM={"X-Client-Info":`storage-js/${_M}`};var Sl=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{p(s.next(x))}catch(w){c(w)}}function f(x){try{p(s.throw(x))}catch(w){c(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})};class jM{constructor(t,r={},s,a){this.shouldThrowOnError=!1;const o=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},NM),r),this.fetch=QC(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Sl(this,void 0,void 0,function*(){try{return{data:yield zf(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Or(t))return{data:null,error:t};throw t}})}getBucket(t){return Sl(this,void 0,void 0,function*(){try{return{data:yield zf(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Or(r))return{data:null,error:r};throw r}})}createBucket(t){return Sl(this,arguments,void 0,function*(r,s={public:!1}){try{return{data:yield pa(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Or(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return Sl(this,void 0,void 0,function*(){try{return{data:yield e0(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Or(s))return{data:null,error:s};throw s}})}emptyBucket(t){return Sl(this,void 0,void 0,function*(){try{return{data:yield pa(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Or(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Sl(this,void 0,void 0,function*(){try{return{data:yield ZC(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Or(r))return{data:null,error:r};throw r}})}}class CM extends jM{constructor(t,r={},s,a){super(t,r,s,a)}from(t){return new bM(this.url,this.headers,t,this.fetch)}}const EM="2.75.0";let Nd="";typeof Deno<"u"?Nd="deno":typeof document<"u"?Nd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Nd="react-native":Nd="node";const SM={"X-Client-Info":`supabase-js-${Nd}/${EM}`},AM={headers:SM},kM={schema:"public"},TM={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},IM={};var RM=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{p(s.next(x))}catch(w){c(w)}}function f(x){try{p(s.throw(x))}catch(w){c(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})};const PM=e=>{let t;return e?t=e:typeof fetch>"u"?t=LC:t=fetch,(...r)=>t(...r)},OM=()=>typeof Headers>"u"?FC:Headers,DM=(e,t,r)=>{const s=PM(r),a=OM();return(o,c)=>RM(void 0,void 0,void 0,function*(){var u;const f=(u=yield t())!==null&&u!==void 0?u:e;let p=new a(c==null?void 0:c.headers);return p.has("apikey")||p.set("apikey",e),p.has("Authorization")||p.set("Authorization",`Bearer ${f}`),s(o,Object.assign(Object.assign({},c),{headers:p}))})};var MM=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{p(s.next(x))}catch(w){c(w)}}function f(x){try{p(s.throw(x))}catch(w){c(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})};function LM(e){return e.endsWith("/")?e:e+"/"}function FM(e,t){var r,s;const{db:a,auth:o,realtime:c,global:u}=e,{db:f,auth:p,realtime:x,global:w}=t,_={db:Object.assign(Object.assign({},f),a),auth:Object.assign(Object.assign({},p),o),realtime:Object.assign(Object.assign({},x),c),storage:{},global:Object.assign(Object.assign(Object.assign({},w),u),{headers:Object.assign(Object.assign({},(r=w==null?void 0:w.headers)!==null&&r!==void 0?r:{}),(s=u==null?void 0:u.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>MM(this,void 0,void 0,function*(){return""})};return e.accessToken?_.accessToken=e.accessToken:delete _.accessToken,_}function BM(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(LM(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const JC="2.75.0",Ll=30*1e3,t0=3,xg=t0*Ll,zM="http://localhost:9999",UM="supabase.auth.token",$M={"X-Client-Info":`gotrue-js/${JC}`},r0="X-Supabase-Api-Version",eE={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},VM=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,qM=10*60*1e3;class fu extends Error{constructor(t,r,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function nt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class WM extends fu{constructor(t,r,s){super(t,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function HM(e){return nt(e)&&e.name==="AuthApiError"}class Eo extends fu{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class ao extends fu{constructor(t,r,s,a){super(t,s,a),this.name=r,this.status=s}}class gi extends ao{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function GM(e){return nt(e)&&e.name==="AuthSessionMissingError"}class Al extends ao{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ih extends ao{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Rh extends ao{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function XM(e){return nt(e)&&e.name==="AuthImplicitGrantRedirectError"}class db extends ao{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class n0 extends ao{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function vg(e){return nt(e)&&e.name==="AuthRetryableFetchError"}class ub extends ao{constructor(t,r,s){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class s0 extends ao{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Uf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),hb=` 	
\r=`.split(""),KM=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<hb.length;t+=1)e[hb[t].charCodeAt(0)]=-2;for(let t=0;t<Uf.length;t+=1)e[Uf[t].charCodeAt(0)]=t;return e})();function fb(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(Uf[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(Uf[s]),t.queuedBits-=6}}function tE(e,t,r){const s=KM[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function mb(e){const t=[],r=c=>{t.push(String.fromCodePoint(c))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=c=>{ZM(c,s,r)};for(let c=0;c<e.length;c+=1)tE(e.charCodeAt(c),a,o);return t.join("")}function YM(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function QM(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}YM(s,t)}}function ZM(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function lc(e){const t=[],r={queue:0,queuedBits:0},s=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)tE(e.charCodeAt(a),r,s);return new Uint8Array(t)}function JM(e){const t=[];return QM(e,r=>t.push(r)),new Uint8Array(t)}function To(e){const t=[],r={queue:0,queuedBits:0},s=a=>{t.push(a)};return e.forEach(a=>fb(a,r,s)),fb(null,r,s),t.join("")}function e7(e){return Math.round(Date.now()/1e3)+e}function t7(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Jn=()=>typeof window<"u"&&typeof document<"u",xo={tested:!1,writable:!1},rE=()=>{if(!Jn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(xo.tested)return xo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),xo.tested=!0,xo.writable=!0}catch{xo.tested=!0,xo.writable=!1}return xo.writable};function r7(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,o)=>{t[o]=a})}catch{}return r.searchParams.forEach((s,a)=>{t[a]=s}),t}const nE=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>fl(async()=>{const{default:s}=await Promise.resolve().then(()=>Hc);return{default:s}},void 0,import.meta.url).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)},n7=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Fl=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},vo=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},hi=async(e,t)=>{await e.removeItem(t)};class Bm{constructor(){this.promise=new Bm.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Bm.promiseConstructor=Promise;function wg(e){const t=e.split(".");if(t.length!==3)throw new s0("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!VM.test(t[s]))throw new s0("JWT not in base64url format");return{header:JSON.parse(mb(t[0])),payload:JSON.parse(mb(t[1])),signature:lc(t[2]),raw:{header:t[0],payload:t[1]}}}async function s7(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function a7(e,t){return new Promise((s,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const c=await e(o);if(!t(o,null,c)){s(c);return}}catch(c){if(!t(o,c)){a(c);return}}})()})}function i7(e){return("0"+e.toString(16)).substr(-2)}function o7(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let a="";for(let o=0;o<56;o++)a+=r.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(t),Array.from(t,i7).join("")}async function l7(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(s);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function c7(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await l7(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function kl(e,t,r=!1){const s=o7();let a=s;r&&(a+="/PASSWORD_RECOVERY"),await Fl(e,`${t}-code-verifier`,a);const o=await c7(s);return[o,s===o?"plain":"s256"]}const d7=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function u7(e){const t=e.headers.get(r0);if(!t||!t.match(d7))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function h7(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function f7(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const m7=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Tl(e){if(!m7.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function yg(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function pb(e){return JSON.parse(JSON.stringify(e))}var p7=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r};const _o=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),g7=[502,503,504];async function gb(e){var t;if(!n7(e))throw new n0(_o(e),0);if(g7.includes(e.status))throw new n0(_o(e),e.status);let r;try{r=await e.json()}catch(o){throw new Eo(_o(o),o)}let s;const a=u7(e);if(a&&a.getTime()>=eE["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new ub(_o(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new gi}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,c)=>o&&typeof c=="string",!0))throw new ub(_o(r),e.status,r.weak_password.reasons);throw new WM(_o(r),e.status||500,s)}const x7=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),r))};async function ht(e,t,r,s){var a;const o=Object.assign({},s==null?void 0:s.headers);o[r0]||(o[r0]=eE["2024-01-01"].name),s!=null&&s.jwt&&(o.Authorization=`Bearer ${s.jwt}`);const c=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(c.redirect_to=s.redirectTo);const u=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",f=await v7(e,t,r+u,{headers:o,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(f):{data:Object.assign({},f),error:null}}async function v7(e,t,r,s,a,o){const c=x7(t,s,a,o);let u;try{u=await e(r,Object.assign({},c))}catch(f){throw console.error(f),new n0(_o(f),0)}if(u.ok||await gb(u),s!=null&&s.noResolveJson)return u;try{return await u.json()}catch(f){await gb(f)}}function Vs(e){var t;let r=null;b7(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=e7(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:s},error:null}}function xb(e){const t=Vs(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function _i(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function w7(e){return{data:e,error:null}}function y7(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:a,verification_type:o}=e,c=p7(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:r,hashed_token:s,redirect_to:a,verification_type:o},f=Object.assign({},c);return{data:{properties:u,user:f},error:null}}function vb(e){return e}function b7(e){return e.access_token&&e.refresh_token&&e.expires_in}const bg=["global","local","others"];var _7=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r};class N7{constructor({url:t="",headers:r={},fetch:s}){this.url=t,this.headers=r,this.fetch=nE(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=bg[0]){if(bg.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${bg.join(", ")}`);try{return await ht(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(nt(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,r={}){try{return await ht(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:_i})}catch(s){if(nt(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:r}=t,s=_7(t,["options"]),a=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await ht(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:y7,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(nt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await ht(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:_i})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,s,a,o,c,u,f;try{const p={nextPage:null,lastPage:0,total:0},x=await ht(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(o=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:vb});if(x.error)throw x.error;const w=await x.json(),_=(c=x.headers.get("x-total-count"))!==null&&c!==void 0?c:0,j=(f=(u=x.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return j.length>0&&(j.forEach(N=>{const C=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(N.split(";")[1].split("=")[1]);p[`${T}Page`]=C}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},w),p),error:null}}catch(p){if(nt(p))return{data:{users:[]},error:p};throw p}}async getUserById(t){Tl(t);try{return await ht(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:_i})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Tl(t);try{return await ht(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:_i})}catch(s){if(nt(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,r=!1){Tl(t);try{return await ht(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:_i})}catch(s){if(nt(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){Tl(t.userId);try{const{data:r,error:s}=await ht(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:s}}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Tl(t.userId),Tl(t.id);try{return{data:await ht(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,s,a,o,c,u,f;try{const p={nextPage:null,lastPage:0,total:0},x=await ht(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(o=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:vb});if(x.error)throw x.error;const w=await x.json(),_=(c=x.headers.get("x-total-count"))!==null&&c!==void 0?c:0,j=(f=(u=x.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return j.length>0&&(j.forEach(N=>{const C=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(N.split(";")[1].split("=")[1]);p[`${T}Page`]=C}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},w),p),error:null}}catch(p){if(nt(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(t){try{return await ht(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await ht(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await ht(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await ht(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}}function wb(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Il={debug:!!(globalThis&&rE()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class sE extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class j7 extends sE{}async function C7(e,t,r){Il.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),Il.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){Il.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Il.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Il.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new j7(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Il.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function E7(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function aE(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function S7(e){return parseInt(e,16)}function A7(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,s=>s.toString(16).padStart(2,"0")).join("")}function k7(e){var t;const{chainId:r,domain:s,expirationTime:a,issuedAt:o=new Date,nonce:c,notBefore:u,requestId:f,resources:p,scheme:x,uri:w,version:_}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const j=aE(e.address),N=x?`${x}://${s}`:s,C=e.statement?`${e.statement}
`:"",T=`${N} wants you to sign in with your Ethereum account:
${j}

${C}`;let E=`URI: ${w}
Version: ${_}
Chain ID: ${r}${c?`
Nonce: ${c}`:""}
Issued At: ${o.toISOString()}`;if(a&&(E+=`
Expiration Time: ${a.toISOString()}`),u&&(E+=`
Not Before: ${u.toISOString()}`),f&&(E+=`
Request ID: ${f}`),p){let S=`
Resources:`;for(const b of p){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);S+=`
- ${b}`}E+=S}return`${T}
${E}`}class Pr extends Error{constructor({message:t,code:r,cause:s,name:a}){var o;super(t,{cause:s}),this.__isWebAuthnError=!0,this.name=(o=a??(s instanceof Error?s.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=r}}class $f extends Pr{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function T7({error:e,options:t}){var r,s,a;const{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Pr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=o.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Pr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Pr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=o.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Pr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Pr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Pr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new Pr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Pr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const c=window.location.hostname;if(oE(c)){if(o.rp.id!==c)return new Pr({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Pr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Pr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Pr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Pr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function I7({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Pr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Pr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(oE(s)){if(r.rpId!==s)return new Pr({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Pr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Pr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Pr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var iE=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r};class R7{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const P7=new R7;function O7(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:s}=e,a=iE(e,["challenge","user","excludeCredentials"]),o=lc(t).buffer,c=Object.assign(Object.assign({},r),{id:lc(r.id).buffer}),u=Object.assign(Object.assign({},a),{challenge:o,user:c});if(s&&s.length>0){u.excludeCredentials=new Array(s.length);for(let f=0;f<s.length;f++){const p=s[f];u.excludeCredentials[f]=Object.assign(Object.assign({},p),{id:lc(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return u}function D7(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,s=iE(e,["challenge","allowCredentials"]),a=lc(t).buffer,o=Object.assign(Object.assign({},s),{challenge:a});if(r&&r.length>0){o.allowCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const u=r[c];o.allowCredentials[c]=Object.assign(Object.assign({},u),{id:lc(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function M7(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:To(new Uint8Array(e.response.attestationObject)),clientDataJSON:To(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function L7(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,s=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:To(new Uint8Array(a.authenticatorData)),clientDataJSON:To(new Uint8Array(a.clientDataJSON)),signature:To(new Uint8Array(a.signature)),userHandle:a.userHandle?To(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function oE(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function yb(){var e,t;return!!(Jn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function F7(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new $f("Browser returned unexpected credential type",t)}:{data:null,error:new $f("Empty credential response",t)}}catch(t){return{data:null,error:T7({error:t,options:e})}}}async function B7(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new $f("Browser returned unexpected credential type",t)}:{data:null,error:new $f("Empty credential response",t)}}catch(t){return{data:null,error:I7({error:t,options:e})}}}const z7={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},U7={userVerification:"preferred",hints:["security-key"]};function Vf(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of e)if(a)for(const o in a){const c=a[o];if(c!==void 0)if(Array.isArray(c))s[o]=c;else if(r(c))s[o]=c;else if(t(c)){const u=s[o];t(u)?s[o]=Vf(u,c):s[o]=Vf(c)}else s[o]=c}return s}function $7(e,t){return Vf(z7,e,t||{})}function V7(e,t){return Vf(U7,e,t||{})}class q7{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:s,signal:a},o){try{const{data:c,error:u}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!c)return{data:null,error:u};const f=a??P7.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:p}=c.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${s}`),p.displayName||(p.displayName=p.name)}switch(c.webauthn.type){case"create":{const p=$7(c.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:x,error:w}=await F7({publicKey:p,signal:f});return x?{data:{factorId:t,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:x}},error:null}:{data:null,error:w}}case"request":{const p=V7(c.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:x,error:w}=await B7(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:p,signal:f}));return x?{data:{factorId:t,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:x}},error:null}:{data:null,error:w}}}}catch(c){return nt(c)?{data:null,error:c}:{data:null,error:new Eo("Unexpected error in challenge",c)}}}async _verify({challengeId:t,factorId:r,webauthn:s}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:s})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}},o){if(!r)return{data:null,error:new fu("rpId is required for WebAuthn authentication")};try{if(!yb())return{data:null,error:new Eo("Browser does not support WebAuthn",null)};const{data:c,error:u}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:s},signal:a},{request:o});if(!c)return{data:null,error:u};const{webauthn:f}=c;return this._verify({factorId:t,challengeId:c.challengeId,webauthn:{type:f.type,rpId:r,rpOrigins:s,credential_response:f.credential_response}})}catch(c){return nt(c)?{data:null,error:c}:{data:null,error:new Eo("Unexpected error in authenticate",c)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a},o){if(!r)return{data:null,error:new fu("rpId is required for WebAuthn registration")};try{if(!yb())return{data:null,error:new Eo("Browser does not support WebAuthn",null)};const{data:c,error:u}=await this._enroll({friendlyName:t});if(!c)return await this.client.mfa.listFactors().then(x=>{var w;return(w=x.data)===null||w===void 0?void 0:w.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===t&&_.status!=="unverified")}).then(x=>x?this.client.mfa.unenroll({factorId:x==null?void 0:x.id}):void 0),{data:null,error:u};const{data:f,error:p}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:r,rpOrigins:s},signal:a},{create:o});return f?this._verify({factorId:c.id,challengeId:f.challengeId,webauthn:{rpId:r,rpOrigins:s,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:p}}catch(c){return nt(c)?{data:null,error:c}:{data:null,error:new Eo("Unexpected error in register",c)}}}}E7();const W7={url:zM,storageKey:UM,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:$M,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function bb(e,t,r){return await r()}const Rl={};class mu{get jwks(){var t,r;return(r=(t=Rl[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Rl[this.storageKey]=Object.assign(Object.assign({},Rl[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Rl[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Rl[this.storageKey]=Object.assign(Object.assign({},Rl[this.storageKey]),{cachedAt:t})}constructor(t){var r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=mu.nextInstanceID,mu.nextInstanceID+=1,this.instanceID>0&&Jn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},W7),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new N7({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=nE(a.fetch),this.lock=a.lock||bb,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Jn()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=C7:this.lock=bb,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new q7(this)},this.persistSession?(a.storage?this.storage=a.storage:rE()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=wb(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=wb(this.memoryStorage)),Jn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${JC}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=r7(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),Jn()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:o}=await this._getSessionFromURL(r,s);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),XM(o)){const f=(t=o.details)===null||t===void 0?void 0:t.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:c,redirectType:u}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",u),await this._saveSession(c),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return nt(r)?{error:r}:{error:new Eo("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,s,a;try{const o=await ht(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Vs}),{data:c,error:u}=o;if(u||!c)return{data:{user:null,session:null},error:u};const f=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(o){if(nt(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var r,s,a;try{let o;if("email"in t){const{email:x,password:w,options:_}=t;let j=null,N=null;this.flowType==="pkce"&&([j,N]=await kl(this.storage,this.storageKey)),o=await ht(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:x,password:w,data:(r=_==null?void 0:_.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:j,code_challenge_method:N},xform:Vs})}else if("phone"in t){const{phone:x,password:w,options:_}=t;o=await ht(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:w,data:(s=_==null?void 0:_.data)!==null&&s!==void 0?s:{},channel:(a=_==null?void 0:_.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:Vs})}else throw new Ih("You must provide either an email or phone number and a password");const{data:c,error:u}=o;if(u||!c)return{data:{user:null,session:null},error:u};const f=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(o){if(nt(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let r;if("email"in t){const{email:o,password:c,options:u}=t;r=await ht(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:c,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:xb})}else if("phone"in t){const{phone:o,password:c,options:u}=t;r=await ht(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:c,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:xb})}else throw new Ih("You must provide either an email or phone number and a password");const{data:s,error:a}=r;return a?{data:{user:null,session:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Al}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(r){if(nt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,s,a,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,s,a,o,c,u,f,p,x,w,_;let j,N;if("message"in t)j=t.message,N=t.signature;else{const{chain:C,wallet:T,statement:E,options:S}=t;let b;if(Jn())if(typeof T=="object")b=T;else{const R=window;if("ethereum"in R&&typeof R.ethereum=="object"&&"request"in R.ethereum&&typeof R.ethereum.request=="function")b=R.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=T}const k=new URL((r=S==null?void 0:S.url)!==null&&r!==void 0?r:window.location.href),O=await b.request({method:"eth_requestAccounts"}).then(R=>R).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!O||O.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const L=aE(O[0]);let P=(s=S==null?void 0:S.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!P){const R=await b.request({method:"eth_chainId"});P=S7(R)}const M={domain:k.host,address:L,statement:E,uri:k.href,version:"1",chainId:P,nonce:(a=S==null?void 0:S.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(o=S==null?void 0:S.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(u=S==null?void 0:S.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(f=S==null?void 0:S.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(p=S==null?void 0:S.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(x=S==null?void 0:S.signInWithEthereum)===null||x===void 0?void 0:x.resources};j=k7(M),N=await b.request({method:"personal_sign",params:[A7(j),L]})}try{const{data:C,error:T}=await ht(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:j,signature:N},!((w=t.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(_=t.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:Vs});if(T)throw T;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new Al}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:T})}catch(C){if(nt(C))return{data:{user:null,session:null},error:C};throw C}}async signInWithSolana(t){var r,s,a,o,c,u,f,p,x,w,_,j;let N,C;if("message"in t)N=t.message,C=t.signature;else{const{chain:T,wallet:E,statement:S,options:b}=t;let k;if(Jn())if(typeof E=="object")k=E;else{const L=window;if("solana"in L&&typeof L.solana=="object"&&("signIn"in L.solana&&typeof L.solana.signIn=="function"||"signMessage"in L.solana&&typeof L.solana.signMessage=="function"))k=L.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=E}const O=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in k&&k.signIn){const L=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:O.host,uri:O.href}),S?{statement:S}:null));let P;if(Array.isArray(L)&&L[0]&&typeof L[0]=="object")P=L[0];else if(L&&typeof L=="object"&&"signedMessage"in L&&"signature"in L)P=L;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)N=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),C=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");N=[`${O.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...S?["",S,""]:[""],"Version: 1",`URI: ${O.href}`,`Issued At: ${(a=(s=b==null?void 0:b.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((f=b==null?void 0:b.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((p=b==null?void 0:b.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((w=(x=b==null?void 0:b.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||w===void 0)&&w.length?["Resources",...b.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const L=await k.signMessage(new TextEncoder().encode(N),"utf8");if(!L||!(L instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=L}}try{const{data:T,error:E}=await ht(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:N,signature:To(C)},!((_=t.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(j=t.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:Vs});if(E)throw E;return!T||!T.session||!T.user?{data:{user:null,session:null},error:new Al}:(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),{data:Object.assign({},T),error:E})}catch(T){if(nt(T))return{data:{user:null,session:null},error:T};throw T}}async _exchangeCodeForSession(t){const r=await vo(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(r??"").split("/");try{const{data:o,error:c}=await ht(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:Vs});if(await hi(this.storage,`${this.storageKey}-code-verifier`),c)throw c;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Al}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:c})}catch(o){if(nt(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:r,provider:s,token:a,access_token:o,nonce:c}=t,u=await ht(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:o,nonce:c,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Vs}),{data:f,error:p}=u;return p?{data:{user:null,session:null},error:p}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new Al}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:p})}catch(r){if(nt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,s,a,o,c;try{if("email"in t){const{email:u,options:f}=t;let p=null,x=null;this.flowType==="pkce"&&([p,x]=await kl(this.storage,this.storageKey));const{error:w}=await ht(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},create_user:(s=f==null?void 0:f.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:x},redirectTo:f==null?void 0:f.emailRedirectTo});return{data:{user:null,session:null},error:w}}if("phone"in t){const{phone:u,options:f}=t,{data:p,error:x}=await ht(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(a=f==null?void 0:f.data)!==null&&a!==void 0?a:{},create_user:(o=f==null?void 0:f.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(c=f==null?void 0:f.channel)!==null&&c!==void 0?c:"sms"}});return{data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:x}}throw new Ih("You must provide either an email or phone number.")}catch(u){if(nt(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(t){var r,s;try{let a,o;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,o=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:c,error:u}=await ht(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:Vs});if(u)throw u;if(!c)throw new Error("An error occurred on token verification.");const f=c.session,p=c.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(a){if(nt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,s,a;try{let o=null,c=null;return this.flowType==="pkce"&&([o,c]=await kl(this.storage,this.storageKey)),await ht(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:c}),headers:this.headers,xform:w7})}catch(o){if(nt(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;if(s)throw s;if(!r)throw new gi;const{error:a}=await ht(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(nt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:s,type:a,options:o}=t,{error:c}=await ht(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:c}}else if("phone"in t){const{phone:s,type:a,options:o}=t,{data:c,error:u}=await ht(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Ih("You must provide either an email or phone number and a type")}catch(r){if(nt(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await vo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<xg:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const c=await vo(this.userStorage,this.storageKey+"-user");c!=null&&c.user?t.user=c.user:t.user=yg()}if(this.storage.isServer&&t.user){let c=this.suppressGetSessionWarning;t=new Proxy(t,{get:(f,p,x)=>(!c&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),c=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,p,x))})}return{data:{session:t},error:null}}const{data:a,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ht(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:_i}):await this._useSession(async r=>{var s,a,o;const{data:c,error:u}=r;if(u)throw u;return!(!((s=c.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new gi}:await ht(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:_i})})}catch(r){if(nt(r))return GM(r)&&(await this._removeSession(),await hi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async s=>{const{data:a,error:o}=s;if(o)throw o;if(!a.session)throw new gi;const c=a.session;let u=null,f=null;this.flowType==="pkce"&&t.email!=null&&([u,f]=await kl(this.storage,this.storageKey));const{data:p,error:x}=await ht(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:f}),jwt:c.access_token,xform:_i});if(x)throw x;return c.user=p.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}})}catch(s){if(nt(s))return{data:{user:null},error:s};throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new gi;const r=Date.now()/1e3;let s=r,a=!0,o=null;const{payload:c}=wg(t.access_token);if(c.exp&&(s=c.exp,a=s<=r),a){const{data:u,error:f}=await this._callRefreshToken(t.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:f}=await this._getUser(t.access_token);if(f)throw f;o={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if(nt(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var s;if(!t){const{data:c,error:u}=r;if(u)throw u;t=(s=c.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new gi;const{data:a,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(nt(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Jn())throw new Rh("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Rh(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new db("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Rh("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new db("No code detected.");const{data:S,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:o,refresh_token:c,expires_in:u,expires_at:f,token_type:p}=t;if(!o||!u||!c||!p)throw new Rh("No session defined in URL");const x=Math.round(Date.now()/1e3),w=parseInt(u);let _=x+w;f&&(_=parseInt(f));const j=_-x;j*1e3<=Ll&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${j}s, should have been closer to ${w}s`);const N=_-w;x-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,_,x):x-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,_,x);const{data:C,error:T}=await this._getUser(o);if(T)throw T;const E={provider_token:s,provider_refresh_token:a,access_token:o,expires_in:w,expires_at:_,refresh_token:c,token_type:p,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:E,redirectType:t.type},error:null}}catch(s){if(nt(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await vo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:a,error:o}=r;if(o)return{error:o};const c=(s=a.session)===null||s===void 0?void 0:s.access_token;if(c){const{error:u}=await this.admin.signOut(c,t);if(u&&!(HM(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return t!=="others"&&(await this._removeSession(),await hi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=t7(),s={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async r=>{var s,a;try{const{data:{session:o},error:c}=r;if(c)throw c;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,r={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await kl(this.storage,this.storageKey,!0));try{return await ht(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(nt(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:s,error:a}=await this._useSession(async o=>{var c,u,f,p,x;const{data:w,error:_}=o;if(_)throw _;const j=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(c=t.options)===null||c===void 0?void 0:c.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(f=t.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await ht(this.fetch,"GET",j,{headers:this.headers,jwt:(x=(p=w.session)===null||p===void 0?void 0:p.access_token)!==null&&x!==void 0?x:void 0})});if(a)throw a;return Jn()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:t.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(nt(s))return{data:{provider:t.provider,url:null},error:s};throw s}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var s;try{const{error:a,data:{session:o}}=r;if(a)throw a;const{options:c,provider:u,token:f,access_token:p,nonce:x}=t,w=await ht(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=o==null?void 0:o.access_token)!==null&&s!==void 0?s:void 0,body:{provider:u,id_token:f,access_token:p,nonce:x,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Vs}),{data:_,error:j}=w;return j?{data:{user:null,session:null},error:j}:!_||!_.session||!_.user?{data:{user:null,session:null},error:new Al}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),{data:_,error:j})}catch(a){if(nt(a))return{data:{user:null,session:null},error:a};throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var s,a;const{data:o,error:c}=r;if(c)throw c;return await ht(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await a7(async a=>(a>0&&await s7(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await ht(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Vs})),(a,o)=>{const c=200*Math.pow(2,a);return o&&vg(o)&&Date.now()+c-s<Ll})}catch(s){if(this._debug(r,"error",s),nt(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",s),Jn()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await vo(this.storage,this.storageKey);if(a&&this.userStorage){let c=await vo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await Fl(this.userStorage,this.storageKey+"-user",c)),a.user=(t=c==null?void 0:c.user)!==null&&t!==void 0?t:yg()}else if(a&&!a.user&&!a.user){const c=await vo(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(a.user=c.user,await hi(this.storage,this.storageKey+"-user"),await Fl(this.storage,this.storageKey,a)):a.user=yg()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const o=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<xg;if(this._debug(s,`session has${o?"":" not"} expired with margin of ${xg}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),vg(c)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:u}=await this._getUser(a.access_token);!u&&(c!=null&&c.user)?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(s,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var r,s;if(!t)throw new gi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Bm;const{data:o,error:c}=await this._refreshAccessToken(t);if(c)throw c;if(!o.session)throw new gi;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={data:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(a,"error",o),nt(o)){const c={data:null,error:o};return vg(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(c),c}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,s=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:r});const o=[],c=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,r)}catch(f){o.push(f)}});if(await Promise.all(c),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await Fl(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const o=pb(a);await Fl(this.storage,this.storageKey,o)}else{const a=pb(r);await Fl(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await hi(this.storage,this.storageKey),await hi(this.storage,this.storageKey+"-code-verifier"),await hi(this.storage,this.storageKey+"-user"),this.userStorage&&await hi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Jn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ll);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-t)/Ll);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Ll}ms, refresh threshold is ${t0} ticks`),a<=t0&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof sE)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Jn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,s){const a=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[o,c]=await kl(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(u.toString())}if(s!=null&&s.queryParams){const o=new URLSearchParams(s.queryParams);a.push(o.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var s;const{data:a,error:o}=r;return o?{data:null,error:o}:await ht(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var s,a;const{data:o,error:c}=r;if(c)return{data:null,error:c};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:f,error:p}=await ht(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});return p?{data:null,error:p}:(t.factorType==="totp"&&f.type==="totp"&&(!((a=f==null?void 0:f.totp)===null||a===void 0)&&a.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:o}=r;if(o)return{data:null,error:o};const c=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?M7(t.webauthn.credential_response):L7(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:f}=await ht(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:c,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:f})})}catch(r){if(nt(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:o}=r;if(o)return{data:null,error:o};const c=await ht(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});if(c.error)return c;const{data:u}=c;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:O7(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:D7(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(nt(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:s}=await this._challenge({factorId:t.factorId});return s?{data:null,error:s}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const o of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(o),o.status==="verified"&&a[o.factor_type].push(o);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,s;const{data:{session:a},error:o}=t;if(o)return{data:null,error:o};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=wg(a.access_token);let u=null;c.aal&&(u=c.aal);let f=u;((s=(r=a.user.factors)===null||r===void 0?void 0:r.filter(w=>w.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(f="aal2");const x=c.amr||[];return{data:{currentLevel:u,nextLevel:f,currentAuthenticationMethods:x},error:null}}))}async fetchJwk(t,r={keys:[]}){let s=r.keys.find(u=>u.kid===t);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(u=>u.kid===t),s&&this.jwks_cached_at+qM>a)return s;const{data:o,error:c}=await ht(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,s=o.keys.find(u=>u.kid===t),!s)?null:s}async getClaims(t,r={}){try{let s=t;if(!s){const{data:j,error:N}=await this.getSession();if(N||!j.session)return{data:null,error:N};s=j.session.access_token}const{header:a,payload:o,signature:c,raw:{header:u,payload:f}}=wg(s);r!=null&&r.allowExpired||h7(o.exp);const p=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!p){const{error:j}=await this.getUser(s);if(j)throw j;return{data:{claims:o,header:a,signature:c},error:null}}const x=f7(a.alg),w=await crypto.subtle.importKey("jwk",p,x,!0,["verify"]);if(!await crypto.subtle.verify(x,w,c,JM(`${u}.${f}`)))throw new s0("Invalid JWT signature");return{data:{claims:o,header:a,signature:c},error:null}}catch(s){if(nt(s))return{data:null,error:s};throw s}}}mu.nextInstanceID=0;const H7=mu;class G7 extends H7{constructor(t){super(t)}}var X7=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{p(s.next(x))}catch(w){c(w)}}function f(x){try{p(s.throw(x))}catch(w){c(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})};class K7{constructor(t,r,s){var a,o,c;this.supabaseUrl=t,this.supabaseKey=r;const u=BM(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const f=`sb-${u.hostname.split(".")[0]}-auth-token`,p={db:kM,realtime:IM,auth:Object.assign(Object.assign({},TM),{storageKey:f}),global:AM},x=FM(s??{},p);this.storageKey=(a=x.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=x.global.headers)!==null&&o!==void 0?o:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(w,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=x.auth)!==null&&c!==void 0?c:{},this.headers,x.global.fetch),this.fetch=DM(r,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new WD(new URL("rest/v1",u).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new CM(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new ND(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,s)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return X7(this,void 0,void 0,function*(){var t,r;if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(r=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:a,userStorage:o,storageKey:c,flowType:u,lock:f,debug:p},x,w){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new G7({url:this.authUrl.href,headers:Object.assign(Object.assign({},_),x),storageKey:c,autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:a,userStorage:o,flowType:u,lock:f,debug:p,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(j=>j.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new lM(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(t,r,s){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Y7=(e,t,r)=>new K7(e,t,r);function Q7(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Q7()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Z7="https://nsyaecxzjqruqkbnaael.supabase.co",J7="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5zeWFlY3h6anFydXFrYm5hYWVsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgxMjQwMjgsImV4cCI6MjA3MzcwMDAyOH0.bTmmKPcStHhkJgi0SJZjz-8YEll--FfRBvZH8ObOdKU",U=Y7(Z7,J7,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),lE=v.createContext(void 0);function eL({children:e}){const[t,r]=v.useState(null),[s,a]=v.useState(null),[o,c]=v.useState(null),[u,f]=v.useState(!0),p=async j=>{try{const{data:N}=await U.from("profiles").select("role").eq("user_id",j).single();c((N==null?void 0:N.role)||"user")}catch(N){console.error("Error fetching user role:",N),c("user")}};v.useEffect(()=>{const{data:{subscription:j}}=U.auth.onAuthStateChange(async(N,C)=>{a(C),r((C==null?void 0:C.user)??null),C!=null&&C.user?p(C.user.id):c(null),f(!1)});return U.auth.getSession().then(({data:{session:N}})=>{a(N),r((N==null?void 0:N.user)??null),N!=null&&N.user&&p(N.user.id),f(!1)}),()=>j.unsubscribe()},[]);const x=async(j,N,C,T)=>{try{const E=`${window.location.origin}/`,{error:S}=await U.auth.signUp({email:j,password:N,options:{emailRedirectTo:E,data:{display_name:C,role:T}}});return S?(X.error(S.message),{error:S}):(X.success("Conta criada com sucesso! Verifique seu email."),{error:null})}catch(E){return X.error("Erro ao criar conta"),{error:E}}},w=async(j,N)=>{try{const{error:C}=await U.auth.signInWithPassword({email:j,password:N});return C?(X.error(C.message),{error:C}):(X.success("Login realizado com sucesso!"),{error:null})}catch(C){return X.error("Erro ao fazer login"),{error:C}}},_=async()=>{try{await U.auth.signOut({scope:"global"}),a(null),r(null),c(null),X.success("Logout realizado com sucesso!"),setTimeout(()=>{window.location.href="/"},100)}catch(j){a(null),r(null),c(null),console.error("Logout error:",j),setTimeout(()=>{window.location.href="/"},100)}};return n.jsx(lE.Provider,{value:{user:t,session:s,userRole:o,loading:u,signUp:x,signIn:w,signOut:_},children:e})}function bt(){const e=v.useContext(lE);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const cE=v.createContext(void 0);function tL({children:e,forcedTheme:t}){const[r,s]=v.useState(()=>t||localStorage.getItem("theme")||"dark");v.useEffect(()=>{if(t){s(t);const u=document.documentElement;u.classList.remove("dark","light"),u.classList.add(t);return}const c=document.documentElement;c.classList.remove("dark","light"),c.classList.add(r),localStorage.setItem("theme",r)},[r,t]);const a=c=>{t||s(c)},o=()=>{if(t)console.log("Theme toggle blocked by forcedTheme:",t);else{const c=r==="dark"?"light":"dark";console.log("Toggling theme from",r,"to",c),a(c)}};return n.jsx(cE.Provider,{value:{theme:r,setTheme:a,toggleTheme:o},children:e})}function Q1(){const e=v.useContext(cE);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}const rL=Tu("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function dt({className:e,variant:t,...r}){return n.jsx("div",{className:Le(rL({variant:t}),e),...r})}function nL(){const[e,t]=v.useState(0),{user:r}=bt();return v.useEffect(()=>{if(!r){t(0);return}(async()=>{const{count:o,error:c}=await U.from("user_messages").select("*",{count:"exact",head:!0}).eq("to_user_id",r.id).eq("read",!1);!c&&o!==null&&t(o)})();const a=U.channel("unread-messages-count").on("postgres_changes",{event:"INSERT",schema:"public",table:"user_messages"},o=>{const c=o.new;c.to_user_id===r.id&&!c.read&&t(u=>u+1)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"user_messages"},o=>{const c=o.new,u=o.old;c.to_user_id===r.id&&!u.read&&c.read&&t(f=>Math.max(0,f-1))}).subscribe();return()=>{U.removeChannel(a)}},[r]),e}function sL({activeTab:e,onTabChange:t,userType:r}){const{user:s}=bt(),a=_t(),o=Kn(),c=nL(),u=w=>{if(["friends","profile"].includes(w)&&!s){const j=o.pathname;a(`/auth?redirect=${encodeURIComponent(j)}`);return}t(w)},x=r==="organizer"?[{id:"home",icon:by,label:"Incio"},{id:"create",icon:P8,label:"Criar"},{id:"profile",icon:hs,label:"Perfil"}]:[{id:"home",icon:by,label:"Incio"},{id:"friends",icon:er,label:"Amigos"},{id:"profile",icon:hs,label:"Perfil"}];return n.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-card border-t border-border z-50",children:n.jsx("div",{className:"flex items-center justify-around py-2 px-4 max-w-md mx-auto",children:x.map(w=>{const _=e===w.id;return n.jsxs("button",{onClick:()=>u(w.id),className:Le("flex flex-col items-center gap-1 py-2 px-3 rounded-lg transition-smooth relative",_?"text-primary glow-purple":"text-muted-foreground hover:text-foreground"),children:[n.jsx(w.icon,{className:Le("h-5 w-5 transition-smooth",_&&"scale-110")}),n.jsx("span",{className:"text-xs font-medium",children:w.label}),w.id==="friends"&&c>0&&n.jsx(dt,{variant:"destructive",className:"absolute -top-0 -right-0 h-5 w-5 p-0 flex items-center justify-center text-xs rounded-full animate-pulse",children:c>9?"9+":c})]},w.id)})})})}const Z1=Tu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-smooth focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"gradient-primary text-primary-foreground hover:scale-105 shadow-purple",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-border bg-card hover:bg-surface hover:shadow-card",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-surface hover:text-foreground",link:"text-primary underline-offset-4 hover:underline",glow:"gradient-primary text-primary-foreground hover:glow-purple-strong hover:scale-105 shadow-purple",fab:"gradient-primary text-primary-foreground rounded-full shadow-elevated glow-purple hover:glow-purple-strong hover:scale-110 transition-bounce",live:"bg-destructive text-destructive-foreground animate-glow-pulse hover:scale-105",confirm:"bg-surface-elevated text-foreground border border-border hover:bg-surface hover:border-primary/50 hover:shadow-card"},size:{default:"h-10 px-4 py-2",sm:"h-8 rounded-md px-3",lg:"h-12 rounded-md px-8",xl:"h-14 rounded-lg px-10 text-base",icon:"h-10 w-10",fab:"h-14 w-14"}},defaultVariants:{variant:"default",size:"default"}}),K=v.forwardRef(({className:e,variant:t,size:r,asChild:s=!1,...a},o)=>{const c=s?zR:"button";return n.jsx(c,{className:Le(Z1({variant:t,size:r,className:e})),ref:o,...a})});K.displayName="Button";var dE={exports:{}},uE={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rc=v;function aL(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var iL=typeof Object.is=="function"?Object.is:aL,oL=Rc.useState,lL=Rc.useEffect,cL=Rc.useLayoutEffect,dL=Rc.useDebugValue;function uL(e,t){var r=t(),s=oL({inst:{value:r,getSnapshot:t}}),a=s[0].inst,o=s[1];return cL(function(){a.value=r,a.getSnapshot=t,_g(a)&&o({inst:a})},[e,r,t]),lL(function(){return _g(a)&&o({inst:a}),e(function(){_g(a)&&o({inst:a})})},[e]),dL(r),r}function _g(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!iL(e,r)}catch{return!0}}function hL(e,t){return t()}var fL=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?hL:uL;uE.useSyncExternalStore=Rc.useSyncExternalStore!==void 0?Rc.useSyncExternalStore:fL;dE.exports=uE;var mL=dE.exports;function pL(){return mL.useSyncExternalStore(gL,()=>!0,()=>!1)}function gL(){return()=>{}}var J1="Avatar",[xL]=Mr(J1),[vL,hE]=xL(J1),fE=v.forwardRef((e,t)=>{const{__scopeAvatar:r,...s}=e,[a,o]=v.useState("idle");return n.jsx(vL,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:o,children:n.jsx(qe.span,{...s,ref:t})})});fE.displayName=J1;var mE="AvatarImage",pE=v.forwardRef((e,t)=>{const{__scopeAvatar:r,src:s,onLoadingStatusChange:a=()=>{},...o}=e,c=hE(mE,r),u=wL(s,o),f=Er(p=>{a(p),c.onImageLoadingStatusChange(p)});return Rr(()=>{u!=="idle"&&f(u)},[u,f]),u==="loaded"?n.jsx(qe.img,{...o,ref:t,src:s}):null});pE.displayName=mE;var gE="AvatarFallback",xE=v.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:s,...a}=e,o=hE(gE,r),[c,u]=v.useState(s===void 0);return v.useEffect(()=>{if(s!==void 0){const f=window.setTimeout(()=>u(!0),s);return()=>window.clearTimeout(f)}},[s]),c&&o.imageLoadingStatus!=="loaded"?n.jsx(qe.span,{...a,ref:t}):null});xE.displayName=gE;function _b(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function wL(e,{referrerPolicy:t,crossOrigin:r}){const s=pL(),a=v.useRef(null),o=s?(a.current||(a.current=new window.Image),a.current):null,[c,u]=v.useState(()=>_b(o,e));return Rr(()=>{u(_b(o,e))},[o,e]),Rr(()=>{const f=w=>()=>{u(w)};if(!o)return;const p=f("loaded"),x=f("error");return o.addEventListener("load",p),o.addEventListener("error",x),t&&(o.referrerPolicy=t),typeof r=="string"&&(o.crossOrigin=r),()=>{o.removeEventListener("load",p),o.removeEventListener("error",x)}},[o,r,t]),c}var vE=fE,wE=pE,yE=xE;const $t=v.forwardRef(({className:e,...t},r)=>n.jsx(vE,{ref:r,className:Le("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));$t.displayName=vE.displayName;const Kt=v.forwardRef(({className:e,...t},r)=>n.jsx(wE,{ref:r,className:Le("aspect-square h-full w-full object-cover",e),...t}));Kt.displayName=wE.displayName;const Vt=v.forwardRef(({className:e,...t},r)=>n.jsx(yE,{ref:r,className:Le("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Vt.displayName=yE.displayName;function bE(){const[e,t]=v.useState([]),[r,s]=v.useState(0),[a,o]=v.useState(!0),{user:c}=bt();v.useEffect(()=>{if(!c){t([]),s(0),o(!1);return}u();const _=U.channel("notifications-changes").on("postgres_changes",{event:"*",schema:"public",table:"notifications",filter:`user_id=eq.${c.id}`},()=>{u()}).subscribe();return()=>{U.removeChannel(_)}},[c]);const u=async()=>{if(c)try{o(!0);const{data:_,error:j}=await U.from("notifications").select("*").eq("user_id",c.id).order("created_at",{ascending:!1}).limit(50);if(j)throw j;t(_||[]),s((_==null?void 0:_.filter(N=>!N.read).length)||0)}catch(_){console.error("Error fetching notifications:",_)}finally{o(!1)}};return{notifications:e,unreadCount:r,loading:a,markAsRead:async _=>{try{const j=e.find(C=>C.id===_);if(!j||j.read)return;t(C=>C.map(T=>T.id===_?{...T,read:!0}:T)),s(C=>Math.max(0,C-1));const{error:N}=await U.from("notifications").update({read:!0}).eq("id",_);if(N)throw N}catch(j){console.error("Error marking notification as read:",j),u()}},markAllAsRead:async()=>{if(c)try{t(j=>j.map(N=>({...N,read:!0}))),s(0);const{error:_}=await U.from("notifications").update({read:!0}).eq("user_id",c.id).eq("read",!1);if(_)throw _}catch(_){console.error("Error marking all as read:",_),u()}},deleteNotification:async _=>{try{const j=e.find(C=>C.id===_);t(C=>C.filter(T=>T.id!==_)),j&&!j.read&&s(C=>Math.max(0,C-1));const{error:N}=await U.from("notifications").delete().eq("id",_);if(N)throw N}catch(j){console.error("Error deleting notification:",j),u()}},refetch:u,clearLocalNotifications:()=>{t([]),s(0)}}}function _E(){const[e,t]=v.useState(!1);return{loading:e,acceptFriendRequest:async(a,o)=>{t(!0);try{const{error:c}=await U.from("friendships").update({status:"accepted"}).or(`and(id.eq.${a}),and(user_id.eq.${o})`);if(c)throw c;return X.success("Solicitao aceita!"),!0}catch(c){return console.error("Error accepting friend request:",c),X.error("Erro ao aceitar solicitao"),!1}finally{t(!1)}},declineFriendRequest:async(a,o)=>{t(!0);try{const{error:c}=await U.from("friendships").delete().or(`and(id.eq.${a}),and(user_id.eq.${o})`);if(c)throw c;return X.success("Solicitao recusada"),!0}catch(c){return console.error("Error declining friend request:",c),X.error("Erro ao recusar solicitao"),!1}finally{t(!1)}}}}function Jt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Ki(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const NE=6048e5,yL=864e5,Ph=43200,Nb=1440;let bL={};function Fu(){return bL}function pu(e,t){var u,f,p,x;const r=Fu(),s=(t==null?void 0:t.weekStartsOn)??((f=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:f.weekStartsOn)??r.weekStartsOn??((x=(p=r.locale)==null?void 0:p.options)==null?void 0:x.weekStartsOn)??0,a=Jt(e),o=a.getDay(),c=(o<s?7:0)+o-s;return a.setDate(a.getDate()-c),a.setHours(0,0,0,0),a}function qf(e){return pu(e,{weekStartsOn:1})}function jE(e){const t=Jt(e),r=t.getFullYear(),s=Ki(e,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=qf(s),o=Ki(e,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const c=qf(o);return t.getTime()>=a.getTime()?r+1:t.getTime()>=c.getTime()?r:r-1}function jb(e){const t=Jt(e);return t.setHours(0,0,0,0),t}function Wf(e){const t=Jt(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function _L(e,t){const r=jb(e),s=jb(t),a=+r-Wf(r),o=+s-Wf(s);return Math.round((a-o)/yL)}function NL(e){const t=jE(e),r=Ki(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),qf(r)}function sf(e,t){const r=Jt(e),s=Jt(t),a=r.getTime()-s.getTime();return a<0?-1:a>0?1:a}function jL(e){return Ki(e,Date.now())}function CL(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function EL(e){if(!CL(e)&&typeof e!="number")return!1;const t=Jt(e);return!isNaN(Number(t))}function SL(e,t){const r=Jt(e),s=Jt(t),a=r.getFullYear()-s.getFullYear(),o=r.getMonth()-s.getMonth();return a*12+o}function AL(e){return t=>{const s=(e?Math[e]:Math.trunc)(t);return s===0?0:s}}function kL(e,t){return+Jt(e)-+Jt(t)}function TL(e){const t=Jt(e);return t.setHours(23,59,59,999),t}function IL(e){const t=Jt(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function RL(e){const t=Jt(e);return+TL(t)==+IL(t)}function PL(e,t){const r=Jt(e),s=Jt(t),a=sf(r,s),o=Math.abs(SL(r,s));let c;if(o<1)c=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*o);let u=sf(r,s)===-a;RL(Jt(e))&&o===1&&sf(e,s)===1&&(u=!1),c=a*(o-Number(u))}return c===0?0:c}function OL(e,t,r){const s=kL(e,t)/1e3;return AL(r==null?void 0:r.roundingMethod)(s)}function DL(e){const t=Jt(e),r=Ki(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const ML={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},LL=(e,t,r)=>{let s;const a=ML[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function cc(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const FL={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},BL={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},zL={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},UL={date:cc({formats:FL,defaultWidth:"full"}),time:cc({formats:BL,defaultWidth:"full"}),dateTime:cc({formats:zL,defaultWidth:"full"})},$L={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},VL=(e,t,r,s)=>$L[e];function ya(e){return(t,r)=>{const s=r!=null&&r.context?String(r.context):"standalone";let a;if(s==="formatting"&&e.formattingValues){const c=e.defaultFormattingWidth||e.defaultWidth,u=r!=null&&r.width?String(r.width):c;a=e.formattingValues[u]||e.formattingValues[c]}else{const c=e.defaultWidth,u=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[u]||e.values[c]}const o=e.argumentCallback?e.argumentCallback(t):t;return a[o]}}const qL={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},WL={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},HL={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},GL={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},XL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},KL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},YL=(e,t)=>{const r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},QL={ordinalNumber:YL,era:ya({values:qL,defaultWidth:"wide"}),quarter:ya({values:WL,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ya({values:HL,defaultWidth:"wide"}),day:ya({values:GL,defaultWidth:"wide"}),dayPeriod:ya({values:XL,defaultWidth:"wide",formattingValues:KL,defaultFormattingWidth:"wide"})};function ba(e){return(t,r={})=>{const s=r.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],o=t.match(a);if(!o)return null;const c=o[0],u=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],f=Array.isArray(u)?JL(u,w=>w.test(c)):ZL(u,w=>w.test(c));let p;p=e.valueCallback?e.valueCallback(f):f,p=r.valueCallback?r.valueCallback(p):p;const x=t.slice(c.length);return{value:p,rest:x}}}function ZL(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function JL(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function CE(e){return(t,r={})=>{const s=t.match(e.matchPattern);if(!s)return null;const a=s[0],o=t.match(e.parsePattern);if(!o)return null;let c=e.valueCallback?e.valueCallback(o[0]):o[0];c=r.valueCallback?r.valueCallback(c):c;const u=t.slice(a.length);return{value:c,rest:u}}}const e9=/^(\d+)(th|st|nd|rd)?/i,t9=/\d+/i,r9={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},n9={any:[/^b/i,/^(a|c)/i]},s9={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},a9={any:[/1/i,/2/i,/3/i,/4/i]},i9={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},o9={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},l9={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},c9={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},d9={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},u9={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},h9={ordinalNumber:CE({matchPattern:e9,parsePattern:t9,valueCallback:e=>parseInt(e,10)}),era:ba({matchPatterns:r9,defaultMatchWidth:"wide",parsePatterns:n9,defaultParseWidth:"any"}),quarter:ba({matchPatterns:s9,defaultMatchWidth:"wide",parsePatterns:a9,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ba({matchPatterns:i9,defaultMatchWidth:"wide",parsePatterns:o9,defaultParseWidth:"any"}),day:ba({matchPatterns:l9,defaultMatchWidth:"wide",parsePatterns:c9,defaultParseWidth:"any"}),dayPeriod:ba({matchPatterns:d9,defaultMatchWidth:"any",parsePatterns:u9,defaultParseWidth:"any"})},EE={code:"en-US",formatDistance:LL,formatLong:UL,formatRelative:VL,localize:QL,match:h9,options:{weekStartsOn:0,firstWeekContainsDate:1}};function f9(e){const t=Jt(e);return _L(t,DL(t))+1}function m9(e){const t=Jt(e),r=+qf(t)-+NL(t);return Math.round(r/NE)+1}function SE(e,t){var x,w,_,j;const r=Jt(e),s=r.getFullYear(),a=Fu(),o=(t==null?void 0:t.firstWeekContainsDate)??((w=(x=t==null?void 0:t.locale)==null?void 0:x.options)==null?void 0:w.firstWeekContainsDate)??a.firstWeekContainsDate??((j=(_=a.locale)==null?void 0:_.options)==null?void 0:j.firstWeekContainsDate)??1,c=Ki(e,0);c.setFullYear(s+1,0,o),c.setHours(0,0,0,0);const u=pu(c,t),f=Ki(e,0);f.setFullYear(s,0,o),f.setHours(0,0,0,0);const p=pu(f,t);return r.getTime()>=u.getTime()?s+1:r.getTime()>=p.getTime()?s:s-1}function p9(e,t){var u,f,p,x;const r=Fu(),s=(t==null?void 0:t.firstWeekContainsDate)??((f=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((x=(p=r.locale)==null?void 0:p.options)==null?void 0:x.firstWeekContainsDate)??1,a=SE(e,t),o=Ki(e,0);return o.setFullYear(a,0,s),o.setHours(0,0,0,0),pu(o,t)}function g9(e,t){const r=Jt(e),s=+pu(r,t)-+p9(r,t);return Math.round(s/NE)+1}function Gt(e,t){const r=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return r+s}const fi={y(e,t){const r=e.getFullYear(),s=r>0?r:1-r;return Gt(t==="yy"?s%100:s,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Gt(r+1,2)},d(e,t){return Gt(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Gt(e.getHours()%12||12,t.length)},H(e,t){return Gt(e.getHours(),t.length)},m(e,t){return Gt(e.getMinutes(),t.length)},s(e,t){return Gt(e.getSeconds(),t.length)},S(e,t){const r=t.length,s=e.getMilliseconds(),a=Math.trunc(s*Math.pow(10,r-3));return Gt(a,t.length)}},Pl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Cb={G:function(e,t,r){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const s=e.getFullYear(),a=s>0?s:1-s;return r.ordinalNumber(a,{unit:"year"})}return fi.y(e,t)},Y:function(e,t,r,s){const a=SE(e,s),o=a>0?a:1-a;if(t==="YY"){const c=o%100;return Gt(c,2)}return t==="Yo"?r.ordinalNumber(o,{unit:"year"}):Gt(o,t.length)},R:function(e,t){const r=jE(e);return Gt(r,t.length)},u:function(e,t){const r=e.getFullYear();return Gt(r,t.length)},Q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return Gt(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return Gt(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,r){const s=e.getMonth();switch(t){case"M":case"MM":return fi.M(e,t);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,r){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return Gt(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,r,s){const a=g9(e,s);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):Gt(a,t.length)},I:function(e,t,r){const s=m9(e);return t==="Io"?r.ordinalNumber(s,{unit:"week"}):Gt(s,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):fi.d(e,t)},D:function(e,t,r){const s=f9(e);return t==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):Gt(s,t.length)},E:function(e,t,r){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,r,s){const a=e.getDay(),o=(a-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return Gt(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,s){const a=e.getDay(),o=(a-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return Gt(o,t.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const s=e.getDay(),a=s===0?7:s;switch(t){case"i":return String(a);case"ii":return Gt(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const s=e.getHours();let a;switch(s===12?a=Pl.noon:s===0?a=Pl.midnight:a=s/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const s=e.getHours();let a;switch(s>=17?a=Pl.evening:s>=12?a=Pl.afternoon:s>=4?a=Pl.morning:a=Pl.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return fi.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):fi.H(e,t)},K:function(e,t,r){const s=e.getHours()%12;return t==="Ko"?r.ordinalNumber(s,{unit:"hour"}):Gt(s,t.length)},k:function(e,t,r){let s=e.getHours();return s===0&&(s=24),t==="ko"?r.ordinalNumber(s,{unit:"hour"}):Gt(s,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):fi.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):fi.s(e,t)},S:function(e,t){return fi.S(e,t)},X:function(e,t,r){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return Sb(s);case"XXXX":case"XX":return No(s);case"XXXXX":case"XXX":default:return No(s,":")}},x:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"x":return Sb(s);case"xxxx":case"xx":return No(s);case"xxxxx":case"xxx":default:return No(s,":")}},O:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Eb(s,":");case"OOOO":default:return"GMT"+No(s,":")}},z:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Eb(s,":");case"zzzz":default:return"GMT"+No(s,":")}},t:function(e,t,r){const s=Math.trunc(e.getTime()/1e3);return Gt(s,t.length)},T:function(e,t,r){const s=e.getTime();return Gt(s,t.length)}};function Eb(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),o=s%60;return o===0?r+String(a):r+String(a)+t+Gt(o,2)}function Sb(e,t){return e%60===0?(e>0?"-":"+")+Gt(Math.abs(e)/60,2):No(e,t)}function No(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=Gt(Math.trunc(s/60),2),o=Gt(s%60,2);return r+a+t+o}const Ab=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},AE=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},x9=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return Ab(e,t);let o;switch(s){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",Ab(s,t)).replace("{{time}}",AE(a,t))},v9={p:AE,P:x9},w9=/^D+$/,y9=/^Y+$/,b9=["D","DD","YY","YYYY"];function _9(e){return w9.test(e)}function N9(e){return y9.test(e)}function j9(e,t,r){const s=C9(e,t,r);if(console.warn(s),b9.includes(e))throw new RangeError(s)}function C9(e,t,r){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const E9=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,S9=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,A9=/^'([^]*?)'?$/,k9=/''/g,T9=/[a-zA-Z]/;function ln(e,t,r){var x,w,_,j,N,C,T,E;const s=Fu(),a=(r==null?void 0:r.locale)??s.locale??EE,o=(r==null?void 0:r.firstWeekContainsDate)??((w=(x=r==null?void 0:r.locale)==null?void 0:x.options)==null?void 0:w.firstWeekContainsDate)??s.firstWeekContainsDate??((j=(_=s.locale)==null?void 0:_.options)==null?void 0:j.firstWeekContainsDate)??1,c=(r==null?void 0:r.weekStartsOn)??((C=(N=r==null?void 0:r.locale)==null?void 0:N.options)==null?void 0:C.weekStartsOn)??s.weekStartsOn??((E=(T=s.locale)==null?void 0:T.options)==null?void 0:E.weekStartsOn)??0,u=Jt(e);if(!EL(u))throw new RangeError("Invalid time value");let f=t.match(S9).map(S=>{const b=S[0];if(b==="p"||b==="P"){const k=v9[b];return k(S,a.formatLong)}return S}).join("").match(E9).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const b=S[0];if(b==="'")return{isToken:!1,value:I9(S)};if(Cb[b])return{isToken:!0,value:S};if(b.match(T9))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:S}});a.localize.preprocessor&&(f=a.localize.preprocessor(u,f));const p={firstWeekContainsDate:o,weekStartsOn:c,locale:a};return f.map(S=>{if(!S.isToken)return S.value;const b=S.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&N9(b)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&_9(b))&&j9(b,t,String(e));const k=Cb[b[0]];return k(u,b,a.localize,p)}).join("")}function I9(e){const t=e.match(A9);return t?t[1].replace(k9,"'"):e}function R9(e,t,r){const s=Fu(),a=(r==null?void 0:r.locale)??s.locale??EE,o=2520,c=sf(e,t);if(isNaN(c))throw new RangeError("Invalid time value");const u=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:c});let f,p;c>0?(f=Jt(t),p=Jt(e)):(f=Jt(e),p=Jt(t));const x=OL(p,f),w=(Wf(p)-Wf(f))/1e3,_=Math.round((x-w)/60);let j;if(_<2)return r!=null&&r.includeSeconds?x<5?a.formatDistance("lessThanXSeconds",5,u):x<10?a.formatDistance("lessThanXSeconds",10,u):x<20?a.formatDistance("lessThanXSeconds",20,u):x<40?a.formatDistance("halfAMinute",0,u):x<60?a.formatDistance("lessThanXMinutes",1,u):a.formatDistance("xMinutes",1,u):_===0?a.formatDistance("lessThanXMinutes",1,u):a.formatDistance("xMinutes",_,u);if(_<45)return a.formatDistance("xMinutes",_,u);if(_<90)return a.formatDistance("aboutXHours",1,u);if(_<Nb){const N=Math.round(_/60);return a.formatDistance("aboutXHours",N,u)}else{if(_<o)return a.formatDistance("xDays",1,u);if(_<Ph){const N=Math.round(_/Nb);return a.formatDistance("xDays",N,u)}else if(_<Ph*2)return j=Math.round(_/Ph),a.formatDistance("aboutXMonths",j,u)}if(j=PL(p,f),j<12){const N=Math.round(_/Ph);return a.formatDistance("xMonths",N,u)}else{const N=j%12,C=Math.trunc(j/12);return N<3?a.formatDistance("aboutXYears",C,u):N<9?a.formatDistance("overXYears",C,u):a.formatDistance("almostXYears",C+1,u)}}function gu(e,t){return R9(e,jL(e),t)}const P9={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 ms",other:"cerca de {{count}} meses"},xMonths:{one:"1 ms",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},O9=(e,t,r)=>{let s;const a=P9[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",String(t)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"em "+s:"h "+s:s},D9={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},M9={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},L9={full:"{{date}} 's' {{time}}",long:"{{date}} 's' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},F9={date:cc({formats:D9,defaultWidth:"full"}),time:cc({formats:M9,defaultWidth:"full"}),dateTime:cc({formats:L9,defaultWidth:"full"})},B9={lastWeek:e=>{const t=e.getDay();return"'"+(t===0||t===6?"ltimo":"ltima")+"' eeee 's' p"},yesterday:"'ontem s' p",today:"'hoje s' p",tomorrow:"'amanh s' p",nextWeek:"eeee 's' p",other:"P"},z9=(e,t,r,s)=>{const a=B9[e];return typeof a=="function"?a(t):a},U9={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},$9={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},V9={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},q9={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","tera","quarta","quinta","sexta","sbado"],wide:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},W9={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"}},H9={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},G9=(e,t)=>{const r=Number(e);return(t==null?void 0:t.unit)==="week"?r+"":r+""},X9={ordinalNumber:G9,era:ya({values:U9,defaultWidth:"wide"}),quarter:ya({values:$9,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ya({values:V9,defaultWidth:"wide"}),day:ya({values:q9,defaultWidth:"wide"}),dayPeriod:ya({values:W9,defaultWidth:"wide",formattingValues:H9,defaultFormattingWidth:"wide"})},K9=/^(\d+)[o]?/i,Y9=/\d+/i,Q9={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},Z9={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},J9={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},eF={any:[/1/i,/2/i,/3/i,/4/i]},tF={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|maro|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},rF={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},nF={narrow:/^(dom|[23456]?|s[a]b)/i,short:/^(dom|[23456]?|s[a]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[a]b)/i,wide:/^(domingo|(segunda|ter[c]a|quarta|quinta|sexta)([- ]feira)?|s[a]bado)/i},sF={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[a]b/i]},aF={narrow:/^(a|p|mn|md|(da) (manh|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manh|tarde|noite))/i},iF={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manh/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},oF={ordinalNumber:CE({matchPattern:K9,parsePattern:Y9,valueCallback:e=>parseInt(e,10)}),era:ba({matchPatterns:Q9,defaultMatchWidth:"wide",parsePatterns:Z9,defaultParseWidth:"any"}),quarter:ba({matchPatterns:J9,defaultMatchWidth:"wide",parsePatterns:eF,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ba({matchPatterns:tF,defaultMatchWidth:"wide",parsePatterns:rF,defaultParseWidth:"any"}),day:ba({matchPatterns:nF,defaultMatchWidth:"wide",parsePatterns:sF,defaultParseWidth:"any"}),dayPeriod:ba({matchPatterns:aF,defaultMatchWidth:"any",parsePatterns:iF,defaultParseWidth:"any"})},Ir={code:"pt-BR",formatDistance:O9,formatLong:F9,formatRelative:z9,localize:X9,match:oF,options:{weekStartsOn:0,firstWeekContainsDate:1}};function lF({onUnauthorizedClick:e}={}){const{user:t}=bt(),r=_t(),{notifications:s,unreadCount:a,loading:o,markAsRead:c,markAllAsRead:u,deleteNotification:f,clearLocalNotifications:p}=bE(),{acceptFriendRequest:x,declineFriendRequest:w,loading:_}=_E(),j=v.useRef(null),[N,C]=v.useState(!1),[T,E]=v.useState({}),S=a,b=()=>{t?C(!N):e?e():r("/auth")};v.useEffect(()=>{function z(q){j.current&&!j.current.contains(q.target)&&C(!1)}return document.addEventListener("mousedown",z),()=>document.removeEventListener("mousedown",z)},[]),v.useEffect(()=>{const z=async()=>{const q=s.filter(ee=>ee.type==="friend_request");if(q.length!==0)for(const ee of q){const{data:H}=await U.from("friendships").select("user_id").eq("friend_id",t==null?void 0:t.id).eq("status","pending").order("created_at",{ascending:!1}).limit(1).maybeSingle();if(H){const{data:re}=await U.from("profiles").select("user_id, display_name, avatar_url, interest, relationship_status").eq("user_id",H.user_id).single();re&&E(ae=>({...ae,[ee.id]:{...re,friendshipUserId:H.user_id}}))}}};t&&s.length>0&&z()},[s,t]);const k=z=>{switch(z){case"event_created":return Et;case"event_updated":return dl;case"event_cancelled":return sr;case"friend_request":return bm;default:return qa}},O=z=>{try{return gu(new Date(z),{addSuffix:!0,locale:Ir})}catch{return"recentemente"}},L=s.filter(z=>!z.read),P=async z=>{if(z.type==="friend_request"){await c(z.id);return}await c(z.id),z.type==="user_message"||z.type==="user_like"?(C(!1),r("/find-friends")):z.event_id?(C(!1),r(`/e/${z.event_id}`)):C(!1)},M=async(z,q)=>{await x("",q)&&f(z)},R=async(z,q)=>{await w("",q)&&f(z)},$=z=>({solteiro:"Solteiro(a)",relacionamento:"Em relacionamento",casado:"Casado(a)",preferencia_nao_informar:"Prefiro no informar"})[z]||z,Y=z=>({curtio:"Curtio",namoro:"Namoro",amizade:"Amizade"})[z]||z;return n.jsxs("div",{className:"relative",ref:j,children:[n.jsxs(K,{variant:"ghost",size:"icon",className:"relative hover:bg-primary/10",onClick:b,children:[n.jsx(qa,{className:"h-5 w-5"}),S>0&&n.jsx("div",{className:"absolute -top-1 -right-1 h-3 w-3 bg-destructive rounded-full flex items-center justify-center animate-pulse",children:n.jsx("span",{className:"text-xs text-destructive-foreground font-bold",children:S})})]}),N&&n.jsxs("div",{className:"absolute right-0 top-full mt-2 w-80 max-h-96 overflow-hidden bg-background border border-border rounded-lg shadow-lg z-50",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:"Notificaes"}),S>0&&n.jsx(K,{variant:"ghost",size:"sm",onClick:async z=>{z.preventDefault(),z.stopPropagation(),await u(),p(),C(!1)},children:"Marcar todas como lidas"})]}),n.jsx("div",{className:"max-h-80 overflow-y-auto",children:o?n.jsxs("div",{className:"p-6 text-center text-muted-foreground",children:[n.jsx(qa,{className:"h-8 w-8 mx-auto mb-2 opacity-50 animate-pulse"}),n.jsx("p",{children:"Carregando..."})]}):L.length===0?n.jsxs("div",{className:"p-6 text-center text-muted-foreground",children:[n.jsx(qa,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"Nenhuma notificao"})]}):n.jsx("div",{className:"space-y-1",children:L.map(z=>{var re,ae;const q=k(z.type),ee=z.type==="friend_request",H=ee?T[z.id]:null;return n.jsx("div",{className:`p-3 ${ee?"":"hover:bg-surface cursor-pointer"} transition-colors group ${z.read?"":"bg-primary/5 border-l-2 border-l-primary"}`,onClick:()=>P(z),children:ee&&H?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsxs($t,{className:"h-12 w-12",children:[n.jsx(Kt,{src:H.avatar_url}),n.jsx(Vt,{children:(ae=(re=H.display_name)==null?void 0:re[0])==null?void 0:ae.toUpperCase()})]}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:H.display_name}),n.jsx("p",{className:"text-xs text-muted-foreground",children:Y(H.interest)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:$(H.relationship_status)})]}),n.jsx(K,{variant:"ghost",size:"icon",className:"h-6 w-6 hover:bg-destructive/10",onClick:ie=>{ie.stopPropagation(),f(z.id)},children:n.jsx(sr,{className:"h-3 w-3"})})]})})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(K,{size:"sm",className:"flex-1",onClick:()=>M(z.id,H.friendshipUserId),disabled:_,children:[n.jsx(Xn,{className:"h-4 w-4 mr-1"}),"Aceitar"]}),n.jsxs(K,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>R(z.id,H.friendshipUserId),disabled:_,children:[n.jsx(sr,{className:"h-4 w-4 mr-1"}),"Recusar"]})]})]}):n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:`p-1 rounded-full ${z.read?"bg-surface":"bg-primary/20"}`,children:n.jsx(q,{className:"h-4 w-4 text-primary"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:z.title}),n.jsxs("div",{className:"flex items-center gap-1",children:[!z.read&&n.jsx(dt,{variant:"destructive",className:"h-2 w-2 p-0 rounded-full"}),n.jsx(K,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover:opacity-100 hover:bg-destructive/10",onClick:ie=>{ie.stopPropagation(),f(z.id)},children:n.jsx(sr,{className:"h-3 w-3"})})]})]}),n.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:z.message}),n.jsx("p",{className:"text-xs text-muted-foreground",children:O(z.created_at)})]})]})},z.id)})})}),s.length>0&&n.jsx("div",{className:"p-3 border-t border-border",children:n.jsx(K,{variant:"ghost",className:"w-full text-sm",onClick:()=>{C(!1),r("/notifications")},children:"Ver todas as notificaes"})})]})]})}function cF(e){if(!e)return null;const t=new Date,r=new Date(e),s=t.getFullYear()-r.getFullYear(),a=t.getMonth()-r.getMonth();return a<0||a===0&&t.getDate()<r.getDate()?s-1:s}function zm(){const[e,t]=v.useState(null),[r,s]=v.useState(!0),[a,o]=v.useState(!1),{user:c}=bt(),u=async()=>{if(c)try{s(!0);const{data:x,error:w}=await U.from("profiles").select("*").eq("user_id",c.id).single();if(w&&w.code!=="PGRST116"){console.error("Error fetching profile:",w),X.error("Erro ao carregar perfil");return}t(x||null)}catch(x){console.error("Error:",x),X.error("Erro ao carregar perfil")}finally{s(!1)}},f=async x=>{if(!c||!e)return!1;try{o(!0);const{error:w}=await U.from("profiles").update(x).eq("user_id",c.id);return w?(console.error("Error updating profile:",w),X.error("Erro ao salvar perfil"),!1):(t(_=>_?{..._,...x}:null),X.success("Perfil salvo com sucesso!"),!0)}catch(w){return console.error("Error:",w),X.error("Erro ao salvar perfil"),!1}finally{o(!1)}},p=async x=>{if(!c)return null;try{o(!0);const w=x.name.split(".").pop(),_=`${c.id}/avatar.${w}`,{error:j}=await U.storage.from("user-uploads").upload(_,x,{upsert:!0});if(j)return console.error("Error uploading file:",j),X.error("Erro ao fazer upload da foto"),null;const{data:{publicUrl:N}}=U.storage.from("user-uploads").getPublicUrl(_);return await f({avatar_url:N})?(X.success("Foto de perfil atualizada!"),N):null}catch(w){return console.error("Error:",w),X.error("Erro ao atualizar foto"),null}finally{o(!1)}};return v.useEffect(()=>{u()},[c]),{profile:e,loading:r,saving:a,updateProfile:f,uploadAvatar:p,refetch:u}}/*! Capacitor: https://capacitorjs.com/ - MIT License */var Pc;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(Pc||(Pc={}));class Ng extends Error{constructor(t,r,s){super(t),this.message=t,this.code=r,this.data=s}}const dF=e=>{var t,r;return e!=null&&e.androidBridge?"android":!((r=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||r===void 0)&&r.bridge?"ios":"web"},uF=e=>{const t=e.CapacitorCustomPlatform||null,r=e.Capacitor||{},s=r.Plugins=r.Plugins||{},a=()=>t!==null?t.name:dF(e),o=()=>a()!=="web",c=w=>{const _=p.get(w);return!!(_!=null&&_.platforms.has(a())||u(w))},u=w=>{var _;return(_=r.PluginHeaders)===null||_===void 0?void 0:_.find(j=>j.name===w)},f=w=>e.console.error(w),p=new Map,x=(w,_={})=>{const j=p.get(w);if(j)return console.warn(`Capacitor plugin "${w}" already registered. Cannot register plugins twice.`),j.proxy;const N=a(),C=u(w);let T;const E=async()=>(!T&&N in _?T=typeof _[N]=="function"?T=await _[N]():T=_[N]:t!==null&&!T&&"web"in _&&(T=typeof _.web=="function"?T=await _.web():T=_.web),T),S=(M,R)=>{var $,Y;if(C){const z=C==null?void 0:C.methods.find(q=>R===q.name);if(z)return z.rtype==="promise"?q=>r.nativePromise(w,R.toString(),q):(q,ee)=>r.nativeCallback(w,R.toString(),q,ee);if(M)return($=M[R])===null||$===void 0?void 0:$.bind(M)}else{if(M)return(Y=M[R])===null||Y===void 0?void 0:Y.bind(M);throw new Ng(`"${w}" plugin is not implemented on ${N}`,Pc.Unimplemented)}},b=M=>{let R;const $=(...Y)=>{const z=E().then(q=>{const ee=S(q,M);if(ee){const H=ee(...Y);return R=H==null?void 0:H.remove,H}else throw new Ng(`"${w}.${M}()" is not implemented on ${N}`,Pc.Unimplemented)});return M==="addListener"&&(z.remove=async()=>R()),z};return $.toString=()=>`${M.toString()}() { [capacitor code] }`,Object.defineProperty($,"name",{value:M,writable:!1,configurable:!1}),$},k=b("addListener"),O=b("removeListener"),L=(M,R)=>{const $=k({eventName:M},R),Y=async()=>{const q=await $;O({eventName:M,callbackId:q},R)},z=new Promise(q=>$.then(()=>q({remove:Y})));return z.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await Y()},z},P=new Proxy({},{get(M,R){switch(R){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return C?L:k;case"removeListener":return O;default:return b(R)}}});return s[w]=P,p.set(w,{name:w,proxy:P,platforms:new Set([...Object.keys(_),...C?[N]:[]])}),P};return r.convertFileSrc||(r.convertFileSrc=w=>w),r.getPlatform=a,r.handleError=f,r.isNativePlatform=o,r.isPluginAvailable=c,r.registerPlugin=x,r.Exception=Ng,r.DEBUG=!!r.DEBUG,r.isLoggingEnabled=!!r.isLoggingEnabled,r},hF=e=>e.Capacitor=uF(e),Ko=hF(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Um=Ko.registerPlugin;class kE{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,r){let s=!1;this.listeners[t]||(this.listeners[t]=[],s=!0),this.listeners[t].push(r);const o=this.windowListeners[t];o&&!o.registered&&this.addWindowListener(o),s&&this.sendRetainedArgumentsForEvent(t);const c=async()=>this.removeListener(t,r);return Promise.resolve({remove:c})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,r,s){const a=this.listeners[t];if(!a){if(s){let o=this.retainedEventArguments[t];o||(o=[]),o.push(r),this.retainedEventArguments[t]=o}return}a.forEach(o=>o(r))}hasListeners(t){var r;return!!(!((r=this.listeners[t])===null||r===void 0)&&r.length)}registerWindowListener(t,r){this.windowListeners[r]={registered:!1,windowEventName:t,pluginEventName:r,handler:s=>{this.notifyListeners(r,s)}}}unimplemented(t="not implemented"){return new Ko.Exception(t,Pc.Unimplemented)}unavailable(t="not available"){return new Ko.Exception(t,Pc.Unavailable)}async removeListener(t,r){const s=this.listeners[t];if(!s)return;const a=s.indexOf(r);this.listeners[t].splice(a,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const r=this.retainedEventArguments[t];r&&(delete this.retainedEventArguments[t],r.forEach(s=>{this.notifyListeners(t,s)}))}}const kb=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Tb=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class fF extends kE{async getCookies(){const t=document.cookie,r={};return t.split(";").forEach(s=>{if(s.length<=0)return;let[a,o]=s.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=Tb(a).trim(),o=Tb(o).trim(),r[a]=o}),r}async setCookie(t){try{const r=kb(t.key),s=kb(t.value),a=`; expires=${(t.expires||"").replace("expires=","")}`,o=(t.path||"/").replace("path=",""),c=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${r}=${s||""}${a}; path=${o}; ${c};`}catch(r){return Promise.reject(r)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const r of t)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}Um("CapacitorCookies",{web:()=>new fF});const mF=async e=>new Promise((t,r)=>{const s=new FileReader;s.onload=()=>{const a=s.result;t(a.indexOf(",")>=0?a.split(",")[1]:a)},s.onerror=a=>r(a),s.readAsDataURL(e)}),pF=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(a=>a.toLocaleLowerCase()).reduce((a,o,c)=>(a[o]=e[t[c]],a),{})},gF=(e,t=!0)=>e?Object.entries(e).reduce((s,a)=>{const[o,c]=a;let u,f;return Array.isArray(c)?(f="",c.forEach(p=>{u=t?encodeURIComponent(p):p,f+=`${o}=${u}&`}),f.slice(0,-1)):(u=t?encodeURIComponent(c):c,f=`${o}=${u}`),`${s}&${f}`},"").substr(1):null,xF=(e,t={})=>{const r=Object.assign({method:e.method||"GET",headers:e.headers},t),a=pF(e.headers)["content-type"]||"";if(typeof e.data=="string")r.body=e.data;else if(a.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[c,u]of Object.entries(e.data||{}))o.set(c,u);r.body=o.toString()}else if(a.includes("multipart/form-data")||e.data instanceof FormData){const o=new FormData;if(e.data instanceof FormData)e.data.forEach((u,f)=>{o.append(f,u)});else for(const u of Object.keys(e.data))o.append(u,e.data[u]);r.body=o;const c=new Headers(r.headers);c.delete("content-type"),r.headers=c}else(a.includes("application/json")||typeof e.data=="object")&&(r.body=JSON.stringify(e.data));return r};class vF extends kE{async request(t){const r=xF(t,t.webFetchExtra),s=gF(t.params,t.shouldEncodeUrlParams),a=s?`${t.url}?${s}`:t.url,o=await fetch(a,r),c=o.headers.get("content-type")||"";let{responseType:u="text"}=o.ok?t:{};c.includes("application/json")&&(u="json");let f,p;switch(u){case"arraybuffer":case"blob":p=await o.blob(),f=await mF(p);break;case"json":f=await o.json();break;case"document":case"text":default:f=await o.text()}const x={};return o.headers.forEach((w,_)=>{x[_]=w}),{data:f,headers:x,status:o.status,url:o.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}Um("CapacitorHttp",{web:()=>new vF});function wF(e){e.CapacitorUtils.Synapse=new Proxy({},{get(t,r){return new Proxy({},{get(s,a){return(o,c,u)=>{const f=e.Capacitor.Plugins[r];if(f===void 0){u(new Error(`Capacitor plugin ${r} not found`));return}if(typeof f[a]!="function"){u(new Error(`Method ${a} not found in Capacitor plugin ${r}`));return}(async()=>{try{const p=await f[a](o);c(p)}catch(p){u(p)}})()}}})}})}function yF(e){e.CapacitorUtils.Synapse=new Proxy({},{get(t,r){return e.cordova.plugins[r]}})}function bF(e=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!e?wF(window):window.cordova!==void 0&&yF(window))}const xd=Um("Geolocation",{web:()=>fl(()=>import("./web-BFEt4WYV.js"),[],import.meta.url).then(e=>new e.GeolocationWeb)});bF();function ev(e={}){const{enableHighAccuracy:t=!0,timeout:r=27e3,maximumAge:s=3e4,watch:a=!1}=e,[o,c]=v.useState(null),[u,f]=v.useState(null),[p,x]=v.useState(!1),w=Ko.isNativePlatform(),_=async()=>{try{if(w){const N=await xd.checkPermissions();return N.location==="denied"?(f("Permisso de localizao negada. Ative nas configuraes do app."),!1):(N.location==="prompt"||N.location==="prompt-with-rationale")&&(await xd.requestPermissions()).location==="denied"?(f("Permisso de localizao negada."),!1):!0}else return navigator.geolocation?!0:(f("Geolocalizao no suportada pelo navegador"),!1)}catch(N){return console.error("Error requesting permission:",N),f("Erro ao solicitar permisso de localizao"),!1}},j=async()=>{x(!0),f(null);try{if(!await _())return x(!1),null;if(w){const C=await xd.getCurrentPosition({enableHighAccuracy:t,timeout:r,maximumAge:s}),T={lat:C.coords.latitude,lon:C.coords.longitude};return c(T),x(!1),T}else return new Promise(C=>{navigator.geolocation.getCurrentPosition(T=>{const E={lat:T.coords.latitude,lon:T.coords.longitude};c(E),x(!1),C(E)},T=>{console.error("Geolocation error:",T),f("Erro ao obter localizao. Permita o acesso  localizao."),x(!1),C(null)},{enableHighAccuracy:t,timeout:r,maximumAge:s})})}catch(N){return console.error("Error getting position:",N),f("Erro ao obter localizao"),x(!1),null}};return v.useEffect(()=>{if(!a)return;let N=null;return(async()=>{await _()&&(w?N=await xd.watchPosition({enableHighAccuracy:t,timeout:r,maximumAge:s},(E,S)=>{if(S){console.error("Watch position error:",S),f("Erro ao monitorar localizao");return}E&&(c({lat:E.coords.latitude,lon:E.coords.longitude}),f(null))}):navigator.geolocation&&(N=navigator.geolocation.watchPosition(E=>{c({lat:E.coords.latitude,lon:E.coords.longitude}),f(null)},E=>{console.error("Watch position error:",E),f("Erro ao monitorar localizao")},{enableHighAccuracy:t,timeout:r,maximumAge:s})))})(),()=>{N!==null&&(w?xd.clearWatch({id:N}):navigator.geolocation.clearWatch(N))}},[a,t,r,s,w]),{position:o,error:u,loading:p,requestPermission:_,getCurrentPosition:j}}var jg="focusScope.autoFocusOnMount",Cg="focusScope.autoFocusOnUnmount",Ib={bubbles:!1,cancelable:!0},_F="FocusScope",Bu=v.forwardRef((e,t)=>{const{loop:r=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...c}=e,[u,f]=v.useState(null),p=Er(a),x=Er(o),w=v.useRef(null),_=tt(t,C=>f(C)),j=v.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;v.useEffect(()=>{if(s){let C=function(b){if(j.paused||!u)return;const k=b.target;u.contains(k)?w.current=k:xi(w.current,{select:!0})},T=function(b){if(j.paused||!u)return;const k=b.relatedTarget;k!==null&&(u.contains(k)||xi(w.current,{select:!0}))},E=function(b){if(document.activeElement===document.body)for(const O of b)O.removedNodes.length>0&&xi(u)};document.addEventListener("focusin",C),document.addEventListener("focusout",T);const S=new MutationObserver(E);return u&&S.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",C),document.removeEventListener("focusout",T),S.disconnect()}}},[s,u,j.paused]),v.useEffect(()=>{if(u){Pb.add(j);const C=document.activeElement;if(!u.contains(C)){const E=new CustomEvent(jg,Ib);u.addEventListener(jg,p),u.dispatchEvent(E),E.defaultPrevented||(NF(AF(TE(u)),{select:!0}),document.activeElement===C&&xi(u))}return()=>{u.removeEventListener(jg,p),setTimeout(()=>{const E=new CustomEvent(Cg,Ib);u.addEventListener(Cg,x),u.dispatchEvent(E),E.defaultPrevented||xi(C??document.body,{select:!0}),u.removeEventListener(Cg,x),Pb.remove(j)},0)}}},[u,p,x,j]);const N=v.useCallback(C=>{if(!r&&!s||j.paused)return;const T=C.key==="Tab"&&!C.altKey&&!C.ctrlKey&&!C.metaKey,E=document.activeElement;if(T&&E){const S=C.currentTarget,[b,k]=jF(S);b&&k?!C.shiftKey&&E===k?(C.preventDefault(),r&&xi(b,{select:!0})):C.shiftKey&&E===b&&(C.preventDefault(),r&&xi(k,{select:!0})):E===S&&C.preventDefault()}},[r,s,j.paused]);return n.jsx(qe.div,{tabIndex:-1,...c,ref:_,onKeyDown:N})});Bu.displayName=_F;function NF(e,{select:t=!1}={}){const r=document.activeElement;for(const s of e)if(xi(s,{select:t}),document.activeElement!==r)return}function jF(e){const t=TE(e),r=Rb(t,e),s=Rb(t.reverse(),e);return[r,s]}function TE(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Rb(e,t){for(const r of e)if(!CF(r,{upTo:t}))return r}function CF(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function EF(e){return e instanceof HTMLInputElement&&"select"in e}function xi(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&EF(e)&&t&&e.select()}}var Pb=SF();function SF(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=Ob(e,t),e.unshift(t)},remove(t){var r;e=Ob(e,t),(r=e[0])==null||r.resume()}}}function Ob(e,t){const r=[...e],s=r.indexOf(t);return s!==-1&&r.splice(s,1),r}function AF(e){return e.filter(t=>t.tagName!=="A")}var Eg=0;function $m(){v.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Db()),document.body.insertAdjacentElement("beforeend",e[1]??Db()),Eg++,()=>{Eg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Eg--}},[])}function Db(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var _a=function(){return _a=Object.assign||function(t){for(var r,s=1,a=arguments.length;s<a;s++){r=arguments[s];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},_a.apply(this,arguments)};function IE(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r}function kF(e,t,r){if(r||arguments.length===2)for(var s=0,a=t.length,o;s<a;s++)(o||!(s in t))&&(o||(o=Array.prototype.slice.call(t,0,s)),o[s]=t[s]);return e.concat(o||Array.prototype.slice.call(t))}var af="right-scroll-bar-position",of="width-before-scroll-bar",TF="with-scroll-bars-hidden",IF="--removed-body-scroll-bar-size";function Sg(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function RF(e,t){var r=v.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(s){var a=r.value;a!==s&&(r.value=s,r.callback(s,a))}}}})[0];return r.callback=t,r.facade}var PF=typeof window<"u"?v.useLayoutEffect:v.useEffect,Mb=new WeakMap;function OF(e,t){var r=RF(null,function(s){return e.forEach(function(a){return Sg(a,s)})});return PF(function(){var s=Mb.get(r);if(s){var a=new Set(s),o=new Set(e),c=r.current;a.forEach(function(u){o.has(u)||Sg(u,null)}),o.forEach(function(u){a.has(u)||Sg(u,c)})}Mb.set(r,e)},[e]),r}function DF(e){return e}function MF(e,t){t===void 0&&(t=DF);var r=[],s=!1,a={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(o){var c=t(o,s);return r.push(c),function(){r=r.filter(function(u){return u!==c})}},assignSyncMedium:function(o){for(s=!0;r.length;){var c=r;r=[],c.forEach(o)}r={push:function(u){return o(u)},filter:function(){return r}}},assignMedium:function(o){s=!0;var c=[];if(r.length){var u=r;r=[],u.forEach(o),c=r}var f=function(){var x=c;c=[],x.forEach(o)},p=function(){return Promise.resolve().then(f)};p(),r={push:function(x){c.push(x),p()},filter:function(x){return c=c.filter(x),r}}}};return a}function LF(e){e===void 0&&(e={});var t=MF(null);return t.options=_a({async:!0,ssr:!1},e),t}var RE=function(e){var t=e.sideCar,r=IE(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return v.createElement(s,_a({},r))};RE.isSideCarExport=!0;function FF(e,t){return e.useMedium(t),RE}var PE=LF(),Ag=function(){},Vm=v.forwardRef(function(e,t){var r=v.useRef(null),s=v.useState({onScrollCapture:Ag,onWheelCapture:Ag,onTouchMoveCapture:Ag}),a=s[0],o=s[1],c=e.forwardProps,u=e.children,f=e.className,p=e.removeScrollBar,x=e.enabled,w=e.shards,_=e.sideCar,j=e.noRelative,N=e.noIsolation,C=e.inert,T=e.allowPinchZoom,E=e.as,S=E===void 0?"div":E,b=e.gapMode,k=IE(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),O=_,L=OF([r,t]),P=_a(_a({},k),a);return v.createElement(v.Fragment,null,x&&v.createElement(O,{sideCar:PE,removeScrollBar:p,shards:w,noRelative:j,noIsolation:N,inert:C,setCallbacks:o,allowPinchZoom:!!T,lockRef:r,gapMode:b}),c?v.cloneElement(v.Children.only(u),_a(_a({},P),{ref:L})):v.createElement(S,_a({},P,{className:f,ref:L}),u))});Vm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Vm.classNames={fullWidth:of,zeroRight:af};var BF=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function zF(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=BF();return t&&e.setAttribute("nonce",t),e}function UF(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function $F(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var VF=function(){var e=0,t=null;return{add:function(r){e==0&&(t=zF())&&(UF(t,r),$F(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},qF=function(){var e=VF();return function(t,r){v.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},OE=function(){var e=qF(),t=function(r){var s=r.styles,a=r.dynamic;return e(s,a),null};return t},WF={left:0,top:0,right:0,gap:0},kg=function(e){return parseInt(e||"",10)||0},HF=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[kg(r),kg(s),kg(a)]},GF=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return WF;var t=HF(e),r=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-r+t[2]-t[0])}},XF=OE(),dc="data-scroll-locked",KF=function(e,t,r,s){var a=e.left,o=e.top,c=e.right,u=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(TF,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(u,"px ").concat(s,`;
  }
  body[`).concat(dc,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(s,`;
    `),r==="padding"&&"padding-right: ".concat(u,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(af,` {
    right: `).concat(u,"px ").concat(s,`;
  }
  
  .`).concat(of,` {
    margin-right: `).concat(u,"px ").concat(s,`;
  }
  
  .`).concat(af," .").concat(af,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(of," .").concat(of,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(dc,`] {
    `).concat(IF,": ").concat(u,`px;
  }
`)},Lb=function(){var e=parseInt(document.body.getAttribute(dc)||"0",10);return isFinite(e)?e:0},YF=function(){v.useEffect(function(){return document.body.setAttribute(dc,(Lb()+1).toString()),function(){var e=Lb()-1;e<=0?document.body.removeAttribute(dc):document.body.setAttribute(dc,e.toString())}},[])},QF=function(e){var t=e.noRelative,r=e.noImportant,s=e.gapMode,a=s===void 0?"margin":s;YF();var o=v.useMemo(function(){return GF(a)},[a]);return v.createElement(XF,{styles:KF(o,!t,a,r?"":"!important")})},a0=!1;if(typeof window<"u")try{var Oh=Object.defineProperty({},"passive",{get:function(){return a0=!0,!0}});window.addEventListener("test",Oh,Oh),window.removeEventListener("test",Oh,Oh)}catch{a0=!1}var Ol=a0?{passive:!1}:!1,ZF=function(e){return e.tagName==="TEXTAREA"},DE=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!ZF(e)&&r[t]==="visible")},JF=function(e){return DE(e,"overflowY")},eB=function(e){return DE(e,"overflowX")},Fb=function(e,t){var r=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var a=ME(e,s);if(a){var o=LE(e,s),c=o[1],u=o[2];if(c>u)return!0}s=s.parentNode}while(s&&s!==r.body);return!1},tB=function(e){var t=e.scrollTop,r=e.scrollHeight,s=e.clientHeight;return[t,r,s]},rB=function(e){var t=e.scrollLeft,r=e.scrollWidth,s=e.clientWidth;return[t,r,s]},ME=function(e,t){return e==="v"?JF(t):eB(t)},LE=function(e,t){return e==="v"?tB(t):rB(t)},nB=function(e,t){return e==="h"&&t==="rtl"?-1:1},sB=function(e,t,r,s,a){var o=nB(e,window.getComputedStyle(t).direction),c=o*s,u=r.target,f=t.contains(u),p=!1,x=c>0,w=0,_=0;do{if(!u)break;var j=LE(e,u),N=j[0],C=j[1],T=j[2],E=C-T-o*N;(N||E)&&ME(e,u)&&(w+=E,_+=N);var S=u.parentNode;u=S&&S.nodeType===Node.DOCUMENT_FRAGMENT_NODE?S.host:S}while(!f&&u!==document.body||f&&(t.contains(u)||t===u));return(x&&Math.abs(w)<1||!x&&Math.abs(_)<1)&&(p=!0),p},Dh=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Bb=function(e){return[e.deltaX,e.deltaY]},zb=function(e){return e&&"current"in e?e.current:e},aB=function(e,t){return e[0]===t[0]&&e[1]===t[1]},iB=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},oB=0,Dl=[];function lB(e){var t=v.useRef([]),r=v.useRef([0,0]),s=v.useRef(),a=v.useState(oB++)[0],o=v.useState(OE)[0],c=v.useRef(e);v.useEffect(function(){c.current=e},[e]),v.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var C=kF([e.lockRef.current],(e.shards||[]).map(zb),!0).filter(Boolean);return C.forEach(function(T){return T.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),C.forEach(function(T){return T.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var u=v.useCallback(function(C,T){if("touches"in C&&C.touches.length===2||C.type==="wheel"&&C.ctrlKey)return!c.current.allowPinchZoom;var E=Dh(C),S=r.current,b="deltaX"in C?C.deltaX:S[0]-E[0],k="deltaY"in C?C.deltaY:S[1]-E[1],O,L=C.target,P=Math.abs(b)>Math.abs(k)?"h":"v";if("touches"in C&&P==="h"&&L.type==="range")return!1;var M=Fb(P,L);if(!M)return!0;if(M?O=P:(O=P==="v"?"h":"v",M=Fb(P,L)),!M)return!1;if(!s.current&&"changedTouches"in C&&(b||k)&&(s.current=O),!O)return!0;var R=s.current||O;return sB(R,T,C,R==="h"?b:k)},[]),f=v.useCallback(function(C){var T=C;if(!(!Dl.length||Dl[Dl.length-1]!==o)){var E="deltaY"in T?Bb(T):Dh(T),S=t.current.filter(function(O){return O.name===T.type&&(O.target===T.target||T.target===O.shadowParent)&&aB(O.delta,E)})[0];if(S&&S.should){T.cancelable&&T.preventDefault();return}if(!S){var b=(c.current.shards||[]).map(zb).filter(Boolean).filter(function(O){return O.contains(T.target)}),k=b.length>0?u(T,b[0]):!c.current.noIsolation;k&&T.cancelable&&T.preventDefault()}}},[]),p=v.useCallback(function(C,T,E,S){var b={name:C,delta:T,target:E,should:S,shadowParent:cB(E)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(k){return k!==b})},1)},[]),x=v.useCallback(function(C){r.current=Dh(C),s.current=void 0},[]),w=v.useCallback(function(C){p(C.type,Bb(C),C.target,u(C,e.lockRef.current))},[]),_=v.useCallback(function(C){p(C.type,Dh(C),C.target,u(C,e.lockRef.current))},[]);v.useEffect(function(){return Dl.push(o),e.setCallbacks({onScrollCapture:w,onWheelCapture:w,onTouchMoveCapture:_}),document.addEventListener("wheel",f,Ol),document.addEventListener("touchmove",f,Ol),document.addEventListener("touchstart",x,Ol),function(){Dl=Dl.filter(function(C){return C!==o}),document.removeEventListener("wheel",f,Ol),document.removeEventListener("touchmove",f,Ol),document.removeEventListener("touchstart",x,Ol)}},[]);var j=e.removeScrollBar,N=e.inert;return v.createElement(v.Fragment,null,N?v.createElement(o,{styles:iB(a)}):null,j?v.createElement(QF,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function cB(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const dB=FF(PE,lB);var zu=v.forwardRef(function(e,t){return v.createElement(Vm,_a({},e,{ref:t,sideCar:dB}))});zu.classNames=Vm.classNames;var uB=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ml=new WeakMap,Mh=new WeakMap,Lh={},Tg=0,FE=function(e){return e&&(e.host||FE(e.parentNode))},hB=function(e,t){return t.map(function(r){if(e.contains(r))return r;var s=FE(r);return s&&e.contains(s)?s:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},fB=function(e,t,r,s){var a=hB(t,Array.isArray(e)?e:[e]);Lh[r]||(Lh[r]=new WeakMap);var o=Lh[r],c=[],u=new Set,f=new Set(a),p=function(w){!w||u.has(w)||(u.add(w),p(w.parentNode))};a.forEach(p);var x=function(w){!w||f.has(w)||Array.prototype.forEach.call(w.children,function(_){if(u.has(_))x(_);else try{var j=_.getAttribute(s),N=j!==null&&j!=="false",C=(Ml.get(_)||0)+1,T=(o.get(_)||0)+1;Ml.set(_,C),o.set(_,T),c.push(_),C===1&&N&&Mh.set(_,!0),T===1&&_.setAttribute(r,"true"),N||_.setAttribute(s,"true")}catch(E){console.error("aria-hidden: cannot operate on ",_,E)}})};return x(t),u.clear(),Tg++,function(){c.forEach(function(w){var _=Ml.get(w)-1,j=o.get(w)-1;Ml.set(w,_),o.set(w,j),_||(Mh.has(w)||w.removeAttribute(s),Mh.delete(w)),j||w.removeAttribute(r)}),Tg--,Tg||(Ml=new WeakMap,Ml=new WeakMap,Mh=new WeakMap,Lh={})}},qm=function(e,t,r){r===void 0&&(r="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),a=uB(e);return a?(s.push.apply(s,Array.from(a.querySelectorAll("[aria-live], script"))),fB(s,a,r,"aria-hidden")):function(){return null}},Wm="Dialog",[BE,zE]=Mr(Wm),[mB,oa]=BE(Wm),UE=e=>{const{__scopeDialog:t,children:r,open:s,defaultOpen:a,onOpenChange:o,modal:c=!0}=e,u=v.useRef(null),f=v.useRef(null),[p,x]=Os({prop:s,defaultProp:a??!1,onChange:o,caller:Wm});return n.jsx(mB,{scope:t,triggerRef:u,contentRef:f,contentId:un(),titleId:un(),descriptionId:un(),open:p,onOpenChange:x,onOpenToggle:v.useCallback(()=>x(w=>!w),[x]),modal:c,children:r})};UE.displayName=Wm;var $E="DialogTrigger",VE=v.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=oa($E,r),o=tt(t,a.triggerRef);return n.jsx(qe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":nv(a.open),...s,ref:o,onClick:Ie(e.onClick,a.onOpenToggle)})});VE.displayName=$E;var tv="DialogPortal",[pB,qE]=BE(tv,{forceMount:void 0}),WE=e=>{const{__scopeDialog:t,forceMount:r,children:s,container:a}=e,o=oa(tv,t);return n.jsx(pB,{scope:t,forceMount:r,children:v.Children.map(s,c=>n.jsx(Hr,{present:r||o.open,children:n.jsx(Bc,{asChild:!0,container:a,children:c})}))})};WE.displayName=tv;var Hf="DialogOverlay",HE=v.forwardRef((e,t)=>{const r=qE(Hf,e.__scopeDialog),{forceMount:s=r.forceMount,...a}=e,o=oa(Hf,e.__scopeDialog);return o.modal?n.jsx(Hr,{present:s||o.open,children:n.jsx(xB,{...a,ref:t})}):null});HE.displayName=Hf;var gB=qi("DialogOverlay.RemoveScroll"),xB=v.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=oa(Hf,r);return n.jsx(zu,{as:gB,allowPinchZoom:!0,shards:[a.contentRef],children:n.jsx(qe.div,{"data-state":nv(a.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),Yo="DialogContent",GE=v.forwardRef((e,t)=>{const r=qE(Yo,e.__scopeDialog),{forceMount:s=r.forceMount,...a}=e,o=oa(Yo,e.__scopeDialog);return n.jsx(Hr,{present:s||o.open,children:o.modal?n.jsx(vB,{...a,ref:t}):n.jsx(wB,{...a,ref:t})})});GE.displayName=Yo;var vB=v.forwardRef((e,t)=>{const r=oa(Yo,e.__scopeDialog),s=v.useRef(null),a=tt(t,r.contentRef,s);return v.useEffect(()=>{const o=s.current;if(o)return qm(o)},[]),n.jsx(XE,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ie(e.onCloseAutoFocus,o=>{var c;o.preventDefault(),(c=r.triggerRef.current)==null||c.focus()}),onPointerDownOutside:Ie(e.onPointerDownOutside,o=>{const c=o.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0;(c.button===2||u)&&o.preventDefault()}),onFocusOutside:Ie(e.onFocusOutside,o=>o.preventDefault())})}),wB=v.forwardRef((e,t)=>{const r=oa(Yo,e.__scopeDialog),s=v.useRef(!1),a=v.useRef(!1);return n.jsx(XE,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var c,u;(c=e.onCloseAutoFocus)==null||c.call(e,o),o.defaultPrevented||(s.current||(u=r.triggerRef.current)==null||u.focus(),o.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:o=>{var f,p;(f=e.onInteractOutside)==null||f.call(e,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const c=o.target;((p=r.triggerRef.current)==null?void 0:p.contains(c))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),XE=v.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,...c}=e,u=oa(Yo,r),f=v.useRef(null),p=tt(t,f);return $m(),n.jsxs(n.Fragment,{children:[n.jsx(Bu,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:o,children:n.jsx(cl,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":nv(u.open),...c,ref:p,onDismiss:()=>u.onOpenChange(!1)})}),n.jsxs(n.Fragment,{children:[n.jsx(bB,{titleId:u.titleId}),n.jsx(NB,{contentRef:f,descriptionId:u.descriptionId})]})]})}),rv="DialogTitle",KE=v.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=oa(rv,r);return n.jsx(qe.h2,{id:a.titleId,...s,ref:t})});KE.displayName=rv;var YE="DialogDescription",QE=v.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=oa(YE,r);return n.jsx(qe.p,{id:a.descriptionId,...s,ref:t})});QE.displayName=YE;var ZE="DialogClose",JE=v.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=oa(ZE,r);return n.jsx(qe.button,{type:"button",...s,ref:t,onClick:Ie(e.onClick,()=>a.onOpenChange(!1))})});JE.displayName=ZE;function nv(e){return e?"open":"closed"}var eS="DialogTitleWarning",[yB,tS]=FR(eS,{contentName:Yo,titleName:rv,docsSlug:"dialog"}),bB=({titleId:e})=>{const t=tS(eS),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return v.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},_B="DialogDescriptionWarning",NB=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${tS(_B).contentName}}.`;return v.useEffect(()=>{var o;const a=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},sv=UE,rS=VE,av=WE,Hm=HE,Gm=GE,iv=KE,ov=QE,lv=JE;const Ut=sv,nS=rS,jB=av,sS=v.forwardRef(({className:e,...t},r)=>n.jsx(Hm,{ref:r,className:Le("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));sS.displayName=Hm.displayName;const Bt=v.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(jB,{children:[n.jsx(sS,{}),n.jsxs(Gm,{ref:s,className:Le("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,n.jsxs(lv,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[n.jsx(sr,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Bt.displayName=Gm.displayName;const xr=({className:e,...t})=>n.jsx("div",{className:Le("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});xr.displayName="DialogHeader";const Uu=({className:e,...t})=>n.jsx("div",{className:Le("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Uu.displayName="DialogFooter";const vr=v.forwardRef(({className:e,...t},r)=>n.jsx(iv,{ref:r,className:Le("text-lg font-semibold leading-none tracking-tight",e),...t}));vr.displayName=iv.displayName;const is=v.forwardRef(({className:e,...t},r)=>n.jsx(ov,{ref:r,className:Le("text-sm text-muted-foreground",e),...t}));is.displayName=ov.displayName;const we=v.forwardRef(({className:e,type:t,...r},s)=>n.jsx("input",{type:t,className:Le("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...r}));we.displayName="Input";var CB=v.createContext(void 0);function pl(e){const t=v.useContext(CB);return e||t||"ltr"}function xu(e,[t,r]){return Math.min(r,Math.max(t,e))}function EB(e,t){return v.useReducer((r,s)=>t[r][s]??r,e)}var cv="ScrollArea",[aS]=Mr(cv),[SB,Ls]=aS(cv),iS=v.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:s="hover",dir:a,scrollHideDelay:o=600,...c}=e,[u,f]=v.useState(null),[p,x]=v.useState(null),[w,_]=v.useState(null),[j,N]=v.useState(null),[C,T]=v.useState(null),[E,S]=v.useState(0),[b,k]=v.useState(0),[O,L]=v.useState(!1),[P,M]=v.useState(!1),R=tt(t,Y=>f(Y)),$=pl(a);return n.jsx(SB,{scope:r,type:s,dir:$,scrollHideDelay:o,scrollArea:u,viewport:p,onViewportChange:x,content:w,onContentChange:_,scrollbarX:j,onScrollbarXChange:N,scrollbarXEnabled:O,onScrollbarXEnabledChange:L,scrollbarY:C,onScrollbarYChange:T,scrollbarYEnabled:P,onScrollbarYEnabledChange:M,onCornerWidthChange:S,onCornerHeightChange:k,children:n.jsx(qe.div,{dir:$,...c,ref:R,style:{position:"relative","--radix-scroll-area-corner-width":E+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});iS.displayName=cv;var oS="ScrollAreaViewport",lS=v.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:s,nonce:a,...o}=e,c=Ls(oS,r),u=v.useRef(null),f=tt(t,u,c.onViewportChange);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),n.jsx(qe.div,{"data-radix-scroll-area-viewport":"",...o,ref:f,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...e.style},children:n.jsx("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});lS.displayName=oS;var Ra="ScrollAreaScrollbar",dv=v.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=Ls(Ra,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:c}=a,u=e.orientation==="horizontal";return v.useEffect(()=>(u?o(!0):c(!0),()=>{u?o(!1):c(!1)}),[u,o,c]),a.type==="hover"?n.jsx(AB,{...s,ref:t,forceMount:r}):a.type==="scroll"?n.jsx(kB,{...s,ref:t,forceMount:r}):a.type==="auto"?n.jsx(cS,{...s,ref:t,forceMount:r}):a.type==="always"?n.jsx(uv,{...s,ref:t}):null});dv.displayName=Ra;var AB=v.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=Ls(Ra,e.__scopeScrollArea),[o,c]=v.useState(!1);return v.useEffect(()=>{const u=a.scrollArea;let f=0;if(u){const p=()=>{window.clearTimeout(f),c(!0)},x=()=>{f=window.setTimeout(()=>c(!1),a.scrollHideDelay)};return u.addEventListener("pointerenter",p),u.addEventListener("pointerleave",x),()=>{window.clearTimeout(f),u.removeEventListener("pointerenter",p),u.removeEventListener("pointerleave",x)}}},[a.scrollArea,a.scrollHideDelay]),n.jsx(Hr,{present:r||o,children:n.jsx(cS,{"data-state":o?"visible":"hidden",...s,ref:t})})}),kB=v.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=Ls(Ra,e.__scopeScrollArea),o=e.orientation==="horizontal",c=Km(()=>f("SCROLL_END"),100),[u,f]=EB("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return v.useEffect(()=>{if(u==="idle"){const p=window.setTimeout(()=>f("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(p)}},[u,a.scrollHideDelay,f]),v.useEffect(()=>{const p=a.viewport,x=o?"scrollLeft":"scrollTop";if(p){let w=p[x];const _=()=>{const j=p[x];w!==j&&(f("SCROLL"),c()),w=j};return p.addEventListener("scroll",_),()=>p.removeEventListener("scroll",_)}},[a.viewport,o,f,c]),n.jsx(Hr,{present:r||u!=="hidden",children:n.jsx(uv,{"data-state":u==="hidden"?"hidden":"visible",...s,ref:t,onPointerEnter:Ie(e.onPointerEnter,()=>f("POINTER_ENTER")),onPointerLeave:Ie(e.onPointerLeave,()=>f("POINTER_LEAVE"))})})}),cS=v.forwardRef((e,t)=>{const r=Ls(Ra,e.__scopeScrollArea),{forceMount:s,...a}=e,[o,c]=v.useState(!1),u=e.orientation==="horizontal",f=Km(()=>{if(r.viewport){const p=r.viewport.offsetWidth<r.viewport.scrollWidth,x=r.viewport.offsetHeight<r.viewport.scrollHeight;c(u?p:x)}},10);return Oc(r.viewport,f),Oc(r.content,f),n.jsx(Hr,{present:s||o,children:n.jsx(uv,{"data-state":o?"visible":"hidden",...a,ref:t})})}),uv=v.forwardRef((e,t)=>{const{orientation:r="vertical",...s}=e,a=Ls(Ra,e.__scopeScrollArea),o=v.useRef(null),c=v.useRef(0),[u,f]=v.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),p=mS(u.viewport,u.content),x={...s,sizes:u,onSizesChange:f,hasThumb:p>0&&p<1,onThumbChange:_=>o.current=_,onThumbPointerUp:()=>c.current=0,onThumbPointerDown:_=>c.current=_};function w(_,j){return DB(_,c.current,u,j)}return r==="horizontal"?n.jsx(TB,{...x,ref:t,onThumbPositionChange:()=>{if(a.viewport&&o.current){const _=a.viewport.scrollLeft,j=Ub(_,u,a.dir);o.current.style.transform=`translate3d(${j}px, 0, 0)`}},onWheelScroll:_=>{a.viewport&&(a.viewport.scrollLeft=_)},onDragScroll:_=>{a.viewport&&(a.viewport.scrollLeft=w(_,a.dir))}}):r==="vertical"?n.jsx(IB,{...x,ref:t,onThumbPositionChange:()=>{if(a.viewport&&o.current){const _=a.viewport.scrollTop,j=Ub(_,u);o.current.style.transform=`translate3d(0, ${j}px, 0)`}},onWheelScroll:_=>{a.viewport&&(a.viewport.scrollTop=_)},onDragScroll:_=>{a.viewport&&(a.viewport.scrollTop=w(_))}}):null}),TB=v.forwardRef((e,t)=>{const{sizes:r,onSizesChange:s,...a}=e,o=Ls(Ra,e.__scopeScrollArea),[c,u]=v.useState(),f=v.useRef(null),p=tt(t,f,o.onScrollbarXChange);return v.useEffect(()=>{f.current&&u(getComputedStyle(f.current))},[f]),n.jsx(uS,{"data-orientation":"horizontal",...a,ref:p,sizes:r,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Xm(r)+"px",...e.style},onThumbPointerDown:x=>e.onThumbPointerDown(x.x),onDragScroll:x=>e.onDragScroll(x.x),onWheelScroll:(x,w)=>{if(o.viewport){const _=o.viewport.scrollLeft+x.deltaX;e.onWheelScroll(_),gS(_,w)&&x.preventDefault()}},onResize:()=>{f.current&&o.viewport&&c&&s({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:f.current.clientWidth,paddingStart:Xf(c.paddingLeft),paddingEnd:Xf(c.paddingRight)}})}})}),IB=v.forwardRef((e,t)=>{const{sizes:r,onSizesChange:s,...a}=e,o=Ls(Ra,e.__scopeScrollArea),[c,u]=v.useState(),f=v.useRef(null),p=tt(t,f,o.onScrollbarYChange);return v.useEffect(()=>{f.current&&u(getComputedStyle(f.current))},[f]),n.jsx(uS,{"data-orientation":"vertical",...a,ref:p,sizes:r,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Xm(r)+"px",...e.style},onThumbPointerDown:x=>e.onThumbPointerDown(x.y),onDragScroll:x=>e.onDragScroll(x.y),onWheelScroll:(x,w)=>{if(o.viewport){const _=o.viewport.scrollTop+x.deltaY;e.onWheelScroll(_),gS(_,w)&&x.preventDefault()}},onResize:()=>{f.current&&o.viewport&&c&&s({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:f.current.clientHeight,paddingStart:Xf(c.paddingTop),paddingEnd:Xf(c.paddingBottom)}})}})}),[RB,dS]=aS(Ra),uS=v.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:s,hasThumb:a,onThumbChange:o,onThumbPointerUp:c,onThumbPointerDown:u,onThumbPositionChange:f,onDragScroll:p,onWheelScroll:x,onResize:w,..._}=e,j=Ls(Ra,r),[N,C]=v.useState(null),T=tt(t,R=>C(R)),E=v.useRef(null),S=v.useRef(""),b=j.viewport,k=s.content-s.viewport,O=Er(x),L=Er(f),P=Km(w,10);function M(R){if(E.current){const $=R.clientX-E.current.left,Y=R.clientY-E.current.top;p({x:$,y:Y})}}return v.useEffect(()=>{const R=$=>{const Y=$.target;(N==null?void 0:N.contains(Y))&&O($,k)};return document.addEventListener("wheel",R,{passive:!1}),()=>document.removeEventListener("wheel",R,{passive:!1})},[b,N,k,O]),v.useEffect(L,[s,L]),Oc(N,P),Oc(j.content,P),n.jsx(RB,{scope:r,scrollbar:N,hasThumb:a,onThumbChange:Er(o),onThumbPointerUp:Er(c),onThumbPositionChange:L,onThumbPointerDown:Er(u),children:n.jsx(qe.div,{..._,ref:T,style:{position:"absolute",..._.style},onPointerDown:Ie(e.onPointerDown,R=>{R.button===0&&(R.target.setPointerCapture(R.pointerId),E.current=N.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",j.viewport&&(j.viewport.style.scrollBehavior="auto"),M(R))}),onPointerMove:Ie(e.onPointerMove,M),onPointerUp:Ie(e.onPointerUp,R=>{const $=R.target;$.hasPointerCapture(R.pointerId)&&$.releasePointerCapture(R.pointerId),document.body.style.webkitUserSelect=S.current,j.viewport&&(j.viewport.style.scrollBehavior=""),E.current=null})})})}),Gf="ScrollAreaThumb",hS=v.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=dS(Gf,e.__scopeScrollArea);return n.jsx(Hr,{present:r||a.hasThumb,children:n.jsx(PB,{ref:t,...s})})}),PB=v.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:s,...a}=e,o=Ls(Gf,r),c=dS(Gf,r),{onThumbPositionChange:u}=c,f=tt(t,w=>c.onThumbChange(w)),p=v.useRef(void 0),x=Km(()=>{p.current&&(p.current(),p.current=void 0)},100);return v.useEffect(()=>{const w=o.viewport;if(w){const _=()=>{if(x(),!p.current){const j=MB(w,u);p.current=j,u()}};return u(),w.addEventListener("scroll",_),()=>w.removeEventListener("scroll",_)}},[o.viewport,x,u]),n.jsx(qe.div,{"data-state":c.hasThumb?"visible":"hidden",...a,ref:f,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:Ie(e.onPointerDownCapture,w=>{const j=w.target.getBoundingClientRect(),N=w.clientX-j.left,C=w.clientY-j.top;c.onThumbPointerDown({x:N,y:C})}),onPointerUp:Ie(e.onPointerUp,c.onThumbPointerUp)})});hS.displayName=Gf;var hv="ScrollAreaCorner",fS=v.forwardRef((e,t)=>{const r=Ls(hv,e.__scopeScrollArea),s=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&s?n.jsx(OB,{...e,ref:t}):null});fS.displayName=hv;var OB=v.forwardRef((e,t)=>{const{__scopeScrollArea:r,...s}=e,a=Ls(hv,r),[o,c]=v.useState(0),[u,f]=v.useState(0),p=!!(o&&u);return Oc(a.scrollbarX,()=>{var w;const x=((w=a.scrollbarX)==null?void 0:w.offsetHeight)||0;a.onCornerHeightChange(x),f(x)}),Oc(a.scrollbarY,()=>{var w;const x=((w=a.scrollbarY)==null?void 0:w.offsetWidth)||0;a.onCornerWidthChange(x),c(x)}),p?n.jsx(qe.div,{...s,ref:t,style:{width:o,height:u,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Xf(e){return e?parseInt(e,10):0}function mS(e,t){const r=e/t;return isNaN(r)?0:r}function Xm(e){const t=mS(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-r)*t;return Math.max(s,18)}function DB(e,t,r,s="ltr"){const a=Xm(r),o=a/2,c=t||o,u=a-c,f=r.scrollbar.paddingStart+c,p=r.scrollbar.size-r.scrollbar.paddingEnd-u,x=r.content-r.viewport,w=s==="ltr"?[0,x]:[x*-1,0];return pS([f,p],w)(e)}function Ub(e,t,r="ltr"){const s=Xm(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-a,c=t.content-t.viewport,u=o-s,f=r==="ltr"?[0,c]:[c*-1,0],p=xu(e,f);return pS([0,c],[0,u])(p)}function pS(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(r-e[0])}}function gS(e,t){return e>0&&e<t}var MB=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},s=0;return function a(){const o={left:e.scrollLeft,top:e.scrollTop},c=r.left!==o.left,u=r.top!==o.top;(c||u)&&t(),r=o,s=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(s)};function Km(e,t){const r=Er(e),s=v.useRef(0);return v.useEffect(()=>()=>window.clearTimeout(s.current),[]),v.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(r,t)},[r,t])}function Oc(e,t){const r=Er(t);Rr(()=>{let s=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(s),a.unobserve(e)}}},[e,r])}var xS=iS,LB=lS,FB=fS;const Qo=v.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(xS,{ref:s,className:Le("relative overflow-hidden",e),...r,children:[n.jsx(LB,{className:"h-full w-full rounded-[inherit]",children:t}),n.jsx(vS,{}),n.jsx(FB,{})]}));Qo.displayName=xS.displayName;const vS=v.forwardRef(({className:e,orientation:t="vertical",...r},s)=>n.jsx(dv,{ref:s,orientation:t,className:Le("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:n.jsx(hS,{className:"relative flex-1 rounded-full bg-border"})}));vS.displayName=dv.displayName;function BB(){const{profile:e,refetch:t}=zm(),{getCurrentPosition:r}=ev(),[s,a]=v.useState(!1),[o,c]=v.useState([]),[u,f]=v.useState([]),[p,x]=v.useState(""),[w,_]=v.useState(!1),[j,N]=v.useState(null);v.useEffect(()=>{C()},[]),v.useEffect(()=>{e!=null&&e.city_id&&T()},[e==null?void 0:e.city_id]),v.useEffect(()=>{if(p.trim()==="")f(o);else{const O=p.toLowerCase(),L=o.filter(P=>P.name.toLowerCase().includes(O)||P.state.toLowerCase().includes(O));f(L)}},[p,o]);const C=async()=>{try{const{data:O,error:L}=await U.from("organizers").select("city_id").not("city_id","is",null);if(L)throw L;const{data:P,error:M}=await U.from("events").select("city_id").not("city_id","is",null);if(M)throw M;const R=new Set([...(O==null?void 0:O.map(z=>z.city_id))||[],...(P==null?void 0:P.map(z=>z.city_id))||[]]);if(R.size===0){c([]),f([]);return}const{data:$,error:Y}=await U.from("cities").select("*").in("id",Array.from(R)).order("state").order("name");if(Y)throw Y;c($||[]),f($||[])}catch(O){console.error("Error loading cities:",O)}},T=async()=>{if(e!=null&&e.city_id)try{const{data:O,error:L}=await U.from("cities").select("*").eq("id",e.city_id).maybeSingle();if(L)throw L;N(O)}catch(O){console.error("Error loading current city:",O)}},E=async O=>{if(e){_(!0);try{const{error:L}=await U.from("profiles").update({city_id:O.id}).eq("user_id",e.user_id);if(L)throw L;N(O),await t(),X.success(`Localizao alterada para ${O.name}, ${O.state}`),a(!1),x("")}catch(L){console.error("Error updating location:",L),X.error("Erro ao atualizar localizao")}finally{_(!1)}}},S=async()=>{_(!0);try{const O=await r();if(!O){X.error("No foi possvel obter sua localizao"),_(!1);return}const{lat:L,lon:P}=O;try{const R=await(await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${L}&lon=${P}&format=json`)).json(),$=R.address.city||R.address.town||R.address.municipality;if($){const Y=o.find(z=>z.name.toLowerCase()===$.toLowerCase());Y?await E(Y):X.error("Cidade no encontrada no sistema")}else X.error("No foi possvel identificar sua cidade")}catch(M){console.error("Error fetching location:",M),X.error("Erro ao obter localizao")}}catch(O){console.error("Geolocation error:",O),X.error("Erro ao acessar localizao. Verifique as permisses do app.")}finally{_(!1)}},b=async()=>{if(e){_(!0);try{const{error:O}=await U.from("profiles").update({city_id:null}).eq("user_id",e.user_id);if(O)throw O;N(null),await t(),X.success("Localizao removida")}catch(O){console.error("Error clearing location:",O),X.error("Erro ao remover localizao")}finally{_(!1)}}},k=u.reduce((O,L)=>(O[L.state]||(O[L.state]=[]),O[L.state].push(L),O),{});return n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-1.5 text-primary hover:text-primary/80 transition-colors",children:[n.jsx(Rt,{className:"h-4 w-4 flex-shrink-0"}),n.jsx("span",{className:"text-sm font-medium truncate max-w-[120px]",children:j?j.name:"Qualquer lugar"}),n.jsx(S1,{className:"h-3 w-3 flex-shrink-0"})]}),n.jsx(Ut,{open:s,onOpenChange:a,children:n.jsxs(Bt,{className:"sm:max-w-[500px] max-h-[80vh] p-0",children:[n.jsx(xr,{className:"px-6 pt-6 pb-4 border-b",children:n.jsx(vr,{children:"Localizao"})}),n.jsx("div",{className:"px-6 py-4",children:n.jsx(we,{type:"text",placeholder:"Onde?",value:p,onChange:O=>x(O.target.value),className:"w-full"})}),n.jsx(Qo,{className:"max-h-[400px] px-6",children:n.jsxs("div",{className:"space-y-2 pb-6",children:[n.jsxs("button",{onClick:S,disabled:w,className:"w-full flex items-start gap-3 p-3 hover:bg-accent rounded-lg transition-colors text-left group",children:[n.jsx(Tj,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5 group-hover:scale-110 transition-transform"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-sm",children:"Usar minha localizao atual"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Encontre eventos perto de voc"})]})]}),n.jsxs("button",{onClick:()=>E({id:"",name:"Qualquer lugar",state:""}),disabled:w,className:"w-full flex items-center gap-3 p-3 hover:bg-accent rounded-lg transition-colors text-left",children:[n.jsx(Rt,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"}),n.jsx("span",{className:"text-sm font-medium",children:"Qualquer lugar"})]}),Object.entries(k).map(([O,L])=>n.jsxs("div",{className:"pt-4 first:pt-2",children:[n.jsx("h3",{className:"text-xs font-semibold text-muted-foreground mb-2 px-3",children:O}),n.jsx("div",{className:"space-y-1",children:L.map(P=>n.jsxs("button",{onClick:()=>E(P),disabled:w,className:`w-full flex items-center gap-3 p-3 hover:bg-accent rounded-lg transition-colors text-left ${(j==null?void 0:j.id)===P.id?"bg-accent":""}`,children:[n.jsx(Rt,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"}),n.jsx("span",{className:"text-sm",children:P.name})]},P.id))})]},O))]})}),j&&n.jsx("div",{className:"px-6 pb-6 pt-2 border-t",children:n.jsxs(K,{variant:"outline",onClick:b,disabled:w,className:"w-full",children:[n.jsx(sr,{className:"h-4 w-4 mr-2"}),"Remover localizao"]})})]})})]})}function Fs(){const{user:e}=bt(),[t,r]=v.useState(!1),[s,a]=v.useState(!0);return v.useEffect(()=>{(async()=>{if(!e){r(!1),a(!1);return}try{const{data:c,error:u}=await U.rpc("has_role",{_user_id:e.id,_role:"admin"});if(u)throw u;r(c||!1)}catch(c){console.error("Error checking admin role:",c),r(!1)}finally{a(!1)}})()},[e]),{isAdmin:t,loading:s}}function i0({title:e="Eventos",showLocation:t=!0,showNotifications:r=!0,userType:s}){const{user:a}=bt(),{isAdmin:o}=Fs(),{theme:c,toggleTheme:u}=Q1(),f=_t(),p=Kn(),x=()=>{if(!a){const w=p.pathname;f(`/auth?redirect=${encodeURIComponent(w)}`),X.info("Faa login para ver suas notificaes")}};return n.jsx("header",{className:"sticky top-0 z-40 bg-background/80 backdrop-blur-md border-b border-border",children:n.jsxs("div",{className:"flex items-center justify-between px-4 py-3 max-w-md mx-auto",children:[n.jsx("div",{className:"flex items-center gap-2",children:t&&n.jsx(BB,{})}),n.jsxs("div",{className:"flex items-center gap-2",children:[o&&n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>f("/admin"),className:"h-8 w-8",title:"Painel Admin",children:n.jsx(I1,{className:"h-4 w-4 text-primary"})}),n.jsx(K,{variant:"ghost",size:"icon",onClick:u,className:"h-8 w-8",children:c==="dark"?n.jsx(Ij,{className:"h-4 w-4"}):n.jsx(kj,{className:"h-4 w-4"})}),r&&n.jsx(lF,{onUnauthorizedClick:x})]})]})})}function o0({title:e,image:t,organizerName:r,organizerAvatar:s,date:a,endDate:o,location:c,locationLink:u,estimatedAttendees:f,likes:p,comments:x,isLiked:w,isLive:_,price:j,onClick:N,onLike:C,onOrganizerClick:T,requiresRegistration:E=!1,userType:S="user",isOwnEvent:b=!1,onRegister:k,onManageRegistrations:O,showJoinButton:L=!1,ticketLink:P,isPlatformEvent:M=!1,hasPaidTickets:R=!1}){const $=u&&(u.includes("meet.google")||u.includes("zoom.us")||u.includes("youtube.com")||u.includes("twitch.tv")||u.includes("teams.microsoft")||u.includes("streamyard")||u.includes("jitsi")),Y=!!(t&&t.trim()!==""&&!t.includes("placeholder.svg"));return n.jsxs("div",{className:"event-card bg-card rounded-lg overflow-hidden shadow-card cursor-pointer",onClick:N,children:[n.jsx("div",{className:"p-4 pb-3",children:n.jsxs("div",{className:M?"flex items-center gap-3":"flex items-center gap-3 cursor-pointer hover:bg-accent/50 -mx-4 -my-2 px-4 py-2 rounded-lg transition-colors",onClick:z=>{!M&&T&&(z.stopPropagation(),console.log("Clicou no organizador!"),T())},children:[n.jsx("div",{className:"avatar-story",children:n.jsxs($t,{className:"h-8 w-8",children:[n.jsx(Kt,{src:s,alt:r}),n.jsx(Vt,{className:"bg-surface text-xs",children:r.charAt(0).toUpperCase()})]})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:`text-sm font-medium text-foreground ${M?"":"group-hover:text-primary transition-colors"}`,children:r}),n.jsxs("div",{className:"flex flex-col gap-0.5",children:[n.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[n.jsx(Et,{className:"h-3 w-3"}),n.jsx("span",{children:a}),_&&n.jsxs("span",{className:"flex items-center gap-1 text-destructive font-medium",children:[n.jsx("div",{className:"h-2 w-2 bg-destructive rounded-full animate-pulse"}),"ACONTECENDO AGORA"]})]}),o&&n.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground/80",children:[n.jsx(tf,{className:"h-3 w-3"}),n.jsxs("span",{children:["Encerra: ",o]})]})]})]})]})}),Y&&n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:t,alt:e,className:"w-full h-64 object-cover"}),typeof j<"u"&&Number(j)>0||P||R?n.jsx("div",{className:"absolute top-3 right-3 bg-destructive/90 backdrop-blur-sm px-2 py-1 rounded-md",children:n.jsx("span",{className:"text-xs font-medium text-white",children:"PAGO"})}):n.jsx("div",{className:"absolute top-3 right-3 bg-primary/90 backdrop-blur-sm px-2 py-1 rounded-md",children:n.jsx("span",{className:"text-xs font-medium text-primary-foreground",children:"GRTIS"})})]}),n.jsxs("div",{className:"p-4 pt-3",children:[!Y&&(typeof j<"u"&&Number(j)>0||P||R?n.jsx("div",{className:"mb-2 inline-flex px-2 py-1 rounded-md bg-destructive/90",children:n.jsx("span",{className:"text-xs font-medium text-white",children:"PAGO"})}):n.jsx("div",{className:"mb-2 inline-flex px-2 py-1 rounded-md bg-primary/90",children:n.jsx("span",{className:"text-xs font-medium text-primary-foreground",children:"GRTIS"})})),n.jsx("h3",{className:"font-semibold text-foreground mb-2 line-clamp-2",children:e}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-3",children:[n.jsx(Rt,{className:"h-4 w-4"}),n.jsx("span",{className:"line-clamp-1",children:c})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("button",{onClick:z=>{z.stopPropagation(),C==null||C()},className:"flex items-center gap-1 transition-smooth hover:scale-110",children:[n.jsx(Qa,{className:`h-5 w-5 ${w?"fill-destructive text-destructive":"text-muted-foreground"}`}),n.jsx("span",{className:"text-sm text-muted-foreground",children:p})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Ds,{className:"h-5 w-5 text-muted-foreground"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:x})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(er,{className:"h-5 w-5 text-muted-foreground"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:f})]})]}),L&&_&&$&&n.jsx(K,{variant:"live",size:"sm",onClick:z=>{z.stopPropagation(),window.open(u,"_blank")},children:"Entrar"})]}),E&&n.jsx("div",{className:"mt-2",children:n.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary/10 text-primary text-xs rounded-full",children:[n.jsx(er,{className:"h-3 w-3"}),"Requer cadastro"]})})]})]})}const l0=[{value:"festas",label:" Festas"},{value:"shows",label:" Shows"},{value:"fitness",label:" Fitness"},{value:"igreja",label:" Igreja"},{value:"cursos",label:" Cursos"},{value:"bares",label:" Bares"},{value:"boates",label:" Boates"},{value:"esportes",label:" Esportes"}],zB={festas:"festas",shows:"shows",fitness:"fitness",igreja:"igreja",cristao:"igreja",cursos:"cursos",educacao:"cursos",bares:"bares",boates:"boates",balada:"boates",night:"boates",eletronica:"shows",rock:"shows",pop:"shows",forro:"shows",sertanejo:"shows",funk:"shows",samba:"shows",jazz:"shows",musica:"shows",eventos:"festas",esportes:"esportes"};function wS(e,t,r,s){const[a,o]=v.useState([]),[c,u]=v.useState(!1),{user:f}=bt(),p=async()=>{try{u(!0);let w,_,j,N;if(e&&e!=="todos"){const k=await U.from("events").select(`
            *,
            organizer:organizers!inner(
              id,
              page_title,
              user_id,
              avatar_url
            )
          `).eq("status","upcoming").contains("category",[e]).order("event_date",{ascending:!0});w=k.data,j=k.error;const O=await U.from("platform_events").select("*").eq("status","upcoming").contains("category",[e]).order("event_date",{ascending:!0});_=O.data,N=O.error}else{const k=await U.from("events").select(`
            *,
            organizer:organizers!inner(
              id,
              page_title,
              user_id,
              avatar_url
            )
          `).eq("status","upcoming").order("event_date",{ascending:!0});w=k.data,j=k.error;const O=await U.from("platform_events").select("*").eq("status","upcoming").order("event_date",{ascending:!0});_=O.data,N=O.error}if(j)throw j;if(N)throw N;const C=await Promise.all((w||[]).map(async k=>{const{data:O}=await U.from("profiles").select("display_name, avatar_url").eq("user_id",k.organizer.user_id).maybeSingle(),{count:L}=await U.from("event_likes").select("*",{count:"exact",head:!0}).eq("event_id",k.id),{count:P}=await U.from("event_comments").select("*",{count:"exact",head:!0}).eq("event_id",k.id),{count:M}=await U.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",k.id),{count:R}=await U.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",k.id).eq("attendance_confirmed",!0),{data:$}=await U.from("event_registrations").select("user_id").eq("event_id",k.id),Y=new Set(($==null?void 0:$.map(H=>H.user_id))||[]).size,{data:z}=await U.from("ticket_types").select("price").eq("event_id",k.id).eq("is_active",!0),q=z&&z.length>0&&z.some(H=>Number(H.price)>0)||k.ticket_price&&Number(k.ticket_price)>0||!!k.ticket_link;let ee=!1;if(f){const{data:H}=await U.from("event_likes").select("id").eq("event_id",k.id).eq("user_id",f.id).maybeSingle();ee=!!H}return{...k,is_platform_event:!1,organizer:{...k.organizer,profile:{display_name:O==null?void 0:O.display_name,avatar_url:k.organizer.avatar_url||(O==null?void 0:O.avatar_url)}},likes_count:L||0,comments_count:P||0,is_liked:ee,registrations_count:M||0,confirmed_attendees_count:R||0,unique_attendees_count:Y||0,has_paid_tickets:q}})),T=(_||[]).map(k=>({...k,is_platform_event:!0,organizer_id:"platform",organizer:{id:"platform",page_title:k.organizer_name,user_id:"platform",avatar_url:null,profile:{display_name:k.organizer_name,avatar_url:null}},current_attendees:0,is_live:!1,likes_count:0,comments_count:0,is_liked:!1,registrations_count:0,confirmed_attendees_count:0,unique_attendees_count:0,has_paid_tickets:k.ticket_price&&Number(k.ticket_price)>0||!!k.ticket_link}));let E=[...C,...T],S=[];if(f){const{data:k}=await U.from("followers").select("organizer_id").eq("user_id",f.id);S=(k||[]).map(O=>O.organizer_id)}if(r&&r.length>0){const k=new Set(r.map(O=>O.toLowerCase()));E=E.filter(O=>{const L=S.includes(O.organizer_id),M=(O.category||[]).map(R=>(zB[R]??R).toLowerCase()).some(R=>k.has(R));return L||M})}E.sort((k,O)=>k.has_paid_tickets&&!O.has_paid_tickets?-1:!k.has_paid_tickets&&O.has_paid_tickets?1:new Date(k.event_date).getTime()-new Date(O.event_date).getTime());let b=E;if(t&&t.trim()!==""){const k=t.toLowerCase().trim();b=E.filter(O=>{var z,q,ee,H,re,ae;const L=O.title.toLowerCase().includes(k),P=(z=O.description)==null?void 0:z.toLowerCase().includes(k),M=(q=O.organizer)==null?void 0:q.page_title.toLowerCase().includes(k),R=(re=(H=(ee=O.organizer)==null?void 0:ee.profile)==null?void 0:H.display_name)==null?void 0:re.toLowerCase().includes(k),$=O.location.toLowerCase().includes(k),Y=(ae=O.category)==null?void 0:ae.some(ie=>ie.toLowerCase().includes(k));return L||P||M||R||$||Y})}if(s){if(!s.showAllCities&&s.cities.length>0){const k=s.cities;b=b.filter(O=>(O.is_platform_event,!0))}if(s.categories.length>0&&(b=b.filter(k=>{const O=k.category||[];return s.categories.some(L=>O.some(P=>P.toLowerCase().includes(L.toLowerCase())||L.toLowerCase().includes(P.toLowerCase())))})),s.dateRange!=="all"){const k=new Date;b=b.filter(O=>{const L=new Date(O.event_date);switch(s.dateRange){case"today":return L.getDate()===k.getDate()&&L.getMonth()===k.getMonth()&&L.getFullYear()===k.getFullYear();case"week":{const P=new Date(k);return P.setDate(k.getDate()+7),L>=k&&L<=P}case"month":{const P=new Date(k);return P.setMonth(k.getMonth()+1),L>=k&&L<=P}default:return!0}})}}o(b)}catch(w){console.error("Error fetching events:",w)}finally{u(!1)}},x=async w=>{if(f)try{const{data:_}=await U.from("event_likes").select("id").eq("event_id",w).eq("user_id",f.id).maybeSingle();_?await U.from("event_likes").delete().eq("id",_.id):await U.from("event_likes").insert({event_id:w,user_id:f.id}),o(j=>j.map(N=>N.id===w?{...N,is_liked:!N.is_liked,likes_count:N.is_liked?(N.likes_count||0)-1:(N.likes_count||0)+1}:N))}catch(_){console.error("Error toggling like:",_)}};return v.useEffect(()=>{p()},[f,e,t,r,s]),v.useEffect(()=>{const w=U.channel("realtime-organizer-profile-events").on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles"},_=>{const j=_.new;o(N=>N.map(C=>{var T,E,S;return((T=C.organizer)==null?void 0:T.user_id)===j.user_id?{...C,organizer:{...C.organizer,profile:{...C.organizer.profile||{},display_name:j.display_name??((E=C.organizer.profile)==null?void 0:E.display_name),avatar_url:j.avatar_url??((S=C.organizer.profile)==null?void 0:S.avatar_url)}}}:C}))}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"organizers"},_=>{const j=_.new;o(N=>N.map(C=>{var T,E;return((T=C.organizer)==null?void 0:T.id)===j.id?{...C,organizer:{...C.organizer,page_title:j.page_title??C.organizer.page_title,avatar_url:j.avatar_url??C.organizer.avatar_url,profile:{...C.organizer.profile||{},avatar_url:j.avatar_url??((E=C.organizer.profile)==null?void 0:E.avatar_url)}}}:C}))}).subscribe();return()=>{U.removeChannel(w)}},[]),v.useEffect(()=>{const w=U.channel("realtime-event-registrations").on("postgres_changes",{event:"INSERT",schema:"public",table:"event_registrations"},async _=>{const N=_.new.event_id,{count:C}=await U.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",N),{count:T}=await U.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",N).eq("attendance_confirmed",!0),{data:E}=await U.from("event_registrations").select("user_id").eq("event_id",N),S=new Set((E==null?void 0:E.map(b=>b.user_id))||[]).size;o(b=>b.map(k=>k.id===N?{...k,registrations_count:C||0,confirmed_attendees_count:T||0,unique_attendees_count:S||0}:k))}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"event_registrations"},async _=>{const N=_.new.event_id,{count:C}=await U.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",N),{count:T}=await U.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",N).eq("attendance_confirmed",!0),{data:E}=await U.from("event_registrations").select("user_id").eq("event_id",N),S=new Set((E==null?void 0:E.map(b=>b.user_id))||[]).size;o(b=>b.map(k=>k.id===N?{...k,registrations_count:C||0,confirmed_attendees_count:T||0,unique_attendees_count:S||0}:k))}).subscribe();return()=>{U.removeChannel(w)}},[]),v.useEffect(()=>{const w=U.channel("realtime-new-events").on("postgres_changes",{event:"INSERT",schema:"public",table:"events"},()=>{p()}).subscribe();return()=>{U.removeChannel(w)}},[]),{events:a,loading:c,fetchEvents:p,toggleLike:x}}function St({className:e,...t}){return n.jsx("div",{className:Le("animate-pulse rounded-md bg-muted",e),...t})}const $b=e=>{const t=new Date(e),r=["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],s=["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],a=r[t.getDay()],o=t.getDate(),c=s[t.getMonth()],u=t.getHours().toString().padStart(2,"0"),f=t.getMinutes().toString().padStart(2,"0");return`${a}, ${o} ${c}, ${u}:${f}`},Vb=e=>{if(!e)return;const t=new Date(e),r=["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],s=["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],a=r[t.getDay()],o=t.getDate(),c=s[t.getMonth()],u=t.getHours().toString().padStart(2,"0"),f=t.getMinutes().toString().padStart(2,"0");return`${a}, ${o} ${c}, ${u}:${f}`};function UB({onEventClick:e,onOrganizerClick:t,userType:r="user",categoryFilter:s,searchQuery:a,userInterests:o,filters:c}){const{events:u,loading:f,toggleLike:p}=wS(s,a,o,c),x=N=>{e(N)},w=()=>{const N=new Date,C=u.filter(E=>{const S=new Date(E.event_date),b=E.end_date?new Date(E.end_date):null,k=(E.status||"").toLowerCase()==="completed"||(E.status||"").toLowerCase()==="ended";return S<=N&&!k&&(!b||b>N)});return{upcoming:u.filter(E=>{const S=new Date(E.event_date),b=(E.status||"").toLowerCase()==="completed"||(E.status||"").toLowerCase()==="ended";return S>N&&!b}),live:C}},{upcoming:_,live:j}=w();return f?n.jsx("div",{className:"space-y-6",children:[1,2,3].map(N=>n.jsxs("div",{className:"space-y-3",children:[n.jsx(St,{className:"h-4 w-32"}),n.jsx(St,{className:"h-64 w-full rounded-lg"})]},N))}):n.jsxs("div",{className:"space-y-8",children:[j.length>0&&n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4 px-1",children:" Acontecendo Agora"}),n.jsx("div",{className:"space-y-6",children:j.map(N=>{var C,T,E,S,b;return n.jsx(o0,{id:N.id,title:N.title,image:N.image_url||"",organizerName:((T=(C=N.organizer)==null?void 0:C.profile)==null?void 0:T.display_name)||((E=N.organizer)==null?void 0:E.page_title)||"Organizador",organizerAvatar:(b=(S=N.organizer)==null?void 0:S.profile)==null?void 0:b.avatar_url,date:$b(N.event_date),endDate:Vb(N.end_date),location:N.location,locationLink:N.location_link||void 0,ticketLink:N.ticket_link||void 0,estimatedAttendees:N.unique_attendees_count||0,likes:N.likes_count||0,comments:N.comments_count||0,isLiked:N.is_liked||!1,isLive:(()=>{const k=new Date(N.event_date),O=N.end_date?new Date(N.end_date):null,L=new Date;return k<=L&&(!O||O>L)})(),price:N.ticket_price||0,hasPaidTickets:N.has_paid_tickets,onClick:()=>x(N.id),onLike:()=>p(N.id),onOrganizerClick:()=>{var k;console.log("Organizador clicado:",N.organizer),t(((k=N.organizer)==null?void 0:k.id)||"")},userType:r,onRegister:()=>e("register"),onManageRegistrations:()=>e("registrations"),isPlatformEvent:N.is_platform_event||!1},N.id)})})]}),_.length>0&&n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4 px-1",children:" Prximos Eventos"}),n.jsx("div",{className:"space-y-6",children:_.map(N=>{var C,T,E,S,b;return n.jsx(o0,{id:N.id,title:N.title,image:N.image_url||"",organizerName:((T=(C=N.organizer)==null?void 0:C.profile)==null?void 0:T.display_name)||((E=N.organizer)==null?void 0:E.page_title)||"Organizador",organizerAvatar:(b=(S=N.organizer)==null?void 0:S.profile)==null?void 0:b.avatar_url,date:$b(N.event_date),endDate:Vb(N.end_date),location:N.location,locationLink:N.location_link||void 0,ticketLink:N.ticket_link||void 0,estimatedAttendees:N.unique_attendees_count||0,likes:N.likes_count||0,comments:N.comments_count||0,isLiked:N.is_liked||!1,isLive:!1,price:N.ticket_price||0,hasPaidTickets:N.has_paid_tickets,onClick:()=>x(N.id),onLike:()=>p(N.id),onOrganizerClick:()=>{var k;console.log("Organizador clicado:",N.organizer),t(((k=N.organizer)==null?void 0:k.id)||"")},userType:r,onRegister:()=>e("register"),onManageRegistrations:()=>e("registrations"),isPlatformEvent:N.is_platform_event||!1},N.id)})})]}),u.length===0&&n.jsx("div",{className:"text-center py-12",children:n.jsx("p",{className:"text-muted-foreground",children:"Nenhum evento encontrado"})})]})}function ti(){const{user:e}=bt(),[t,r]=v.useState(null),[s,a]=v.useState([]),[o,c]=v.useState([]),[u,f]=v.useState(!0);v.useEffect(()=>{e&&p()},[e]);const p=async()=>{if(e)try{f(!0);const{data:E,error:S}=await U.from("organizers").select("*").eq("user_id",e.id).maybeSingle();if(S&&S.code!=="PGRST116")throw S;if(!E){f(!1);return}r(E);const{data:b,error:k}=await U.from("events").select(`
          *,
          ticket_types!left(id, price)
        `).eq("organizer_id",E.id).order("event_date",{ascending:!0});a((b==null?void 0:b.map(P=>({...P,status:P.status,form_fields:P.form_fields||[],has_paid_tickets:Array.isArray(P.ticket_types)&&P.ticket_types.length>0&&P.ticket_types.some(M=>M.price>0)})))||[]);const{data:O,error:L}=await U.from("custom_links").select("*").eq("organizer_id",E.id).order("sort_order",{ascending:!0});if(L)throw L;c(O||[])}catch(E){console.error("Error fetching organizer data:",E),X.error("Erro ao carregar dados do organizador")}finally{f(!1)}};return{organizerData:t,events:s,customLinks:o,loading:u,updateOrganizerProfile:async E=>{if(t)try{const{error:S}=await U.from("organizers").update(E).eq("id",t.id);if(S)throw S.code==="23505"&&S.message.includes("username")&&X.error("Este username j est em uso. Escolha outro."),S;r(b=>b?{...b,...E}:null),X.success("Perfil atualizado com sucesso!")}catch(S){throw console.error("Error updating organizer profile:",S),S.message.includes("username")||X.error("Erro ao atualizar perfil"),S}},createEvent:async E=>{if(t)try{const{data:S,error:b}=await U.from("events").insert([{...E,organizer_id:t.id,current_attendees:0}]).select().single();if(b)throw b;return a(k=>[...k,{...S,status:S.status,form_fields:S.form_fields||[]}]),X.success("Evento criado com sucesso!"),S}catch(S){console.error("Error creating event:",S),X.error("Erro ao criar evento")}},updateEvent:async(E,S)=>{try{const{error:b}=await U.from("events").update(S).eq("id",E);if(b)throw b;a(k=>k.map(O=>O.id===E?{...O,...S}:O)),X.success("Evento atualizado com sucesso!")}catch(b){console.error("Error updating event:",b),X.error("Erro ao atualizar evento")}},deleteEvent:async E=>{try{const{error:S}=await U.from("events").delete().eq("id",E);if(S)throw S;a(b=>b.filter(k=>k.id!==E)),X.success("Evento excludo com sucesso!")}catch(S){console.error("Error deleting event:",S),X.error("Erro ao excluir evento")}},addCustomLink:async E=>{if(t)try{const S=Math.max(...o.map(O=>O.sort_order),-1),{data:b,error:k}=await U.from("custom_links").insert({...E,organizer_id:t.id,sort_order:S+1}).select().single();if(k)throw k;return c(O=>[...O,b]),X.success("Link adicionado com sucesso!"),b}catch(S){console.error("Error adding custom link:",S),X.error("Erro ao adicionar link")}},updateCustomLink:async(E,S)=>{try{const{error:b}=await U.from("custom_links").update(S).eq("id",E);if(b)throw b;c(k=>k.map(O=>O.id===E?{...O,...S}:O)),X.success("Link atualizado com sucesso!")}catch(b){console.error("Error updating custom link:",b),X.error("Erro ao atualizar link")}},deleteCustomLink:async E=>{try{const{error:S}=await U.from("custom_links").delete().eq("id",E);if(S)throw S;c(b=>b.filter(k=>k.id!==E)),X.success("Link excludo com sucesso!")}catch(S){console.error("Error deleting custom link:",S),X.error("Erro ao excluir link")}},refetch:p}}function $B({organizersWithStories:e,onOrganizerClick:t,onCreateStory:r,uploadingStory:s=!1}){const{organizerData:a}=ti(),{user:o}=bt(),c=!!a;return n.jsx("div",{className:"border-b border-border bg-background",children:n.jsx("div",{className:"max-w-md mx-auto px-4",children:n.jsxs("div",{className:"flex gap-4 overflow-x-auto py-3 scrollbar-hide",children:[c&&r&&n.jsxs("button",{onClick:s?void 0:r,className:"flex-shrink-0 flex flex-col items-center gap-2 group hover-scale",disabled:s,children:[n.jsxs("div",{className:"relative",children:[n.jsxs($t,{className:"h-16 w-16 ring-2 ring-background",children:[n.jsx(Kt,{src:a.avatar_url||void 0}),n.jsx(Vt,{className:"bg-primary text-primary-foreground",children:a.page_title.charAt(0).toUpperCase()})]}),s?n.jsx("div",{className:"absolute inset-0 bg-black/60 rounded-full flex items-center justify-center",children:n.jsx("div",{className:"h-8 w-8 border-2 border-white border-t-transparent rounded-full animate-spin"})}):n.jsx("div",{className:"absolute -bottom-1 -right-1 h-6 w-6 bg-primary rounded-full flex items-center justify-center ring-2 ring-background group-hover:scale-110 transition-transform",children:n.jsx(Uc,{className:"h-4 w-4 text-primary-foreground"})})]}),n.jsx("span",{className:"text-xs text-muted-foreground max-w-[64px] truncate story-link",children:s?"Enviando...":"Seu Story"})]}),e.map(u=>n.jsxs("button",{onClick:()=>t(u),className:"flex-shrink-0 flex flex-col items-center gap-2 group hover-scale",children:[n.jsx("div",{className:"relative",children:n.jsx("div",{className:`h-16 w-16 rounded-full p-[2px] ${u.has_unviewed?"bg-gradient-to-tr from-yellow-400 via-red-500 to-pink-500":"bg-muted"}`,children:n.jsxs($t,{className:"h-full w-full ring-2 ring-background",children:[n.jsx(Kt,{src:u.avatar_url||void 0}),n.jsx(Vt,{className:"bg-surface",children:u.page_title.charAt(0).toUpperCase()})]})})}),n.jsx("span",{className:"text-xs text-foreground max-w-[64px] truncate group-hover:text-primary transition-colors story-link",children:u.page_title})]},u.id)),e.length===0&&!c&&n.jsx("div",{className:"flex items-center justify-center w-full py-4",children:n.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhum story disponvel no momento"})})]})})})}function fv({open:e,onClose:t,organizer:r,initialStoryIndex:s=0,onLike:a,onDelete:o,onMarkAsViewed:c}){const[u,f]=v.useState(s),[p,x]=v.useState(0),{organizerData:w}=ti(),_=r.stories[u],j=!!w&&w.id===r.id,N=(_==null?void 0:_.media_type)==="video"?1e4:5e3;v.useEffect(()=>{f(s),x(0)},[s,e]),v.useEffect(()=>{if(!e||!_)return;c(_.id);const b=setInterval(()=>{x(k=>k>=100?u<r.stories.length-1?(f(O=>O+1),0):(t(),100):k+100/(N/100))},100);return()=>clearInterval(b)},[e,u,_,N]);const C=()=>{u>0&&(f(u-1),x(0))},T=()=>{u<r.stories.length-1?(f(u+1),x(0)):t()},E=()=>{a(_.id)},S=()=>{o&&window.confirm("Deseja excluir este story?")&&(o(_.id),u<r.stories.length-1?T():u>0?C():t())};return _?n.jsx(Ut,{open:e,onOpenChange:t,children:n.jsx(Bt,{className:"max-w-md h-[90vh] p-0 bg-black border-none",children:n.jsxs("div",{className:"relative h-full flex flex-col",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 z-20 flex gap-1 p-2",children:r.stories.map((b,k)=>n.jsx("div",{className:"flex-1 h-1 bg-white/30 rounded-full overflow-hidden",children:n.jsx("div",{className:Le("h-full bg-white transition-all duration-100",k<u&&"w-full",k===u&&`w-[${p}%]`,k>u&&"w-0"),style:k===u?{width:`${p}%`}:void 0})},k))}),n.jsxs("div",{className:"absolute top-4 left-0 right-0 z-20 flex items-center justify-between px-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs($t,{className:"h-8 w-8 ring-2 ring-white",children:[n.jsx(Kt,{src:r.avatar_url||void 0}),n.jsx(Vt,{className:"bg-primary text-primary-foreground text-xs",children:r.page_title.charAt(0).toUpperCase()})]}),n.jsx("span",{className:"text-white font-medium text-sm",children:r.page_title}),n.jsx("span",{className:"text-white/70 text-xs",children:new Date(_.created_at).toLocaleDateString("pt-BR")})]}),n.jsx(K,{variant:"ghost",size:"icon",onClick:t,className:"text-white hover:bg-white/20",children:n.jsx(sr,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"flex-1 flex items-center justify-center relative",children:[n.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1/3 cursor-pointer z-10",onClick:C}),n.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1/3 cursor-pointer z-10",onClick:T}),_.media_type==="video"?n.jsx("video",{src:_.media_url,className:"w-full h-full object-contain",autoPlay:!0,playsInline:!0,loop:!1,controls:!1}):n.jsx("img",{src:_.media_url,alt:"Story",className:"w-full h-full object-contain"})]}),n.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-20 p-4 bg-gradient-to-t from-black/80 to-transparent",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-1 text-white",children:[n.jsx(Go,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:_.views_count||0})]}),n.jsxs("div",{className:"flex items-center gap-1 text-white",children:[n.jsx(Qa,{className:Le("h-4 w-4",_.is_liked&&"fill-red-500 text-red-500")}),n.jsx("span",{className:"text-sm",children:_.likes_count||0})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[!j&&n.jsx(K,{variant:"ghost",size:"icon",onClick:E,className:"text-white hover:bg-white/20",children:n.jsx(Qa,{className:Le("h-5 w-5",_.is_liked&&"fill-red-500 text-red-500")})}),j&&n.jsx(K,{variant:"ghost",size:"icon",onClick:S,className:"text-white hover:bg-red-500/20",children:n.jsx(Gn,{className:"h-5 w-5"})})]})]}),n.jsxs("div",{className:"flex items-center justify-center gap-4 mt-2",children:[u>0&&n.jsxs(K,{variant:"ghost",size:"sm",onClick:C,className:"text-white/70 hover:text-white hover:bg-white/10",children:[n.jsx(A1,{className:"h-4 w-4 mr-1"}),"Anterior"]}),u<r.stories.length-1&&n.jsxs(K,{variant:"ghost",size:"sm",onClick:T,className:"text-white/70 hover:text-white hover:bg-white/10",children:["Prximo",n.jsx(Iu,{className:"h-4 w-4 ml-1"})]})]})]})]})})}):null}function VB({open:e,onClose:t,onUpload:r}){const[s,a]=v.useState(!1),[o,c]=v.useState(null),[u,f]=v.useState("user"),[p,x]=v.useState(null),[w,_]=v.useState("image"),[j,N]=v.useState(!1),C=v.useRef(null),T=v.useRef(null);v.useEffect(()=>{o&&C.current&&s&&(C.current.srcObject=o,C.current.play().catch(M=>{console.error("Error playing video:",M)}))},[o,s]),v.useEffect(()=>{e||(o&&(o.getTracks().forEach(M=>M.stop()),c(null)),a(!1),x(null))},[e,o]),v.useEffect(()=>()=>{o&&o.getTracks().forEach(M=>M.stop())},[o]);const E=async()=>{try{const M=await navigator.mediaDevices.getUserMedia({video:{facingMode:u},audio:!1});c(M),a(!0)}catch(M){console.error("Error accessing camera:",M),X.error("Erro ao acessar a cmera")}},S=async()=>{o&&o.getTracks().forEach(R=>R.stop());const M=u==="user"?"environment":"user";f(M);try{const R=await navigator.mediaDevices.getUserMedia({video:{facingMode:M},audio:!1});c(R)}catch(R){console.error("Error switching camera:",R),X.error("Erro ao trocar cmera")}},b=()=>{if(!C.current||!o)return;const M=document.createElement("canvas");M.width=C.current.videoWidth,M.height=C.current.videoHeight;const R=M.getContext("2d");if(R){R.drawImage(C.current,0,0);const $=M.toDataURL("image/jpeg",.9);x($),_("image")}},k=async M=>{var Y;const R=(Y=M.target.files)==null?void 0:Y[0];if(!R)return;if(!R.type.startsWith("image/")&&!R.type.startsWith("video/")){X.error("Por favor, selecione uma imagem ou vdeo");return}if(R.size>50*1024*1024){X.error("Arquivo muito grande. Mximo 50MB");return}const $=new FileReader;$.onload=z=>{var q;x((q=z.target)==null?void 0:q.result),_(R.type.startsWith("video/")?"video":"image")},$.readAsDataURL(R)},O=()=>{if(p)try{fetch(p).then(M=>M.blob()).then(M=>{const R=new File([M],`story-${Date.now()}.${w==="video"?"mp4":"jpg"}`,{type:w==="video"?"video/mp4":"image/jpeg"});r(R),P()}).catch(M=>{console.error("Error preparing story:",M),X.error("Erro ao preparar story")})}catch(M){console.error("Error uploading story:",M),X.error("Erro ao publicar story")}},L=()=>{x(null),!s&&o&&a(!0)},P=()=>{o&&(o.getTracks().forEach(M=>M.stop()),c(null)),a(!1),x(null),t()};return n.jsx(Ut,{open:e,onOpenChange:P,children:n.jsx(Bt,{className:"max-w-full sm:max-w-md w-full h-screen sm:h-[90vh] p-0 bg-black border-none overflow-hidden",children:s&&!p?n.jsxs("div",{className:"relative h-full w-full flex flex-col bg-black",children:[n.jsx("div",{className:"flex-1 relative overflow-hidden bg-black",children:n.jsx("video",{ref:C,autoPlay:!0,playsInline:!0,muted:!0,className:"absolute inset-0 w-full h-full object-cover"})}),n.jsxs("div",{className:"absolute top-safe top-4 left-0 right-0 flex justify-between items-center px-4 z-20",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:P,className:"bg-black/60 hover:bg-black/80 text-white rounded-full h-10 w-10",children:n.jsx(sr,{className:"h-5 w-5"})}),n.jsx(K,{variant:"ghost",size:"icon",onClick:S,className:"bg-black/60 hover:bg-black/80 text-white rounded-full h-10 w-10",children:n.jsx(Rj,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"absolute bottom-safe bottom-8 sm:bottom-12 left-0 right-0 flex justify-center items-center gap-6 sm:gap-8 px-4 z-20 pb-safe",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>{var M;return(M=T.current)==null?void 0:M.click()},className:"h-12 w-12 sm:h-14 sm:w-14 bg-white/20 hover:bg-white/30 text-white rounded-full flex-shrink-0",children:n.jsx(Wi,{className:"h-6 w-6"})}),n.jsx(K,{variant:"ghost",size:"icon",onClick:b,className:"h-16 w-16 sm:h-20 sm:w-20 bg-white hover:bg-white/90 rounded-full ring-4 ring-white/50 flex-shrink-0",children:n.jsx("div",{className:"h-14 w-14 sm:h-16 sm:w-16 rounded-full bg-transparent border-4 border-black"})}),n.jsx("div",{className:"h-12 w-12 sm:h-14 sm:w-14 flex-shrink-0"})]}),n.jsx("input",{ref:T,type:"file",accept:"image/*,video/*",className:"hidden",onChange:k})]}):p?n.jsxs("div",{className:"relative h-full w-full flex flex-col bg-black",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 flex justify-between items-center px-4 py-4 z-30 bg-gradient-to-b from-black/80 to-transparent",children:n.jsx(K,{variant:"ghost",size:"icon",onClick:P,className:"bg-black/60 hover:bg-black/80 text-white rounded-full h-10 w-10",children:n.jsx(sr,{className:"h-5 w-5"})})}),n.jsx("div",{className:"flex-1 flex items-center justify-center overflow-hidden pt-16 pb-32",children:w==="video"?n.jsx("video",{src:p,className:"max-h-full w-full object-contain",controls:!0,autoPlay:!0,loop:!0,playsInline:!0}):n.jsx("img",{src:p,alt:"Preview",className:"max-h-full w-full object-contain"})}),n.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-30 bg-gradient-to-t from-black via-black/90 to-transparent pt-8 pb-6 px-4",children:n.jsxs("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-3 max-w-md mx-auto",children:[n.jsxs(K,{variant:"ghost",size:"lg",onClick:L,disabled:j,className:"w-full sm:w-auto bg-white/20 hover:bg-white/30 text-white rounded-full px-8 h-14 min-w-[140px] font-semibold",children:[n.jsx(sr,{className:"h-5 w-5 mr-2"}),"Refazer"]}),n.jsxs(K,{variant:"default",size:"lg",onClick:O,disabled:j,className:"w-full sm:w-auto bg-primary hover:bg-primary/90 rounded-full px-8 h-14 min-w-[140px] font-semibold",children:[n.jsx(Xn,{className:"h-5 w-5 mr-2"}),j?"Publicando...":"Publicar"]})]})})]}):n.jsxs("div",{className:"h-full flex flex-col items-center justify-center gap-6 sm:gap-8 p-6 sm:p-8",children:[n.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white",children:"Criar Story"}),n.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4 w-full max-w-xs",children:[n.jsxs(K,{variant:"default",size:"lg",onClick:E,className:"w-full h-14 sm:h-16 text-base sm:text-lg rounded-xl",children:[n.jsx(Cn,{className:"h-5 w-5 sm:h-6 sm:w-6 mr-2 sm:mr-3"}),"Abrir Cmera"]}),n.jsxs(K,{variant:"outline",size:"lg",onClick:()=>{var M;return(M=T.current)==null?void 0:M.click()},className:"w-full h-14 sm:h-16 text-base sm:text-lg rounded-xl bg-surface border-border hover:bg-surface/80",children:[n.jsx(Wi,{className:"h-5 w-5 sm:h-6 sm:w-6 mr-2 sm:mr-3"}),"Upload"]})]}),n.jsx("input",{ref:T,type:"file",accept:"image/*,video/*",className:"hidden",onChange:k})]})})})}function mv(){const[e,t]=v.useState([]),[r,s]=v.useState(!1),[a,o]=v.useState(!1),{user:c}=bt(),u=async()=>{try{s(!0);const{data:_,error:j}=await U.from("organizer_stories").select(`
          *,
          organizer:organizers(
            id,
            page_title,
            avatar_url
          )
        `).gt("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});if(j)throw j;if(!_||_.length===0){t([]);return}let N=[],C=[];if(c){const{data:S}=await U.from("organizer_story_views").select("story_id").eq("viewer_id",c.id);N=(S==null?void 0:S.map(k=>k.story_id))||[];const{data:b}=await U.from("organizer_story_likes").select("story_id").eq("user_id",c.id);C=(b==null?void 0:b.map(k=>k.story_id))||[]}const T=await Promise.all(_.map(async S=>{const{count:b}=await U.from("organizer_story_views").select("*",{count:"exact",head:!0}).eq("story_id",S.id),{count:k}=await U.from("organizer_story_likes").select("*",{count:"exact",head:!0}).eq("story_id",S.id);return{...S,views_count:b||0,likes_count:k||0,is_viewed:N.includes(S.id),is_liked:C.includes(S.id)}})),E=new Map;T.forEach(S=>{const b=S.organizer.id;E.has(b)||E.set(b,{id:b,page_title:S.organizer.page_title,avatar_url:S.organizer.avatar_url,stories:[],has_unviewed:!1});const k=E.get(b);k.stories.push(S),S.is_viewed||(k.has_unviewed=!0)}),t(Array.from(E.values()))}catch(_){console.error("Error fetching organizer stories:",_),X.error("Erro ao carregar stories")}finally{s(!1)}},f=async(_,j)=>{if(!c)return X.error("Faa login para criar stories"),null;o(!0);try{const N=j.name.split(".").pop(),C=`organizer-stories/${_}/${Date.now()}.${N}`,{error:T}=await U.storage.from("user-uploads").upload(C,j);if(T)throw T;const{data:{publicUrl:E}}=U.storage.from("user-uploads").getPublicUrl(C),S=j.type.startsWith("video/")?"video":"image",{data:b,error:k}=await U.from("organizer_stories").insert({organizer_id:_,media_url:E,media_type:S}).select().single();if(k)throw k;return X.success("Story publicado com sucesso!"),await u(),b}catch(N){return console.error("Error creating story:",N),X.error("Erro ao criar story"),null}finally{o(!1)}},p=async _=>{if(c)try{const{error:j}=await U.from("organizer_stories").delete().eq("id",_);if(j)throw j;X.success("Story excludo com sucesso!"),await u()}catch(j){console.error("Error deleting story:",j),X.error("Erro ao excluir story")}},x=async _=>{if(c)try{const{error:j}=await U.from("organizer_story_views").insert({story_id:_,viewer_id:c.id});if(j&&!j.message.includes("duplicate"))throw j;t(N=>N.map(C=>({...C,stories:C.stories.map(T=>T.id===_?{...T,is_viewed:!0}:T),has_unviewed:C.stories.some(T=>T.id!==_&&!T.is_viewed)})))}catch(j){console.error("Error marking story as viewed:",j)}},w=async _=>{if(!c){X.error("Faa login para curtir stories");return}try{const j=e.flatMap(N=>N.stories).find(N=>N.id===_);if(!j)return;if(j.is_liked){const{error:N}=await U.from("organizer_story_likes").delete().eq("story_id",_).eq("user_id",c.id);if(N)throw N}else{const{error:N}=await U.from("organizer_story_likes").insert({story_id:_,user_id:c.id});if(N)throw N}t(N=>N.map(C=>({...C,stories:C.stories.map(T=>T.id===_?{...T,is_liked:!T.is_liked,likes_count:T.is_liked?(T.likes_count||0)-1:(T.likes_count||0)+1}:T)})))}catch(j){console.error("Error toggling like:",j),X.error("Erro ao curtir story")}};return v.useEffect(()=>{u();const _=setInterval(u,6e4);return()=>clearInterval(_)},[c]),v.useEffect(()=>{const _=U.channel("organizer-stories-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"organizer_stories"},()=>{u()}).on("postgres_changes",{event:"DELETE",schema:"public",table:"organizer_stories"},()=>{u()}).subscribe();return()=>{U.removeChannel(_)}},[]),{organizersWithStories:e,loading:r,uploadingStory:a,createStory:f,deleteStory:p,markAsViewed:x,toggleLike:w,fetchOrganizerStories:u}}function qb({onEventClick:e,onFindFriends:t,onOrganizerClick:r,onShowOrganizers:s,onStoryClick:a,userType:o}){const{profile:c}=zm(),[u]=v.useState(!0),[f,p]=v.useState(""),[x,w]=v.useState("todos"),[_,j]=v.useState([]),{organizersWithStories:N,uploadingStory:C,createStory:T,deleteStory:E,markAsViewed:S,toggleLike:b}=mv(),{organizerData:k}=ti(),[O,L]=v.useState(null),[P,M]=v.useState(!1),[R,$]=v.useState(!1),Y=H=>{L(H),M(!0)},z=()=>{$(!0)},q=H=>{k&&T(k.id,H)};v.useEffect(()=>{if(Array.isArray(c==null?void 0:c.interests)&&c.interests.length>0){j(c.interests);return}if(c!=null&&c.notes&&c.notes.includes("Interesses:")){const H=c.notes.match(/Interesses:\s*(.+)/);if(H){const re=H[1].split(",").map(ae=>ae.trim());j(re)}}},[c]);const ee=[{id:"todos",label:"Todos"},{id:"festas",label:" Festas"},{id:"shows",label:" Shows"},{id:"fitness",label:" Fitness"},{id:"igreja",label:" Igreja"},{id:"cursos",label:" Cursos"},{id:"bares",label:" Bares"},{id:"boates",label:" Boates"},{id:"esportes",label:" Esportes"}];return n.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[n.jsx(i0,{title:"Eventos",userType:o,showNotifications:!0,showLocation:!0}),n.jsx($B,{organizersWithStories:N,onOrganizerClick:Y,onCreateStory:k?z:void 0,uploadingStory:C}),n.jsxs("main",{className:"px-4 py-4 max-w-md mx-auto",children:[n.jsx("div",{className:"mb-4",children:n.jsxs("div",{className:"relative",children:[n.jsx(au,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(we,{type:"text",placeholder:"Buscar eventos...",value:f,onChange:H=>p(H.target.value),className:"pl-10"})]})}),n.jsx("div",{className:"mb-6",children:n.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:ee.map(H=>n.jsx("button",{onClick:()=>w(H.id),className:`flex-shrink-0 px-4 py-2 rounded-full border transition-all ${x===H.id?"bg-primary text-primary-foreground border-primary":"bg-surface border-border text-muted-foreground hover:text-foreground hover:border-primary/50"}`,children:n.jsx("span",{className:"text-sm font-medium",children:H.label})},H.id))})}),s&&n.jsx("div",{className:"mb-4",children:n.jsxs(K,{onClick:s,variant:"outline",className:"w-full justify-start gap-2 h-12",children:[n.jsx(D8,{className:"h-5 w-5 text-primary"}),n.jsxs("div",{className:"text-left",children:[n.jsx("p",{className:"text-sm font-medium",children:"Ver Organizadores"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Descubra os melhores da cidade"})]})]})}),u&&n.jsx("div",{className:"mb-6 p-4 bg-surface rounded-lg border border-primary/20 glow-purple cursor-pointer transition-all hover:bg-surface/80",onClick:()=>e("live-events"),children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-3 w-3 bg-destructive rounded-full animate-pulse"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:"Evento acontecendo agora!"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Clique aqui e saiba todos eventos que esto rolando na cidade"})]})]})}),_.length>0&&x==="todos",n.jsx(UB,{onEventClick:e,onOrganizerClick:r,userType:o,categoryFilter:x,searchQuery:f,userInterests:x==="todos"?_:void 0})]}),O&&n.jsx(fv,{open:P,onClose:()=>M(!1),organizer:O,onLike:b,onDelete:(k==null?void 0:k.id)===O.id?E:void 0,onMarkAsViewed:S}),k&&n.jsx(VB,{open:R,onClose:()=>$(!1),onUpload:q})]})}const An=v.forwardRef(({className:e,...t},r)=>n.jsx("textarea",{className:Le("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));An.displayName="Textarea";var qB="Label",yS=v.forwardRef((e,t)=>n.jsx(qe.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));yS.displayName=qB;var bS=yS;const WB=Tu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),de=v.forwardRef(({className:e,...t},r)=>n.jsx(bS,{ref:r,className:Le(WB(),e),...t}));de.displayName=bS.displayName;var Ig="rovingFocusGroup.onEntryFocus",HB={bubbles:!1,cancelable:!0},$u="RovingFocusGroup",[c0,_S,GB]=Au($u),[XB,Xc]=Mr($u,[GB]),[KB,YB]=XB($u),NS=v.forwardRef((e,t)=>n.jsx(c0.Provider,{scope:e.__scopeRovingFocusGroup,children:n.jsx(c0.Slot,{scope:e.__scopeRovingFocusGroup,children:n.jsx(QB,{...e,ref:t})})}));NS.displayName=$u;var QB=v.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:s,loop:a=!1,dir:o,currentTabStopId:c,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:f,onEntryFocus:p,preventScrollOnEntryFocus:x=!1,...w}=e,_=v.useRef(null),j=tt(t,_),N=pl(o),[C,T]=Os({prop:c,defaultProp:u??null,onChange:f,caller:$u}),[E,S]=v.useState(!1),b=Er(p),k=_S(r),O=v.useRef(!1),[L,P]=v.useState(0);return v.useEffect(()=>{const M=_.current;if(M)return M.addEventListener(Ig,b),()=>M.removeEventListener(Ig,b)},[b]),n.jsx(KB,{scope:r,orientation:s,dir:N,loop:a,currentTabStopId:C,onItemFocus:v.useCallback(M=>T(M),[T]),onItemShiftTab:v.useCallback(()=>S(!0),[]),onFocusableItemAdd:v.useCallback(()=>P(M=>M+1),[]),onFocusableItemRemove:v.useCallback(()=>P(M=>M-1),[]),children:n.jsx(qe.div,{tabIndex:E||L===0?-1:0,"data-orientation":s,...w,ref:j,style:{outline:"none",...e.style},onMouseDown:Ie(e.onMouseDown,()=>{O.current=!0}),onFocus:Ie(e.onFocus,M=>{const R=!O.current;if(M.target===M.currentTarget&&R&&!E){const $=new CustomEvent(Ig,HB);if(M.currentTarget.dispatchEvent($),!$.defaultPrevented){const Y=k().filter(re=>re.focusable),z=Y.find(re=>re.active),q=Y.find(re=>re.id===C),H=[z,q,...Y].filter(Boolean).map(re=>re.ref.current);ES(H,x)}}O.current=!1}),onBlur:Ie(e.onBlur,()=>S(!1))})})}),jS="RovingFocusGroupItem",CS=v.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:s=!0,active:a=!1,tabStopId:o,children:c,...u}=e,f=un(),p=o||f,x=YB(jS,r),w=x.currentTabStopId===p,_=_S(r),{onFocusableItemAdd:j,onFocusableItemRemove:N,currentTabStopId:C}=x;return v.useEffect(()=>{if(s)return j(),()=>N()},[s,j,N]),n.jsx(c0.ItemSlot,{scope:r,id:p,focusable:s,active:a,children:n.jsx(qe.span,{tabIndex:w?0:-1,"data-orientation":x.orientation,...u,ref:t,onMouseDown:Ie(e.onMouseDown,T=>{s?x.onItemFocus(p):T.preventDefault()}),onFocus:Ie(e.onFocus,()=>x.onItemFocus(p)),onKeyDown:Ie(e.onKeyDown,T=>{if(T.key==="Tab"&&T.shiftKey){x.onItemShiftTab();return}if(T.target!==T.currentTarget)return;const E=ez(T,x.orientation,x.dir);if(E!==void 0){if(T.metaKey||T.ctrlKey||T.altKey||T.shiftKey)return;T.preventDefault();let b=_().filter(k=>k.focusable).map(k=>k.ref.current);if(E==="last")b.reverse();else if(E==="prev"||E==="next"){E==="prev"&&b.reverse();const k=b.indexOf(T.currentTarget);b=x.loop?tz(b,k+1):b.slice(k+1)}setTimeout(()=>ES(b))}}),children:typeof c=="function"?c({isCurrentTabStop:w,hasTabStop:C!=null}):c})})});CS.displayName=jS;var ZB={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function JB(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ez(e,t,r){const s=JB(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return ZB[s]}function ES(e,t=!1){const r=document.activeElement;for(const s of e)if(s===r||(s.focus({preventScroll:t}),document.activeElement!==r))return}function tz(e,t){return e.map((r,s)=>e[(t+s)%e.length])}var pv=NS,gv=CS,Ym="Tabs",[rz]=Mr(Ym,[Xc]),SS=Xc(),[nz,xv]=rz(Ym),AS=v.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,onValueChange:a,defaultValue:o,orientation:c="horizontal",dir:u,activationMode:f="automatic",...p}=e,x=pl(u),[w,_]=Os({prop:s,onChange:a,defaultProp:o??"",caller:Ym});return n.jsx(nz,{scope:r,baseId:un(),value:w,onValueChange:_,orientation:c,dir:x,activationMode:f,children:n.jsx(qe.div,{dir:x,"data-orientation":c,...p,ref:t})})});AS.displayName=Ym;var kS="TabsList",TS=v.forwardRef((e,t)=>{const{__scopeTabs:r,loop:s=!0,...a}=e,o=xv(kS,r),c=SS(r);return n.jsx(pv,{asChild:!0,...c,orientation:o.orientation,dir:o.dir,loop:s,children:n.jsx(qe.div,{role:"tablist","aria-orientation":o.orientation,...a,ref:t})})});TS.displayName=kS;var IS="TabsTrigger",RS=v.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,disabled:a=!1,...o}=e,c=xv(IS,r),u=SS(r),f=DS(c.baseId,s),p=MS(c.baseId,s),x=s===c.value;return n.jsx(gv,{asChild:!0,...u,focusable:!a,active:x,children:n.jsx(qe.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":p,"data-state":x?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:f,...o,ref:t,onMouseDown:Ie(e.onMouseDown,w=>{!a&&w.button===0&&w.ctrlKey===!1?c.onValueChange(s):w.preventDefault()}),onKeyDown:Ie(e.onKeyDown,w=>{[" ","Enter"].includes(w.key)&&c.onValueChange(s)}),onFocus:Ie(e.onFocus,()=>{const w=c.activationMode!=="manual";!x&&!a&&w&&c.onValueChange(s)})})})});RS.displayName=IS;var PS="TabsContent",OS=v.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,forceMount:a,children:o,...c}=e,u=xv(PS,r),f=DS(u.baseId,s),p=MS(u.baseId,s),x=s===u.value,w=v.useRef(x);return v.useEffect(()=>{const _=requestAnimationFrame(()=>w.current=!1);return()=>cancelAnimationFrame(_)},[]),n.jsx(Hr,{present:a||x,children:({present:_})=>n.jsx(qe.div,{"data-state":x?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":f,hidden:!_,id:p,tabIndex:0,...c,ref:t,style:{...e.style,animationDuration:w.current?"0s":void 0},children:_&&o})})});OS.displayName=PS;function DS(e,t){return`${e}-trigger-${t}`}function MS(e,t){return`${e}-content-${t}`}var sz=AS,LS=TS,FS=RS,BS=OS;const Qm=sz,Vu=v.forwardRef(({className:e,...t},r)=>n.jsx(LS,{ref:r,className:Le("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Vu.displayName=LS.displayName;const os=v.forwardRef(({className:e,...t},r)=>n.jsx(FS,{ref:r,className:Le("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));os.displayName=FS.displayName;const ls=v.forwardRef(({className:e,...t},r)=>n.jsx(BS,{ref:r,className:Le("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));ls.displayName=BS.displayName;function qu({open:e,onOpenChange:t,actionDescription:r,onSuccess:s}){const[a,o]=v.useState(!1),[c,u]=v.useState(!1),[f,p]=v.useState(""),[x,w]=v.useState(""),[_,j]=v.useState("user"),[N,C]=v.useState(0),[T,E]=v.useState(""),[S,b]=v.useState(""),[k,O]=v.useState(""),[L,P]=v.useState(""),[M,R]=v.useState(null),[$,Y]=v.useState(""),[z,q]=v.useState(""),[ee,H]=v.useState(""),[re,ae]=v.useState(""),ie=[{id:"balada",label:"Balada"},{id:"lives",label:"Lives"},{id:"encontros",label:"Encontros"},{id:"shows",label:"Shows"},{id:"festas",label:"Festas"},{id:"networking",label:"Networking"}],[te,ye]=v.useState([]),ge=async se=>{se.preventDefault(),u(!0);try{const{error:ce}=await U.auth.signInWithPassword({email:f,password:x});if(ce)throw ce;X.success("Login realizado com sucesso!"),t(!1),s&&s()}catch(ce){console.error("Login error:",ce),X.error(ce.message||"Erro ao fazer login")}finally{u(!1)}},W=se=>{var ne;const ce=(ne=se.target.files)==null?void 0:ne[0];if(ce){R(ce);const he=new FileReader;he.onloadend=()=>Y(he.result),he.readAsDataURL(ce)}},J=se=>{ye(ce=>ce.includes(se)?ce.filter(ne=>ne!==se):[...ce,se])},G=async se=>{if(se.preventDefault(),N<3){C(ce=>ce+1);return}u(!0);try{const ce=`${window.location.origin}/`,{data:ne,error:he}=await U.auth.signUp({email:S,password:L,options:{emailRedirectTo:ce,data:{display_name:T,role:_}}});if(he)throw he;if(!ne.session){const{error:Be}=await U.auth.signInWithPassword({email:S,password:L});if(Be)throw Be}let Ae=null;const Pe=(await U.auth.getUser()).data.user;if(Pe&&M){const Be=M.name.split(".").pop(),Ee=`${Pe.id}/avatar.${Be}`,{error:ue}=await U.storage.from("user-uploads").upload(Ee,M,{upsert:!0});if(!ue){const{data:Fe}=U.storage.from("user-uploads").getPublicUrl(Ee);Ae=Fe.publicUrl}}Pe&&await U.from("profiles").update({display_name:T,username:k||null,avatar_url:Ae,bio:z||null,instagram_url:ee||null,phone:re||null,notes:te.length?`Interesses: ${te.join(", ")}`:null}).eq("user_id",Pe.id),X.success("Conta criada com sucesso!"),t(!1),s==null||s()}catch(ce){console.error("Signup error:",ce),X.error(ce.message||"Erro ao criar conta")}finally{u(!1)}};return n.jsx(Ut,{open:e,onOpenChange:t,children:n.jsxs(Bt,{className:"sm:max-w-md",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Bem-vindo!"}),n.jsx(is,{children:r||"Faa login ou crie uma conta para continuar"})]}),n.jsxs(Qm,{defaultValue:"login",className:"w-full",children:[n.jsxs(Vu,{className:"grid w-full grid-cols-2",children:[n.jsx(os,{value:"login",children:"Entrar"}),n.jsx(os,{value:"signup",children:"Criar Conta"})]}),n.jsx(ls,{value:"login",children:n.jsxs("form",{onSubmit:ge,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"login-email",children:"Email"}),n.jsx(we,{id:"login-email",type:"email",placeholder:"seu@email.com",value:f,onChange:se=>p(se.target.value),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"login-password",children:"Senha"}),n.jsxs("div",{className:"relative",children:[n.jsx(we,{id:"login-password",type:a?"text":"password",placeholder:"",value:x,onChange:se=>w(se.target.value),required:!0}),n.jsx(K,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3",onClick:()=>o(!a),children:a?n.jsx(Rx,{className:"h-4 w-4"}):n.jsx(Go,{className:"h-4 w-4"})})]})]}),n.jsx(K,{type:"submit",className:"w-full",disabled:c,children:c?"Entrando...":"Entrar"})]})}),n.jsx(ls,{value:"signup",children:n.jsxs("form",{onSubmit:G,className:"space-y-4",children:[N===0&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"signup-name",children:"Nome"}),n.jsx(we,{id:"signup-name",type:"text",placeholder:"Seu nome",value:T,onChange:se=>E(se.target.value),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"signup-email",children:"Email"}),n.jsx(we,{id:"signup-email",type:"email",placeholder:"seu@email.com",value:S,onChange:se=>b(se.target.value),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Tipo de conta"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(K,{type:"button",variant:_==="user"?"default":"outline",className:"flex-1",onClick:()=>j("user"),children:"Participante"}),n.jsx(K,{type:"button",variant:_==="organizer"?"default":"outline",className:"flex-1",onClick:()=>j("organizer"),children:"Organizador"})]})]})]}),N===1&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"signup-username",children:"Username"}),n.jsx(we,{id:"signup-username",type:"text",placeholder:"seu_username",value:k,onChange:se=>O(se.target.value.toLowerCase())}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Use letras minsculas, nmeros e _"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Foto de perfil (opcional)"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx($t,{className:"h-16 w-16",children:$?n.jsx(Kt,{src:$}):n.jsx(Vt,{children:"U"})}),n.jsxs("div",{children:[n.jsx("input",{id:"avatar-input",type:"file",accept:"image/*",className:"hidden",onChange:W}),n.jsx(de,{htmlFor:"avatar-input",children:n.jsx(K,{type:"button",variant:"outline",size:"sm",asChild:!0,children:n.jsxs("span",{className:"cursor-pointer",children:[n.jsx(Ms,{className:"h-4 w-4 mr-2"}),"Selecionar foto"]})})})]})]})]})]}),N===2&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"signup-bio",children:"Bio (opcional)"}),n.jsx(An,{id:"signup-bio",placeholder:"Fale um pouco sobre voc",value:z,onChange:se=>q(se.target.value)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"signup-insta",children:"Instagram (opcional)"}),n.jsx(we,{id:"signup-insta",placeholder:"https://instagram.com/usuario",value:ee,onChange:se=>H(se.target.value)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"signup-whats",children:"WhatsApp (opcional)"}),n.jsx(we,{id:"signup-whats",placeholder:"https://wa.me/5511999999999",value:re,onChange:se=>ae(se.target.value)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Interesses (opcional)"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:ie.map(se=>n.jsx(dt,{variant:te.includes(se.id)?"default":"outline",className:"cursor-pointer",onClick:()=>J(se.id),children:se.label},se.id))})]})]}),N===3&&n.jsx(n.Fragment,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"signup-password",children:"Senha"}),n.jsxs("div",{className:"relative",children:[n.jsx(we,{id:"signup-password",type:a?"text":"password",placeholder:"",value:L,onChange:se=>P(se.target.value),required:!0,minLength:6}),n.jsx(K,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3",onClick:()=>o(!a),children:a?n.jsx(Rx,{className:"h-4 w-4"}):n.jsx(Go,{className:"h-4 w-4"})})]})]})}),n.jsxs("div",{className:"flex gap-2",children:[N>0&&n.jsx(K,{type:"button",variant:"outline",onClick:()=>C(se=>se-1),children:"Voltar"}),n.jsx(K,{type:"submit",className:"flex-1",disabled:c,children:c?"Carregando...":N<3?"Prximo":"Finalizar Cadastro"})]})]})})]})]})})}var az="Separator",Wb="horizontal",iz=["horizontal","vertical"],zS=v.forwardRef((e,t)=>{const{decorative:r,orientation:s=Wb,...a}=e,o=oz(s)?s:Wb,u=r?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return n.jsx(qe.div,{"data-orientation":o,...u,...a,ref:t})});zS.displayName=az;function oz(e){return iz.includes(e)}var US=zS;const ia=v.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...s},a)=>n.jsx(US,{ref:a,decorative:r,orientation:t,className:Le("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...s}));ia.displayName=US.displayName;function lz({open:e,onOpenChange:t,ticketTypes:r,ticketSettings:s,eventId:a,eventTitle:o}){const[c,u]=v.useState({}),[f,p]=v.useState(!1),x=(N,C)=>{const T=r.find(O=>O.id===N);if(!T)return;const E=c[N]||0,S=T.max_quantity_per_purchase||10,b=Math.max(0,Math.min(S,E+C)),k=T.quantity-(T.quantity_sold||0);if(b>k){X.error(`Apenas ${k} ingressos disponveis`);return}u(O=>({...O,[N]:b}))},w=()=>{let N=0,C=0;Object.entries(c).forEach(([b,k])=>{const O=r.find(L=>L.id===b);O&&k>0&&(N+=O.price*k,C+=k)});const T=N*(s.platform_fee_percentage/100),E=N*(s.payment_processing_fee_percentage/100)+s.payment_processing_fee_fixed*C,S=s.fee_payer==="buyer"?N+T+E:N;return{subtotal:N,platformFee:T,processingFee:E,total:S,totalQuantity:C}},_=async()=>{try{p(!0);const N=Object.keys(c).filter(b=>c[b]>0);if(N.length===0){X.error("Selecione pelo menos um ingresso");return}const C=N[0],T=c[C],{data:E,error:S}=await U.functions.invoke("create-ticket-checkout",{body:{ticketTypeId:C,quantity:T,eventId:a}});if(S)throw S;if(E!=null&&E.url)window.open(E.url,"_blank"),t(!1),X.success("Redirecionando para o checkout...");else throw new Error("URL de checkout no recebida")}catch(N){console.error("Erro ao criar checkout:",N),X.error("Erro ao processar compra. Tente novamente.")}finally{p(!1)}},j=w();return n.jsx(Ut,{open:e,onOpenChange:t,children:n.jsxs(Bt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(xr,{children:[n.jsx(vr,{className:"text-2xl",children:"Comprar Ingressos"}),n.jsx("p",{className:"text-muted-foreground",children:o})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"space-y-4",children:r.map(N=>{const C=N.quantity-(N.quantity_sold||0),T=c[N.id]||0;return n.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-lg",children:N.name}),N.description&&n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:N.description}),n.jsxs(dt,{variant:"secondary",className:"mt-2",children:[C," disponveis"]})]}),n.jsx("div",{className:"text-right",children:n.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["R$ ",N.price.toFixed(2)]})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(K,{variant:"outline",size:"icon",onClick:()=>x(N.id,-1),disabled:T===0||f,children:n.jsx(B8,{className:"h-4 w-4"})}),n.jsx("span",{className:"text-lg font-medium w-12 text-center",children:T}),n.jsx(K,{variant:"outline",size:"icon",onClick:()=>x(N.id,1),disabled:T>=C||f,children:n.jsx(Uc,{className:"h-4 w-4"})})]}),T>0&&n.jsxs("p",{className:"text-lg font-semibold",children:["R$ ",(N.price*T).toFixed(2)]})]})]},N.id)})}),j.totalQuantity>0&&n.jsxs(n.Fragment,{children:[n.jsx(ia,{}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{className:"text-muted-foreground",children:["Subtotal (",j.totalQuantity," ingresso",j.totalQuantity>1?"s":"",")"]}),n.jsxs("span",{children:["R$ ",j.subtotal.toFixed(2)]})]}),s.fee_payer==="buyer"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsxs("span",{className:"text-muted-foreground",children:["Taxa da plataforma (",s.platform_fee_percentage,"%)"]}),n.jsxs("span",{children:["R$ ",j.platformFee.toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Taxa de processamento"}),n.jsxs("span",{children:["R$ ",j.processingFee.toFixed(2)]})]})]}),n.jsx(ia,{}),n.jsxs("div",{className:"flex justify-between text-xl font-bold",children:[n.jsx("span",{children:"Total"}),n.jsxs("span",{className:"text-green-600",children:["R$ ",j.total.toFixed(2)]})]}),s.fee_payer==="organizer"&&n.jsx("p",{className:"text-xs text-muted-foreground",children:"*As taxas sero deduzidas do valor repassado ao organizador"})]}),n.jsxs(K,{className:"w-full bg-green-600 hover:bg-green-700 text-white",size:"lg",onClick:_,disabled:f,children:[n.jsx(H8,{className:"h-5 w-5 mr-2"}),f?"Processando...":"Finalizar Compra"]})]})]})]})})}function cz(e){var _,j;const[t,r]=v.useState(null),[s,a]=v.useState(!1),[o,c]=v.useState([]),{user:u}=bt(),f=async()=>{if(e)try{a(!0);let N=null,C=!1,T=!1,E=null;const{data:S,error:b}=await U.from("events").select(`
          *,
          organizer:organizers!inner(
            id,
            page_title,
            user_id,
            avatar_url
          )
        `).eq("id",e).maybeSingle();if(S)N=S;else{const{data:q,error:ee}=await U.from("platform_events").select("*").eq("id",e).maybeSingle();if(q)if(q.claimed_by_organizer_id){const{data:H}=await U.from("events").select(`
                *,
                organizer:organizers!inner(
                  id,
                  page_title,
                  user_id,
                  avatar_url
                )
              `).eq("organizer_id",q.claimed_by_organizer_id).eq("title",q.title).eq("event_date",q.event_date).maybeSingle();H?(N=H,C=!1):(N={...q,is_platform_event:!0,organizer_id:"platform",organizer:{id:"platform",page_title:q.organizer_name,user_id:"platform",avatar_url:null,profile:{display_name:q.organizer_name,avatar_url:null}},current_attendees:0,is_live:!1},C=!0)}else N={...q,is_platform_event:!0,organizer_id:"platform",organizer:{id:"platform",page_title:q.organizer_name,user_id:"platform",avatar_url:null,profile:{display_name:q.organizer_name,avatar_url:null}},current_attendees:0,is_live:!1},C=!0}if(!N)return;let k=null;if(!C){const{data:q}=await U.from("profiles").select("display_name, avatar_url, notes").eq("user_id",N.organizer.user_id).maybeSingle();k=q}let O=0;if(!C){const{count:q}=await U.from("event_likes").select("*",{count:"exact",head:!0}).eq("event_id",e);O=q||0}let L=0;if(!C){const{count:q}=await U.from("event_comments").select("*",{count:"exact",head:!0}).eq("event_id",e);L=q||0}let P=0,M=0,R=0;if(!C){const{count:q}=await U.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",e),{count:ee}=await U.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",e).eq("attendance_confirmed",!0),{data:H}=await U.from("event_registrations").select("user_id").eq("event_id",e);P=q||0,M=ee||0,R=new Set((H==null?void 0:H.map(re=>re.user_id))||[]).size}let $=!1;if(!C&&u){const{data:q}=await U.from("event_likes").select("id").eq("event_id",e).eq("user_id",u.id).maybeSingle();$=!!q}let Y=[],z=!1;if(!C&&(N!=null&&N.has_platform_tickets)){const{data:q}=await U.from("ticket_types").select("*").eq("event_id",e).eq("is_active",!0).order("sort_order",{ascending:!0});q&&q.length>0&&(Y=q,z=!0)}r({...N,is_platform_event:C,organizer:C?N.organizer:{...N.organizer,profile:{display_name:k==null?void 0:k.display_name,avatar_url:N.organizer.avatar_url||(k==null?void 0:k.avatar_url),notes:k==null?void 0:k.notes}},likes_count:O,comments_count:L,is_liked:$,registrations_count:P,confirmed_attendees_count:M,unique_attendees_count:R,has_platform_tickets:z,ticket_types:Y}),C||p()}catch(N){console.error("Error fetching event details:",N)}finally{a(!1)}},p=async()=>{if(e)try{const{data:N}=await U.from("event_comments").select(`
          id,
          content,
          created_at,
          user_id
        `).eq("event_id",e).order("created_at",{ascending:!1}).limit(10),C=await Promise.all((N||[]).map(async T=>{const{data:E}=await U.from("profiles").select("display_name, avatar_url").eq("user_id",T.user_id).maybeSingle();return{...T,user:E}}));c(C)}catch(N){console.error("Error fetching event details:",N)}finally{a(!1)}},x=async()=>{if(!(!u||!e))try{const{data:N}=await U.from("event_likes").select("id").eq("event_id",e).eq("user_id",u.id).maybeSingle();N?await U.from("event_likes").delete().eq("id",N.id):await U.from("event_likes").insert({event_id:e,user_id:u.id}),t&&r(C=>C?{...C,is_liked:!C.is_liked,likes_count:C.is_liked?(C.likes_count||0)-1:(C.likes_count||0)+1}:null)}catch(N){console.error("Error toggling like:",N)}},w=async N=>{if(!(!u||!e))try{const{data:C,error:T}=await U.from("event_comments").insert({event_id:e,user_id:u.id,content:N}).select().single();if(T)throw T;const{data:E}=await U.from("profiles").select("display_name, avatar_url").eq("user_id",u.id).maybeSingle(),S={...C,user:E};c(b=>[S,...b]),t&&r(b=>b?{...b,comments_count:(b.comments_count||0)+1}:null)}catch(C){console.error("Error adding comment:",C)}};return v.useEffect(()=>{f()},[e,u]),v.useEffect(()=>{var C,T;if(!t)return;const N=U.channel("realtime-organizer-profile-eventdetails").on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles",filter:`user_id=eq.${(C=t.organizer)==null?void 0:C.user_id}`},E=>{const S=E.new;r(b=>{var k,O,L,P,M,R,$;return b&&{...b,organizer:{...b.organizer,profile:{...((k=b.organizer)==null?void 0:k.profile)||{},display_name:S.display_name??((L=(O=b.organizer)==null?void 0:O.profile)==null?void 0:L.display_name),avatar_url:S.avatar_url??((M=(P=b.organizer)==null?void 0:P.profile)==null?void 0:M.avatar_url),notes:($=(R=b.organizer)==null?void 0:R.profile)==null?void 0:$.notes}}}})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"organizers",filter:`id=eq.${(T=t.organizer)==null?void 0:T.id}`},E=>{const S=E.new;r(b=>{var k,O,L,P,M;return b&&{...b,organizer:{...b.organizer,page_title:S.page_title??((k=b.organizer)==null?void 0:k.page_title),avatar_url:S.avatar_url??((O=b.organizer)==null?void 0:O.avatar_url),profile:{...((L=b.organizer)==null?void 0:L.profile)||{},avatar_url:S.avatar_url??((M=(P=b.organizer)==null?void 0:P.profile)==null?void 0:M.avatar_url)}}}})}).subscribe();return()=>{U.removeChannel(N)}},[(_=t==null?void 0:t.organizer)==null?void 0:_.user_id,(j=t==null?void 0:t.organizer)==null?void 0:j.id]),v.useEffect(()=>{if(!e)return;const N=U.channel("realtime-event-registrations-details").on("postgres_changes",{event:"INSERT",schema:"public",table:"event_registrations",filter:`event_id=eq.${e}`},async()=>{const{count:C}=await U.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",e),{count:T}=await U.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",e).eq("attendance_confirmed",!0),{data:E}=await U.from("event_registrations").select("user_id").eq("event_id",e),S=new Set((E==null?void 0:E.map(b=>b.user_id))||[]).size;r(b=>b&&{...b,registrations_count:C||0,confirmed_attendees_count:T||0,unique_attendees_count:S||0})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"event_registrations",filter:`event_id=eq.${e}`},async()=>{const{count:C}=await U.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",e),{count:T}=await U.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",e).eq("attendance_confirmed",!0),{data:E}=await U.from("event_registrations").select("user_id").eq("event_id",e),S=new Set((E==null?void 0:E.map(b=>b.user_id))||[]).size;r(b=>b&&{...b,registrations_count:C||0,confirmed_attendees_count:T||0,unique_attendees_count:S||0})}).subscribe();return()=>{U.removeChannel(N)}},[e]),{event:t,loading:s,comments:o,toggleLike:x,addComment:w,fetchEventDetails:f}}function $S(e){const[t,r]=v.useState([]),[s,a]=v.useState(!1);v.useEffect(()=>{e&&o()},[e]);const o=async()=>{try{const{data:N,error:C}=await U.from("event_pixels").select("*").eq("event_id",e).eq("is_active",!0);if(C)throw C;N&&N.length>0&&(r(N),c(N)),a(!0)}catch(N){console.error("Error loading pixels:",N),a(!0)}},c=N=>{N.forEach(C=>{switch(C.platform){case"facebook":u(C.pixel_id);break;case"google_ads":f(C.pixel_id);break;case"tiktok":p(C.pixel_id);break;case"linkedin":x(C.pixel_id);break;case"twitter":w(C.pixel_id);break;case"custom":_(C.pixel_id);break}})},u=N=>{if(typeof window>"u")return;const C=document.createElement("script");C.innerHTML=`
      !function(f,b,e,v,n,t,s)
      {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};
      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
      n.queue=[];t=b.createElement(e);t.async=!0;
      t.src=v;s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s)}(window, document,'script',
      'https://connect.facebook.net/en_US/fbevents.js');
      fbq('init', '${N}');
      fbq('track', 'PageView');
    `,document.head.appendChild(C);const T=document.createElement("noscript");T.innerHTML=`<img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=${N}&ev=PageView&noscript=1"/>`,document.body.appendChild(T)},f=N=>{if(typeof window>"u")return;const C=document.createElement("script");C.async=!0,C.src=`https://www.googletagmanager.com/gtag/js?id=${N}`,document.head.appendChild(C);const T=document.createElement("script");T.innerHTML=`
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', '${N}');
    `,document.head.appendChild(T)},p=N=>{if(typeof window>"u")return;const C=document.createElement("script");C.innerHTML=`
      !function (w, d, t) {
        w.TiktokAnalyticsObject=t;var ttq=w[t]=w[t]||[];ttq.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"],ttq.setAndDefer=function(t,e){t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}};for(var i=0;i<ttq.methods.length;i++)ttq.setAndDefer(ttq,ttq.methods[i]);ttq.instance=function(t){for(var e=ttq._i[t]||[],n=0;n<ttq.methods.length;n++)ttq.setAndDefer(e,ttq.methods[n]);return e},ttq.load=function(e,n){var i="https://analytics.tiktok.com/i18n/pixel/events.js";ttq._i=ttq._i||{},ttq._i[e]=[],ttq._i[e]._u=i,ttq._t=ttq._t||{},ttq._t[e]=+new Date,ttq._o=ttq._o||{},ttq._o[e]=n||{};var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=i+"?sdkid="+e+"&lib="+t;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(o,a)};
        ttq.load('${N}');
        ttq.page();
      }(window, document, 'ttq');
    `,document.head.appendChild(C)},x=N=>{if(typeof window>"u")return;const C=document.createElement("script");C.innerHTML=`
      _linkedin_partner_id = "${N}";
      window._linkedin_data_partner_ids = window._linkedin_data_partner_ids || [];
      window._linkedin_data_partner_ids.push(_linkedin_partner_id);
    `,document.head.appendChild(C);const T=document.createElement("script");T.src="https://snap.licdn.com/li.lms-analytics/insight.min.js",T.async=!0,document.head.appendChild(T)},w=N=>{if(typeof window>"u")return;const C=document.createElement("script");C.innerHTML=`
      !function(e,t,n,s,u,a){e.twq||(s=e.twq=function(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments);
      },s.version='1.1',s.queue=[],u=t.createElement(n),u.async=!0,u.src='https://static.ads-twitter.com/uwt.js',
      a=t.getElementsByTagName(n)[0],a.parentNode.insertBefore(u,a))}(window,document,'script');
      twq('config','${N}');
    `,document.head.appendChild(C)},_=N=>{if(typeof window>"u")return;const C=document.createElement("script");C.innerHTML=N,document.head.appendChild(C)};return{pixels:t,loaded:s,trackEvent:(N,C)=>{!s||t.length===0||t.forEach(T=>{switch(T.platform){case"facebook":window.fbq&&window.fbq("track",N,C);break;case"google_ads":window.gtag&&window.gtag("event",N,C);break;case"tiktok":window.ttq&&window.ttq.track(N,C);break;case"twitter":window.twq&&window.twq("track",N,C);break}})}}}const Hb="https://meetlines.com.br";function Zm(){return Hb.trim().length>0?Hb:typeof window<"u"?window.location.origin:""}function VS({onBack:e,eventId:t,onRegister:r,onFindFriends:s,onEdit:a,onManageRegistrations:o,onViewAttendances:c}){var ze,He,Ft,pe,Je,at,it,ar,Nt,Sr,At;const{event:u,loading:f,comments:p,toggleLike:x,addComment:w}=cz(t),{user:_,userRole:j}=bt(),{trackEvent:N}=$S(t),C=_t();Kn();const[T,E]=v.useState(""),[S,b]=v.useState(!1),[k,O]=v.useState(!0),[L,P]=v.useState(!1),[M,R]=v.useState(!1),[$,Y]=v.useState(""),[z,q]=v.useState(!1),[ee,H]=v.useState(null),[re,ae]=v.useState(!1),[ie,te]=v.useState(!1),[ye,ge]=v.useState(null),W=_&&((ze=u==null?void 0:u.organizer)==null?void 0:ze.user_id)===_.id,J=(u==null?void 0:u.location_link)&&(u.location_link.includes("meet.google")||u.location_link.includes("zoom.us")||u.location_link.includes("youtube.com")||u.location_link.includes("twitch.tv")||u.location_link.includes("teams.microsoft")||u.location_link.includes("streamyard")||u.location_link.includes("jitsi"));v.useEffect(()=>{(async()=>{if(!_){q(!1);return}try{const{data:Se,error:ut}=await U.from("organizers").select("id").eq("user_id",_.id).maybeSingle();!ut&&Se&&(q(!0),H(Se.id))}catch(Se){console.error("Error checking organizer:",Se)}})()},[_]),v.useEffect(()=>{(async()=>{if(!_||!t){O(!1);return}try{const{data:Se,error:ut}=await U.from("event_registrations").select("attendance_confirmed").eq("event_id",t).eq("user_id",_.id).maybeSingle();!ut&&Se&&b(Se.attendance_confirmed||!1)}catch(Se){console.error("Error checking attendance:",Se)}finally{O(!1)}})()},[_,t]),v.useEffect(()=>{(async()=>{if(!(!(u!=null&&u.has_platform_tickets)||!t))try{const{data:Se,error:ut}=await U.from("event_ticket_settings").select("*").eq("event_id",t).maybeSingle();!ut&&Se&&ge(Se)}catch(Se){console.error("Error loading ticket settings:",Se)}})()},[u==null?void 0:u.has_platform_tickets,t]);const G=(Ve,Se)=>{if(!_){Y(`para ${Se}`),R(!0);return}Ve()},se=Ve=>{const Se=new Date(Ve),lt=["Dom","Seg","Ter","Qua","Qui","Sex","Sb"][Se.getDay()],ft=Se.getHours().toString().padStart(2,"0"),Te=Se.getMinutes().toString().padStart(2,"0");return`${lt}, ${ft}:${Te}`},ce=Ve=>{const Se=new Date,ut=new Date(Ve),lt=Se.getTime()-ut.getTime(),ft=Math.floor(lt/(1e3*60*60)),Te=Math.floor(ft/24);return Te>0?`${Te}d`:ft>0?`${ft}h`:"agora"},ne=async()=>{T.trim()&&G(async()=>{await w(T),E("")},"comentar")},he=()=>{G(()=>{x()},"curtir este evento")},Ae=async()=>{G(async()=>{var Ve;if(!(!_||!t)){P(!0);try{const{data:Se,error:ut}=await U.from("event_registrations").select("id, attendance_confirmed").eq("event_id",t).eq("user_id",_.id).maybeSingle();if(ut){console.error("Error checking registration:",ut),X.error("Erro ao verificar registro");return}if(Se){const{error:lt}=await U.from("event_registrations").update({attendance_confirmed:!0,attendance_confirmed_at:new Date().toISOString()}).eq("id",Se.id);if(lt){console.error("Error updating attendance:",lt),X.error("Erro ao confirmar presena");return}}else{const{data:lt}=await U.from("profiles").select("display_name").eq("user_id",_.id).single(),{error:ft}=await U.from("event_registrations").insert({event_id:t,user_id:_.id,user_name:(lt==null?void 0:lt.display_name)||((Ve=_.email)==null?void 0:Ve.split("@")[0])||"Usurio",user_email:_.email||"",attendance_confirmed:!0,attendance_confirmed_at:new Date().toISOString()});if(ft){console.error("Error creating registration:",ft),X.error("Erro ao confirmar presena");return}}b(!0),X.success("Presena confirmada com sucesso!"),N("CompleteRegistration",{event_name:u==null?void 0:u.title,event_id:t,value:0,currency:"BRL"})}catch(Se){console.error("Error:",Se),X.error("Erro ao confirmar presena")}finally{P(!1)}}},"confirmar presena")},Pe=async()=>{G(async()=>{if(!(!_||!t)){P(!0);try{const{error:Ve}=await U.from("event_registrations").update({attendance_confirmed:!1,attendance_confirmed_at:null}).eq("event_id",t).eq("user_id",_.id);if(Ve){console.error("Error canceling attendance:",Ve),X.error("Erro ao cancelar presena");return}b(!1),X.success("Confirmao de presena cancelada")}catch(Ve){console.error("Error:",Ve),X.error("Erro ao cancelar presena")}finally{P(!1)}}},"cancelar presena")},Be=async()=>{if(t)try{const{error:Ve}=await U.from("events").update({is_live:!1,status:"completed"}).eq("id",t);if(Ve){console.error("Error ending event:",Ve),X.error("Erro ao encerrar evento");return}X.success("Evento encerrado com sucesso!"),window.location.reload()}catch(Ve){console.error("Error:",Ve),X.error("Erro ao encerrar evento")}},Ee=()=>{G(()=>{s&&s()},"encontrar amigos")},ue=async()=>{if(!t||!u){X.error("Evento no encontrado");return}const Ve=`${Zm()}/e/${t}`;try{if(typeof navigator<"u"&&navigator.share){await navigator.share({title:u.title,text:`Confira este evento: ${u.title}`,url:Ve}),X.success("Evento compartilhado!");return}}catch{}try{if(navigator.clipboard&&window.isSecureContext){await navigator.clipboard.writeText(Ve),X.success("Link copiado para a rea de transferncia!");return}}catch{}try{const Se=document.createElement("textarea");Se.value=Ve,Se.setAttribute("readonly",""),Se.style.position="fixed",Se.style.opacity="0",document.body.appendChild(Se),Se.select();const ut=document.execCommand("copy");if(document.body.removeChild(Se),ut){X.success("Link copiado!");return}}catch{}try{window.prompt("Copie o link do evento:",Ve),X.info("Link exibido para copiar.")}catch{X.error("No foi possvel gerar o link automaticamente.")}},[Fe,_e]=v.useState({claimed:!1,alreadyCreated:!1});v.useEffect(()=>{(async()=>{if(!(!t||!ee||!(u!=null&&u.is_platform_event)))try{const{data:Se}=await U.from("events").select("id").eq("organizer_id",ee).eq("title",u.title).maybeSingle();if(Se){_e({claimed:!0,alreadyCreated:!0});return}const{data:ut}=await U.from("event_claim_requests").select("id, status").eq("platform_event_id",t).eq("organizer_id",ee).maybeSingle();(ut==null?void 0:ut.status)==="approved"&&_e({claimed:!0,alreadyCreated:!1})}catch(Se){console.error("Error checking claim status:",Se)}})()},[t,ee,u==null?void 0:u.is_platform_event,u==null?void 0:u.title]);const Ze=async()=>{if(!_||!ee||!t){X.error("Voc precisa ser um organizador para solicitar associao");return}ae(!0);try{const{data:Ve}=await U.from("event_claim_requests").select("id, status").eq("platform_event_id",t).eq("organizer_id",ee).maybeSingle();if(Ve){Ve.status==="pending"?X.info("Voc j tem uma solicitao pendente para este evento"):Ve.status==="approved"?(X.info("Este evento j foi aprovado para voc"),_e({claimed:!0,alreadyCreated:!1})):Ve.status==="rejected"&&X.error("Sua solicitao anterior foi rejeitada");return}const{error:Se}=await U.from("event_claim_requests").insert({platform_event_id:t,organizer_id:ee,message:"Solicitao de associao ao evento"});if(Se)throw Se;X.success("Solicitao enviada! Aguarde aprovao do administrador.")}catch(Ve){console.error("Error claiming event:",Ve),X.error("Erro ao solicitar associao: "+Ve.message)}finally{ae(!1)}};if(f)return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"relative",children:n.jsx(St,{className:"w-full h-80"})}),n.jsxs("div",{className:"px-4 py-6 max-w-md mx-auto space-y-4",children:[n.jsx(St,{className:"h-8 w-3/4"}),n.jsx(St,{className:"h-4 w-1/2"}),n.jsx(St,{className:"h-20 w-full"})]})]});if(!u)return n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-muted-foreground",children:"Evento no encontrado"}),n.jsx(K,{variant:"outline",onClick:e,className:"mt-4",children:"Voltar"})]})});const be=!!(u.image_url&&u.image_url.trim()!==""&&!u.image_url.includes("placeholder.svg"));return n.jsxs("div",{className:"min-h-screen bg-background pb-24",children:[n.jsxs("header",{className:"relative",children:[be&&n.jsxs(n.Fragment,{children:[n.jsx("img",{src:u.image_url,alt:u.title,className:"w-full h-80 object-cover"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/60 to-transparent"})]}),n.jsx(K,{variant:"ghost",size:"icon",className:"absolute top-4 left-4 bg-surface/80 backdrop-blur-sm hover:bg-surface",onClick:e,children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[W&&n.jsxs(n.Fragment,{children:[u.is_live&&n.jsxs(K,{variant:"destructive",size:"sm",className:"bg-destructive/90 backdrop-blur-sm hover:bg-destructive",onClick:Be,children:[n.jsx(jo,{className:"h-4 w-4 mr-1"}),"Encerrar"]}),a&&n.jsx(K,{variant:"ghost",size:"icon",className:"bg-surface/80 backdrop-blur-sm hover:bg-surface",onClick:()=>a(t),children:n.jsx(rs,{className:"h-5 w-5"})})]}),n.jsx(K,{variant:"ghost",size:"icon",className:"bg-surface/80 backdrop-blur-sm hover:bg-surface",onClick:ue,children:n.jsx(ks,{className:"h-5 w-5"})})]}),u.is_live&&be&&n.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-destructive/90 backdrop-blur-sm px-3 py-1 rounded-full",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"h-2 w-2 bg-white rounded-full animate-pulse"}),n.jsx("span",{className:"text-sm font-medium text-white",children:"AO VIVO"})]})})]}),n.jsxs("div",{className:"px-4 py-6 max-w-md mx-auto",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:u.title}),n.jsxs("div",{className:`flex items-center gap-3 mb-4 ${u.is_platform_event?"":"cursor-pointer hover:bg-accent/50 -mx-2 px-2 py-2 rounded-lg transition-colors"}`,onClick:()=>{var Ve;!u.is_platform_event&&((Ve=u.organizer)!=null&&Ve.username)&&C(`/${u.organizer.username}`)},children:[n.jsx($t,{className:"h-10 w-10",children:(Ft=(He=u.organizer)==null?void 0:He.profile)!=null&&Ft.avatar_url?n.jsx(Kt,{src:u.organizer.profile.avatar_url}):n.jsx(Vt,{className:"bg-surface",children:(((Je=(pe=u.organizer)==null?void 0:pe.profile)==null?void 0:Je.display_name)||((at=u.organizer)==null?void 0:at.page_title)||"O").charAt(0)})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:((ar=(it=u.organizer)==null?void 0:it.profile)==null?void 0:ar.display_name)||((Nt=u.organizer)==null?void 0:Nt.page_title)||"Organizador"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Organizador"})]})]}),u.is_platform_event&&z&&!Fe.claimed&&n.jsxs("div",{className:"mb-4",children:[n.jsxs(K,{onClick:Ze,disabled:re,variant:"outline",className:"w-full",children:[n.jsx(Sj,{className:"h-4 w-4 mr-2"}),re?"Enviando...":"Solicitar Associao"]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"Voc pode solicitar para vincular este evento ao seu perfil de organizador"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Et,{className:"h-5 w-5 text-primary"}),n.jsx("span",{className:"text-foreground",children:se(u.event_date)})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Rt,{className:"h-5 w-5 text-primary"}),n.jsx("div",{children:n.jsx("p",{className:"text-foreground",children:u.location})})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(er,{className:"h-5 w-5 text-primary"}),n.jsxs("span",{className:"text-foreground",children:[u.unique_attendees_count||0," ",u.is_live?"pessoas no evento":"pessoas interessadas"]})]})]})]}),u.interests&&u.interests.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"font-semibold text-foreground mb-3",children:"Meus Interesses"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:u.interests.map(Ve=>n.jsx(dt,{variant:"default",className:"bg-primary/10 text-primary border-primary/20 hover:bg-primary/20",children:Ve},Ve))})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"Sobre o evento"}),n.jsx("p",{className:"text-muted-foreground leading-relaxed",children:u.description||"Sem descrio disponvel"})]}),((At=(Sr=u.organizer)==null?void 0:Sr.profile)==null?void 0:At.notes)&&n.jsxs("div",{className:"mb-6 p-4 bg-muted/50 rounded-lg border border-border",children:[n.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"Notas do Organizador"}),n.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed",children:u.organizer.profile.notes})]}),n.jsxs("div",{className:"space-y-3 mb-6",children:[!W&&u.ticket_link&&n.jsx(K,{variant:"default",className:"w-full bg-green-600 hover:bg-green-700 text-white",size:"lg",onClick:()=>window.open(u.ticket_link,"_blank"),children:" Comprar Ingresso"}),!W&&u.has_platform_tickets&&u.ticket_types&&u.ticket_types.length>0&&n.jsxs(K,{variant:"default",className:"w-full bg-green-600 hover:bg-green-700 text-white",size:"lg",onClick:()=>{G(()=>{te(!0),N("InitiateCheckout",{event_name:u==null?void 0:u.title,event_id:t,value:Math.min(...u.ticket_types.map(Ve=>Ve.price)),currency:"BRL"})},"comprar ingressos")},children:[" Comprar Ingresso - A partir de R$ ",Math.min(...u.ticket_types.map(Ve=>Ve.price)).toFixed(2)]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(K,{variant:S?"outline":"glow",className:"flex-1",size:"lg",onClick:W&&c?c:S?Pe:Ae,disabled:L||k,children:W?"Ver Presenas Confirmadas":S?"Cancelar Presena":L?"Confirmando...":"Confirmar Presena"}),u.location_link&&n.jsx(K,{variant:"outline",size:"lg",onClick:()=>window.open(u.location_link,"_blank"),children:J?n.jsxs(n.Fragment,{children:[n.jsx(X8,{className:"h-4 w-4"}),"Entrar"]}):n.jsxs(n.Fragment,{children:[n.jsx(Rt,{className:"h-4 w-4"}),"Mapa"]})})]}),u.requires_registration&&n.jsxs(K,{variant:"secondary",className:"w-full",size:"lg",onClick:W&&o?o:r,children:[n.jsx(er,{className:"h-4 w-4 mr-2"}),W?"Ver Cadastros no Evento":"Fazer Cadastro no Evento"]}),u.is_live&&!W&&j==="user"&&n.jsxs(K,{variant:"live",className:"w-full",size:"lg",onClick:Ee,children:[n.jsx(er,{className:"h-4 w-4 mr-2"}),"Encontrar Amigos no Evento"]}),u.is_live&&W&&n.jsxs(K,{variant:"destructive",className:"w-full",size:"lg",onClick:Be,children:[n.jsx(jo,{className:"h-4 w-4 mr-2"}),"Encerrar Evento"]})]}),n.jsx("div",{className:"flex items-center justify-between py-4 border-t border-border",children:n.jsxs("div",{className:"flex items-center gap-6",children:[n.jsxs("button",{className:"flex items-center gap-2 transition-smooth hover:scale-110",onClick:he,children:[n.jsx(Qa,{className:`h-5 w-5 ${u.is_liked?"text-destructive fill-current":"text-muted-foreground"}`}),n.jsx("span",{className:"text-sm text-muted-foreground",children:u.likes_count||0})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ds,{className:"h-5 w-5 text-muted-foreground"}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:[u.comments_count||0," comentrios"]})]})]})}),n.jsxs("div",{className:"space-y-4 pb-6",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:"Comentrios"}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx($t,{className:"h-8 w-8",children:n.jsx(Vt,{className:"bg-surface text-xs",children:"U"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx(An,{placeholder:"Adicione um comentrio...",className:"min-h-[80px] resize-none",value:T,onChange:Ve=>E(Ve.target.value)}),n.jsx(K,{variant:"glow",size:"sm",className:"mt-2",onClick:ne,disabled:!T.trim(),children:"Comentar"})]})]}),n.jsxs("div",{className:"space-y-4",children:[p.map(Ve=>{var Se,ut,lt;return n.jsxs("div",{className:"flex gap-3",children:[n.jsx($t,{className:"h-8 w-8",children:(Se=Ve.user)!=null&&Se.avatar_url?n.jsx(Kt,{src:Ve.user.avatar_url}):n.jsx(Vt,{className:"bg-surface text-xs",children:(((ut=Ve.user)==null?void 0:ut.display_name)||"U").charAt(0)})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium text-foreground text-sm",children:((lt=Ve.user)==null?void 0:lt.display_name)||"Usurio"}),n.jsx("span",{className:"text-xs text-muted-foreground",children:ce(Ve.created_at)})]}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:Ve.content})]})]},Ve.id)}),p.length===0&&n.jsx("p",{className:"text-center text-muted-foreground py-4",children:"Seja o primeiro a comentar!"})]})]})]}),n.jsx(qu,{open:M,onOpenChange:R,actionDescription:$}),(u==null?void 0:u.has_platform_tickets)&&u.ticket_types&&ye&&n.jsx(lz,{open:ie,onOpenChange:te,ticketTypes:u.ticket_types,ticketSettings:ye,eventId:t,eventTitle:u.title})]})}function dz({open:e,onOpenChange:t,recipientId:r,recipientName:s,recipientAvatar:a}){const[o,c]=v.useState([]),[u,f]=v.useState(""),[p,x]=v.useState(!1),[w,_]=v.useState(!1),{user:j}=bt(),N=v.useRef(null);v.useEffect(()=>{if(!e||!j)return;(async()=>{x(!0);try{const{data:b,error:k}=await U.from("user_messages").select("*").or(`and(from_user_id.eq.${j.id},to_user_id.eq.${r}),and(from_user_id.eq.${r},to_user_id.eq.${j.id})`).order("created_at",{ascending:!0});if(k)throw k;c(b||[]),await U.from("user_messages").update({read:!0}).eq("to_user_id",j.id).eq("from_user_id",r).eq("read",!1)}catch(b){console.error("Error loading messages:",b),X.error("Erro ao carregar mensagens")}finally{x(!1)}})();const S=U.channel(`chat-messages-${j.id}-${r}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"user_messages"},b=>{const k=b.new;(k.from_user_id===j.id&&k.to_user_id===r||k.from_user_id===r&&k.to_user_id===j.id)&&(console.log("Nova mensagem recebida:",k),c(O=>O.some(L=>L.id===k.id)?O:[...O,k]),k.from_user_id===r&&k.to_user_id===j.id&&U.from("user_messages").update({read:!0}).eq("id",k.id))}).subscribe(b=>{console.log("Status da inscrio do chat:",b)});return()=>{console.log("Removendo canal do chat"),U.removeChannel(S)}},[e,j,r]),v.useEffect(()=>{N.current&&(N.current.scrollTop=N.current.scrollHeight)},[o]);const C=async()=>{if(!(!u.trim()||!j)){_(!0);try{const{data:E,error:S}=await U.from("user_messages").insert({from_user_id:j.id,to_user_id:r,content:u.trim()}).select("*").single();if(S)throw S;E&&c(b=>b.some(k=>k.id===E.id)?b:[...b,E]),f("")}catch(E){console.error("Error sending message:",E),X.error("Erro ao enviar mensagem")}finally{_(!1)}}},T=E=>{E.key==="Enter"&&!E.shiftKey&&(E.preventDefault(),C())};return n.jsx(Ut,{open:e,onOpenChange:t,children:n.jsxs(Bt,{className:"sm:max-w-md h-[600px] flex flex-col p-0",children:[n.jsx(xr,{className:"px-6 py-4 border-b",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs($t,{className:"h-10 w-10",children:[n.jsx(Kt,{src:a,alt:s}),n.jsx(Vt,{children:s.charAt(0)})]}),n.jsx(vr,{children:s})]})}),n.jsx(Qo,{className:"flex-1 px-6 py-4",ref:N,children:p?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Carregando mensagens..."}):o.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Nenhuma mensagem ainda. Seja o primeiro a enviar!"}):n.jsx("div",{className:"space-y-4",children:o.map(E=>{const S=E.from_user_id===(j==null?void 0:j.id);let b=!1,k=null;try{const O=JSON.parse(E.content);O.type==="story_reply"&&(b=!0,k=O)}catch{}return n.jsx("div",{className:`flex ${S?"justify-end":"justify-start"}`,children:n.jsx("div",{className:`max-w-[70%] rounded-lg overflow-hidden ${S?"bg-primary text-primary-foreground":"bg-muted"}`,children:b&&k?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"px-3 py-2 text-xs opacity-70 border-b border-border/50",children:"Respondeu seu story"}),n.jsx("div",{className:"p-2",children:n.jsx("img",{src:k.story_image,alt:"Story",className:"w-full h-32 object-cover rounded"})}),n.jsxs("div",{className:"px-4 py-2",children:[n.jsx("p",{className:"text-sm",children:k.reply}),n.jsx("p",{className:"text-xs opacity-70 mt-1",children:gu(new Date(E.created_at),{addSuffix:!0,locale:Ir})})]})]}):n.jsxs("div",{className:"px-4 py-2",children:[n.jsx("p",{className:"text-sm",children:E.content}),n.jsx("p",{className:"text-xs opacity-70 mt-1",children:gu(new Date(E.created_at),{addSuffix:!0,locale:Ir})})]})})},E.id)})})}),n.jsx("div",{className:"px-6 py-4 border-t",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx(we,{value:u,onChange:E=>f(E.target.value),onKeyPress:T,placeholder:"Digite sua mensagem...",disabled:w}),n.jsx(K,{onClick:C,disabled:!u.trim()||w,size:"icon",children:n.jsx(T1,{className:"h-4 w-4"})})]})})]})})}function uz(e){const[t,r]=v.useState("none"),[s,a]=v.useState(!0),{user:o}=bt();v.useEffect(()=>{if(!o||!e){a(!1);return}c()},[o,e]);const c=async()=>{if(!(!o||!e))try{const{data:p,error:x}=await U.from("friendships").select("status").or(`and(user_id.eq.${o.id},friend_id.eq.${e}),and(user_id.eq.${e},friend_id.eq.${o.id})`).maybeSingle();x&&x.code!=="PGRST116"&&console.error("Error checking friendship status:",x),r((p==null?void 0:p.status)||"none")}catch(p){console.error("Error:",p)}finally{a(!1)}};return{friendshipStatus:t,loading:s,addFriend:async()=>{if(!o)return X.error("Faa login para adicionar amigos"),!1;if(!e)return X.error("ID do usurio no encontrado"),!1;a(!0);try{const{error:p}=await U.from("friendships").insert({user_id:o.id,friend_id:e,status:"pending"});if(p)throw p;return r("pending"),X.success("Solicitao de amizade enviada!"),!0}catch(p){return console.error("Error adding friend:",p),X.error("Erro ao adicionar amigo"),!1}finally{a(!1)}},removeFriend:async()=>{if(!o||!e)return!1;a(!0);try{const{error:p}=await U.from("friendships").delete().or(`and(user_id.eq.${o.id},friend_id.eq.${e}),and(user_id.eq.${e},friend_id.eq.${o.id})`);if(p)throw p;return r("none"),X.success("Amigo removido"),!0}catch(p){return console.error("Error removing friend:",p),X.error("Erro ao remover amigo"),!1}finally{a(!1)}}}}var d0=["Enter"," "],hz=["ArrowDown","PageUp","Home"],qS=["ArrowUp","PageDown","End"],fz=[...hz,...qS],mz={ltr:[...d0,"ArrowRight"],rtl:[...d0,"ArrowLeft"]},pz={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Wu="Menu",[vu,gz,xz]=Au(Wu),[gl,WS]=Mr(Wu,[xz,so,Xc]),Jm=so(),HS=Xc(),[vz,xl]=gl(Wu),[wz,Hu]=gl(Wu),GS=e=>{const{__scopeMenu:t,open:r=!1,children:s,dir:a,onOpenChange:o,modal:c=!0}=e,u=Jm(t),[f,p]=v.useState(null),x=v.useRef(!1),w=Er(o),_=pl(a);return v.useEffect(()=>{const j=()=>{x.current=!0,document.addEventListener("pointerdown",N,{capture:!0,once:!0}),document.addEventListener("pointermove",N,{capture:!0,once:!0})},N=()=>x.current=!1;return document.addEventListener("keydown",j,{capture:!0}),()=>{document.removeEventListener("keydown",j,{capture:!0}),document.removeEventListener("pointerdown",N,{capture:!0}),document.removeEventListener("pointermove",N,{capture:!0})}},[]),n.jsx(U1,{...u,children:n.jsx(vz,{scope:t,open:r,onOpenChange:w,content:f,onContentChange:p,children:n.jsx(wz,{scope:t,onClose:v.useCallback(()=>w(!1),[w]),isUsingKeyboardRef:x,dir:_,modal:c,children:s})})})};GS.displayName=Wu;var yz="MenuAnchor",vv=v.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e,a=Jm(r);return n.jsx(Du,{...a,...s,ref:t})});vv.displayName=yz;var wv="MenuPortal",[bz,XS]=gl(wv,{forceMount:void 0}),KS=e=>{const{__scopeMenu:t,forceMount:r,children:s,container:a}=e,o=xl(wv,t);return n.jsx(bz,{scope:t,forceMount:r,children:n.jsx(Hr,{present:r||o.open,children:n.jsx(Bc,{asChild:!0,container:a,children:s})})})};KS.displayName=wv;var Is="MenuContent",[_z,yv]=gl(Is),YS=v.forwardRef((e,t)=>{const r=XS(Is,e.__scopeMenu),{forceMount:s=r.forceMount,...a}=e,o=xl(Is,e.__scopeMenu),c=Hu(Is,e.__scopeMenu);return n.jsx(vu.Provider,{scope:e.__scopeMenu,children:n.jsx(Hr,{present:s||o.open,children:n.jsx(vu.Slot,{scope:e.__scopeMenu,children:c.modal?n.jsx(Nz,{...a,ref:t}):n.jsx(jz,{...a,ref:t})})})})}),Nz=v.forwardRef((e,t)=>{const r=xl(Is,e.__scopeMenu),s=v.useRef(null),a=tt(t,s);return v.useEffect(()=>{const o=s.current;if(o)return qm(o)},[]),n.jsx(bv,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:Ie(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),jz=v.forwardRef((e,t)=>{const r=xl(Is,e.__scopeMenu);return n.jsx(bv,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),Cz=qi("MenuContent.ScrollLock"),bv=v.forwardRef((e,t)=>{const{__scopeMenu:r,loop:s=!1,trapFocus:a,onOpenAutoFocus:o,onCloseAutoFocus:c,disableOutsidePointerEvents:u,onEntryFocus:f,onEscapeKeyDown:p,onPointerDownOutside:x,onFocusOutside:w,onInteractOutside:_,onDismiss:j,disableOutsideScroll:N,...C}=e,T=xl(Is,r),E=Hu(Is,r),S=Jm(r),b=HS(r),k=gz(r),[O,L]=v.useState(null),P=v.useRef(null),M=tt(t,P,T.onContentChange),R=v.useRef(0),$=v.useRef(""),Y=v.useRef(0),z=v.useRef(null),q=v.useRef("right"),ee=v.useRef(0),H=N?zu:v.Fragment,re=N?{as:Cz,allowPinchZoom:!0}:void 0,ae=te=>{var ne,he;const ye=$.current+te,ge=k().filter(Ae=>!Ae.disabled),W=document.activeElement,J=(ne=ge.find(Ae=>Ae.ref.current===W))==null?void 0:ne.textValue,G=ge.map(Ae=>Ae.textValue),se=Lz(G,ye,J),ce=(he=ge.find(Ae=>Ae.textValue===se))==null?void 0:he.ref.current;(function Ae(Pe){$.current=Pe,window.clearTimeout(R.current),Pe!==""&&(R.current=window.setTimeout(()=>Ae(""),1e3))})(ye),ce&&setTimeout(()=>ce.focus())};v.useEffect(()=>()=>window.clearTimeout(R.current),[]),$m();const ie=v.useCallback(te=>{var ge,W;return q.current===((ge=z.current)==null?void 0:ge.side)&&Bz(te,(W=z.current)==null?void 0:W.area)},[]);return n.jsx(_z,{scope:r,searchRef:$,onItemEnter:v.useCallback(te=>{ie(te)&&te.preventDefault()},[ie]),onItemLeave:v.useCallback(te=>{var ye;ie(te)||((ye=P.current)==null||ye.focus(),L(null))},[ie]),onTriggerLeave:v.useCallback(te=>{ie(te)&&te.preventDefault()},[ie]),pointerGraceTimerRef:Y,onPointerGraceIntentChange:v.useCallback(te=>{z.current=te},[]),children:n.jsx(H,{...re,children:n.jsx(Bu,{asChild:!0,trapped:a,onMountAutoFocus:Ie(o,te=>{var ye;te.preventDefault(),(ye=P.current)==null||ye.focus({preventScroll:!0})}),onUnmountAutoFocus:c,children:n.jsx(cl,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:p,onPointerDownOutside:x,onFocusOutside:w,onInteractOutside:_,onDismiss:j,children:n.jsx(pv,{asChild:!0,...b,dir:E.dir,orientation:"vertical",loop:s,currentTabStopId:O,onCurrentTabStopIdChange:L,onEntryFocus:Ie(f,te=>{E.isUsingKeyboardRef.current||te.preventDefault()}),preventScrollOnEntryFocus:!0,children:n.jsx(Em,{role:"menu","aria-orientation":"vertical","data-state":h4(T.open),"data-radix-menu-content":"",dir:E.dir,...S,...C,ref:M,style:{outline:"none",...C.style},onKeyDown:Ie(C.onKeyDown,te=>{const ge=te.target.closest("[data-radix-menu-content]")===te.currentTarget,W=te.ctrlKey||te.altKey||te.metaKey,J=te.key.length===1;ge&&(te.key==="Tab"&&te.preventDefault(),!W&&J&&ae(te.key));const G=P.current;if(te.target!==G||!fz.includes(te.key))return;te.preventDefault();const ce=k().filter(ne=>!ne.disabled).map(ne=>ne.ref.current);qS.includes(te.key)&&ce.reverse(),Dz(ce)}),onBlur:Ie(e.onBlur,te=>{te.currentTarget.contains(te.target)||(window.clearTimeout(R.current),$.current="")}),onPointerMove:Ie(e.onPointerMove,wu(te=>{const ye=te.target,ge=ee.current!==te.clientX;if(te.currentTarget.contains(ye)&&ge){const W=te.clientX>ee.current?"right":"left";q.current=W,ee.current=te.clientX}}))})})})})})})});YS.displayName=Is;var Ez="MenuGroup",_v=v.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e;return n.jsx(qe.div,{role:"group",...s,ref:t})});_v.displayName=Ez;var Sz="MenuLabel",QS=v.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e;return n.jsx(qe.div,{...s,ref:t})});QS.displayName=Sz;var Kf="MenuItem",Gb="menu.itemSelect",ep=v.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:s,...a}=e,o=v.useRef(null),c=Hu(Kf,e.__scopeMenu),u=yv(Kf,e.__scopeMenu),f=tt(t,o),p=v.useRef(!1),x=()=>{const w=o.current;if(!r&&w){const _=new CustomEvent(Gb,{bubbles:!0,cancelable:!0});w.addEventListener(Gb,j=>s==null?void 0:s(j),{once:!0}),_1(w,_),_.defaultPrevented?p.current=!1:c.onClose()}};return n.jsx(ZS,{...a,ref:f,disabled:r,onClick:Ie(e.onClick,x),onPointerDown:w=>{var _;(_=e.onPointerDown)==null||_.call(e,w),p.current=!0},onPointerUp:Ie(e.onPointerUp,w=>{var _;p.current||(_=w.currentTarget)==null||_.click()}),onKeyDown:Ie(e.onKeyDown,w=>{const _=u.searchRef.current!=="";r||_&&w.key===" "||d0.includes(w.key)&&(w.currentTarget.click(),w.preventDefault())})})});ep.displayName=Kf;var ZS=v.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:s=!1,textValue:a,...o}=e,c=yv(Kf,r),u=HS(r),f=v.useRef(null),p=tt(t,f),[x,w]=v.useState(!1),[_,j]=v.useState("");return v.useEffect(()=>{const N=f.current;N&&j((N.textContent??"").trim())},[o.children]),n.jsx(vu.ItemSlot,{scope:r,disabled:s,textValue:a??_,children:n.jsx(gv,{asChild:!0,...u,focusable:!s,children:n.jsx(qe.div,{role:"menuitem","data-highlighted":x?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...o,ref:p,onPointerMove:Ie(e.onPointerMove,wu(N=>{s?c.onItemLeave(N):(c.onItemEnter(N),N.defaultPrevented||N.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ie(e.onPointerLeave,wu(N=>c.onItemLeave(N))),onFocus:Ie(e.onFocus,()=>w(!0)),onBlur:Ie(e.onBlur,()=>w(!1))})})})}),Az="MenuCheckboxItem",JS=v.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:s,...a}=e;return n.jsx(s4,{scope:e.__scopeMenu,checked:r,children:n.jsx(ep,{role:"menuitemcheckbox","aria-checked":Yf(r)?"mixed":r,...a,ref:t,"data-state":jv(r),onSelect:Ie(a.onSelect,()=>s==null?void 0:s(Yf(r)?!0:!r),{checkForDefaultPrevented:!1})})})});JS.displayName=Az;var e4="MenuRadioGroup",[kz,Tz]=gl(e4,{value:void 0,onValueChange:()=>{}}),t4=v.forwardRef((e,t)=>{const{value:r,onValueChange:s,...a}=e,o=Er(s);return n.jsx(kz,{scope:e.__scopeMenu,value:r,onValueChange:o,children:n.jsx(_v,{...a,ref:t})})});t4.displayName=e4;var r4="MenuRadioItem",n4=v.forwardRef((e,t)=>{const{value:r,...s}=e,a=Tz(r4,e.__scopeMenu),o=r===a.value;return n.jsx(s4,{scope:e.__scopeMenu,checked:o,children:n.jsx(ep,{role:"menuitemradio","aria-checked":o,...s,ref:t,"data-state":jv(o),onSelect:Ie(s.onSelect,()=>{var c;return(c=a.onValueChange)==null?void 0:c.call(a,r)},{checkForDefaultPrevented:!1})})})});n4.displayName=r4;var Nv="MenuItemIndicator",[s4,Iz]=gl(Nv,{checked:!1}),a4=v.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:s,...a}=e,o=Iz(Nv,r);return n.jsx(Hr,{present:s||Yf(o.checked)||o.checked===!0,children:n.jsx(qe.span,{...a,ref:t,"data-state":jv(o.checked)})})});a4.displayName=Nv;var Rz="MenuSeparator",i4=v.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e;return n.jsx(qe.div,{role:"separator","aria-orientation":"horizontal",...s,ref:t})});i4.displayName=Rz;var Pz="MenuArrow",o4=v.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e,a=Jm(r);return n.jsx(Sm,{...a,...s,ref:t})});o4.displayName=Pz;var Oz="MenuSub",[sH,l4]=gl(Oz),jd="MenuSubTrigger",c4=v.forwardRef((e,t)=>{const r=xl(jd,e.__scopeMenu),s=Hu(jd,e.__scopeMenu),a=l4(jd,e.__scopeMenu),o=yv(jd,e.__scopeMenu),c=v.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:f}=o,p={__scopeMenu:e.__scopeMenu},x=v.useCallback(()=>{c.current&&window.clearTimeout(c.current),c.current=null},[]);return v.useEffect(()=>x,[x]),v.useEffect(()=>{const w=u.current;return()=>{window.clearTimeout(w),f(null)}},[u,f]),n.jsx(vv,{asChild:!0,...p,children:n.jsx(ZS,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":h4(r.open),...e,ref:Ya(t,a.onTriggerChange),onClick:w=>{var _;(_=e.onClick)==null||_.call(e,w),!(e.disabled||w.defaultPrevented)&&(w.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:Ie(e.onPointerMove,wu(w=>{o.onItemEnter(w),!w.defaultPrevented&&!e.disabled&&!r.open&&!c.current&&(o.onPointerGraceIntentChange(null),c.current=window.setTimeout(()=>{r.onOpenChange(!0),x()},100))})),onPointerLeave:Ie(e.onPointerLeave,wu(w=>{var j,N;x();const _=(j=r.content)==null?void 0:j.getBoundingClientRect();if(_){const C=(N=r.content)==null?void 0:N.dataset.side,T=C==="right",E=T?-5:5,S=_[T?"left":"right"],b=_[T?"right":"left"];o.onPointerGraceIntentChange({area:[{x:w.clientX+E,y:w.clientY},{x:S,y:_.top},{x:b,y:_.top},{x:b,y:_.bottom},{x:S,y:_.bottom}],side:C}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(w),w.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:Ie(e.onKeyDown,w=>{var j;const _=o.searchRef.current!=="";e.disabled||_&&w.key===" "||mz[s.dir].includes(w.key)&&(r.onOpenChange(!0),(j=r.content)==null||j.focus(),w.preventDefault())})})})});c4.displayName=jd;var d4="MenuSubContent",u4=v.forwardRef((e,t)=>{const r=XS(Is,e.__scopeMenu),{forceMount:s=r.forceMount,...a}=e,o=xl(Is,e.__scopeMenu),c=Hu(Is,e.__scopeMenu),u=l4(d4,e.__scopeMenu),f=v.useRef(null),p=tt(t,f);return n.jsx(vu.Provider,{scope:e.__scopeMenu,children:n.jsx(Hr,{present:s||o.open,children:n.jsx(vu.Slot,{scope:e.__scopeMenu,children:n.jsx(bv,{id:u.contentId,"aria-labelledby":u.triggerId,...a,ref:p,align:"start",side:c.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:x=>{var w;c.isUsingKeyboardRef.current&&((w=f.current)==null||w.focus()),x.preventDefault()},onCloseAutoFocus:x=>x.preventDefault(),onFocusOutside:Ie(e.onFocusOutside,x=>{x.target!==u.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:Ie(e.onEscapeKeyDown,x=>{c.onClose(),x.preventDefault()}),onKeyDown:Ie(e.onKeyDown,x=>{var j;const w=x.currentTarget.contains(x.target),_=pz[c.dir].includes(x.key);w&&_&&(o.onOpenChange(!1),(j=u.trigger)==null||j.focus(),x.preventDefault())})})})})})});u4.displayName=d4;function h4(e){return e?"open":"closed"}function Yf(e){return e==="indeterminate"}function jv(e){return Yf(e)?"indeterminate":e?"checked":"unchecked"}function Dz(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function Mz(e,t){return e.map((r,s)=>e[(t+s)%e.length])}function Lz(e,t,r){const a=t.length>1&&Array.from(t).every(p=>p===t[0])?t[0]:t,o=r?e.indexOf(r):-1;let c=Mz(e,Math.max(o,0));a.length===1&&(c=c.filter(p=>p!==r));const f=c.find(p=>p.toLowerCase().startsWith(a.toLowerCase()));return f!==r?f:void 0}function Fz(e,t){const{x:r,y:s}=e;let a=!1;for(let o=0,c=t.length-1;o<t.length;c=o++){const u=t[o],f=t[c],p=u.x,x=u.y,w=f.x,_=f.y;x>s!=_>s&&r<(w-p)*(s-x)/(_-x)+p&&(a=!a)}return a}function Bz(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return Fz(r,t)}function wu(e){return t=>t.pointerType==="mouse"?e(t):void 0}var zz=GS,Uz=vv,$z=KS,Vz=YS,qz=_v,Wz=QS,Hz=ep,Gz=JS,Xz=t4,Kz=n4,Yz=a4,Qz=i4,Zz=o4,Jz=c4,eU=u4,tp="DropdownMenu",[tU]=Mr(tp,[WS]),In=WS(),[rU,f4]=tU(tp),m4=e=>{const{__scopeDropdownMenu:t,children:r,dir:s,open:a,defaultOpen:o,onOpenChange:c,modal:u=!0}=e,f=In(t),p=v.useRef(null),[x,w]=Os({prop:a,defaultProp:o??!1,onChange:c,caller:tp});return n.jsx(rU,{scope:t,triggerId:un(),triggerRef:p,contentId:un(),open:x,onOpenChange:w,onOpenToggle:v.useCallback(()=>w(_=>!_),[w]),modal:u,children:n.jsx(zz,{...f,open:x,onOpenChange:w,dir:s,modal:u,children:r})})};m4.displayName=tp;var p4="DropdownMenuTrigger",g4=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:s=!1,...a}=e,o=f4(p4,r),c=In(r);return n.jsx(Uz,{asChild:!0,...c,children:n.jsx(qe.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...a,ref:Ya(t,o.triggerRef),onPointerDown:Ie(e.onPointerDown,u=>{!s&&u.button===0&&u.ctrlKey===!1&&(o.onOpenToggle(),o.open||u.preventDefault())}),onKeyDown:Ie(e.onKeyDown,u=>{s||(["Enter"," "].includes(u.key)&&o.onOpenToggle(),u.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})})});g4.displayName=p4;var nU="DropdownMenuPortal",x4=e=>{const{__scopeDropdownMenu:t,...r}=e,s=In(t);return n.jsx($z,{...s,...r})};x4.displayName=nU;var v4="DropdownMenuContent",w4=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=f4(v4,r),o=In(r),c=v.useRef(!1);return n.jsx(Vz,{id:a.contentId,"aria-labelledby":a.triggerId,...o,...s,ref:t,onCloseAutoFocus:Ie(e.onCloseAutoFocus,u=>{var f;c.current||(f=a.triggerRef.current)==null||f.focus(),c.current=!1,u.preventDefault()}),onInteractOutside:Ie(e.onInteractOutside,u=>{const f=u.detail.originalEvent,p=f.button===0&&f.ctrlKey===!0,x=f.button===2||p;(!a.modal||x)&&(c.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});w4.displayName=v4;var sU="DropdownMenuGroup",aU=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=In(r);return n.jsx(qz,{...a,...s,ref:t})});aU.displayName=sU;var iU="DropdownMenuLabel",y4=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=In(r);return n.jsx(Wz,{...a,...s,ref:t})});y4.displayName=iU;var oU="DropdownMenuItem",b4=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=In(r);return n.jsx(Hz,{...a,...s,ref:t})});b4.displayName=oU;var lU="DropdownMenuCheckboxItem",_4=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=In(r);return n.jsx(Gz,{...a,...s,ref:t})});_4.displayName=lU;var cU="DropdownMenuRadioGroup",dU=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=In(r);return n.jsx(Xz,{...a,...s,ref:t})});dU.displayName=cU;var uU="DropdownMenuRadioItem",N4=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=In(r);return n.jsx(Kz,{...a,...s,ref:t})});N4.displayName=uU;var hU="DropdownMenuItemIndicator",j4=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=In(r);return n.jsx(Yz,{...a,...s,ref:t})});j4.displayName=hU;var fU="DropdownMenuSeparator",C4=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=In(r);return n.jsx(Qz,{...a,...s,ref:t})});C4.displayName=fU;var mU="DropdownMenuArrow",pU=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=In(r);return n.jsx(Zz,{...a,...s,ref:t})});pU.displayName=mU;var gU="DropdownMenuSubTrigger",E4=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=In(r);return n.jsx(Jz,{...a,...s,ref:t})});E4.displayName=gU;var xU="DropdownMenuSubContent",S4=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=In(r);return n.jsx(eU,{...a,...s,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});S4.displayName=xU;var vU=m4,wU=g4,yU=x4,A4=w4,k4=y4,T4=b4,I4=_4,R4=N4,P4=j4,O4=C4,D4=E4,M4=S4;const lf=vU,cf=wU,bU=v.forwardRef(({className:e,inset:t,children:r,...s},a)=>n.jsxs(D4,{ref:a,className:Le("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",e),...s,children:[r,n.jsx(Iu,{className:"ml-auto h-4 w-4"})]}));bU.displayName=D4.displayName;const _U=v.forwardRef(({className:e,...t},r)=>n.jsx(M4,{ref:r,className:Le("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));_U.displayName=M4.displayName;const Bd=v.forwardRef(({className:e,sideOffset:t=4,...r},s)=>n.jsx(yU,{children:n.jsx(A4,{ref:s,sideOffset:t,className:Le("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));Bd.displayName=A4.displayName;const Bn=v.forwardRef(({className:e,inset:t,...r},s)=>n.jsx(T4,{ref:s,className:Le("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",e),...r}));Bn.displayName=T4.displayName;const NU=v.forwardRef(({className:e,children:t,checked:r,...s},a)=>n.jsxs(I4,{ref:a,className:Le("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),checked:r,...s,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(P4,{children:n.jsx(Xn,{className:"h-4 w-4"})})}),t]}));NU.displayName=I4.displayName;const jU=v.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(R4,{ref:s,className:Le("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(P4,{children:n.jsx(Cj,{className:"h-2 w-2 fill-current"})})}),t]}));jU.displayName=R4.displayName;const CU=v.forwardRef(({className:e,inset:t,...r},s)=>n.jsx(k4,{ref:s,className:Le("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));CU.displayName=k4.displayName;const EU=v.forwardRef(({className:e,...t},r)=>n.jsx(O4,{ref:r,className:Le("-mx-1 my-1 h-px bg-muted",e),...t}));EU.displayName=O4.displayName;var L4="AlertDialog",[SU]=Mr(L4,[zE]),ri=zE(),F4=e=>{const{__scopeAlertDialog:t,...r}=e,s=ri(t);return n.jsx(sv,{...s,...r,modal:!0})};F4.displayName=L4;var AU="AlertDialogTrigger",B4=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=ri(r);return n.jsx(rS,{...a,...s,ref:t})});B4.displayName=AU;var kU="AlertDialogPortal",z4=e=>{const{__scopeAlertDialog:t,...r}=e,s=ri(t);return n.jsx(av,{...s,...r})};z4.displayName=kU;var TU="AlertDialogOverlay",U4=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=ri(r);return n.jsx(Hm,{...a,...s,ref:t})});U4.displayName=TU;var uc="AlertDialogContent",[IU,RU]=SU(uc),PU=ZN("AlertDialogContent"),$4=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:s,...a}=e,o=ri(r),c=v.useRef(null),u=tt(t,c),f=v.useRef(null);return n.jsx(yB,{contentName:uc,titleName:V4,docsSlug:"alert-dialog",children:n.jsx(IU,{scope:r,cancelRef:f,children:n.jsxs(Gm,{role:"alertdialog",...o,...a,ref:u,onOpenAutoFocus:Ie(a.onOpenAutoFocus,p=>{var x;p.preventDefault(),(x=f.current)==null||x.focus({preventScroll:!0})}),onPointerDownOutside:p=>p.preventDefault(),onInteractOutside:p=>p.preventDefault(),children:[n.jsx(PU,{children:s}),n.jsx(DU,{contentRef:c})]})})})});$4.displayName=uc;var V4="AlertDialogTitle",q4=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=ri(r);return n.jsx(iv,{...a,...s,ref:t})});q4.displayName=V4;var W4="AlertDialogDescription",H4=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=ri(r);return n.jsx(ov,{...a,...s,ref:t})});H4.displayName=W4;var OU="AlertDialogAction",G4=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=ri(r);return n.jsx(lv,{...a,...s,ref:t})});G4.displayName=OU;var X4="AlertDialogCancel",K4=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,{cancelRef:a}=RU(X4,r),o=ri(r),c=tt(t,a);return n.jsx(lv,{...o,...s,ref:c})});K4.displayName=X4;var DU=({contentRef:e})=>{const t=`\`${uc}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${uc}\` by passing a \`${W4}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${uc}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return v.useEffect(()=>{var s;document.getElementById((s=e.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},MU=F4,LU=B4,FU=z4,Y4=U4,Q4=$4,Z4=G4,J4=K4,e3=q4,t3=H4;const Zo=MU,Qf=LU,BU=FU,r3=v.forwardRef(({className:e,...t},r)=>n.jsx(Y4,{className:Le("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));r3.displayName=Y4.displayName;const Yi=v.forwardRef(({className:e,...t},r)=>n.jsxs(BU,{children:[n.jsx(r3,{}),n.jsx(Q4,{ref:r,className:Le("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Yi.displayName=Q4.displayName;const Jo=({className:e,...t})=>n.jsx("div",{className:Le("flex flex-col space-y-2 text-center sm:text-left",e),...t});Jo.displayName="AlertDialogHeader";const Qi=({className:e,...t})=>n.jsx("div",{className:Le("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Qi.displayName="AlertDialogFooter";const el=v.forwardRef(({className:e,...t},r)=>n.jsx(e3,{ref:r,className:Le("text-lg font-semibold",e),...t}));el.displayName=e3.displayName;const tl=v.forwardRef(({className:e,...t},r)=>n.jsx(t3,{ref:r,className:Le("text-sm text-muted-foreground",e),...t}));tl.displayName=t3.displayName;const Zi=v.forwardRef(({className:e,...t},r)=>n.jsx(Z4,{ref:r,className:Le(Z1(),e),...t}));Zi.displayName=Z4.displayName;const Ji=v.forwardRef(({className:e,...t},r)=>n.jsx(J4,{ref:r,className:Le(Z1({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Ji.displayName=J4.displayName;function zU({stories:e,initialIndex:t,open:r,onOpenChange:s,onStoryDeleted:a}){const[o,c]=v.useState(t),[u,f]=v.useState(!1),[p,x]=v.useState(0),[w,_]=v.useState([]),[j,N]=v.useState([]),[C,T]=v.useState(""),[E,S]=v.useState(!1),[b,k]=v.useState(!1),[O,L]=v.useState(!1),[P,M]=v.useState(0),[R,$]=v.useState(0),{user:Y}=bt(),z=e[o],q=(z==null?void 0:z.user_id)===(Y==null?void 0:Y.id);v.useEffect(()=>{if(!z||!Y)return;(async()=>{const{data:G}=await U.from("story_likes").select("user_id").eq("story_id",z.id);if(x((G==null?void 0:G.length)||0),q&&G&&G.length>0){const se=G.map(ne=>ne.user_id),{data:ce}=await U.from("profiles").select("user_id, display_name, avatar_url").in("user_id",se);ce&&_(ce.map(ne=>({user_name:ne.display_name||"Usurio",user_avatar:ne.avatar_url||""})))}else{const{data:se}=await U.from("story_likes").select("*").eq("story_id",z.id).eq("user_id",Y.id).single();f(!!se)}})(),(async()=>{await U.from("story_views").insert({story_id:z.id,viewer_id:Y.id}).select().single()})()},[z,Y,q]),v.useEffect(()=>{if(!z)return;(async()=>{const{data:J}=await U.from("story_comments").select(`
          id,
          user_id,
          comment,
          created_at
        `).eq("story_id",z.id).order("created_at",{ascending:!0});if(J){const G=[...new Set(J.map(he=>he.user_id))],{data:se}=await U.from("profiles").select("user_id, display_name, avatar_url").in("user_id",G),ce=new Map((se==null?void 0:se.map(he=>[he.user_id,he]))||[]),ne=J.map(he=>{var Ae,Pe;return{...he,user_name:((Ae=ce.get(he.user_id))==null?void 0:Ae.display_name)||"Usurio",user_avatar:((Pe=ce.get(he.user_id))==null?void 0:Pe.avatar_url)||""}});N(ne)}})()},[z]);const ee=async()=>{!Y||!z||(u?(await U.from("story_likes").delete().eq("story_id",z.id).eq("user_id",Y.id),f(!1),x(W=>W-1)):(await U.from("story_likes").insert({story_id:z.id,user_id:Y.id}),f(!0),x(W=>W+1)))},H=async()=>{if(!Y||!z||!C.trim())return;const{error:W}=await U.from("story_comments").insert({story_id:z.id,user_id:Y.id,comment:C});if(W){X.error("Erro ao comentar");return}if(z.user_id!==Y.id){const G=JSON.stringify({type:"story_reply",story_image:z.image_url,reply:C});await U.from("user_messages").insert({from_user_id:Y.id,to_user_id:z.user_id,content:G})}T(""),X.success("Comentrio enviado!");const{data:J}=await U.from("story_comments").select(`
        id,
        user_id,
        comment,
        created_at
      `).eq("story_id",z.id).order("created_at",{ascending:!0});if(J){const G=[...new Set(J.map(he=>he.user_id))],{data:se}=await U.from("profiles").select("user_id, display_name, avatar_url").in("user_id",G),ce=new Map((se==null?void 0:se.map(he=>[he.user_id,he]))||[]),ne=J.map(he=>{var Ae,Pe;return{...he,user_name:((Ae=ce.get(he.user_id))==null?void 0:Ae.display_name)||"Usurio",user_avatar:((Pe=ce.get(he.user_id))==null?void 0:Pe.avatar_url)||""}});N(ne)}},re=()=>{o<e.length-1?(c(o+1),S(!1)):s(!1)},ae=()=>{o>0&&(c(o-1),S(!1))},ie=W=>{M(W.targetTouches[0].clientX)},te=W=>{$(W.targetTouches[0].clientX)},ye=()=>{if(!P||!R)return;const W=P-R,J=W>50,G=W<-50;J?re():G&&ae(),M(0),$(0)},ge=async()=>{if(!(!Y||!z))try{const{error:W}=await U.from("stories").delete().eq("id",z.id);if(W)throw W;const J=z.image_url.split("/").slice(-3).join("/");await U.storage.from("user-uploads").remove([J]),X.success("Story excludo!"),a==null||a(e.length<=1),k(!1),s(!1)}catch(W){console.error("Error deleting story:",W),X.error("Erro ao excluir story")}};return z?n.jsxs(Ut,{open:r,onOpenChange:s,children:[n.jsx(Bt,{className:"max-w-lg p-0 bg-black border-0 h-[90vh]",children:n.jsxs("div",{className:"relative w-full h-full flex flex-col",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 z-10 p-4 bg-gradient-to-b from-black/70 to-transparent",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs($t,{className:"h-10 w-10 border-2 border-white",children:[n.jsx(Kt,{src:z.user_avatar}),n.jsx(Vt,{children:z.user_name.charAt(0)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-white font-semibold text-sm",children:z.user_name}),n.jsx("p",{className:"text-white/70 text-xs",children:new Date(z.created_at).toLocaleDateString("pt-BR")})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[z.user_id===(Y==null?void 0:Y.id)&&n.jsxs(lf,{children:[n.jsx(cf,{asChild:!0,children:n.jsx(K,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",children:n.jsx(M8,{className:"h-5 w-5"})})}),n.jsx(Bd,{align:"end",className:"bg-surface border-border",children:n.jsxs(Bn,{onClick:()=>k(!0),className:"text-red-500 focus:text-red-500 cursor-pointer",children:[n.jsx(Gn,{className:"h-4 w-4 mr-2"}),"Excluir story"]})})]}),n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>s(!1),className:"text-white hover:bg-white/20",children:n.jsx(sr,{className:"h-5 w-5"})})]})]})}),n.jsx("div",{className:"flex-1 bg-center bg-cover bg-no-repeat cursor-pointer select-none",style:{backgroundImage:`url(${z.image_url})`},onClick:W=>{const J=W.currentTarget.getBoundingClientRect();W.clientX-J.left<J.width/2?ae():re()},onTouchStart:ie,onTouchMove:te,onTouchEnd:ye}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/70 to-transparent",children:q?n.jsxs("div",{className:"mb-3",children:[n.jsxs(K,{variant:"ghost",size:"sm",onClick:()=>L(!O),className:"text-white hover:bg-white/20 gap-2",children:[n.jsx(Qa,{className:"h-5 w-5"}),n.jsxs("span",{children:[p," ",p===1?"curtida":"curtidas"]})]}),O&&p>0&&n.jsx("div",{className:"mt-2 bg-black/50 rounded-lg p-3 max-h-40",children:n.jsx(Qo,{className:"h-32",children:n.jsx("div",{className:"space-y-2",children:w.map((W,J)=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs($t,{className:"h-8 w-8",children:[n.jsx(Kt,{src:W.user_avatar}),n.jsx(Vt,{children:W.user_name.charAt(0)})]}),n.jsx("span",{className:"text-white text-sm",children:W.user_name})]},J))})})})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[n.jsxs(K,{variant:"ghost",size:"sm",onClick:ee,className:"text-white hover:bg-white/20 gap-2",children:[n.jsx(Qa,{className:`h-5 w-5 ${u?"fill-red-500 text-red-500":""}`}),n.jsx("span",{children:p})]}),n.jsxs(K,{variant:"ghost",size:"sm",onClick:()=>S(!E),className:"text-white hover:bg-white/20 gap-2",children:[n.jsx(Ds,{className:"h-5 w-5"}),n.jsx("span",{children:j.length})]})]}),E&&n.jsx("div",{className:"bg-black/50 rounded-lg p-3 mb-3 max-h-40",children:n.jsx(Qo,{className:"h-32",children:j.length===0?n.jsx("p",{className:"text-white/70 text-sm text-center",children:"Nenhum comentrio ainda"}):n.jsx("div",{className:"space-y-2",children:j.map(W=>n.jsxs("div",{className:"flex gap-2",children:[n.jsxs($t,{className:"h-6 w-6",children:[n.jsx(Kt,{src:W.user_avatar}),n.jsx(Vt,{children:W.user_name.charAt(0)})]}),n.jsx("div",{children:n.jsxs("p",{className:"text-white text-sm",children:[n.jsx("span",{className:"font-semibold",children:W.user_name})," ",W.comment]})})]},W.id))})})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(we,{placeholder:"Enviar mensagem...",value:C,onChange:W=>T(W.target.value),onKeyPress:W=>W.key==="Enter"&&H(),className:"bg-white/10 border-white/20 text-white placeholder:text-white/50"}),n.jsx(K,{onClick:H,disabled:!C.trim(),className:"bg-primary hover:bg-primary-glow",children:n.jsx(T1,{className:"h-4 w-4"})})]})]})})]})}),n.jsx(Zo,{open:b,onOpenChange:k,children:n.jsxs(Yi,{className:"bg-surface border-border",children:[n.jsxs(Jo,{children:[n.jsx(el,{children:"Excluir story?"}),n.jsx(tl,{children:"Esta ao no pode ser desfeita. Seu story ser excludo permanentemente."})]}),n.jsxs(Qi,{children:[n.jsx(Ji,{children:"Cancelar"}),n.jsx(Zi,{onClick:ge,className:"bg-red-500 hover:bg-red-600 text-white",children:"Excluir"})]})]})})]}):null}function Xb({mode:e}){var ge,W;const[t,r]=v.useState([]),[s,a]=v.useState(null),[o,c]=v.useState(!1),[u,f]=v.useState(!1),[p,x]=v.useState([]),[w,_]=v.useState(0),[j,N]=v.useState(!1),[C,T]=v.useState(!1),[E,S]=v.useState(null),[b,k]=v.useState(!1),[O,L]=v.useState("user"),[P,M]=v.useState(null),{user:R}=bt();v.useEffect(()=>{if(!R)return;$();const J=U.channel("stories-changes").on("postgres_changes",{event:"*",schema:"public",table:"stories"},()=>{$()}).subscribe();return()=>{U.removeChannel(J)}},[R]);const $=async()=>{if(!R)return;let J=[R.id],G=[];if(e==="nearby"){const{data:ue}=await U.from("profiles").select("latitude, longitude").eq("user_id",R.id).single();if(!(ue!=null&&ue.latitude)||!(ue!=null&&ue.longitude)){r([]),a(null);return}const{data:Fe}=await U.from("profiles").select("user_id, display_name, avatar_url, latitude, longitude").not("latitude","is",null).not("longitude","is",null);if(!Fe){r([]),a(null);return}const _e=Fe.filter(be=>{if(be.user_id===R.id)return!0;const ze=6371e3,He=ue.latitude*Math.PI/180,Ft=be.latitude*Math.PI/180,pe=(be.latitude-ue.latitude)*Math.PI/180,Je=(be.longitude-ue.longitude)*Math.PI/180,at=Math.sin(pe/2)*Math.sin(pe/2)+Math.cos(He)*Math.cos(Ft)*Math.sin(Je/2)*Math.sin(Je/2),it=2*Math.atan2(Math.sqrt(at),Math.sqrt(1-at));return ze*it<=100}).map(be=>be.user_id);J=_e;const{data:Ze}=await U.from("profiles").select("user_id, story_visible_to").in("user_id",_e);G=(Ze==null?void 0:Ze.filter(be=>be.story_visible_to==="both"||be.story_visible_to==="nearby_only").map(be=>be.user_id))||[],G.includes(R.id)||G.push(R.id)}else if(e==="friends"){const{data:ue}=await U.from("friendships").select("user_id, friend_id").eq("status","accepted").or(`user_id.eq.${R.id},friend_id.eq.${R.id}`),Fe=(ue==null?void 0:ue.map(Ze=>Ze.user_id===R.id?Ze.friend_id:Ze.user_id))||[];J=[R.id,...Fe];const{data:_e}=await U.from("profiles").select("user_id, story_visible_to").in("user_id",J);G=(_e==null?void 0:_e.filter(Ze=>Ze.story_visible_to==="both"||Ze.story_visible_to==="friends_only").map(Ze=>Ze.user_id))||[],G.includes(R.id)||G.push(R.id)}if(J.length===0||G.length===0){r([]),a(null);return}const{data:se}=await U.from("stories").select("*").in("user_id",G).gt("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});if(!se||se.length===0){r([]),a(null);return}const{data:ce}=await U.from("story_views").select("story_id").eq("viewer_id",R.id),ne=new Set((ce==null?void 0:ce.map(ue=>ue.story_id))||[]),he=new Map;se.forEach(ue=>{he.has(ue.user_id)||he.set(ue.user_id,[]),he.get(ue.user_id).push(ue)});const{data:Ae}=await U.from("profiles").select("user_id, display_name, avatar_url").in("user_id",Array.from(he.keys())),Pe=new Map((Ae==null?void 0:Ae.map(ue=>[ue.user_id,ue]))||[]),Be=[];let Ee=null;he.forEach((ue,Fe)=>{const _e=Pe.get(Fe),Ze=ue.some(ze=>!ne.has(ze.id)),be={user_id:Fe,user_name:(_e==null?void 0:_e.display_name)||"Usurio",user_avatar:(_e==null?void 0:_e.avatar_url)||"",stories:ue.map(ze=>({...ze,user_name:(_e==null?void 0:_e.display_name)||"Usurio",user_avatar:(_e==null?void 0:_e.avatar_url)||""})),hasUnviewed:Ze};Fe===R.id?Ee=be:Be.push(be)}),Be.sort((ue,Fe)=>ue.hasUnviewed&&!Fe.hasUnviewed?-1:!ue.hasUnviewed&&Fe.hasUnviewed?1:0),r(Be),a(Ee)},Y=async J=>{if(!R||!J.target.files||J.target.files.length===0)return;const G=J.target.files[0];E&&(E.getTracks().forEach(se=>se.stop()),S(null)),T(!1),await te(G),J.target.value=""},z=async()=>{try{const J=await navigator.mediaDevices.getUserMedia({video:{facingMode:O},audio:!1});S(J),T(!0),N(!1),k(!1)}catch(J){console.error("Error accessing camera:",J),X.error("Erro ao acessar a cmera")}},q=async()=>{E&&E.getTracks().forEach(G=>G.stop());const J=O==="user"?"environment":"user";L(J);try{const G=await navigator.mediaDevices.getUserMedia({video:{facingMode:J},audio:!1});S(G)}catch(G){console.error("Error switching camera:",G),X.error("Erro ao trocar cmera")}},ee=async()=>{if(E)try{const J=document.getElementById("camera-preview");if(!J)return;const G=document.createElement("canvas");G.width=J.videoWidth,G.height=J.videoHeight;const se=G.getContext("2d");O==="user"&&(se==null||se.translate(G.width,0),se==null||se.scale(-1,1)),se==null||se.drawImage(J,0,0);const ce=G.toDataURL("image/jpeg",.95);M(ce)}catch(J){console.error("Error capturing photo:",J),X.error("Erro ao capturar foto")}},H=()=>{M(null)},re=async()=>{if(P)try{const G=await(await fetch(P)).blob(),se=new File([G],`camera-${Date.now()}.jpg`,{type:"image/jpeg"});E&&(E.getTracks().forEach(ce=>ce.stop()),S(null)),T(!1),M(null),await te(se)}catch(J){console.error("Error posting photo:",J),X.error("Erro ao postar foto")}},ae=()=>{const J=document.getElementById("story-upload");J&&J.click()},ie=()=>{E&&(E.getTracks().forEach(J=>J.stop()),S(null)),T(!1),M(null)};v.useEffect(()=>()=>{E&&E.getTracks().forEach(J=>J.stop())},[E]);const te=async J=>{if(R){if(J.size>5*1024*1024){X.error("A imagem deve ter no mximo 5MB");return}c(!0);try{const G=J.name.split(".").pop(),se=`${Date.now()}.${G}`,ce=`stories/${R.id}/${se}`,{error:ne}=await U.storage.from("user-uploads").upload(ce,J);if(ne)throw ne;const{data:{publicUrl:he}}=U.storage.from("user-uploads").getPublicUrl(ce),{data:Ae,error:Pe}=await U.from("stories").insert({user_id:R.id,image_url:he}).select().single();if(Pe)throw Pe;a(Be=>{var Fe,_e;const Ee=Be??{user_id:R.id,user_name:((Fe=R==null?void 0:R.user_metadata)==null?void 0:Fe.display_name)||"Voc",user_avatar:((_e=R==null?void 0:R.user_metadata)==null?void 0:_e.avatar_url)||"",stories:[],hasUnviewed:!0},ue=[{id:(Ae==null?void 0:Ae.id)||`${Date.now()}`,user_id:R.id,image_url:he,created_at:(Ae==null?void 0:Ae.created_at)||new Date().toISOString(),user_name:Ee.user_name,user_avatar:Ee.user_avatar},...Ee.stories];return{...Ee,stories:ue,hasUnviewed:!0}}),X.success("Story publicado!"),$()}catch(G){console.error("Error uploading story:",G),X.error("Erro ao publicar story")}finally{c(!1)}}},ye=(J,G=0)=>{x(J),_(G),f(!0)};return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"bg-card rounded-lg p-4 shadow-card mb-4",children:n.jsx(Qo,{className:"w-full",children:n.jsxs("div",{className:"flex gap-3 pb-2",children:[n.jsxs("div",{className:"flex flex-col items-center gap-1 min-w-[70px]",children:[n.jsx("div",{className:"relative",children:s&&s.stories.length>0?n.jsx("div",{className:"rounded-full p-[3px] bg-green-500 cursor-pointer",onClick:()=>k(!0),children:n.jsx("div",{className:"bg-background rounded-full p-[2px]",children:n.jsxs($t,{className:"h-14 w-14",children:[n.jsx(Kt,{src:(ge=R==null?void 0:R.user_metadata)==null?void 0:ge.avatar_url}),n.jsx(Vt,{children:"Eu"})]})})}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-full p-[3px] bg-gray-600",children:n.jsx("div",{className:"bg-background rounded-full p-[2px]",children:n.jsx("div",{onClick:z,className:"cursor-pointer",children:n.jsxs($t,{className:"h-14 w-14",children:[n.jsx(Kt,{src:(W=R==null?void 0:R.user_metadata)==null?void 0:W.avatar_url}),n.jsx(Vt,{children:"Eu"})]})})})}),n.jsx("div",{className:"absolute bottom-0 right-0 bg-primary rounded-full p-1 z-10 cursor-pointer",onClick:z,children:o?n.jsx(ka,{className:"h-3 w-3 text-white animate-spin"}):n.jsx(Uc,{className:"h-3 w-3 text-white"})})]})}),n.jsx("span",{className:"text-xs text-muted-foreground text-center line-clamp-1",children:"Seu story"})]}),n.jsx("input",{id:"story-upload",type:"file",accept:"image/jpeg,image/png,image/jpg,image/webp",className:"hidden",onChange:Y,disabled:o}),t.map(J=>n.jsxs("div",{className:"flex flex-col items-center gap-1 min-w-[70px] cursor-pointer",onClick:()=>ye(J.stories,0),children:[n.jsx("div",{className:`rounded-full p-[3px] ${J.hasUnviewed?"bg-gradient-to-tr from-yellow-400 to-pink-600":"bg-gray-600"}`,children:n.jsx("div",{className:"bg-background rounded-full p-[2px]",children:n.jsxs($t,{className:"h-14 w-14",children:[n.jsx(Kt,{src:J.user_avatar}),n.jsx(Vt,{children:J.user_name.charAt(0)})]})})}),n.jsx("span",{className:"text-xs text-muted-foreground text-center line-clamp-1 max-w-[70px]",children:J.user_name})]},J.user_id))]})})}),p.length>0&&n.jsx(zU,{stories:p,initialIndex:w,open:u,onOpenChange:f,onStoryDeleted:J=>{J&&a(null),x([]),$()}}),n.jsx(Ut,{open:b,onOpenChange:k,children:n.jsxs(Bt,{className:"bg-surface border-border max-w-sm",children:[n.jsx(xr,{children:n.jsx(vr,{children:"Seu Story"})}),n.jsxs("div",{className:"space-y-3 py-4",children:[n.jsxs(K,{onClick:()=>{k(!1),s&&ye(s.stories,0)},className:"w-full h-14 text-base",variant:"outline",children:[n.jsx(Go,{className:"h-5 w-5 mr-3"}),"Ver Story"]}),n.jsxs(K,{onClick:()=>{k(!1),z()},className:"w-full h-14 text-base",variant:"outline",children:[n.jsx(Cn,{className:"h-5 w-5 mr-3"}),"Tirar Nova Foto"]})]})]})}),n.jsx(Ut,{open:C,onOpenChange:ie,children:n.jsx(Bt,{className:"max-w-full w-full h-full p-0 m-0 overflow-hidden bg-black border-none",children:n.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[P?n.jsx("img",{src:P,alt:"Captured",className:"w-full h-full object-contain"}):n.jsx("video",{id:"camera-preview",autoPlay:!0,playsInline:!0,muted:!0,ref:J=>{J&&E&&(J.srcObject=E)},className:"w-full h-full object-cover",style:{transform:O==="user"?"scaleX(-1)":"none"}}),n.jsxs("div",{className:"absolute top-0 left-0 right-0 flex justify-between items-center p-4 bg-gradient-to-b from-black/50 to-transparent",children:[n.jsx("button",{onClick:ie,className:"p-2 rounded-full hover:bg-white/10 transition-smooth",children:n.jsx(sr,{className:"h-6 w-6 text-white"})}),!P&&n.jsx("button",{onClick:q,className:"p-2 rounded-full hover:bg-white/10 transition-smooth",children:n.jsx(Rj,{className:"h-6 w-6 text-white"})})]}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 pb-8 bg-gradient-to-t from-black/70 to-transparent",children:P?n.jsxs("div",{className:"flex justify-center items-center gap-8 px-8",children:[n.jsx(K,{onClick:H,size:"lg",variant:"ghost",className:"rounded-full w-16 h-16 bg-white/10 hover:bg-white/20 border border-white/30",children:n.jsx(sr,{className:"h-6 w-6 text-white"})}),n.jsx(K,{onClick:re,size:"lg",className:"rounded-full w-16 h-16 bg-primary hover:bg-primary-glow",disabled:o,children:o?n.jsx(ka,{className:"h-6 w-6 animate-spin"}):n.jsx(Xn,{className:"h-6 w-6"})})]}):n.jsxs("div",{className:"flex justify-center items-center gap-8 px-8",children:[n.jsx("button",{onClick:ae,className:"w-12 h-12 rounded-lg border-2 border-white/50 bg-white/10 hover:bg-white/20 transition-smooth flex items-center justify-center",children:n.jsx(Wi,{className:"h-6 w-6 text-white"})}),n.jsx("button",{onClick:ee,className:"w-20 h-20 rounded-full bg-white hover:bg-white/90 transition-smooth flex items-center justify-center",children:n.jsx("div",{className:"w-16 h-16 rounded-full border-4 border-black"})}),n.jsx("div",{className:"w-12 h-12"})," "]})})]})})})]})}function Gu(e){const t=v.useRef({value:e,previous:e});return v.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Cv="Radio",[UU,n3]=Mr(Cv),[$U,VU]=UU(Cv),s3=v.forwardRef((e,t)=>{const{__scopeRadio:r,name:s,checked:a=!1,required:o,disabled:c,value:u="on",onCheck:f,form:p,...x}=e,[w,_]=v.useState(null),j=tt(t,T=>_(T)),N=v.useRef(!1),C=w?p||!!w.closest("form"):!0;return n.jsxs($U,{scope:r,checked:a,disabled:c,children:[n.jsx(qe.button,{type:"button",role:"radio","aria-checked":a,"data-state":l3(a),"data-disabled":c?"":void 0,disabled:c,value:u,...x,ref:j,onClick:Ie(e.onClick,T=>{a||f==null||f(),C&&(N.current=T.isPropagationStopped(),N.current||T.stopPropagation())})}),C&&n.jsx(o3,{control:w,bubbles:!N.current,name:s,value:u,checked:a,required:o,disabled:c,form:p,style:{transform:"translateX(-100%)"}})]})});s3.displayName=Cv;var a3="RadioIndicator",i3=v.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:s,...a}=e,o=VU(a3,r);return n.jsx(Hr,{present:s||o.checked,children:n.jsx(qe.span,{"data-state":l3(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:t})})});i3.displayName=a3;var qU="RadioBubbleInput",o3=v.forwardRef(({__scopeRadio:e,control:t,checked:r,bubbles:s=!0,...a},o)=>{const c=v.useRef(null),u=tt(c,o),f=Gu(r),p=Ou(t);return v.useEffect(()=>{const x=c.current;if(!x)return;const w=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(w,"checked").set;if(f!==r&&j){const N=new Event("click",{bubbles:s});j.call(x,r),x.dispatchEvent(N)}},[f,r,s]),n.jsx(qe.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:u,style:{...a.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});o3.displayName=qU;function l3(e){return e?"checked":"unchecked"}var WU=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],rp="RadioGroup",[HU]=Mr(rp,[Xc,n3]),c3=Xc(),d3=n3(),[GU,XU]=HU(rp),u3=v.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:s,defaultValue:a,value:o,required:c=!1,disabled:u=!1,orientation:f,dir:p,loop:x=!0,onValueChange:w,..._}=e,j=c3(r),N=pl(p),[C,T]=Os({prop:o,defaultProp:a??null,onChange:w,caller:rp});return n.jsx(GU,{scope:r,name:s,required:c,disabled:u,value:C,onValueChange:T,children:n.jsx(pv,{asChild:!0,...j,orientation:f,dir:N,loop:x,children:n.jsx(qe.div,{role:"radiogroup","aria-required":c,"aria-orientation":f,"data-disabled":u?"":void 0,dir:N,..._,ref:t})})})});u3.displayName=rp;var h3="RadioGroupItem",f3=v.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:s,...a}=e,o=XU(h3,r),c=o.disabled||s,u=c3(r),f=d3(r),p=v.useRef(null),x=tt(t,p),w=o.value===a.value,_=v.useRef(!1);return v.useEffect(()=>{const j=C=>{WU.includes(C.key)&&(_.current=!0)},N=()=>_.current=!1;return document.addEventListener("keydown",j),document.addEventListener("keyup",N),()=>{document.removeEventListener("keydown",j),document.removeEventListener("keyup",N)}},[]),n.jsx(gv,{asChild:!0,...u,focusable:!c,active:w,children:n.jsx(s3,{disabled:c,required:o.required,checked:w,...f,...a,name:o.name,ref:x,onCheck:()=>o.onValueChange(a.value),onKeyDown:Ie(j=>{j.key==="Enter"&&j.preventDefault()}),onFocus:Ie(a.onFocus,()=>{var j;_.current&&((j=p.current)==null||j.click())})})})});f3.displayName=h3;var KU="RadioGroupIndicator",m3=v.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...s}=e,a=d3(r);return n.jsx(i3,{...a,...s,ref:t})});m3.displayName=KU;var p3=u3,g3=f3,YU=m3;const zi=v.forwardRef(({className:e,...t},r)=>n.jsx(p3,{className:Le("grid gap-2",e),...t,ref:r}));zi.displayName=p3.displayName;const sn=v.forwardRef(({className:e,...t},r)=>n.jsx(g3,{ref:r,className:Le("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:n.jsx(YU,{className:"flex items-center justify-center",children:n.jsx(Cj,{className:"h-2.5 w-2.5 fill-current text-current"})})}));sn.displayName=g3.displayName;function QU(){const[e,t]=v.useState(!1),[r,s]=v.useState("both"),[a,o]=v.useState(!1),{user:c}=bt();v.useEffect(()=>{e&&c&&u()},[e,c]);const u=async()=>{if(!c)return;const{data:p}=await U.from("profiles").select("story_visible_to").eq("user_id",c.id).single();p&&s(p.story_visible_to||"both")},f=async()=>{if(c){o(!0);try{const{error:p}=await U.from("profiles").update({story_visible_to:r}).eq("user_id",c.id);if(p)throw p;X.success("Configuraes salvas!"),t(!1)}catch(p){console.error("Error saving settings:",p),X.error("Erro ao salvar configuraes")}finally{o(!1)}}};return n.jsxs(Ut,{open:e,onOpenChange:t,children:[n.jsx(nS,{asChild:!0,children:n.jsx(K,{variant:"ghost",size:"icon",children:n.jsx(Bo,{className:"h-5 w-5"})})}),n.jsxs(Bt,{className:"bg-surface border-border",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Configuraes de Stories"}),n.jsx(is,{children:"Escolha quem pode ver seus stories"})]}),n.jsx("div",{className:"space-y-4 py-4",children:n.jsxs(zi,{value:r,onValueChange:s,children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(sn,{value:"both",id:"both"}),n.jsx(de,{htmlFor:"both",className:"cursor-pointer",children:"Todos (amigos e pessoas prximas)"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(sn,{value:"friends_only",id:"friends_only"}),n.jsx(de,{htmlFor:"friends_only",className:"cursor-pointer",children:"Apenas amigos"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(sn,{value:"nearby_only",id:"nearby_only"}),n.jsx(de,{htmlFor:"nearby_only",className:"cursor-pointer",children:"Apenas pessoas prximas"})]})]})}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(K,{variant:"outline",onClick:()=>t(!1),children:"Cancelar"}),n.jsx(K,{onClick:f,disabled:a,children:a?"Salvando...":"Salvar"})]})]})]})}const ZU=({person:e,handleLike:t,handleMessage:r,likedUsers:s,unreadMessages:a,onFriendshipChange:o})=>{const{friendshipStatus:c,loading:u,addFriend:f,removeFriend:p}=uz(e.user_id),[x,w]=v.useState(null),_=async()=>{c==="accepted"?await p():await f(),o()};return n.jsxs("div",{className:"bg-card rounded-lg p-4 shadow-card",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"avatar-story cursor-pointer",onClick:()=>w(e.avatar),children:n.jsxs($t,{className:"h-12 w-12",children:[n.jsx(Kt,{src:e.avatar,alt:e.name}),n.jsx(Vt,{className:"bg-surface",children:e.name.charAt(0)})]})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h3",{className:"font-medium text-foreground",children:e.name}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:[" ",e.distance]}),e.isFriend&&n.jsx(dt,{className:"bg-green-500/20 text-green-400 border-0 text-xs",children:" Amigo"})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[n.jsxs(dt,{className:`${e.interest==="curtio"?"bg-yellow-500/20 text-yellow-400":e.interest==="namoro"?"bg-red-500/20 text-red-400":e.interest==="amizade"?"bg-blue-500/20 text-blue-400":"bg-green-500/20 text-green-400"} border-0`,children:[n.jsx("span",{className:"mr-1",children:e.interest==="curtio"?"":e.interest==="namoro"?"":e.interest==="amizade"?"":""}),e.interest]}),n.jsxs(dt,{className:`${e.relationship_status==="solteiro"?"bg-green-500/20 text-green-400":e.relationship_status==="namorando"?"bg-pink-500/20 text-pink-400":e.relationship_status==="casado"?"bg-purple-500/20 text-purple-400":e.relationship_status==="relacionamento_aberto"?"bg-orange-500/20 text-orange-400":"bg-gray-500/20 text-gray-400"} border-0 text-xs`,children:[n.jsx("span",{className:"mr-1",children:e.relationship_status==="solteiro"?"":e.relationship_status==="namorando"?"":e.relationship_status==="casado"?"":e.relationship_status==="relacionamento_aberto"?"":""}),e.relationship_status==="solteiro"?"Solteiro(a)":e.relationship_status==="namorando"?"Namorando":e.relationship_status==="casado"?"Casado(a)":e.relationship_status==="relacionamento_aberto"?"Relacionamento Aberto":"No informado"]})]}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2 line-clamp-2",children:e.note}),n.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-muted-foreground",children:[n.jsx(Rt,{className:"h-3 w-3"}),n.jsx("span",{children:e.event_name})]}),n.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[e.instagram&&n.jsxs("a",{href:e.instagram,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm text-primary hover:text-primary-glow transition-smooth",children:[n.jsx(Hi,{className:"h-4 w-4"}),n.jsx("span",{children:"Instagram"})]}),e.phone&&n.jsxs("a",{href:`https://wa.me/${e.phone.replace(/\D/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm text-primary hover:text-primary-glow transition-smooth",children:[n.jsx(zc,{className:"h-4 w-4"}),n.jsx("span",{children:"WhatsApp"})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx(K,{variant:c==="accepted"?"default":"outline",size:"sm",onClick:_,disabled:u,className:c==="accepted"?"text-green-400 bg-green-500/20 border-green-500":"",children:c==="accepted"?n.jsx(Oj,{className:"h-4 w-4"}):n.jsx(bm,{className:"h-4 w-4"})}),n.jsx(K,{variant:s.has(e.user_id)?"default":"outline",size:"sm",onClick:()=>t(e.user_id),children:n.jsx(Qa,{className:"h-4 w-4",fill:s.has(e.user_id)?"currentColor":"none"})}),n.jsxs(K,{variant:"outline",size:"sm",onClick:()=>r(e),className:"relative",children:[n.jsx(Ds,{className:"h-4 w-4"}),a.get(e.user_id)&&a.get(e.user_id)>0&&n.jsx(dt,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 p-0 flex items-center justify-center text-xs rounded-full",children:a.get(e.user_id)})]})]})]}),n.jsx(Ut,{open:!!x,onOpenChange:()=>w(null),children:n.jsxs(Bt,{className:"max-w-2xl p-0 overflow-hidden bg-background/95 backdrop-blur-lg border border-border",children:[n.jsx("button",{onClick:()=>w(null),className:"absolute top-4 right-4 z-50 p-2 rounded-full bg-surface/80 hover:bg-surface transition-smooth",children:n.jsx(sr,{className:"h-5 w-5 text-foreground"})}),x&&n.jsx("img",{src:x,alt:"Profile",className:"w-full h-auto max-h-[80vh] object-contain"})]})})]})};function u0({onBack:e}){const[t,r]=v.useState("nearby"),[s,a]=v.useState(!1),[o,c]=v.useState([]),[u,f]=v.useState([]),[p,x]=v.useState(!0),[w,_]=v.useState(new Set),[j,N]=v.useState(!1),[C,T]=v.useState(null),[E,S]=v.useState(new Map),[b,k]=v.useState(null),[O,L]=v.useState(null),[P,M]=v.useState("curtio"),[R,$]=v.useState(""),[Y,z]=v.useState(!0),{user:q}=bt();_t();const{position:ee,error:H}=ev({watch:s,enableHighAccuracy:!0,timeout:27e3,maximumAge:3e4});v.useEffect(()=>{if(!q||!s||!ee)return;(async()=>{k(ee),L(null),await U.from("profiles").update({latitude:ee.lat,longitude:ee.lon,location_updated_at:new Date().toISOString()}).eq("user_id",q.id)})()},[q,s,ee]),v.useEffect(()=>{H&&L(H)},[H]),v.useEffect(()=>{(async()=>{if(!q)return;const{data:W,error:J}=await U.from("profiles").select("find_friends_visible, interest, notes, notes_visible").eq("user_id",q.id).single();W&&!J&&(a(W.find_friends_visible??!1),M(W.interest||"curtio"),$(W.notes||""),z(W.notes_visible??!0))})()},[q]);const re=async()=>{if(!q){X.error("Faa login para usar esta funcionalidade");return}const ge=!s;a(ge);const{error:W}=await U.from("profiles").update({find_friends_visible:ge}).eq("user_id",q.id);W?(console.error("Error updating visibility:",W),X.error("Erro ao atualizar visibilidade"),a(!ge)):X.success(ge?"Voc est visvel para outros":"Voc est invisvel")};v.useEffect(()=>{(async()=>{if(!q)return;const{data:W,error:J}=await U.from("user_likes").select("to_user_id").eq("from_user_id",q.id);W&&!J&&_(new Set(W.map(G=>G.to_user_id)))})()},[q]),v.useEffect(()=>{(async()=>{if(q)try{const{data:W,error:J}=await U.from("friendships").select("user_id, friend_id").eq("status","accepted").or(`user_id.eq.${q.id},friend_id.eq.${q.id}`);if(J){console.error("Error fetching friendships:",J);return}const G=(W==null?void 0:W.map(he=>he.user_id===q.id?he.friend_id:he.user_id))||[];if(G.length===0){f([]);return}const{data:se,error:ce}=await U.from("profiles").select("user_id, display_name, avatar_url, notes, instagram_url, phone, interest, relationship_status, latitude, longitude").in("user_id",G);if(ce){console.error("Error fetching friend profiles:",ce);return}const ne=(se||[]).map(he=>{let Ae="Amigo";if(he.latitude&&he.longitude&&b){const Be=b.lat*Math.PI/180,Ee=he.latitude*Math.PI/180,ue=(he.latitude-b.lat)*Math.PI/180,Fe=(he.longitude-b.lon)*Math.PI/180,_e=Math.sin(ue/2)*Math.sin(ue/2)+Math.cos(Be)*Math.cos(Ee)*Math.sin(Fe/2)*Math.sin(Fe/2),be=6371e3*(2*Math.atan2(Math.sqrt(_e),Math.sqrt(1-_e)));be<1e3?Ae=`${Math.round(be)}m`:Ae=`${(be/1e3).toFixed(1)}km`}return{id:he.user_id,user_id:he.user_id,name:he.display_name||"Usurio",avatar:he.avatar_url||"",interest:he.interest||"curtio",note:he.notes||"Seu amigo",distance:Ae,instagram:he.instagram_url||"",phone:he.phone||null,event_name:"Amigo",relationship_status:he.relationship_status||"preferencia_nao_informar",isFriend:!0}});if(f(ne),ne.length>0){const{data:he}=await U.from("user_messages").select("from_user_id").eq("to_user_id",q.id).in("from_user_id",G).eq("read",!1);if(he){const Ae=new Map;he.forEach(Pe=>{Ae.set(Pe.from_user_id,(Ae.get(Pe.from_user_id)||0)+1)}),S(Pe=>new Map([...Pe,...Ae]))}}}catch(W){console.error("Error fetching friends:",W)}})()},[q]),v.useEffect(()=>{let ge=null;return(async()=>{if(!q){x(!1);return}if(!s){c([]),x(!1);return}if(!b){c([]),x(!1);return}try{const{data:J,error:G}=await U.from("friendships").select("user_id, friend_id").eq("status","accepted").or(`user_id.eq.${q.id},friend_id.eq.${q.id}`);G&&console.error("Error fetching friendships:",G);const se=(J==null?void 0:J.map(Ee=>Ee.user_id===q.id?Ee.friend_id:Ee.user_id))||[],ce=new Date(Date.now()-2*60*60*1e3).toISOString(),{data:ne,error:he}=await U.from("profiles").select("user_id, display_name, avatar_url, notes, notes_visible, find_friends_visible, instagram_url, phone, interest, relationship_status, latitude, longitude, location_updated_at").eq("find_friends_visible",!0).neq("user_id",q.id).not("latitude","is",null).not("longitude","is",null).gte("location_updated_at",ce);if(he){console.error("Error fetching profiles:",he),x(!1);return}if(!ne||ne.length===0){c([]),x(!1);return}const Ae=ne.map(Ee=>{const Fe=b.lat*Math.PI/180,_e=Ee.latitude*Math.PI/180,Ze=(Ee.latitude-b.lat)*Math.PI/180,be=(Ee.longitude-b.lon)*Math.PI/180,ze=Math.sin(Ze/2)*Math.sin(Ze/2)+Math.cos(Fe)*Math.cos(_e)*Math.sin(be/2)*Math.sin(be/2),Ft=6371e3*(2*Math.atan2(Math.sqrt(ze),Math.sqrt(1-ze)));return{profile:Ee,distance:Ft}}).filter(({distance:Ee})=>Ee<=5e3).map(({profile:Ee,distance:ue})=>({id:Ee.user_id,user_id:Ee.user_id,name:Ee.display_name||"Usurio",avatar:Ee.avatar_url||"",interest:Ee.interest||"curtio",note:Ee.notes||"Est prximo de voc",distance:`${Math.round(ue)}m`,instagram:Ee.instagram_url||"",phone:Ee.phone||null,event_name:"Prximo",relationship_status:Ee.relationship_status||"preferencia_nao_informar",isFriend:se.includes(Ee.user_id)})).sort((Ee,ue)=>{const Fe=parseFloat(Ee.distance),_e=parseFloat(ue.distance);return Fe-_e});c(Ae);const Pe=Ae.map(Ee=>Ee.user_id);if(Pe.length>0){const{data:Ee}=await U.from("user_messages").select("from_user_id").eq("to_user_id",q.id).in("from_user_id",Pe).eq("read",!1);if(Ee){const ue=new Map;Ee.forEach(Fe=>{ue.set(Fe.from_user_id,(ue.get(Fe.from_user_id)||0)+1)}),S(ue)}}const Be=Ae.map(Ee=>Ee.user_id);ge=U.channel("profiles-and-messages-updates").on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles"},Ee=>{const ue=Ee.new;Be.includes(ue.user_id)&&c(Fe=>Fe.map(_e=>_e.user_id===ue.user_id?{..._e,note:ue.notes||_e.note,relationship_status:ue.relationship_status||_e.relationship_status,interest:ue.interest||_e.interest}:_e))}).on("postgres_changes",{event:"INSERT",schema:"public",table:"user_messages"},Ee=>{const ue=Ee.new;ue.to_user_id===q.id&&Be.includes(ue.from_user_id)&&S(Fe=>{const _e=new Map(Fe);return _e.set(ue.from_user_id,(_e.get(ue.from_user_id)||0)+1),_e})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"user_messages"},Ee=>{const ue=Ee.new;ue.read&&ue.to_user_id===q.id&&U.from("user_messages").select("id").eq("to_user_id",q.id).eq("from_user_id",ue.from_user_id).eq("read",!1).then(({data:Fe})=>{S(_e=>{const Ze=new Map(_e);return Fe&&Fe.length>0?Ze.set(ue.from_user_id,Fe.length):Ze.delete(ue.from_user_id),Ze})})}).subscribe()}catch(J){console.error("Error:",J)}finally{x(!1)}})(),()=>{ge&&U.removeChannel(ge)}},[q,s,b]);const ae=async ge=>{if(!q){X.error("Faa login para curtir perfis");return}try{if(w.has(ge)){const{error:J}=await U.from("user_likes").delete().eq("from_user_id",q.id).eq("to_user_id",ge);if(J)throw J;_(G=>{const se=new Set(G);return se.delete(ge),se}),X.success("Curtida removida")}else{const{error:J}=await U.from("user_likes").insert({from_user_id:q.id,to_user_id:ge});if(J)throw J;_(G=>new Set(G).add(ge)),X.success("Perfil curtido! A pessoa receber uma notificao")}}catch(W){console.error("Error liking user:",W),X.error("Erro ao curtir perfil")}},ie=async ge=>{T(ge),N(!0),S(W=>{const J=new Map(W);return J.delete(ge.user_id),J})},te=async()=>{if(!q)return;const{data:ge,error:W}=await U.from("friendships").select("user_id, friend_id").eq("status","accepted").or(`user_id.eq.${q.id},friend_id.eq.${q.id}`);if(W){console.error("Error fetching friendships:",W);return}const J=(ge==null?void 0:ge.map(ne=>ne.user_id===q.id?ne.friend_id:ne.user_id))||[];if(J.length===0){f([]),c(ne=>ne.map(he=>({...he,isFriend:!1})));return}const{data:G,error:se}=await U.from("profiles").select("user_id, display_name, avatar_url, notes, instagram_url, phone, interest, relationship_status, latitude, longitude").in("user_id",J);if(se){console.error("Error fetching friend profiles:",se);return}const ce=(G||[]).map(ne=>{let he="Amigo";if(ne.latitude&&ne.longitude&&b){const Pe=b.lat*Math.PI/180,Be=ne.latitude*Math.PI/180,Ee=(ne.latitude-b.lat)*Math.PI/180,ue=(ne.longitude-b.lon)*Math.PI/180,Fe=Math.sin(Ee/2)*Math.sin(Ee/2)+Math.cos(Pe)*Math.cos(Be)*Math.sin(ue/2)*Math.sin(ue/2),Ze=6371e3*(2*Math.atan2(Math.sqrt(Fe),Math.sqrt(1-Fe)));Ze<1e3?he=`${Math.round(Ze)}m`:he=`${(Ze/1e3).toFixed(1)}km`}return{id:ne.user_id,user_id:ne.user_id,name:ne.display_name||"Usurio",avatar:ne.avatar_url||"",interest:ne.interest||"curtio",note:ne.notes||"Seu amigo",distance:he,instagram:ne.instagram_url||"",phone:ne.phone||null,event_name:"Amigo",relationship_status:ne.relationship_status||"preferencia_nao_informar",isFriend:!0}});f(ce),c(ne=>ne.map(he=>({...he,isFriend:J.includes(he.user_id)})))},ye=t==="nearby"?o:u;return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsxs("header",{className:"sticky top-0 z-40 bg-background/80 backdrop-blur-md border-b border-border",children:[n.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 max-w-md mx-auto",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsx("div",{className:"flex-1",children:n.jsx("h1",{className:"font-bold text-foreground",children:"Conectar"})}),n.jsx(QU,{})]}),n.jsxs("div",{className:"flex gap-2 px-4 pb-3 max-w-md mx-auto",children:[n.jsxs(K,{variant:t==="nearby"?"default":"outline",className:"flex-1 rounded-full",onClick:()=>r("nearby"),children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Prximos"]}),n.jsxs(K,{variant:t==="friends"?"default":"outline",className:"flex-1 rounded-full",onClick:()=>r("friends"),children:[n.jsx(er,{className:"h-4 w-4 mr-2"}),"Amigos"]})]})]}),n.jsxs("div",{className:"px-4 py-6 pb-24 max-w-md mx-auto",children:[t==="nearby"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"mb-4",children:n.jsxs(K,{variant:s?"default":"outline",onClick:re,className:"w-full h-11",children:[n.jsx(Go,{className:"h-4 w-4 mr-2"}),s?"Visvel":"Ser Visto"]})}),s&&n.jsxs("div",{className:"mb-4 p-3 bg-card rounded-lg border border-border",children:[n.jsx("h3",{className:"font-medium text-sm text-foreground mb-2",children:"Como voc quer aparecer"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{children:n.jsxs("select",{className:"w-full px-3 py-1.5 bg-surface border border-border rounded-lg text-sm text-foreground",value:P,onChange:async ge=>{q&&(M(ge.target.value),await U.from("profiles").update({interest:ge.target.value}).eq("user_id",q.id),X.success("Interesse atualizado"))},children:[n.jsx("option",{value:"curtio",children:" Curtio"}),n.jsx("option",{value:"namoro",children:" Namoro"}),n.jsx("option",{value:"amizade",children:" Amizade"}),n.jsx("option",{value:"network",children:" Network"})]})}),n.jsx("div",{children:n.jsx("textarea",{className:"w-full px-3 py-1.5 bg-surface border border-border rounded-lg text-sm text-foreground resize-none",rows:2,placeholder:"Escreva algo sobre voc...",value:R,onChange:ge=>$(ge.target.value),onBlur:async ge=>{q&&(await U.from("profiles").update({notes:ge.target.value}).eq("user_id",q.id),X.success("Notas atualizadas"))}})})]})]}),n.jsxs("div",{className:"mb-6 p-4 bg-surface rounded-lg border border-primary/20",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Rt,{className:"h-5 w-5 text-primary"}),n.jsx("span",{className:"font-medium text-foreground",children:s?"Voc est visvel para outros":"Pessoas prximas"})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:s?O||(b?"Outras pessoas at 100m de voc podem te encontrar.":"Aguardando sua localizao para encontrar pessoas prximas..."):"Conecte-se com pessoas at 100 metros de voc. Para aparecer para outros, ative 'Ser Visto'."})]}),s&&b&&n.jsx(Xb,{mode:"nearby"})]}),t==="friends"&&n.jsxs(n.Fragment,{children:[n.jsx(Xb,{mode:"friends"}),n.jsxs("div",{className:"mb-6 p-4 bg-surface rounded-lg border border-primary/20",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(er,{className:"h-5 w-5 text-primary"}),n.jsx("span",{className:"font-medium text-foreground",children:"Seus Amigos"})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:u.length===0?"Voc ainda no tem amigos adicionados. V para 'Prximos' e adicione pessoas prximas!":`Voc tem ${u.length} ${u.length===1?"amigo":"amigos"}. Seus amigos sempre aparecem aqui, no importa a distncia.`})]})]}),p&&t==="nearby"?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Procurando pessoas..."})]}):ye.length>0?n.jsx("div",{className:"space-y-4 pb-4",children:ye.map(ge=>n.jsx(ZU,{person:ge,handleLike:ae,handleMessage:ie,likedUsers:w,unreadMessages:E,onFriendshipChange:te},ge.id))}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(er,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),t==="nearby"?n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-muted-foreground",children:s?O?"Erro ao acessar localizao":b?"Nenhuma pessoa prxima":"Aguardando localizao...":"Voc precisa ser visvel"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:s?O?"Permita o acesso  localizao no seu navegador.":b?"No h pessoas visveis at 100m de voc.":"Carregando sua localizao...":"Ative 'Ser Visto' para se conectar."})]}):n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-muted-foreground",children:"Voc ainda no tem amigos"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"V para 'Prximos' e adicione pessoas prximas!"})]})]})]}),C&&n.jsx(dz,{open:j,onOpenChange:N,recipientId:C.user_id,recipientName:C.name,recipientAvatar:C.avatar})]})}var np="Switch",[JU]=Mr(np),[e$,t$]=JU(np),x3=v.forwardRef((e,t)=>{const{__scopeSwitch:r,name:s,checked:a,defaultChecked:o,required:c,disabled:u,value:f="on",onCheckedChange:p,form:x,...w}=e,[_,j]=v.useState(null),N=tt(t,b=>j(b)),C=v.useRef(!1),T=_?x||!!_.closest("form"):!0,[E,S]=Os({prop:a,defaultProp:o??!1,onChange:p,caller:np});return n.jsxs(e$,{scope:r,checked:E,disabled:u,children:[n.jsx(qe.button,{type:"button",role:"switch","aria-checked":E,"aria-required":c,"data-state":b3(E),"data-disabled":u?"":void 0,disabled:u,value:f,...w,ref:N,onClick:Ie(e.onClick,b=>{S(k=>!k),T&&(C.current=b.isPropagationStopped(),C.current||b.stopPropagation())})}),T&&n.jsx(y3,{control:_,bubbles:!C.current,name:s,value:f,checked:E,required:c,disabled:u,form:x,style:{transform:"translateX(-100%)"}})]})});x3.displayName=np;var v3="SwitchThumb",w3=v.forwardRef((e,t)=>{const{__scopeSwitch:r,...s}=e,a=t$(v3,r);return n.jsx(qe.span,{"data-state":b3(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})});w3.displayName=v3;var r$="SwitchBubbleInput",y3=v.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:s=!0,...a},o)=>{const c=v.useRef(null),u=tt(c,o),f=Gu(r),p=Ou(t);return v.useEffect(()=>{const x=c.current;if(!x)return;const w=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(w,"checked").set;if(f!==r&&j){const N=new Event("click",{bubbles:s});j.call(x,r),x.dispatchEvent(N)}},[f,r,s]),n.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:u,style:{...a.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});y3.displayName=r$;function b3(e){return e?"checked":"unchecked"}var _3=x3,n$=w3;const Tr=v.forwardRef(({className:e,...t},r)=>n.jsx(_3,{className:Le("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...t,ref:r,children:n.jsx(n$,{className:Le("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Tr.displayName=_3.displayName;var s$=[" ","Enter","ArrowUp","ArrowDown"],a$=[" ","Enter"],rl="Select",[sp,ap,i$]=Au(rl),[Kc]=Mr(rl,[i$,so]),ip=so(),[o$,io]=Kc(rl),[l$,c$]=Kc(rl),N3=e=>{const{__scopeSelect:t,children:r,open:s,defaultOpen:a,onOpenChange:o,value:c,defaultValue:u,onValueChange:f,dir:p,name:x,autoComplete:w,disabled:_,required:j,form:N}=e,C=ip(t),[T,E]=v.useState(null),[S,b]=v.useState(null),[k,O]=v.useState(!1),L=pl(p),[P,M]=Os({prop:s,defaultProp:a??!1,onChange:o,caller:rl}),[R,$]=Os({prop:c,defaultProp:u,onChange:f,caller:rl}),Y=v.useRef(null),z=T?N||!!T.closest("form"):!0,[q,ee]=v.useState(new Set),H=Array.from(q).map(re=>re.props.value).join(";");return n.jsx(U1,{...C,children:n.jsxs(o$,{required:j,scope:t,trigger:T,onTriggerChange:E,valueNode:S,onValueNodeChange:b,valueNodeHasChildren:k,onValueNodeHasChildrenChange:O,contentId:un(),value:R,onValueChange:$,open:P,onOpenChange:M,dir:L,triggerPointerDownPosRef:Y,disabled:_,children:[n.jsx(sp.Provider,{scope:t,children:n.jsx(l$,{scope:e.__scopeSelect,onNativeOptionAdd:v.useCallback(re=>{ee(ae=>new Set(ae).add(re))},[]),onNativeOptionRemove:v.useCallback(re=>{ee(ae=>{const ie=new Set(ae);return ie.delete(re),ie})},[]),children:r})}),z?n.jsxs(G3,{"aria-hidden":!0,required:j,tabIndex:-1,name:x,autoComplete:w,value:R,onChange:re=>$(re.target.value),disabled:_,form:N,children:[R===void 0?n.jsx("option",{value:""}):null,Array.from(q)]},H):null]})})};N3.displayName=rl;var j3="SelectTrigger",C3=v.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:s=!1,...a}=e,o=ip(r),c=io(j3,r),u=c.disabled||s,f=tt(t,c.onTriggerChange),p=ap(r),x=v.useRef("touch"),[w,_,j]=K3(C=>{const T=p().filter(b=>!b.disabled),E=T.find(b=>b.value===c.value),S=Y3(T,C,E);S!==void 0&&c.onValueChange(S.value)}),N=C=>{u||(c.onOpenChange(!0),j()),C&&(c.triggerPointerDownPosRef.current={x:Math.round(C.pageX),y:Math.round(C.pageY)})};return n.jsx(Du,{asChild:!0,...o,children:n.jsx(qe.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":X3(c.value)?"":void 0,...a,ref:f,onClick:Ie(a.onClick,C=>{C.currentTarget.focus(),x.current!=="mouse"&&N(C)}),onPointerDown:Ie(a.onPointerDown,C=>{x.current=C.pointerType;const T=C.target;T.hasPointerCapture(C.pointerId)&&T.releasePointerCapture(C.pointerId),C.button===0&&C.ctrlKey===!1&&C.pointerType==="mouse"&&(N(C),C.preventDefault())}),onKeyDown:Ie(a.onKeyDown,C=>{const T=w.current!=="";!(C.ctrlKey||C.altKey||C.metaKey)&&C.key.length===1&&_(C.key),!(T&&C.key===" ")&&s$.includes(C.key)&&(N(),C.preventDefault())})})})});C3.displayName=j3;var E3="SelectValue",S3=v.forwardRef((e,t)=>{const{__scopeSelect:r,className:s,style:a,children:o,placeholder:c="",...u}=e,f=io(E3,r),{onValueNodeHasChildrenChange:p}=f,x=o!==void 0,w=tt(t,f.onValueNodeChange);return Rr(()=>{p(x)},[p,x]),n.jsx(qe.span,{...u,ref:w,style:{pointerEvents:"none"},children:X3(f.value)?n.jsx(n.Fragment,{children:c}):o})});S3.displayName=E3;var d$="SelectIcon",A3=v.forwardRef((e,t)=>{const{__scopeSelect:r,children:s,...a}=e;return n.jsx(qe.span,{"aria-hidden":!0,...a,ref:t,children:s||""})});A3.displayName=d$;var u$="SelectPortal",k3=e=>n.jsx(Bc,{asChild:!0,...e});k3.displayName=u$;var nl="SelectContent",T3=v.forwardRef((e,t)=>{const r=io(nl,e.__scopeSelect),[s,a]=v.useState();if(Rr(()=>{a(new DocumentFragment)},[]),!r.open){const o=s;return o?ll.createPortal(n.jsx(I3,{scope:e.__scopeSelect,children:n.jsx(sp.Slot,{scope:e.__scopeSelect,children:n.jsx("div",{children:e.children})})}),o):null}return n.jsx(R3,{...e,ref:t})});T3.displayName=nl;var qs=10,[I3,oo]=Kc(nl),h$="SelectContentImpl",f$=qi("SelectContent.RemoveScroll"),R3=v.forwardRef((e,t)=>{const{__scopeSelect:r,position:s="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:o,onPointerDownOutside:c,side:u,sideOffset:f,align:p,alignOffset:x,arrowPadding:w,collisionBoundary:_,collisionPadding:j,sticky:N,hideWhenDetached:C,avoidCollisions:T,...E}=e,S=io(nl,r),[b,k]=v.useState(null),[O,L]=v.useState(null),P=tt(t,ne=>k(ne)),[M,R]=v.useState(null),[$,Y]=v.useState(null),z=ap(r),[q,ee]=v.useState(!1),H=v.useRef(!1);v.useEffect(()=>{if(b)return qm(b)},[b]),$m();const re=v.useCallback(ne=>{const[he,...Ae]=z().map(Ee=>Ee.ref.current),[Pe]=Ae.slice(-1),Be=document.activeElement;for(const Ee of ne)if(Ee===Be||(Ee==null||Ee.scrollIntoView({block:"nearest"}),Ee===he&&O&&(O.scrollTop=0),Ee===Pe&&O&&(O.scrollTop=O.scrollHeight),Ee==null||Ee.focus(),document.activeElement!==Be))return},[z,O]),ae=v.useCallback(()=>re([M,b]),[re,M,b]);v.useEffect(()=>{q&&ae()},[q,ae]);const{onOpenChange:ie,triggerPointerDownPosRef:te}=S;v.useEffect(()=>{if(b){let ne={x:0,y:0};const he=Pe=>{var Be,Ee;ne={x:Math.abs(Math.round(Pe.pageX)-(((Be=te.current)==null?void 0:Be.x)??0)),y:Math.abs(Math.round(Pe.pageY)-(((Ee=te.current)==null?void 0:Ee.y)??0))}},Ae=Pe=>{ne.x<=10&&ne.y<=10?Pe.preventDefault():b.contains(Pe.target)||ie(!1),document.removeEventListener("pointermove",he),te.current=null};return te.current!==null&&(document.addEventListener("pointermove",he),document.addEventListener("pointerup",Ae,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",he),document.removeEventListener("pointerup",Ae,{capture:!0})}}},[b,ie,te]),v.useEffect(()=>{const ne=()=>ie(!1);return window.addEventListener("blur",ne),window.addEventListener("resize",ne),()=>{window.removeEventListener("blur",ne),window.removeEventListener("resize",ne)}},[ie]);const[ye,ge]=K3(ne=>{const he=z().filter(Be=>!Be.disabled),Ae=he.find(Be=>Be.ref.current===document.activeElement),Pe=Y3(he,ne,Ae);Pe&&setTimeout(()=>Pe.ref.current.focus())}),W=v.useCallback((ne,he,Ae)=>{const Pe=!H.current&&!Ae;(S.value!==void 0&&S.value===he||Pe)&&(R(ne),Pe&&(H.current=!0))},[S.value]),J=v.useCallback(()=>b==null?void 0:b.focus(),[b]),G=v.useCallback((ne,he,Ae)=>{const Pe=!H.current&&!Ae;(S.value!==void 0&&S.value===he||Pe)&&Y(ne)},[S.value]),se=s==="popper"?h0:P3,ce=se===h0?{side:u,sideOffset:f,align:p,alignOffset:x,arrowPadding:w,collisionBoundary:_,collisionPadding:j,sticky:N,hideWhenDetached:C,avoidCollisions:T}:{};return n.jsx(I3,{scope:r,content:b,viewport:O,onViewportChange:L,itemRefCallback:W,selectedItem:M,onItemLeave:J,itemTextRefCallback:G,focusSelectedItem:ae,selectedItemText:$,position:s,isPositioned:q,searchRef:ye,children:n.jsx(zu,{as:f$,allowPinchZoom:!0,children:n.jsx(Bu,{asChild:!0,trapped:S.open,onMountAutoFocus:ne=>{ne.preventDefault()},onUnmountAutoFocus:Ie(a,ne=>{var he;(he=S.trigger)==null||he.focus({preventScroll:!0}),ne.preventDefault()}),children:n.jsx(cl,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:ne=>ne.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:n.jsx(se,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:ne=>ne.preventDefault(),...E,...ce,onPlaced:()=>ee(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:Ie(E.onKeyDown,ne=>{const he=ne.ctrlKey||ne.altKey||ne.metaKey;if(ne.key==="Tab"&&ne.preventDefault(),!he&&ne.key.length===1&&ge(ne.key),["ArrowUp","ArrowDown","Home","End"].includes(ne.key)){let Pe=z().filter(Be=>!Be.disabled).map(Be=>Be.ref.current);if(["ArrowUp","End"].includes(ne.key)&&(Pe=Pe.slice().reverse()),["ArrowUp","ArrowDown"].includes(ne.key)){const Be=ne.target,Ee=Pe.indexOf(Be);Pe=Pe.slice(Ee+1)}setTimeout(()=>re(Pe)),ne.preventDefault()}})})})})})})});R3.displayName=h$;var m$="SelectItemAlignedPosition",P3=v.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:s,...a}=e,o=io(nl,r),c=oo(nl,r),[u,f]=v.useState(null),[p,x]=v.useState(null),w=tt(t,P=>x(P)),_=ap(r),j=v.useRef(!1),N=v.useRef(!0),{viewport:C,selectedItem:T,selectedItemText:E,focusSelectedItem:S}=c,b=v.useCallback(()=>{if(o.trigger&&o.valueNode&&u&&p&&C&&T&&E){const P=o.trigger.getBoundingClientRect(),M=p.getBoundingClientRect(),R=o.valueNode.getBoundingClientRect(),$=E.getBoundingClientRect();if(o.dir!=="rtl"){const Be=$.left-M.left,Ee=R.left-Be,ue=P.left-Ee,Fe=P.width+ue,_e=Math.max(Fe,M.width),Ze=window.innerWidth-qs,be=xu(Ee,[qs,Math.max(qs,Ze-_e)]);u.style.minWidth=Fe+"px",u.style.left=be+"px"}else{const Be=M.right-$.right,Ee=window.innerWidth-R.right-Be,ue=window.innerWidth-P.right-Ee,Fe=P.width+ue,_e=Math.max(Fe,M.width),Ze=window.innerWidth-qs,be=xu(Ee,[qs,Math.max(qs,Ze-_e)]);u.style.minWidth=Fe+"px",u.style.right=be+"px"}const Y=_(),z=window.innerHeight-qs*2,q=C.scrollHeight,ee=window.getComputedStyle(p),H=parseInt(ee.borderTopWidth,10),re=parseInt(ee.paddingTop,10),ae=parseInt(ee.borderBottomWidth,10),ie=parseInt(ee.paddingBottom,10),te=H+re+q+ie+ae,ye=Math.min(T.offsetHeight*5,te),ge=window.getComputedStyle(C),W=parseInt(ge.paddingTop,10),J=parseInt(ge.paddingBottom,10),G=P.top+P.height/2-qs,se=z-G,ce=T.offsetHeight/2,ne=T.offsetTop+ce,he=H+re+ne,Ae=te-he;if(he<=G){const Be=Y.length>0&&T===Y[Y.length-1].ref.current;u.style.bottom="0px";const Ee=p.clientHeight-C.offsetTop-C.offsetHeight,ue=Math.max(se,ce+(Be?J:0)+Ee+ae),Fe=he+ue;u.style.height=Fe+"px"}else{const Be=Y.length>0&&T===Y[0].ref.current;u.style.top="0px";const ue=Math.max(G,H+C.offsetTop+(Be?W:0)+ce)+Ae;u.style.height=ue+"px",C.scrollTop=he-G+C.offsetTop}u.style.margin=`${qs}px 0`,u.style.minHeight=ye+"px",u.style.maxHeight=z+"px",s==null||s(),requestAnimationFrame(()=>j.current=!0)}},[_,o.trigger,o.valueNode,u,p,C,T,E,o.dir,s]);Rr(()=>b(),[b]);const[k,O]=v.useState();Rr(()=>{p&&O(window.getComputedStyle(p).zIndex)},[p]);const L=v.useCallback(P=>{P&&N.current===!0&&(b(),S==null||S(),N.current=!1)},[b,S]);return n.jsx(g$,{scope:r,contentWrapper:u,shouldExpandOnScrollRef:j,onScrollButtonChange:L,children:n.jsx("div",{ref:f,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:n.jsx(qe.div,{...a,ref:w,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});P3.displayName=m$;var p$="SelectPopperPosition",h0=v.forwardRef((e,t)=>{const{__scopeSelect:r,align:s="start",collisionPadding:a=qs,...o}=e,c=ip(r);return n.jsx(Em,{...c,...o,ref:t,align:s,collisionPadding:a,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});h0.displayName=p$;var[g$,Ev]=Kc(nl,{}),f0="SelectViewport",O3=v.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:s,...a}=e,o=oo(f0,r),c=Ev(f0,r),u=tt(t,o.onViewportChange),f=v.useRef(0);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),n.jsx(sp.Slot,{scope:r,children:n.jsx(qe.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Ie(a.onScroll,p=>{const x=p.currentTarget,{contentWrapper:w,shouldExpandOnScrollRef:_}=c;if(_!=null&&_.current&&w){const j=Math.abs(f.current-x.scrollTop);if(j>0){const N=window.innerHeight-qs*2,C=parseFloat(w.style.minHeight),T=parseFloat(w.style.height),E=Math.max(C,T);if(E<N){const S=E+j,b=Math.min(N,S),k=S-b;w.style.height=b+"px",w.style.bottom==="0px"&&(x.scrollTop=k>0?k:0,w.style.justifyContent="flex-end")}}}f.current=x.scrollTop})})})]})});O3.displayName=f0;var D3="SelectGroup",[x$,v$]=Kc(D3),w$=v.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,a=un();return n.jsx(x$,{scope:r,id:a,children:n.jsx(qe.div,{role:"group","aria-labelledby":a,...s,ref:t})})});w$.displayName=D3;var M3="SelectLabel",L3=v.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,a=v$(M3,r);return n.jsx(qe.div,{id:a.id,...s,ref:t})});L3.displayName=M3;var Zf="SelectItem",[y$,F3]=Kc(Zf),B3=v.forwardRef((e,t)=>{const{__scopeSelect:r,value:s,disabled:a=!1,textValue:o,...c}=e,u=io(Zf,r),f=oo(Zf,r),p=u.value===s,[x,w]=v.useState(o??""),[_,j]=v.useState(!1),N=tt(t,S=>{var b;return(b=f.itemRefCallback)==null?void 0:b.call(f,S,s,a)}),C=un(),T=v.useRef("touch"),E=()=>{a||(u.onValueChange(s),u.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return n.jsx(y$,{scope:r,value:s,disabled:a,textId:C,isSelected:p,onItemTextChange:v.useCallback(S=>{w(b=>b||((S==null?void 0:S.textContent)??"").trim())},[]),children:n.jsx(sp.ItemSlot,{scope:r,value:s,disabled:a,textValue:x,children:n.jsx(qe.div,{role:"option","aria-labelledby":C,"data-highlighted":_?"":void 0,"aria-selected":p&&_,"data-state":p?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...c,ref:N,onFocus:Ie(c.onFocus,()=>j(!0)),onBlur:Ie(c.onBlur,()=>j(!1)),onClick:Ie(c.onClick,()=>{T.current!=="mouse"&&E()}),onPointerUp:Ie(c.onPointerUp,()=>{T.current==="mouse"&&E()}),onPointerDown:Ie(c.onPointerDown,S=>{T.current=S.pointerType}),onPointerMove:Ie(c.onPointerMove,S=>{var b;T.current=S.pointerType,a?(b=f.onItemLeave)==null||b.call(f):T.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ie(c.onPointerLeave,S=>{var b;S.currentTarget===document.activeElement&&((b=f.onItemLeave)==null||b.call(f))}),onKeyDown:Ie(c.onKeyDown,S=>{var k;((k=f.searchRef)==null?void 0:k.current)!==""&&S.key===" "||(a$.includes(S.key)&&E(),S.key===" "&&S.preventDefault())})})})})});B3.displayName=Zf;var Cd="SelectItemText",z3=v.forwardRef((e,t)=>{const{__scopeSelect:r,className:s,style:a,...o}=e,c=io(Cd,r),u=oo(Cd,r),f=F3(Cd,r),p=c$(Cd,r),[x,w]=v.useState(null),_=tt(t,E=>w(E),f.onItemTextChange,E=>{var S;return(S=u.itemTextRefCallback)==null?void 0:S.call(u,E,f.value,f.disabled)}),j=x==null?void 0:x.textContent,N=v.useMemo(()=>n.jsx("option",{value:f.value,disabled:f.disabled,children:j},f.value),[f.disabled,f.value,j]),{onNativeOptionAdd:C,onNativeOptionRemove:T}=p;return Rr(()=>(C(N),()=>T(N)),[C,T,N]),n.jsxs(n.Fragment,{children:[n.jsx(qe.span,{id:f.textId,...o,ref:_}),f.isSelected&&c.valueNode&&!c.valueNodeHasChildren?ll.createPortal(o.children,c.valueNode):null]})});z3.displayName=Cd;var U3="SelectItemIndicator",$3=v.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e;return F3(U3,r).isSelected?n.jsx(qe.span,{"aria-hidden":!0,...s,ref:t}):null});$3.displayName=U3;var m0="SelectScrollUpButton",V3=v.forwardRef((e,t)=>{const r=oo(m0,e.__scopeSelect),s=Ev(m0,e.__scopeSelect),[a,o]=v.useState(!1),c=tt(t,s.onScrollButtonChange);return Rr(()=>{if(r.viewport&&r.isPositioned){let u=function(){const p=f.scrollTop>0;o(p)};const f=r.viewport;return u(),f.addEventListener("scroll",u),()=>f.removeEventListener("scroll",u)}},[r.viewport,r.isPositioned]),a?n.jsx(W3,{...e,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:f}=r;u&&f&&(u.scrollTop=u.scrollTop-f.offsetHeight)}}):null});V3.displayName=m0;var p0="SelectScrollDownButton",q3=v.forwardRef((e,t)=>{const r=oo(p0,e.__scopeSelect),s=Ev(p0,e.__scopeSelect),[a,o]=v.useState(!1),c=tt(t,s.onScrollButtonChange);return Rr(()=>{if(r.viewport&&r.isPositioned){let u=function(){const p=f.scrollHeight-f.clientHeight,x=Math.ceil(f.scrollTop)<p;o(x)};const f=r.viewport;return u(),f.addEventListener("scroll",u),()=>f.removeEventListener("scroll",u)}},[r.viewport,r.isPositioned]),a?n.jsx(W3,{...e,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:f}=r;u&&f&&(u.scrollTop=u.scrollTop+f.offsetHeight)}}):null});q3.displayName=p0;var W3=v.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:s,...a}=e,o=oo("SelectScrollButton",r),c=v.useRef(null),u=ap(r),f=v.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return v.useEffect(()=>()=>f(),[f]),Rr(()=>{var x;const p=u().find(w=>w.ref.current===document.activeElement);(x=p==null?void 0:p.ref.current)==null||x.scrollIntoView({block:"nearest"})},[u]),n.jsx(qe.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Ie(a.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(s,50))}),onPointerMove:Ie(a.onPointerMove,()=>{var p;(p=o.onItemLeave)==null||p.call(o),c.current===null&&(c.current=window.setInterval(s,50))}),onPointerLeave:Ie(a.onPointerLeave,()=>{f()})})}),b$="SelectSeparator",H3=v.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e;return n.jsx(qe.div,{"aria-hidden":!0,...s,ref:t})});H3.displayName=b$;var g0="SelectArrow",_$=v.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,a=ip(r),o=io(g0,r),c=oo(g0,r);return o.open&&c.position==="popper"?n.jsx(Sm,{...a,...s,ref:t}):null});_$.displayName=g0;var N$="SelectBubbleInput",G3=v.forwardRef(({__scopeSelect:e,value:t,...r},s)=>{const a=v.useRef(null),o=tt(s,a),c=Gu(t);return v.useEffect(()=>{const u=a.current;if(!u)return;const f=window.HTMLSelectElement.prototype,x=Object.getOwnPropertyDescriptor(f,"value").set;if(c!==t&&x){const w=new Event("change",{bubbles:!0});x.call(u,t),u.dispatchEvent(w)}},[c,t]),n.jsx(qe.select,{...r,style:{...rj,...r.style},ref:o,defaultValue:t})});G3.displayName=N$;function X3(e){return e===""||e===void 0}function K3(e){const t=Er(e),r=v.useRef(""),s=v.useRef(0),a=v.useCallback(c=>{const u=r.current+c;t(u),function f(p){r.current=p,window.clearTimeout(s.current),p!==""&&(s.current=window.setTimeout(()=>f(""),1e3))}(u)},[t]),o=v.useCallback(()=>{r.current="",window.clearTimeout(s.current)},[]);return v.useEffect(()=>()=>window.clearTimeout(s.current),[]),[r,a,o]}function Y3(e,t,r){const a=t.length>1&&Array.from(t).every(p=>p===t[0])?t[0]:t,o=r?e.indexOf(r):-1;let c=j$(e,Math.max(o,0));a.length===1&&(c=c.filter(p=>p!==r));const f=c.find(p=>p.textValue.toLowerCase().startsWith(a.toLowerCase()));return f!==r?f:void 0}function j$(e,t){return e.map((r,s)=>e[(t+s)%e.length])}var C$=N3,Q3=C3,E$=S3,S$=A3,A$=k3,Z3=T3,k$=O3,J3=L3,eA=B3,T$=z3,I$=$3,tA=V3,rA=q3,nA=H3;const Zs=C$,Js=E$,Es=v.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(Q3,{ref:s,className:Le("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,n.jsx(S$,{asChild:!0,children:n.jsx(S1,{className:"h-4 w-4 opacity-50"})})]}));Es.displayName=Q3.displayName;const sA=v.forwardRef(({className:e,...t},r)=>n.jsx(tA,{ref:r,className:Le("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(I8,{className:"h-4 w-4"})}));sA.displayName=tA.displayName;const aA=v.forwardRef(({className:e,...t},r)=>n.jsx(rA,{ref:r,className:Le("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(S1,{className:"h-4 w-4"})}));aA.displayName=rA.displayName;const Ss=v.forwardRef(({className:e,children:t,position:r="popper",...s},a)=>n.jsx(A$,{children:n.jsxs(Z3,{ref:a,className:Le("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...s,children:[n.jsx(sA,{}),n.jsx(k$,{className:Le("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),n.jsx(aA,{})]})}));Ss.displayName=Z3.displayName;const R$=v.forwardRef(({className:e,...t},r)=>n.jsx(J3,{ref:r,className:Le("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));R$.displayName=J3.displayName;const Ht=v.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(eA,{ref:s,className:Le("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(I$,{children:n.jsx(Xn,{className:"h-4 w-4"})})}),n.jsx(T$,{children:t})]}));Ht.displayName=eA.displayName;const P$=v.forwardRef(({className:e,...t},r)=>n.jsx(nA,{ref:r,className:Le("-mx-1 my-1 h-px bg-muted",e),...t}));P$.displayName=nA.displayName;function O$(){const{user:e}=bt(),[t,r]=v.useState([]),[s,a]=v.useState([]),[o,c]=v.useState(!0),[u,f]=v.useState(null);v.useEffect(()=>{e&&p()},[e]);const p=async()=>{if(e)try{c(!0);const{data:j,error:N}=await U.from("organizers").select("id").eq("user_id",e.id).single();if(N)throw N;if(!j)return;f(j.id);const{data:C,error:T}=await U.from("organizer_photos").select("*").eq("organizer_id",j.id).eq("is_active",!0).order("created_at",{ascending:!1});if(T)throw T;r(C||[]),await x(C||[])}catch(j){console.error("Error fetching photos:",j)}finally{c(!1)}},x=async j=>{const N={},C=[...new Set(j.map(E=>E.event_id).filter(Boolean))],T={};if(C.length>0){const{data:E}=await U.from("events").select("id, title").in("id",C);E&&E.forEach(S=>{T[S.id]=S.title})}j.forEach(E=>{const S=E.event_id||"no-event";N[S]||(N[S]={sessionName:E.session_name||"Sem sesso",eventName:E.event_id?T[E.event_id]||"Evento":"Sem evento",photos:[],date:new Date(E.created_at).toLocaleDateString("pt-BR"),eventId:E.event_id}),N[S].photos.push(E)}),a(Object.values(N))};return{photos:t,photoSessions:s,loading:o,uploadPhotos:async(j,N)=>{if(!u||!e)return X.error("Organizador no encontrado"),!1;try{for(let C=0;C<j.length;C++){const T=j[C],E=T.name.split(".").pop(),S=`${e.id}/photos/${Date.now()}_${C}.${E}`,{error:b}=await U.storage.from("user-uploads").upload(S,T,{upsert:!0});if(b){console.error("Error uploading file:",b),X.error(`Erro ao fazer upload da foto ${C+1}`);continue}const{data:{publicUrl:k}}=U.storage.from("user-uploads").getPublicUrl(S),{error:O}=await U.from("organizer_photos").insert({organizer_id:u,photo_url:k,caption:T.name,event_id:N});O&&(console.error("Error saving photo to database:",O),X.error(`Erro ao salvar foto ${C+1}`))}return X.success("Fotos enviadas com sucesso!"),await p(),!0}catch(C){return console.error("Error:",C),X.error("Erro ao fazer upload das fotos"),!1}},deletePhoto:async j=>{try{const{error:N}=await U.from("organizer_photos").update({is_active:!1}).eq("id",j);if(N)throw N;X.success("Foto removida com sucesso!"),await p()}catch(N){console.error("Error deleting photo:",N),X.error("Erro ao remover foto")}},refreshPhotos:p}}const je=v.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Le("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));je.displayName="Card";const We=v.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Le("flex flex-col space-y-1.5 p-6",e),...t}));We.displayName="CardHeader";const Ge=v.forwardRef(({className:e,...t},r)=>n.jsx("h3",{ref:r,className:Le("text-2xl font-semibold leading-none tracking-tight",e),...t}));Ge.displayName="CardTitle";const cn=v.forwardRef(({className:e,...t},r)=>n.jsx("p",{ref:r,className:Le("text-sm text-muted-foreground",e),...t}));cn.displayName="CardDescription";const Ce=v.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Le("p-6 pt-0",e),...t}));Ce.displayName="CardContent";const D$=v.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Le("flex items-center p-6 pt-0",e),...t}));D$.displayName="CardFooter";var Kb;(function(e){e.Aztec="AZTEC",e.Codabar="CODABAR",e.Code39="CODE_39",e.Code93="CODE_93",e.Code128="CODE_128",e.DataMatrix="DATA_MATRIX",e.Ean8="EAN_8",e.Ean13="EAN_13",e.Itf="ITF",e.Pdf417="PDF_417",e.QrCode="QR_CODE",e.UpcA="UPC_A",e.UpcE="UPC_E"})(Kb||(Kb={}));var Yb;(function(e){e.CalendarEvent="CALENDAR_EVENT",e.ContactInfo="CONTACT_INFO",e.DriversLicense="DRIVERS_LICENSE",e.Email="EMAIL",e.Geo="GEO",e.Isbn="ISBN",e.Phone="PHONE",e.Product="PRODUCT",e.Sms="SMS",e.Text="TEXT",e.Url="URL",e.Wifi="WIFI",e.Unknown="UNKNOWN"})(Yb||(Yb={}));var Qb;(function(e){e[e["640x480"]=0]="640x480",e[e["1280x720"]=1]="1280x720",e[e["1920x1080"]=2]="1920x1080",e[e["3840x2160"]=3]="3840x2160"})(Qb||(Qb={}));var Zb;(function(e){e.Front="FRONT",e.Back="BACK"})(Zb||(Zb={}));var Jb;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.PENDING=1]="PENDING",e[e.DOWNLOADING=2]="DOWNLOADING",e[e.CANCELED=3]="CANCELED",e[e.COMPLETED=4]="COMPLETED",e[e.FAILED=5]="FAILED",e[e.INSTALLING=6]="INSTALLING",e[e.DOWNLOAD_PAUSED=7]="DOWNLOAD_PAUSED"})(Jb||(Jb={}));var e2;(function(e){e[e.HOME=0]="HOME",e[e.UNKNOWN=1]="UNKNOWN",e[e.WORK=2]="WORK"})(e2||(e2={}));var t2;(function(e){e[e.HOME=0]="HOME",e[e.UNKNOWN=1]="UNKNOWN",e[e.WORK=2]="WORK"})(t2||(t2={}));var r2;(function(e){e[e.FAX=0]="FAX",e[e.HOME=1]="HOME",e[e.MOBILE=2]="MOBILE",e[e.UNKNOWN=3]="UNKNOWN",e[e.WORK=4]="WORK"})(r2||(r2={}));var n2;(function(e){e[e.OPEN=1]="OPEN",e[e.WEP=2]="WEP",e[e.WPA=3]="WPA"})(n2||(n2={}));const s2=Um("BarcodeScanner",{web:()=>fl(()=>import("./web-BkowfZE5.js"),[],import.meta.url).then(e=>new e.BarcodeScannerWeb)});var Ye;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ye||(Ye={}));var a2=new Map([[Ye.QR_CODE,"QR_CODE"],[Ye.AZTEC,"AZTEC"],[Ye.CODABAR,"CODABAR"],[Ye.CODE_39,"CODE_39"],[Ye.CODE_93,"CODE_93"],[Ye.CODE_128,"CODE_128"],[Ye.DATA_MATRIX,"DATA_MATRIX"],[Ye.MAXICODE,"MAXICODE"],[Ye.ITF,"ITF"],[Ye.EAN_13,"EAN_13"],[Ye.EAN_8,"EAN_8"],[Ye.PDF_417,"PDF_417"],[Ye.RSS_14,"RSS_14"],[Ye.RSS_EXPANDED,"RSS_EXPANDED"],[Ye.UPC_A,"UPC_A"],[Ye.UPC_E,"UPC_E"],[Ye.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),i2;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(i2||(i2={}));function M$(e){return Object.values(Ye).includes(e)}var Jf;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Jf||(Jf={}));var L$=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[Jf.SCAN_TYPE_CAMERA,Jf.SCAN_TYPE_FILE],e}(),iA=function(){function e(t,r){this.format=t,this.formatName=r}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!a2.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,a2.get(t))},e}(),o2=function(){function e(){}return e.createFromText=function(t){var r={text:t};return{decodedText:t,result:r}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),x0;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(x0||(x0={}));var F$=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:x0.UNKWOWN_ERROR}},e}(),B$=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,r){(this.verbose||r===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function La(e){return typeof e>"u"||e===null}var Jl=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),oA=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,r){if(typeof t!="object"){var s=typeof t;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(s,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],o=new Set(a),c=Object.keys(t),u=0,f=c;u<f.length;u++){var p=f[u];if(o.has(p))return r.logError("".concat(p," is not supported videoConstaints."),!0),!1}return!0},e}(),v0={exports:{}};(function(e,t){(function(r,s){s(t)})(on,function(r){function s(F){return F==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,i){F.__proto__=i}||function(F,i){for(var l in i)i.hasOwnProperty(l)&&(F[l]=i[l])};function o(F,i){a(F,i);function l(){this.constructor=F}F.prototype=i===null?Object.create(i):(l.prototype=i.prototype,new l)}function c(F,i){var l=Object.setPrototypeOf;l?l(F,i):F.__proto__=i}function u(F,i){i===void 0&&(i=F.constructor);var l=Error.captureStackTrace;l&&l(F,i)}var f=function(F){o(i,F);function i(l){var d=this.constructor,h=F.call(this,l)||this;return Object.defineProperty(h,"name",{value:d.name,enumerable:!1}),c(h,d.prototype),u(h),h}return i}(Error);class p extends f{constructor(i=void 0){super(i),this.message=i}getKind(){return this.constructor.kind}}p.kind="Exception";class x extends p{}x.kind="ArgumentException";class w extends p{}w.kind="IllegalArgumentException";class _{constructor(i){if(this.binarizer=i,i===null)throw new w("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,l){return this.binarizer.getBlackRow(i,l)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,l,d,h){const m=this.binarizer.getLuminanceSource().crop(i,l,d,h);return new _(this.binarizer.createBinarizer(m))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new _(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new _(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class j extends p{static getChecksumInstance(){return new j}}j.kind="ChecksumException";class N{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class C{static arraycopy(i,l,d,h,m){for(;m--;)d[h++]=i[l++]}static currentTimeMillis(){return Date.now()}}class T extends p{}T.kind="IndexOutOfBoundsException";class E extends T{constructor(i=void 0,l=void 0){super(l),this.index=i,this.message=l}}E.kind="ArrayIndexOutOfBoundsException";class S{static fill(i,l){for(let d=0,h=i.length;d<h;d++)i[d]=l}static fillWithin(i,l,d,h){S.rangeCheck(i.length,l,d);for(let m=l;m<d;m++)i[m]=h}static rangeCheck(i,l,d){if(l>d)throw new w("fromIndex("+l+") > toIndex("+d+")");if(l<0)throw new E(l);if(d>i)throw new E(d)}static asList(...i){return i}static create(i,l,d){return Array.from({length:i}).map(m=>Array.from({length:l}).fill(d))}static createInt32Array(i,l,d){return Array.from({length:i}).map(m=>Int32Array.from({length:l}).fill(d))}static equals(i,l){if(!i||!l||!i.length||!l.length||i.length!==l.length)return!1;for(let d=0,h=i.length;d<h;d++)if(i[d]!==l[d])return!1;return!0}static hashCode(i){if(i===null)return 0;let l=1;for(const d of i)l=31*l+d;return l}static fillUint8Array(i,l){for(let d=0;d!==i.length;d++)i[d]=l}static copyOf(i,l){return i.slice(0,l)}static copyOfUint8Array(i,l){if(i.length<=l){const d=new Uint8Array(l);return d.set(i),d}return i.slice(0,l)}static copyOfRange(i,l,d){const h=d-l,m=new Int32Array(h);return C.arraycopy(i,l,m,0,h),m}static binarySearch(i,l,d){d===void 0&&(d=S.numberComparator);let h=0,m=i.length-1;for(;h<=m;){const g=m+h>>1,y=d(l,i[g]);if(y>0)h=g+1;else if(y<0)m=g-1;else return g}return-h-1}static numberComparator(i,l){return i-l}}class b{static numberOfTrailingZeros(i){let l;if(i===0)return 32;let d=31;return l=i<<16,l!==0&&(d-=16,i=l),l=i<<8,l!==0&&(d-=8,i=l),l=i<<4,l!==0&&(d-=4,i=l),l=i<<2,l!==0&&(d-=2,i=l),d-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let l=1;return i>>>16||(l+=16,i<<=16),i>>>24||(l+=8,i<<=8),i>>>28||(l+=4,i<<=4),i>>>30||(l+=2,i<<=2),l-=i>>>31,l}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,l){return Math.trunc(i/l)}static parseInt(i,l=void 0){return parseInt(i,l)}}b.MIN_VALUE_32_BITS=-2147483648,b.MAX_VALUE=Number.MAX_SAFE_INTEGER;class k{constructor(i,l){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,l==null?this.bits=k.makeArray(i):this.bits=l)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){const l=k.makeArray(i);C.arraycopy(this.bits,0,l,0,this.bits.length),this.bits=l}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){const l=this.size;if(i>=l)return l;const d=this.bits;let h=Math.floor(i/32),m=d[h];m&=~((1<<(i&31))-1);const g=d.length;for(;m===0;){if(++h===g)return l;m=d[h]}const y=h*32+b.numberOfTrailingZeros(m);return y>l?l:y}getNextUnset(i){const l=this.size;if(i>=l)return l;const d=this.bits;let h=Math.floor(i/32),m=~d[h];m&=~((1<<(i&31))-1);const g=d.length;for(;m===0;){if(++h===g)return l;m=~d[h]}const y=h*32+b.numberOfTrailingZeros(m);return y>l?l:y}setBulk(i,l){this.bits[Math.floor(i/32)]=l}setRange(i,l){if(l<i||i<0||l>this.size)throw new w;if(l===i)return;l--;const d=Math.floor(i/32),h=Math.floor(l/32),m=this.bits;for(let g=d;g<=h;g++){const y=g>d?0:i&31,I=(2<<(g<h?31:l&31))-(1<<y);m[g]|=I}}clear(){const i=this.bits.length,l=this.bits;for(let d=0;d<i;d++)l[d]=0}isRange(i,l,d){if(l<i||i<0||l>this.size)throw new w;if(l===i)return!0;l--;const h=Math.floor(i/32),m=Math.floor(l/32),g=this.bits;for(let y=h;y<=m;y++){const A=y>h?0:i&31,D=(2<<(y<m?31:l&31))-(1<<A)&4294967295;if((g[y]&D)!==(d?D:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,l){if(l<0||l>32)throw new w("Num bits must be between 0 and 32");this.ensureCapacity(this.size+l);for(let d=l;d>0;d--)this.appendBit((i>>d-1&1)===1)}appendBitArray(i){const l=i.size;this.ensureCapacity(this.size+l);for(let d=0;d<l;d++)this.appendBit(i.get(d))}xor(i){if(this.size!==i.size)throw new w("Sizes don't match");const l=this.bits;for(let d=0,h=l.length;d<h;d++)l[d]^=i.bits[d]}toBytes(i,l,d,h){for(let m=0;m<h;m++){let g=0;for(let y=0;y<8;y++)this.get(i)&&(g|=1<<7-y),i++;l[d+m]=g}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),l=Math.floor((this.size-1)/32),d=l+1,h=this.bits;for(let m=0;m<d;m++){let g=h[m];g=g>>1&1431655765|(g&1431655765)<<1,g=g>>2&858993459|(g&858993459)<<2,g=g>>4&252645135|(g&252645135)<<4,g=g>>8&16711935|(g&16711935)<<8,g=g>>16&65535|(g&65535)<<16,i[l-m]=g}if(this.size!==d*32){const m=d*32-this.size;let g=i[0]>>>m;for(let y=1;y<d;y++){const A=i[y];g|=A<<32-m,i[y-1]=g,g=A>>>m}i[d-1]=g}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof k))return!1;const l=i;return this.size===l.size&&S.equals(this.bits,l.bits)}hashCode(){return 31*this.size+S.hashCode(this.bits)}toString(){let i="";for(let l=0,d=this.size;l<d;l++)l&7||(i+=" "),i+=this.get(l)?"X":".";return i}clone(){return new k(this.size,this.bits.slice())}}var O;(function(F){F[F.OTHER=0]="OTHER",F[F.PURE_BARCODE=1]="PURE_BARCODE",F[F.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",F[F.TRY_HARDER=3]="TRY_HARDER",F[F.CHARACTER_SET=4]="CHARACTER_SET",F[F.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",F[F.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",F[F.ASSUME_GS1=7]="ASSUME_GS1",F[F.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",F[F.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",F[F.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(O||(O={}));var L=O;class P extends p{static getFormatInstance(){return new P}}P.kind="FormatException";var M;(function(F){F[F.Cp437=0]="Cp437",F[F.ISO8859_1=1]="ISO8859_1",F[F.ISO8859_2=2]="ISO8859_2",F[F.ISO8859_3=3]="ISO8859_3",F[F.ISO8859_4=4]="ISO8859_4",F[F.ISO8859_5=5]="ISO8859_5",F[F.ISO8859_6=6]="ISO8859_6",F[F.ISO8859_7=7]="ISO8859_7",F[F.ISO8859_8=8]="ISO8859_8",F[F.ISO8859_9=9]="ISO8859_9",F[F.ISO8859_10=10]="ISO8859_10",F[F.ISO8859_11=11]="ISO8859_11",F[F.ISO8859_13=12]="ISO8859_13",F[F.ISO8859_14=13]="ISO8859_14",F[F.ISO8859_15=14]="ISO8859_15",F[F.ISO8859_16=15]="ISO8859_16",F[F.SJIS=16]="SJIS",F[F.Cp1250=17]="Cp1250",F[F.Cp1251=18]="Cp1251",F[F.Cp1252=19]="Cp1252",F[F.Cp1256=20]="Cp1256",F[F.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",F[F.UTF8=22]="UTF8",F[F.ASCII=23]="ASCII",F[F.Big5=24]="Big5",F[F.GB18030=25]="GB18030",F[F.EUC_KR=26]="EUC_KR"})(M||(M={}));class R{constructor(i,l,d,...h){this.valueIdentifier=i,this.name=d,typeof l=="number"?this.values=Int32Array.from([l]):this.values=l,this.otherEncodingNames=h,R.VALUE_IDENTIFIER_TO_ECI.set(i,this),R.NAME_TO_ECI.set(d,this);const m=this.values;for(let g=0,y=m.length;g!==y;g++){const A=m[g];R.VALUES_TO_ECI.set(A,this)}for(const g of h)R.NAME_TO_ECI.set(g,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new P("incorect value");const l=R.VALUES_TO_ECI.get(i);if(l===void 0)throw new P("incorect value");return l}static getCharacterSetECIByName(i){const l=R.NAME_TO_ECI.get(i);if(l===void 0)throw new P("incorect value");return l}equals(i){if(!(i instanceof R))return!1;const l=i;return this.getName()===l.getName()}}R.VALUE_IDENTIFIER_TO_ECI=new Map,R.VALUES_TO_ECI=new Map,R.NAME_TO_ECI=new Map,R.Cp437=new R(M.Cp437,Int32Array.from([0,2]),"Cp437"),R.ISO8859_1=new R(M.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),R.ISO8859_2=new R(M.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),R.ISO8859_3=new R(M.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),R.ISO8859_4=new R(M.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),R.ISO8859_5=new R(M.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),R.ISO8859_6=new R(M.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),R.ISO8859_7=new R(M.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),R.ISO8859_8=new R(M.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),R.ISO8859_9=new R(M.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),R.ISO8859_10=new R(M.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),R.ISO8859_11=new R(M.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),R.ISO8859_13=new R(M.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),R.ISO8859_14=new R(M.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),R.ISO8859_15=new R(M.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),R.ISO8859_16=new R(M.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),R.SJIS=new R(M.SJIS,20,"SJIS","Shift_JIS"),R.Cp1250=new R(M.Cp1250,21,"Cp1250","windows-1250"),R.Cp1251=new R(M.Cp1251,22,"Cp1251","windows-1251"),R.Cp1252=new R(M.Cp1252,23,"Cp1252","windows-1252"),R.Cp1256=new R(M.Cp1256,24,"Cp1256","windows-1256"),R.UnicodeBigUnmarked=new R(M.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),R.UTF8=new R(M.UTF8,26,"UTF8","UTF-8"),R.ASCII=new R(M.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),R.Big5=new R(M.Big5,28,"Big5"),R.GB18030=new R(M.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),R.EUC_KR=new R(M.EUC_KR,30,"EUC_KR","EUC-KR");class $ extends p{}$.kind="UnsupportedOperationException";class Y{static decode(i,l){const d=this.encodingName(l);return this.customDecoder?this.customDecoder(i,d):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(d)?this.decodeFallback(i,d):new TextDecoder(d).decode(i)}static shouldDecodeOnFallback(i){return!Y.isBrowser()&&i==="ISO-8859-1"}static encode(i,l){const d=this.encodingName(l);return this.customEncoder?this.customEncoder(i,d):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof R?i:R.getCharacterSetECIByName(i)}static decodeFallback(i,l){const d=this.encodingCharacterSet(l);if(Y.isDecodeFallbackSupported(d)){let h="";for(let m=0,g=i.length;m<g;m++){let y=i[m].toString(16);y.length<2&&(y="0"+y),h+="%"+y}return decodeURIComponent(h)}if(d.equals(R.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new $(`Encoding ${this.encodingName(l)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(R.UTF8)||i.equals(R.ISO8859_1)||i.equals(R.ASCII)}static encodeFallback(i){const d=btoa(unescape(encodeURIComponent(i))).split(""),h=[];for(let m=0;m<d.length;m++)h.push(d[m].charCodeAt(0));return new Uint8Array(h)}}class z{static castAsNonUtf8Char(i,l=null){const d=l?l.getName():this.ISO88591;return Y.decode(new Uint8Array([i]),d)}static guessEncoding(i,l){if(l!=null&&l.get(L.CHARACTER_SET)!==void 0)return l.get(L.CHARACTER_SET).toString();const d=i.length;let h=!0,m=!0,g=!0,y=0,A=0,I=0,D=0,B=0,V=0,Z=0,oe=0,le=0,fe=0,ve=0;const De=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let Me=0;Me<d&&(h||m||g);Me++){const Re=i[Me]&255;g&&(y>0?Re&128?y--:g=!1:Re&128&&(Re&64?(y++,Re&32?(y++,Re&16?(y++,Re&8?g=!1:D++):I++):A++):g=!1)),h&&(Re>127&&Re<160?h=!1:Re>159&&(Re<192||Re===215||Re===247)&&ve++),m&&(B>0?Re<64||Re===127||Re>252?m=!1:B--:Re===128||Re===160||Re>239?m=!1:Re>160&&Re<224?(V++,oe=0,Z++,Z>le&&(le=Z)):Re>127?(B++,Z=0,oe++,oe>fe&&(fe=oe)):(Z=0,oe=0))}return g&&y>0&&(g=!1),m&&B>0&&(m=!1),g&&(De||A+I+D>0)?z.UTF8:m&&(z.ASSUME_SHIFT_JIS||le>=3||fe>=3)?z.SHIFT_JIS:h&&m?le===2&&V===2||ve*10>=d?z.SHIFT_JIS:z.ISO88591:h?z.ISO88591:m?z.SHIFT_JIS:g?z.UTF8:z.PLATFORM_DEFAULT_ENCODING}static format(i,...l){let d=-1;function h(g,y,A,I,D,B){if(g==="%%")return"%";if(l[++d]===void 0)return;g=I?parseInt(I.substr(1)):void 0;let V=D?parseInt(D.substr(1)):void 0,Z;switch(B){case"s":Z=l[d];break;case"c":Z=l[d][0];break;case"f":Z=parseFloat(l[d]).toFixed(g);break;case"p":Z=parseFloat(l[d]).toPrecision(g);break;case"e":Z=parseFloat(l[d]).toExponential(g);break;case"x":Z=parseInt(l[d]).toString(V||16);break;case"d":Z=parseFloat(parseInt(l[d],V||10).toPrecision(g)).toFixed(0);break}Z=typeof Z=="object"?JSON.stringify(Z):(+Z).toString(V);let oe=parseInt(A),le=A&&A[0]+""=="0"?"0":" ";for(;Z.length<oe;)Z=y!==void 0?Z+le:le+Z;return Z}let m=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(m,h)}static getBytes(i,l){return Y.encode(i,l)}static getCharCode(i,l=0){return i.charCodeAt(l)}static getCharAt(i){return String.fromCharCode(i)}}z.SHIFT_JIS=R.SJIS.getName(),z.GB2312="GB2312",z.ISO88591=R.ISO8859_1.getName(),z.EUC_JP="EUC_JP",z.UTF8=R.UTF8.getName(),z.PLATFORM_DEFAULT_ENCODING=z.UTF8,z.ASSUME_SHIFT_JIS=!1;class q{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=z.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,l,d){for(let h=l;l<l+d;h++)this.append(i[h]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,l){this.value=this.value.substr(0,i)+l+this.value.substr(i+1)}substring(i,l){return this.value.substring(i,l)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,l){this.value=this.value.substr(0,i)+l+this.value.substr(i+l.length)}}class ee{constructor(i,l,d,h){if(this.width=i,this.height=l,this.rowSize=d,this.bits=h,l==null&&(l=i),this.height=l,i<1||l<1)throw new w("Both dimensions must be greater than 0");d==null&&(d=Math.floor((i+31)/32)),this.rowSize=d,h==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const l=i.length,d=i[0].length,h=new ee(d,l);for(let m=0;m<l;m++){const g=i[m];for(let y=0;y<d;y++)g[y]&&h.set(y,m)}return h}static parseFromString(i,l,d){if(i===null)throw new w("stringRepresentation cannot be null");const h=new Array(i.length);let m=0,g=0,y=-1,A=0,I=0;for(;I<i.length;)if(i.charAt(I)===`
`||i.charAt(I)==="\r"){if(m>g){if(y===-1)y=m-g;else if(m-g!==y)throw new w("row lengths do not match");g=m,A++}I++}else if(i.substring(I,I+l.length)===l)I+=l.length,h[m]=!0,m++;else if(i.substring(I,I+d.length)===d)I+=d.length,h[m]=!1,m++;else throw new w("illegal character encountered: "+i.substring(I));if(m>g){if(y===-1)y=m-g;else if(m-g!==y)throw new w("row lengths do not match");A++}const D=new ee(y,A);for(let B=0;B<m;B++)h[B]&&D.set(Math.floor(B%y),Math.floor(B/y));return D}get(i,l){const d=l*this.rowSize+Math.floor(i/32);return(this.bits[d]>>>(i&31)&1)!==0}set(i,l){const d=l*this.rowSize+Math.floor(i/32);this.bits[d]|=1<<(i&31)&4294967295}unset(i,l){const d=l*this.rowSize+Math.floor(i/32);this.bits[d]&=~(1<<(i&31)&4294967295)}flip(i,l){const d=l*this.rowSize+Math.floor(i/32);this.bits[d]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new w("input matrix dimensions do not match");const l=new k(Math.floor(this.width/32)+1),d=this.rowSize,h=this.bits;for(let m=0,g=this.height;m<g;m++){const y=m*d,A=i.getRow(m,l).getBitArray();for(let I=0;I<d;I++)h[y+I]^=A[I]}}clear(){const i=this.bits,l=i.length;for(let d=0;d<l;d++)i[d]=0}setRegion(i,l,d,h){if(l<0||i<0)throw new w("Left and top must be nonnegative");if(h<1||d<1)throw new w("Height and width must be at least 1");const m=i+d,g=l+h;if(g>this.height||m>this.width)throw new w("The region must fit inside the matrix");const y=this.rowSize,A=this.bits;for(let I=l;I<g;I++){const D=I*y;for(let B=i;B<m;B++)A[D+Math.floor(B/32)]|=1<<(B&31)&4294967295}}getRow(i,l){l==null||l.getSize()<this.width?l=new k(this.width):l.clear();const d=this.rowSize,h=this.bits,m=i*d;for(let g=0;g<d;g++)l.setBulk(g*32,h[m+g]);return l}setRow(i,l){C.arraycopy(l.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),l=this.getHeight();let d=new k(i),h=new k(i);for(let m=0,g=Math.floor((l+1)/2);m<g;m++)d=this.getRow(m,d),h=this.getRow(l-1-m,h),d.reverse(),h.reverse(),this.setRow(m,h),this.setRow(l-1-m,d)}getEnclosingRectangle(){const i=this.width,l=this.height,d=this.rowSize,h=this.bits;let m=i,g=l,y=-1,A=-1;for(let I=0;I<l;I++)for(let D=0;D<d;D++){const B=h[I*d+D];if(B!==0){if(I<g&&(g=I),I>A&&(A=I),D*32<m){let V=0;for(;!(B<<31-V&4294967295);)V++;D*32+V<m&&(m=D*32+V)}if(D*32+31>y){let V=31;for(;!(B>>>V);)V--;D*32+V>y&&(y=D*32+V)}}}return y<m||A<g?null:Int32Array.from([m,g,y-m+1,A-g+1])}getTopLeftOnBit(){const i=this.rowSize,l=this.bits;let d=0;for(;d<l.length&&l[d]===0;)d++;if(d===l.length)return null;const h=d/i;let m=d%i*32;const g=l[d];let y=0;for(;!(g<<31-y&4294967295);)y++;return m+=y,Int32Array.from([m,h])}getBottomRightOnBit(){const i=this.rowSize,l=this.bits;let d=l.length-1;for(;d>=0&&l[d]===0;)d--;if(d<0)return null;const h=Math.floor(d/i);let m=Math.floor(d%i)*32;const g=l[d];let y=31;for(;!(g>>>y);)y--;return m+=y,Int32Array.from([m,h])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof ee))return!1;const l=i;return this.width===l.width&&this.height===l.height&&this.rowSize===l.rowSize&&S.equals(this.bits,l.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+S.hashCode(this.bits),i}toString(i="X ",l="  ",d=`
`){return this.buildToString(i,l,d)}buildToString(i,l,d){let h=new q;for(let m=0,g=this.height;m<g;m++){for(let y=0,A=this.width;y<A;y++)h.append(this.get(y,m)?i:l);h.append(d)}return h.toString()}clone(){return new ee(this.width,this.height,this.rowSize,this.bits.slice())}}class H extends p{static getNotFoundInstance(){return new H}}H.kind="NotFoundException";class re extends N{constructor(i){super(i),this.luminances=re.EMPTY,this.buckets=new Int32Array(re.LUMINANCE_BUCKETS)}getBlackRow(i,l){const d=this.getLuminanceSource(),h=d.getWidth();l==null||l.getSize()<h?l=new k(h):l.clear(),this.initArrays(h);const m=d.getRow(i,this.luminances),g=this.buckets;for(let A=0;A<h;A++)g[(m[A]&255)>>re.LUMINANCE_SHIFT]++;const y=re.estimateBlackPoint(g);if(h<3)for(let A=0;A<h;A++)(m[A]&255)<y&&l.set(A);else{let A=m[0]&255,I=m[1]&255;for(let D=1;D<h-1;D++){const B=m[D+1]&255;(I*4-A-B)/2<y&&l.set(D),A=I,I=B}}return l}getBlackMatrix(){const i=this.getLuminanceSource(),l=i.getWidth(),d=i.getHeight(),h=new ee(l,d);this.initArrays(l);const m=this.buckets;for(let A=1;A<5;A++){const I=Math.floor(d*A/5),D=i.getRow(I,this.luminances),B=Math.floor(l*4/5);for(let V=Math.floor(l/5);V<B;V++){const Z=D[V]&255;m[Z>>re.LUMINANCE_SHIFT]++}}const g=re.estimateBlackPoint(m),y=i.getMatrix();for(let A=0;A<d;A++){const I=A*l;for(let D=0;D<l;D++)(y[I+D]&255)<g&&h.set(D,A)}return h}createBinarizer(i){return new re(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const l=this.buckets;for(let d=0;d<re.LUMINANCE_BUCKETS;d++)l[d]=0}static estimateBlackPoint(i){const l=i.length;let d=0,h=0,m=0;for(let D=0;D<l;D++)i[D]>m&&(h=D,m=i[D]),i[D]>d&&(d=i[D]);let g=0,y=0;for(let D=0;D<l;D++){const B=D-h,V=i[D]*B*B;V>y&&(g=D,y=V)}if(h>g){const D=h;h=g,g=D}if(g-h<=l/16)throw new H;let A=g-1,I=-1;for(let D=g-1;D>h;D--){const B=D-h,V=B*B*(g-D)*(d-i[D]);V>I&&(A=D,I=V)}return A<<re.LUMINANCE_SHIFT}}re.LUMINANCE_BITS=5,re.LUMINANCE_SHIFT=8-re.LUMINANCE_BITS,re.LUMINANCE_BUCKETS=1<<re.LUMINANCE_BITS,re.EMPTY=Uint8ClampedArray.from([0]);class ae extends re{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const i=this.getLuminanceSource(),l=i.getWidth(),d=i.getHeight();if(l>=ae.MINIMUM_DIMENSION&&d>=ae.MINIMUM_DIMENSION){const h=i.getMatrix();let m=l>>ae.BLOCK_SIZE_POWER;l&ae.BLOCK_SIZE_MASK&&m++;let g=d>>ae.BLOCK_SIZE_POWER;d&ae.BLOCK_SIZE_MASK&&g++;const y=ae.calculateBlackPoints(h,m,g,l,d),A=new ee(l,d);ae.calculateThresholdForBlock(h,m,g,l,d,y,A),this.matrix=A}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new ae(i)}static calculateThresholdForBlock(i,l,d,h,m,g,y){const A=m-ae.BLOCK_SIZE,I=h-ae.BLOCK_SIZE;for(let D=0;D<d;D++){let B=D<<ae.BLOCK_SIZE_POWER;B>A&&(B=A);const V=ae.cap(D,2,d-3);for(let Z=0;Z<l;Z++){let oe=Z<<ae.BLOCK_SIZE_POWER;oe>I&&(oe=I);const le=ae.cap(Z,2,l-3);let fe=0;for(let De=-2;De<=2;De++){const Me=g[V+De];fe+=Me[le-2]+Me[le-1]+Me[le]+Me[le+1]+Me[le+2]}const ve=fe/25;ae.thresholdBlock(i,oe,B,ve,h,y)}}}static cap(i,l,d){return i<l?l:i>d?d:i}static thresholdBlock(i,l,d,h,m,g){for(let y=0,A=d*m+l;y<ae.BLOCK_SIZE;y++,A+=m)for(let I=0;I<ae.BLOCK_SIZE;I++)(i[A+I]&255)<=h&&g.set(l+I,d+y)}static calculateBlackPoints(i,l,d,h,m){const g=m-ae.BLOCK_SIZE,y=h-ae.BLOCK_SIZE,A=new Array(d);for(let I=0;I<d;I++){A[I]=new Int32Array(l);let D=I<<ae.BLOCK_SIZE_POWER;D>g&&(D=g);for(let B=0;B<l;B++){let V=B<<ae.BLOCK_SIZE_POWER;V>y&&(V=y);let Z=0,oe=255,le=0;for(let ve=0,De=D*h+V;ve<ae.BLOCK_SIZE;ve++,De+=h){for(let Me=0;Me<ae.BLOCK_SIZE;Me++){const Re=i[De+Me]&255;Z+=Re,Re<oe&&(oe=Re),Re>le&&(le=Re)}if(le-oe>ae.MIN_DYNAMIC_RANGE)for(ve++,De+=h;ve<ae.BLOCK_SIZE;ve++,De+=h)for(let Me=0;Me<ae.BLOCK_SIZE;Me++)Z+=i[De+Me]&255}let fe=Z>>ae.BLOCK_SIZE_POWER*2;if(le-oe<=ae.MIN_DYNAMIC_RANGE&&(fe=oe/2,I>0&&B>0)){const ve=(A[I-1][B]+2*A[I][B-1]+A[I-1][B-1])/4;oe<ve&&(fe=ve)}A[I][B]=fe}}return A}}ae.BLOCK_SIZE_POWER=3,ae.BLOCK_SIZE=1<<ae.BLOCK_SIZE_POWER,ae.BLOCK_SIZE_MASK=ae.BLOCK_SIZE-1,ae.MINIMUM_DIMENSION=ae.BLOCK_SIZE*5,ae.MIN_DYNAMIC_RANGE=24;class ie{constructor(i,l){this.width=i,this.height=l}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,l,d,h){throw new $("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new $("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new $("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let l=new q;for(let d=0;d<this.height;d++){const h=this.getRow(d,i);for(let m=0;m<this.width;m++){const g=h[m]&255;let y;g<64?y="#":g<128?y="+":g<192?y=".":y=" ",l.append(y)}l.append(`
`)}return l.toString()}}class te extends ie{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,l){const d=this.delegate.getRow(i,l),h=this.getWidth();for(let m=0;m<h;m++)d[m]=255-(d[m]&255);return d}getMatrix(){const i=this.delegate.getMatrix(),l=this.getWidth()*this.getHeight(),d=new Uint8ClampedArray(l);for(let h=0;h<l;h++)d[h]=255-(i[h]&255);return d}isCropSupported(){return this.delegate.isCropSupported()}crop(i,l,d,h){return new te(this.delegate.crop(i,l,d,h))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new te(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new te(this.delegate.rotateCounterClockwise45())}}class ye extends ie{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=ye.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const l=i.getContext("2d").getImageData(0,0,i.width,i.height);return ye.toGrayscaleBuffer(l.data,i.width,i.height)}static toGrayscaleBuffer(i,l,d){const h=new Uint8ClampedArray(l*d);for(let m=0,g=0,y=i.length;m<y;m+=4,g++){let A;if(i[m+3]===0)A=255;else{const D=i[m],B=i[m+1],V=i[m+2];A=306*D+601*B+117*V+512>>10}h[g]=A}return h}getRow(i,l){if(i<0||i>=this.getHeight())throw new w("Requested row is outside the image: "+i);const d=this.getWidth(),h=i*d;return l===null?l=this.buffer.slice(h,h+d):(l.length<d&&(l=new Uint8ClampedArray(d)),l.set(this.buffer.slice(h,h+d))),l}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,l,d,h){return super.crop(i,l,d,h),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const l=this.getTempCanvasElement(),d=l.getContext("2d"),h=i*ye.DEGREE_TO_RADIANS,m=this.canvas.width,g=this.canvas.height,y=Math.ceil(Math.abs(Math.cos(h))*m+Math.abs(Math.sin(h))*g),A=Math.ceil(Math.abs(Math.sin(h))*m+Math.abs(Math.cos(h))*g);return l.width=y,l.height=A,d.translate(y/2,A/2),d.rotate(h),d.drawImage(this.canvas,m/-2,g/-2),this.buffer=ye.makeBufferFromCanvasImageData(l),this}invert(){return new te(this)}}ye.DEGREE_TO_RADIANS=Math.PI/180;class ge{constructor(i,l,d){this.deviceId=i,this.label=l,this.kind="videoinput",this.groupId=d||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var W=(globalThis||on||self||window||void 0)&&(globalThis||on||self||window||void 0).__awaiter||function(F,i,l,d){function h(m){return m instanceof l?m:new l(function(g){g(m)})}return new(l||(l=Promise))(function(m,g){function y(D){try{I(d.next(D))}catch(B){g(B)}}function A(D){try{I(d.throw(D))}catch(B){g(B)}}function I(D){D.done?m(D.value):h(D.value).then(y,A)}I((d=d.apply(F,i||[])).next())})};class J{constructor(i,l=500,d){this.reader=i,this.timeBetweenScansMillis=l,this._hints=d,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return W(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),l=[];for(const d of i){const h=d.kind==="video"?"videoinput":d.kind;if(h!=="videoinput")continue;const m=d.deviceId||d.id,g=d.label||`Video device ${l.length+1}`,y=d.groupId,A={deviceId:m,label:g,kind:h,groupId:y};l.push(A)}return l})}getVideoInputDevices(){return W(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(l=>new ge(l.deviceId,l.label))})}findDeviceById(i){return W(this,void 0,void 0,function*(){const l=yield this.listVideoInputDevices();return l?l.find(d=>d.deviceId===i):null})}decodeFromInputVideoDevice(i,l){return W(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,l)})}decodeOnceFromVideoDevice(i,l){return W(this,void 0,void 0,function*(){this.reset();let d;i?d={deviceId:{exact:i}}:d={facingMode:"environment"};const h={video:d};return yield this.decodeOnceFromConstraints(h,l)})}decodeOnceFromConstraints(i,l){return W(this,void 0,void 0,function*(){const d=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(d,l)})}decodeOnceFromStream(i,l){return W(this,void 0,void 0,function*(){this.reset();const d=yield this.attachStreamToVideo(i,l);return yield this.decodeOnce(d)})}decodeFromInputVideoDeviceContinuously(i,l,d){return W(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,l,d)})}decodeFromVideoDevice(i,l,d){return W(this,void 0,void 0,function*(){let h;i?h={deviceId:{exact:i}}:h={facingMode:"environment"};const m={video:h};return yield this.decodeFromConstraints(m,l,d)})}decodeFromConstraints(i,l,d){return W(this,void 0,void 0,function*(){const h=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(h,l,d)})}decodeFromStream(i,l,d){return W(this,void 0,void 0,function*(){this.reset();const h=yield this.attachStreamToVideo(i,l);return yield this.decodeContinuously(h,d)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,l){return W(this,void 0,void 0,function*(){const d=this.prepareVideoElement(l);return this.addVideoSource(d,i),this.videoElement=d,this.stream=i,yield this.playVideoOnLoadAsync(d),d})}playVideoOnLoadAsync(i){return new Promise((l,d)=>this.playVideoOnLoad(i,()=>l()))}playVideoOnLoad(i,l){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",l),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return W(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,l){const d=document.getElementById(i);if(!d)throw new x(`element with id '${i}' not found`);if(d.nodeName.toLowerCase()!==l.toLowerCase())throw new x(`element with id '${i}' must be an ${l} element`);return d}decodeFromImage(i,l){if(!i&&!l)throw new x("either imageElement with a src set or an url must be provided");return l&&!i?this.decodeFromImageUrl(l):this.decodeFromImageElement(i)}decodeFromVideo(i,l){if(!i&&!l)throw new x("Either an element with a src set or an URL must be provided");return l&&!i?this.decodeFromVideoUrl(l):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,l,d){if(i===void 0&&l===void 0)throw new x("Either an element with a src set or an URL must be provided");return l&&!i?this.decodeFromVideoUrlContinuously(l,d):this.decodeFromVideoElementContinuously(i,d)}decodeFromImageElement(i){if(!i)throw new x("An image element must be provided.");this.reset();const l=this.prepareImageElement(i);this.imageElement=l;let d;return this.isImageLoaded(l)?d=this.decodeOnce(l,!1,!0):d=this._decodeOnLoadImage(l),d}decodeFromVideoElement(i){const l=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(l)}decodeFromVideoElementContinuously(i,l){const d=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(d,l)}_decodeFromVideoElementSetup(i){if(!i)throw new x("A video element must be provided.");this.reset();const l=this.prepareVideoElement(i);return this.videoElement=l,l}decodeFromImageUrl(i){if(!i)throw new x("An URL must be provided.");this.reset();const l=this.prepareImageElement();this.imageElement=l;const d=this._decodeOnLoadImage(l);return l.src=i,d}decodeFromVideoUrl(i){if(!i)throw new x("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),d=this.decodeFromVideoElement(l);return l.src=i,d}decodeFromVideoUrlContinuously(i,l){if(!i)throw new x("An URL must be provided.");this.reset();const d=this.prepareVideoElement(),h=this.decodeFromVideoElementContinuously(d,l);return d.src=i,h}_decodeOnLoadImage(i){return new Promise((l,d)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(l,d),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return W(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,l){return W(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,l)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let l;return typeof i>"u"&&(l=document.createElement("img"),l.width=200,l.height=200),typeof i=="string"&&(l=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(l=i),l}prepareVideoElement(i){let l;return!i&&typeof document<"u"&&(l=document.createElement("video"),l.width=200,l.height=200),typeof i=="string"&&(l=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(l=i),l.setAttribute("autoplay","true"),l.setAttribute("muted","true"),l.setAttribute("playsinline","true"),l}decodeOnce(i,l=!0,d=!0){this._stopAsyncDecode=!1;const h=(m,g)=>{if(this._stopAsyncDecode){g(new H("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const y=this.decode(i);m(y)}catch(y){const A=l&&y instanceof H,D=(y instanceof j||y instanceof P)&&d;if(A||D)return setTimeout(h,this._timeBetweenDecodingAttempts,m,g);g(y)}};return new Promise((m,g)=>h(m,g))}decodeContinuously(i,l){this._stopContinuousDecode=!1;const d=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const h=this.decode(i);l(h,null),setTimeout(d,this.timeBetweenScansMillis)}catch(h){l(null,h);const m=h instanceof j||h instanceof P,g=h instanceof H;(m||g)&&setTimeout(d,this._timeBetweenDecodingAttempts)}};d()}decode(i){const l=this.createBinaryBitmap(i);return this.decodeBitmap(l)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,l,d){l||(l={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),d||(d=this.captureCanvasContext),d.drawImage(i,l.sx,l.sy,l.sWidth,l.sHeight,l.dx,l.dy,l.dWidth,l.dHeight)}drawImageOnCanvas(i,l,d=this.captureCanvasContext){l||(l={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),d||(d=this.captureCanvasContext),d.drawImage(i,l.sx,l.sy,l.sWidth,l.sHeight,l.dx,l.dy,l.dWidth,l.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const l=this.getCaptureCanvas(i),d=new ye(l),h=new ae(d);return new _(h)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const d=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=d}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const l=this.createCaptureCanvas(i);this.captureCanvas=l}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const l=document.createElement("canvas");let d,h;return typeof i<"u"&&(i instanceof HTMLVideoElement?(d=i.videoWidth,h=i.videoHeight):i instanceof HTMLImageElement&&(d=i.naturalWidth||i.width,h=i.naturalHeight||i.height)),l.style.width=d+"px",l.style.height=h+"px",l.width=d,l.height=h,l}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,l){try{i.srcObject=l}catch{i.src=URL.createObjectURL(l)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class G{constructor(i,l,d=l==null?0:8*l.length,h,m,g=C.currentTimeMillis()){this.text=i,this.rawBytes=l,this.numBits=d,this.resultPoints=h,this.format=m,this.timestamp=g,this.text=i,this.rawBytes=l,d==null?this.numBits=l==null?0:8*l.length:this.numBits=d,this.resultPoints=h,this.format=m,this.resultMetadata=null,g==null?this.timestamp=C.currentTimeMillis():this.timestamp=g}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,l){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,l)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){const l=this.resultPoints;if(l===null)this.resultPoints=i;else if(i!==null&&i.length>0){const d=new Array(l.length+i.length);C.arraycopy(l,0,d,0,l.length),C.arraycopy(i,0,d,l.length,i.length),this.resultPoints=d}}getTimestamp(){return this.timestamp}toString(){return this.text}}var se;(function(F){F[F.AZTEC=0]="AZTEC",F[F.CODABAR=1]="CODABAR",F[F.CODE_39=2]="CODE_39",F[F.CODE_93=3]="CODE_93",F[F.CODE_128=4]="CODE_128",F[F.DATA_MATRIX=5]="DATA_MATRIX",F[F.EAN_8=6]="EAN_8",F[F.EAN_13=7]="EAN_13",F[F.ITF=8]="ITF",F[F.MAXICODE=9]="MAXICODE",F[F.PDF_417=10]="PDF_417",F[F.QR_CODE=11]="QR_CODE",F[F.RSS_14=12]="RSS_14",F[F.RSS_EXPANDED=13]="RSS_EXPANDED",F[F.UPC_A=14]="UPC_A",F[F.UPC_E=15]="UPC_E",F[F.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(se||(se={}));var ce=se,ne;(function(F){F[F.OTHER=0]="OTHER",F[F.ORIENTATION=1]="ORIENTATION",F[F.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",F[F.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",F[F.ISSUE_NUMBER=4]="ISSUE_NUMBER",F[F.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",F[F.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",F[F.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",F[F.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",F[F.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",F[F.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ne||(ne={}));var he=ne;class Ae{constructor(i,l,d,h,m=-1,g=-1){this.rawBytes=i,this.text=l,this.byteSegments=d,this.ecLevel=h,this.structuredAppendSequenceNumber=m,this.structuredAppendParity=g,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Pe{exp(i){return this.expTable[i]}log(i){if(i===0)throw new w;return this.logTable[i]}static addOrSubtract(i,l){return i^l}}class Be{constructor(i,l){if(l.length===0)throw new w;this.field=i;const d=l.length;if(d>1&&l[0]===0){let h=1;for(;h<d&&l[h]===0;)h++;h===d?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(d-h),C.arraycopy(l,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=l}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);const l=this.coefficients;let d;if(i===1){d=0;for(let g=0,y=l.length;g!==y;g++){const A=l[g];d=Pe.addOrSubtract(d,A)}return d}d=l[0];const h=l.length,m=this.field;for(let g=1;g<h;g++)d=Pe.addOrSubtract(m.multiply(i,d),l[g]);return d}addOrSubtract(i){if(!this.field.equals(i.field))throw new w("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let l=this.coefficients,d=i.coefficients;if(l.length>d.length){const g=l;l=d,d=g}let h=new Int32Array(d.length);const m=d.length-l.length;C.arraycopy(d,0,h,0,m);for(let g=m;g<d.length;g++)h[g]=Pe.addOrSubtract(l[g-m],d[g]);return new Be(this.field,h)}multiply(i){if(!this.field.equals(i.field))throw new w("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const l=this.coefficients,d=l.length,h=i.coefficients,m=h.length,g=new Int32Array(d+m-1),y=this.field;for(let A=0;A<d;A++){const I=l[A];for(let D=0;D<m;D++)g[A+D]=Pe.addOrSubtract(g[A+D],y.multiply(I,h[D]))}return new Be(y,g)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;const l=this.coefficients.length,d=this.field,h=new Int32Array(l),m=this.coefficients;for(let g=0;g<l;g++)h[g]=d.multiply(m[g],i);return new Be(d,h)}multiplyByMonomial(i,l){if(i<0)throw new w;if(l===0)return this.field.getZero();const d=this.coefficients,h=d.length,m=new Int32Array(h+i),g=this.field;for(let y=0;y<h;y++)m[y]=g.multiply(d[y],l);return new Be(g,m)}divide(i){if(!this.field.equals(i.field))throw new w("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new w("Divide by 0");const l=this.field;let d=l.getZero(),h=this;const m=i.getCoefficient(i.getDegree()),g=l.inverse(m);for(;h.getDegree()>=i.getDegree()&&!h.isZero();){const y=h.getDegree()-i.getDegree(),A=l.multiply(h.getCoefficient(h.getDegree()),g),I=i.multiplyByMonomial(y,A),D=l.buildMonomial(y,A);d=d.addOrSubtract(D),h=h.addOrSubtract(I)}return[d,h]}toString(){let i="";for(let l=this.getDegree();l>=0;l--){let d=this.getCoefficient(l);if(d!==0){if(d<0?(i+=" - ",d=-d):i.length>0&&(i+=" + "),l===0||d!==1){const h=this.field.log(d);h===0?i+="1":h===1?i+="a":(i+="a^",i+=h)}l!==0&&(l===1?i+="x":(i+="x^",i+=l))}}return i}}class Ee extends p{}Ee.kind="ArithmeticException";class ue extends Pe{constructor(i,l,d){super(),this.primitive=i,this.size=l,this.generatorBase=d;const h=new Int32Array(l);let m=1;for(let y=0;y<l;y++)h[y]=m,m*=2,m>=l&&(m^=i,m&=l-1);this.expTable=h;const g=new Int32Array(l);for(let y=0;y<l-1;y++)g[h[y]]=y;this.logTable=g,this.zero=new Be(this,Int32Array.from([0])),this.one=new Be(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,l){if(i<0)throw new w;if(l===0)return this.zero;const d=new Int32Array(i+1);return d[0]=l,new Be(this,d)}inverse(i){if(i===0)throw new Ee;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,l){return i===0||l===0?0:this.expTable[(this.logTable[i]+this.logTable[l])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+b.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}ue.AZTEC_DATA_12=new ue(4201,4096,1),ue.AZTEC_DATA_10=new ue(1033,1024,1),ue.AZTEC_DATA_6=new ue(67,64,1),ue.AZTEC_PARAM=new ue(19,16,1),ue.QR_CODE_FIELD_256=new ue(285,256,0),ue.DATA_MATRIX_FIELD_256=new ue(301,256,1),ue.AZTEC_DATA_8=ue.DATA_MATRIX_FIELD_256,ue.MAXICODE_FIELD_64=ue.AZTEC_DATA_6;class Fe extends p{}Fe.kind="ReedSolomonException";class _e extends p{}_e.kind="IllegalStateException";class Ze{constructor(i){this.field=i}decode(i,l){const d=this.field,h=new Be(d,i),m=new Int32Array(l);let g=!0;for(let Z=0;Z<l;Z++){const oe=h.evaluateAt(d.exp(Z+d.getGeneratorBase()));m[m.length-1-Z]=oe,oe!==0&&(g=!1)}if(g)return;const y=new Be(d,m),A=this.runEuclideanAlgorithm(d.buildMonomial(l,1),y,l),I=A[0],D=A[1],B=this.findErrorLocations(I),V=this.findErrorMagnitudes(D,B);for(let Z=0;Z<B.length;Z++){const oe=i.length-1-d.log(B[Z]);if(oe<0)throw new Fe("Bad error location");i[oe]=ue.addOrSubtract(i[oe],V[Z])}}runEuclideanAlgorithm(i,l,d){if(i.getDegree()<l.getDegree()){const Z=i;i=l,l=Z}const h=this.field;let m=i,g=l,y=h.getZero(),A=h.getOne();for(;g.getDegree()>=(d/2|0);){let Z=m,oe=y;if(m=g,y=A,m.isZero())throw new Fe("r_{i-1} was zero");g=Z;let le=h.getZero();const fe=m.getCoefficient(m.getDegree()),ve=h.inverse(fe);for(;g.getDegree()>=m.getDegree()&&!g.isZero();){const De=g.getDegree()-m.getDegree(),Me=h.multiply(g.getCoefficient(g.getDegree()),ve);le=le.addOrSubtract(h.buildMonomial(De,Me)),g=g.addOrSubtract(m.multiplyByMonomial(De,Me))}if(A=le.multiply(y).addOrSubtract(oe),g.getDegree()>=m.getDegree())throw new _e("Division algorithm failed to reduce polynomial?")}const I=A.getCoefficient(0);if(I===0)throw new Fe("sigmaTilde(0) was zero");const D=h.inverse(I),B=A.multiplyScalar(D),V=g.multiplyScalar(D);return[B,V]}findErrorLocations(i){const l=i.getDegree();if(l===1)return Int32Array.from([i.getCoefficient(1)]);const d=new Int32Array(l);let h=0;const m=this.field;for(let g=1;g<m.getSize()&&h<l;g++)i.evaluateAt(g)===0&&(d[h]=m.inverse(g),h++);if(h!==l)throw new Fe("Error locator degree does not match number of roots");return d}findErrorMagnitudes(i,l){const d=l.length,h=new Int32Array(d),m=this.field;for(let g=0;g<d;g++){const y=m.inverse(l[g]);let A=1;for(let I=0;I<d;I++)if(g!==I){const D=m.multiply(l[I],y),B=D&1?D&-2:D|1;A=m.multiply(A,B)}h[g]=m.multiply(i.evaluateAt(y),m.inverse(A)),m.getGeneratorBase()!==0&&(h[g]=m.multiply(h[g],y))}return h}}var be;(function(F){F[F.UPPER=0]="UPPER",F[F.LOWER=1]="LOWER",F[F.MIXED=2]="MIXED",F[F.DIGIT=3]="DIGIT",F[F.PUNCT=4]="PUNCT",F[F.BINARY=5]="BINARY"})(be||(be={}));class ze{decode(i){this.ddata=i;let l=i.getBits(),d=this.extractBits(l),h=this.correctBits(d),m=ze.convertBoolArrayToByteArray(h),g=ze.getEncodedData(h),y=new Ae(m,g,null,null);return y.setNumBits(h.length),y}static highLevelDecode(i){return this.getEncodedData(i)}static getEncodedData(i){let l=i.length,d=be.UPPER,h=be.UPPER,m="",g=0;for(;g<l;)if(h===be.BINARY){if(l-g<5)break;let y=ze.readCode(i,g,5);if(g+=5,y===0){if(l-g<11)break;y=ze.readCode(i,g,11)+31,g+=11}for(let A=0;A<y;A++){if(l-g<8){g=l;break}const I=ze.readCode(i,g,8);m+=z.castAsNonUtf8Char(I),g+=8}h=d}else{let y=h===be.DIGIT?4:5;if(l-g<y)break;let A=ze.readCode(i,g,y);g+=y;let I=ze.getCharacter(h,A);I.startsWith("CTRL_")?(d=h,h=ze.getTable(I.charAt(5)),I.charAt(6)==="L"&&(d=h)):(m+=I,h=d)}return m}static getTable(i){switch(i){case"L":return be.LOWER;case"P":return be.PUNCT;case"M":return be.MIXED;case"D":return be.DIGIT;case"B":return be.BINARY;case"U":default:return be.UPPER}}static getCharacter(i,l){switch(i){case be.UPPER:return ze.UPPER_TABLE[l];case be.LOWER:return ze.LOWER_TABLE[l];case be.MIXED:return ze.MIXED_TABLE[l];case be.PUNCT:return ze.PUNCT_TABLE[l];case be.DIGIT:return ze.DIGIT_TABLE[l];default:throw new _e("Bad table")}}correctBits(i){let l,d;this.ddata.getNbLayers()<=2?(d=6,l=ue.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(d=8,l=ue.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(d=10,l=ue.AZTEC_DATA_10):(d=12,l=ue.AZTEC_DATA_12);let h=this.ddata.getNbDatablocks(),m=i.length/d;if(m<h)throw new P;let g=i.length%d,y=new Int32Array(m);for(let V=0;V<m;V++,g+=d)y[V]=ze.readCode(i,g,d);try{new Ze(l).decode(y,m-h)}catch(V){throw new P(V)}let A=(1<<d)-1,I=0;for(let V=0;V<h;V++){let Z=y[V];if(Z===0||Z===A)throw new P;(Z===1||Z===A-1)&&I++}let D=new Array(h*d-I),B=0;for(let V=0;V<h;V++){let Z=y[V];if(Z===1||Z===A-1)D.fill(Z>1,B,B+d-1),B+=d-1;else for(let oe=d-1;oe>=0;--oe)D[B++]=(Z&1<<oe)!==0}return D}extractBits(i){let l=this.ddata.isCompact(),d=this.ddata.getNbLayers(),h=(l?11:14)+d*4,m=new Int32Array(h),g=new Array(this.totalBitsInLayer(d,l));if(l)for(let y=0;y<m.length;y++)m[y]=y;else{let y=h+1+2*b.truncDivision(b.truncDivision(h,2)-1,15),A=h/2,I=b.truncDivision(y,2);for(let D=0;D<A;D++){let B=D+b.truncDivision(D,15);m[A-D-1]=I-B-1,m[A+D]=I+B+1}}for(let y=0,A=0;y<d;y++){let I=(d-y)*4+(l?9:12),D=y*2,B=h-1-D;for(let V=0;V<I;V++){let Z=V*2;for(let oe=0;oe<2;oe++)g[A+Z+oe]=i.get(m[D+oe],m[D+V]),g[A+2*I+Z+oe]=i.get(m[D+V],m[B-oe]),g[A+4*I+Z+oe]=i.get(m[B-oe],m[B-V]),g[A+6*I+Z+oe]=i.get(m[B-V],m[D+oe])}A+=I*8}return g}static readCode(i,l,d){let h=0;for(let m=l;m<l+d;m++)h<<=1,i[m]&&(h|=1);return h}static readByte(i,l){let d=i.length-l;return d>=8?ze.readCode(i,l,8):ze.readCode(i,l,d)<<8-d}static convertBoolArrayToByteArray(i){let l=new Uint8Array((i.length+7)/8);for(let d=0;d<l.length;d++)l[d]=ze.readByte(i,8*d);return l}totalBitsInLayer(i,l){return((l?88:112)+16*i)*i}}ze.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ze.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ze.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ze.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ze.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class He{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,l,d,h){const m=i-d,g=l-h;return Math.sqrt(m*m+g*g)}static sum(i){let l=0;for(let d=0,h=i.length;d!==h;d++){const m=i[d];l+=m}return l}}class Ft{static floatToIntBits(i){return i}}Ft.MAX_VALUE=Number.MAX_SAFE_INTEGER;class pe{constructor(i,l){this.x=i,this.y=l}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof pe){const l=i;return this.x===l.x&&this.y===l.y}return!1}hashCode(){return 31*Ft.floatToIntBits(this.x)+Ft.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const l=this.distance(i[0],i[1]),d=this.distance(i[1],i[2]),h=this.distance(i[0],i[2]);let m,g,y;if(d>=l&&d>=h?(g=i[0],m=i[1],y=i[2]):h>=d&&h>=l?(g=i[1],m=i[0],y=i[2]):(g=i[2],m=i[0],y=i[1]),this.crossProductZ(m,g,y)<0){const A=m;m=y,y=A}i[0]=m,i[1]=g,i[2]=y}static distance(i,l){return He.distance(i.x,i.y,l.x,l.y)}static crossProductZ(i,l,d){const h=l.x,m=l.y;return(d.x-h)*(i.y-m)-(d.y-m)*(i.x-h)}}class Je{constructor(i,l){this.bits=i,this.points=l}getBits(){return this.bits}getPoints(){return this.points}}class at extends Je{constructor(i,l,d,h,m){super(i,l),this.compact=d,this.nbDatablocks=h,this.nbLayers=m}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class it{constructor(i,l,d,h){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),l==null&&(l=it.INIT_SIZE),d==null&&(d=i.getWidth()/2|0),h==null&&(h=i.getHeight()/2|0);const m=l/2|0;if(this.leftInit=d-m,this.rightInit=d+m,this.upInit=h-m,this.downInit=h+m,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new H}detect(){let i=this.leftInit,l=this.rightInit,d=this.upInit,h=this.downInit,m=!1,g=!0,y=!1,A=!1,I=!1,D=!1,B=!1;const V=this.width,Z=this.height;for(;g;){g=!1;let oe=!0;for(;(oe||!A)&&l<V;)oe=this.containsBlackPoint(d,h,l,!1),oe?(l++,g=!0,A=!0):A||l++;if(l>=V){m=!0;break}let le=!0;for(;(le||!I)&&h<Z;)le=this.containsBlackPoint(i,l,h,!0),le?(h++,g=!0,I=!0):I||h++;if(h>=Z){m=!0;break}let fe=!0;for(;(fe||!D)&&i>=0;)fe=this.containsBlackPoint(d,h,i,!1),fe?(i--,g=!0,D=!0):D||i--;if(i<0){m=!0;break}let ve=!0;for(;(ve||!B)&&d>=0;)ve=this.containsBlackPoint(i,l,d,!0),ve?(d--,g=!0,B=!0):B||d--;if(d<0){m=!0;break}g&&(y=!0)}if(!m&&y){const oe=l-i;let le=null;for(let Me=1;le===null&&Me<oe;Me++)le=this.getBlackPointOnSegment(i,h-Me,i+Me,h);if(le==null)throw new H;let fe=null;for(let Me=1;fe===null&&Me<oe;Me++)fe=this.getBlackPointOnSegment(i,d+Me,i+Me,d);if(fe==null)throw new H;let ve=null;for(let Me=1;ve===null&&Me<oe;Me++)ve=this.getBlackPointOnSegment(l,d+Me,l-Me,d);if(ve==null)throw new H;let De=null;for(let Me=1;De===null&&Me<oe;Me++)De=this.getBlackPointOnSegment(l,h-Me,l-Me,h);if(De==null)throw new H;return this.centerEdges(De,le,ve,fe)}else throw new H}getBlackPointOnSegment(i,l,d,h){const m=He.round(He.distance(i,l,d,h)),g=(d-i)/m,y=(h-l)/m,A=this.image;for(let I=0;I<m;I++){const D=He.round(i+I*g),B=He.round(l+I*y);if(A.get(D,B))return new pe(D,B)}return null}centerEdges(i,l,d,h){const m=i.getX(),g=i.getY(),y=l.getX(),A=l.getY(),I=d.getX(),D=d.getY(),B=h.getX(),V=h.getY(),Z=it.CORR;return m<this.width/2?[new pe(B-Z,V+Z),new pe(y+Z,A+Z),new pe(I-Z,D-Z),new pe(m+Z,g-Z)]:[new pe(B+Z,V+Z),new pe(y+Z,A-Z),new pe(I-Z,D+Z),new pe(m-Z,g-Z)]}containsBlackPoint(i,l,d,h){const m=this.image;if(h){for(let g=i;g<=l;g++)if(m.get(g,d))return!0}else for(let g=i;g<=l;g++)if(m.get(d,g))return!0;return!1}}it.INIT_SIZE=10,it.CORR=1;class ar{static checkAndNudgePoints(i,l){const d=i.getWidth(),h=i.getHeight();let m=!0;for(let g=0;g<l.length&&m;g+=2){const y=Math.floor(l[g]),A=Math.floor(l[g+1]);if(y<-1||y>d||A<-1||A>h)throw new H;m=!1,y===-1?(l[g]=0,m=!0):y===d&&(l[g]=d-1,m=!0),A===-1?(l[g+1]=0,m=!0):A===h&&(l[g+1]=h-1,m=!0)}m=!0;for(let g=l.length-2;g>=0&&m;g-=2){const y=Math.floor(l[g]),A=Math.floor(l[g+1]);if(y<-1||y>d||A<-1||A>h)throw new H;m=!1,y===-1?(l[g]=0,m=!0):y===d&&(l[g]=d-1,m=!0),A===-1?(l[g+1]=0,m=!0):A===h&&(l[g+1]=h-1,m=!0)}}}class Nt{constructor(i,l,d,h,m,g,y,A,I){this.a11=i,this.a21=l,this.a31=d,this.a12=h,this.a22=m,this.a32=g,this.a13=y,this.a23=A,this.a33=I}static quadrilateralToQuadrilateral(i,l,d,h,m,g,y,A,I,D,B,V,Z,oe,le,fe){const ve=Nt.quadrilateralToSquare(i,l,d,h,m,g,y,A);return Nt.squareToQuadrilateral(I,D,B,V,Z,oe,le,fe).times(ve)}transformPoints(i){const l=i.length,d=this.a11,h=this.a12,m=this.a13,g=this.a21,y=this.a22,A=this.a23,I=this.a31,D=this.a32,B=this.a33;for(let V=0;V<l;V+=2){const Z=i[V],oe=i[V+1],le=m*Z+A*oe+B;i[V]=(d*Z+g*oe+I)/le,i[V+1]=(h*Z+y*oe+D)/le}}transformPointsWithValues(i,l){const d=this.a11,h=this.a12,m=this.a13,g=this.a21,y=this.a22,A=this.a23,I=this.a31,D=this.a32,B=this.a33,V=i.length;for(let Z=0;Z<V;Z++){const oe=i[Z],le=l[Z],fe=m*oe+A*le+B;i[Z]=(d*oe+g*le+I)/fe,l[Z]=(h*oe+y*le+D)/fe}}static squareToQuadrilateral(i,l,d,h,m,g,y,A){const I=i-d+m-y,D=l-h+g-A;if(I===0&&D===0)return new Nt(d-i,m-d,i,h-l,g-h,l,0,0,1);{const B=d-m,V=y-m,Z=h-g,oe=A-g,le=B*oe-V*Z,fe=(I*oe-V*D)/le,ve=(B*D-I*Z)/le;return new Nt(d-i+fe*d,y-i+ve*y,i,h-l+fe*h,A-l+ve*A,l,fe,ve,1)}}static quadrilateralToSquare(i,l,d,h,m,g,y,A){return Nt.squareToQuadrilateral(i,l,d,h,m,g,y,A).buildAdjoint()}buildAdjoint(){return new Nt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new Nt(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class Sr extends ar{sampleGrid(i,l,d,h,m,g,y,A,I,D,B,V,Z,oe,le,fe,ve,De,Me){const Re=Nt.quadrilateralToQuadrilateral(h,m,g,y,A,I,D,B,V,Z,oe,le,fe,ve,De,Me);return this.sampleGridWithTransform(i,l,d,Re)}sampleGridWithTransform(i,l,d,h){if(l<=0||d<=0)throw new H;const m=new ee(l,d),g=new Float32Array(2*l);for(let y=0;y<d;y++){const A=g.length,I=y+.5;for(let D=0;D<A;D+=2)g[D]=D/2+.5,g[D+1]=I;h.transformPoints(g),ar.checkAndNudgePoints(i,g);try{for(let D=0;D<A;D+=2)i.get(Math.floor(g[D]),Math.floor(g[D+1]))&&m.set(D/2,y)}catch{throw new H}}return m}}class At{static setGridSampler(i){At.gridSampler=i}static getInstance(){return At.gridSampler}}At.gridSampler=new Sr;class Ve{constructor(i,l){this.x=i,this.y=l}toResultPoint(){return new pe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Se{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let l=this.getMatrixCenter(),d=this.getBullsEyeCorners(l);if(i){let g=d[0];d[0]=d[2],d[2]=g}this.extractParameters(d);let h=this.sampleGrid(this.image,d[this.shift%4],d[(this.shift+1)%4],d[(this.shift+2)%4],d[(this.shift+3)%4]),m=this.getMatrixCornerPoints(d);return new at(h,m,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new H;let l=2*this.nbCenterLayers,d=new Int32Array([this.sampleLine(i[0],i[1],l),this.sampleLine(i[1],i[2],l),this.sampleLine(i[2],i[3],l),this.sampleLine(i[3],i[0],l)]);this.shift=this.getRotation(d,l);let h=0;for(let g=0;g<4;g++){let y=d[(this.shift+g)%4];this.compact?(h<<=7,h+=y>>1&127):(h<<=10,h+=(y>>2&992)+(y>>1&31))}let m=this.getCorrectedParameterData(h,this.compact);this.compact?(this.nbLayers=(m>>6)+1,this.nbDataBlocks=(m&63)+1):(this.nbLayers=(m>>11)+1,this.nbDataBlocks=(m&2047)+1)}getRotation(i,l){let d=0;i.forEach((h,m,g)=>{let y=(h>>l-2<<1)+(h&1);d=(d<<3)+y}),d=((d&1)<<11)+(d>>1);for(let h=0;h<4;h++)if(b.bitCount(d^this.EXPECTED_CORNER_BITS[h])<=2)return h;throw new H}getCorrectedParameterData(i,l){let d,h;l?(d=7,h=2):(d=10,h=4);let m=d-h,g=new Int32Array(d);for(let A=d-1;A>=0;--A)g[A]=i&15,i>>=4;try{new Ze(ue.AZTEC_PARAM).decode(g,m)}catch{throw new H}let y=0;for(let A=0;A<h;A++)y=(y<<4)+g[A];return y}getBullsEyeCorners(i){let l=i,d=i,h=i,m=i,g=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let B=this.getFirstDifferent(l,g,1,-1),V=this.getFirstDifferent(d,g,1,1),Z=this.getFirstDifferent(h,g,-1,1),oe=this.getFirstDifferent(m,g,-1,-1);if(this.nbCenterLayers>2){let le=this.distancePoint(oe,B)*this.nbCenterLayers/(this.distancePoint(m,l)*(this.nbCenterLayers+2));if(le<.75||le>1.25||!this.isWhiteOrBlackRectangle(B,V,Z,oe))break}l=B,d=V,h=Z,m=oe,g=!g}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new H;this.compact=this.nbCenterLayers===5;let y=new pe(l.getX()+.5,l.getY()-.5),A=new pe(d.getX()+.5,d.getY()+.5),I=new pe(h.getX()-.5,h.getY()+.5),D=new pe(m.getX()-.5,m.getY()-.5);return this.expandSquare([y,A,I,D],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,l,d,h;try{let y=new it(this.image).detect();i=y[0],l=y[1],d=y[2],h=y[3]}catch{let A=this.image.getWidth()/2,I=this.image.getHeight()/2;i=this.getFirstDifferent(new Ve(A+7,I-7),!1,1,-1).toResultPoint(),l=this.getFirstDifferent(new Ve(A+7,I+7),!1,1,1).toResultPoint(),d=this.getFirstDifferent(new Ve(A-7,I+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new Ve(A-7,I-7),!1,-1,-1).toResultPoint()}let m=He.round((i.getX()+h.getX()+l.getX()+d.getX())/4),g=He.round((i.getY()+h.getY()+l.getY()+d.getY())/4);try{let y=new it(this.image,15,m,g).detect();i=y[0],l=y[1],d=y[2],h=y[3]}catch{i=this.getFirstDifferent(new Ve(m+7,g-7),!1,1,-1).toResultPoint(),l=this.getFirstDifferent(new Ve(m+7,g+7),!1,1,1).toResultPoint(),d=this.getFirstDifferent(new Ve(m-7,g+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new Ve(m-7,g-7),!1,-1,-1).toResultPoint()}return m=He.round((i.getX()+h.getX()+l.getX()+d.getX())/4),g=He.round((i.getY()+h.getY()+l.getY()+d.getY())/4),new Ve(m,g)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,l,d,h,m){let g=At.getInstance(),y=this.getDimension(),A=y/2-this.nbCenterLayers,I=y/2+this.nbCenterLayers;return g.sampleGrid(i,y,y,A,A,I,A,I,I,A,I,l.getX(),l.getY(),d.getX(),d.getY(),h.getX(),h.getY(),m.getX(),m.getY())}sampleLine(i,l,d){let h=0,m=this.distanceResultPoint(i,l),g=m/d,y=i.getX(),A=i.getY(),I=g*(l.getX()-i.getX())/m,D=g*(l.getY()-i.getY())/m;for(let B=0;B<d;B++)this.image.get(He.round(y+B*I),He.round(A+B*D))&&(h|=1<<d-B-1);return h}isWhiteOrBlackRectangle(i,l,d,h){let m=3;i=new Ve(i.getX()-m,i.getY()+m),l=new Ve(l.getX()-m,l.getY()-m),d=new Ve(d.getX()+m,d.getY()-m),h=new Ve(h.getX()+m,h.getY()+m);let g=this.getColor(h,i);if(g===0)return!1;let y=this.getColor(i,l);return y!==g||(y=this.getColor(l,d),y!==g)?!1:(y=this.getColor(d,h),y===g)}getColor(i,l){let d=this.distancePoint(i,l),h=(l.getX()-i.getX())/d,m=(l.getY()-i.getY())/d,g=0,y=i.getX(),A=i.getY(),I=this.image.get(i.getX(),i.getY()),D=Math.ceil(d);for(let V=0;V<D;V++)y+=h,A+=m,this.image.get(He.round(y),He.round(A))!==I&&g++;let B=g/d;return B>.1&&B<.9?0:B<=.1===I?1:-1}getFirstDifferent(i,l,d,h){let m=i.getX()+d,g=i.getY()+h;for(;this.isValid(m,g)&&this.image.get(m,g)===l;)m+=d,g+=h;for(m-=d,g-=h;this.isValid(m,g)&&this.image.get(m,g)===l;)m+=d;for(m-=d;this.isValid(m,g)&&this.image.get(m,g)===l;)g+=h;return g-=h,new Ve(m,g)}expandSquare(i,l,d){let h=d/(2*l),m=i[0].getX()-i[2].getX(),g=i[0].getY()-i[2].getY(),y=(i[0].getX()+i[2].getX())/2,A=(i[0].getY()+i[2].getY())/2,I=new pe(y+h*m,A+h*g),D=new pe(y-h*m,A-h*g);m=i[1].getX()-i[3].getX(),g=i[1].getY()-i[3].getY(),y=(i[1].getX()+i[3].getX())/2,A=(i[1].getY()+i[3].getY())/2;let B=new pe(y+h*m,A+h*g),V=new pe(y-h*m,A-h*g);return[I,B,D,V]}isValid(i,l){return i>=0&&i<this.image.getWidth()&&l>0&&l<this.image.getHeight()}isValidPoint(i){let l=He.round(i.getX()),d=He.round(i.getY());return this.isValid(l,d)}distancePoint(i,l){return He.distance(i.getX(),i.getY(),l.getX(),l.getY())}distanceResultPoint(i,l){return He.distance(i.getX(),i.getY(),l.getX(),l.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(b.truncDivision(this.nbLayers-4,8)+1)+15}}class ut{decode(i,l=null){let d=null,h=new Se(i.getBlackMatrix()),m=null,g=null;try{let D=h.detectMirror(!1);m=D.getPoints(),this.reportFoundResultPoints(l,m),g=new ze().decode(D)}catch(D){d=D}if(g==null)try{let D=h.detectMirror(!0);m=D.getPoints(),this.reportFoundResultPoints(l,m),g=new ze().decode(D)}catch(D){throw d??D}let y=new G(g.getText(),g.getRawBytes(),g.getNumBits(),m,ce.AZTEC,C.currentTimeMillis()),A=g.getByteSegments();A!=null&&y.putMetadata(he.BYTE_SEGMENTS,A);let I=g.getECLevel();return I!=null&&y.putMetadata(he.ERROR_CORRECTION_LEVEL,I),y}reportFoundResultPoints(i,l){if(i!=null){let d=i.get(L.NEED_RESULT_POINT_CALLBACK);d!=null&&l.forEach((h,m,g)=>{d.foundPossibleResultPoint(h)})}}reset(){}}class lt extends J{constructor(i=500){super(new ut,i)}}class ft{decode(i,l){try{return this.doDecode(i,l)}catch{if(l&&l.get(L.TRY_HARDER)===!0&&i.isRotateSupported()){const m=i.rotateCounterClockwise(),g=this.doDecode(m,l),y=g.getResultMetadata();let A=270;y!==null&&y.get(he.ORIENTATION)===!0&&(A=A+y.get(he.ORIENTATION)%360),g.putMetadata(he.ORIENTATION,A);const I=g.getResultPoints();if(I!==null){const D=m.getHeight();for(let B=0;B<I.length;B++)I[B]=new pe(D-I[B].getY()-1,I[B].getX())}return g}else throw new H}}reset(){}doDecode(i,l){const d=i.getWidth(),h=i.getHeight();let m=new k(d);const g=l&&l.get(L.TRY_HARDER)===!0,y=Math.max(1,h>>(g?8:5));let A;g?A=h:A=15;const I=Math.trunc(h/2);for(let D=0;D<A;D++){const B=Math.trunc((D+1)/2),V=(D&1)===0,Z=I+y*(V?B:-B);if(Z<0||Z>=h)break;try{m=i.getBlackRow(Z,m)}catch{continue}for(let oe=0;oe<2;oe++){if(oe===1&&(m.reverse(),l&&l.get(L.NEED_RESULT_POINT_CALLBACK)===!0)){const le=new Map;l.forEach((fe,ve)=>le.set(ve,fe)),le.delete(L.NEED_RESULT_POINT_CALLBACK),l=le}try{const le=this.decodeRow(Z,m,l);if(oe===1){le.putMetadata(he.ORIENTATION,180);const fe=le.getResultPoints();fe!==null&&(fe[0]=new pe(d-fe[0].getX()-1,fe[0].getY()),fe[1]=new pe(d-fe[1].getX()-1,fe[1].getY()))}return le}catch{}}}throw new H}static recordPattern(i,l,d){const h=d.length;for(let I=0;I<h;I++)d[I]=0;const m=i.getSize();if(l>=m)throw new H;let g=!i.get(l),y=0,A=l;for(;A<m;){if(i.get(A)!==g)d[y]++;else{if(++y===h)break;d[y]=1,g=!g}A++}if(!(y===h||y===h-1&&A===m))throw new H}static recordPatternInReverse(i,l,d){let h=d.length,m=i.get(l);for(;l>0&&h>=0;)i.get(--l)!==m&&(h--,m=!m);if(h>=0)throw new H;ft.recordPattern(i,l+1,d)}static patternMatchVariance(i,l,d){const h=i.length;let m=0,g=0;for(let I=0;I<h;I++)m+=i[I],g+=l[I];if(m<g)return Number.POSITIVE_INFINITY;const y=m/g;d*=y;let A=0;for(let I=0;I<h;I++){const D=i[I],B=l[I]*y,V=D>B?D-B:B-D;if(V>d)return Number.POSITIVE_INFINITY;A+=V}return A/m}}class Te extends ft{static findStartPattern(i){const l=i.getSize(),d=i.getNextSet(0);let h=0,m=Int32Array.from([0,0,0,0,0,0]),g=d,y=!1;const A=6;for(let I=d;I<l;I++)if(i.get(I)!==y)m[h]++;else{if(h===A-1){let D=Te.MAX_AVG_VARIANCE,B=-1;for(let V=Te.CODE_START_A;V<=Te.CODE_START_C;V++){const Z=ft.patternMatchVariance(m,Te.CODE_PATTERNS[V],Te.MAX_INDIVIDUAL_VARIANCE);Z<D&&(D=Z,B=V)}if(B>=0&&i.isRange(Math.max(0,g-(I-g)/2),g,!1))return Int32Array.from([g,I,B]);g+=m[0]+m[1],m=m.slice(2,m.length-1),m[h-1]=0,m[h]=0,h--}else h++;m[h]=1,y=!y}throw new H}static decodeCode(i,l,d){ft.recordPattern(i,d,l);let h=Te.MAX_AVG_VARIANCE,m=-1;for(let g=0;g<Te.CODE_PATTERNS.length;g++){const y=Te.CODE_PATTERNS[g],A=this.patternMatchVariance(l,y,Te.MAX_INDIVIDUAL_VARIANCE);A<h&&(h=A,m=g)}if(m>=0)return m;throw new H}decodeRow(i,l,d){const h=d&&d.get(L.ASSUME_GS1)===!0,m=Te.findStartPattern(l),g=m[2];let y=0;const A=new Uint8Array(20);A[y++]=g;let I;switch(g){case Te.CODE_START_A:I=Te.CODE_CODE_A;break;case Te.CODE_START_B:I=Te.CODE_CODE_B;break;case Te.CODE_START_C:I=Te.CODE_CODE_C;break;default:throw new P}let D=!1,B=!1,V="",Z=m[0],oe=m[1];const le=Int32Array.from([0,0,0,0,0,0]);let fe=0,ve=0,De=g,Me=0,Re=!0,Ct=!1,pt=!1;for(;!D;){const Cl=B;switch(B=!1,fe=ve,ve=Te.decodeCode(l,le,oe),A[y++]=ve,ve!==Te.CODE_STOP&&(Re=!0),ve!==Te.CODE_STOP&&(Me++,De+=Me*ve),Z=oe,oe+=le.reduce((aT,iT)=>aT+iT,0),ve){case Te.CODE_START_A:case Te.CODE_START_B:case Te.CODE_START_C:throw new P}switch(I){case Te.CODE_CODE_A:if(ve<64)pt===Ct?V+=String.fromCharCode(32+ve):V+=String.fromCharCode(32+ve+128),pt=!1;else if(ve<96)pt===Ct?V+=String.fromCharCode(ve-64):V+=String.fromCharCode(ve+64),pt=!1;else switch(ve!==Te.CODE_STOP&&(Re=!1),ve){case Te.CODE_FNC_1:h&&(V.length===0?V+="]C1":V+="");break;case Te.CODE_FNC_2:case Te.CODE_FNC_3:break;case Te.CODE_FNC_4_A:!Ct&&pt?(Ct=!0,pt=!1):Ct&&pt?(Ct=!1,pt=!1):pt=!0;break;case Te.CODE_SHIFT:B=!0,I=Te.CODE_CODE_B;break;case Te.CODE_CODE_B:I=Te.CODE_CODE_B;break;case Te.CODE_CODE_C:I=Te.CODE_CODE_C;break;case Te.CODE_STOP:D=!0;break}break;case Te.CODE_CODE_B:if(ve<96)pt===Ct?V+=String.fromCharCode(32+ve):V+=String.fromCharCode(32+ve+128),pt=!1;else switch(ve!==Te.CODE_STOP&&(Re=!1),ve){case Te.CODE_FNC_1:h&&(V.length===0?V+="]C1":V+="");break;case Te.CODE_FNC_2:case Te.CODE_FNC_3:break;case Te.CODE_FNC_4_B:!Ct&&pt?(Ct=!0,pt=!1):Ct&&pt?(Ct=!1,pt=!1):pt=!0;break;case Te.CODE_SHIFT:B=!0,I=Te.CODE_CODE_A;break;case Te.CODE_CODE_A:I=Te.CODE_CODE_A;break;case Te.CODE_CODE_C:I=Te.CODE_CODE_C;break;case Te.CODE_STOP:D=!0;break}break;case Te.CODE_CODE_C:if(ve<100)ve<10&&(V+="0"),V+=ve;else switch(ve!==Te.CODE_STOP&&(Re=!1),ve){case Te.CODE_FNC_1:h&&(V.length===0?V+="]C1":V+="");break;case Te.CODE_CODE_A:I=Te.CODE_CODE_A;break;case Te.CODE_CODE_B:I=Te.CODE_CODE_B;break;case Te.CODE_STOP:D=!0;break}break}Cl&&(I=I===Te.CODE_CODE_A?Te.CODE_CODE_B:Te.CODE_CODE_A)}const Mn=oe-Z;if(oe=l.getNextUnset(oe),!l.isRange(oe,Math.min(l.getSize(),oe+(oe-Z)/2),!1))throw new H;if(De-=Me*fe,De%103!==fe)throw new j;const zs=V.length;if(zs===0)throw new H;zs>0&&Re&&(I===Te.CODE_CODE_C?V=V.substring(0,zs-2):V=V.substring(0,zs-1));const Ln=(m[1]+m[0])/2,Zt=Z+Mn/2,tn=A.length,Zn=new Uint8Array(tn);for(let Cl=0;Cl<tn;Cl++)Zn[Cl]=A[Cl];const jl=[new pe(Ln,i),new pe(Zt,i)];return new G(V,Zn,0,jl,ce.CODE_128,new Date().getTime())}}Te.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Te.MAX_AVG_VARIANCE=.25,Te.MAX_INDIVIDUAL_VARIANCE=.7,Te.CODE_SHIFT=98,Te.CODE_CODE_C=99,Te.CODE_CODE_B=100,Te.CODE_CODE_A=101,Te.CODE_FNC_1=102,Te.CODE_FNC_2=97,Te.CODE_FNC_3=96,Te.CODE_FNC_4_A=101,Te.CODE_FNC_4_B=100,Te.CODE_START_A=103,Te.CODE_START_B=104,Te.CODE_START_C=105,Te.CODE_STOP=106;class Dt extends ft{constructor(i=!1,l=!1){super(),this.usingCheckDigit=i,this.extendedMode=l,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(i,l,d){let h=this.counters;h.fill(0),this.decodeRowResult="";let m=Dt.findAsteriskPattern(l,h),g=l.getNextSet(m[1]),y=l.getSize(),A,I;do{Dt.recordPattern(l,g,h);let le=Dt.toNarrowWidePattern(h);if(le<0)throw new H;A=Dt.patternToChar(le),this.decodeRowResult+=A,I=g;for(let fe of h)g+=fe;g=l.getNextSet(g)}while(A!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let D=0;for(let le of h)D+=le;let B=g-I-D;if(g!==y&&B*2<D)throw new H;if(this.usingCheckDigit){let le=this.decodeRowResult.length-1,fe=0;for(let ve=0;ve<le;ve++)fe+=Dt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ve));if(this.decodeRowResult.charAt(le)!==Dt.ALPHABET_STRING.charAt(fe%43))throw new j;this.decodeRowResult=this.decodeRowResult.substring(0,le)}if(this.decodeRowResult.length===0)throw new H;let V;this.extendedMode?V=Dt.decodeExtended(this.decodeRowResult):V=this.decodeRowResult;let Z=(m[1]+m[0])/2,oe=I+D/2;return new G(V,null,0,[new pe(Z,i),new pe(oe,i)],ce.CODE_39,new Date().getTime())}static findAsteriskPattern(i,l){let d=i.getSize(),h=i.getNextSet(0),m=0,g=h,y=!1,A=l.length;for(let I=h;I<d;I++)if(i.get(I)!==y)l[m]++;else{if(m===A-1){if(this.toNarrowWidePattern(l)===Dt.ASTERISK_ENCODING&&i.isRange(Math.max(0,g-Math.floor((I-g)/2)),g,!1))return[g,I];g+=l[0]+l[1],l.copyWithin(0,2,2+m-1),l[m-1]=0,l[m]=0,m--}else m++;l[m]=1,y=!y}throw new H}static toNarrowWidePattern(i){let l=i.length,d=0,h;do{let m=2147483647;for(let A of i)A<m&&A>d&&(m=A);d=m,h=0;let g=0,y=0;for(let A=0;A<l;A++){let I=i[A];I>d&&(y|=1<<l-1-A,h++,g+=I)}if(h===3){for(let A=0;A<l&&h>0;A++){let I=i[A];if(I>d&&(h--,I*2>=g))return-1}return y}}while(h>3);return-1}static patternToChar(i){for(let l=0;l<Dt.CHARACTER_ENCODINGS.length;l++)if(Dt.CHARACTER_ENCODINGS[l]===i)return Dt.ALPHABET_STRING.charAt(l);if(i===Dt.ASTERISK_ENCODING)return"*";throw new H}static decodeExtended(i){let l=i.length,d="";for(let h=0;h<l;h++){let m=i.charAt(h);if(m==="+"||m==="$"||m==="%"||m==="/"){let g=i.charAt(h+1),y="\0";switch(m){case"+":if(g>="A"&&g<="Z")y=String.fromCharCode(g.charCodeAt(0)+32);else throw new P;break;case"$":if(g>="A"&&g<="Z")y=String.fromCharCode(g.charCodeAt(0)-64);else throw new P;break;case"%":if(g>="A"&&g<="E")y=String.fromCharCode(g.charCodeAt(0)-38);else if(g>="F"&&g<="J")y=String.fromCharCode(g.charCodeAt(0)-11);else if(g>="K"&&g<="O")y=String.fromCharCode(g.charCodeAt(0)+16);else if(g>="P"&&g<="T")y=String.fromCharCode(g.charCodeAt(0)+43);else if(g==="U")y="\0";else if(g==="V")y="@";else if(g==="W")y="`";else if(g==="X"||g==="Y"||g==="Z")y="";else throw new P;break;case"/":if(g>="A"&&g<="O")y=String.fromCharCode(g.charCodeAt(0)-32);else if(g==="Z")y=":";else throw new P;break}d+=y,h++}else d+=m}return d}}Dt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Dt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Dt.ASTERISK_ENCODING=148;class mt extends ft{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,l,d){let h=this.decodeStart(l),m=this.decodeEnd(l),g=new q;mt.decodeMiddle(l,h[1],m[0],g);let y=g.toString(),A=null;d!=null&&(A=d.get(L.ALLOWED_LENGTHS)),A==null&&(A=mt.DEFAULT_ALLOWED_LENGTHS);let I=y.length,D=!1,B=0;for(let oe of A){if(I===oe){D=!0;break}oe>B&&(B=oe)}if(!D&&I>B&&(D=!0),!D)throw new P;const V=[new pe(h[1],i),new pe(m[0],i)];return new G(y,null,0,V,ce.ITF,new Date().getTime())}static decodeMiddle(i,l,d,h){let m=new Int32Array(10),g=new Int32Array(5),y=new Int32Array(5);for(m.fill(0),g.fill(0),y.fill(0);l<d;){ft.recordPattern(i,l,m);for(let I=0;I<5;I++){let D=2*I;g[I]=m[D],y[I]=m[D+1]}let A=mt.decodeDigit(g);h.append(A.toString()),A=this.decodeDigit(y),h.append(A.toString()),m.forEach(function(I){l+=I})}}decodeStart(i){let l=mt.skipWhiteSpace(i),d=mt.findGuardPattern(i,l,mt.START_PATTERN);return this.narrowLineWidth=(d[1]-d[0])/4,this.validateQuietZone(i,d[0]),d}validateQuietZone(i,l){let d=this.narrowLineWidth*10;d=d<l?d:l;for(let h=l-1;d>0&&h>=0&&!i.get(h);h--)d--;if(d!==0)throw new H}static skipWhiteSpace(i){const l=i.getSize(),d=i.getNextSet(0);if(d===l)throw new H;return d}decodeEnd(i){i.reverse();try{let l=mt.skipWhiteSpace(i),d;try{d=mt.findGuardPattern(i,l,mt.END_PATTERN_REVERSED[0])}catch(m){m instanceof H&&(d=mt.findGuardPattern(i,l,mt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,d[0]);let h=d[0];return d[0]=i.getSize()-d[1],d[1]=i.getSize()-h,d}finally{i.reverse()}}static findGuardPattern(i,l,d){let h=d.length,m=new Int32Array(h),g=i.getSize(),y=!1,A=0,I=l;m.fill(0);for(let D=l;D<g;D++)if(i.get(D)!==y)m[A]++;else{if(A===h-1){if(ft.patternMatchVariance(m,d,mt.MAX_INDIVIDUAL_VARIANCE)<mt.MAX_AVG_VARIANCE)return[I,D];I+=m[0]+m[1],C.arraycopy(m,2,m,0,A-1),m[A-1]=0,m[A]=0,A--}else A++;m[A]=1,y=!y}throw new H}static decodeDigit(i){let l=mt.MAX_AVG_VARIANCE,d=-1,h=mt.PATTERNS.length;for(let m=0;m<h;m++){let g=mt.PATTERNS[m],y=ft.patternMatchVariance(i,g,mt.MAX_INDIVIDUAL_VARIANCE);y<l?(l=y,d=m):y===l&&(d=-1)}if(d>=0)return d%10;throw new H}}mt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],mt.MAX_AVG_VARIANCE=.38,mt.MAX_INDIVIDUAL_VARIANCE=.5,mt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],mt.START_PATTERN=Int32Array.from([1,1,1,1]),mt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Pt extends ft{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let l=!1,d,h=0,m=Int32Array.from([0,0,0]);for(;!l;){m=Int32Array.from([0,0,0]),d=Pt.findGuardPattern(i,h,!1,this.START_END_PATTERN,m);let g=d[0];h=d[1];let y=g-(h-g);y>=0&&(l=i.isRange(y,g,!1))}return d}static checkChecksum(i){return Pt.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let l=i.length;if(l===0)return!1;let d=parseInt(i.charAt(l-1),10);return Pt.getStandardUPCEANChecksum(i.substring(0,l-1))===d}static getStandardUPCEANChecksum(i){let l=i.length,d=0;for(let h=l-1;h>=0;h-=2){let m=i.charAt(h).charCodeAt(0)-48;if(m<0||m>9)throw new P;d+=m}d*=3;for(let h=l-2;h>=0;h-=2){let m=i.charAt(h).charCodeAt(0)-48;if(m<0||m>9)throw new P;d+=m}return(1e3-d)%10}static decodeEnd(i,l){return Pt.findGuardPattern(i,l,!1,Pt.START_END_PATTERN,new Int32Array(Pt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,l,d,h){return this.findGuardPattern(i,l,d,h,new Int32Array(h.length))}static findGuardPattern(i,l,d,h,m){let g=i.getSize();l=d?i.getNextUnset(l):i.getNextSet(l);let y=0,A=l,I=h.length,D=d;for(let B=l;B<g;B++)if(i.get(B)!==D)m[y]++;else{if(y===I-1){if(ft.patternMatchVariance(m,h,Pt.MAX_INDIVIDUAL_VARIANCE)<Pt.MAX_AVG_VARIANCE)return Int32Array.from([A,B]);A+=m[0]+m[1];let V=m.slice(2,m.length-1);for(let Z=0;Z<y-1;Z++)m[Z]=V[Z];m[y-1]=0,m[y]=0,y--}else y++;m[y]=1,D=!D}throw new H}static decodeDigit(i,l,d,h){this.recordPattern(i,d,l);let m=this.MAX_AVG_VARIANCE,g=-1,y=h.length;for(let A=0;A<y;A++){let I=h[A],D=ft.patternMatchVariance(l,I,Pt.MAX_INDIVIDUAL_VARIANCE);D<m&&(m=D,g=A)}if(g>=0)return g;throw new H}}Pt.MAX_AVG_VARIANCE=.48,Pt.MAX_INDIVIDUAL_VARIANCE=.7,Pt.START_END_PATTERN=Int32Array.from([1,1,1]),Pt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Pt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Pt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Rn{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,l,d){let h=this.decodeRowStringBuffer,m=this.decodeMiddle(l,d,h),g=h.toString(),y=Rn.parseExtensionString(g),A=[new pe((d[0]+d[1])/2,i),new pe(m,i)],I=new G(g,null,0,A,ce.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&I.putAllMetadata(y),I}decodeMiddle(i,l,d){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let m=i.getSize(),g=l[1],y=0;for(let I=0;I<5&&g<m;I++){let D=Pt.decodeDigit(i,h,g,Pt.L_AND_G_PATTERNS);d+=String.fromCharCode(48+D%10);for(let B of h)g+=B;D>=10&&(y|=1<<4-I),I!==4&&(g=i.getNextSet(g),g=i.getNextUnset(g))}if(d.length!==5)throw new H;let A=this.determineCheckDigit(y);if(Rn.extensionChecksum(d.toString())!==A)throw new H;return g}static extensionChecksum(i){let l=i.length,d=0;for(let h=l-2;h>=0;h-=2)d+=i.charAt(h).charCodeAt(0)-48;d*=3;for(let h=l-1;h>=0;h-=2)d+=i.charAt(h).charCodeAt(0)-48;return d*=3,d%10}determineCheckDigit(i){for(let l=0;l<10;l++)if(i===this.CHECK_DIGIT_ENCODINGS[l])return l;throw new H}static parseExtensionString(i){if(i.length!==5)return null;let l=Rn.parseExtension5String(i);return l==null?null:new Map([[he.SUGGESTED_PRICE,l]])}static parseExtension5String(i){let l;switch(i.charAt(0)){case"0":l="";break;case"5":l="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}l="";break;default:l="";break}let d=parseInt(i.substring(1)),h=(d/100).toString(),m=d%100,g=m<10?"0"+m:m.toString();return l+h+"."+g}}class Bs{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,l,d){let h=this.decodeRowStringBuffer,m=this.decodeMiddle(l,d,h),g=h.toString(),y=Bs.parseExtensionString(g),A=[new pe((d[0]+d[1])/2,i),new pe(m,i)],I=new G(g,null,0,A,ce.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&I.putAllMetadata(y),I}decodeMiddle(i,l,d){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let m=i.getSize(),g=l[1],y=0;for(let A=0;A<2&&g<m;A++){let I=Pt.decodeDigit(i,h,g,Pt.L_AND_G_PATTERNS);d+=String.fromCharCode(48+I%10);for(let D of h)g+=D;I>=10&&(y|=1<<1-A),A!==1&&(g=i.getNextSet(g),g=i.getNextUnset(g))}if(d.length!==2)throw new H;if(parseInt(d.toString())%4!==y)throw new H;return g}static parseExtensionString(i){return i.length!==2?null:new Map([[he.ISSUE_NUMBER,parseInt(i)]])}}class uo{static decodeRow(i,l,d){let h=Pt.findGuardPattern(l,d,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Rn().decodeRow(i,l,h)}catch{return new Bs().decodeRow(i,l,h)}}}uo.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class kt extends Pt{constructor(){super(),this.decodeRowStringBuffer="",kt.L_AND_G_PATTERNS=kt.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let l=kt.L_PATTERNS[i-10],d=new Int32Array(l.length);for(let h=0;h<l.length;h++)d[h]=l[l.length-h-1];kt.L_AND_G_PATTERNS[i]=d}}decodeRow(i,l,d){let h=kt.findStartGuardPattern(l),m=d==null?null:d.get(L.NEED_RESULT_POINT_CALLBACK);if(m!=null){const Re=new pe((h[0]+h[1])/2,i);m.foundPossibleResultPoint(Re)}let g=this.decodeMiddle(l,h,this.decodeRowStringBuffer),y=g.rowOffset,A=g.resultString;if(m!=null){const Re=new pe(y,i);m.foundPossibleResultPoint(Re)}let I=this.decodeEnd(l,y);if(m!=null){const Re=new pe((I[0]+I[1])/2,i);m.foundPossibleResultPoint(Re)}let D=I[1],B=D+(D-I[0]);if(B>=l.getSize()||!l.isRange(D,B,!1))throw new H;let V=A.toString();if(V.length<8)throw new P;if(!kt.checkChecksum(V))throw new j;let Z=(h[1]+h[0])/2,oe=(I[1]+I[0])/2,le=this.getBarcodeFormat(),fe=[new pe(Z,i),new pe(oe,i)],ve=new G(V,null,0,fe,le,new Date().getTime()),De=0;try{let Re=uo.decodeRow(i,l,I[1]);ve.putMetadata(he.UPC_EAN_EXTENSION,Re.getText()),ve.putAllMetadata(Re.getResultMetadata()),ve.addResultPoints(Re.getResultPoints()),De=Re.getText().length}catch{}let Me=d==null?null:d.get(L.ALLOWED_EAN_EXTENSIONS);if(Me!=null){let Re=!1;for(let Ct in Me)if(De.toString()===Ct){Re=!0;break}if(!Re)throw new H}return ve}decodeEnd(i,l){return kt.findGuardPattern(i,l,!1,kt.START_END_PATTERN,new Int32Array(kt.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return kt.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let l=i.length;if(l===0)return!1;let d=parseInt(i.charAt(l-1),10);return kt.getStandardUPCEANChecksum(i.substring(0,l-1))===d}static getStandardUPCEANChecksum(i){let l=i.length,d=0;for(let h=l-1;h>=0;h-=2){let m=i.charAt(h).charCodeAt(0)-48;if(m<0||m>9)throw new P;d+=m}d*=3;for(let h=l-2;h>=0;h-=2){let m=i.charAt(h).charCodeAt(0)-48;if(m<0||m>9)throw new P;d+=m}return(1e3-d)%10}}class fn extends kt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,l,d){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let m=i.getSize(),g=l[1],y=0;for(let I=0;I<6&&g<m;I++){let D=kt.decodeDigit(i,h,g,kt.L_AND_G_PATTERNS);d+=String.fromCharCode(48+D%10);for(let B of h)g+=B;D>=10&&(y|=1<<5-I)}d=fn.determineFirstDigit(d,y),g=kt.findGuardPattern(i,g,!0,kt.MIDDLE_PATTERN,new Int32Array(kt.MIDDLE_PATTERN.length).fill(0))[1];for(let I=0;I<6&&g<m;I++){let D=kt.decodeDigit(i,h,g,kt.L_PATTERNS);d+=String.fromCharCode(48+D);for(let B of h)g+=B}return{rowOffset:g,resultString:d}}getBarcodeFormat(){return ce.EAN_13}static determineFirstDigit(i,l){for(let d=0;d<10;d++)if(l===this.FIRST_DIGIT_ENCODINGS[d])return i=String.fromCharCode(48+d)+i,i;throw new H}}fn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Qn extends kt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,l,d){const h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let m=i.getSize(),g=l[1];for(let A=0;A<4&&g<m;A++){let I=kt.decodeDigit(i,h,g,kt.L_PATTERNS);d+=String.fromCharCode(48+I);for(let D of h)g+=D}g=kt.findGuardPattern(i,g,!0,kt.MIDDLE_PATTERN,new Int32Array(kt.MIDDLE_PATTERN.length).fill(0))[1];for(let A=0;A<4&&g<m;A++){let I=kt.decodeDigit(i,h,g,kt.L_PATTERNS);d+=String.fromCharCode(48+I);for(let D of h)g+=D}return{rowOffset:g,resultString:d}}getBarcodeFormat(){return ce.EAN_8}}class ho extends kt{constructor(){super(...arguments),this.ean13Reader=new fn}getBarcodeFormat(){return ce.UPC_A}decode(i,l){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,l,d){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,l,d))}decodeMiddle(i,l,d){return this.ean13Reader.decodeMiddle(i,l,d)}maybeReturnResult(i){let l=i.getText();if(l.charAt(0)==="0"){let d=new G(l.substring(1),null,null,i.getResultPoints(),ce.UPC_A);return i.getResultMetadata()!=null&&d.putAllMetadata(i.getResultMetadata()),d}else throw new H}reset(){this.ean13Reader.reset()}}class Xe extends kt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,l,d){const h=this.decodeMiddleCounters.map(I=>I);h[0]=0,h[1]=0,h[2]=0,h[3]=0;const m=i.getSize();let g=l[1],y=0;for(let I=0;I<6&&g<m;I++){const D=Xe.decodeDigit(i,h,g,Xe.L_AND_G_PATTERNS);d+=String.fromCharCode(48+D%10);for(let B of h)g+=B;D>=10&&(y|=1<<5-I)}let A=Xe.determineNumSysAndCheckDigit(d,y);return{rowOffset:g,resultString:A}}decodeEnd(i,l){return Xe.findGuardPatternWithoutCounters(i,l,!0,Xe.MIDDLE_END_PATTERN)}checkChecksum(i){return kt.checkChecksum(Xe.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,l){for(let d=0;d<=1;d++)for(let h=0;h<10;h++)if(l===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[d][h]){let m=String.fromCharCode(48+d),g=String.fromCharCode(48+h);return m+i+g}throw H.getNotFoundInstance()}getBarcodeFormat(){return ce.UPC_E}static convertUPCEtoUPCA(i){const l=i.slice(1,7).split("").map(m=>m.charCodeAt(0)),d=new q;d.append(i.charAt(0));let h=l[5];switch(h){case 0:case 1:case 2:d.appendChars(l,0,2),d.append(h),d.append("0000"),d.appendChars(l,2,3);break;case 3:d.appendChars(l,0,3),d.append("00000"),d.appendChars(l,3,2);break;case 4:d.appendChars(l,0,4),d.append("00000"),d.append(l[4]);break;default:d.appendChars(l,0,5),d.append("0000"),d.append(h);break}return i.length>=8&&d.append(i.charAt(7)),d.toString()}}Xe.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Xe.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ot extends ft{constructor(i){super();let l=i==null?null:i.get(L.POSSIBLE_FORMATS),d=[];s(l)?(d.push(new fn),d.push(new ho),d.push(new Qn),d.push(new Xe)):(l.indexOf(ce.EAN_13)>-1&&d.push(new fn),l.indexOf(ce.UPC_A)>-1&&d.push(new ho),l.indexOf(ce.EAN_8)>-1&&d.push(new Qn),l.indexOf(ce.UPC_E)>-1&&d.push(new Xe)),this.readers=d}decodeRow(i,l,d){for(let h of this.readers)try{const m=h.decodeRow(i,l,d),g=m.getBarcodeFormat()===ce.EAN_13&&m.getText().charAt(0)==="0",y=d==null?null:d.get(L.POSSIBLE_FORMATS),A=y==null||y.includes(ce.UPC_A);if(g&&A){const I=m.getRawBytes(),D=new G(m.getText().substring(1),I,I?I.length:null,m.getResultPoints(),ce.UPC_A);return D.putAllMetadata(m.getResultMetadata()),D}return m}catch{}throw new H}reset(){for(let i of this.readers)i.reset()}}class xt extends ft{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(i,l){for(let d=0;d<l.length;d++)if(ft.patternMatchVariance(i,l[d],xt.MAX_INDIVIDUAL_VARIANCE)<xt.MAX_AVG_VARIANCE)return d;throw new H}static count(i){return He.sum(new Int32Array(i))}static increment(i,l){let d=0,h=l[0];for(let m=1;m<i.length;m++)l[m]>h&&(h=l[m],d=m);i[d]++}static decrement(i,l){let d=0,h=l[0];for(let m=1;m<i.length;m++)l[m]<h&&(h=l[m],d=m);i[d]--}static isFinderPattern(i){let l=i[0]+i[1],d=l+i[2]+i[3],h=l/d;if(h>=xt.MIN_FINDER_PATTERN_RATIO&&h<=xt.MAX_FINDER_PATTERN_RATIO){let m=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER;for(let y of i)y>g&&(g=y),y<m&&(m=y);return g<10*m}return!1}}xt.MAX_AVG_VARIANCE=.2,xt.MAX_INDIVIDUAL_VARIANCE=.45,xt.MIN_FINDER_PATTERN_RATIO=9.5/12,xt.MAX_FINDER_PATTERN_RATIO=12.5/14;class Gr{constructor(i,l){this.value=i,this.checksumPortion=l}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof Gr))return!1;const l=i;return this.value===l.value&&this.checksumPortion===l.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class mn{constructor(i,l,d,h,m){this.value=i,this.startEnd=l,this.value=i,this.startEnd=l,this.resultPoints=new Array,this.resultPoints.push(new pe(d,m)),this.resultPoints.push(new pe(h,m))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof mn))return!1;const l=i;return this.value===l.value}hashCode(){return this.value}}class Lr{constructor(){}static getRSSvalue(i,l,d){let h=0;for(let A of i)h+=A;let m=0,g=0,y=i.length;for(let A=0;A<y-1;A++){let I;for(I=1,g|=1<<A;I<i[A];I++,g&=~(1<<A)){let D=Lr.combins(h-I-1,y-A-2);if(d&&g===0&&h-I-(y-A-1)>=y-A-1&&(D-=Lr.combins(h-I-(y-A),y-A-2)),y-A-1>1){let B=0;for(let V=h-I-(y-A-2);V>l;V--)B+=Lr.combins(h-I-V-1,y-A-3);D-=B*(y-1-A)}else h-I>l&&D--;m+=D}h-=I}return m}static combins(i,l){let d,h;i-l>l?(h=l,d=i-l):(h=i-l,d=l);let m=1,g=1;for(let y=i;y>d;y--)m*=y,g<=h&&(m/=g,g++);for(;g<=h;)m/=g,g++;return m}}class Pa{static buildBitArray(i){let l=i.length*2-1;i[i.length-1].getRightChar()==null&&(l-=1);let d=12*l,h=new k(d),m=0,y=i[0].getRightChar().getValue();for(let A=11;A>=0;--A)y&1<<A&&h.set(m),m++;for(let A=1;A<i.length;++A){let I=i[A],D=I.getLeftChar().getValue();for(let B=11;B>=0;--B)D&1<<B&&h.set(m),m++;if(I.getRightChar()!=null){let B=I.getRightChar().getValue();for(let V=11;V>=0;--V)B&1<<V&&h.set(m),m++}}return h}}class Fr{constructor(i,l){l?this.decodedInformation=null:(this.finished=i,this.decodedInformation=l)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class gs{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}class Pn extends gs{constructor(i,l){super(i),this.value=l}getValue(){return this.value}isFNC1(){return this.value===Pn.FNC1}}Pn.FNC1="$";class fo extends gs{constructor(i,l,d){super(i),d?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=l}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class xs extends gs{constructor(i,l,d){if(super(i),l<0||l>10||d<0||d>10)throw new P;this.firstDigit=l,this.secondDigit=d}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===xs.FNC1}isSecondDigitFNC1(){return this.secondDigit===xs.FNC1}isAnyFNC1(){return this.firstDigit===xs.FNC1||this.secondDigit===xs.FNC1}}xs.FNC1=10;class Ke{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new H;let l=i.substring(0,2);for(let m of Ke.TWO_DIGIT_DATA_LENGTH)if(m[0]===l)return m[1]===Ke.VARIABLE_LENGTH?Ke.processVariableAI(2,m[2],i):Ke.processFixedAI(2,m[1],i);if(i.length<3)throw new H;let d=i.substring(0,3);for(let m of Ke.THREE_DIGIT_DATA_LENGTH)if(m[0]===d)return m[1]===Ke.VARIABLE_LENGTH?Ke.processVariableAI(3,m[2],i):Ke.processFixedAI(3,m[1],i);for(let m of Ke.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(m[0]===d)return m[1]===Ke.VARIABLE_LENGTH?Ke.processVariableAI(4,m[2],i):Ke.processFixedAI(4,m[1],i);if(i.length<4)throw new H;let h=i.substring(0,4);for(let m of Ke.FOUR_DIGIT_DATA_LENGTH)if(m[0]===h)return m[1]===Ke.VARIABLE_LENGTH?Ke.processVariableAI(4,m[2],i):Ke.processFixedAI(4,m[1],i);throw new H}static processFixedAI(i,l,d){if(d.length<i)throw new H;let h=d.substring(0,i);if(d.length<i+l)throw new H;let m=d.substring(i,i+l),g=d.substring(i+l),y="("+h+")"+m,A=Ke.parseFieldsInGeneralPurpose(g);return A==null?y:y+A}static processVariableAI(i,l,d){let h=d.substring(0,i),m;d.length<i+l?m=d.length:m=i+l;let g=d.substring(i,m),y=d.substring(m),A="("+h+")"+g,I=Ke.parseFieldsInGeneralPurpose(y);return I==null?A:A+I}}Ke.VARIABLE_LENGTH=[],Ke.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ke.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ke.VARIABLE_LENGTH,20],["22",Ke.VARIABLE_LENGTH,29],["30",Ke.VARIABLE_LENGTH,8],["37",Ke.VARIABLE_LENGTH,8],["90",Ke.VARIABLE_LENGTH,30],["91",Ke.VARIABLE_LENGTH,30],["92",Ke.VARIABLE_LENGTH,30],["93",Ke.VARIABLE_LENGTH,30],["94",Ke.VARIABLE_LENGTH,30],["95",Ke.VARIABLE_LENGTH,30],["96",Ke.VARIABLE_LENGTH,30],["97",Ke.VARIABLE_LENGTH,3],["98",Ke.VARIABLE_LENGTH,30],["99",Ke.VARIABLE_LENGTH,30]],Ke.THREE_DIGIT_DATA_LENGTH=[["240",Ke.VARIABLE_LENGTH,30],["241",Ke.VARIABLE_LENGTH,30],["242",Ke.VARIABLE_LENGTH,6],["250",Ke.VARIABLE_LENGTH,30],["251",Ke.VARIABLE_LENGTH,30],["253",Ke.VARIABLE_LENGTH,17],["254",Ke.VARIABLE_LENGTH,20],["400",Ke.VARIABLE_LENGTH,30],["401",Ke.VARIABLE_LENGTH,30],["402",17],["403",Ke.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ke.VARIABLE_LENGTH,20],["421",Ke.VARIABLE_LENGTH,15],["422",3],["423",Ke.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ke.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ke.VARIABLE_LENGTH,15],["391",Ke.VARIABLE_LENGTH,18],["392",Ke.VARIABLE_LENGTH,15],["393",Ke.VARIABLE_LENGTH,18],["703",Ke.VARIABLE_LENGTH,30]],Ke.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ke.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ke.VARIABLE_LENGTH,20],["8003",Ke.VARIABLE_LENGTH,30],["8004",Ke.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ke.VARIABLE_LENGTH,30],["8008",Ke.VARIABLE_LENGTH,12],["8018",18],["8020",Ke.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ke.VARIABLE_LENGTH,70],["8200",Ke.VARIABLE_LENGTH,70]];class vl{constructor(i){this.buffer=new q,this.information=i}decodeAllCodes(i,l){let d=l,h=null;do{let m=this.decodeGeneralPurposeField(d,h),g=Ke.parseFieldsInGeneralPurpose(m.getNewString());if(g!=null&&i.append(g),m.isRemaining()?h=""+m.getRemainingValue():h=null,d===m.getNewPosition())break;d=m.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let l=i;l<i+3;++l)if(this.information.get(l))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let m=this.extractNumericValueFromBitArray(i,4);return m===0?new xs(this.information.getSize(),xs.FNC1,xs.FNC1):new xs(this.information.getSize(),m-1,xs.FNC1)}let l=this.extractNumericValueFromBitArray(i,7),d=(l-8)/11,h=(l-8)%11;return new xs(i+7,d,h)}extractNumericValueFromBitArray(i,l){return vl.extractNumericValueFromBitArray(this.information,i,l)}static extractNumericValueFromBitArray(i,l,d){let h=0;for(let m=0;m<d;++m)i.get(l+m)&&(h|=1<<d-m-1);return h}decodeGeneralPurposeField(i,l){this.buffer.setLengthToZero(),l!=null&&this.buffer.append(l),this.current.setPosition(i);let d=this.parseBlocks();return d!=null&&d.isRemaining()?new fo(this.current.getPosition(),this.buffer.toString(),d.getRemainingValue()):new fo(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,l;do{let d=this.current.getPosition();if(this.current.isAlpha()?(l=this.parseAlphaBlock(),i=l.isFinished()):this.current.isIsoIec646()?(l=this.parseIsoIec646Block(),i=l.isFinished()):(l=this.parseNumericBlock(),i=l.isFinished()),!(d!==this.current.getPosition())&&!i)break}while(!i);return l.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let l;return i.isSecondDigitFNC1()?l=new fo(this.current.getPosition(),this.buffer.toString()):l=new fo(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new Fr(!0,l)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let l=new fo(this.current.getPosition(),this.buffer.toString());return new Fr(!0,l)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Fr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let l=new fo(this.current.getPosition(),this.buffer.toString());return new Fr(!0,l)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Fr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let l=new fo(this.current.getPosition(),this.buffer.toString());return new Fr(!0,l)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Fr(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,5);if(l>=5&&l<16)return!0;if(i+7>this.information.getSize())return!1;let d=this.extractNumericValueFromBitArray(i,7);if(d>=64&&d<116)return!0;if(i+8>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(i,8);return h>=232&&h<253}decodeIsoIec646(i){let l=this.extractNumericValueFromBitArray(i,5);if(l===15)return new Pn(i+5,Pn.FNC1);if(l>=5&&l<15)return new Pn(i+5,"0"+(l-5));let d=this.extractNumericValueFromBitArray(i,7);if(d>=64&&d<90)return new Pn(i+7,""+(d+1));if(d>=90&&d<116)return new Pn(i+7,""+(d+7));let h=this.extractNumericValueFromBitArray(i,8),m;switch(h){case 232:m="!";break;case 233:m='"';break;case 234:m="%";break;case 235:m="&";break;case 236:m="'";break;case 237:m="(";break;case 238:m=")";break;case 239:m="*";break;case 240:m="+";break;case 241:m=",";break;case 242:m="-";break;case 243:m=".";break;case 244:m="/";break;case 245:m=":";break;case 246:m=";";break;case 247:m="<";break;case 248:m="=";break;case 249:m=">";break;case 250:m="?";break;case 251:m="_";break;case 252:m=" ";break;default:throw new P}return new Pn(i+8,m)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,5);if(l>=5&&l<16)return!0;if(i+6>this.information.getSize())return!1;let d=this.extractNumericValueFromBitArray(i,6);return d>=16&&d<63}decodeAlphanumeric(i){let l=this.extractNumericValueFromBitArray(i,5);if(l===15)return new Pn(i+5,Pn.FNC1);if(l>=5&&l<15)return new Pn(i+5,"0"+(l-5));let d=this.extractNumericValueFromBitArray(i,6);if(d>=32&&d<58)return new Pn(i+6,""+(d+33));let h;switch(d){case 58:h="*";break;case 59:h=",";break;case 60:h="-";break;case 61:h=".";break;case 62:h="/";break;default:throw new _e("Decoding invalid alphanumeric value: "+d)}return new Pn(i+6,h)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let l=0;l<5&&l+i<this.information.getSize();++l)if(l===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+l))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let l=i;l<i+3;++l)if(this.information.get(l))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let l=0;l<4&&l+i<this.information.getSize();++l)if(this.information.get(i+l))return!1;return!0}}class xp{constructor(i){this.information=i,this.generalDecoder=new vl(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class On extends xp{constructor(i){super(i)}encodeCompressedGtin(i,l){i.append("(01)");let d=i.length();i.append("9"),this.encodeCompressedGtinWithoutAI(i,l,d)}encodeCompressedGtinWithoutAI(i,l,d){for(let h=0;h<4;++h){let m=this.getGeneralDecoder().extractNumericValueFromBitArray(l+10*h,10);m/100===0&&i.append("0"),m/10===0&&i.append("0"),i.append(m)}On.appendCheckDigit(i,d)}static appendCheckDigit(i,l){let d=0;for(let h=0;h<13;h++){let m=i.charAt(h+l).charCodeAt(0)-48;d+=h&1?m:3*m}d=10-d%10,d===10&&(d=0),i.append(d)}}On.GTIN_SIZE=40;class wl extends On{constructor(i){super(i)}parseInformation(){let i=new q;i.append("(01)");let l=i.length(),d=this.getGeneralDecoder().extractNumericValueFromBitArray(wl.HEADER_SIZE,4);return i.append(d),this.encodeCompressedGtinWithoutAI(i,wl.HEADER_SIZE+4,l),this.getGeneralDecoder().decodeAllCodes(i,wl.HEADER_SIZE+44)}}wl.HEADER_SIZE=4;class Ju extends xp{constructor(i){super(i)}parseInformation(){let i=new q;return this.getGeneralDecoder().decodeAllCodes(i,Ju.HEADER_SIZE)}}Ju.HEADER_SIZE=5;class eh extends On{constructor(i){super(i)}encodeCompressedWeight(i,l,d){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(l,d);this.addWeightCode(i,h);let m=this.checkWeight(h),g=1e5;for(let y=0;y<5;++y)m/g===0&&i.append("0"),g/=10;i.append(m)}}class la extends eh{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()!=la.HEADER_SIZE+eh.GTIN_SIZE+la.WEIGHT_SIZE)throw new H;let i=new q;return this.encodeCompressedGtin(i,la.HEADER_SIZE),this.encodeCompressedWeight(i,la.HEADER_SIZE+eh.GTIN_SIZE,la.WEIGHT_SIZE),i.toString()}}la.HEADER_SIZE=5,la.WEIGHT_SIZE=15;class Rk extends la{constructor(i){super(i)}addWeightCode(i,l){i.append("(3103)")}checkWeight(i){return i}}class Pk extends la{constructor(i){super(i)}addWeightCode(i,l){l<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}class ca extends On{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<ca.HEADER_SIZE+On.GTIN_SIZE)throw new H;let i=new q;this.encodeCompressedGtin(i,ca.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(ca.HEADER_SIZE+On.GTIN_SIZE,ca.LAST_DIGIT_SIZE);i.append("(392"),i.append(l),i.append(")");let d=this.getGeneralDecoder().decodeGeneralPurposeField(ca.HEADER_SIZE+On.GTIN_SIZE+ca.LAST_DIGIT_SIZE,null);return i.append(d.getNewString()),i.toString()}}ca.HEADER_SIZE=8,ca.LAST_DIGIT_SIZE=2;class bn extends On{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<bn.HEADER_SIZE+On.GTIN_SIZE)throw new H;let i=new q;this.encodeCompressedGtin(i,bn.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(bn.HEADER_SIZE+On.GTIN_SIZE,bn.LAST_DIGIT_SIZE);i.append("(393"),i.append(l),i.append(")");let d=this.getGeneralDecoder().extractNumericValueFromBitArray(bn.HEADER_SIZE+On.GTIN_SIZE+bn.LAST_DIGIT_SIZE,bn.FIRST_THREE_DIGITS_SIZE);d/100==0&&i.append("0"),d/10==0&&i.append("0"),i.append(d);let h=this.getGeneralDecoder().decodeGeneralPurposeField(bn.HEADER_SIZE+On.GTIN_SIZE+bn.LAST_DIGIT_SIZE+bn.FIRST_THREE_DIGITS_SIZE,null);return i.append(h.getNewString()),i.toString()}}bn.HEADER_SIZE=8,bn.LAST_DIGIT_SIZE=2,bn.FIRST_THREE_DIGITS_SIZE=10;class ur extends eh{constructor(i,l,d){super(i),this.dateCode=d,this.firstAIdigits=l}parseInformation(){if(this.getInformation().getSize()!=ur.HEADER_SIZE+ur.GTIN_SIZE+ur.WEIGHT_SIZE+ur.DATE_SIZE)throw new H;let i=new q;return this.encodeCompressedGtin(i,ur.HEADER_SIZE),this.encodeCompressedWeight(i,ur.HEADER_SIZE+ur.GTIN_SIZE,ur.WEIGHT_SIZE),this.encodeCompressedDate(i,ur.HEADER_SIZE+ur.GTIN_SIZE+ur.WEIGHT_SIZE),i.toString()}encodeCompressedDate(i,l){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(l,ur.DATE_SIZE);if(d==38400)return;i.append("("),i.append(this.dateCode),i.append(")");let h=d%32;d/=32;let m=d%12+1;d/=12;let g=d;g/10==0&&i.append("0"),i.append(g),m/10==0&&i.append("0"),i.append(m),h/10==0&&i.append("0"),i.append(h)}addWeightCode(i,l){i.append("("),i.append(this.firstAIdigits),i.append(l/1e5),i.append(")")}checkWeight(i){return i%1e5}}ur.HEADER_SIZE=8,ur.WEIGHT_SIZE=20,ur.DATE_SIZE=16;function Uv(F){try{if(F.get(1))return new wl(F);if(!F.get(2))return new Ju(F);switch(vl.extractNumericValueFromBitArray(F,1,4)){case 4:return new Rk(F);case 5:return new Pk(F)}switch(vl.extractNumericValueFromBitArray(F,1,5)){case 12:return new ca(F);case 13:return new bn(F)}switch(vl.extractNumericValueFromBitArray(F,1,7)){case 56:return new ur(F,"310","11");case 57:return new ur(F,"320","11");case 58:return new ur(F,"310","13");case 59:return new ur(F,"320","13");case 60:return new ur(F,"310","15");case 61:return new ur(F,"320","15");case 62:return new ur(F,"310","17");case 63:return new ur(F,"320","17")}}catch(i){throw console.log(i),new _e("unknown decoder: "+F)}}class ni{constructor(i,l,d,h){this.leftchar=i,this.rightchar=l,this.finderpattern=d,this.maybeLast=h}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,l){return i instanceof ni?ni.equalsOrNull(i.leftchar,l.leftchar)&&ni.equalsOrNull(i.rightchar,l.rightchar)&&ni.equalsOrNull(i.finderpattern,l.finderpattern):!1}static equalsOrNull(i,l){return i===null?l===null:ni.equals(i,l)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class vp{constructor(i,l,d){this.pairs=i,this.rowNumber=l,this.wasReversed=d}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,l){return i instanceof vp?this.checkEqualitity(i,l)&&i.wasReversed===l.wasReversed:!1}checkEqualitity(i,l){if(!i||!l)return;let d;return i.forEach((h,m)=>{l.forEach(g=>{h.getLeftChar().getValue()===g.getLeftChar().getValue()&&h.getRightChar().getValue()===g.getRightChar().getValue()&&h.getFinderPatter().getValue()===g.getFinderPatter().getValue()&&(d=!0)})}),d}}class ke extends xt{constructor(i){super(...arguments),this.pairs=new Array(ke.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,l,d){this.pairs.length=0,this.startFromEven=!1;try{return ke.constructResult(this.decodeRow2pairs(i,l))}catch(h){this.verbose&&console.log(h)}return this.pairs.length=0,this.startFromEven=!0,ke.constructResult(this.decodeRow2pairs(i,l))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,l){let d=!1;for(;!d;)try{this.pairs.push(this.retrieveNextPair(l,this.pairs,i))}catch(m){if(m instanceof H){if(!this.pairs.length)throw new H;d=!0}}if(this.checkChecksum())return this.pairs;let h;if(this.rows.length?h=!0:h=!1,this.storeRow(i,!1),h){let m=this.checkRowsBoolean(!1);if(m!=null||(m=this.checkRowsBoolean(!0),m!=null))return m}throw new H}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let l=null;try{l=this.checkRows(new Array,0)}catch(d){this.verbose&&console.log(d)}return i&&(this.rows=this.rows.reverse()),l}checkRows(i,l){for(let d=l;d<this.rows.length;d++){let h=this.rows[d];this.pairs.length=0;for(let g of i)this.pairs.push(g.getPairs());if(this.pairs.push(h.getPairs()),!ke.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let m=new Array(i);m.push(h);try{return this.checkRows(m,d+1)}catch(g){this.verbose&&console.log(g)}}throw new H}static isValidSequence(i){for(let l of ke.FINDER_PATTERN_SEQUENCES){if(i.length>l.length)continue;let d=!0;for(let h=0;h<i.length;h++)if(i[h].getFinderPattern().getValue()!=l[h]){d=!1;break}if(d)return!0}return!1}storeRow(i,l){let d=0,h=!1,m=!1;for(;d<this.rows.length;){let g=this.rows[d];if(g.getRowNumber()>i){m=g.isEquivalent(this.pairs);break}h=g.isEquivalent(this.pairs),d++}m||h||ke.isPartialRow(this.pairs,this.rows)||(this.rows.push(d,new vp(this.pairs,i,l)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,l){for(let d of l)if(d.getPairs().length!==i.length){for(let h of d.getPairs())for(let m of i)if(ni.equals(h,m))break}}static isPartialRow(i,l){for(let d of l){let h=!0;for(let m of i){let g=!1;for(let y of d.getPairs())if(m.equals(y)){g=!0;break}if(!g){h=!1;break}}if(h)return!0}return!1}getRows(){return this.rows}static constructResult(i){let l=Pa.buildBitArray(i),h=Uv(l).parseInformation(),m=i[0].getFinderPattern().getResultPoints(),g=i[i.length-1].getFinderPattern().getResultPoints(),y=[m[0],m[1],g[0],g[1]];return new G(h,null,null,y,ce.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),l=i.getLeftChar(),d=i.getRightChar();if(d==null)return!1;let h=d.getChecksumPortion(),m=2;for(let y=1;y<this.pairs.size();++y){let A=this.pairs.get(y);h+=A.getLeftChar().getChecksumPortion(),m++;let I=A.getRightChar();I!=null&&(h+=I.getChecksumPortion(),m++)}return h%=211,211*(m-4)+h==l.getValue()}static getNextSecondBar(i,l){let d;return i.get(l)?(d=i.getNextUnset(l),d=i.getNextSet(d)):(d=i.getNextSet(l),d=i.getNextUnset(d)),d}retrieveNextPair(i,l,d){let h=l.length%2==0;this.startFromEven&&(h=!h);let m,g=!0,y=-1;do this.findNextPair(i,l,y),m=this.parseFoundFinderPattern(i,d,h),m==null?y=ke.getNextSecondBar(i,this.startEnd[0]):g=!1;while(g);let A=this.decodeDataCharacter(i,m,h,!0);if(!this.isEmptyPair(l)&&l[l.length-1].mustBeLast())throw new H;let I;try{I=this.decodeDataCharacter(i,m,h,!1)}catch(D){I=null,this.verbose&&console.log(D)}return new ni(A,I,m,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,l,d){let h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;let m=i.getSize(),g;d>=0?g=d:this.isEmptyPair(l)?g=0:g=l[l.length-1].getFinderPattern().getStartEnd()[1];let y=l.length%2!=0;this.startFromEven&&(y=!y);let A=!1;for(;g<m&&(A=!i.get(g),!!A);)g++;let I=0,D=g;for(let B=g;B<m;B++)if(i.get(B)!=A)h[I]++;else{if(I==3){if(y&&ke.reverseCounters(h),ke.isFinderPattern(h)){this.startEnd[0]=D,this.startEnd[1]=B;return}y&&ke.reverseCounters(h),D+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,I--}else I++;h[I]=1,A=!A}throw new H}static reverseCounters(i){let l=i.length;for(let d=0;d<l/2;++d){let h=i[d];i[d]=i[l-d-1],i[l-d-1]=h}}parseFoundFinderPattern(i,l,d){let h,m,g;if(d){let I=this.startEnd[0]-1;for(;I>=0&&!i.get(I);)I--;I++,h=this.startEnd[0]-I,m=I,g=this.startEnd[1]}else m=this.startEnd[0],g=i.getNextUnset(this.startEnd[1]+1),h=g-this.startEnd[1];let y=this.getDecodeFinderCounters();C.arraycopy(y,0,y,1,y.length-1),y[0]=h;let A;try{A=this.parseFinderValue(y,ke.FINDER_PATTERNS)}catch{return null}return new mn(A,[m,g],m,g,l)}decodeDataCharacter(i,l,d,h){let m=this.getDataCharacterCounters();for(let Zt=0;Zt<m.length;Zt++)m[Zt]=0;if(h)ke.recordPatternInReverse(i,l.getStartEnd()[0],m);else{ke.recordPattern(i,l.getStartEnd()[1],m);for(let Zt=0,tn=m.length-1;Zt<tn;Zt++,tn--){let Zn=m[Zt];m[Zt]=m[tn],m[tn]=Zn}}let g=17,y=He.sum(new Int32Array(m))/g,A=(l.getStartEnd()[1]-l.getStartEnd()[0])/15;if(Math.abs(y-A)/A>.3)throw new H;let I=this.getOddCounts(),D=this.getEvenCounts(),B=this.getOddRoundingErrors(),V=this.getEvenRoundingErrors();for(let Zt=0;Zt<m.length;Zt++){let tn=1*m[Zt]/y,Zn=tn+.5;if(Zn<1){if(tn<.3)throw new H;Zn=1}else if(Zn>8){if(tn>8.7)throw new H;Zn=8}let jl=Zt/2;Zt&1?(D[jl]=Zn,V[jl]=tn-Zn):(I[jl]=Zn,B[jl]=tn-Zn)}this.adjustOddEvenCounts(g);let Z=4*l.getValue()+(d?0:2)+(h?0:1)-1,oe=0,le=0;for(let Zt=I.length-1;Zt>=0;Zt--){if(ke.isNotA1left(l,d,h)){let tn=ke.WEIGHTS[Z][2*Zt];le+=I[Zt]*tn}oe+=I[Zt]}let fe=0;for(let Zt=D.length-1;Zt>=0;Zt--)if(ke.isNotA1left(l,d,h)){let tn=ke.WEIGHTS[Z][2*Zt+1];fe+=D[Zt]*tn}let ve=le+fe;if(oe&1||oe>13||oe<4)throw new H;let De=(13-oe)/2,Me=ke.SYMBOL_WIDEST[De],Re=9-Me,Ct=Lr.getRSSvalue(I,Me,!0),pt=Lr.getRSSvalue(D,Re,!1),Mn=ke.EVEN_TOTAL_SUBSET[De],zs=ke.GSUM[De],Ln=Ct*Mn+pt+zs;return new Gr(Ln,ve)}static isNotA1left(i,l,d){return!(i.getValue()==0&&l&&d)}adjustOddEvenCounts(i){let l=He.sum(new Int32Array(this.getOddCounts())),d=He.sum(new Int32Array(this.getEvenCounts())),h=!1,m=!1;l>13?m=!0:l<4&&(h=!0);let g=!1,y=!1;d>13?y=!0:d<4&&(g=!0);let A=l+d-i,I=(l&1)==1,D=(d&1)==0;if(A==1)if(I){if(D)throw new H;m=!0}else{if(!D)throw new H;y=!0}else if(A==-1)if(I){if(D)throw new H;h=!0}else{if(!D)throw new H;g=!0}else if(A==0){if(I){if(!D)throw new H;l<d?(h=!0,y=!0):(m=!0,g=!0)}else if(D)throw new H}else throw new H;if(h){if(m)throw new H;ke.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(m&&ke.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(y)throw new H;ke.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&ke.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ke.SYMBOL_WIDEST=[7,5,4,3,1],ke.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ke.GSUM=[0,348,1388,2948,3988],ke.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ke.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ke.FINDER_PAT_A=0,ke.FINDER_PAT_B=1,ke.FINDER_PAT_C=2,ke.FINDER_PAT_D=3,ke.FINDER_PAT_E=4,ke.FINDER_PAT_F=5,ke.FINDER_PATTERN_SEQUENCES=[[ke.FINDER_PAT_A,ke.FINDER_PAT_A],[ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B],[ke.FINDER_PAT_A,ke.FINDER_PAT_C,ke.FINDER_PAT_B,ke.FINDER_PAT_D],[ke.FINDER_PAT_A,ke.FINDER_PAT_E,ke.FINDER_PAT_B,ke.FINDER_PAT_D,ke.FINDER_PAT_C],[ke.FINDER_PAT_A,ke.FINDER_PAT_E,ke.FINDER_PAT_B,ke.FINDER_PAT_D,ke.FINDER_PAT_D,ke.FINDER_PAT_F],[ke.FINDER_PAT_A,ke.FINDER_PAT_E,ke.FINDER_PAT_B,ke.FINDER_PAT_D,ke.FINDER_PAT_E,ke.FINDER_PAT_F,ke.FINDER_PAT_F],[ke.FINDER_PAT_A,ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B,ke.FINDER_PAT_C,ke.FINDER_PAT_C,ke.FINDER_PAT_D,ke.FINDER_PAT_D],[ke.FINDER_PAT_A,ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B,ke.FINDER_PAT_C,ke.FINDER_PAT_C,ke.FINDER_PAT_D,ke.FINDER_PAT_E,ke.FINDER_PAT_E],[ke.FINDER_PAT_A,ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B,ke.FINDER_PAT_C,ke.FINDER_PAT_C,ke.FINDER_PAT_D,ke.FINDER_PAT_E,ke.FINDER_PAT_F,ke.FINDER_PAT_F],[ke.FINDER_PAT_A,ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B,ke.FINDER_PAT_C,ke.FINDER_PAT_D,ke.FINDER_PAT_D,ke.FINDER_PAT_E,ke.FINDER_PAT_E,ke.FINDER_PAT_F,ke.FINDER_PAT_F]],ke.MAX_PAIRS=11;class Ok extends Gr{constructor(i,l,d){super(i,l),this.count=0,this.finderPattern=d}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class br extends xt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,l,d){const h=this.decodePair(l,!1,i,d);br.addOrTally(this.possibleLeftPairs,h),l.reverse();let m=this.decodePair(l,!0,i,d);br.addOrTally(this.possibleRightPairs,m),l.reverse();for(let g of this.possibleLeftPairs)if(g.getCount()>1){for(let y of this.possibleRightPairs)if(y.getCount()>1&&br.checkChecksum(g,y))return br.constructResult(g,y)}throw new H}static addOrTally(i,l){if(l==null)return;let d=!1;for(let h of i)if(h.getValue()===l.getValue()){h.incrementCount(),d=!0;break}d||i.push(l)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,l){let d=4537077*i.getValue()+l.getValue(),h=new String(d).toString(),m=new q;for(let I=13-h.length;I>0;I--)m.append("0");m.append(h);let g=0;for(let I=0;I<13;I++){let D=m.charAt(I).charCodeAt(0)-48;g+=I&1?D:3*D}g=10-g%10,g===10&&(g=0),m.append(g.toString());let y=i.getFinderPattern().getResultPoints(),A=l.getFinderPattern().getResultPoints();return new G(m.toString(),null,0,[y[0],y[1],A[0],A[1]],ce.RSS_14,new Date().getTime())}static checkChecksum(i,l){let d=(i.getChecksumPortion()+16*l.getChecksumPortion())%79,h=9*i.getFinderPattern().getValue()+l.getFinderPattern().getValue();return h>72&&h--,h>8&&h--,d===h}decodePair(i,l,d,h){try{let m=this.findFinderPattern(i,l),g=this.parseFoundFinderPattern(i,d,l,m),y=h==null?null:h.get(L.NEED_RESULT_POINT_CALLBACK);if(y!=null){let D=(m[0]+m[1])/2;l&&(D=i.getSize()-1-D),y.foundPossibleResultPoint(new pe(D,d))}let A=this.decodeDataCharacter(i,g,!0),I=this.decodeDataCharacter(i,g,!1);return new Ok(1597*A.getValue()+I.getValue(),A.getChecksumPortion()+4*I.getChecksumPortion(),g)}catch{return null}}decodeDataCharacter(i,l,d){let h=this.getDataCharacterCounters();for(let fe=0;fe<h.length;fe++)h[fe]=0;if(d)ft.recordPatternInReverse(i,l.getStartEnd()[0],h);else{ft.recordPattern(i,l.getStartEnd()[1]+1,h);for(let fe=0,ve=h.length-1;fe<ve;fe++,ve--){let De=h[fe];h[fe]=h[ve],h[ve]=De}}let m=d?16:15,g=He.sum(new Int32Array(h))/m,y=this.getOddCounts(),A=this.getEvenCounts(),I=this.getOddRoundingErrors(),D=this.getEvenRoundingErrors();for(let fe=0;fe<h.length;fe++){let ve=h[fe]/g,De=Math.floor(ve+.5);De<1?De=1:De>8&&(De=8);let Me=Math.floor(fe/2);fe&1?(A[Me]=De,D[Me]=ve-De):(y[Me]=De,I[Me]=ve-De)}this.adjustOddEvenCounts(d,m);let B=0,V=0;for(let fe=y.length-1;fe>=0;fe--)V*=9,V+=y[fe],B+=y[fe];let Z=0,oe=0;for(let fe=A.length-1;fe>=0;fe--)Z*=9,Z+=A[fe],oe+=A[fe];let le=V+3*Z;if(d){if(B&1||B>12||B<4)throw new H;let fe=(12-B)/2,ve=br.OUTSIDE_ODD_WIDEST[fe],De=9-ve,Me=Lr.getRSSvalue(y,ve,!1),Re=Lr.getRSSvalue(A,De,!0),Ct=br.OUTSIDE_EVEN_TOTAL_SUBSET[fe],pt=br.OUTSIDE_GSUM[fe];return new Gr(Me*Ct+Re+pt,le)}else{if(oe&1||oe>10||oe<4)throw new H;let fe=(10-oe)/2,ve=br.INSIDE_ODD_WIDEST[fe],De=9-ve,Me=Lr.getRSSvalue(y,ve,!0),Re=Lr.getRSSvalue(A,De,!1),Ct=br.INSIDE_ODD_TOTAL_SUBSET[fe],pt=br.INSIDE_GSUM[fe];return new Gr(Re*Ct+Me+pt,le)}}findFinderPattern(i,l){let d=this.getDecodeFinderCounters();d[0]=0,d[1]=0,d[2]=0,d[3]=0;let h=i.getSize(),m=!1,g=0;for(;g<h&&(m=!i.get(g),l!==m);)g++;let y=0,A=g;for(let I=g;I<h;I++)if(i.get(I)!==m)d[y]++;else{if(y===3){if(xt.isFinderPattern(d))return[A,I];A+=d[0]+d[1],d[0]=d[2],d[1]=d[3],d[2]=0,d[3]=0,y--}else y++;d[y]=1,m=!m}throw new H}parseFoundFinderPattern(i,l,d,h){let m=i.get(h[0]),g=h[0]-1;for(;g>=0&&m!==i.get(g);)g--;g++;const y=h[0]-g,A=this.getDecodeFinderCounters(),I=new Int32Array(A.length);C.arraycopy(A,0,I,1,A.length-1),I[0]=y;const D=this.parseFinderValue(I,br.FINDER_PATTERNS);let B=g,V=h[1];return d&&(B=i.getSize()-1-B,V=i.getSize()-1-V),new mn(D,[g,h[1]],B,V,l)}adjustOddEvenCounts(i,l){let d=He.sum(new Int32Array(this.getOddCounts())),h=He.sum(new Int32Array(this.getEvenCounts())),m=!1,g=!1,y=!1,A=!1;i?(d>12?g=!0:d<4&&(m=!0),h>12?A=!0:h<4&&(y=!0)):(d>11?g=!0:d<5&&(m=!0),h>10?A=!0:h<4&&(y=!0));let I=d+h-l,D=(d&1)===(i?1:0),B=(h&1)===1;if(I===1)if(D){if(B)throw new H;g=!0}else{if(!B)throw new H;A=!0}else if(I===-1)if(D){if(B)throw new H;m=!0}else{if(!B)throw new H;y=!0}else if(I===0){if(D){if(!B)throw new H;d<h?(m=!0,A=!0):(g=!0,y=!0)}else if(B)throw new H}else throw new H;if(m){if(g)throw new H;xt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&xt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(A)throw new H;xt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}A&&xt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}br.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],br.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],br.OUTSIDE_GSUM=[0,161,961,2015,2715],br.INSIDE_GSUM=[0,336,1036,1516],br.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],br.INSIDE_ODD_WIDEST=[2,4,6,8],br.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class yl extends ft{constructor(i,l){super(),this.readers=[],this.verbose=l===!0;const d=i?i.get(L.POSSIBLE_FORMATS):null,h=i&&i.get(L.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;d?((d.includes(ce.EAN_13)||d.includes(ce.UPC_A)||d.includes(ce.EAN_8)||d.includes(ce.UPC_E))&&this.readers.push(new Ot(i)),d.includes(ce.CODE_39)&&this.readers.push(new Dt(h)),d.includes(ce.CODE_128)&&this.readers.push(new Te),d.includes(ce.ITF)&&this.readers.push(new mt),d.includes(ce.RSS_14)&&this.readers.push(new br),d.includes(ce.RSS_EXPANDED)&&this.readers.push(new ke(this.verbose))):(this.readers.push(new Ot(i)),this.readers.push(new Dt),this.readers.push(new Ot(i)),this.readers.push(new Te),this.readers.push(new mt),this.readers.push(new br),this.readers.push(new ke(this.verbose)))}decodeRow(i,l,d){for(let h=0;h<this.readers.length;h++)try{return this.readers[h].decodeRow(i,l,d)}catch{}throw new H}reset(){this.readers.forEach(i=>i.reset())}}class Dk extends J{constructor(i=500,l){super(new yl(l),i,l)}}class qt{constructor(i,l,d){this.ecCodewords=i,this.ecBlocks=[l],d&&this.ecBlocks.push(d)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class zt{constructor(i,l){this.count=i,this.dataCodewords=l}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Tt{constructor(i,l,d,h,m,g){this.versionNumber=i,this.symbolSizeRows=l,this.symbolSizeColumns=d,this.dataRegionSizeRows=h,this.dataRegionSizeColumns=m,this.ecBlocks=g;let y=0;const A=g.getECCodewords(),I=g.getECBlocks();for(let D of I)y+=D.getCount()*(D.getDataCodewords()+A);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,l){if(i&1||l&1)throw new P;for(let d of Tt.VERSIONS)if(d.symbolSizeRows===i&&d.symbolSizeColumns===l)return d;throw new P}toString(){return""+this.versionNumber}static buildVersions(){return[new Tt(1,10,10,8,8,new qt(5,new zt(1,3))),new Tt(2,12,12,10,10,new qt(7,new zt(1,5))),new Tt(3,14,14,12,12,new qt(10,new zt(1,8))),new Tt(4,16,16,14,14,new qt(12,new zt(1,12))),new Tt(5,18,18,16,16,new qt(14,new zt(1,18))),new Tt(6,20,20,18,18,new qt(18,new zt(1,22))),new Tt(7,22,22,20,20,new qt(20,new zt(1,30))),new Tt(8,24,24,22,22,new qt(24,new zt(1,36))),new Tt(9,26,26,24,24,new qt(28,new zt(1,44))),new Tt(10,32,32,14,14,new qt(36,new zt(1,62))),new Tt(11,36,36,16,16,new qt(42,new zt(1,86))),new Tt(12,40,40,18,18,new qt(48,new zt(1,114))),new Tt(13,44,44,20,20,new qt(56,new zt(1,144))),new Tt(14,48,48,22,22,new qt(68,new zt(1,174))),new Tt(15,52,52,24,24,new qt(42,new zt(2,102))),new Tt(16,64,64,14,14,new qt(56,new zt(2,140))),new Tt(17,72,72,16,16,new qt(36,new zt(4,92))),new Tt(18,80,80,18,18,new qt(48,new zt(4,114))),new Tt(19,88,88,20,20,new qt(56,new zt(4,144))),new Tt(20,96,96,22,22,new qt(68,new zt(4,174))),new Tt(21,104,104,24,24,new qt(56,new zt(6,136))),new Tt(22,120,120,18,18,new qt(68,new zt(6,175))),new Tt(23,132,132,20,20,new qt(62,new zt(8,163))),new Tt(24,144,144,22,22,new qt(62,new zt(8,156),new zt(2,155))),new Tt(25,8,18,6,16,new qt(7,new zt(1,5))),new Tt(26,8,32,6,14,new qt(11,new zt(1,10))),new Tt(27,12,26,10,24,new qt(14,new zt(1,16))),new Tt(28,12,36,10,16,new qt(18,new zt(1,22))),new Tt(29,16,36,14,16,new qt(24,new zt(1,32))),new Tt(30,16,48,14,22,new qt(28,new zt(1,49)))]}}Tt.VERSIONS=Tt.buildVersions();class wp{constructor(i){const l=i.getHeight();if(l<8||l>144||l&1)throw new P;this.version=wp.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new ee(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const l=i.getHeight(),d=i.getWidth();return Tt.getVersionForDimensions(l,d)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let l=0,d=4,h=0;const m=this.mappingBitMatrix.getHeight(),g=this.mappingBitMatrix.getWidth();let y=!1,A=!1,I=!1,D=!1;do if(d===m&&h===0&&!y)i[l++]=this.readCorner1(m,g)&255,d-=2,h+=2,y=!0;else if(d===m-2&&h===0&&g&3&&!A)i[l++]=this.readCorner2(m,g)&255,d-=2,h+=2,A=!0;else if(d===m+4&&h===2&&!(g&7)&&!I)i[l++]=this.readCorner3(m,g)&255,d-=2,h+=2,I=!0;else if(d===m-2&&h===0&&(g&7)===4&&!D)i[l++]=this.readCorner4(m,g)&255,d-=2,h+=2,D=!0;else{do d<m&&h>=0&&!this.readMappingMatrix.get(h,d)&&(i[l++]=this.readUtah(d,h,m,g)&255),d-=2,h+=2;while(d>=0&&h<g);d+=1,h+=3;do d>=0&&h<g&&!this.readMappingMatrix.get(h,d)&&(i[l++]=this.readUtah(d,h,m,g)&255),d+=2,h-=2;while(d<m&&h>=0);d+=3,h+=1}while(d<m||h<g);if(l!==this.version.getTotalCodewords())throw new P;return i}readModule(i,l,d,h){return i<0&&(i+=d,l+=4-(d+4&7)),l<0&&(l+=h,i+=4-(h+4&7)),this.readMappingMatrix.set(l,i),this.mappingBitMatrix.get(l,i)}readUtah(i,l,d,h){let m=0;return this.readModule(i-2,l-2,d,h)&&(m|=1),m<<=1,this.readModule(i-2,l-1,d,h)&&(m|=1),m<<=1,this.readModule(i-1,l-2,d,h)&&(m|=1),m<<=1,this.readModule(i-1,l-1,d,h)&&(m|=1),m<<=1,this.readModule(i-1,l,d,h)&&(m|=1),m<<=1,this.readModule(i,l-2,d,h)&&(m|=1),m<<=1,this.readModule(i,l-1,d,h)&&(m|=1),m<<=1,this.readModule(i,l,d,h)&&(m|=1),m}readCorner1(i,l){let d=0;return this.readModule(i-1,0,i,l)&&(d|=1),d<<=1,this.readModule(i-1,1,i,l)&&(d|=1),d<<=1,this.readModule(i-1,2,i,l)&&(d|=1),d<<=1,this.readModule(0,l-2,i,l)&&(d|=1),d<<=1,this.readModule(0,l-1,i,l)&&(d|=1),d<<=1,this.readModule(1,l-1,i,l)&&(d|=1),d<<=1,this.readModule(2,l-1,i,l)&&(d|=1),d<<=1,this.readModule(3,l-1,i,l)&&(d|=1),d}readCorner2(i,l){let d=0;return this.readModule(i-3,0,i,l)&&(d|=1),d<<=1,this.readModule(i-2,0,i,l)&&(d|=1),d<<=1,this.readModule(i-1,0,i,l)&&(d|=1),d<<=1,this.readModule(0,l-4,i,l)&&(d|=1),d<<=1,this.readModule(0,l-3,i,l)&&(d|=1),d<<=1,this.readModule(0,l-2,i,l)&&(d|=1),d<<=1,this.readModule(0,l-1,i,l)&&(d|=1),d<<=1,this.readModule(1,l-1,i,l)&&(d|=1),d}readCorner3(i,l){let d=0;return this.readModule(i-1,0,i,l)&&(d|=1),d<<=1,this.readModule(i-1,l-1,i,l)&&(d|=1),d<<=1,this.readModule(0,l-3,i,l)&&(d|=1),d<<=1,this.readModule(0,l-2,i,l)&&(d|=1),d<<=1,this.readModule(0,l-1,i,l)&&(d|=1),d<<=1,this.readModule(1,l-3,i,l)&&(d|=1),d<<=1,this.readModule(1,l-2,i,l)&&(d|=1),d<<=1,this.readModule(1,l-1,i,l)&&(d|=1),d}readCorner4(i,l){let d=0;return this.readModule(i-3,0,i,l)&&(d|=1),d<<=1,this.readModule(i-2,0,i,l)&&(d|=1),d<<=1,this.readModule(i-1,0,i,l)&&(d|=1),d<<=1,this.readModule(0,l-2,i,l)&&(d|=1),d<<=1,this.readModule(0,l-1,i,l)&&(d|=1),d<<=1,this.readModule(1,l-1,i,l)&&(d|=1),d<<=1,this.readModule(2,l-1,i,l)&&(d|=1),d<<=1,this.readModule(3,l-1,i,l)&&(d|=1),d}extractDataRegion(i){const l=this.version.getSymbolSizeRows(),d=this.version.getSymbolSizeColumns();if(i.getHeight()!==l)throw new w("Dimension of bitMatrix must match the version size");const h=this.version.getDataRegionSizeRows(),m=this.version.getDataRegionSizeColumns(),g=l/h|0,y=d/m|0,A=g*h,I=y*m,D=new ee(I,A);for(let B=0;B<g;++B){const V=B*h;for(let Z=0;Z<y;++Z){const oe=Z*m;for(let le=0;le<h;++le){const fe=B*(h+2)+1+le,ve=V+le;for(let De=0;De<m;++De){const Me=Z*(m+2)+1+De;if(i.get(Me,fe)){const Re=oe+De;D.set(Re,ve)}}}}}return D}}class yp{constructor(i,l){this.numDataCodewords=i,this.codewords=l}static getDataBlocks(i,l){const d=l.getECBlocks();let h=0;const m=d.getECBlocks();for(let le of m)h+=le.getCount();const g=new Array(h);let y=0;for(let le of m)for(let fe=0;fe<le.getCount();fe++){const ve=le.getDataCodewords(),De=d.getECCodewords()+ve;g[y++]=new yp(ve,new Uint8Array(De))}const I=g[0].codewords.length-d.getECCodewords(),D=I-1;let B=0;for(let le=0;le<D;le++)for(let fe=0;fe<y;fe++)g[fe].codewords[le]=i[B++];const V=l.getVersionNumber()===24,Z=V?8:y;for(let le=0;le<Z;le++)g[le].codewords[I-1]=i[B++];const oe=g[0].codewords.length;for(let le=I;le<oe;le++)for(let fe=0;fe<y;fe++){const ve=V?(fe+8)%y:fe,De=V&&ve>7?le-1:le;g[ve].codewords[De]=i[B++]}if(B!==i.length)throw new w;return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class bp{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new w(""+i);let l=0,d=this.bitOffset,h=this.byteOffset;const m=this.bytes;if(d>0){const g=8-d,y=i<g?i:g,A=g-y,I=255>>8-y<<A;l=(m[h]&I)>>A,i-=y,d+=y,d===8&&(d=0,h++)}if(i>0){for(;i>=8;)l=l<<8|m[h]&255,h++,i-=8;if(i>0){const g=8-i,y=255>>g<<g;l=l<<i|(m[h]&y)>>g,d+=i}}return this.bitOffset=d,this.byteOffset=h,l}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Br;(function(F){F[F.PAD_ENCODE=0]="PAD_ENCODE",F[F.ASCII_ENCODE=1]="ASCII_ENCODE",F[F.C40_ENCODE=2]="C40_ENCODE",F[F.TEXT_ENCODE=3]="TEXT_ENCODE",F[F.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",F[F.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",F[F.BASE256_ENCODE=6]="BASE256_ENCODE"})(Br||(Br={}));class si{static decode(i){const l=new bp(i),d=new q,h=new q,m=new Array;let g=Br.ASCII_ENCODE;do if(g===Br.ASCII_ENCODE)g=this.decodeAsciiSegment(l,d,h);else{switch(g){case Br.C40_ENCODE:this.decodeC40Segment(l,d);break;case Br.TEXT_ENCODE:this.decodeTextSegment(l,d);break;case Br.ANSIX12_ENCODE:this.decodeAnsiX12Segment(l,d);break;case Br.EDIFACT_ENCODE:this.decodeEdifactSegment(l,d);break;case Br.BASE256_ENCODE:this.decodeBase256Segment(l,d,m);break;default:throw new P}g=Br.ASCII_ENCODE}while(g!==Br.PAD_ENCODE&&l.available()>0);return h.length()>0&&d.append(h.toString()),new Ae(i,d.toString(),m.length===0?null:m,null)}static decodeAsciiSegment(i,l,d){let h=!1;do{let m=i.readBits(8);if(m===0)throw new P;if(m<=128)return h&&(m+=128),l.append(String.fromCharCode(m-1)),Br.ASCII_ENCODE;if(m===129)return Br.PAD_ENCODE;if(m<=229){const g=m-130;g<10&&l.append("0"),l.append(""+g)}else switch(m){case 230:return Br.C40_ENCODE;case 231:return Br.BASE256_ENCODE;case 232:l.append("");break;case 233:case 234:break;case 235:h=!0;break;case 236:l.append("[)>05"),d.insert(0,"");break;case 237:l.append("[)>06"),d.insert(0,"");break;case 238:return Br.ANSIX12_ENCODE;case 239:return Br.TEXT_ENCODE;case 240:return Br.EDIFACT_ENCODE;case 241:break;default:if(m!==254||i.available()!==0)throw new P;break}}while(i.available()>0);return Br.ASCII_ENCODE}static decodeC40Segment(i,l){let d=!1;const h=[];let m=0;do{if(i.available()===8)return;const g=i.readBits(8);if(g===254)return;this.parseTwoBytes(g,i.readBits(8),h);for(let y=0;y<3;y++){const A=h[y];switch(m){case 0:if(A<3)m=A+1;else if(A<this.C40_BASIC_SET_CHARS.length){const I=this.C40_BASIC_SET_CHARS[A];d?(l.append(String.fromCharCode(I.charCodeAt(0)+128)),d=!1):l.append(I)}else throw new P;break;case 1:d?(l.append(String.fromCharCode(A+128)),d=!1):l.append(String.fromCharCode(A)),m=0;break;case 2:if(A<this.C40_SHIFT2_SET_CHARS.length){const I=this.C40_SHIFT2_SET_CHARS[A];d?(l.append(String.fromCharCode(I.charCodeAt(0)+128)),d=!1):l.append(I)}else switch(A){case 27:l.append("");break;case 30:d=!0;break;default:throw new P}m=0;break;case 3:d?(l.append(String.fromCharCode(A+224)),d=!1):l.append(String.fromCharCode(A+96)),m=0;break;default:throw new P}}}while(i.available()>0)}static decodeTextSegment(i,l){let d=!1,h=[],m=0;do{if(i.available()===8)return;const g=i.readBits(8);if(g===254)return;this.parseTwoBytes(g,i.readBits(8),h);for(let y=0;y<3;y++){const A=h[y];switch(m){case 0:if(A<3)m=A+1;else if(A<this.TEXT_BASIC_SET_CHARS.length){const I=this.TEXT_BASIC_SET_CHARS[A];d?(l.append(String.fromCharCode(I.charCodeAt(0)+128)),d=!1):l.append(I)}else throw new P;break;case 1:d?(l.append(String.fromCharCode(A+128)),d=!1):l.append(String.fromCharCode(A)),m=0;break;case 2:if(A<this.TEXT_SHIFT2_SET_CHARS.length){const I=this.TEXT_SHIFT2_SET_CHARS[A];d?(l.append(String.fromCharCode(I.charCodeAt(0)+128)),d=!1):l.append(I)}else switch(A){case 27:l.append("");break;case 30:d=!0;break;default:throw new P}m=0;break;case 3:if(A<this.TEXT_SHIFT3_SET_CHARS.length){const I=this.TEXT_SHIFT3_SET_CHARS[A];d?(l.append(String.fromCharCode(I.charCodeAt(0)+128)),d=!1):l.append(I),m=0}else throw new P;break;default:throw new P}}}while(i.available()>0)}static decodeAnsiX12Segment(i,l){const d=[];do{if(i.available()===8)return;const h=i.readBits(8);if(h===254)return;this.parseTwoBytes(h,i.readBits(8),d);for(let m=0;m<3;m++){const g=d[m];switch(g){case 0:l.append("\r");break;case 1:l.append("*");break;case 2:l.append(">");break;case 3:l.append(" ");break;default:if(g<14)l.append(String.fromCharCode(g+44));else if(g<40)l.append(String.fromCharCode(g+51));else throw new P;break}}}while(i.available()>0)}static parseTwoBytes(i,l,d){let h=(i<<8)+l-1,m=Math.floor(h/1600);d[0]=m,h-=m*1600,m=Math.floor(h/40),d[1]=m,d[2]=h-m*40}static decodeEdifactSegment(i,l){do{if(i.available()<=16)return;for(let d=0;d<4;d++){let h=i.readBits(6);if(h===31){const m=8-i.getBitOffset();m!==8&&i.readBits(m);return}h&32||(h|=64),l.append(String.fromCharCode(h))}}while(i.available()>0)}static decodeBase256Segment(i,l,d){let h=1+i.getByteOffset();const m=this.unrandomize255State(i.readBits(8),h++);let g;if(m===0?g=i.available()/8|0:m<250?g=m:g=250*(m-249)+this.unrandomize255State(i.readBits(8),h++),g<0)throw new P;const y=new Uint8Array(g);for(let A=0;A<g;A++){if(i.available()<8)throw new P;y[A]=this.unrandomize255State(i.readBits(8),h++)}d.push(y);try{l.append(Y.decode(y,z.ISO88591))}catch(A){throw new _e("Platform does not support required encoding: "+A.message)}}static unrandomize255State(i,l){const d=149*l%255+1,h=i-d;return h>=0?h:h+256}}si.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],si.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],si.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],si.TEXT_SHIFT2_SET_CHARS=si.C40_SHIFT2_SET_CHARS,si.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Mk{constructor(){this.rsDecoder=new Ze(ue.DATA_MATRIX_FIELD_256)}decode(i){const l=new wp(i),d=l.getVersion(),h=l.readCodewords(),m=yp.getDataBlocks(h,d);let g=0;for(let I of m)g+=I.getNumDataCodewords();const y=new Uint8Array(g),A=m.length;for(let I=0;I<A;I++){const D=m[I],B=D.getCodewords(),V=D.getNumDataCodewords();this.correctErrors(B,V);for(let Z=0;Z<V;Z++)y[Z*A+I]=B[Z]}return si.decode(y)}correctErrors(i,l){const d=new Int32Array(i);try{this.rsDecoder.decode(d,i.length-l)}catch{throw new j}for(let h=0;h<l;h++)i[h]=d[h]}}class Ar{constructor(i){this.image=i,this.rectangleDetector=new it(this.image)}detect(){const i=this.rectangleDetector.detect();let l=this.detectSolid1(i);if(l=this.detectSolid2(l),l[3]=this.correctTopRight(l),!l[3])throw new H;l=this.shiftToModuleCenter(l);const d=l[0],h=l[1],m=l[2],g=l[3];let y=this.transitionsBetween(d,g)+1,A=this.transitionsBetween(m,g)+1;(y&1)===1&&(y+=1),(A&1)===1&&(A+=1),4*y<7*A&&4*A<7*y&&(y=A=Math.max(y,A));let I=Ar.sampleGrid(this.image,d,h,m,g,y,A);return new Je(I,[d,h,m,g])}static shiftPoint(i,l,d){let h=(l.getX()-i.getX())/(d+1),m=(l.getY()-i.getY())/(d+1);return new pe(i.getX()+h,i.getY()+m)}static moveAway(i,l,d){let h=i.getX(),m=i.getY();return h<l?h-=1:h+=1,m<d?m-=1:m+=1,new pe(h,m)}detectSolid1(i){let l=i[0],d=i[1],h=i[3],m=i[2],g=this.transitionsBetween(l,d),y=this.transitionsBetween(d,h),A=this.transitionsBetween(h,m),I=this.transitionsBetween(m,l),D=g,B=[m,l,d,h];return D>y&&(D=y,B[0]=l,B[1]=d,B[2]=h,B[3]=m),D>A&&(D=A,B[0]=d,B[1]=h,B[2]=m,B[3]=l),D>I&&(B[0]=h,B[1]=m,B[2]=l,B[3]=d),B}detectSolid2(i){let l=i[0],d=i[1],h=i[2],m=i[3],g=this.transitionsBetween(l,m),y=Ar.shiftPoint(d,h,(g+1)*4),A=Ar.shiftPoint(h,d,(g+1)*4),I=this.transitionsBetween(y,l),D=this.transitionsBetween(A,m);return I<D?(i[0]=l,i[1]=d,i[2]=h,i[3]=m):(i[0]=d,i[1]=h,i[2]=m,i[3]=l),i}correctTopRight(i){let l=i[0],d=i[1],h=i[2],m=i[3],g=this.transitionsBetween(l,m),y=this.transitionsBetween(d,m),A=Ar.shiftPoint(l,d,(y+1)*4),I=Ar.shiftPoint(h,d,(g+1)*4);g=this.transitionsBetween(A,m),y=this.transitionsBetween(I,m);let D=new pe(m.getX()+(h.getX()-d.getX())/(g+1),m.getY()+(h.getY()-d.getY())/(g+1)),B=new pe(m.getX()+(l.getX()-d.getX())/(y+1),m.getY()+(l.getY()-d.getY())/(y+1));if(!this.isValid(D))return this.isValid(B)?B:null;if(!this.isValid(B))return D;let V=this.transitionsBetween(A,D)+this.transitionsBetween(I,D),Z=this.transitionsBetween(A,B)+this.transitionsBetween(I,B);return V>Z?D:B}shiftToModuleCenter(i){let l=i[0],d=i[1],h=i[2],m=i[3],g=this.transitionsBetween(l,m)+1,y=this.transitionsBetween(h,m)+1,A=Ar.shiftPoint(l,d,y*4),I=Ar.shiftPoint(h,d,g*4);g=this.transitionsBetween(A,m)+1,y=this.transitionsBetween(I,m)+1,(g&1)===1&&(g+=1),(y&1)===1&&(y+=1);let D=(l.getX()+d.getX()+h.getX()+m.getX())/4,B=(l.getY()+d.getY()+h.getY()+m.getY())/4;l=Ar.moveAway(l,D,B),d=Ar.moveAway(d,D,B),h=Ar.moveAway(h,D,B),m=Ar.moveAway(m,D,B);let V,Z;return A=Ar.shiftPoint(l,d,y*4),A=Ar.shiftPoint(A,m,g*4),V=Ar.shiftPoint(d,l,y*4),V=Ar.shiftPoint(V,h,g*4),I=Ar.shiftPoint(h,m,y*4),I=Ar.shiftPoint(I,d,g*4),Z=Ar.shiftPoint(m,h,y*4),Z=Ar.shiftPoint(Z,l,g*4),[A,V,I,Z]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,l,d,h,m,g,y){return At.getInstance().sampleGrid(i,g,y,.5,.5,g-.5,.5,g-.5,y-.5,.5,y-.5,l.getX(),l.getY(),m.getX(),m.getY(),h.getX(),h.getY(),d.getX(),d.getY())}transitionsBetween(i,l){let d=Math.trunc(i.getX()),h=Math.trunc(i.getY()),m=Math.trunc(l.getX()),g=Math.trunc(l.getY()),y=Math.abs(g-h)>Math.abs(m-d);if(y){let le=d;d=h,h=le,le=m,m=g,g=le}let A=Math.abs(m-d),I=Math.abs(g-h),D=-A/2,B=h<g?1:-1,V=d<m?1:-1,Z=0,oe=this.image.get(y?h:d,y?d:h);for(let le=d,fe=h;le!==m;le+=V){let ve=this.image.get(y?fe:le,y?le:fe);if(ve!==oe&&(Z++,oe=ve),D+=I,D>0){if(fe===g)break;fe+=B,D-=A}}return Z}}class ai{constructor(){this.decoder=new Mk}decode(i,l=null){let d,h;if(l!=null&&l.has(L.PURE_BARCODE)){const I=ai.extractPureBits(i.getBlackMatrix());d=this.decoder.decode(I),h=ai.NO_POINTS}else{const I=new Ar(i.getBlackMatrix()).detect();d=this.decoder.decode(I.getBits()),h=I.getPoints()}const m=d.getRawBytes(),g=new G(d.getText(),m,8*m.length,h,ce.DATA_MATRIX,C.currentTimeMillis()),y=d.getByteSegments();y!=null&&g.putMetadata(he.BYTE_SEGMENTS,y);const A=d.getECLevel();return A!=null&&g.putMetadata(he.ERROR_CORRECTION_LEVEL,A),g}reset(){}static extractPureBits(i){const l=i.getTopLeftOnBit(),d=i.getBottomRightOnBit();if(l==null||d==null)throw new H;const h=this.moduleSize(l,i);let m=l[1];const g=d[1];let y=l[0];const I=(d[0]-y+1)/h,D=(g-m+1)/h;if(I<=0||D<=0)throw new H;const B=h/2;m+=B,y+=B;const V=new ee(I,D);for(let Z=0;Z<D;Z++){const oe=m+Z*h;for(let le=0;le<I;le++)i.get(y+le*h,oe)&&V.set(le,Z)}return V}static moduleSize(i,l){const d=l.getWidth();let h=i[0];const m=i[1];for(;h<d&&l.get(h,m);)h++;if(h===d)throw new H;const g=h-i[0];if(g===0)throw new H;return g}}ai.NO_POINTS=[];class Lk extends J{constructor(i=500){super(new ai,i)}}var bl;(function(F){F[F.L=0]="L",F[F.M=1]="M",F[F.Q=2]="Q",F[F.H=3]="H"})(bl||(bl={}));class tr{constructor(i,l,d){this.value=i,this.stringValue=l,this.bits=d,tr.FOR_BITS.set(d,this),tr.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return tr.L;case"M":return tr.M;case"Q":return tr.Q;case"H":return tr.H;default:throw new x(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof tr))return!1;const l=i;return this.value===l.value}static forBits(i){if(i<0||i>=tr.FOR_BITS.size)throw new w;return tr.FOR_BITS.get(i)}}tr.FOR_BITS=new Map,tr.FOR_VALUE=new Map,tr.L=new tr(bl.L,"L",1),tr.M=new tr(bl.M,"M",0),tr.Q=new tr(bl.Q,"Q",3),tr.H=new tr(bl.H,"H",2);class pn{constructor(i){this.errorCorrectionLevel=tr.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,l){return b.bitCount(i^l)}static decodeFormatInformation(i,l){const d=pn.doDecodeFormatInformation(i,l);return d!==null?d:pn.doDecodeFormatInformation(i^pn.FORMAT_INFO_MASK_QR,l^pn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,l){let d=Number.MAX_SAFE_INTEGER,h=0;for(const m of pn.FORMAT_INFO_DECODE_LOOKUP){const g=m[0];if(g===i||g===l)return new pn(m[1]);let y=pn.numBitsDiffering(i,g);y<d&&(h=m[1],d=y),i!==l&&(y=pn.numBitsDiffering(l,g),y<d&&(h=m[1],d=y))}return d<=3?new pn(h):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof pn))return!1;const l=i;return this.errorCorrectionLevel===l.errorCorrectionLevel&&this.dataMask===l.dataMask}}pn.FORMAT_INFO_MASK_QR=21522,pn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class me{constructor(i,...l){this.ecCodewordsPerBlock=i,this.ecBlocks=l}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const l=this.ecBlocks;for(const d of l)i+=d.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Q{constructor(i,l){this.count=i,this.dataCodewords=l}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class et{constructor(i,l,...d){this.versionNumber=i,this.alignmentPatternCenters=l,this.ecBlocks=d;let h=0;const m=d[0].getECCodewordsPerBlock(),g=d[0].getECBlocks();for(const y of g)h+=y.getCount()*(y.getDataCodewords()+m);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new P;try{return this.getVersionForNumber((i-17)/4)}catch{throw new P}}static getVersionForNumber(i){if(i<1||i>40)throw new w;return et.VERSIONS[i-1]}static decodeVersionInformation(i){let l=Number.MAX_SAFE_INTEGER,d=0;for(let h=0;h<et.VERSION_DECODE_INFO.length;h++){const m=et.VERSION_DECODE_INFO[h];if(m===i)return et.getVersionForNumber(h+7);const g=pn.numBitsDiffering(i,m);g<l&&(d=h+7,l=g)}return l<=3?et.getVersionForNumber(d):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),l=new ee(i);l.setRegion(0,0,9,9),l.setRegion(i-8,0,8,9),l.setRegion(0,i-8,9,8);const d=this.alignmentPatternCenters.length;for(let h=0;h<d;h++){const m=this.alignmentPatternCenters[h]-2;for(let g=0;g<d;g++)h===0&&(g===0||g===d-1)||h===d-1&&g===0||l.setRegion(this.alignmentPatternCenters[g]-2,m,5,5)}return l.setRegion(6,9,1,i-17),l.setRegion(9,6,i-17,1),this.versionNumber>6&&(l.setRegion(i-11,0,3,6),l.setRegion(0,i-11,6,3)),l}toString(){return""+this.versionNumber}}et.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),et.VERSIONS=[new et(1,new Int32Array(0),new me(7,new Q(1,19)),new me(10,new Q(1,16)),new me(13,new Q(1,13)),new me(17,new Q(1,9))),new et(2,Int32Array.from([6,18]),new me(10,new Q(1,34)),new me(16,new Q(1,28)),new me(22,new Q(1,22)),new me(28,new Q(1,16))),new et(3,Int32Array.from([6,22]),new me(15,new Q(1,55)),new me(26,new Q(1,44)),new me(18,new Q(2,17)),new me(22,new Q(2,13))),new et(4,Int32Array.from([6,26]),new me(20,new Q(1,80)),new me(18,new Q(2,32)),new me(26,new Q(2,24)),new me(16,new Q(4,9))),new et(5,Int32Array.from([6,30]),new me(26,new Q(1,108)),new me(24,new Q(2,43)),new me(18,new Q(2,15),new Q(2,16)),new me(22,new Q(2,11),new Q(2,12))),new et(6,Int32Array.from([6,34]),new me(18,new Q(2,68)),new me(16,new Q(4,27)),new me(24,new Q(4,19)),new me(28,new Q(4,15))),new et(7,Int32Array.from([6,22,38]),new me(20,new Q(2,78)),new me(18,new Q(4,31)),new me(18,new Q(2,14),new Q(4,15)),new me(26,new Q(4,13),new Q(1,14))),new et(8,Int32Array.from([6,24,42]),new me(24,new Q(2,97)),new me(22,new Q(2,38),new Q(2,39)),new me(22,new Q(4,18),new Q(2,19)),new me(26,new Q(4,14),new Q(2,15))),new et(9,Int32Array.from([6,26,46]),new me(30,new Q(2,116)),new me(22,new Q(3,36),new Q(2,37)),new me(20,new Q(4,16),new Q(4,17)),new me(24,new Q(4,12),new Q(4,13))),new et(10,Int32Array.from([6,28,50]),new me(18,new Q(2,68),new Q(2,69)),new me(26,new Q(4,43),new Q(1,44)),new me(24,new Q(6,19),new Q(2,20)),new me(28,new Q(6,15),new Q(2,16))),new et(11,Int32Array.from([6,30,54]),new me(20,new Q(4,81)),new me(30,new Q(1,50),new Q(4,51)),new me(28,new Q(4,22),new Q(4,23)),new me(24,new Q(3,12),new Q(8,13))),new et(12,Int32Array.from([6,32,58]),new me(24,new Q(2,92),new Q(2,93)),new me(22,new Q(6,36),new Q(2,37)),new me(26,new Q(4,20),new Q(6,21)),new me(28,new Q(7,14),new Q(4,15))),new et(13,Int32Array.from([6,34,62]),new me(26,new Q(4,107)),new me(22,new Q(8,37),new Q(1,38)),new me(24,new Q(8,20),new Q(4,21)),new me(22,new Q(12,11),new Q(4,12))),new et(14,Int32Array.from([6,26,46,66]),new me(30,new Q(3,115),new Q(1,116)),new me(24,new Q(4,40),new Q(5,41)),new me(20,new Q(11,16),new Q(5,17)),new me(24,new Q(11,12),new Q(5,13))),new et(15,Int32Array.from([6,26,48,70]),new me(22,new Q(5,87),new Q(1,88)),new me(24,new Q(5,41),new Q(5,42)),new me(30,new Q(5,24),new Q(7,25)),new me(24,new Q(11,12),new Q(7,13))),new et(16,Int32Array.from([6,26,50,74]),new me(24,new Q(5,98),new Q(1,99)),new me(28,new Q(7,45),new Q(3,46)),new me(24,new Q(15,19),new Q(2,20)),new me(30,new Q(3,15),new Q(13,16))),new et(17,Int32Array.from([6,30,54,78]),new me(28,new Q(1,107),new Q(5,108)),new me(28,new Q(10,46),new Q(1,47)),new me(28,new Q(1,22),new Q(15,23)),new me(28,new Q(2,14),new Q(17,15))),new et(18,Int32Array.from([6,30,56,82]),new me(30,new Q(5,120),new Q(1,121)),new me(26,new Q(9,43),new Q(4,44)),new me(28,new Q(17,22),new Q(1,23)),new me(28,new Q(2,14),new Q(19,15))),new et(19,Int32Array.from([6,30,58,86]),new me(28,new Q(3,113),new Q(4,114)),new me(26,new Q(3,44),new Q(11,45)),new me(26,new Q(17,21),new Q(4,22)),new me(26,new Q(9,13),new Q(16,14))),new et(20,Int32Array.from([6,34,62,90]),new me(28,new Q(3,107),new Q(5,108)),new me(26,new Q(3,41),new Q(13,42)),new me(30,new Q(15,24),new Q(5,25)),new me(28,new Q(15,15),new Q(10,16))),new et(21,Int32Array.from([6,28,50,72,94]),new me(28,new Q(4,116),new Q(4,117)),new me(26,new Q(17,42)),new me(28,new Q(17,22),new Q(6,23)),new me(30,new Q(19,16),new Q(6,17))),new et(22,Int32Array.from([6,26,50,74,98]),new me(28,new Q(2,111),new Q(7,112)),new me(28,new Q(17,46)),new me(30,new Q(7,24),new Q(16,25)),new me(24,new Q(34,13))),new et(23,Int32Array.from([6,30,54,78,102]),new me(30,new Q(4,121),new Q(5,122)),new me(28,new Q(4,47),new Q(14,48)),new me(30,new Q(11,24),new Q(14,25)),new me(30,new Q(16,15),new Q(14,16))),new et(24,Int32Array.from([6,28,54,80,106]),new me(30,new Q(6,117),new Q(4,118)),new me(28,new Q(6,45),new Q(14,46)),new me(30,new Q(11,24),new Q(16,25)),new me(30,new Q(30,16),new Q(2,17))),new et(25,Int32Array.from([6,32,58,84,110]),new me(26,new Q(8,106),new Q(4,107)),new me(28,new Q(8,47),new Q(13,48)),new me(30,new Q(7,24),new Q(22,25)),new me(30,new Q(22,15),new Q(13,16))),new et(26,Int32Array.from([6,30,58,86,114]),new me(28,new Q(10,114),new Q(2,115)),new me(28,new Q(19,46),new Q(4,47)),new me(28,new Q(28,22),new Q(6,23)),new me(30,new Q(33,16),new Q(4,17))),new et(27,Int32Array.from([6,34,62,90,118]),new me(30,new Q(8,122),new Q(4,123)),new me(28,new Q(22,45),new Q(3,46)),new me(30,new Q(8,23),new Q(26,24)),new me(30,new Q(12,15),new Q(28,16))),new et(28,Int32Array.from([6,26,50,74,98,122]),new me(30,new Q(3,117),new Q(10,118)),new me(28,new Q(3,45),new Q(23,46)),new me(30,new Q(4,24),new Q(31,25)),new me(30,new Q(11,15),new Q(31,16))),new et(29,Int32Array.from([6,30,54,78,102,126]),new me(30,new Q(7,116),new Q(7,117)),new me(28,new Q(21,45),new Q(7,46)),new me(30,new Q(1,23),new Q(37,24)),new me(30,new Q(19,15),new Q(26,16))),new et(30,Int32Array.from([6,26,52,78,104,130]),new me(30,new Q(5,115),new Q(10,116)),new me(28,new Q(19,47),new Q(10,48)),new me(30,new Q(15,24),new Q(25,25)),new me(30,new Q(23,15),new Q(25,16))),new et(31,Int32Array.from([6,30,56,82,108,134]),new me(30,new Q(13,115),new Q(3,116)),new me(28,new Q(2,46),new Q(29,47)),new me(30,new Q(42,24),new Q(1,25)),new me(30,new Q(23,15),new Q(28,16))),new et(32,Int32Array.from([6,34,60,86,112,138]),new me(30,new Q(17,115)),new me(28,new Q(10,46),new Q(23,47)),new me(30,new Q(10,24),new Q(35,25)),new me(30,new Q(19,15),new Q(35,16))),new et(33,Int32Array.from([6,30,58,86,114,142]),new me(30,new Q(17,115),new Q(1,116)),new me(28,new Q(14,46),new Q(21,47)),new me(30,new Q(29,24),new Q(19,25)),new me(30,new Q(11,15),new Q(46,16))),new et(34,Int32Array.from([6,34,62,90,118,146]),new me(30,new Q(13,115),new Q(6,116)),new me(28,new Q(14,46),new Q(23,47)),new me(30,new Q(44,24),new Q(7,25)),new me(30,new Q(59,16),new Q(1,17))),new et(35,Int32Array.from([6,30,54,78,102,126,150]),new me(30,new Q(12,121),new Q(7,122)),new me(28,new Q(12,47),new Q(26,48)),new me(30,new Q(39,24),new Q(14,25)),new me(30,new Q(22,15),new Q(41,16))),new et(36,Int32Array.from([6,24,50,76,102,128,154]),new me(30,new Q(6,121),new Q(14,122)),new me(28,new Q(6,47),new Q(34,48)),new me(30,new Q(46,24),new Q(10,25)),new me(30,new Q(2,15),new Q(64,16))),new et(37,Int32Array.from([6,28,54,80,106,132,158]),new me(30,new Q(17,122),new Q(4,123)),new me(28,new Q(29,46),new Q(14,47)),new me(30,new Q(49,24),new Q(10,25)),new me(30,new Q(24,15),new Q(46,16))),new et(38,Int32Array.from([6,32,58,84,110,136,162]),new me(30,new Q(4,122),new Q(18,123)),new me(28,new Q(13,46),new Q(32,47)),new me(30,new Q(48,24),new Q(14,25)),new me(30,new Q(42,15),new Q(32,16))),new et(39,Int32Array.from([6,26,54,82,110,138,166]),new me(30,new Q(20,117),new Q(4,118)),new me(28,new Q(40,47),new Q(7,48)),new me(30,new Q(43,24),new Q(22,25)),new me(30,new Q(10,15),new Q(67,16))),new et(40,Int32Array.from([6,30,58,86,114,142,170]),new me(30,new Q(19,118),new Q(6,119)),new me(28,new Q(18,47),new Q(31,48)),new me(30,new Q(34,24),new Q(34,25)),new me(30,new Q(20,15),new Q(61,16)))];var Xr;(function(F){F[F.DATA_MASK_000=0]="DATA_MASK_000",F[F.DATA_MASK_001=1]="DATA_MASK_001",F[F.DATA_MASK_010=2]="DATA_MASK_010",F[F.DATA_MASK_011=3]="DATA_MASK_011",F[F.DATA_MASK_100=4]="DATA_MASK_100",F[F.DATA_MASK_101=5]="DATA_MASK_101",F[F.DATA_MASK_110=6]="DATA_MASK_110",F[F.DATA_MASK_111=7]="DATA_MASK_111"})(Xr||(Xr={}));class vs{constructor(i,l){this.value=i,this.isMasked=l}unmaskBitMatrix(i,l){for(let d=0;d<l;d++)for(let h=0;h<l;h++)this.isMasked(d,h)&&i.flip(h,d)}}vs.values=new Map([[Xr.DATA_MASK_000,new vs(Xr.DATA_MASK_000,(F,i)=>(F+i&1)===0)],[Xr.DATA_MASK_001,new vs(Xr.DATA_MASK_001,(F,i)=>(F&1)===0)],[Xr.DATA_MASK_010,new vs(Xr.DATA_MASK_010,(F,i)=>i%3===0)],[Xr.DATA_MASK_011,new vs(Xr.DATA_MASK_011,(F,i)=>(F+i)%3===0)],[Xr.DATA_MASK_100,new vs(Xr.DATA_MASK_100,(F,i)=>(Math.floor(F/2)+Math.floor(i/3)&1)===0)],[Xr.DATA_MASK_101,new vs(Xr.DATA_MASK_101,(F,i)=>F*i%6===0)],[Xr.DATA_MASK_110,new vs(Xr.DATA_MASK_110,(F,i)=>F*i%6<3)],[Xr.DATA_MASK_111,new vs(Xr.DATA_MASK_111,(F,i)=>(F+i+F*i%3&1)===0)]]);class Fk{constructor(i){const l=i.getHeight();if(l<21||(l&3)!==1)throw new P;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let m=0;m<6;m++)i=this.copyBit(m,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let m=5;m>=0;m--)i=this.copyBit(8,m,i);const l=this.bitMatrix.getHeight();let d=0;const h=l-7;for(let m=l-1;m>=h;m--)d=this.copyBit(8,m,d);for(let m=l-8;m<l;m++)d=this.copyBit(m,8,d);if(this.parsedFormatInfo=pn.decodeFormatInformation(i,d),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new P}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const i=this.bitMatrix.getHeight(),l=Math.floor((i-17)/4);if(l<=6)return et.getVersionForNumber(l);let d=0;const h=i-11;for(let g=5;g>=0;g--)for(let y=i-9;y>=h;y--)d=this.copyBit(y,g,d);let m=et.decodeVersionInformation(d);if(m!==null&&m.getDimensionForVersion()===i)return this.parsedVersion=m,m;d=0;for(let g=5;g>=0;g--)for(let y=i-9;y>=h;y--)d=this.copyBit(g,y,d);if(m=et.decodeVersionInformation(d),m!==null&&m.getDimensionForVersion()===i)return this.parsedVersion=m,m;throw new P}copyBit(i,l,d){return(this.isMirror?this.bitMatrix.get(l,i):this.bitMatrix.get(i,l))?d<<1|1:d<<1}readCodewords(){const i=this.readFormatInformation(),l=this.readVersion(),d=vs.values.get(i.getDataMask()),h=this.bitMatrix.getHeight();d.unmaskBitMatrix(this.bitMatrix,h);const m=l.buildFunctionPattern();let g=!0;const y=new Uint8Array(l.getTotalCodewords());let A=0,I=0,D=0;for(let B=h-1;B>0;B-=2){B===6&&B--;for(let V=0;V<h;V++){const Z=g?h-1-V:V;for(let oe=0;oe<2;oe++)m.get(B-oe,Z)||(D++,I<<=1,this.bitMatrix.get(B-oe,Z)&&(I|=1),D===8&&(y[A++]=I,D=0,I=0))}g=!g}if(A!==l.getTotalCodewords())throw new P;return y}remask(){if(this.parsedFormatInfo===null)return;const i=vs.values[this.parsedFormatInfo.getDataMask()],l=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,l)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let l=0,d=i.getWidth();l<d;l++)for(let h=l+1,m=i.getHeight();h<m;h++)i.get(l,h)!==i.get(h,l)&&(i.flip(h,l),i.flip(l,h))}}class _p{constructor(i,l){this.numDataCodewords=i,this.codewords=l}static getDataBlocks(i,l,d){if(i.length!==l.getTotalCodewords())throw new w;const h=l.getECBlocksForLevel(d);let m=0;const g=h.getECBlocks();for(const oe of g)m+=oe.getCount();const y=new Array(m);let A=0;for(const oe of g)for(let le=0;le<oe.getCount();le++){const fe=oe.getDataCodewords(),ve=h.getECCodewordsPerBlock()+fe;y[A++]=new _p(fe,new Uint8Array(ve))}const I=y[0].codewords.length;let D=y.length-1;for(;D>=0&&y[D].codewords.length!==I;)D--;D++;const B=I-h.getECCodewordsPerBlock();let V=0;for(let oe=0;oe<B;oe++)for(let le=0;le<A;le++)y[le].codewords[oe]=i[V++];for(let oe=D;oe<A;oe++)y[oe].codewords[B]=i[V++];const Z=y[0].codewords.length;for(let oe=B;oe<Z;oe++)for(let le=0;le<A;le++){const fe=le<D?oe:oe+1;y[le].codewords[fe]=i[V++]}return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var ws;(function(F){F[F.TERMINATOR=0]="TERMINATOR",F[F.NUMERIC=1]="NUMERIC",F[F.ALPHANUMERIC=2]="ALPHANUMERIC",F[F.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",F[F.BYTE=4]="BYTE",F[F.ECI=5]="ECI",F[F.KANJI=6]="KANJI",F[F.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",F[F.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",F[F.HANZI=9]="HANZI"})(ws||(ws={}));class rt{constructor(i,l,d,h){this.value=i,this.stringValue=l,this.characterCountBitsForVersions=d,this.bits=h,rt.FOR_BITS.set(h,this),rt.FOR_VALUE.set(i,this)}static forBits(i){const l=rt.FOR_BITS.get(i);if(l===void 0)throw new w;return l}getCharacterCountBits(i){const l=i.getVersionNumber();let d;return l<=9?d=0:l<=26?d=1:d=2,this.characterCountBitsForVersions[d]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof rt))return!1;const l=i;return this.value===l.value}toString(){return this.stringValue}}rt.FOR_BITS=new Map,rt.FOR_VALUE=new Map,rt.TERMINATOR=new rt(ws.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),rt.NUMERIC=new rt(ws.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),rt.ALPHANUMERIC=new rt(ws.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),rt.STRUCTURED_APPEND=new rt(ws.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),rt.BYTE=new rt(ws.BYTE,"BYTE",Int32Array.from([8,16,16]),4),rt.ECI=new rt(ws.ECI,"ECI",Int32Array.from([0,0,0]),7),rt.KANJI=new rt(ws.KANJI,"KANJI",Int32Array.from([8,10,12]),8),rt.FNC1_FIRST_POSITION=new rt(ws.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),rt.FNC1_SECOND_POSITION=new rt(ws.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),rt.HANZI=new rt(ws.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class pr{static decode(i,l,d,h){const m=new bp(i);let g=new q;const y=new Array;let A=-1,I=-1;try{let D=null,B=!1,V;do{if(m.available()<4)V=rt.TERMINATOR;else{const Z=m.readBits(4);V=rt.forBits(Z)}switch(V){case rt.TERMINATOR:break;case rt.FNC1_FIRST_POSITION:case rt.FNC1_SECOND_POSITION:B=!0;break;case rt.STRUCTURED_APPEND:if(m.available()<16)throw new P;A=m.readBits(8),I=m.readBits(8);break;case rt.ECI:const Z=pr.parseECIValue(m);if(D=R.getCharacterSetECIByValue(Z),D===null)throw new P;break;case rt.HANZI:const oe=m.readBits(4),le=m.readBits(V.getCharacterCountBits(l));oe===pr.GB2312_SUBSET&&pr.decodeHanziSegment(m,g,le);break;default:const fe=m.readBits(V.getCharacterCountBits(l));switch(V){case rt.NUMERIC:pr.decodeNumericSegment(m,g,fe);break;case rt.ALPHANUMERIC:pr.decodeAlphanumericSegment(m,g,fe,B);break;case rt.BYTE:pr.decodeByteSegment(m,g,fe,D,y,h);break;case rt.KANJI:pr.decodeKanjiSegment(m,g,fe);break;default:throw new P}break}}while(V!==rt.TERMINATOR)}catch{throw new P}return new Ae(i,g.toString(),y.length===0?null:y,d===null?null:d.toString(),A,I)}static decodeHanziSegment(i,l,d){if(d*13>i.available())throw new P;const h=new Uint8Array(2*d);let m=0;for(;d>0;){const g=i.readBits(13);let y=g/96<<8&4294967295|g%96;y<959?y+=41377:y+=42657,h[m]=y>>8&255,h[m+1]=y&255,m+=2,d--}try{l.append(Y.decode(h,z.GB2312))}catch(g){throw new P(g)}}static decodeKanjiSegment(i,l,d){if(d*13>i.available())throw new P;const h=new Uint8Array(2*d);let m=0;for(;d>0;){const g=i.readBits(13);let y=g/192<<8&4294967295|g%192;y<7936?y+=33088:y+=49472,h[m]=y>>8,h[m+1]=y,m+=2,d--}try{l.append(Y.decode(h,z.SHIFT_JIS))}catch(g){throw new P(g)}}static decodeByteSegment(i,l,d,h,m,g){if(8*d>i.available())throw new P;const y=new Uint8Array(d);for(let I=0;I<d;I++)y[I]=i.readBits(8);let A;h===null?A=z.guessEncoding(y,g):A=h.getName();try{l.append(Y.decode(y,A))}catch(I){throw new P(I)}m.push(y)}static toAlphaNumericChar(i){if(i>=pr.ALPHANUMERIC_CHARS.length)throw new P;return pr.ALPHANUMERIC_CHARS[i]}static decodeAlphanumericSegment(i,l,d,h){const m=l.length();for(;d>1;){if(i.available()<11)throw new P;const g=i.readBits(11);l.append(pr.toAlphaNumericChar(Math.floor(g/45))),l.append(pr.toAlphaNumericChar(g%45)),d-=2}if(d===1){if(i.available()<6)throw new P;l.append(pr.toAlphaNumericChar(i.readBits(6)))}if(h)for(let g=m;g<l.length();g++)l.charAt(g)==="%"&&(g<l.length()-1&&l.charAt(g+1)==="%"?l.deleteCharAt(g+1):l.setCharAt(g,""))}static decodeNumericSegment(i,l,d){for(;d>=3;){if(i.available()<10)throw new P;const h=i.readBits(10);if(h>=1e3)throw new P;l.append(pr.toAlphaNumericChar(Math.floor(h/100))),l.append(pr.toAlphaNumericChar(Math.floor(h/10)%10)),l.append(pr.toAlphaNumericChar(h%10)),d-=3}if(d===2){if(i.available()<7)throw new P;const h=i.readBits(7);if(h>=100)throw new P;l.append(pr.toAlphaNumericChar(Math.floor(h/10))),l.append(pr.toAlphaNumericChar(h%10))}else if(d===1){if(i.available()<4)throw new P;const h=i.readBits(4);if(h>=10)throw new P;l.append(pr.toAlphaNumericChar(h))}}static parseECIValue(i){const l=i.readBits(8);if(!(l&128))return l&127;if((l&192)===128){const d=i.readBits(8);return(l&63)<<8&4294967295|d}if((l&224)===192){const d=i.readBits(16);return(l&31)<<16&4294967295|d}throw new P}}pr.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",pr.GB2312_SUBSET=1;class $v{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;const l=i[0];i[0]=i[2],i[2]=l}}class Bk{constructor(){this.rsDecoder=new Ze(ue.QR_CODE_FIELD_256)}decodeBooleanArray(i,l){return this.decodeBitMatrix(ee.parseFromBooleanArray(i),l)}decodeBitMatrix(i,l){const d=new Fk(i);let h=null;try{return this.decodeBitMatrixParser(d,l)}catch(m){h=m}try{d.remask(),d.setMirror(!0),d.readVersion(),d.readFormatInformation(),d.mirror();const m=this.decodeBitMatrixParser(d,l);return m.setOther(new $v(!0)),m}catch(m){throw h!==null?h:m}}decodeBitMatrixParser(i,l){const d=i.readVersion(),h=i.readFormatInformation().getErrorCorrectionLevel(),m=i.readCodewords(),g=_p.getDataBlocks(m,d,h);let y=0;for(const D of g)y+=D.getNumDataCodewords();const A=new Uint8Array(y);let I=0;for(const D of g){const B=D.getCodewords(),V=D.getNumDataCodewords();this.correctErrors(B,V);for(let Z=0;Z<V;Z++)A[I++]=B[Z]}return pr.decode(A,d,h,l)}correctErrors(i,l){const d=new Int32Array(i);try{this.rsDecoder.decode(d,i.length-l)}catch{throw new j}for(let h=0;h<l;h++)i[h]=d[h]}}class Np extends pe{constructor(i,l,d){super(i,l),this.estimatedModuleSize=d}aboutEquals(i,l,d){if(Math.abs(l-this.getY())<=i&&Math.abs(d-this.getX())<=i){const h=Math.abs(i-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(i,l,d){const h=(this.getX()+l)/2,m=(this.getY()+i)/2,g=(this.estimatedModuleSize+d)/2;return new Np(h,m,g)}}class th{constructor(i,l,d,h,m,g,y){this.image=i,this.startX=l,this.startY=d,this.width=h,this.height=m,this.moduleSize=g,this.resultPointCallback=y,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,l=this.height,d=this.width,h=i+d,m=this.startY+l/2,g=new Int32Array(3),y=this.image;for(let A=0;A<l;A++){const I=m+(A&1?-Math.floor((A+1)/2):Math.floor((A+1)/2));g[0]=0,g[1]=0,g[2]=0;let D=i;for(;D<h&&!y.get(D,I);)D++;let B=0;for(;D<h;){if(y.get(D,I))if(B===1)g[1]++;else if(B===2){if(this.foundPatternCross(g)){const V=this.handlePossibleCenter(g,I,D);if(V!==null)return V}g[0]=g[2],g[1]=1,g[2]=0,B=1}else g[++B]++;else B===1&&B++,g[B]++;D++}if(this.foundPatternCross(g)){const V=this.handlePossibleCenter(g,I,h);if(V!==null)return V}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new H}static centerFromEnd(i,l){return l-i[2]-i[1]/2}foundPatternCross(i){const l=this.moduleSize,d=l/2;for(let h=0;h<3;h++)if(Math.abs(l-i[h])>=d)return!1;return!0}crossCheckVertical(i,l,d,h){const m=this.image,g=m.getHeight(),y=this.crossCheckStateCount;y[0]=0,y[1]=0,y[2]=0;let A=i;for(;A>=0&&m.get(l,A)&&y[1]<=d;)y[1]++,A--;if(A<0||y[1]>d)return NaN;for(;A>=0&&!m.get(l,A)&&y[0]<=d;)y[0]++,A--;if(y[0]>d)return NaN;for(A=i+1;A<g&&m.get(l,A)&&y[1]<=d;)y[1]++,A++;if(A===g||y[1]>d)return NaN;for(;A<g&&!m.get(l,A)&&y[2]<=d;)y[2]++,A++;if(y[2]>d)return NaN;const I=y[0]+y[1]+y[2];return 5*Math.abs(I-h)>=2*h?NaN:this.foundPatternCross(y)?th.centerFromEnd(y,A):NaN}handlePossibleCenter(i,l,d){const h=i[0]+i[1]+i[2],m=th.centerFromEnd(i,d),g=this.crossCheckVertical(l,m,2*i[1],h);if(!isNaN(g)){const y=(i[0]+i[1]+i[2])/3;for(const I of this.possibleCenters)if(I.aboutEquals(y,g,m))return I.combineEstimate(g,m,y);const A=new Np(m,g,y);this.possibleCenters.push(A),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(A)}return null}}class jp extends pe{constructor(i,l,d,h){super(i,l),this.estimatedModuleSize=d,this.count=h,h===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,l,d){if(Math.abs(l-this.getY())<=i&&Math.abs(d-this.getX())<=i){const h=Math.abs(i-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(i,l,d){const h=this.count+1,m=(this.count*this.getX()+l)/h,g=(this.count*this.getY()+i)/h,y=(this.count*this.estimatedModuleSize+d)/h;return new jp(m,g,y,h)}}class zk{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Kr{constructor(i,l){this.image=i,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=l}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(i){const l=i!=null&&i.get(L.TRY_HARDER)!==void 0,d=i!=null&&i.get(L.PURE_BARCODE)!==void 0,h=this.image,m=h.getHeight(),g=h.getWidth();let y=Math.floor(3*m/(4*Kr.MAX_MODULES));(y<Kr.MIN_SKIP||l)&&(y=Kr.MIN_SKIP);let A=!1;const I=new Int32Array(5);for(let B=y-1;B<m&&!A;B+=y){I[0]=0,I[1]=0,I[2]=0,I[3]=0,I[4]=0;let V=0;for(let Z=0;Z<g;Z++)if(h.get(Z,B))(V&1)===1&&V++,I[V]++;else if(V&1)I[V]++;else if(V===4)if(Kr.foundPatternCross(I)){if(this.handlePossibleCenter(I,B,Z,d)===!0)if(y=2,this.hasSkipped===!0)A=this.haveMultiplyConfirmedCenters();else{const le=this.findRowSkip();le>I[2]&&(B+=le-I[2]-y,Z=g-1)}else{I[0]=I[2],I[1]=I[3],I[2]=I[4],I[3]=1,I[4]=0,V=3;continue}V=0,I[0]=0,I[1]=0,I[2]=0,I[3]=0,I[4]=0}else I[0]=I[2],I[1]=I[3],I[2]=I[4],I[3]=1,I[4]=0,V=3;else I[++V]++;Kr.foundPatternCross(I)&&this.handlePossibleCenter(I,B,g,d)===!0&&(y=I[0],this.hasSkipped&&(A=this.haveMultiplyConfirmedCenters()))}const D=this.selectBestPatterns();return pe.orderBestPatterns(D),new zk(D)}static centerFromEnd(i,l){return l-i[4]-i[3]-i[2]/2}static foundPatternCross(i){let l=0;for(let m=0;m<5;m++){const g=i[m];if(g===0)return!1;l+=g}if(l<7)return!1;const d=l/7,h=d/2;return Math.abs(d-i[0])<h&&Math.abs(d-i[1])<h&&Math.abs(3*d-i[2])<3*h&&Math.abs(d-i[3])<h&&Math.abs(d-i[4])<h}getCrossCheckStateCount(){const i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i}crossCheckDiagonal(i,l,d,h){const m=this.getCrossCheckStateCount();let g=0;const y=this.image;for(;i>=g&&l>=g&&y.get(l-g,i-g);)m[2]++,g++;if(i<g||l<g)return!1;for(;i>=g&&l>=g&&!y.get(l-g,i-g)&&m[1]<=d;)m[1]++,g++;if(i<g||l<g||m[1]>d)return!1;for(;i>=g&&l>=g&&y.get(l-g,i-g)&&m[0]<=d;)m[0]++,g++;if(m[0]>d)return!1;const A=y.getHeight(),I=y.getWidth();for(g=1;i+g<A&&l+g<I&&y.get(l+g,i+g);)m[2]++,g++;if(i+g>=A||l+g>=I)return!1;for(;i+g<A&&l+g<I&&!y.get(l+g,i+g)&&m[3]<d;)m[3]++,g++;if(i+g>=A||l+g>=I||m[3]>=d)return!1;for(;i+g<A&&l+g<I&&y.get(l+g,i+g)&&m[4]<d;)m[4]++,g++;if(m[4]>=d)return!1;const D=m[0]+m[1]+m[2]+m[3]+m[4];return Math.abs(D-h)<2*h&&Kr.foundPatternCross(m)}crossCheckVertical(i,l,d,h){const m=this.image,g=m.getHeight(),y=this.getCrossCheckStateCount();let A=i;for(;A>=0&&m.get(l,A);)y[2]++,A--;if(A<0)return NaN;for(;A>=0&&!m.get(l,A)&&y[1]<=d;)y[1]++,A--;if(A<0||y[1]>d)return NaN;for(;A>=0&&m.get(l,A)&&y[0]<=d;)y[0]++,A--;if(y[0]>d)return NaN;for(A=i+1;A<g&&m.get(l,A);)y[2]++,A++;if(A===g)return NaN;for(;A<g&&!m.get(l,A)&&y[3]<d;)y[3]++,A++;if(A===g||y[3]>=d)return NaN;for(;A<g&&m.get(l,A)&&y[4]<d;)y[4]++,A++;if(y[4]>=d)return NaN;const I=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(I-h)>=2*h?NaN:Kr.foundPatternCross(y)?Kr.centerFromEnd(y,A):NaN}crossCheckHorizontal(i,l,d,h){const m=this.image,g=m.getWidth(),y=this.getCrossCheckStateCount();let A=i;for(;A>=0&&m.get(A,l);)y[2]++,A--;if(A<0)return NaN;for(;A>=0&&!m.get(A,l)&&y[1]<=d;)y[1]++,A--;if(A<0||y[1]>d)return NaN;for(;A>=0&&m.get(A,l)&&y[0]<=d;)y[0]++,A--;if(y[0]>d)return NaN;for(A=i+1;A<g&&m.get(A,l);)y[2]++,A++;if(A===g)return NaN;for(;A<g&&!m.get(A,l)&&y[3]<d;)y[3]++,A++;if(A===g||y[3]>=d)return NaN;for(;A<g&&m.get(A,l)&&y[4]<d;)y[4]++,A++;if(y[4]>=d)return NaN;const I=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(I-h)>=h?NaN:Kr.foundPatternCross(y)?Kr.centerFromEnd(y,A):NaN}handlePossibleCenter(i,l,d,h){const m=i[0]+i[1]+i[2]+i[3]+i[4];let g=Kr.centerFromEnd(i,d),y=this.crossCheckVertical(l,Math.floor(g),i[2],m);if(!isNaN(y)&&(g=this.crossCheckHorizontal(Math.floor(g),Math.floor(y),i[2],m),!isNaN(g)&&(!h||this.crossCheckDiagonal(Math.floor(y),Math.floor(g),i[2],m)))){const A=m/7;let I=!1;const D=this.possibleCenters;for(let B=0,V=D.length;B<V;B++){const Z=D[B];if(Z.aboutEquals(A,y,g)){D[B]=Z.combineEstimate(y,g,A),I=!0;break}}if(!I){const B=new jp(g,y,A);D.push(B),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(B)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let l=null;for(const d of this.possibleCenters)if(d.getCount()>=Kr.CENTER_QUORUM)if(l==null)l=d;else return this.hasSkipped=!0,Math.floor((Math.abs(l.getX()-d.getX())-Math.abs(l.getY()-d.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let i=0,l=0;const d=this.possibleCenters.length;for(const g of this.possibleCenters)g.getCount()>=Kr.CENTER_QUORUM&&(i++,l+=g.getEstimatedModuleSize());if(i<3)return!1;const h=l/d;let m=0;for(const g of this.possibleCenters)m+=Math.abs(g.getEstimatedModuleSize()-h);return m<=.05*l}selectBestPatterns(){const i=this.possibleCenters.length;if(i<3)throw new H;const l=this.possibleCenters;let d;if(i>3){let h=0,m=0;for(const A of this.possibleCenters){const I=A.getEstimatedModuleSize();h+=I,m+=I*I}d=h/i;let g=Math.sqrt(m/i-d*d);l.sort((A,I)=>{const D=Math.abs(I.getEstimatedModuleSize()-d),B=Math.abs(A.getEstimatedModuleSize()-d);return D<B?-1:D>B?1:0});const y=Math.max(.2*d,g);for(let A=0;A<l.length&&l.length>3;A++){const I=l[A];Math.abs(I.getEstimatedModuleSize()-d)>y&&(l.splice(A,1),A--)}}if(l.length>3){let h=0;for(const m of l)h+=m.getEstimatedModuleSize();d=h/l.length,l.sort((m,g)=>{if(g.getCount()===m.getCount()){const y=Math.abs(g.getEstimatedModuleSize()-d),A=Math.abs(m.getEstimatedModuleSize()-d);return y<A?1:y>A?-1:0}else return g.getCount()-m.getCount()}),l.splice(3)}return[l[0],l[1],l[2]]}}Kr.CENTER_QUORUM=2,Kr.MIN_SKIP=3,Kr.MAX_MODULES=57;class Qc{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(L.NEED_RESULT_POINT_CALLBACK);const d=new Kr(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(d)}processFinderPatternInfo(i){const l=i.getTopLeft(),d=i.getTopRight(),h=i.getBottomLeft(),m=this.calculateModuleSize(l,d,h);if(m<1)throw new H("No pattern found in proccess finder.");const g=Qc.computeDimension(l,d,h,m),y=et.getProvisionalVersionForDimension(g),A=y.getDimensionForVersion()-7;let I=null;if(y.getAlignmentPatternCenters().length>0){const Z=d.getX()-l.getX()+h.getX(),oe=d.getY()-l.getY()+h.getY(),le=1-3/A,fe=Math.floor(l.getX()+le*(Z-l.getX())),ve=Math.floor(l.getY()+le*(oe-l.getY()));for(let De=4;De<=16;De<<=1)try{I=this.findAlignmentInRegion(m,fe,ve,De);break}catch(Me){if(!(Me instanceof H))throw Me}}const D=Qc.createTransform(l,d,h,I,g),B=Qc.sampleGrid(this.image,D,g);let V;return I===null?V=[h,l,d]:V=[h,l,d,I],new Je(B,V)}static createTransform(i,l,d,h,m){const g=m-3.5;let y,A,I,D;return h!==null?(y=h.getX(),A=h.getY(),I=g-3,D=I):(y=l.getX()-i.getX()+d.getX(),A=l.getY()-i.getY()+d.getY(),I=g,D=g),Nt.quadrilateralToQuadrilateral(3.5,3.5,g,3.5,I,D,3.5,g,i.getX(),i.getY(),l.getX(),l.getY(),y,A,d.getX(),d.getY())}static sampleGrid(i,l,d){return At.getInstance().sampleGridWithTransform(i,d,d,l)}static computeDimension(i,l,d,h){const m=He.round(pe.distance(i,l)/h),g=He.round(pe.distance(i,d)/h);let y=Math.floor((m+g)/2)+7;switch(y&3){case 0:y++;break;case 2:y--;break;case 3:throw new H("Dimensions could be not found.")}return y}calculateModuleSize(i,l,d){return(this.calculateModuleSizeOneWay(i,l)+this.calculateModuleSizeOneWay(i,d))/2}calculateModuleSizeOneWay(i,l){const d=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(l.getX()),Math.floor(l.getY())),h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(l.getX()),Math.floor(l.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(d)?h/7:isNaN(h)?d/7:(d+h)/14}sizeOfBlackWhiteBlackRunBothWays(i,l,d,h){let m=this.sizeOfBlackWhiteBlackRun(i,l,d,h),g=1,y=i-(d-i);y<0?(g=i/(i-y),y=0):y>=this.image.getWidth()&&(g=(this.image.getWidth()-1-i)/(y-i),y=this.image.getWidth()-1);let A=Math.floor(l-(h-l)*g);return g=1,A<0?(g=l/(l-A),A=0):A>=this.image.getHeight()&&(g=(this.image.getHeight()-1-l)/(A-l),A=this.image.getHeight()-1),y=Math.floor(i+(y-i)*g),m+=this.sizeOfBlackWhiteBlackRun(i,l,y,A),m-1}sizeOfBlackWhiteBlackRun(i,l,d,h){const m=Math.abs(h-l)>Math.abs(d-i);if(m){let Z=i;i=l,l=Z,Z=d,d=h,h=Z}const g=Math.abs(d-i),y=Math.abs(h-l);let A=-g/2;const I=i<d?1:-1,D=l<h?1:-1;let B=0;const V=d+I;for(let Z=i,oe=l;Z!==V;Z+=I){const le=m?oe:Z,fe=m?Z:oe;if(B===1===this.image.get(le,fe)){if(B===2)return He.distance(Z,oe,i,l);B++}if(A+=y,A>0){if(oe===h)break;oe+=D,A-=g}}return B===2?He.distance(d+I,h,i,l):NaN}findAlignmentInRegion(i,l,d,h){const m=Math.floor(h*i),g=Math.max(0,l-m),y=Math.min(this.image.getWidth()-1,l+m);if(y-g<i*3)throw new H("Alignment top exceeds estimated module size.");const A=Math.max(0,d-m),I=Math.min(this.image.getHeight()-1,d+m);if(I-A<i*3)throw new H("Alignment bottom exceeds estimated module size.");return new th(this.image,g,A,y-g,I-A,i,this.resultPointCallback).find()}}class ii{constructor(){this.decoder=new Bk}getDecoder(){return this.decoder}decode(i,l){let d,h;if(l!=null&&l.get(L.PURE_BARCODE)!==void 0){const A=ii.extractPureBits(i.getBlackMatrix());d=this.decoder.decodeBitMatrix(A,l),h=ii.NO_POINTS}else{const A=new Qc(i.getBlackMatrix()).detect(l);d=this.decoder.decodeBitMatrix(A.getBits(),l),h=A.getPoints()}d.getOther()instanceof $v&&d.getOther().applyMirroredCorrection(h);const m=new G(d.getText(),d.getRawBytes(),void 0,h,ce.QR_CODE,void 0),g=d.getByteSegments();g!==null&&m.putMetadata(he.BYTE_SEGMENTS,g);const y=d.getECLevel();return y!==null&&m.putMetadata(he.ERROR_CORRECTION_LEVEL,y),d.hasStructuredAppend()&&(m.putMetadata(he.STRUCTURED_APPEND_SEQUENCE,d.getStructuredAppendSequenceNumber()),m.putMetadata(he.STRUCTURED_APPEND_PARITY,d.getStructuredAppendParity())),m}reset(){}static extractPureBits(i){const l=i.getTopLeftOnBit(),d=i.getBottomRightOnBit();if(l===null||d===null)throw new H;const h=this.moduleSize(l,i);let m=l[1],g=d[1],y=l[0],A=d[0];if(y>=A||m>=g)throw new H;if(g-m!==A-y&&(A=y+(g-m),A>=i.getWidth()))throw new H;const I=Math.round((A-y+1)/h),D=Math.round((g-m+1)/h);if(I<=0||D<=0)throw new H;if(D!==I)throw new H;const B=Math.floor(h/2);m+=B,y+=B;const V=y+Math.floor((I-1)*h)-A;if(V>0){if(V>B)throw new H;y-=V}const Z=m+Math.floor((D-1)*h)-g;if(Z>0){if(Z>B)throw new H;m-=Z}const oe=new ee(I,D);for(let le=0;le<D;le++){const fe=m+Math.floor(le*h);for(let ve=0;ve<I;ve++)i.get(y+Math.floor(ve*h),fe)&&oe.set(ve,le)}return oe}static moduleSize(i,l){const d=l.getHeight(),h=l.getWidth();let m=i[0],g=i[1],y=!0,A=0;for(;m<h&&g<d;){if(y!==l.get(m,g)){if(++A===5)break;y=!y}m++,g++}if(m===h||g===d)throw new H;return(m-i[0])/7}}ii.NO_POINTS=new Array;class ot{PDF417Common(){}static getBitCountSum(i){return He.sum(i)}static toIntArray(i){if(i==null||!i.length)return ot.EMPTY_INT_ARRAY;const l=new Int32Array(i.length);let d=0;for(const h of i)l[d++]=h;return l}static getCodeword(i){const l=S.binarySearch(ot.SYMBOL_TABLE,i&262143);return l<0?-1:(ot.CODEWORD_TABLE[l]-1)%ot.NUMBER_OF_CODEWORDS}}ot.NUMBER_OF_CODEWORDS=929,ot.MAX_CODEWORDS_IN_BARCODE=ot.NUMBER_OF_CODEWORDS-1,ot.MIN_ROWS_IN_BARCODE=3,ot.MAX_ROWS_IN_BARCODE=90,ot.MODULES_IN_CODEWORD=17,ot.MODULES_IN_STOP_PATTERN=18,ot.BARS_IN_MODULE=8,ot.EMPTY_INT_ARRAY=new Int32Array([]),ot.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ot.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Uk{constructor(i,l){this.bits=i,this.points=l}getBits(){return this.bits}getPoints(){return this.points}}class wt{static detectMultiple(i,l,d){let h=i.getBlackMatrix(),m=wt.detect(d,h);return m.length||(h=h.clone(),h.rotate180(),m=wt.detect(d,h)),new Uk(h,m)}static detect(i,l){const d=new Array;let h=0,m=0,g=!1;for(;h<l.getHeight();){const y=wt.findVertices(l,h,m);if(y[0]==null&&y[3]==null){if(!g)break;g=!1,m=0;for(const A of d)A[1]!=null&&(h=Math.trunc(Math.max(h,A[1].getY()))),A[3]!=null&&(h=Math.max(h,Math.trunc(A[3].getY())));h+=wt.ROW_STEP;continue}if(g=!0,d.push(y),!i)break;y[2]!=null?(m=Math.trunc(y[2].getX()),h=Math.trunc(y[2].getY())):(m=Math.trunc(y[4].getX()),h=Math.trunc(y[4].getY()))}return d}static findVertices(i,l,d){const h=i.getHeight(),m=i.getWidth(),g=new Array(8);return wt.copyToResult(g,wt.findRowsWithPattern(i,h,m,l,d,wt.START_PATTERN),wt.INDEXES_START_PATTERN),g[4]!=null&&(d=Math.trunc(g[4].getX()),l=Math.trunc(g[4].getY())),wt.copyToResult(g,wt.findRowsWithPattern(i,h,m,l,d,wt.STOP_PATTERN),wt.INDEXES_STOP_PATTERN),g}static copyToResult(i,l,d){for(let h=0;h<d.length;h++)i[d[h]]=l[h]}static findRowsWithPattern(i,l,d,h,m,g){const y=new Array(4);let A=!1;const I=new Int32Array(g.length);for(;h<l;h+=wt.ROW_STEP){let B=wt.findGuardPattern(i,m,h,d,!1,g,I);if(B!=null){for(;h>0;){const V=wt.findGuardPattern(i,m,--h,d,!1,g,I);if(V!=null)B=V;else{h++;break}}y[0]=new pe(B[0],h),y[1]=new pe(B[1],h),A=!0;break}}let D=h+1;if(A){let B=0,V=Int32Array.from([Math.trunc(y[0].getX()),Math.trunc(y[1].getX())]);for(;D<l;D++){const Z=wt.findGuardPattern(i,V[0],D,d,!1,g,I);if(Z!=null&&Math.abs(V[0]-Z[0])<wt.MAX_PATTERN_DRIFT&&Math.abs(V[1]-Z[1])<wt.MAX_PATTERN_DRIFT)V=Z,B=0;else{if(B>wt.SKIPPED_ROW_COUNT_MAX)break;B++}}D-=B+1,y[2]=new pe(V[0],D),y[3]=new pe(V[1],D)}return D-h<wt.BARCODE_MIN_HEIGHT&&S.fill(y,null),y}static findGuardPattern(i,l,d,h,m,g,y){S.fillWithin(y,0,y.length,0);let A=l,I=0;for(;i.get(A,d)&&A>0&&I++<wt.MAX_PIXEL_DRIFT;)A--;let D=A,B=0,V=g.length;for(let Z=m;D<h;D++)if(i.get(D,d)!==Z)y[B]++;else{if(B===V-1){if(wt.patternMatchVariance(y,g,wt.MAX_INDIVIDUAL_VARIANCE)<wt.MAX_AVG_VARIANCE)return new Int32Array([A,D]);A+=y[0]+y[1],C.arraycopy(y,2,y,0,B-1),y[B-1]=0,y[B]=0,B--}else B++;y[B]=1,Z=!Z}return B===V-1&&wt.patternMatchVariance(y,g,wt.MAX_INDIVIDUAL_VARIANCE)<wt.MAX_AVG_VARIANCE?new Int32Array([A,D-1]):null}static patternMatchVariance(i,l,d){let h=i.length,m=0,g=0;for(let I=0;I<h;I++)m+=i[I],g+=l[I];if(m<g)return 1/0;let y=m/g;d*=y;let A=0;for(let I=0;I<h;I++){let D=i[I],B=l[I]*y,V=D>B?D-B:B-D;if(V>d)return 1/0;A+=V}return A/m}}wt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),wt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),wt.MAX_AVG_VARIANCE=.42,wt.MAX_INDIVIDUAL_VARIANCE=.8,wt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),wt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),wt.MAX_PIXEL_DRIFT=3,wt.MAX_PATTERN_DRIFT=5,wt.SKIPPED_ROW_COUNT_MAX=25,wt.ROW_STEP=5,wt.BARCODE_MIN_HEIGHT=10;class Jr{constructor(i,l){if(l.length===0)throw new w;this.field=i;let d=l.length;if(d>1&&l[0]===0){let h=1;for(;h<d&&l[h]===0;)h++;h===d?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(d-h),C.arraycopy(l,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=l}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let h=0;for(let m of this.coefficients)h=this.field.add(h,m);return h}let l=this.coefficients[0],d=this.coefficients.length;for(let h=1;h<d;h++)l=this.field.add(this.field.multiply(i,l),this.coefficients[h]);return l}add(i){if(!this.field.equals(i.field))throw new w("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let l=this.coefficients,d=i.coefficients;if(l.length>d.length){let g=l;l=d,d=g}let h=new Int32Array(d.length),m=d.length-l.length;C.arraycopy(d,0,h,0,m);for(let g=m;g<d.length;g++)h[g]=this.field.add(l[g-m],d[g]);return new Jr(this.field,h)}subtract(i){if(!this.field.equals(i.field))throw new w("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof Jr?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new w("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new Jr(this.field,new Int32Array([0]));let l=this.coefficients,d=l.length,h=i.coefficients,m=h.length,g=new Int32Array(d+m-1);for(let y=0;y<d;y++){let A=l[y];for(let I=0;I<m;I++)g[y+I]=this.field.add(g[y+I],this.field.multiply(A,h[I]))}return new Jr(this.field,g)}negative(){let i=this.coefficients.length,l=new Int32Array(i);for(let d=0;d<i;d++)l[d]=this.field.subtract(0,this.coefficients[d]);return new Jr(this.field,l)}multiplyScalar(i){if(i===0)return new Jr(this.field,new Int32Array([0]));if(i===1)return this;let l=this.coefficients.length,d=new Int32Array(l);for(let h=0;h<l;h++)d[h]=this.field.multiply(this.coefficients[h],i);return new Jr(this.field,d)}multiplyByMonomial(i,l){if(i<0)throw new w;if(l===0)return new Jr(this.field,new Int32Array([0]));let d=this.coefficients.length,h=new Int32Array(d+i);for(let m=0;m<d;m++)h[m]=this.field.multiply(this.coefficients[m],l);return new Jr(this.field,h)}toString(){let i=new q;for(let l=this.getDegree();l>=0;l--){let d=this.getCoefficient(l);d!==0&&(d<0?(i.append(" - "),d=-d):i.length()>0&&i.append(" + "),(l===0||d!==1)&&i.append(d),l!==0&&(l===1?i.append("x"):(i.append("x^"),i.append(l))))}return i.toString()}}class $k{add(i,l){return(i+l)%this.modulus}subtract(i,l){return(this.modulus+i-l)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new w;return this.logTable[i]}inverse(i){if(i===0)throw new Ee;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,l){return i===0||l===0?0:this.expTable[(this.logTable[i]+this.logTable[l])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class Cp extends $k{constructor(i,l){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let d=1;for(let h=0;h<i;h++)this.expTable[h]=d,d=d*l%i;for(let h=0;h<i-1;h++)this.logTable[this.expTable[h]]=h;this.zero=new Jr(this,new Int32Array([0])),this.one=new Jr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,l){if(i<0)throw new w;if(l===0)return this.zero;let d=new Int32Array(i+1);return d[0]=l,new Jr(this,d)}}Cp.PDF417_GF=new Cp(ot.NUMBER_OF_CODEWORDS,3);class Vv{constructor(){this.field=Cp.PDF417_GF}decode(i,l,d){let h=new Jr(this.field,i),m=new Int32Array(l),g=!1;for(let oe=l;oe>0;oe--){let le=h.evaluateAt(this.field.exp(oe));m[l-oe]=le,le!==0&&(g=!0)}if(!g)return 0;let y=this.field.getOne();if(d!=null)for(const oe of d){let le=this.field.exp(i.length-1-oe),fe=new Jr(this.field,new Int32Array([this.field.subtract(0,le),1]));y=y.multiply(fe)}let A=new Jr(this.field,m),I=this.runEuclideanAlgorithm(this.field.buildMonomial(l,1),A,l),D=I[0],B=I[1],V=this.findErrorLocations(D),Z=this.findErrorMagnitudes(B,D,V);for(let oe=0;oe<V.length;oe++){let le=i.length-1-this.field.log(V[oe]);if(le<0)throw j.getChecksumInstance();i[le]=this.field.subtract(i[le],Z[oe])}return V.length}runEuclideanAlgorithm(i,l,d){if(i.getDegree()<l.getDegree()){let V=i;i=l,l=V}let h=i,m=l,g=this.field.getZero(),y=this.field.getOne();for(;m.getDegree()>=Math.round(d/2);){let V=h,Z=g;if(h=m,g=y,h.isZero())throw j.getChecksumInstance();m=V;let oe=this.field.getZero(),le=h.getCoefficient(h.getDegree()),fe=this.field.inverse(le);for(;m.getDegree()>=h.getDegree()&&!m.isZero();){let ve=m.getDegree()-h.getDegree(),De=this.field.multiply(m.getCoefficient(m.getDegree()),fe);oe=oe.add(this.field.buildMonomial(ve,De)),m=m.subtract(h.multiplyByMonomial(ve,De))}y=oe.multiply(g).subtract(Z).negative()}let A=y.getCoefficient(0);if(A===0)throw j.getChecksumInstance();let I=this.field.inverse(A),D=y.multiply(I),B=m.multiply(I);return[D,B]}findErrorLocations(i){let l=i.getDegree(),d=new Int32Array(l),h=0;for(let m=1;m<this.field.getSize()&&h<l;m++)i.evaluateAt(m)===0&&(d[h]=this.field.inverse(m),h++);if(h!==l)throw j.getChecksumInstance();return d}findErrorMagnitudes(i,l,d){let h=l.getDegree(),m=new Int32Array(h);for(let I=1;I<=h;I++)m[h-I]=this.field.multiply(I,l.getCoefficient(I));let g=new Jr(this.field,m),y=d.length,A=new Int32Array(y);for(let I=0;I<y;I++){let D=this.field.inverse(d[I]),B=this.field.subtract(0,i.evaluateAt(D)),V=this.field.inverse(g.evaluateAt(D));A[I]=this.field.multiply(B,V)}return A}}class mo{constructor(i,l,d,h,m){i instanceof mo?this.constructor_2(i):this.constructor_1(i,l,d,h,m)}constructor_1(i,l,d,h,m){const g=l==null||d==null,y=h==null||m==null;if(g&&y)throw new H;g?(l=new pe(0,h.getY()),d=new pe(0,m.getY())):y&&(h=new pe(i.getWidth()-1,l.getY()),m=new pe(i.getWidth()-1,d.getY())),this.image=i,this.topLeft=l,this.bottomLeft=d,this.topRight=h,this.bottomRight=m,this.minX=Math.trunc(Math.min(l.getX(),d.getX())),this.maxX=Math.trunc(Math.max(h.getX(),m.getX())),this.minY=Math.trunc(Math.min(l.getY(),h.getY())),this.maxY=Math.trunc(Math.max(d.getY(),m.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,l){return i==null?l:l==null?i:new mo(i.image,i.topLeft,i.bottomLeft,l.topRight,l.bottomRight)}addMissingRows(i,l,d){let h=this.topLeft,m=this.bottomLeft,g=this.topRight,y=this.bottomRight;if(i>0){let A=d?this.topLeft:this.topRight,I=Math.trunc(A.getY()-i);I<0&&(I=0);let D=new pe(A.getX(),I);d?h=D:g=D}if(l>0){let A=d?this.bottomLeft:this.bottomRight,I=Math.trunc(A.getY()+l);I>=this.image.getHeight()&&(I=this.image.getHeight()-1);let D=new pe(A.getX(),I);d?m=D:y=D}return new mo(this.image,h,m,g,y)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Vk{constructor(i,l,d,h){this.columnCount=i,this.errorCorrectionLevel=h,this.rowCountUpperPart=l,this.rowCountLowerPart=d,this.rowCount=l+d}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Zc{constructor(){this.buffer=""}static form(i,l){let d=-1;function h(g,y,A,I,D,B){if(g==="%%")return"%";if(l[++d]===void 0)return;g=I?parseInt(I.substr(1)):void 0;let V=D?parseInt(D.substr(1)):void 0,Z;switch(B){case"s":Z=l[d];break;case"c":Z=l[d][0];break;case"f":Z=parseFloat(l[d]).toFixed(g);break;case"p":Z=parseFloat(l[d]).toPrecision(g);break;case"e":Z=parseFloat(l[d]).toExponential(g);break;case"x":Z=parseInt(l[d]).toString(V||16);break;case"d":Z=parseFloat(parseInt(l[d],V||10).toPrecision(g)).toFixed(0);break}Z=typeof Z=="object"?JSON.stringify(Z):(+Z).toString(V);let oe=parseInt(A),le=A&&A[0]+""=="0"?"0":" ";for(;Z.length<oe;)Z=y!==void 0?Z+le:le+Z;return Z}let m=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(m,h)}format(i,...l){this.buffer+=Zc.form(i,l)}toString(){return this.buffer}}class Jc{constructor(i){this.boundingBox=new mo(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}getCodewordNearby(i){let l=this.getCodeword(i);if(l!=null)return l;for(let d=1;d<Jc.MAX_NEARBY_DISTANCE;d++){let h=this.imageRowToCodewordIndex(i)-d;if(h>=0&&(l=this.codewords[h],l!=null)||(h=this.imageRowToCodewordIndex(i)+d,h<this.codewords.length&&(l=this.codewords[h],l!=null)))return l}return null}imageRowToCodewordIndex(i){return i-this.boundingBox.getMinY()}setCodeword(i,l){this.codewords[this.imageRowToCodewordIndex(i)]=l}getCodeword(i){return this.codewords[this.imageRowToCodewordIndex(i)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const i=new Zc;let l=0;for(const d of this.codewords){if(d==null){i.format("%3d:    |   %n",l++);continue}i.format("%3d: %3d|%3d%n",l++,d.getRowNumber(),d.getValue())}return i.toString()}}Jc.MAX_NEARBY_DISTANCE=5;class ed{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let l=this.values.get(i);l==null&&(l=0),l++,this.values.set(i,l)}getValue(){let i=-1,l=new Array;for(const[d,h]of this.values.entries()){const m={getKey:()=>d,getValue:()=>h};m.getValue()>i?(i=m.getValue(),l=[],l.push(m.getKey())):m.getValue()===i&&l.push(m.getKey())}return ot.toIntArray(l)}getConfidence(i){return this.values.get(i)}}class qv extends Jc{constructor(i,l){super(i),this._isLeft=l}setRowNumbers(){for(let i of this.getCodewords())i!=null&&i.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let l=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(l,i);let d=this.getBoundingBox(),h=this._isLeft?d.getTopLeft():d.getTopRight(),m=this._isLeft?d.getBottomLeft():d.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(h.getY())),y=this.imageRowToCodewordIndex(Math.trunc(m.getY())),A=-1,I=1,D=0;for(let B=g;B<y;B++){if(l[B]==null)continue;let V=l[B],Z=V.getRowNumber()-A;if(Z===0)D++;else if(Z===1)I=Math.max(I,D),D=1,A=V.getRowNumber();else if(Z<0||V.getRowNumber()>=i.getRowCount()||Z>B)l[B]=null;else{let oe;I>2?oe=(I-2)*Z:oe=Z;let le=oe>=B;for(let fe=1;fe<=oe&&!le;fe++)le=l[B-fe]!=null;le?l[B]=null:(A=V.getRowNumber(),D=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let l=new Int32Array(i.getRowCount());for(let d of this.getCodewords())if(d!=null){let h=d.getRowNumber();if(h>=l.length)continue;l[h]++}return l}adjustIncompleteIndicatorColumnRowNumbers(i){let l=this.getBoundingBox(),d=this._isLeft?l.getTopLeft():l.getTopRight(),h=this._isLeft?l.getBottomLeft():l.getBottomRight(),m=this.imageRowToCodewordIndex(Math.trunc(d.getY())),g=this.imageRowToCodewordIndex(Math.trunc(h.getY())),y=this.getCodewords(),A=-1;for(let I=m;I<g;I++){if(y[I]==null)continue;let D=y[I];D.setRowNumberAsRowIndicatorColumn();let B=D.getRowNumber()-A;B===0||(B===1?A=D.getRowNumber():D.getRowNumber()>=i.getRowCount()?y[I]=null:A=D.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),l=new ed,d=new ed,h=new ed,m=new ed;for(let y of i){if(y==null)continue;y.setRowNumberAsRowIndicatorColumn();let A=y.getValue()%30,I=y.getRowNumber();switch(this._isLeft||(I+=2),I%3){case 0:d.setValue(A*3+1);break;case 1:m.setValue(A/3),h.setValue(A%3);break;case 2:l.setValue(A+1);break}}if(l.getValue().length===0||d.getValue().length===0||h.getValue().length===0||m.getValue().length===0||l.getValue()[0]<1||d.getValue()[0]+h.getValue()[0]<ot.MIN_ROWS_IN_BARCODE||d.getValue()[0]+h.getValue()[0]>ot.MAX_ROWS_IN_BARCODE)return null;let g=new Vk(l.getValue()[0],d.getValue()[0],h.getValue()[0],m.getValue()[0]);return this.removeIncorrectCodewords(i,g),g}removeIncorrectCodewords(i,l){for(let d=0;d<i.length;d++){let h=i[d];if(i[d]==null)continue;let m=h.getValue()%30,g=h.getRowNumber();if(g>l.getRowCount()){i[d]=null;continue}switch(this._isLeft||(g+=2),g%3){case 0:m*3+1!==l.getRowCountUpperPart()&&(i[d]=null);break;case 1:(Math.trunc(m/3)!==l.getErrorCorrectionLevel()||m%3!==l.getRowCountLowerPart())&&(i[d]=null);break;case 2:m+1!==l.getColumnCount()&&(i[d]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class td{constructor(i,l){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=l,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=ot.MAX_CODEWORDS_IN_BARCODE,l;do l=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<l);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i!=null&&i.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let l=1;l<this.barcodeColumnCount+1;l++){let d=this.detectionResultColumns[l].getCodewords();for(let h=0;h<d.length;h++)d[h]!=null&&(d[h].hasValidRowNumber()||this.adjustRowNumbers(l,h,d))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),l=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let d=0;d<i.length;d++)if(i[d]!=null&&l[d]!=null&&i[d].getRowNumber()===l[d].getRowNumber())for(let h=1;h<=this.barcodeColumnCount;h++){let m=this.detectionResultColumns[h].getCodewords()[d];m!=null&&(m.setRowNumber(i[d].getRowNumber()),m.hasValidRowNumber()||(this.detectionResultColumns[h].getCodewords()[d]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,l=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let d=0;d<l.length;d++){if(l[d]==null)continue;let h=l[d].getRowNumber(),m=0;for(let g=this.barcodeColumnCount+1;g>0&&m<this.ADJUST_ROW_NUMBER_SKIP;g--){let y=this.detectionResultColumns[g].getCodewords()[d];y!=null&&(m=td.adjustRowNumberIfValid(h,m,y),y.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,l=this.detectionResultColumns[0].getCodewords();for(let d=0;d<l.length;d++){if(l[d]==null)continue;let h=l[d].getRowNumber(),m=0;for(let g=1;g<this.barcodeColumnCount+1&&m<this.ADJUST_ROW_NUMBER_SKIP;g++){let y=this.detectionResultColumns[g].getCodewords()[d];y!=null&&(m=td.adjustRowNumberIfValid(h,m,y),y.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,l,d){return d==null||d.hasValidRowNumber()||(d.isValidRowNumber(i)?(d.setRowNumber(i),l=0):++l),l}adjustRowNumbers(i,l,d){if(!this.detectionResultColumns[i-1])return;let h=d[l],m=this.detectionResultColumns[i-1].getCodewords(),g=m;this.detectionResultColumns[i+1]!=null&&(g=this.detectionResultColumns[i+1].getCodewords());let y=new Array(14);y[2]=m[l],y[3]=g[l],l>0&&(y[0]=d[l-1],y[4]=m[l-1],y[5]=g[l-1]),l>1&&(y[8]=d[l-2],y[10]=m[l-2],y[11]=g[l-2]),l<d.length-1&&(y[1]=d[l+1],y[6]=m[l+1],y[7]=g[l+1]),l<d.length-2&&(y[9]=d[l+2],y[12]=m[l+2],y[13]=g[l+2]);for(let A of y)if(td.adjustRowNumber(h,A))return}static adjustRowNumber(i,l){return l==null?!1:l.hasValidRowNumber()&&l.getBucket()===i.getBucket()?(i.setRowNumber(l.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,l){this.detectionResultColumns[i]=l}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let l=new Zc;for(let d=0;d<i.getCodewords().length;d++){l.format("CW %3d:",d);for(let h=0;h<this.barcodeColumnCount+2;h++){if(this.detectionResultColumns[h]==null){l.format("    |   ");continue}let m=this.detectionResultColumns[h].getCodewords()[d];if(m==null){l.format("    |   ");continue}l.format(" %3d|%3d",m.getRowNumber(),m.getValue())}l.format("%n")}return l.toString()}}class rd{constructor(i,l,d,h){this.rowNumber=rd.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(l),this.bucket=Math.trunc(d),this.value=Math.trunc(h)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(i){return i!==rd.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(i){this.rowNumber=i}toString(){return this.rowNumber+"|"+this.value}}rd.BARCODE_ROW_UNKNOWN=-1;class Dn{static initialize(){for(let i=0;i<ot.SYMBOL_TABLE.length;i++){let l=ot.SYMBOL_TABLE[i],d=l&1;for(let h=0;h<ot.BARS_IN_MODULE;h++){let m=0;for(;(l&1)===d;)m+=1,l>>=1;d=l&1,Dn.RATIOS_TABLE[i]||(Dn.RATIOS_TABLE[i]=new Array(ot.BARS_IN_MODULE)),Dn.RATIOS_TABLE[i][ot.BARS_IN_MODULE-h-1]=Math.fround(m/ot.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let l=Dn.getDecodedCodewordValue(Dn.sampleBitCounts(i));return l!==-1?l:Dn.getClosestDecodedValue(i)}static sampleBitCounts(i){let l=He.sum(i),d=new Int32Array(ot.BARS_IN_MODULE),h=0,m=0;for(let g=0;g<ot.MODULES_IN_CODEWORD;g++){let y=l/(2*ot.MODULES_IN_CODEWORD)+g*l/ot.MODULES_IN_CODEWORD;m+i[h]<=y&&(m+=i[h],h++),d[h]++}return d}static getDecodedCodewordValue(i){let l=Dn.getBitValue(i);return ot.getCodeword(l)===-1?-1:l}static getBitValue(i){let l=0;for(let d=0;d<i.length;d++)for(let h=0;h<i[d];h++)l=l<<1|(d%2===0?1:0);return Math.trunc(l)}static getClosestDecodedValue(i){let l=He.sum(i),d=new Array(ot.BARS_IN_MODULE);if(l>1)for(let g=0;g<d.length;g++)d[g]=Math.fround(i[g]/l);let h=Ft.MAX_VALUE,m=-1;this.bSymbolTableReady||Dn.initialize();for(let g=0;g<Dn.RATIOS_TABLE.length;g++){let y=0,A=Dn.RATIOS_TABLE[g];for(let I=0;I<ot.BARS_IN_MODULE;I++){let D=Math.fround(A[I]-d[I]);if(y+=Math.fround(D*D),y>=h)break}y<h&&(h=y,m=ot.SYMBOL_TABLE[g])}return m}}Dn.bSymbolTableReady=!1,Dn.RATIOS_TABLE=new Array(ot.SYMBOL_TABLE.length).map(F=>new Array(ot.BARS_IN_MODULE));class Wv{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class Hv{static parseLong(i,l=void 0){return parseInt(i,l)}}class Gv extends p{}Gv.kind="NullPointerException";class qk{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,l,d){if(i==null)throw new Gv;if(l<0||l>i.length||d<0||l+d>i.length||l+d<0)throw new T;if(d===0)return;for(let h=0;h<d;h++)this.write(i[l+h])}flush(){}close(){}}class Wk extends p{}class Hk extends qk{constructor(i=32){if(super(),this.count=0,i<0)throw new w("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let d=this.buf.length<<1;if(d-i<0&&(d=i),d<0){if(i<0)throw new Wk;d=b.MAX_VALUE}this.buf=S.copyOfUint8Array(this.buf,d)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,l,d){if(l<0||l>i.length||d<0||l+d-i.length>0)throw new T;this.ensureCapacity(this.count+d),C.arraycopy(i,l,this.buf,this.count,d),this.count+=d}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return S.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var Yt;(function(F){F[F.ALPHA=0]="ALPHA",F[F.LOWER=1]="LOWER",F[F.MIXED=2]="MIXED",F[F.PUNCT=3]="PUNCT",F[F.ALPHA_SHIFT=4]="ALPHA_SHIFT",F[F.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Yt||(Yt={}));function Xv(){if(typeof window<"u")return window.BigInt||null;if(typeof on<"u")return on.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let rh;function oi(F){if(typeof rh>"u"&&(rh=Xv()),rh===null)throw new Error("BigInt is not supported!");return rh(F)}function Gk(){let F=[];F[0]=oi(1);let i=oi(900);F[1]=i;for(let l=2;l<16;l++)F[l]=F[l-1]*i;return F}class xe{static decode(i,l){let d=new q(""),h=R.ISO8859_1;d.enableDecoding(h);let m=1,g=i[m++],y=new Wv;for(;m<i[0];){switch(g){case xe.TEXT_COMPACTION_MODE_LATCH:m=xe.textCompaction(i,m,d);break;case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:m=xe.byteCompaction(g,i,h,m,d);break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(i[m++]);break;case xe.NUMERIC_COMPACTION_MODE_LATCH:m=xe.numericCompaction(i,m,d);break;case xe.ECI_CHARSET:R.getCharacterSetECIByValue(i[m++]);break;case xe.ECI_GENERAL_PURPOSE:m+=2;break;case xe.ECI_USER_DEFINED:m++;break;case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:m=xe.decodeMacroBlock(i,m,y);break;case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:throw new P;default:m--,m=xe.textCompaction(i,m,d);break}if(m<i.length)g=i[m++];else throw P.getFormatInstance()}if(d.length()===0)throw P.getFormatInstance();let A=new Ae(null,d.toString(),null,l);return A.setOther(y),A}static decodeMacroBlock(i,l,d){if(l+xe.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw P.getFormatInstance();let h=new Int32Array(xe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let y=0;y<xe.NUMBER_OF_SEQUENCE_CODEWORDS;y++,l++)h[y]=i[l];d.setSegmentIndex(b.parseInt(xe.decodeBase900toBase10(h,xe.NUMBER_OF_SEQUENCE_CODEWORDS)));let m=new q;l=xe.textCompaction(i,l,m),d.setFileId(m.toString());let g=-1;for(i[l]===xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(g=l+1);l<i[0];)switch(i[l]){case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(l++,i[l]){case xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let y=new q;l=xe.textCompaction(i,l+1,y),d.setFileName(y.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let A=new q;l=xe.textCompaction(i,l+1,A),d.setSender(A.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let I=new q;l=xe.textCompaction(i,l+1,I),d.setAddressee(I.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let D=new q;l=xe.numericCompaction(i,l+1,D),d.setSegmentCount(b.parseInt(D.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let B=new q;l=xe.numericCompaction(i,l+1,B),d.setTimestamp(Hv.parseLong(B.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let V=new q;l=xe.numericCompaction(i,l+1,V),d.setChecksum(b.parseInt(V.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Z=new q;l=xe.numericCompaction(i,l+1,Z),d.setFileSize(Hv.parseLong(Z.toString()));break;default:throw P.getFormatInstance()}break;case xe.MACRO_PDF417_TERMINATOR:l++,d.setLastSegment(!0);break;default:throw P.getFormatInstance()}if(g!==-1){let y=l-g;d.isLastSegment()&&y--,d.setOptionalData(S.copyOfRange(i,g,g+y))}return l}static textCompaction(i,l,d){let h=new Int32Array((i[0]-l)*2),m=new Int32Array((i[0]-l)*2),g=0,y=!1;for(;l<i[0]&&!y;){let A=i[l++];if(A<xe.TEXT_COMPACTION_MODE_LATCH)h[g]=A/30,h[g+1]=A%30,g+=2;else switch(A){case xe.TEXT_COMPACTION_MODE_LATCH:h[g++]=xe.TEXT_COMPACTION_MODE_LATCH;break;case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:l--,y=!0;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h[g]=xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,A=i[l++],m[g]=A,g++;break}}return xe.decodeTextCompaction(h,m,g,d),l}static decodeTextCompaction(i,l,d,h){let m=Yt.ALPHA,g=Yt.ALPHA,y=0;for(;y<d;){let A=i[y],I="";switch(m){case Yt.ALPHA:if(A<26)I=String.fromCharCode(65+A);else switch(A){case 26:I=" ";break;case xe.LL:m=Yt.LOWER;break;case xe.ML:m=Yt.MIXED;break;case xe.PS:g=m,m=Yt.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(l[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:m=Yt.ALPHA;break}break;case Yt.LOWER:if(A<26)I=String.fromCharCode(97+A);else switch(A){case 26:I=" ";break;case xe.AS:g=m,m=Yt.ALPHA_SHIFT;break;case xe.ML:m=Yt.MIXED;break;case xe.PS:g=m,m=Yt.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(l[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:m=Yt.ALPHA;break}break;case Yt.MIXED:if(A<xe.PL)I=xe.MIXED_CHARS[A];else switch(A){case xe.PL:m=Yt.PUNCT;break;case 26:I=" ";break;case xe.LL:m=Yt.LOWER;break;case xe.AL:m=Yt.ALPHA;break;case xe.PS:g=m,m=Yt.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(l[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:m=Yt.ALPHA;break}break;case Yt.PUNCT:if(A<xe.PAL)I=xe.PUNCT_CHARS[A];else switch(A){case xe.PAL:m=Yt.ALPHA;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(l[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:m=Yt.ALPHA;break}break;case Yt.ALPHA_SHIFT:if(m=g,A<26)I=String.fromCharCode(65+A);else switch(A){case 26:I=" ";break;case xe.TEXT_COMPACTION_MODE_LATCH:m=Yt.ALPHA;break}break;case Yt.PUNCT_SHIFT:if(m=g,A<xe.PAL)I=xe.PUNCT_CHARS[A];else switch(A){case xe.PAL:m=Yt.ALPHA;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(l[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:m=Yt.ALPHA;break}break}I!==""&&h.append(I),y++}}static byteCompaction(i,l,d,h,m){let g=new Hk,y=0,A=0,I=!1;switch(i){case xe.BYTE_COMPACTION_MODE_LATCH:let D=new Int32Array(6),B=l[h++];for(;h<l[0]&&!I;)switch(D[y++]=B,A=900*A+B,B=l[h++],B){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:h--,I=!0;break;default:if(y%5===0&&y>0){for(let V=0;V<6;++V)g.write(Number(oi(A)>>oi(8*(5-V))));A=0,y=0}break}h===l[0]&&B<xe.TEXT_COMPACTION_MODE_LATCH&&(D[y++]=B);for(let V=0;V<y;V++)g.write(D[V]);break;case xe.BYTE_COMPACTION_MODE_LATCH_6:for(;h<l[0]&&!I;){let V=l[h++];if(V<xe.TEXT_COMPACTION_MODE_LATCH)y++,A=900*A+V;else switch(V){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:h--,I=!0;break}if(y%5===0&&y>0){for(let Z=0;Z<6;++Z)g.write(Number(oi(A)>>oi(8*(5-Z))));A=0,y=0}}break}return m.append(Y.decode(g.toByteArray(),d)),h}static numericCompaction(i,l,d){let h=0,m=!1,g=new Int32Array(xe.MAX_NUMERIC_CODEWORDS);for(;l<i[0]&&!m;){let y=i[l++];if(l===i[0]&&(m=!0),y<xe.TEXT_COMPACTION_MODE_LATCH)g[h]=y,h++;else switch(y){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:l--,m=!0;break}(h%xe.MAX_NUMERIC_CODEWORDS===0||y===xe.NUMERIC_COMPACTION_MODE_LATCH||m)&&h>0&&(d.append(xe.decodeBase900toBase10(g,h)),h=0)}return l}static decodeBase900toBase10(i,l){let d=oi(0);for(let m=0;m<l;m++)d+=xe.EXP900[l-m-1]*oi(i[m]);let h=d.toString();if(h.charAt(0)!=="1")throw new P;return h.substring(1)}}xe.TEXT_COMPACTION_MODE_LATCH=900,xe.BYTE_COMPACTION_MODE_LATCH=901,xe.NUMERIC_COMPACTION_MODE_LATCH=902,xe.BYTE_COMPACTION_MODE_LATCH_6=924,xe.ECI_USER_DEFINED=925,xe.ECI_GENERAL_PURPOSE=926,xe.ECI_CHARSET=927,xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,xe.MACRO_PDF417_TERMINATOR=922,xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,xe.MAX_NUMERIC_CODEWORDS=15,xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,xe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,xe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,xe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,xe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,xe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,xe.PL=25,xe.LL=27,xe.AS=27,xe.ML=28,xe.AL=28,xe.PS=29,xe.PAL=29,xe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,xe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",xe.EXP900=Xv()?Gk():[],xe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class yt{constructor(){}static decode(i,l,d,h,m,g,y){let A=new mo(i,l,d,h,m),I=null,D=null,B;for(let oe=!0;;oe=!1){if(l!=null&&(I=yt.getRowIndicatorColumn(i,A,l,!0,g,y)),h!=null&&(D=yt.getRowIndicatorColumn(i,A,h,!1,g,y)),B=yt.merge(I,D),B==null)throw H.getNotFoundInstance();let le=B.getBoundingBox();if(oe&&le!=null&&(le.getMinY()<A.getMinY()||le.getMaxY()>A.getMaxY()))A=le;else break}B.setBoundingBox(A);let V=B.getBarcodeColumnCount()+1;B.setDetectionResultColumn(0,I),B.setDetectionResultColumn(V,D);let Z=I!=null;for(let oe=1;oe<=V;oe++){let le=Z?oe:V-oe;if(B.getDetectionResultColumn(le)!==void 0)continue;let fe;le===0||le===V?fe=new qv(A,le===0):fe=new Jc(A),B.setDetectionResultColumn(le,fe);let ve=-1,De=ve;for(let Me=A.getMinY();Me<=A.getMaxY();Me++){if(ve=yt.getStartColumn(B,le,Me,Z),ve<0||ve>A.getMaxX()){if(De===-1)continue;ve=De}let Re=yt.detectCodeword(i,A.getMinX(),A.getMaxX(),Z,ve,Me,g,y);Re!=null&&(fe.setCodeword(Me,Re),De=ve,g=Math.min(g,Re.getWidth()),y=Math.max(y,Re.getWidth()))}}return yt.createDecoderResult(B)}static merge(i,l){if(i==null&&l==null)return null;let d=yt.getBarcodeMetadata(i,l);if(d==null)return null;let h=mo.merge(yt.adjustBoundingBox(i),yt.adjustBoundingBox(l));return new td(d,h)}static adjustBoundingBox(i){if(i==null)return null;let l=i.getRowHeights();if(l==null)return null;let d=yt.getMax(l),h=0;for(let y of l)if(h+=d-y,y>0)break;let m=i.getCodewords();for(let y=0;h>0&&m[y]==null;y++)h--;let g=0;for(let y=l.length-1;y>=0&&(g+=d-l[y],!(l[y]>0));y--);for(let y=m.length-1;g>0&&m[y]==null;y--)g--;return i.getBoundingBox().addMissingRows(h,g,i.isLeft())}static getMax(i){let l=-1;for(let d of i)l=Math.max(l,d);return l}static getBarcodeMetadata(i,l){let d;if(i==null||(d=i.getBarcodeMetadata())==null)return l==null?null:l.getBarcodeMetadata();let h;return l==null||(h=l.getBarcodeMetadata())==null?d:d.getColumnCount()!==h.getColumnCount()&&d.getErrorCorrectionLevel()!==h.getErrorCorrectionLevel()&&d.getRowCount()!==h.getRowCount()?null:d}static getRowIndicatorColumn(i,l,d,h,m,g){let y=new qv(l,h);for(let A=0;A<2;A++){let I=A===0?1:-1,D=Math.trunc(Math.trunc(d.getX()));for(let B=Math.trunc(Math.trunc(d.getY()));B<=l.getMaxY()&&B>=l.getMinY();B+=I){let V=yt.detectCodeword(i,0,i.getWidth(),h,D,B,m,g);V!=null&&(y.setCodeword(B,V),h?D=V.getStartX():D=V.getEndX())}}return y}static adjustCodewordCount(i,l){let d=l[0][1],h=d.getValue(),m=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-yt.getNumberOfECCodeWords(i.getBarcodeECLevel());if(h.length===0){if(m<1||m>ot.MAX_CODEWORDS_IN_BARCODE)throw H.getNotFoundInstance();d.setValue(m)}else h[0]!==m&&d.setValue(m)}static createDecoderResult(i){let l=yt.createBarcodeMatrix(i);yt.adjustCodewordCount(i,l);let d=new Array,h=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),m=[],g=new Array;for(let A=0;A<i.getBarcodeRowCount();A++)for(let I=0;I<i.getBarcodeColumnCount();I++){let D=l[A][I+1].getValue(),B=A*i.getBarcodeColumnCount()+I;D.length===0?d.push(B):D.length===1?h[B]=D[0]:(g.push(B),m.push(D))}let y=new Array(m.length);for(let A=0;A<y.length;A++)y[A]=m[A];return yt.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),h,ot.toIntArray(d),ot.toIntArray(g),y)}static createDecoderResultFromAmbiguousValues(i,l,d,h,m){let g=new Int32Array(h.length),y=100;for(;y-- >0;){for(let A=0;A<g.length;A++)l[h[A]]=m[A][g[A]];try{return yt.decodeCodewords(l,i,d)}catch(A){if(!(A instanceof j))throw A}if(g.length===0)throw j.getChecksumInstance();for(let A=0;A<g.length;A++)if(g[A]<m[A].length-1){g[A]++;break}else if(g[A]=0,A===g.length-1)throw j.getChecksumInstance()}throw j.getChecksumInstance()}static createBarcodeMatrix(i){let l=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let h=0;h<l.length;h++)for(let m=0;m<l[h].length;m++)l[h][m]=new ed;let d=0;for(let h of i.getDetectionResultColumns()){if(h!=null){for(let m of h.getCodewords())if(m!=null){let g=m.getRowNumber();if(g>=0){if(g>=l.length)continue;l[g][d].setValue(m.getValue())}}}d++}return l}static isValidBarcodeColumn(i,l){return l>=0&&l<=i.getBarcodeColumnCount()+1}static getStartColumn(i,l,d,h){let m=h?1:-1,g=null;if(yt.isValidBarcodeColumn(i,l-m)&&(g=i.getDetectionResultColumn(l-m).getCodeword(d)),g!=null)return h?g.getEndX():g.getStartX();if(g=i.getDetectionResultColumn(l).getCodewordNearby(d),g!=null)return h?g.getStartX():g.getEndX();if(yt.isValidBarcodeColumn(i,l-m)&&(g=i.getDetectionResultColumn(l-m).getCodewordNearby(d)),g!=null)return h?g.getEndX():g.getStartX();let y=0;for(;yt.isValidBarcodeColumn(i,l-m);){l-=m;for(let A of i.getDetectionResultColumn(l).getCodewords())if(A!=null)return(h?A.getEndX():A.getStartX())+m*y*(A.getEndX()-A.getStartX());y++}return h?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,l,d,h,m,g,y,A){m=yt.adjustCodewordStartColumn(i,l,d,h,m,g);let I=yt.getModuleBitCount(i,l,d,h,m,g);if(I==null)return null;let D,B=He.sum(I);if(h)D=m+B;else{for(let oe=0;oe<I.length/2;oe++){let le=I[oe];I[oe]=I[I.length-1-oe],I[I.length-1-oe]=le}D=m,m=D-B}if(!yt.checkCodewordSkew(B,y,A))return null;let V=Dn.getDecodedValue(I),Z=ot.getCodeword(V);return Z===-1?null:new rd(m,D,yt.getCodewordBucketNumber(V),Z)}static getModuleBitCount(i,l,d,h,m,g){let y=m,A=new Int32Array(8),I=0,D=h?1:-1,B=h;for(;(h?y<d:y>=l)&&I<A.length;)i.get(y,g)===B?(A[I]++,y+=D):(I++,B=!B);return I===A.length||y===(h?d:l)&&I===A.length-1?A:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,l,d,h,m,g){let y=m,A=h?-1:1;for(let I=0;I<2;I++){for(;(h?y>=l:y<d)&&h===i.get(y,g);){if(Math.abs(m-y)>yt.CODEWORD_SKEW_SIZE)return m;y+=A}A=-A,h=!h}return y}static checkCodewordSkew(i,l,d){return l-yt.CODEWORD_SKEW_SIZE<=i&&i<=d+yt.CODEWORD_SKEW_SIZE}static decodeCodewords(i,l,d){if(i.length===0)throw P.getFormatInstance();let h=1<<l+1,m=yt.correctErrors(i,d,h);yt.verifyCodewordCount(i,h);let g=xe.decode(i,""+l);return g.setErrorsCorrected(m),g.setErasures(d.length),g}static correctErrors(i,l,d){if(l!=null&&l.length>d/2+yt.MAX_ERRORS||d<0||d>yt.MAX_EC_CODEWORDS)throw j.getChecksumInstance();return yt.errorCorrection.decode(i,d,l)}static verifyCodewordCount(i,l){if(i.length<4)throw P.getFormatInstance();let d=i[0];if(d>i.length)throw P.getFormatInstance();if(d===0)if(l<i.length)i[0]=i.length-l;else throw P.getFormatInstance()}static getBitCountForCodeword(i){let l=new Int32Array(8),d=0,h=l.length-1;for(;!((i&1)!==d&&(d=i&1,h--,h<0));)l[h]++,i>>=1;return l}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return yt.getCodewordBucketNumber(yt.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let l=new Zc;for(let d=0;d<i.length;d++){l.format("Row %2d: ",d);for(let h=0;h<i[d].length;h++){let m=i[d][h];m.getValue().length===0?l.format("        ",null):l.format("%4d(%2d)",m.getValue()[0],m.getConfidence(m.getValue()[0]))}l.format("%n")}return l.toString()}}yt.CODEWORD_SKEW_SIZE=2,yt.MAX_ERRORS=3,yt.MAX_EC_CODEWORDS=512,yt.errorCorrection=new Vv;class en{decode(i,l=null){let d=en.decode(i,l,!1);if(d==null||d.length===0||d[0]==null)throw H.getNotFoundInstance();return d[0]}decodeMultiple(i,l=null){try{return en.decode(i,l,!0)}catch(d){throw d instanceof P||d instanceof j?H.getNotFoundInstance():d}}static decode(i,l,d){const h=new Array,m=wt.detectMultiple(i,l,d);for(const g of m.getPoints()){const y=yt.decode(m.getBits(),g[4],g[5],g[6],g[7],en.getMinCodewordWidth(g),en.getMaxCodewordWidth(g)),A=new G(y.getText(),y.getRawBytes(),void 0,g,ce.PDF_417);A.putMetadata(he.ERROR_CORRECTION_LEVEL,y.getECLevel());const I=y.getOther();I!=null&&A.putMetadata(he.PDF417_EXTRA_METADATA,I),h.push(A)}return h.map(g=>g)}static getMaxWidth(i,l){return i==null||l==null?0:Math.trunc(Math.abs(i.getX()-l.getX()))}static getMinWidth(i,l){return i==null||l==null?b.MAX_VALUE:Math.trunc(Math.abs(i.getX()-l.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(en.getMaxWidth(i[0],i[4]),en.getMaxWidth(i[6],i[2])*ot.MODULES_IN_CODEWORD/ot.MODULES_IN_STOP_PATTERN),Math.max(en.getMaxWidth(i[1],i[5]),en.getMaxWidth(i[7],i[3])*ot.MODULES_IN_CODEWORD/ot.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(en.getMinWidth(i[0],i[4]),en.getMinWidth(i[6],i[2])*ot.MODULES_IN_CODEWORD/ot.MODULES_IN_STOP_PATTERN),Math.min(en.getMinWidth(i[1],i[5]),en.getMinWidth(i[7],i[3])*ot.MODULES_IN_CODEWORD/ot.MODULES_IN_STOP_PATTERN)))}reset(){}}class nh extends p{}nh.kind="ReaderException";class Kv{constructor(i,l){this.verbose=i===!0,l&&this.setHints(l)}decode(i,l){return l&&this.setHints(l),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const l=!s(i)&&i.get(L.TRY_HARDER)===!0,d=s(i)?null:i.get(L.POSSIBLE_FORMATS),h=new Array;if(!s(d)){const m=d.some(g=>g===ce.UPC_A||g===ce.UPC_E||g===ce.EAN_13||g===ce.EAN_8||g===ce.CODABAR||g===ce.CODE_39||g===ce.CODE_93||g===ce.CODE_128||g===ce.ITF||g===ce.RSS_14||g===ce.RSS_EXPANDED);m&&!l&&h.push(new yl(i,this.verbose)),d.includes(ce.QR_CODE)&&h.push(new ii),d.includes(ce.DATA_MATRIX)&&h.push(new ai),d.includes(ce.AZTEC)&&h.push(new ut),d.includes(ce.PDF_417)&&h.push(new en),m&&l&&h.push(new yl(i,this.verbose))}h.length===0&&(l||h.push(new yl(i,this.verbose)),h.push(new ii),h.push(new ai),h.push(new ut),h.push(new en),l&&h.push(new yl(i,this.verbose))),this.readers=h}reset(){if(this.readers!==null)for(const i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new nh("No readers where selected, nothing can be read.");for(const l of this.readers)try{return l.decode(i,this.hints)}catch(d){if(d instanceof nh)continue}throw new H("No MultiFormat Readers were able to detect the code.")}}class Xk extends J{constructor(i=null,l=500){const d=new Kv;d.setHints(i),super(d,l)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class Kk extends J{constructor(i=500){super(new en,i)}}class Yk extends J{constructor(i=500){super(new ii,i)}}var Ep;(function(F){F[F.ERROR_CORRECTION=0]="ERROR_CORRECTION",F[F.CHARACTER_SET=1]="CHARACTER_SET",F[F.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",F[F.MIN_SIZE=3]="MIN_SIZE",F[F.MAX_SIZE=4]="MAX_SIZE",F[F.MARGIN=5]="MARGIN",F[F.PDF417_COMPACT=6]="PDF417_COMPACT",F[F.PDF417_COMPACTION=7]="PDF417_COMPACTION",F[F.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",F[F.AZTEC_LAYERS=9]="AZTEC_LAYERS",F[F.QR_VERSION=10]="QR_VERSION"})(Ep||(Ep={}));var zr=Ep;class Sp{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new Be(i,Int32Array.from([1])))}buildGenerator(i){const l=this.cachedGenerators;if(i>=l.length){let d=l[l.length-1];const h=this.field;for(let m=l.length;m<=i;m++){const g=d.multiply(new Be(h,Int32Array.from([1,h.exp(m-1+h.getGeneratorBase())])));l.push(g),d=g}}return l[i]}encode(i,l){if(l===0)throw new w("No error correction bytes");const d=i.length-l;if(d<=0)throw new w("No data bytes provided");const h=this.buildGenerator(l),m=new Int32Array(d);C.arraycopy(i,0,m,0,d);let g=new Be(this.field,m);g=g.multiplyByMonomial(l,1);const A=g.divide(h)[1].getCoefficients(),I=l-A.length;for(let D=0;D<I;D++)i[d+D]=0;C.arraycopy(A,0,i,d+I,A.length)}}class _r{constructor(){}static applyMaskPenaltyRule1(i){return _r.applyMaskPenaltyRule1Internal(i,!0)+_r.applyMaskPenaltyRule1Internal(i,!1)}static applyMaskPenaltyRule2(i){let l=0;const d=i.getArray(),h=i.getWidth(),m=i.getHeight();for(let g=0;g<m-1;g++){const y=d[g];for(let A=0;A<h-1;A++){const I=y[A];I===y[A+1]&&I===d[g+1][A]&&I===d[g+1][A+1]&&l++}}return _r.N2*l}static applyMaskPenaltyRule3(i){let l=0;const d=i.getArray(),h=i.getWidth(),m=i.getHeight();for(let g=0;g<m;g++)for(let y=0;y<h;y++){const A=d[g];y+6<h&&A[y]===1&&A[y+1]===0&&A[y+2]===1&&A[y+3]===1&&A[y+4]===1&&A[y+5]===0&&A[y+6]===1&&(_r.isWhiteHorizontal(A,y-4,y)||_r.isWhiteHorizontal(A,y+7,y+11))&&l++,g+6<m&&d[g][y]===1&&d[g+1][y]===0&&d[g+2][y]===1&&d[g+3][y]===1&&d[g+4][y]===1&&d[g+5][y]===0&&d[g+6][y]===1&&(_r.isWhiteVertical(d,y,g-4,g)||_r.isWhiteVertical(d,y,g+7,g+11))&&l++}return l*_r.N3}static isWhiteHorizontal(i,l,d){l=Math.max(l,0),d=Math.min(d,i.length);for(let h=l;h<d;h++)if(i[h]===1)return!1;return!0}static isWhiteVertical(i,l,d,h){d=Math.max(d,0),h=Math.min(h,i.length);for(let m=d;m<h;m++)if(i[m][l]===1)return!1;return!0}static applyMaskPenaltyRule4(i){let l=0;const d=i.getArray(),h=i.getWidth(),m=i.getHeight();for(let A=0;A<m;A++){const I=d[A];for(let D=0;D<h;D++)I[D]===1&&l++}const g=i.getHeight()*i.getWidth();return Math.floor(Math.abs(l*2-g)*10/g)*_r.N4}static getDataMaskBit(i,l,d){let h,m;switch(i){case 0:h=d+l&1;break;case 1:h=d&1;break;case 2:h=l%3;break;case 3:h=(d+l)%3;break;case 4:h=Math.floor(d/2)+Math.floor(l/3)&1;break;case 5:m=d*l,h=(m&1)+m%3;break;case 6:m=d*l,h=(m&1)+m%3&1;break;case 7:m=d*l,h=m%3+(d+l&1)&1;break;default:throw new w("Invalid mask pattern: "+i)}return h===0}static applyMaskPenaltyRule1Internal(i,l){let d=0;const h=l?i.getHeight():i.getWidth(),m=l?i.getWidth():i.getHeight(),g=i.getArray();for(let y=0;y<h;y++){let A=0,I=-1;for(let D=0;D<m;D++){const B=l?g[y][D]:g[D][y];B===I?A++:(A>=5&&(d+=_r.N1+(A-5)),A=1,I=B)}A>=5&&(d+=_r.N1+(A-5))}return d}}_r.N1=3,_r.N2=3,_r.N3=40,_r.N4=10;class sh{constructor(i,l){this.width=i,this.height=l;const d=new Array(l);for(let h=0;h!==l;h++)d[h]=new Uint8Array(i);this.bytes=d}getHeight(){return this.height}getWidth(){return this.width}get(i,l){return this.bytes[l][i]}getArray(){return this.bytes}setNumber(i,l,d){this.bytes[l][i]=d}setBoolean(i,l,d){this.bytes[l][i]=d?1:0}clear(i){for(const l of this.bytes)S.fill(l,i)}equals(i){if(!(i instanceof sh))return!1;const l=i;if(this.width!==l.width||this.height!==l.height)return!1;for(let d=0,h=this.height;d<h;++d){const m=this.bytes[d],g=l.bytes[d];for(let y=0,A=this.width;y<A;++y)if(m[y]!==g[y])return!1}return!0}toString(){const i=new q;for(let l=0,d=this.height;l<d;++l){const h=this.bytes[l];for(let m=0,g=this.width;m<g;++m)switch(h[m]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()}}class po{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const i=new q;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()}setMode(i){this.mode=i}setECLevel(i){this.ecLevel=i}setVersion(i){this.version=i}setMaskPattern(i){this.maskPattern=i}setMatrix(i){this.matrix=i}static isValidMaskPattern(i){return i>=0&&i<po.NUM_MASK_PATTERNS}}po.NUM_MASK_PATTERNS=8;class Qt extends p{}Qt.kind="WriterException";class st{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,l,d,h,m){st.clearMatrix(m),st.embedBasicPatterns(d,m),st.embedTypeInfo(l,h,m),st.maybeEmbedVersionInfo(d,m),st.embedDataBits(i,h,m)}static embedBasicPatterns(i,l){st.embedPositionDetectionPatternsAndSeparators(l),st.embedDarkDotAtLeftBottomCorner(l),st.maybeEmbedPositionAdjustmentPatterns(i,l),st.embedTimingPatterns(l)}static embedTypeInfo(i,l,d){const h=new k;st.makeTypeInfoBits(i,l,h);for(let m=0,g=h.getSize();m<g;++m){const y=h.get(h.getSize()-1-m),A=st.TYPE_INFO_COORDINATES[m],I=A[0],D=A[1];if(d.setBoolean(I,D,y),m<8){const B=d.getWidth()-m-1;d.setBoolean(B,8,y)}else{const V=d.getHeight()-7+(m-8);d.setBoolean(8,V,y)}}}static maybeEmbedVersionInfo(i,l){if(i.getVersionNumber()<7)return;const d=new k;st.makeVersionInfoBits(i,d);let h=6*3-1;for(let m=0;m<6;++m)for(let g=0;g<3;++g){const y=d.get(h);h--,l.setBoolean(m,l.getHeight()-11+g,y),l.setBoolean(l.getHeight()-11+g,m,y)}}static embedDataBits(i,l,d){let h=0,m=-1,g=d.getWidth()-1,y=d.getHeight()-1;for(;g>0;){for(g===6&&(g-=1);y>=0&&y<d.getHeight();){for(let A=0;A<2;++A){const I=g-A;if(!st.isEmpty(d.get(I,y)))continue;let D;h<i.getSize()?(D=i.get(h),++h):D=!1,l!==255&&_r.getDataMaskBit(l,I,y)&&(D=!D),d.setBoolean(I,y,D)}y+=m}m=-m,y+=m,g-=2}if(h!==i.getSize())throw new Qt("Not all bits consumed: "+h+"/"+i.getSize())}static findMSBSet(i){return 32-b.numberOfLeadingZeros(i)}static calculateBCHCode(i,l){if(l===0)throw new w("0 polynomial");const d=st.findMSBSet(l);for(i<<=d-1;st.findMSBSet(i)>=d;)i^=l<<st.findMSBSet(i)-d;return i}static makeTypeInfoBits(i,l,d){if(!po.isValidMaskPattern(l))throw new Qt("Invalid mask pattern");const h=i.getBits()<<3|l;d.appendBits(h,5);const m=st.calculateBCHCode(h,st.TYPE_INFO_POLY);d.appendBits(m,10);const g=new k;if(g.appendBits(st.TYPE_INFO_MASK_PATTERN,15),d.xor(g),d.getSize()!==15)throw new Qt("should not happen but we got: "+d.getSize())}static makeVersionInfoBits(i,l){l.appendBits(i.getVersionNumber(),6);const d=st.calculateBCHCode(i.getVersionNumber(),st.VERSION_INFO_POLY);if(l.appendBits(d,12),l.getSize()!==18)throw new Qt("should not happen but we got: "+l.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let l=8;l<i.getWidth()-8;++l){const d=(l+1)%2;st.isEmpty(i.get(l,6))&&i.setNumber(l,6,d),st.isEmpty(i.get(6,l))&&i.setNumber(6,l,d)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new Qt;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,l,d){for(let h=0;h<8;++h){if(!st.isEmpty(d.get(i+h,l)))throw new Qt;d.setNumber(i+h,l,0)}}static embedVerticalSeparationPattern(i,l,d){for(let h=0;h<7;++h){if(!st.isEmpty(d.get(i,l+h)))throw new Qt;d.setNumber(i,l+h,0)}}static embedPositionAdjustmentPattern(i,l,d){for(let h=0;h<5;++h){const m=st.POSITION_ADJUSTMENT_PATTERN[h];for(let g=0;g<5;++g)d.setNumber(i+g,l+h,m[g])}}static embedPositionDetectionPattern(i,l,d){for(let h=0;h<7;++h){const m=st.POSITION_DETECTION_PATTERN[h];for(let g=0;g<7;++g)d.setNumber(i+g,l+h,m[g])}}static embedPositionDetectionPatternsAndSeparators(i){const l=st.POSITION_DETECTION_PATTERN[0].length;st.embedPositionDetectionPattern(0,0,i),st.embedPositionDetectionPattern(i.getWidth()-l,0,i),st.embedPositionDetectionPattern(0,i.getWidth()-l,i);const d=8;st.embedHorizontalSeparationPattern(0,d-1,i),st.embedHorizontalSeparationPattern(i.getWidth()-d,d-1,i),st.embedHorizontalSeparationPattern(0,i.getWidth()-d,i);const h=7;st.embedVerticalSeparationPattern(h,0,i),st.embedVerticalSeparationPattern(i.getHeight()-h-1,0,i),st.embedVerticalSeparationPattern(h,i.getHeight()-h,i)}static maybeEmbedPositionAdjustmentPatterns(i,l){if(i.getVersionNumber()<2)return;const d=i.getVersionNumber()-1,h=st.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[d];for(let m=0,g=h.length;m!==g;m++){const y=h[m];if(y>=0)for(let A=0;A!==g;A++){const I=h[A];I>=0&&st.isEmpty(l.get(I,y))&&st.embedPositionAdjustmentPattern(I-2,y-2,l)}}}}st.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),st.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),st.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),st.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),st.VERSION_INFO_POLY=7973,st.TYPE_INFO_POLY=1335,st.TYPE_INFO_MASK_PATTERN=21522;class Qk{constructor(i,l){this.dataBytes=i,this.errorCorrectionBytes=l}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class ir{constructor(){}static calculateMaskPenalty(i){return _r.applyMaskPenaltyRule1(i)+_r.applyMaskPenaltyRule2(i)+_r.applyMaskPenaltyRule3(i)+_r.applyMaskPenaltyRule4(i)}static encode(i,l,d=null){let h=ir.DEFAULT_BYTE_MODE_ENCODING;const m=d!==null&&d.get(zr.CHARACTER_SET)!==void 0;m&&(h=d.get(zr.CHARACTER_SET).toString());const g=this.chooseMode(i,h),y=new k;if(g===rt.BYTE&&(m||ir.DEFAULT_BYTE_MODE_ENCODING!==h)){const Me=R.getCharacterSetECIByName(h);Me!==void 0&&this.appendECI(Me,y)}this.appendModeInfo(g,y);const A=new k;this.appendBytes(i,g,A,h);let I;if(d!==null&&d.get(zr.QR_VERSION)!==void 0){const Me=Number.parseInt(d.get(zr.QR_VERSION).toString(),10);I=et.getVersionForNumber(Me);const Re=this.calculateBitsNeeded(g,y,A,I);if(!this.willFit(Re,I,l))throw new Qt("Data too big for requested version")}else I=this.recommendVersion(l,g,y,A);const D=new k;D.appendBitArray(y);const B=g===rt.BYTE?A.getSizeInBytes():i.length;this.appendLengthInfo(B,I,g,D),D.appendBitArray(A);const V=I.getECBlocksForLevel(l),Z=I.getTotalCodewords()-V.getTotalECCodewords();this.terminateBits(Z,D);const oe=this.interleaveWithECBytes(D,I.getTotalCodewords(),Z,V.getNumBlocks()),le=new po;le.setECLevel(l),le.setMode(g),le.setVersion(I);const fe=I.getDimensionForVersion(),ve=new sh(fe,fe),De=this.chooseMaskPattern(oe,l,I,ve);return le.setMaskPattern(De),st.buildMatrix(oe,l,I,De,ve),le.setMatrix(ve),le}static recommendVersion(i,l,d,h){const m=this.calculateBitsNeeded(l,d,h,et.getVersionForNumber(1)),g=this.chooseVersion(m,i),y=this.calculateBitsNeeded(l,d,h,g);return this.chooseVersion(y,i)}static calculateBitsNeeded(i,l,d,h){return l.getSize()+i.getCharacterCountBits(h)+d.getSize()}static getAlphanumericCode(i){return i<ir.ALPHANUMERIC_TABLE.length?ir.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,l=null){if(R.SJIS.getName()===l&&this.isOnlyDoubleByteKanji(i))return rt.KANJI;let d=!1,h=!1;for(let m=0,g=i.length;m<g;++m){const y=i.charAt(m);if(ir.isDigit(y))d=!0;else if(this.getAlphanumericCode(y.charCodeAt(0))!==-1)h=!0;else return rt.BYTE}return h?rt.ALPHANUMERIC:d?rt.NUMERIC:rt.BYTE}static isOnlyDoubleByteKanji(i){let l;try{l=Y.encode(i,R.SJIS)}catch{return!1}const d=l.length;if(d%2!==0)return!1;for(let h=0;h<d;h+=2){const m=l[h]&255;if((m<129||m>159)&&(m<224||m>235))return!1}return!0}static chooseMaskPattern(i,l,d,h){let m=Number.MAX_SAFE_INTEGER,g=-1;for(let y=0;y<po.NUM_MASK_PATTERNS;y++){st.buildMatrix(i,l,d,y,h);let A=this.calculateMaskPenalty(h);A<m&&(m=A,g=y)}return g}static chooseVersion(i,l){for(let d=1;d<=40;d++){const h=et.getVersionForNumber(d);if(ir.willFit(i,h,l))return h}throw new Qt("Data too big")}static willFit(i,l,d){const h=l.getTotalCodewords(),g=l.getECBlocksForLevel(d).getTotalECCodewords(),y=h-g,A=(i+7)/8;return y>=A}static terminateBits(i,l){const d=i*8;if(l.getSize()>d)throw new Qt("data bits cannot fit in the QR Code"+l.getSize()+" > "+d);for(let g=0;g<4&&l.getSize()<d;++g)l.appendBit(!1);const h=l.getSize()&7;if(h>0)for(let g=h;g<8;g++)l.appendBit(!1);const m=i-l.getSizeInBytes();for(let g=0;g<m;++g)l.appendBits(g&1?17:236,8);if(l.getSize()!==d)throw new Qt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,l,d,h,m,g){if(h>=d)throw new Qt("Block ID too large");const y=i%d,A=d-y,I=Math.floor(i/d),D=I+1,B=Math.floor(l/d),V=B+1,Z=I-B,oe=D-V;if(Z!==oe)throw new Qt("EC bytes mismatch");if(d!==A+y)throw new Qt("RS blocks mismatch");if(i!==(B+Z)*A+(V+oe)*y)throw new Qt("Total bytes mismatch");h<A?(m[0]=B,g[0]=Z):(m[0]=V,g[0]=oe)}static interleaveWithECBytes(i,l,d,h){if(i.getSizeInBytes()!==d)throw new Qt("Number of bits and data bytes does not match");let m=0,g=0,y=0;const A=new Array;for(let D=0;D<h;++D){const B=new Int32Array(1),V=new Int32Array(1);ir.getNumDataBytesAndNumECBytesForBlockID(l,d,h,D,B,V);const Z=B[0],oe=new Uint8Array(Z);i.toBytes(8*m,oe,0,Z);const le=ir.generateECBytes(oe,V[0]);A.push(new Qk(oe,le)),g=Math.max(g,Z),y=Math.max(y,le.length),m+=B[0]}if(d!==m)throw new Qt("Data bytes does not match offset");const I=new k;for(let D=0;D<g;++D)for(const B of A){const V=B.getDataBytes();D<V.length&&I.appendBits(V[D],8)}for(let D=0;D<y;++D)for(const B of A){const V=B.getErrorCorrectionBytes();D<V.length&&I.appendBits(V[D],8)}if(l!==I.getSizeInBytes())throw new Qt("Interleaving error: "+l+" and "+I.getSizeInBytes()+" differ.");return I}static generateECBytes(i,l){const d=i.length,h=new Int32Array(d+l);for(let g=0;g<d;g++)h[g]=i[g]&255;new Sp(ue.QR_CODE_FIELD_256).encode(h,l);const m=new Uint8Array(l);for(let g=0;g<l;g++)m[g]=h[d+g];return m}static appendModeInfo(i,l){l.appendBits(i.getBits(),4)}static appendLengthInfo(i,l,d,h){const m=d.getCharacterCountBits(l);if(i>=1<<m)throw new Qt(i+" is bigger than "+((1<<m)-1));h.appendBits(i,m)}static appendBytes(i,l,d,h){switch(l){case rt.NUMERIC:ir.appendNumericBytes(i,d);break;case rt.ALPHANUMERIC:ir.appendAlphanumericBytes(i,d);break;case rt.BYTE:ir.append8BitBytes(i,d,h);break;case rt.KANJI:ir.appendKanjiBytes(i,d);break;default:throw new Qt("Invalid mode: "+l)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const l=ir.getDigit(i);return l>=0&&l<=9}static appendNumericBytes(i,l){const d=i.length;let h=0;for(;h<d;){const m=ir.getDigit(i.charAt(h));if(h+2<d){const g=ir.getDigit(i.charAt(h+1)),y=ir.getDigit(i.charAt(h+2));l.appendBits(m*100+g*10+y,10),h+=3}else if(h+1<d){const g=ir.getDigit(i.charAt(h+1));l.appendBits(m*10+g,7),h+=2}else l.appendBits(m,4),h++}}static appendAlphanumericBytes(i,l){const d=i.length;let h=0;for(;h<d;){const m=ir.getAlphanumericCode(i.charCodeAt(h));if(m===-1)throw new Qt;if(h+1<d){const g=ir.getAlphanumericCode(i.charCodeAt(h+1));if(g===-1)throw new Qt;l.appendBits(m*45+g,11),h+=2}else l.appendBits(m,6),h++}}static append8BitBytes(i,l,d){let h;try{h=Y.encode(i,d)}catch(m){throw new Qt(m)}for(let m=0,g=h.length;m!==g;m++){const y=h[m];l.appendBits(y,8)}}static appendKanjiBytes(i,l){let d;try{d=Y.encode(i,R.SJIS)}catch(m){throw new Qt(m)}const h=d.length;for(let m=0;m<h;m+=2){const g=d[m]&255,y=d[m+1]&255,A=g<<8&4294967295|y;let I=-1;if(A>=33088&&A<=40956?I=A-33088:A>=57408&&A<=60351&&(I=A-49472),I===-1)throw new Qt("Invalid byte sequence");const D=(I>>8)*192+(I&255);l.appendBits(D,13)}}static appendECI(i,l){l.appendBits(rt.ECI.getBits(),4),l.appendBits(i.getValue(),8)}}ir.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),ir.DEFAULT_BYTE_MODE_ENCODING=R.UTF8.getName();class go{write(i,l,d,h=null){if(i.length===0)throw new w("Found empty contents");if(l<0||d<0)throw new w("Requested dimensions are too small: "+l+"x"+d);let m=tr.L,g=go.QUIET_ZONE_SIZE;h!==null&&(h.get(zr.ERROR_CORRECTION)!==void 0&&(m=tr.fromString(h.get(zr.ERROR_CORRECTION).toString())),h.get(zr.MARGIN)!==void 0&&(g=Number.parseInt(h.get(zr.MARGIN).toString(),10)));const y=ir.encode(i,m,h);return this.renderResult(y,l,d,g)}writeToDom(i,l,d,h,m=null){typeof i=="string"&&(i=document.querySelector(i));const g=this.write(l,d,h,m);i&&i.appendChild(g)}renderResult(i,l,d,h){const m=i.getMatrix();if(m===null)throw new _e;const g=m.getWidth(),y=m.getHeight(),A=g+h*2,I=y+h*2,D=Math.max(l,A),B=Math.max(d,I),V=Math.min(Math.floor(D/A),Math.floor(B/I)),Z=Math.floor((D-g*V)/2),oe=Math.floor((B-y*V)/2),le=this.createSVGElement(D,B);for(let fe=0,ve=oe;fe<y;fe++,ve+=V)for(let De=0,Me=Z;De<g;De++,Me+=V)if(m.get(De,fe)===1){const Re=this.createSvgRectElement(Me,ve,V,V);le.appendChild(Re)}return le}createSVGElement(i,l){const d=document.createElementNS(go.SVG_NS,"svg");return d.setAttributeNS(null,"height",i.toString()),d.setAttributeNS(null,"width",l.toString()),d}createSvgRectElement(i,l,d,h){const m=document.createElementNS(go.SVG_NS,"rect");return m.setAttributeNS(null,"x",i.toString()),m.setAttributeNS(null,"y",l.toString()),m.setAttributeNS(null,"height",d.toString()),m.setAttributeNS(null,"width",h.toString()),m.setAttributeNS(null,"fill","#000000"),m}}go.QUIET_ZONE_SIZE=4,go.SVG_NS="http://www.w3.org/2000/svg";class _l{encode(i,l,d,h,m){if(i.length===0)throw new w("Found empty contents");if(l!==ce.QR_CODE)throw new w("Can only encode QR_CODE, but got "+l);if(d<0||h<0)throw new w(`Requested dimensions are too small: ${d}x${h}`);let g=tr.L,y=_l.QUIET_ZONE_SIZE;m!==null&&(m.get(zr.ERROR_CORRECTION)!==void 0&&(g=tr.fromString(m.get(zr.ERROR_CORRECTION).toString())),m.get(zr.MARGIN)!==void 0&&(y=Number.parseInt(m.get(zr.MARGIN).toString(),10)));const A=ir.encode(i,g,m);return _l.renderResult(A,d,h,y)}static renderResult(i,l,d,h){const m=i.getMatrix();if(m===null)throw new _e;const g=m.getWidth(),y=m.getHeight(),A=g+h*2,I=y+h*2,D=Math.max(l,A),B=Math.max(d,I),V=Math.min(Math.floor(D/A),Math.floor(B/I)),Z=Math.floor((D-g*V)/2),oe=Math.floor((B-y*V)/2),le=new ee(D,B);for(let fe=0,ve=oe;fe<y;fe++,ve+=V)for(let De=0,Me=Z;De<g;De++,Me+=V)m.get(De,fe)===1&&le.setRegion(Me,ve,V,V);return le}}_l.QUIET_ZONE_SIZE=4;class Zk{encode(i,l,d,h,m){let g;switch(l){case ce.QR_CODE:g=new _l;break;default:throw new w("No encoder available for format "+l)}return g.encode(i,l,d,h,m)}}class da extends ie{constructor(i,l,d,h,m,g,y,A){if(super(g,y),this.yuvData=i,this.dataWidth=l,this.dataHeight=d,this.left=h,this.top=m,h+g>l||m+y>d)throw new w("Crop rectangle does not fit within image data.");A&&this.reverseHorizontal(g,y)}getRow(i,l){if(i<0||i>=this.getHeight())throw new w("Requested row is outside the image: "+i);const d=this.getWidth();(l==null||l.length<d)&&(l=new Uint8ClampedArray(d));const h=(i+this.top)*this.dataWidth+this.left;return C.arraycopy(this.yuvData,h,l,0,d),l}getMatrix(){const i=this.getWidth(),l=this.getHeight();if(i===this.dataWidth&&l===this.dataHeight)return this.yuvData;const d=i*l,h=new Uint8ClampedArray(d);let m=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return C.arraycopy(this.yuvData,m,h,0,d),h;for(let g=0;g<l;g++){const y=g*i;C.arraycopy(this.yuvData,m,h,y,i),m+=this.dataWidth}return h}isCropSupported(){return!0}crop(i,l,d,h){return new da(this.yuvData,this.dataWidth,this.dataHeight,this.left+i,this.top+l,d,h,!1)}renderThumbnail(){const i=this.getWidth()/da.THUMBNAIL_SCALE_FACTOR,l=this.getHeight()/da.THUMBNAIL_SCALE_FACTOR,d=new Int32Array(i*l),h=this.yuvData;let m=this.top*this.dataWidth+this.left;for(let g=0;g<l;g++){const y=g*i;for(let A=0;A<i;A++){const I=h[m+A*da.THUMBNAIL_SCALE_FACTOR]&255;d[y+A]=4278190080|I*65793}m+=this.dataWidth*da.THUMBNAIL_SCALE_FACTOR}return d}getThumbnailWidth(){return this.getWidth()/da.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/da.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(i,l){const d=this.yuvData;for(let h=0,m=this.top*this.dataWidth+this.left;h<l;h++,m+=this.dataWidth){const g=m+i/2;for(let y=m,A=m+i-1;y<g;y++,A--){const I=d[y];d[y]=d[A],d[A]=I}}}invert(){return new te(this)}}da.THUMBNAIL_SCALE_FACTOR=2;class Ap extends ie{constructor(i,l,d,h,m,g,y){if(super(l,d),this.dataWidth=h,this.dataHeight=m,this.left=g,this.top=y,i.BYTES_PER_ELEMENT===4){const A=l*d,I=new Uint8ClampedArray(A);for(let D=0;D<A;D++){const B=i[D],V=B>>16&255,Z=B>>7&510,oe=B&255;I[D]=(V+Z+oe)/4&255}this.luminances=I}else this.luminances=i;if(h===void 0&&(this.dataWidth=l),m===void 0&&(this.dataHeight=d),g===void 0&&(this.left=0),y===void 0&&(this.top=0),this.left+l>this.dataWidth||this.top+d>this.dataHeight)throw new w("Crop rectangle does not fit within image data.")}getRow(i,l){if(i<0||i>=this.getHeight())throw new w("Requested row is outside the image: "+i);const d=this.getWidth();(l==null||l.length<d)&&(l=new Uint8ClampedArray(d));const h=(i+this.top)*this.dataWidth+this.left;return C.arraycopy(this.luminances,h,l,0,d),l}getMatrix(){const i=this.getWidth(),l=this.getHeight();if(i===this.dataWidth&&l===this.dataHeight)return this.luminances;const d=i*l,h=new Uint8ClampedArray(d);let m=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return C.arraycopy(this.luminances,m,h,0,d),h;for(let g=0;g<l;g++){const y=g*i;C.arraycopy(this.luminances,m,h,y,i),m+=this.dataWidth}return h}isCropSupported(){return!0}crop(i,l,d,h){return new Ap(this.luminances,d,h,this.dataWidth,this.dataHeight,this.left+i,this.top+l)}invert(){return new te(this)}}class Yv extends R{static forName(i){return this.getCharacterSetECIByName(i)}}class kp{}kp.ISO_8859_1=R.ISO8859_1;class Qv{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class Zv{static singletonList(i){return[i]}static min(i,l){return i.sort(l)[0]}}class Jk{constructor(i){this.previous=i}getPrevious(){return this.previous}}class Nl extends Jk{constructor(i,l,d){super(i),this.value=l,this.bitCount=d}appendTo(i,l){i.appendBits(this.value,this.bitCount)}add(i,l){return new Nl(this,i,l)}addBinaryShift(i,l){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Nl(this,i,l)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+b.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class Tp extends Nl{constructor(i,l,d){super(i,0,0),this.binaryShiftStart=l,this.binaryShiftByteCount=d}appendTo(i,l){for(let d=0;d<this.binaryShiftByteCount;d++)(d===0||d===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):d===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(l[this.binaryShiftStart+d],8)}addBinaryShift(i,l){return new Tp(this,i,l)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function eT(F,i,l){return new Tp(F,i,l)}function nd(F,i,l){return new Nl(F,i,l)}const tT=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],li=0,ah=1,ys=2,Jv=3,ua=4,rT=new Nl(null,0,0),Ip=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function nT(F){for(let i of F)S.fill(i,-1);return F[li][ua]=0,F[ah][ua]=0,F[ah][li]=28,F[Jv][ua]=0,F[ys][ua]=0,F[ys][li]=15,F}const ew=nT(S.createInt32Array(6,6));class ha{constructor(i,l,d,h){this.token=i,this.mode=l,this.binaryShiftByteCount=d,this.bitCount=h}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,l){let d=this.bitCount,h=this.token;if(i!==this.mode){let g=Ip[this.mode][i];h=nd(h,g&65535,g>>16),d+=g>>16}let m=i===ys?4:5;return h=nd(h,l,m),new ha(h,i,0,d+m)}shiftAndAppend(i,l){let d=this.token,h=this.mode===ys?4:5;return d=nd(d,ew[this.mode][i],h),d=nd(d,l,5),new ha(d,this.mode,0,this.bitCount+h+5)}addBinaryShiftChar(i){let l=this.token,d=this.mode,h=this.bitCount;if(this.mode===ua||this.mode===ys){let y=Ip[d][li];l=nd(l,y&65535,y>>16),h+=y>>16,d=li}let m=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,g=new ha(l,d,this.binaryShiftByteCount+1,h+m);return g.binaryShiftByteCount===2078&&(g=g.endBinaryShift(i+1)),g}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let l=this.token;return l=eT(l,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new ha(l,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let l=this.bitCount+(Ip[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?l+=ha.calculateBinaryShiftCost(i)-ha.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(l+=10),l<=i.bitCount}toBitArray(i){let l=[];for(let h=this.endBinaryShift(i.length).token;h!==null;h=h.getPrevious())l.unshift(h);let d=new k;for(const h of l)h.appendTo(d,i);return d}toString(){return z.format("%s bits=%d bytes=%d",tT[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}ha.INITIAL_STATE=new ha(rT,li,0,0);function sT(F){const i=z.getCharCode(" "),l=z.getCharCode("."),d=z.getCharCode(",");F[li][i]=1;const h=z.getCharCode("Z"),m=z.getCharCode("A");for(let V=m;V<=h;V++)F[li][V]=V-m+2;F[ah][i]=1;const g=z.getCharCode("z"),y=z.getCharCode("a");for(let V=y;V<=g;V++)F[ah][V]=V-y+2;F[ys][i]=1;const A=z.getCharCode("9"),I=z.getCharCode("0");for(let V=I;V<=A;V++)F[ys][V]=V-I+2;F[ys][d]=12,F[ys][l]=13;const D=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let V=0;V<D.length;V++)F[Jv][z.getCharCode(D[V])]=V;const B=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let V=0;V<B.length;V++)z.getCharCode(B[V])>0&&(F[ua][z.getCharCode(B[V])]=V);return F}const Rp=sT(S.createInt32Array(5,256));class sd{constructor(i){this.text=i}encode(){const i=z.getCharCode(" "),l=z.getCharCode(`
`);let d=Zv.singletonList(ha.INITIAL_STATE);for(let m=0;m<this.text.length;m++){let g,y=m+1<this.text.length?this.text[m+1]:0;switch(this.text[m]){case z.getCharCode("\r"):g=y===l?2:0;break;case z.getCharCode("."):g=y===i?3:0;break;case z.getCharCode(","):g=y===i?4:0;break;case z.getCharCode(":"):g=y===i?5:0;break;default:g=0}g>0?(d=sd.updateStateListForPair(d,m,g),m++):d=this.updateStateListForChar(d,m)}return Zv.min(d,(m,g)=>m.getBitCount()-g.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,l){const d=[];for(let h of i)this.updateStateForChar(h,l,d);return sd.simplifyStates(d)}updateStateForChar(i,l,d){let h=this.text[l]&255,m=Rp[i.getMode()][h]>0,g=null;for(let y=0;y<=ua;y++){let A=Rp[y][h];if(A>0){if(g==null&&(g=i.endBinaryShift(l)),!m||y===i.getMode()||y===ys){const I=g.latchAndAppend(y,A);d.push(I)}if(!m&&ew[i.getMode()][y]>=0){const I=g.shiftAndAppend(y,A);d.push(I)}}}if(i.getBinaryShiftByteCount()>0||Rp[i.getMode()][h]===0){let y=i.addBinaryShiftChar(l);d.push(y)}}static updateStateListForPair(i,l,d){const h=[];for(let m of i)this.updateStateForPair(m,l,d,h);return this.simplifyStates(h)}static updateStateForPair(i,l,d,h){let m=i.endBinaryShift(l);if(h.push(m.latchAndAppend(ua,d)),i.getMode()!==ua&&h.push(m.shiftAndAppend(ua,d)),d===3||d===4){let g=m.latchAndAppend(ys,16-d).latchAndAppend(ys,1);h.push(g)}if(i.getBinaryShiftByteCount()>0){let g=i.addBinaryShiftChar(l).addBinaryShiftChar(l+1);h.push(g)}}static simplifyStates(i){let l=[];for(const d of i){let h=!0;for(const m of l){if(m.isBetterThanOrEqualTo(d)){h=!1;break}d.isBetterThanOrEqualTo(m)&&(l=l.filter(g=>g!==m))}h&&l.push(d)}return l}}class Mt{constructor(){}static encodeBytes(i){return Mt.encode(i,Mt.DEFAULT_EC_PERCENT,Mt.DEFAULT_AZTEC_LAYERS)}static encode(i,l,d){let h=new sd(i).encode(),m=b.truncDivision(h.getSize()*l,100)+11,g=h.getSize()+m,y,A,I,D,B;if(d!==Mt.DEFAULT_AZTEC_LAYERS){if(y=d<0,A=Math.abs(d),A>(y?Mt.MAX_NB_BITS_COMPACT:Mt.MAX_NB_BITS))throw new w(z.format("Illegal value %s for layers",d));I=Mt.totalBitsInLayer(A,y),D=Mt.WORD_SIZE[A];let Re=I-I%D;if(B=Mt.stuffBits(h,D),B.getSize()+m>Re)throw new w("Data to large for user specified layer");if(y&&B.getSize()>D*64)throw new w("Data to large for user specified layer")}else{D=0,B=null;for(let Re=0;;Re++){if(Re>Mt.MAX_NB_BITS)throw new w("Data too large for an Aztec code");if(y=Re<=3,A=y?Re+1:Re,I=Mt.totalBitsInLayer(A,y),g>I)continue;(B==null||D!==Mt.WORD_SIZE[A])&&(D=Mt.WORD_SIZE[A],B=Mt.stuffBits(h,D));let Ct=I-I%D;if(!(y&&B.getSize()>D*64)&&B.getSize()+m<=Ct)break}}let V=Mt.generateCheckWords(B,I,D),Z=B.getSize()/D,oe=Mt.generateModeMessage(y,A,Z),le=(y?11:14)+A*4,fe=new Int32Array(le),ve;if(y){ve=le;for(let Re=0;Re<fe.length;Re++)fe[Re]=Re}else{ve=le+1+2*b.truncDivision(b.truncDivision(le,2)-1,15);let Re=b.truncDivision(le,2),Ct=b.truncDivision(ve,2);for(let pt=0;pt<Re;pt++){let Mn=pt+b.truncDivision(pt,15);fe[Re-pt-1]=Ct-Mn-1,fe[Re+pt]=Ct+Mn+1}}let De=new ee(ve);for(let Re=0,Ct=0;Re<A;Re++){let pt=(A-Re)*4+(y?9:12);for(let Mn=0;Mn<pt;Mn++){let zs=Mn*2;for(let Ln=0;Ln<2;Ln++)V.get(Ct+zs+Ln)&&De.set(fe[Re*2+Ln],fe[Re*2+Mn]),V.get(Ct+pt*2+zs+Ln)&&De.set(fe[Re*2+Mn],fe[le-1-Re*2-Ln]),V.get(Ct+pt*4+zs+Ln)&&De.set(fe[le-1-Re*2-Ln],fe[le-1-Re*2-Mn]),V.get(Ct+pt*6+zs+Ln)&&De.set(fe[le-1-Re*2-Mn],fe[Re*2+Ln])}Ct+=pt*8}if(Mt.drawModeMessage(De,y,ve,oe),y)Mt.drawBullsEye(De,b.truncDivision(ve,2),5);else{Mt.drawBullsEye(De,b.truncDivision(ve,2),7);for(let Re=0,Ct=0;Re<b.truncDivision(le,2)-1;Re+=15,Ct+=16)for(let pt=b.truncDivision(ve,2)&1;pt<ve;pt+=2)De.set(b.truncDivision(ve,2)-Ct,pt),De.set(b.truncDivision(ve,2)+Ct,pt),De.set(pt,b.truncDivision(ve,2)-Ct),De.set(pt,b.truncDivision(ve,2)+Ct)}let Me=new Qv;return Me.setCompact(y),Me.setSize(ve),Me.setLayers(A),Me.setCodeWords(Z),Me.setMatrix(De),Me}static drawBullsEye(i,l,d){for(let h=0;h<d;h+=2)for(let m=l-h;m<=l+h;m++)i.set(m,l-h),i.set(m,l+h),i.set(l-h,m),i.set(l+h,m);i.set(l-d,l-d),i.set(l-d+1,l-d),i.set(l-d,l-d+1),i.set(l+d,l-d),i.set(l+d,l-d+1),i.set(l+d,l+d-1)}static generateModeMessage(i,l,d){let h=new k;return i?(h.appendBits(l-1,2),h.appendBits(d-1,6),h=Mt.generateCheckWords(h,28,4)):(h.appendBits(l-1,5),h.appendBits(d-1,11),h=Mt.generateCheckWords(h,40,4)),h}static drawModeMessage(i,l,d,h){let m=b.truncDivision(d,2);if(l)for(let g=0;g<7;g++){let y=m-3+g;h.get(g)&&i.set(y,m-5),h.get(g+7)&&i.set(m+5,y),h.get(20-g)&&i.set(y,m+5),h.get(27-g)&&i.set(m-5,y)}else for(let g=0;g<10;g++){let y=m-5+g+b.truncDivision(g,5);h.get(g)&&i.set(y,m-7),h.get(g+10)&&i.set(m+7,y),h.get(29-g)&&i.set(y,m+7),h.get(39-g)&&i.set(m-7,y)}}static generateCheckWords(i,l,d){let h=i.getSize()/d,m=new Sp(Mt.getGF(d)),g=b.truncDivision(l,d),y=Mt.bitsToWords(i,d,g);m.encode(y,g-h);let A=l%d,I=new k;I.appendBits(0,A);for(const D of Array.from(y))I.appendBits(D,d);return I}static bitsToWords(i,l,d){let h=new Int32Array(d),m,g;for(m=0,g=i.getSize()/l;m<g;m++){let y=0;for(let A=0;A<l;A++)y|=i.get(m*l+A)?1<<l-A-1:0;h[m]=y}return h}static getGF(i){switch(i){case 4:return ue.AZTEC_PARAM;case 6:return ue.AZTEC_DATA_6;case 8:return ue.AZTEC_DATA_8;case 10:return ue.AZTEC_DATA_10;case 12:return ue.AZTEC_DATA_12;default:throw new w("Unsupported word size "+i)}}static stuffBits(i,l){let d=new k,h=i.getSize(),m=(1<<l)-2;for(let g=0;g<h;g+=l){let y=0;for(let A=0;A<l;A++)(g+A>=h||i.get(g+A))&&(y|=1<<l-1-A);(y&m)===m?(d.appendBits(y&m,l),g--):y&m?d.appendBits(y,l):(d.appendBits(y|1,l),g--)}return d}static totalBitsInLayer(i,l){return((l?88:112)+16*i)*i}}Mt.DEFAULT_EC_PERCENT=33,Mt.DEFAULT_AZTEC_LAYERS=0,Mt.MAX_NB_BITS=32,Mt.MAX_NB_BITS_COMPACT=4,Mt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ih{encode(i,l,d,h){return this.encodeWithHints(i,l,d,h,null)}encodeWithHints(i,l,d,h,m){let g=kp.ISO_8859_1,y=Mt.DEFAULT_EC_PERCENT,A=Mt.DEFAULT_AZTEC_LAYERS;return m!=null&&(m.has(zr.CHARACTER_SET)&&(g=Yv.forName(m.get(zr.CHARACTER_SET).toString())),m.has(zr.ERROR_CORRECTION)&&(y=b.parseInt(m.get(zr.ERROR_CORRECTION).toString())),m.has(zr.AZTEC_LAYERS)&&(A=b.parseInt(m.get(zr.AZTEC_LAYERS).toString()))),ih.encodeLayers(i,l,d,h,g,y,A)}static encodeLayers(i,l,d,h,m,g,y){if(l!==ce.AZTEC)throw new w("Can only encode AZTEC, but got "+l);let A=Mt.encode(z.getBytes(i,m),g,y);return ih.renderResult(A,d,h)}static renderResult(i,l,d){let h=i.getMatrix();if(h==null)throw new _e;let m=h.getWidth(),g=h.getHeight(),y=Math.max(l,m),A=Math.max(d,g),I=Math.min(y/m,A/g),D=(y-m*I)/2,B=(A-g*I)/2,V=new ee(y,A);for(let Z=0,oe=B;Z<g;Z++,oe+=I)for(let le=0,fe=D;le<m;le++,fe+=I)h.get(le,Z)&&V.setRegion(fe,oe,I,I);return V}}r.AbstractExpandedDecoder=xp,r.ArgumentException=x,r.ArithmeticException=Ee,r.AztecCode=Qv,r.AztecCodeReader=ut,r.AztecCodeWriter=ih,r.AztecDecoder=ze,r.AztecDetector=Se,r.AztecDetectorResult=at,r.AztecEncoder=Mt,r.AztecHighLevelEncoder=sd,r.AztecPoint=Ve,r.BarcodeFormat=ce,r.Binarizer=N,r.BinaryBitmap=_,r.BitArray=k,r.BitMatrix=ee,r.BitSource=bp,r.BrowserAztecCodeReader=lt,r.BrowserBarcodeReader=Dk,r.BrowserCodeReader=J,r.BrowserDatamatrixCodeReader=Lk,r.BrowserMultiFormatReader=Xk,r.BrowserPDF417Reader=Kk,r.BrowserQRCodeReader=Yk,r.BrowserQRCodeSvgWriter=go,r.CharacterSetECI=R,r.ChecksumException=j,r.Code128Reader=Te,r.Code39Reader=Dt,r.DataMatrixDecodedBitStreamParser=si,r.DataMatrixReader=ai,r.DecodeHintType=L,r.DecoderResult=Ae,r.DefaultGridSampler=Sr,r.DetectorResult=Je,r.EAN13Reader=fn,r.EncodeHintType=zr,r.Exception=p,r.FormatException=P,r.GenericGF=ue,r.GenericGFPoly=Be,r.GlobalHistogramBinarizer=re,r.GridSampler=ar,r.GridSamplerInstance=At,r.HTMLCanvasElementLuminanceSource=ye,r.HybridBinarizer=ae,r.ITFReader=mt,r.IllegalArgumentException=w,r.IllegalStateException=_e,r.InvertedLuminanceSource=te,r.LuminanceSource=ie,r.MathUtils=He,r.MultiFormatOneDReader=yl,r.MultiFormatReader=Kv,r.MultiFormatWriter=Zk,r.NotFoundException=H,r.OneDReader=ft,r.PDF417DecodedBitStreamParser=xe,r.PDF417DecoderErrorCorrection=Vv,r.PDF417Reader=en,r.PDF417ResultMetadata=Wv,r.PerspectiveTransform=Nt,r.PlanarYUVLuminanceSource=da,r.QRCodeByteMatrix=sh,r.QRCodeDataMask=vs,r.QRCodeDecodedBitStreamParser=pr,r.QRCodeDecoderErrorCorrectionLevel=tr,r.QRCodeDecoderFormatInformation=pn,r.QRCodeEncoder=ir,r.QRCodeEncoderQRCode=po,r.QRCodeMaskUtil=_r,r.QRCodeMatrixUtil=st,r.QRCodeMode=rt,r.QRCodeReader=ii,r.QRCodeVersion=et,r.QRCodeWriter=_l,r.RGBLuminanceSource=Ap,r.RSS14Reader=br,r.RSSExpandedReader=ke,r.ReaderException=nh,r.ReedSolomonDecoder=Ze,r.ReedSolomonEncoder=Sp,r.ReedSolomonException=Fe,r.Result=G,r.ResultMetadataType=he,r.ResultPoint=pe,r.StringUtils=z,r.UnsupportedOperationException=$,r.VideoInputDevice=ge,r.WhiteRectangleDetector=it,r.WriterException=Qt,r.ZXingArrays=S,r.ZXingCharset=Yv,r.ZXingInteger=b,r.ZXingStandardCharsets=kp,r.ZXingStringBuilder=q,r.ZXingStringEncoding=Y,r.ZXingSystem=C,r.createAbstractExpandedDecoder=Uv,Object.defineProperty(r,"__esModule",{value:!0})})})(v0,v0.exports);var cr=v0.exports;const z$=E0(cr),U$=D2({__proto__:null,default:z$},[cr]);var l2=function(){function e(t,r,s){if(this.formatMap=new Map([[Ye.QR_CODE,cr.BarcodeFormat.QR_CODE],[Ye.AZTEC,cr.BarcodeFormat.AZTEC],[Ye.CODABAR,cr.BarcodeFormat.CODABAR],[Ye.CODE_39,cr.BarcodeFormat.CODE_39],[Ye.CODE_93,cr.BarcodeFormat.CODE_93],[Ye.CODE_128,cr.BarcodeFormat.CODE_128],[Ye.DATA_MATRIX,cr.BarcodeFormat.DATA_MATRIX],[Ye.MAXICODE,cr.BarcodeFormat.MAXICODE],[Ye.ITF,cr.BarcodeFormat.ITF],[Ye.EAN_13,cr.BarcodeFormat.EAN_13],[Ye.EAN_8,cr.BarcodeFormat.EAN_8],[Ye.PDF_417,cr.BarcodeFormat.PDF_417],[Ye.RSS_14,cr.BarcodeFormat.RSS_14],[Ye.RSS_EXPANDED,cr.BarcodeFormat.RSS_EXPANDED],[Ye.UPC_A,cr.BarcodeFormat.UPC_A],[Ye.UPC_E,cr.BarcodeFormat.UPC_E],[Ye.UPC_EAN_EXTENSION,cr.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!U$)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=s;var a=this.createZXingFormats(t),o=new Map;o.set(cr.DecodeHintType.POSSIBLE_FORMATS,a),o.set(cr.DecodeHintType.TRY_HARDER,!1),this.hints=o}return e.prototype.decodeAsync=function(t){var r=this;return new Promise(function(s,a){try{s(r.decode(t))}catch(o){a(o)}})},e.prototype.decode=function(t){var r=new cr.MultiFormatReader(this.verbose,this.hints),s=new cr.HTMLCanvasElementLuminanceSource(t),a=new cr.BinaryBitmap(new cr.HybridBinarizer(s)),o=r.decode(a);return{text:o.text,format:iA.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,s,a){t.set(r,s)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var r=[],s=0,a=t;s<a.length;s++){var o=a[s];this.formatMap.has(o)?r.push(this.formatMap.get(o)):this.logger.logError("".concat(o," is not supported by")+"ZXingHtml5QrcodeShim")}return r},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),$$=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{p(s.next(x))}catch(w){c(w)}}function f(x){try{p(s.throw(x))}catch(w){c(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})},V$=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},s,a,o,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(p){return function(x){return f([p,x])}}function f(p){if(s)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(r=0)),r;)try{if(s=1,a&&(o=p[0]&2?a.return:p[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,p[1])).done)return o;switch(a=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,a=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){r.label=p[1];break}if(p[0]===6&&r.label<o[1]){r.label=o[1],o=p;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(p);break}o[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(x){p=[6,x],a=0}finally{s=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},c2=function(){function e(t,r,s){if(this.formatMap=new Map([[Ye.QR_CODE,"qr_code"],[Ye.AZTEC,"aztec"],[Ye.CODABAR,"codabar"],[Ye.CODE_39,"code_39"],[Ye.CODE_93,"code_93"],[Ye.CODE_128,"code_128"],[Ye.DATA_MATRIX,"data_matrix"],[Ye.ITF,"itf"],[Ye.EAN_13,"ean_13"],[Ye.EAN_8,"ean_8"],[Ye.PDF_417,"pdf417"],[Ye.UPC_A,"upc_a"],[Ye.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=s;var a=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return $$(this,void 0,void 0,function(){var r,s;return V$(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(t)];case 1:if(r=a.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return s=this.selectLargestBarcode(r),[2,{text:s.rawValue,format:iA.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var r=null,s=0,a=0,o=t;a<o.length;a++){var c=o[a],u=c.boundingBox.width*c.boundingBox.height;u>s&&(s=u,r=c)}if(!r)throw"No largest barcode found";return r},e.prototype.createBarcodeDetectorFormats=function(t){for(var r=[],s=0,a=t;s<a.length;s++){var o=a[s];this.formatMap.has(o)?r.push(this.formatMap.get(o)):this.logger.warn("".concat(o," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,s,a){t.set(r,s)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),d2=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{p(s.next(x))}catch(w){c(w)}}function f(x){try{p(s.throw(x))}catch(w){c(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})},u2=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},s,a,o,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(p){return function(x){return f([p,x])}}function f(p){if(s)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(r=0)),r;)try{if(s=1,a&&(o=p[0]&2?a.return:p[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,p[1])).done)return o;switch(a=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,a=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){r.label=p[1];break}if(p[0]===6&&r.label<o[1]){r.label=o[1],o=p;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(p);break}o[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(x){p=[6,x],a=0}finally{s=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},q$=function(){function e(t,r,s,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=s,r&&c2.isSupported()?(this.primaryDecoder=new c2(t,s,a),this.secondaryDecoder=new l2(t,s,a)):this.primaryDecoder=new l2(t,s,a)}return e.prototype.decodeAsync=function(t){return d2(this,void 0,void 0,function(){var r;return u2(this,function(s){switch(s.label){case 0:r=performance.now(),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,s.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return d2(this,void 0,void 0,function(){var r,s;return u2(this,function(a){switch(a.label){case 0:r=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,a.sent()];case 3:if(s=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw s;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var r=performance.now()-t;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,r=0,s=this.executionResults;r<s.length;r++){var a=s[r];t+=a}var o=t/this.executionResults.length;console.log("".concat(o," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),Sv=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(s[o]=a[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),em=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{p(s.next(x))}catch(w){c(w)}}function f(x){try{p(s.throw(x))}catch(w){c(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})},tm=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},s,a,o,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(p){return function(x){return f([p,x])}}function f(p){if(s)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(r=0)),r;)try{if(s=1,a&&(o=p[0]&2?a.return:p[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,p[1])).done)return o;switch(a=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,a=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){r.label=p[1];break}if(p[0]===6&&r.label<o[1]){r.label=o[1],o=p;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(p);break}o[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(x){p=[6,x],a=0}finally{s=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},lA=function(){function e(t,r){this.name=t,this.track=r}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var r={};r[this.name]=t;var s={advanced:[r]};return this.track.applyConstraints(s)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var r=t[this.name];return r}return null},e}(),W$=function(e){Sv(t,e);function t(r,s){return e.call(this,r,s)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(r){var s={};s[this.name]=r;var a={advanced:[s]};return this.track.applyConstraints(a)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),s=r[this.name];return{min:s.min,max:s.max,step:s.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(lA),H$=function(e){Sv(t,e);function t(r){return e.call(this,"zoom",r)||this}return t}(W$),G$=function(e){Sv(t,e);function t(r){return e.call(this,"torch",r)||this}return t}(lA),X$=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new H$(this.track)},e.prototype.torchFeature=function(){return new G$(this.track)},e}(),K$=function(){function e(t,r,s){this.isClosed=!1,this.parentElement=t,this.mediaStream=r,this.callbacks=s,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var r=document.createElement("video");return r.style.width="".concat(t,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var s=t.surface.clientWidth,a=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(s,a),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,r,s,a){return em(this,void 0,void 0,function(){var o,c;return tm(this,function(u){switch(u.label){case 0:return o=new e(t,r,a),s.aspectRatio?(c={aspectRatio:s.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(c)]):[3,2];case 1:u.sent(),u.label=2;case 2:return o.setupSurface(),[2,o]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var r=this,s=function(){setTimeout(t,200),r.surface.removeEventListener("playing",s)};this.surface.addEventListener("playing",s),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return em(this,void 0,void 0,function(){return tm(this,function(r){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(r,s){var a=t.mediaStream.getVideoTracks(),o=a.length,c=0;t.mediaStream.getVideoTracks().forEach(function(u){t.mediaStream.removeTrack(u),u.stop(),++c,c>=o&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),r())})})},e.prototype.getCapabilities=function(){return new X$(this.getFirstTrackOrFail())},e}(),Y$=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,r,s){return em(this,void 0,void 0,function(){return tm(this,function(a){return[2,K$.create(t,this.mediaStream,r,s)]})})},e.create=function(t){return em(this,void 0,void 0,function(){var r,s;return tm(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return s=a.sent(),[2,new e(s)]}})})},e}(),h2=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{p(s.next(x))}catch(w){c(w)}}function f(x){try{p(s.throw(x))}catch(w){c(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})},f2=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},s,a,o,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(p){return function(x){return f([p,x])}}function f(p){if(s)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(r=0)),r;)try{if(s=1,a&&(o=p[0]&2?a.return:p[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,p[1])).done)return o;switch(a=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,a=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){r.label=p[1];break}if(p[0]===6&&r.label<o[1]){r.label=o[1],o=p;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(p);break}o[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(x){p=[6,x],a=0}finally{s=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Q$=function(){function e(){}return e.failIfNotSupported=function(){return h2(this,void 0,void 0,function(){return f2(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return h2(this,void 0,void 0,function(){return f2(this,function(r){return[2,Y$.create(t)]})})},e}(),Z$=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{p(s.next(x))}catch(w){c(w)}}function f(x){try{p(s.throw(x))}catch(w){c(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})},J$=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},s,a,o,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(p){return function(x){return f([p,x])}}function f(p){if(s)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(r=0)),r;)try{if(s=1,a&&(o=p[0]&2?a.return:p[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,p[1])).done)return o;switch(a=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,a=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){r.label=p[1];break}if(p[0]===6&&r.label<o[1]){r.label=o[1],o=p;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(p);break}o[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(x){p=[6,x],a=0}finally{s=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},eV=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Jl.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Jl.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return Z$(this,void 0,void 0,function(){var t,r,s,a,o,c,u;return J$(this,function(f){switch(f.label){case 0:return t=function(p){for(var x=p.getVideoTracks(),w=0,_=x;w<_.length;w++){var j=_[w];j.enabled=!1,j.stop(),p.removeTrack(j)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=f.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(s=f.sent(),a=[],o=0,c=s;o<c.length;o++)u=c[o],u.kind==="videoinput"&&a.push({id:u.deviceId,label:u.label});return t(r),[2,a]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,r){var s=function(o){for(var c=[],u=0,f=o;u<f.length;u++){var p=f[u];p.kind==="video"&&c.push({id:p.id,label:p.label})}t(c)},a=MediaStreamTrack;a.getSources(s)})},e}(),jr;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(jr||(jr={}));var tV=function(){function e(){this.state=jr.NOT_STARTED,this.onGoingTransactionNewState=jr.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===jr.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=jr.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===jr.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=jr.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==jr.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case jr.UNKNOWN:throw"Transition from unknown is not allowed";case jr.NOT_STARTED:this.failIfNewStateIs(t,[jr.PAUSED]);break;case jr.SCANNING:break;case jr.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,r){for(var s=0,a=r;s<a.length;s++){var o=a[s];if(t===o)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),rV=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===jr.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==jr.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===jr.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===jr.PAUSED},e}(),nV=function(){function e(){}return e.create=function(){return new rV(new tV)},e}(),sV=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(s[o]=a[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),es=function(e){sV(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(L$),aV=function(){function e(t,r){this.logger=r,this.fps=es.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=es.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?oA.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!La(this.qrbox)},e.create=function(t,r){return new e(t,r)},e}(),iV=function(){function e(t,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var s;typeof r=="boolean"?this.verbose=r===!0:r&&(s=r,this.verbose=s.verbose===!0,s.experimentalFeatures),this.logger=new B$(this.verbose),this.qrcode=new q$(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(s),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=nV.create()}return e.prototype.start=function(t,r,s,a){var o=this;if(!t)throw"cameraIdOrConfig is required";if(!s||typeof s!="function")throw"qrCodeSuccessCallback is required and should be a function.";var c;a?c=a:c=this.verbose?this.logger.log:function(){};var u=aV.create(r,this.logger);this.clearElement();var f=!1;u.videoConstraints&&(u.isMediaStreamConstraintsValid()?f=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var p=f,x=document.getElementById(this.elementId);x.clientWidth?x.clientWidth:es.DEFAULT_WIDTH,x.style.position="relative",this.shouldScan=!0,this.element=x;var w=this,_=this.stateManagerProxy.startTransition(jr.SCANNING);return new Promise(function(j,N){var C=p?u.videoConstraints:w.createVideoConstraints(t);if(!C){_.cancel(),N("videoConstraints should be defined");return}var T={};(!p||u.aspectRatio)&&(T.aspectRatio=u.aspectRatio);var E={onRenderSurfaceReady:function(S,b){w.setupUi(S,b,u),w.isScanning=!0,w.foreverScan(u,s,c)}};Q$.failIfNotSupported().then(function(S){S.create(C).then(function(b){return b.render(o.element,T,E).then(function(k){w.renderedCamera=k,_.execute(),j(null)}).catch(function(k){_.cancel(),N(k)})}).catch(function(b){_.cancel(),N(Jl.errorGettingUserMedia(b))})}).catch(function(S){_.cancel(),N(Jl.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(jr.PAUSED),this.showPausedState(),(La(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,r=function(){t.stateManagerProxy.directTransition(jr.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(jr.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var s=function(){if(t.element){var o=document.getElementById(es.SHADED_REGION_ELEMENT_ID);o&&t.element.removeChild(o)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),s(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),r.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,r){return this.scanFileV2(t,r).then(function(s){return s.decodedText})},e.prototype.scanFileV2=function(t,r){var s=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(La(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,o){s.possiblyCloseLastScanImageFile(),s.clearElement(),s.lastScanImageFile=URL.createObjectURL(t);var c=new Image;c.onload=function(){var u=c.width,f=c.height,p=document.getElementById(s.elementId),x=p.clientWidth?p.clientWidth:es.DEFAULT_WIDTH,w=Math.max(p.clientHeight?p.clientHeight:f,es.FILE_SCAN_MIN_HEIGHT),_=s.computeCanvasDrawConfig(u,f,x,w);if(r){var j=s.createCanvasElement(x,w,"qr-canvas-visible");j.style.display="inline-block",p.appendChild(j);var N=j.getContext("2d");if(!N)throw"Unable to get 2d context from canvas";N.canvas.width=x,N.canvas.height=w,N.drawImage(c,0,0,u,f,_.x,_.y,_.width,_.height)}var C=es.FILE_SCAN_HIDDEN_CANVAS_PADDING,T=Math.max(c.width,_.width),E=Math.max(c.height,_.height),S=T+2*C,b=E+2*C,k=s.createCanvasElement(S,b);p.appendChild(k);var O=k.getContext("2d");if(!O)throw"Unable to get 2d context from canvas";O.canvas.width=S,O.canvas.height=b,O.drawImage(c,0,0,u,f,C,C,T,E);try{s.qrcode.decodeRobustlyAsync(k).then(function(L){a(o2.createFromQrcodeResult(L))}).catch(o)}catch(L){o("QR code parse error, error = ".concat(L))}},c.onerror=o,c.onabort=o,c.onstalled=o,c.onsuspend=o,c.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return eV.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!oA.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var r=[Ye.QR_CODE,Ye.AZTEC,Ye.CODABAR,Ye.CODE_39,Ye.CODE_93,Ye.CODE_128,Ye.DATA_MATRIX,Ye.MAXICODE,Ye.ITF,Ye.EAN_13,Ye.EAN_8,Ye.PDF_417,Ye.RSS_14,Ye.RSS_EXPANDED,Ye.UPC_A,Ye.UPC_E,Ye.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return r;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var s=[],a=0,o=t.formatsToSupport;a<o.length;a++){var c=o[a];M$(c)?s.push(c):this.logger.warn("Invalid format: ".concat(c," passed in config, ignoring."))}if(s.length===0)throw"None of formatsToSupport match supported values.";return s},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(La(t))return!0;if(!La(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(La(t.experimentalFeatures))return!0;var r=t.experimentalFeatures;return La(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,r,s){var a=this,o=s.qrbox;this.validateQrboxConfig(o);var c=this.toQrdimensions(t,r,o),u=function(p){if(p<es.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(es.MIN_QR_BOX_SIZE,"px.")},f=function(p){return p>t&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),p=t),p};u(c.width),u(c.height),c.width=f(c.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,r,s){if(typeof s=="number")return{width:s,height:s};if(typeof s=="function")try{return s(t,r)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return s},e.prototype.setupUi=function(t,r,s){s.isShadedBoxEnabled()&&this.validateQrboxSize(t,r,s);var a=La(s.qrbox)?{width:t,height:r}:s.qrbox;this.validateQrboxConfig(a);var o=this.toQrdimensions(t,r,a);o.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var c=s.isShadedBoxEnabled()&&o.height<=r,u={x:0,y:0,width:t,height:r},f=c?this.getShadedRegionBounds(t,r,o):u,p=this.createCanvasElement(f.width,f.height),x={willReadFrequently:!0},w=p.getContext("2d",x);w.canvas.width=f.width,w.canvas.height=f.height,this.element.append(p),c&&this.possiblyInsertShadingElement(this.element,t,r,o),this.createScannerPausedUiElement(this.element),this.qrRegion=f,this.context=w,this.canvasElement=p},e.prototype.createScannerPausedUiElement=function(t){var r=document.createElement("div");r.innerText=Jl.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",t.appendChild(r),this.scannerPausedUiElement=r},e.prototype.scanContext=function(t,r){var s=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return t(a.text,o2.createFromQrcodeResult(a)),s.possiblyUpdateShaders(!0),!0}).catch(function(a){s.possiblyUpdateShaders(!1);var o=Jl.codeParseError(a);return r(o,F$.createFrom(o)),!1})},e.prototype.foreverScan=function(t,r,s){var a=this;if(this.shouldScan&&this.renderedCamera){var o=this.renderedCamera.getSurface(),c=o.videoWidth/o.clientWidth,u=o.videoHeight/o.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var f=this.qrRegion.width*c,p=this.qrRegion.height*u,x=this.qrRegion.x*c,w=this.qrRegion.y*u;this.context.drawImage(o,x,w,f,p,0,0,this.qrRegion.width,this.qrRegion.height);var _=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(t,r,s)},a.getTimeoutFps(t.fps))};this.scanContext(r,s).then(function(j){!j&&t.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(r,s).finally(function(){_()})):_()}).catch(function(j){a.logger.logError("Error happend while scanning context",j),_()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var r="facingMode",s="deviceId",a={user:!0,environment:!0},o="exact",c=function(N){if(N in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(N,"'")},u=Object.keys(t);if(u.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(u.length," keys");var f=Object.keys(t)[0];if(f!==r&&f!==s)throw"Only '".concat(r,"' and '").concat(s,"' ")+" are supported for 'cameraIdOrConfig'";if(f===r){var p=t.facingMode;if(typeof p=="string"){if(c(p))return{facingMode:p}}else if(typeof p=="object")if(o in p){if(c(p["".concat(o)]))return{facingMode:{exact:p["".concat(o)]}}}else throw"'facingMode' should be string or object with"+" ".concat(o," as key.");else{var x=typeof p;throw"Invalid type of 'facingMode' = ".concat(x)}}else{var w=t.deviceId;if(typeof w=="string")return{deviceId:w};if(typeof w=="object"){if(o in w)return{deviceId:{exact:w["".concat(o)]}};throw"'deviceId' should be string or object with"+" ".concat(o," as key.")}else{var _=typeof w;throw"Invalid type of 'deviceId' = ".concat(_)}}}var j=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(j)},e.prototype.computeCanvasDrawConfig=function(t,r,s,a){if(t<=s&&r<=a){var o=(s-t)/2,c=(a-r)/2;return{x:o,y:c,width:t,height:r}}else{var u=t,f=r;return t>s&&(r=s/t*r,t=s),r>a&&(t=a/r*t,r=a),this.logger.log("Image downsampled from "+"".concat(u,"X").concat(f)+" to ".concat(t,"X").concat(r,".")),this.computeCanvasDrawConfig(t,r,s,a)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=t?es.BORDER_SHADER_MATCH_COLOR:es.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,r,s){var a=t,o=r,c=document.createElement("canvas");return c.style.width="".concat(a,"px"),c.style.height="".concat(o,"px"),c.style.display="none",c.id=La(s)?"qr-canvas":s,c},e.prototype.getShadedRegionBounds=function(t,r,s){if(s.width>t||s.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-s.width)/2,y:(r-s.height)/2,width:s.width,height:s.height}},e.prototype.possiblyInsertShadingElement=function(t,r,s,a){if(!(r-a.width<1||s-a.height<1)){var o=document.createElement("div");o.style.position="absolute";var c=(r-a.width)/2,u=(s-a.height)/2;if(o.style.borderLeft="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderRight="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderTop="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderBottom="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),o.style.boxSizing="border-box",o.style.top="0px",o.style.bottom="0px",o.style.left="0px",o.style.right="0px",o.id="".concat(es.SHADED_REGION_ELEMENT_ID),r-a.width<11||s-a.height<11)this.hasBorderShaders=!1;else{var f=5,p=40;this.insertShaderBorders(o,p,f,-f,null,0,!0),this.insertShaderBorders(o,p,f,-f,null,0,!1),this.insertShaderBorders(o,p,f,null,-f,0,!0),this.insertShaderBorders(o,p,f,null,-f,0,!1),this.insertShaderBorders(o,f,p+f,-f,null,-f,!0),this.insertShaderBorders(o,f,p+f,null,-f,-f,!0),this.insertShaderBorders(o,f,p+f,-f,null,-f,!1),this.insertShaderBorders(o,f,p+f,null,-f,-f,!1),this.hasBorderShaders=!0}t.append(o)}},e.prototype.insertShaderBorders=function(t,r,s,a,o,c,u){var f=document.createElement("div");f.style.position="absolute",f.style.backgroundColor=es.BORDER_SHADER_DEFAULT_COLOR,f.style.width="".concat(r,"px"),f.style.height="".concat(s,"px"),a!==null&&(f.style.top="".concat(a,"px")),o!==null&&(f.style.bottom="".concat(o,"px")),u?f.style.left="".concat(c,"px"):f.style.right="".concat(c,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(f),t.appendChild(f)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),m2;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(m2||(m2={}));function p2({eventId:e}){var P,M,R,$;const{user:t}=bt(),[r,s]=v.useState(!1),[a,o]=v.useState(null),[c,u]=v.useState(!1),[f,p]=v.useState(!1),[x,w]=v.useState(!1),[_,j]=v.useState(""),[N,C]=v.useState(!1),T=v.useRef(null),E=Ko.isNativePlatform();v.useEffect(()=>()=>{T.current&&T.current.stop().catch(()=>{})},[]),v.useEffect(()=>{if(!r||E&&!N)return;let Y=!1;return(async()=>{try{for(let ee=0;ee<20&&!document.getElementById("qr-reader");ee++)await new Promise(H=>setTimeout(H,50));if(Y)return;const q=new iV("qr-reader");T.current=q,await q.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},async ee=>{try{await q.stop().catch(()=>{})}finally{s(!1)}await L(ee)},()=>{})}catch(q){console.error("Error starting web scanner:",q),X.error("Erro ao acessar cmera. Use o cdigo manual."),s(!1),w(!0)}})(),()=>{Y=!0}},[r,E]);const S=async()=>{E?await b():s(!0)},b=async()=>{try{if((await s2.requestPermissions()).camera!=="granted"){X.error("Permisso de cmera negada");return}s(!0);const z=await s2.scan();if(z.barcodes&&z.barcodes.length>0){const q=z.barcodes[0].rawValue;await L(q)}s(!1)}catch(Y){console.error("Error scanning QR code:",Y),X.error("Erro ao escanear QR Code"),C(!0),s(!0)}},k=async()=>{var Y,z;if(T.current)try{await T.current.stop(),(z=(Y=T.current).clear)==null||z.call(Y)}catch(q){console.error("Error stopping scanner:",q)}C(!1),s(!1)},O=async()=>{if(!_.trim()){X.error("Digite o cdigo do ingresso");return}await L(_.trim()),j(""),w(!1)},L=async Y=>{try{const{data:z,error:q}=await U.from("ticket_sales").select(`
          *,
          event:events!inner(id, title),
          ticket_type:ticket_types(name)
        `).eq("id",Y).eq("event_id",e).eq("payment_status","completed").maybeSingle();if(q)throw q;if(!z){X.error("Ingresso no encontrado ou invlido");return}let ee=null;if(z.user_id){const{data:re}=await U.from("profiles").select("avatar_url, display_name").eq("user_id",z.user_id).maybeSingle();ee=re}if(z.validated_at){o({...z,user:ee}),u(!0),X.warning("Ingresso j foi validado anteriormente");return}const{error:H}=await U.from("ticket_sales").update({validated_at:new Date().toISOString(),validated_by:t==null?void 0:t.id}).eq("id",Y);if(H)throw H;o({...z,validated_at:new Date().toISOString(),user:ee}),u(!0),X.success("Ingresso validado com sucesso!")}catch(z){console.error("Error validating ticket:",z),X.error("Erro ao validar ingresso")}};return n.jsxs(n.Fragment,{children:[n.jsxs(K,{onClick:()=>p(!0),disabled:r,size:"sm",variant:"outline",children:[n.jsx(Cn,{className:"h-4 w-4 mr-2"}),"Validar"]}),n.jsx(Ut,{open:f,onOpenChange:p,children:n.jsxs(Bt,{className:"sm:max-w-md",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Validar Ingresso"}),n.jsx(is,{children:"Escolha como deseja validar o ingresso"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs(K,{className:"w-full h-20 flex flex-col gap-2",onClick:()=>{p(!1),C(!1),S()},children:[n.jsx(Cn,{className:"h-6 w-6"}),n.jsx("span",{children:"Escanear QR Code"})]}),n.jsxs(K,{variant:"outline",className:"w-full h-20 flex flex-col gap-2",onClick:()=>{p(!1),w(!0)},children:[n.jsx(F8,{className:"h-6 w-6"}),n.jsx("span",{children:"Digitar Cdigo"})]})]})]})}),n.jsx(Ut,{open:r&&(!E||N),onOpenChange:Y=>!Y&&k(),children:n.jsxs(Bt,{className:"sm:max-w-md",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Escanear QR Code"}),n.jsx(is,{children:"Posicione o QR Code do ingresso na cmera"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{id:"qr-reader",className:"w-full"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(K,{variant:"outline",className:"flex-1",onClick:()=>{k(),w(!0)},children:"Cdigo Manual"}),n.jsx(K,{variant:"outline",onClick:k,children:n.jsx(sr,{className:"h-4 w-4"})})]})]})]})}),n.jsx(Ut,{open:x,onOpenChange:w,children:n.jsxs(Bt,{className:"sm:max-w-md",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Cdigo Manual"}),n.jsx(is,{children:"Digite o cdigo do ingresso manualmente"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"manual-code",children:"Cdigo do Ingresso"}),n.jsx(we,{id:"manual-code",placeholder:"Cole o cdigo aqui",value:_,onChange:Y=>j(Y.target.value),onKeyPress:Y=>Y.key==="Enter"&&O()})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(K,{variant:"outline",className:"flex-1",onClick:()=>w(!1),children:"Cancelar"}),n.jsx(K,{className:"flex-1",onClick:O,children:"Validar"})]})]})]})}),n.jsx(Ut,{open:c,onOpenChange:u,children:n.jsxs(Bt,{children:[n.jsxs(xr,{children:[n.jsx(vr,{children:a!=null&&a.validated_at&&new Date(a.validated_at).getTime()<Date.now()-1e3?"Ingresso J Validado":"Ingresso Validado!"}),n.jsx(is,{children:"Informaes do ingresso"})]}),a&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-4 p-4 bg-muted rounded-lg",children:[n.jsxs($t,{className:"h-16 w-16",children:[n.jsx(Kt,{src:(P=a.user)==null?void 0:P.avatar_url}),n.jsx(Vt,{children:((M=a.buyer_name)==null?void 0:M.charAt(0).toUpperCase())||"?"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-lg",children:a.buyer_name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:((R=a.user)==null?void 0:R.display_name)||a.buyer_email})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Email"}),n.jsx("p",{className:"text-sm",children:a.buyer_email})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Tipo de Ingresso"}),n.jsx("p",{className:"text-sm",children:($=a.ticket_type)==null?void 0:$.name})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Quantidade"}),n.jsxs("p",{className:"text-sm",children:[a.quantity,"x"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Valor"}),n.jsxs("p",{className:"text-sm",children:["R$ ",a.total_amount.toFixed(2)]})]}),a.validated_at&&n.jsxs("div",{className:"pt-2 border-t",children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Validado em"}),n.jsx("p",{className:"text-sm",children:new Date(a.validated_at).toLocaleString("pt-BR")})]})]})]})]})})]})}function oV({onCreateEvent:e,onManageRegistrations:t,onViewAttendances:r}){const s=_t(),{events:a,loading:o,updateEvent:c,deleteEvent:u}=ti(),[f,p]=v.useState(null),[x,w]=v.useState(null),[_,j]=v.useState(null),[N,C]=v.useState({title:"",description:"",location:"",event_date:"",max_attendees:0}),T=a.filter(R=>R.status==="upcoming"),E=a.filter(R=>R.status==="completed"),S=a.reduce((R,$)=>R+$.current_attendees,0),b={upcoming:T.length,registrations:S,completed:E.length},k=R=>{j(null),setTimeout(()=>{p(R),C({title:R.title,description:R.description||"",location:R.location,event_date:new Date(R.event_date).toISOString().slice(0,16),max_attendees:R.max_attendees||0})},100)},O=async()=>{f&&(await c(f.id,{...N,event_date:new Date(N.event_date).toISOString()}),p(null))},L=async()=>{x&&(await u(x),w(null))},P=R=>{j(null),setTimeout(()=>{w(R)},100)},M=async R=>{await c(R,{is_live:!1,status:"completed"})};return o?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Meus Eventos"}),n.jsx(K,{size:"sm",onClick:e,children:"+ Criar Evento"})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsx(je,{children:n.jsxs(Ce,{className:"p-4 text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-primary",children:b.upcoming}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Prximos"})]})}),n.jsx(je,{children:n.jsxs(Ce,{className:"p-4 text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-emerald-500",children:b.registrations}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Cadastros"})]})}),n.jsx(je,{children:n.jsxs(Ce,{className:"p-4 text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-orange-500",children:b.completed}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Realizados"})]})})]}),n.jsxs(Qm,{defaultValue:"upcoming",className:"space-y-4",children:[n.jsxs(Vu,{className:"grid w-full grid-cols-3",children:[n.jsx(os,{value:"upcoming",children:"Prximos"}),n.jsx(os,{value:"completed",children:"Realizados"}),n.jsx(os,{value:"all",children:"Todos"})]}),n.jsx(ls,{value:"upcoming",className:"space-y-4",children:T.length>0?n.jsx(n.Fragment,{children:T.map(R=>n.jsx(je,{className:"overflow-hidden",children:n.jsxs(Ce,{className:"p-4",children:[n.jsxs("div",{className:"flex gap-3",children:[R.image_url&&n.jsx("img",{src:R.image_url,alt:R.title,className:"w-16 h-16 rounded-lg object-cover flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-medium text-foreground line-clamp-1",children:R.title}),n.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground mt-1",children:[n.jsx(Et,{className:"h-3 w-3"}),n.jsx("span",{children:new Date(R.event_date).toLocaleDateString("pt-BR")})]}),n.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[n.jsx(Rt,{className:"h-3 w-3"}),n.jsx("span",{className:"line-clamp-1",children:R.location})]})]}),n.jsxs("div",{className:"flex flex-col gap-1 items-end",children:[R.is_live&&n.jsxs(dt,{variant:"destructive",className:"mb-1",children:[n.jsx("div",{className:"h-2 w-2 bg-white rounded-full animate-pulse mr-1"}),"AO VIVO"]}),n.jsx(dt,{variant:"secondary",className:"bg-primary/10 text-primary",children:R.status==="upcoming"?"Prximo":R.status})]})]}),n.jsxs("div",{className:"flex items-center gap-1 text-sm text-emerald-600 mt-2",children:[n.jsx(er,{className:"h-3 w-3"}),n.jsxs("span",{children:[R.current_attendees,"/",R.max_attendees||""," participantes"]})]})]})]}),n.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t border-border",children:[R.is_live&&n.jsxs(K,{variant:"destructive",size:"sm",onClick:()=>M(R.id),children:[n.jsx(jo,{className:"h-4 w-4 mr-1"}),"Encerrar Evento"]}),n.jsxs(K,{variant:"outline",size:"sm",className:"flex-1",disabled:!R.requires_registration,onClick:()=>t==null?void 0:t(R.id),children:[n.jsx(cg,{className:"h-4 w-4 mr-1"}),"Cadastros"]}),R.has_paid_tickets&&n.jsxs(n.Fragment,{children:[n.jsxs(K,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>s(`/event/${R.id}/sales`),children:[n.jsx(Sn,{className:"h-4 w-4 mr-1"}),"Vendas"]}),n.jsx(p2,{eventId:R.id})]}),n.jsxs(lf,{open:_===R.id,onOpenChange:$=>j($?R.id:null),children:[n.jsx(cf,{asChild:!0,children:n.jsx(K,{variant:"ghost",size:"sm",children:n.jsx(Bo,{className:"h-4 w-4"})})}),n.jsxs(Bd,{align:"end",children:[n.jsxs(Bn,{onClick:()=>k(R),children:[n.jsx(rs,{className:"h-4 w-4 mr-2"}),"Editar"]}),n.jsxs(Bn,{onClick:()=>{j(null),M(R.id)},className:"text-orange-600",children:[n.jsx(jo,{className:"h-4 w-4 mr-2"}),"Encerrar Evento"]}),n.jsxs(Bn,{onClick:()=>P(R.id),className:"text-destructive",children:[n.jsx(Gn,{className:"h-4 w-4 mr-2"}),"Excluir"]})]})]})]})]})},R.id))}):n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(Et,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{className:"mb-4",children:"Nenhum evento prximo"}),n.jsx(K,{onClick:e,children:"Criar Primeiro Evento"})]})}),n.jsx(ls,{value:"completed",className:"space-y-4",children:E.length>0?E.map(R=>n.jsx(je,{className:"overflow-hidden",children:n.jsxs(Ce,{className:"p-4",children:[n.jsxs("div",{className:"flex gap-3",children:[R.image_url&&n.jsx("img",{src:R.image_url,alt:R.title,className:"w-16 h-16 rounded-lg object-cover flex-shrink-0"}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-medium text-foreground line-clamp-1",children:R.title}),n.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground mt-1",children:[n.jsx(Et,{className:"h-3 w-3"}),n.jsx("span",{children:new Date(R.event_date).toLocaleDateString("pt-BR")})]}),n.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[n.jsx(Rt,{className:"h-3 w-3"}),n.jsx("span",{className:"line-clamp-1",children:R.location})]})]}),n.jsx(dt,{variant:"secondary",className:"bg-emerald-500/10 text-emerald-600",children:"Realizado"})]})})]}),n.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t border-border",children:[R.requires_registration&&n.jsxs(K,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>t==null?void 0:t(R.id),children:[n.jsx(cg,{className:"h-4 w-4 mr-1"}),"Cadastros"]}),R.has_paid_tickets&&n.jsxs(n.Fragment,{children:[n.jsxs(K,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>s(`/event/${R.id}/sales`),children:[n.jsx(Sn,{className:"h-4 w-4 mr-1"}),"Vendas"]}),n.jsx(p2,{eventId:R.id})]}),n.jsxs(K,{variant:"outline",size:"sm",onClick:()=>r==null?void 0:r(R.id),children:[n.jsx(er,{className:"h-4 w-4 mr-1"}),"Confirmaes"]}),n.jsxs(lf,{open:_===R.id,onOpenChange:$=>j($?R.id:null),children:[n.jsx(cf,{asChild:!0,children:n.jsx(K,{variant:"ghost",size:"sm",children:n.jsx(Bo,{className:"h-4 w-4"})})}),n.jsxs(Bd,{align:"end",children:[n.jsxs(Bn,{onClick:()=>k(R),children:[n.jsx(rs,{className:"h-4 w-4 mr-2"}),"Editar"]}),n.jsxs(Bn,{onClick:()=>{j(null),M(R.id)},className:"text-orange-600",children:[n.jsx(jo,{className:"h-4 w-4 mr-2"}),"Encerrar Evento"]}),n.jsxs(Bn,{onClick:()=>P(R.id),className:"text-destructive",children:[n.jsx(Gn,{className:"h-4 w-4 mr-2"}),"Excluir"]})]})]})]})]})},R.id)):n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(Et,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"Nenhum evento realizado ainda"})]})}),n.jsx(ls,{value:"all",className:"space-y-4",children:a.length>0?a.map(R=>n.jsx(je,{className:"overflow-hidden",children:n.jsxs(Ce,{className:"p-4",children:[n.jsxs("div",{className:"flex gap-3",children:[R.image_url&&n.jsx("img",{src:R.image_url,alt:R.title,className:"w-16 h-16 rounded-lg object-cover flex-shrink-0"}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-medium text-foreground line-clamp-1",children:R.title}),n.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground mt-1",children:[n.jsx(Et,{className:"h-3 w-3"}),n.jsx("span",{children:new Date(R.event_date).toLocaleDateString("pt-BR")})]}),n.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[n.jsx(Rt,{className:"h-3 w-3"}),n.jsx("span",{className:"line-clamp-1",children:R.location})]})]}),n.jsxs("div",{className:"flex flex-col gap-1 items-end",children:[R.is_live&&n.jsxs(dt,{variant:"destructive",className:"mb-1",children:[n.jsx("div",{className:"h-2 w-2 bg-white rounded-full animate-pulse mr-1"}),"AO VIVO"]}),n.jsx(dt,{variant:"secondary",className:R.status==="completed"?"bg-emerald-500/10 text-emerald-600":"bg-primary/10 text-primary",children:R.status==="upcoming"?"Prximo":R.status==="completed"?"Realizado":R.status})]})]})})]}),n.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t border-border",children:[R.is_live&&n.jsxs(K,{variant:"destructive",size:"sm",onClick:()=>M(R.id),children:[n.jsx(jo,{className:"h-4 w-4 mr-1"}),"Encerrar Evento"]}),n.jsxs(lf,{open:_===R.id,onOpenChange:$=>j($?R.id:null),children:[n.jsx(cf,{asChild:!0,children:n.jsxs(K,{variant:"outline",size:"sm",className:"flex-1",children:[n.jsx(Bo,{className:"h-4 w-4 mr-2"}),"Gerenciar"]})}),n.jsxs(Bd,{align:"end",children:[n.jsxs(Bn,{onClick:()=>t==null?void 0:t(R.id),children:[n.jsx(cg,{className:"h-4 w-4 mr-2"}),"Ver Cadastros"]}),R.has_paid_tickets&&n.jsxs(Bn,{onClick:()=>s(`/event/${R.id}/sales`),children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),"Ver Vendas"]}),n.jsxs(Bn,{onClick:()=>r==null?void 0:r(R.id),children:[n.jsx(er,{className:"h-4 w-4 mr-2"}),"Ver Confirmaes"]}),n.jsxs(Bn,{onClick:()=>k(R),children:[n.jsx(rs,{className:"h-4 w-4 mr-2"}),"Editar"]}),n.jsxs(Bn,{onClick:()=>{j(null),M(R.id)},className:"text-orange-600",children:[n.jsx(jo,{className:"h-4 w-4 mr-2"}),"Encerrar Evento"]}),n.jsxs(Bn,{onClick:()=>P(R.id),className:"text-destructive",children:[n.jsx(Gn,{className:"h-4 w-4 mr-2"}),"Excluir"]})]})]})]})]})},R.id)):n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(Et,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{className:"mb-4",children:"Nenhum evento criado ainda"}),n.jsx(K,{onClick:e,children:"Criar Primeiro Evento"})]})})]}),n.jsx(Ut,{open:!!f,onOpenChange:R=>!R&&p(null),children:n.jsxs(Bt,{children:[n.jsx(xr,{children:n.jsx(vr,{children:"Editar Evento"})}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"title",children:"Ttulo"}),n.jsx(we,{id:"title",value:N.title,onChange:R=>C({...N,title:R.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"description",children:"Descrio"}),n.jsx(An,{id:"description",value:N.description,onChange:R=>C({...N,description:R.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"location",children:"Local"}),n.jsx(we,{id:"location",value:N.location,onChange:R=>C({...N,location:R.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"event_date",children:"Data e Hora"}),n.jsx(we,{id:"event_date",type:"datetime-local",value:N.event_date,onChange:R=>C({...N,event_date:R.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"max_attendees",children:"Mximo de Participantes"}),n.jsx(we,{id:"max_attendees",type:"number",value:N.max_attendees,onChange:R=>C({...N,max_attendees:parseInt(R.target.value)})})]})]}),n.jsxs("div",{className:"flex gap-2 justify-end",children:[n.jsx(K,{variant:"outline",onClick:()=>p(null),children:"Cancelar"}),n.jsx(K,{onClick:O,children:"Salvar Alteraes"})]})]})}),n.jsx(Zo,{open:!!x,onOpenChange:R=>!R&&w(null),children:n.jsxs(Yi,{children:[n.jsxs(Jo,{children:[n.jsx(el,{children:"Confirmar Excluso"}),n.jsx(tl,{children:"Tem certeza que deseja excluir este evento? Esta ao no pode ser desfeita."})]}),n.jsxs(Qi,{children:[n.jsx(Ji,{children:"Cancelar"}),n.jsx(Zi,{onClick:L,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Excluir"})]})]})})]})}function lV(){const e=_t(),{signOut:t}=bt(),{organizerData:r,updateOrganizerProfile:s}=ti(),[a,o]=v.useState(!1),[c,u]=v.useState({whatsapp_url:"",instagram_url:"",playlist_url:"",location_url:"",website_url:"",show_whatsapp:!1,show_instagram:!1,show_playlist:!1,show_location:!1,show_website:!1}),[f,p]=v.useState({notify_new_registrations:!0,notify_event_reminders:!0,public_page_visible:!0,show_statistics:!0}),[x,w]=v.useState(!1),[_,j]=v.useState(""),[N,C]=v.useState("");v.useEffect(()=>{r&&(u({whatsapp_url:r.whatsapp_url||"",instagram_url:r.instagram_url||"",playlist_url:r.playlist_url||"",location_url:r.location_url||"",website_url:r.website_url||"",show_whatsapp:r.show_whatsapp||!1,show_instagram:r.show_instagram||!1,show_playlist:r.show_playlist||!1,show_location:r.show_location||!1,show_website:r.show_website||!1}),p({notify_new_registrations:r.notify_new_registrations??!0,notify_event_reminders:r.notify_event_reminders??!0,public_page_visible:r.public_page_visible??!0,show_statistics:r.show_statistics??!0}))},[r]);const T=async()=>{await t()},E=async()=>{try{const{data:{session:k}}=await U.auth.getSession();if(!k){X.error("Voc precisa estar logado para deletar sua conta");return}const{error:O}=await U.functions.invoke("delete-user",{headers:{Authorization:`Bearer ${k.access_token}`}});if(O){console.error("Error deleting account:",O),X.error("Erro ao deletar conta. Tente novamente.");return}X.success("Conta deletada com sucesso!"),await U.auth.signOut(),window.location.href="/auth"}catch(k){console.error("Error:",k),X.error("Erro ao deletar conta. Tente novamente.")}},S=async(k,O)=>{const L={...f,[k]:O};p(L);try{await s({[k]:O}),X.success("Configurao atualizada!")}catch(P){console.error("Error updating setting:",P),X.error("Erro ao atualizar configurao"),p(f)}},b=async()=>{if(_!==N){X.error("As senhas no coincidem");return}if(_.length<6){X.error("A senha deve ter pelo menos 6 caracteres");return}try{const{error:k}=await U.auth.updateUser({password:_});if(k)throw k;X.success("Senha alterada com sucesso!"),w(!1),j(""),C("")}catch(k){console.error("Error changing password:",k),X.error("Erro ao alterar senha")}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(I1,{className:"h-5 w-5 text-primary"}),n.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Configuraes"})]}),n.jsxs(je,{children:[n.jsx(We,{children:n.jsxs(Ge,{className:"flex items-center gap-2",children:[n.jsx(hs,{className:"h-4 w-4"}),"Conta"]})}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-foreground",children:"Editar Perfil"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Alterar informaes pessoais"})]}),n.jsx(K,{variant:"outline",size:"sm",onClick:()=>e("/organizer-profile"),children:"Editar"})]}),n.jsx(ia,{}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-foreground",children:"Alterar Senha"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Atualizar sua senha de acesso"})]}),n.jsxs(Ut,{open:x,onOpenChange:w,children:[n.jsx(nS,{asChild:!0,children:n.jsxs(K,{variant:"outline",size:"sm",children:[n.jsx(Px,{className:"h-4 w-4 mr-1"}),"Alterar"]})}),n.jsxs(Bt,{children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Alterar Senha"}),n.jsx(is,{children:"Digite sua nova senha. Ela deve ter pelo menos 6 caracteres."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"new-password",children:"Nova Senha"}),n.jsx(we,{id:"new-password",type:"password",value:_,onChange:k=>j(k.target.value),placeholder:"Digite a nova senha"})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"confirm-password",children:"Confirmar Senha"}),n.jsx(we,{id:"confirm-password",type:"password",value:N,onChange:k=>C(k.target.value),placeholder:"Confirme a nova senha"})]})]}),n.jsxs(Uu,{children:[n.jsx(K,{variant:"outline",onClick:()=>w(!1),children:"Cancelar"}),n.jsx(K,{onClick:b,children:"Salvar Nova Senha"})]})]})]})]})]})]}),n.jsxs(je,{children:[n.jsx(We,{children:n.jsxs(Ge,{className:"flex items-center gap-2",children:[n.jsx(qa,{className:"h-4 w-4"}),"Notificaes"]})}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-foreground",children:"Novos Cadastros"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Receber quando algum se cadastrar"})]}),n.jsx(Tr,{checked:f.notify_new_registrations,onCheckedChange:k=>S("notify_new_registrations",k)})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-foreground",children:"Lembrete de Eventos"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Notificar 1 hora antes do evento"})]}),n.jsx(Tr,{checked:f.notify_event_reminders,onCheckedChange:k=>S("notify_event_reminders",k)})]})]})]}),n.jsxs(je,{children:[n.jsx(We,{children:n.jsxs(Ge,{className:"flex items-center gap-2",children:[n.jsx(Px,{className:"h-4 w-4"}),"Privacidade"]})}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-foreground",children:"Pgina Pblica"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Permitir que outros vejam sua pgina"})]}),n.jsx(Tr,{checked:f.public_page_visible,onCheckedChange:k=>S("public_page_visible",k)})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-foreground",children:"Mostrar Estatsticas"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Exibir nmero de seguidores e eventos"})]}),n.jsx(Tr,{checked:f.show_statistics,onCheckedChange:k=>S("show_statistics",k)})]})]})]}),n.jsxs(je,{children:[n.jsx(We,{children:n.jsxs(Ge,{className:"flex items-center gap-2",children:[n.jsx(vy,{className:"h-4 w-4"}),"Ajuda e Suporte"]})}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs(K,{variant:"outline",className:"w-full justify-start",children:[n.jsx(vy,{className:"h-4 w-4 mr-2"}),"Central de Ajuda"]}),n.jsxs(K,{variant:"outline",className:"w-full justify-start",children:[n.jsx(qa,{className:"h-4 w-4 mr-2"}),"Reportar Problema"]})]})]}),n.jsx(je,{children:n.jsx(Ce,{className:"p-6",children:n.jsxs(Zo,{children:[n.jsx(Qf,{asChild:!0,children:n.jsxs(K,{variant:"outline",className:"w-full text-orange-600 hover:text-orange-700 hover:bg-orange-50",children:[n.jsx(Aj,{className:"h-4 w-4 mr-2"}),"Sair da Conta"]})}),n.jsxs(Yi,{children:[n.jsxs(Jo,{children:[n.jsx(el,{children:"Confirmar Logout"}),n.jsx(tl,{children:"Tem certeza que deseja sair da sua conta? Voc precisar fazer login novamente para acessar."})]}),n.jsxs(Qi,{children:[n.jsx(Ji,{children:"Cancelar"}),n.jsx(Zi,{onClick:T,children:"Sair"})]})]})]})})}),n.jsxs(je,{className:"border-destructive/20",children:[n.jsx(We,{children:n.jsxs(Ge,{className:"flex items-center gap-2 text-destructive",children:[n.jsx(Gn,{className:"h-4 w-4"}),"Zona de Perigo"]})}),n.jsx(Ce,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs(je,{children:[n.jsx(We,{children:n.jsx(Ge,{children:"Aes Rpidas"})}),n.jsxs(Ce,{className:"space-y-3",children:[n.jsxs(K,{variant:"outline",className:"w-full justify-start",onClick:()=>window.open("/registrations","_blank"),children:[n.jsx(er,{className:"h-4 w-4 mr-2"}),"Ver Todos os Cadastros"]}),n.jsxs(K,{variant:"outline",className:"w-full justify-start",children:[n.jsx(Ho,{className:"h-4 w-4 mr-2"}),"Exportar Dados"]})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-foreground",children:"Excluir Conta"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Esta ao no pode ser desfeita. Todos os seus dados sero permanentemente removidos."})]}),n.jsxs(Zo,{children:[n.jsx(Qf,{asChild:!0,children:n.jsxs(K,{variant:"destructive",size:"sm",children:[n.jsx(Gn,{className:"h-4 w-4 mr-2"}),"Excluir Conta"]})}),n.jsxs(Yi,{children:[n.jsxs(Jo,{children:[n.jsx(el,{children:"Excluir Conta Permanentemente"}),n.jsx(tl,{children:"Esta ao  irreversvel. Todos os seus eventos, cadastros e dados sero permanentemente excludos. Voc poder criar uma nova conta a qualquer momento com o mesmo email."})]}),n.jsxs(Qi,{children:[n.jsx(Ji,{children:"Cancelar"}),n.jsx(Zi,{onClick:E,className:"bg-destructive hover:bg-destructive/90",children:"Excluir Definitivamente"})]})]})]})]})})]})]})}const cV={text:rf,email:Ru,phone:zc,date:Et,select:k1,checkbox:Pj,photo:Wi,file:Sc};function dV({fields:e,onChange:t}){const[r,s]=v.useState(null),a=()=>{const f={id:`field_${Date.now()}`,type:"text",label:"Novo Campo",required:!1};t([...e,f]),s(f.id)},o=f=>{t(e.filter(p=>p.id!==f))},c=(f,p)=>{t(e.map(x=>x.id===f?{...x,...p}:x))},u=(f,p)=>{const x=[...e],w=p==="up"?f-1:f+1;w<0||w>=x.length||([x[f],x[w]]=[x[w],x[f]],t(x))};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure os campos que deseja coletar dos participantes"}),n.jsxs(K,{onClick:a,size:"sm",variant:"outline",children:[n.jsx(Uc,{className:"h-4 w-4 mr-1"}),"Adicionar Campo"]})]}),e.length===0?n.jsx(je,{children:n.jsxs(Ce,{className:"py-8 text-center text-muted-foreground",children:[n.jsx(rf,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),n.jsx("p",{className:"text-sm",children:"Nenhum campo personalizado ainda"}),n.jsx("p",{className:"text-xs mt-1",children:'Clique em "Adicionar Campo" para comear'})]})}):n.jsx("div",{className:"space-y-2",children:e.map((f,p)=>{const x=cV[f.type],w=r===f.id;return n.jsx(je,{className:"overflow-hidden",children:n.jsx(Ce,{className:"p-4",children:w?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(de,{className:"text-xs",children:"Tipo do Campo"}),n.jsxs(Zs,{value:f.type,onValueChange:_=>c(f.id,{type:_}),children:[n.jsx(Es,{className:"h-9",children:n.jsx(Js,{})}),n.jsxs(Ss,{children:[n.jsx(Ht,{value:"text",children:"Texto"}),n.jsx(Ht,{value:"email",children:"Email"}),n.jsx(Ht,{value:"phone",children:"Telefone"}),n.jsx(Ht,{value:"date",children:"Data"}),n.jsx(Ht,{value:"select",children:"Seleo nica"}),n.jsx(Ht,{value:"checkbox",children:"Mltipla Escolha"}),n.jsx(Ht,{value:"photo",children:"Upload de Foto"}),n.jsx(Ht,{value:"file",children:"Upload de Arquivo"})]})]})]}),n.jsxs("div",{children:[n.jsx(de,{className:"text-xs",children:"Nome do Campo"}),n.jsx(we,{value:f.label,onChange:_=>c(f.id,{label:_.target.value}),placeholder:"Ex: Nome completo",className:"h-9"})]})]}),(f.type==="select"||f.type==="checkbox")&&n.jsxs("div",{children:[n.jsx(de,{className:"text-xs",children:f.type==="select"?"Opes (pressione Enter para nova linha)":"Opes para selecionar (pressione Enter para nova linha)"}),n.jsx("textarea",{value:(f.options||[]).join(`
`),onChange:_=>c(f.id,{options:_.target.value.split(`
`).filter(j=>j.trim())}),onKeyDown:_=>{if(_.key==="Enter"){_.preventDefault(),_.stopPropagation();const j=_.currentTarget,N=j.selectionStart??j.value.length,C=j.selectionEnd??j.value.length,T=j.value.slice(0,N)+`
`+j.value.slice(C);c(f.id,{options:T.split(`
`).filter(E=>E.trim())}),setTimeout(()=>{try{j.setSelectionRange(N+1,N+1)}catch{}},0)}},placeholder:`Digite uma opo e pressione Enter
Segunda opo
Terceira opo`,className:"w-full min-h-[100px] px-3 py-2 text-sm rounded-md border border-input bg-background resize-y",rows:4}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:f.type==="checkbox"?"Participante poder selecionar mltiplas opes":"Participante poder selecionar apenas uma opo"})]}),f.type==="photo"&&n.jsx("div",{className:"rounded-lg border border-border bg-surface/30 p-3",children:n.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.jsx(Wi,{className:"h-3 w-3 inline mr-1"}),"Participante poder enviar uma foto (JPG, PNG, at 5MB)"]})}),f.type==="file"&&n.jsx("div",{className:"rounded-lg border border-border bg-surface/30 p-3",children:n.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.jsx(Sc,{className:"h-3 w-3 inline mr-1"}),"Participante poder enviar um arquivo (PDF, DOC, at 10MB)"]})}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Tr,{checked:f.required,onCheckedChange:_=>c(f.id,{required:_})}),n.jsx(de,{className:"text-xs",children:"Campo obrigatrio"})]}),n.jsx(K,{onClick:()=>s(null),size:"sm",variant:"outline",children:"Concluir"})]})]}):n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx(K,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>u(p,"up"),disabled:p===0,children:n.jsx(yy,{className:"h-3 w-3"})}),n.jsx(K,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>u(p,"down"),disabled:p===e.length-1,children:n.jsx(yy,{className:"h-3 w-3"})})]}),n.jsx(x,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium",children:f.label}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[f.type==="text"&&"Texto",f.type==="email"&&"Email",f.type==="phone"&&"Telefone",f.type==="date"&&"Data",f.type==="select"&&"Seleo nica",f.type==="checkbox"&&"Mltipla Escolha",f.type==="photo"&&"Upload de Foto",f.type==="file"&&"Upload de Arquivo",f.required&&"  Obrigatrio",f.options&&f.options.length>0&&`  ${f.options.length} opes`]})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(K,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>s(f.id),children:n.jsx(rf,{className:"h-3 w-3"})}),n.jsx(K,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:()=>o(f.id),children:n.jsx(Gn,{className:"h-3 w-3"})})]})]})})},f.id)})}),n.jsxs("div",{className:"rounded-lg border border-border bg-surface/50 p-4 space-y-2",children:[n.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.jsx("strong",{children:"Dica:"}),' Os campos "Nome", "Email" e "Telefone" j so coletados por padro. Use campos personalizados para informaes adicionais especficas do seu evento.']}),n.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[n.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[n.jsx(rf,{className:"h-3 w-3"})," Texto livre"]}),n.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[n.jsx(k1,{className:"h-3 w-3"})," Escolha nica"]}),n.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[n.jsx(Pj,{className:"h-3 w-3"})," Mltiplas opes"]}),n.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[n.jsx(Wi,{className:"h-3 w-3"})," Fotos"]}),n.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[n.jsx(Sc,{className:"h-3 w-3"})," Arquivos"]})]})]})]})}function cA({open:e,onOpenChange:t,fields:r,onSave:s}){const[a,o]=v.useState(r),c=()=>{s(a),t(!1)};return n.jsx(Ut,{open:e,onOpenChange:t,children:n.jsxs(Bt,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[n.jsxs(xr,{children:[n.jsxs(vr,{className:"flex items-center gap-2",children:[n.jsx(Sc,{className:"h-5 w-5"}),"Configurar Formulrio de Cadastro"]}),n.jsx(is,{children:"Personalize os campos que sero coletados dos participantes do evento. Nome, email e telefone j so campos padro."})]}),n.jsx("div",{className:"py-4",children:n.jsx(dV,{fields:a,onChange:o})}),n.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[n.jsx(K,{variant:"outline",onClick:()=>t(!1),children:"Cancelar"}),n.jsx(K,{onClick:c,children:"Salvar Formulrio"})]})]})})}const uV=Tu("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Xu=v.forwardRef(({className:e,variant:t,...r},s)=>n.jsx("div",{ref:s,role:"alert",className:Le(uV({variant:t}),e),...r}));Xu.displayName="Alert";const dA=v.forwardRef(({className:e,...t},r)=>n.jsx("h5",{ref:r,className:Le("mb-1 font-medium leading-none tracking-tight",e),...t}));dA.displayName="AlertTitle";const Ku=v.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Le("text-sm [&_p]:leading-relaxed",e),...t}));Ku.displayName="AlertDescription";const g2=[{value:"facebook",label:"Meta Pixel (Facebook/Instagram)",icon:""},{value:"google_ads",label:"Google Ads",icon:""},{value:"tiktok",label:"TikTok Pixel",icon:""},{value:"linkedin",label:"LinkedIn Insight Tag",icon:""},{value:"twitter",label:"Twitter Pixel",icon:""},{value:"custom",label:"Pixel Personalizado",icon:""}];function hV({eventId:e}){const[t,r]=v.useState([]),[s,a]=v.useState(!0),[o,c]=v.useState(!1),[u,f]=v.useState(null),[p,x]=v.useState({platform:"",pixel_id:"",is_active:!0});v.useEffect(()=>{w()},[e]);const w=async()=>{try{a(!0);const{data:E,error:S}=await U.from("event_pixels").select("*").eq("event_id",e).order("created_at",{ascending:!1});if(S)throw S;r(E||[])}catch(E){console.error("Error loading pixels:",E),X.error("Erro ao carregar pixels")}finally{a(!1)}},_=E=>{E?(f(E),x({platform:E.platform,pixel_id:E.pixel_id,is_active:E.is_active})):(f(null),x({platform:"",pixel_id:"",is_active:!0})),c(!0)},j=async()=>{try{if(!p.platform||!p.pixel_id){X.error("Preencha todos os campos obrigatrios");return}if(u){const{error:E}=await U.from("event_pixels").update({platform:p.platform,pixel_id:p.pixel_id,is_active:p.is_active}).eq("id",u.id);if(E)throw E;X.success("Pixel atualizado com sucesso")}else{const{error:E}=await U.from("event_pixels").insert({event_id:e,platform:p.platform,pixel_id:p.pixel_id,is_active:p.is_active});if(E)throw E;X.success("Pixel adicionado com sucesso")}c(!1),w()}catch(E){console.error("Error saving pixel:",E),X.error(E.message||"Erro ao salvar pixel")}},N=async E=>{if(confirm("Tem certeza que deseja remover este pixel?"))try{const{error:S}=await U.from("event_pixels").delete().eq("id",E);if(S)throw S;X.success("Pixel removido com sucesso"),w()}catch(S){console.error("Error deleting pixel:",S),X.error("Erro ao remover pixel")}},C=async E=>{try{const{error:S}=await U.from("event_pixels").update({is_active:!E.is_active}).eq("id",E.id);if(S)throw S;X.success(E.is_active?"Pixel desativado":"Pixel ativado"),w()}catch(S){console.error("Error toggling pixel:",S),X.error("Erro ao alterar status do pixel")}},T=E=>g2.find(S=>S.value===E)||{label:E,icon:""};return s?n.jsx(je,{children:n.jsx(Ce,{className:"p-6",children:n.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando pixels..."})})}):n.jsxs(n.Fragment,{children:[n.jsxs(je,{children:[n.jsx(We,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ge,{children:"Integraes de Pixels"}),n.jsx(cn,{children:"Adicione pixels de rastreamento para monitorar converses e criar audincias"})]}),n.jsxs(K,{onClick:()=>_(),size:"sm",children:[n.jsx(Uc,{className:"h-4 w-4 mr-2"}),"Adicionar Pixel"]})]})}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs(Xu,{children:[n.jsx(dl,{className:"h-4 w-4"}),n.jsx(Ku,{children:"Os pixels sero disparados quando usurios visualizarem o evento, se registrarem e comprarem ingressos."})]}),t.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(Ny,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),n.jsx("p",{className:"text-sm",children:"Nenhum pixel configurado ainda"}),n.jsx("p",{className:"text-xs mt-1",children:"Adicione pixels para rastrear suas converses"})]}):n.jsx("div",{className:"space-y-3",children:t.map(E=>{const S=T(E.platform);return n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[n.jsx("span",{className:"text-2xl",children:S.icon}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium",children:S.label}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["ID: ",E.pixel_id]})]}),n.jsx(Tr,{checked:E.is_active,onCheckedChange:()=>C(E)})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>_(E),children:n.jsx(Ny,{className:"h-4 w-4"})}),n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>N(E.id),children:n.jsx(Gn,{className:"h-4 w-4"})})]})]},E.id)})})]})]}),n.jsx(Ut,{open:o,onOpenChange:c,children:n.jsxs(Bt,{children:[n.jsxs(xr,{children:[n.jsx(vr,{children:u?"Editar Pixel":"Adicionar Pixel"}),n.jsx(is,{children:"Configure o pixel de rastreamento para este evento"})]}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"platform",children:"Plataforma"}),n.jsxs(Zs,{value:p.platform,onValueChange:E=>x({...p,platform:E}),children:[n.jsx(Es,{id:"platform",children:n.jsx(Js,{placeholder:"Selecione a plataforma"})}),n.jsx(Ss,{children:g2.map(E=>n.jsxs(Ht,{value:E.value,children:[E.icon," ",E.label]},E.value))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"pixel_id",children:"ID do Pixel"}),n.jsx(we,{id:"pixel_id",placeholder:"Ex: 1234567890",value:p.pixel_id,onChange:E=>x({...p,pixel_id:E.target.value})}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Cole o ID do pixel fornecido pela plataforma"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Tr,{id:"active",checked:p.is_active,onCheckedChange:E=>x({...p,is_active:E})}),n.jsx(de,{htmlFor:"active",children:"Pixel ativo"})]})]}),n.jsxs(Uu,{children:[n.jsx(K,{variant:"outline",onClick:()=>c(!1),children:"Cancelar"}),n.jsx(K,{onClick:j,children:u?"Atualizar":"Adicionar"})]})]})})]})}function fV({ticketTypes:e,ticketSettings:t,onTicketTypesChange:r,onTicketSettingsChange:s,termsAccepted:a,onTermsAccepted:o,organizerId:c,eventId:u}){const[f,p]=v.useState(null),[x,w]=v.useState(!1),[_,j]=v.useState(!1);_t();const N=()=>{const b={id:Date.now().toString(),name:"",description:"",price:0,quantity:100,minQuantity:1,maxQuantity:10};p(b),w(!0)},C=b=>{p({...b}),w(!0)},T=()=>{if(!f)return;const b=e.findIndex(k=>k.id===f.id);if(b>=0){const k=[...e];k[b]=f,r(k)}else r([...e,f]);w(!1),p(null)},E=b=>{r(e.filter(k=>k.id!==b))},S=b=>{const k=b*t.platformFeePercentage/100,O=b*t.paymentProcessingFeePercentage/100+t.paymentProcessingFeeFixed,L=k+O;return t.feePayer==="buyer"?{subtotal:b,fees:L,total:b+L,organizerReceives:b}:{subtotal:b,fees:L,total:b,organizerReceives:b-L}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs(je,{children:[n.jsxs(We,{children:[n.jsx(Ge,{className:"text-sm",children:"Configuraes de Taxas"}),n.jsx(cn,{children:"Defina quem paga as taxas da plataforma e processamento"})]}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(de,{className:"mb-2 block",children:"Quem paga as taxas?"}),n.jsxs(zi,{value:t.feePayer,onValueChange:b=>s({...t,feePayer:b}),children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(sn,{value:"buyer",id:"buyer"}),n.jsx(de,{htmlFor:"buyer",className:"cursor-pointer font-normal",children:"Comprador (taxa adicionada ao valor do ingresso)"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(sn,{value:"organizer",id:"organizer"}),n.jsx(de,{htmlFor:"organizer",className:"cursor-pointer font-normal",children:"Organizador (taxa descontada do valor recebido)"})]})]})]}),n.jsxs(Xu,{children:[n.jsx(L8,{className:"h-4 w-4"}),n.jsx(Ku,{className:"text-xs",children:n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Taxa da Plataforma:"})," ",t.platformFeePercentage,"% por ingresso"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Taxa de Processamento:"})," ",t.paymentProcessingFeePercentage,"% + R$ ",t.paymentProcessingFeeFixed.toFixed(2)]})]})})]}),e.length>0&&n.jsxs("div",{className:"bg-muted p-3 rounded-lg text-xs space-y-1",children:[n.jsxs("p",{className:"font-semibold mb-2",children:["Exemplo com ingresso de R$ ",e[0].price.toFixed(2),":"]}),(()=>{const b=S(e[0].price);return n.jsxs(n.Fragment,{children:[n.jsxs("p",{children:["Valor do ingresso: R$ ",b.subtotal.toFixed(2)]}),n.jsxs("p",{children:["Taxas totais: R$ ",b.fees.toFixed(2)]}),n.jsx("p",{className:"font-semibold text-primary",children:t.feePayer==="buyer"?`Comprador paga: R$ ${b.total.toFixed(2)}`:`Organizador recebe: R$ ${b.organizerReceives.toFixed(2)}`})]})})()]})]})]}),n.jsxs(je,{children:[n.jsx(We,{children:n.jsx(Ge,{className:"text-sm",children:"Formas de Pagamento"})}),n.jsxs(Ce,{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(de,{htmlFor:"pix",children:"PIX"}),n.jsx(Tr,{id:"pix",checked:t.acceptsPix,onCheckedChange:b=>s({...t,acceptsPix:b})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(de,{htmlFor:"credit",children:"Carto de Crdito"}),n.jsx(Tr,{id:"credit",checked:t.acceptsCreditCard,onCheckedChange:b=>s({...t,acceptsCreditCard:b})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(de,{htmlFor:"debit",children:"Carto de Dbito"}),n.jsx(Tr,{id:"debit",checked:t.acceptsDebitCard,onCheckedChange:b=>s({...t,acceptsDebitCard:b})})]}),t.acceptsCreditCard&&n.jsxs("div",{children:[n.jsx(de,{htmlFor:"installments",children:"Mximo de Parcelas"}),n.jsxs(Zs,{value:t.maxInstallments.toString(),onValueChange:b=>s({...t,maxInstallments:parseInt(b)}),children:[n.jsx(Es,{children:n.jsx(Js,{})}),n.jsx(Ss,{children:[1,2,3,4,5,6,7,8,9,10,11,12].map(b=>n.jsxs(Ht,{value:b.toString(),children:[b,"x"]},b))})]})]})]})]}),n.jsxs(je,{children:[n.jsx(We,{children:n.jsx(Ge,{className:"text-sm",children:"Poltica de Cancelamento"})}),n.jsx(Ce,{children:n.jsx(An,{placeholder:"Exemplo: Cancelamento com reembolso total at 7 dias antes do evento. Aps esse perodo, no haver reembolso.",value:t.cancellationPolicy,onChange:b=>s({...t,cancellationPolicy:b.target.value}),rows:3})})]}),n.jsxs(je,{children:[n.jsx(We,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ge,{className:"text-sm",children:"Tipos de Ingressos / Lotes"}),n.jsx(cn,{children:"Configure os diferentes tipos e lotes de ingressos"})]}),n.jsxs(K,{size:"sm",onClick:N,children:[n.jsx(Uc,{className:"h-4 w-4 mr-1"}),"Adicionar"]})]})}),n.jsx(Ce,{children:e.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx("p",{className:"mb-2",children:"Nenhum tipo de ingresso configurado"}),n.jsx(K,{variant:"outline",size:"sm",onClick:N,children:"Criar Primeiro Lote"})]}):n.jsx("div",{className:"space-y-3",children:e.map(b=>n.jsx(je,{children:n.jsx(Ce,{className:"p-4",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-semibold",children:b.name}),b.description&&n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:b.description}),n.jsxs("div",{className:"flex gap-4 mt-2 text-sm",children:[n.jsxs("span",{className:"text-primary font-semibold",children:["R$ ",b.price.toFixed(2)]}),n.jsxs("span",{className:"text-muted-foreground",children:[b.quantity," ingressos"]}),n.jsxs("span",{className:"text-muted-foreground",children:["Min: ",b.minQuantity," / Mx: ",b.maxQuantity]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>C(b),children:n.jsx($8,{className:"h-4 w-4"})}),n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>E(b.id),children:n.jsx(Gn,{className:"h-4 w-4"})})]})]})})},b.id))})})]}),u&&e.length>0&&n.jsx(hV,{eventId:u}),n.jsx(je,{children:n.jsx(Ce,{className:"pt-6",children:n.jsxs("div",{className:"flex items-start space-x-2",children:[n.jsx(Tr,{id:"terms",checked:a,onCheckedChange:o}),n.jsxs("div",{className:"flex-1",children:[n.jsxs(de,{htmlFor:"terms",className:"cursor-pointer",children:["Aceito os"," ",n.jsx("button",{type:"button",onClick:()=>j(!0),className:"text-primary underline",children:"termos e condies"})," ","para venda de ingressos na plataforma"]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Ao aceitar, voc concorda com as taxas de servio e polticas da plataforma"})]})]})})}),n.jsx(Ut,{open:x,onOpenChange:w,children:n.jsxs(Bt,{className:"max-w-md max-h-[90vh] overflow-y-auto",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:f&&e.find(b=>b.id===f.id)?"Editar Ingresso":"Novo Ingresso"}),n.jsx(is,{children:"Configure as informaes do tipo de ingresso ou lote"})]}),f&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"ticket-name",children:"Nome do Lote *"}),n.jsx(we,{id:"ticket-name",placeholder:"Ex: 1 Lote, VIP, Pista...",value:f.name,onChange:b=>p({...f,name:b.target.value})})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"ticket-description",children:"Descrio"}),n.jsx(An,{id:"ticket-description",placeholder:"Descreva o que inclui neste ingresso...",value:f.description,onChange:b=>p({...f,description:b.target.value}),rows:2})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"ticket-price",children:"Preo (R$) *"}),n.jsx(we,{id:"ticket-price",type:"number",step:"0.01",min:"0",value:f.price,onChange:b=>p({...f,price:parseFloat(b.target.value)||0})})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"ticket-quantity",children:"Quantidade *"}),n.jsx(we,{id:"ticket-quantity",type:"number",min:"1",value:f.quantity,onChange:b=>p({...f,quantity:parseInt(b.target.value)||1})})]})]}),n.jsx(ia,{}),n.jsxs("div",{children:[n.jsx(de,{className:"mb-2 block",children:"Perodo de Vendas (Opcional)"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"sales-start",className:"text-xs text-muted-foreground",children:"Incio das Vendas"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx(we,{id:"sales-start",type:"date",value:f.salesStartDate||"",onChange:b=>p({...f,salesStartDate:b.target.value})}),n.jsx(we,{type:"time",value:f.salesStartTime||"",onChange:b=>p({...f,salesStartTime:b.target.value})})]})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"sales-end",className:"text-xs text-muted-foreground",children:"Fim das Vendas"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx(we,{id:"sales-end",type:"date",value:f.salesEndDate||"",onChange:b=>p({...f,salesEndDate:b.target.value})}),n.jsx(we,{type:"time",value:f.salesEndTime||"",onChange:b=>p({...f,salesEndTime:b.target.value})})]})]})]})]}),n.jsx(ia,{}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"min-qty",children:"Mn. por Compra"}),n.jsx(we,{id:"min-qty",type:"number",min:"1",value:f.minQuantity,onChange:b=>p({...f,minQuantity:parseInt(b.target.value)||1})})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"max-qty",children:"Mx. por Compra"}),n.jsx(we,{id:"max-qty",type:"number",min:"1",value:f.maxQuantity,onChange:b=>p({...f,maxQuantity:parseInt(b.target.value)||1})})]})]}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsx(K,{type:"button",variant:"outline",className:"flex-1",onClick:()=>w(!1),children:"Cancelar"}),n.jsx(K,{type:"button",className:"flex-1",onClick:T,disabled:!f.name||f.price<=0,children:"Salvar"})]})]})]})}),n.jsx(Ut,{open:_,onOpenChange:j,children:n.jsxs(Bt,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[n.jsx(xr,{children:n.jsx(vr,{children:"Termos e Condies - Venda de Ingressos"})}),n.jsxs("div",{className:"space-y-4 text-sm",children:[n.jsxs("section",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"1. Taxas e Repasses"}),n.jsxs("p",{className:"text-muted-foreground",children:["A plataforma cobra uma taxa de servio de ",t.platformFeePercentage,"% sobre cada ingresso vendido, alm da taxa de processamento de pagamento de ",t.paymentProcessingFeePercentage,"% + R$ ",t.paymentProcessingFeeFixed.toFixed(2)," por transao."]})]}),n.jsxs("section",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"2. Repasse de Valores"}),n.jsx("p",{className:"text-muted-foreground",children:"Os valores das vendas sero repassados ao organizador em at 30 dias aps a realizao do evento, descontadas as taxas aplicveis (se o organizador for o pagador das taxas)."})]}),n.jsxs("section",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"3. Responsabilidades do Organizador"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground",children:[n.jsx("li",{children:"Garantir a realizao do evento conforme anunciado"}),n.jsx("li",{children:"Respeitar a poltica de cancelamento estabelecida"}),n.jsx("li",{children:"Fornecer suporte aos participantes"}),n.jsx("li",{children:"Manter dados fiscais atualizados para emisso de notas fiscais"})]})]}),n.jsxs("section",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"4. Cancelamentos e Reembolsos"}),n.jsx("p",{className:"text-muted-foreground",children:"Em caso de cancelamento do evento, o organizador deve solicitar o cancelamento na plataforma e os valores sero reembolsados aos participantes de acordo com a poltica estabelecida. As taxas da plataforma no so reembolsveis."})]}),n.jsxs("section",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"5. Processamento de Pagamentos"}),n.jsx("p",{className:"text-muted-foreground",children:"Os pagamentos so processados centralmente pela plataforma atravs do Stripe. Voc no precisa ter uma conta Stripe - a plataforma gerencia todos os pagamentos e repassa os valores para voc."})]}),n.jsxs("section",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"6. Dados para Recebimento"}),n.jsx("p",{className:"text-muted-foreground",children:"Para receber os pagamentos, voc precisa fornecer seus dados bancrios e fiscais (CPF/CNPJ) atravs da plataforma. Os valores sero transferidos diretamente para sua conta."})]})]}),n.jsx("div",{className:"flex justify-end gap-2 pt-4",children:n.jsx(K,{variant:"outline",onClick:()=>j(!1),children:"Fechar"})})]})})]})}function mV({open:e,onOpenChange:t,eventId:r,eventTitle:s,shareUrl:a,onViewEvent:o}){const[c,u]=v.useState(!1),f=async()=>{try{await navigator.clipboard.writeText(a),u(!0),X.success("Link copiado!"),setTimeout(()=>u(!1),2e3)}catch{X.error("Erro ao copiar link")}},p=async()=>{if(navigator.share)try{await navigator.share({title:s,text:`Confira este evento: ${s}`,url:a})}catch{console.log("Compartilhamento cancelado")}else f(),X.info("Use o boto 'Copiar Link' para compartilhar")};return n.jsx(Ut,{open:e,onOpenChange:t,children:n.jsxs(Bt,{className:"max-w-sm mx-auto",children:[n.jsx(xr,{children:n.jsx(vr,{className:"text-center text-xl",children:" Evento Criado com Sucesso!"})}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsx("p",{className:"text-center text-muted-foreground",children:"Seu evento est pronto! Compartilhe com seus participantes."}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs(K,{onClick:f,variant:"outline",className:"w-full justify-start gap-2",children:[n.jsx(Ej,{className:"h-4 w-4"}),c?"Link Copiado!":"Copiar Link"]}),n.jsxs(K,{onClick:p,variant:"outline",className:"w-full justify-start gap-2",children:[n.jsx(ks,{className:"h-4 w-4"}),"Compartilhar Evento"]}),n.jsxs(K,{onClick:o,className:"w-full justify-start gap-2 btn-glow",children:[n.jsx(Go,{className:"h-4 w-4"}),"Ver Evento"]})]}),n.jsx(K,{onClick:()=>t(!1),variant:"ghost",className:"w-full",children:"Fechar"})]})]})})}var op="Popover",[uA]=Mr(op,[so]),Yu=so(),[pV,lo]=uA(op),hA=e=>{const{__scopePopover:t,children:r,open:s,defaultOpen:a,onOpenChange:o,modal:c=!1}=e,u=Yu(t),f=v.useRef(null),[p,x]=v.useState(!1),[w,_]=Os({prop:s,defaultProp:a??!1,onChange:o,caller:op});return n.jsx(U1,{...u,children:n.jsx(pV,{scope:t,contentId:un(),triggerRef:f,open:w,onOpenChange:_,onOpenToggle:v.useCallback(()=>_(j=>!j),[_]),hasCustomAnchor:p,onCustomAnchorAdd:v.useCallback(()=>x(!0),[]),onCustomAnchorRemove:v.useCallback(()=>x(!1),[]),modal:c,children:r})})};hA.displayName=op;var fA="PopoverAnchor",gV=v.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=lo(fA,r),o=Yu(r),{onCustomAnchorAdd:c,onCustomAnchorRemove:u}=a;return v.useEffect(()=>(c(),()=>u()),[c,u]),n.jsx(Du,{...o,...s,ref:t})});gV.displayName=fA;var mA="PopoverTrigger",pA=v.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=lo(mA,r),o=Yu(r),c=tt(t,a.triggerRef),u=n.jsx(qe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":yA(a.open),...s,ref:c,onClick:Ie(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?u:n.jsx(Du,{asChild:!0,...o,children:u})});pA.displayName=mA;var Av="PopoverPortal",[xV,vV]=uA(Av,{forceMount:void 0}),gA=e=>{const{__scopePopover:t,forceMount:r,children:s,container:a}=e,o=lo(Av,t);return n.jsx(xV,{scope:t,forceMount:r,children:n.jsx(Hr,{present:r||o.open,children:n.jsx(Bc,{asChild:!0,container:a,children:s})})})};gA.displayName=Av;var Dc="PopoverContent",xA=v.forwardRef((e,t)=>{const r=vV(Dc,e.__scopePopover),{forceMount:s=r.forceMount,...a}=e,o=lo(Dc,e.__scopePopover);return n.jsx(Hr,{present:s||o.open,children:o.modal?n.jsx(yV,{...a,ref:t}):n.jsx(bV,{...a,ref:t})})});xA.displayName=Dc;var wV=qi("PopoverContent.RemoveScroll"),yV=v.forwardRef((e,t)=>{const r=lo(Dc,e.__scopePopover),s=v.useRef(null),a=tt(t,s),o=v.useRef(!1);return v.useEffect(()=>{const c=s.current;if(c)return qm(c)},[]),n.jsx(zu,{as:wV,allowPinchZoom:!0,children:n.jsx(vA,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ie(e.onCloseAutoFocus,c=>{var u;c.preventDefault(),o.current||(u=r.triggerRef.current)==null||u.focus()}),onPointerDownOutside:Ie(e.onPointerDownOutside,c=>{const u=c.detail.originalEvent,f=u.button===0&&u.ctrlKey===!0,p=u.button===2||f;o.current=p},{checkForDefaultPrevented:!1}),onFocusOutside:Ie(e.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1})})})}),bV=v.forwardRef((e,t)=>{const r=lo(Dc,e.__scopePopover),s=v.useRef(!1),a=v.useRef(!1);return n.jsx(vA,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var c,u;(c=e.onCloseAutoFocus)==null||c.call(e,o),o.defaultPrevented||(s.current||(u=r.triggerRef.current)==null||u.focus(),o.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:o=>{var f,p;(f=e.onInteractOutside)==null||f.call(e,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const c=o.target;((p=r.triggerRef.current)==null?void 0:p.contains(c))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),vA=v.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:c,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:p,onInteractOutside:x,...w}=e,_=lo(Dc,r),j=Yu(r);return $m(),n.jsx(Bu,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:o,children:n.jsx(cl,{asChild:!0,disableOutsidePointerEvents:c,onInteractOutside:x,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:p,onDismiss:()=>_.onOpenChange(!1),children:n.jsx(Em,{"data-state":yA(_.open),role:"dialog",id:_.contentId,...j,...w,ref:t,style:{...w.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),wA="PopoverClose",_V=v.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=lo(wA,r);return n.jsx(qe.button,{type:"button",...s,ref:t,onClick:Ie(e.onClick,()=>a.onOpenChange(!1))})});_V.displayName=wA;var NV="PopoverArrow",jV=v.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=Yu(r);return n.jsx(Sm,{...a,...s,ref:t})});jV.displayName=NV;function yA(e){return e?"open":"closed"}var CV=hA,EV=pA,SV=gA,bA=xA;const AV=CV,kV=EV,_A=v.forwardRef(({className:e,align:t="center",sideOffset:r=4,...s},a)=>n.jsx(SV,{children:n.jsx(bA,{ref:a,align:t,sideOffset:r,className:Le("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));_A.displayName=bA.displayName;var x2=1,TV=.9,IV=.8,RV=.17,Rg=.1,Pg=.999,PV=.9999,OV=.99,DV=/[\\\/_+.#"@\[\(\{&]/,MV=/[\\\/_+.#"@\[\(\{&]/g,LV=/[\s-]/,NA=/[\s-]/g;function w0(e,t,r,s,a,o,c){if(o===t.length)return a===e.length?x2:OV;var u=`${a},${o}`;if(c[u]!==void 0)return c[u];for(var f=s.charAt(o),p=r.indexOf(f,a),x=0,w,_,j,N;p>=0;)w=w0(e,t,r,s,p+1,o+1,c),w>x&&(p===a?w*=x2:DV.test(e.charAt(p-1))?(w*=IV,j=e.slice(a,p-1).match(MV),j&&a>0&&(w*=Math.pow(Pg,j.length))):LV.test(e.charAt(p-1))?(w*=TV,N=e.slice(a,p-1).match(NA),N&&a>0&&(w*=Math.pow(Pg,N.length))):(w*=RV,a>0&&(w*=Math.pow(Pg,p-a))),e.charAt(p)!==t.charAt(o)&&(w*=PV)),(w<Rg&&r.charAt(p-1)===s.charAt(o+1)||s.charAt(o+1)===s.charAt(o)&&r.charAt(p-1)!==s.charAt(o))&&(_=w0(e,t,r,s,p+1,o+2,c),_*Rg>w&&(w=_*Rg)),w>x&&(x=w),p=r.indexOf(f,p+1);return c[u]=x,x}function v2(e){return e.toLowerCase().replace(NA," ")}function FV(e,t,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,w0(e,t,v2(e),v2(t),0,0,{})}var vd='[cmdk-group=""]',Og='[cmdk-group-items=""]',BV='[cmdk-group-heading=""]',jA='[cmdk-item=""]',w2=`${jA}:not([aria-disabled="true"])`,y0="cmdk-item-select",Bl="data-value",zV=(e,t,r)=>FV(e,t,r),CA=v.createContext(void 0),Qu=()=>v.useContext(CA),EA=v.createContext(void 0),kv=()=>v.useContext(EA),SA=v.createContext(void 0),AA=v.forwardRef((e,t)=>{let r=zl(()=>{var W,J;return{search:"",value:(J=(W=e.value)!=null?W:e.defaultValue)!=null?J:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),s=zl(()=>new Set),a=zl(()=>new Map),o=zl(()=>new Map),c=zl(()=>new Set),u=kA(e),{label:f,children:p,value:x,onValueChange:w,filter:_,shouldFilter:j,loop:N,disablePointerSelection:C=!1,vimBindings:T=!0,...E}=e,S=un(),b=un(),k=un(),O=v.useRef(null),L=QV();sl(()=>{if(x!==void 0){let W=x.trim();r.current.value=W,P.emit()}},[x]),sl(()=>{L(6,q)},[]);let P=v.useMemo(()=>({subscribe:W=>(c.current.add(W),()=>c.current.delete(W)),snapshot:()=>r.current,setState:(W,J,G)=>{var se,ce,ne,he;if(!Object.is(r.current[W],J)){if(r.current[W]=J,W==="search")z(),$(),L(1,Y);else if(W==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let Ae=document.getElementById(k);Ae?Ae.focus():(se=document.getElementById(S))==null||se.focus()}if(L(7,()=>{var Ae;r.current.selectedItemId=(Ae=ee())==null?void 0:Ae.id,P.emit()}),G||L(5,q),((ce=u.current)==null?void 0:ce.value)!==void 0){let Ae=J??"";(he=(ne=u.current).onValueChange)==null||he.call(ne,Ae);return}}P.emit()}},emit:()=>{c.current.forEach(W=>W())}}),[]),M=v.useMemo(()=>({value:(W,J,G)=>{var se;J!==((se=o.current.get(W))==null?void 0:se.value)&&(o.current.set(W,{value:J,keywords:G}),r.current.filtered.items.set(W,R(J,G)),L(2,()=>{$(),P.emit()}))},item:(W,J)=>(s.current.add(W),J&&(a.current.has(J)?a.current.get(J).add(W):a.current.set(J,new Set([W]))),L(3,()=>{z(),$(),r.current.value||Y(),P.emit()}),()=>{o.current.delete(W),s.current.delete(W),r.current.filtered.items.delete(W);let G=ee();L(4,()=>{z(),(G==null?void 0:G.getAttribute("id"))===W&&Y(),P.emit()})}),group:W=>(a.current.has(W)||a.current.set(W,new Set),()=>{o.current.delete(W),a.current.delete(W)}),filter:()=>u.current.shouldFilter,label:f||e["aria-label"],getDisablePointerSelection:()=>u.current.disablePointerSelection,listId:S,inputId:k,labelId:b,listInnerRef:O}),[]);function R(W,J){var G,se;let ce=(se=(G=u.current)==null?void 0:G.filter)!=null?se:zV;return W?ce(W,r.current.search,J):0}function $(){if(!r.current.search||u.current.shouldFilter===!1)return;let W=r.current.filtered.items,J=[];r.current.filtered.groups.forEach(se=>{let ce=a.current.get(se),ne=0;ce.forEach(he=>{let Ae=W.get(he);ne=Math.max(Ae,ne)}),J.push([se,ne])});let G=O.current;H().sort((se,ce)=>{var ne,he;let Ae=se.getAttribute("id"),Pe=ce.getAttribute("id");return((ne=W.get(Pe))!=null?ne:0)-((he=W.get(Ae))!=null?he:0)}).forEach(se=>{let ce=se.closest(Og);ce?ce.appendChild(se.parentElement===ce?se:se.closest(`${Og} > *`)):G.appendChild(se.parentElement===G?se:se.closest(`${Og} > *`))}),J.sort((se,ce)=>ce[1]-se[1]).forEach(se=>{var ce;let ne=(ce=O.current)==null?void 0:ce.querySelector(`${vd}[${Bl}="${encodeURIComponent(se[0])}"]`);ne==null||ne.parentElement.appendChild(ne)})}function Y(){let W=H().find(G=>G.getAttribute("aria-disabled")!=="true"),J=W==null?void 0:W.getAttribute(Bl);P.setState("value",J||void 0)}function z(){var W,J,G,se;if(!r.current.search||u.current.shouldFilter===!1){r.current.filtered.count=s.current.size;return}r.current.filtered.groups=new Set;let ce=0;for(let ne of s.current){let he=(J=(W=o.current.get(ne))==null?void 0:W.value)!=null?J:"",Ae=(se=(G=o.current.get(ne))==null?void 0:G.keywords)!=null?se:[],Pe=R(he,Ae);r.current.filtered.items.set(ne,Pe),Pe>0&&ce++}for(let[ne,he]of a.current)for(let Ae of he)if(r.current.filtered.items.get(Ae)>0){r.current.filtered.groups.add(ne);break}r.current.filtered.count=ce}function q(){var W,J,G;let se=ee();se&&(((W=se.parentElement)==null?void 0:W.firstChild)===se&&((G=(J=se.closest(vd))==null?void 0:J.querySelector(BV))==null||G.scrollIntoView({block:"nearest"})),se.scrollIntoView({block:"nearest"}))}function ee(){var W;return(W=O.current)==null?void 0:W.querySelector(`${jA}[aria-selected="true"]`)}function H(){var W;return Array.from(((W=O.current)==null?void 0:W.querySelectorAll(w2))||[])}function re(W){let J=H()[W];J&&P.setState("value",J.getAttribute(Bl))}function ae(W){var J;let G=ee(),se=H(),ce=se.findIndex(he=>he===G),ne=se[ce+W];(J=u.current)!=null&&J.loop&&(ne=ce+W<0?se[se.length-1]:ce+W===se.length?se[0]:se[ce+W]),ne&&P.setState("value",ne.getAttribute(Bl))}function ie(W){let J=ee(),G=J==null?void 0:J.closest(vd),se;for(;G&&!se;)G=W>0?KV(G,vd):YV(G,vd),se=G==null?void 0:G.querySelector(w2);se?P.setState("value",se.getAttribute(Bl)):ae(W)}let te=()=>re(H().length-1),ye=W=>{W.preventDefault(),W.metaKey?te():W.altKey?ie(1):ae(1)},ge=W=>{W.preventDefault(),W.metaKey?re(0):W.altKey?ie(-1):ae(-1)};return v.createElement(qe.div,{ref:t,tabIndex:-1,...E,"cmdk-root":"",onKeyDown:W=>{var J;(J=E.onKeyDown)==null||J.call(E,W);let G=W.nativeEvent.isComposing||W.keyCode===229;if(!(W.defaultPrevented||G))switch(W.key){case"n":case"j":{T&&W.ctrlKey&&ye(W);break}case"ArrowDown":{ye(W);break}case"p":case"k":{T&&W.ctrlKey&&ge(W);break}case"ArrowUp":{ge(W);break}case"Home":{W.preventDefault(),re(0);break}case"End":{W.preventDefault(),te();break}case"Enter":{W.preventDefault();let se=ee();if(se){let ce=new Event(y0);se.dispatchEvent(ce)}}}}},v.createElement("label",{"cmdk-label":"",htmlFor:M.inputId,id:M.labelId,style:JV},f),lp(e,W=>v.createElement(EA.Provider,{value:P},v.createElement(CA.Provider,{value:M},W))))}),UV=v.forwardRef((e,t)=>{var r,s;let a=un(),o=v.useRef(null),c=v.useContext(SA),u=Qu(),f=kA(e),p=(s=(r=f.current)==null?void 0:r.forceMount)!=null?s:c==null?void 0:c.forceMount;sl(()=>{if(!p)return u.item(a,c==null?void 0:c.id)},[p]);let x=TA(a,o,[e.value,e.children,o],e.keywords),w=kv(),_=eo(L=>L.value&&L.value===x.current),j=eo(L=>p||u.filter()===!1?!0:L.search?L.filtered.items.get(a)>0:!0);v.useEffect(()=>{let L=o.current;if(!(!L||e.disabled))return L.addEventListener(y0,N),()=>L.removeEventListener(y0,N)},[j,e.onSelect,e.disabled]);function N(){var L,P;C(),(P=(L=f.current).onSelect)==null||P.call(L,x.current)}function C(){w.setState("value",x.current,!0)}if(!j)return null;let{disabled:T,value:E,onSelect:S,forceMount:b,keywords:k,...O}=e;return v.createElement(qe.div,{ref:Ya(o,t),...O,id:a,"cmdk-item":"",role:"option","aria-disabled":!!T,"aria-selected":!!_,"data-disabled":!!T,"data-selected":!!_,onPointerMove:T||u.getDisablePointerSelection()?void 0:C,onClick:T?void 0:N},e.children)}),$V=v.forwardRef((e,t)=>{let{heading:r,children:s,forceMount:a,...o}=e,c=un(),u=v.useRef(null),f=v.useRef(null),p=un(),x=Qu(),w=eo(j=>a||x.filter()===!1?!0:j.search?j.filtered.groups.has(c):!0);sl(()=>x.group(c),[]),TA(c,u,[e.value,e.heading,f]);let _=v.useMemo(()=>({id:c,forceMount:a}),[a]);return v.createElement(qe.div,{ref:Ya(u,t),...o,"cmdk-group":"",role:"presentation",hidden:w?void 0:!0},r&&v.createElement("div",{ref:f,"cmdk-group-heading":"","aria-hidden":!0,id:p},r),lp(e,j=>v.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?p:void 0},v.createElement(SA.Provider,{value:_},j))))}),VV=v.forwardRef((e,t)=>{let{alwaysRender:r,...s}=e,a=v.useRef(null),o=eo(c=>!c.search);return!r&&!o?null:v.createElement(qe.div,{ref:Ya(a,t),...s,"cmdk-separator":"",role:"separator"})}),qV=v.forwardRef((e,t)=>{let{onValueChange:r,...s}=e,a=e.value!=null,o=kv(),c=eo(p=>p.search),u=eo(p=>p.selectedItemId),f=Qu();return v.useEffect(()=>{e.value!=null&&o.setState("search",e.value)},[e.value]),v.createElement(qe.input,{ref:t,...s,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":f.listId,"aria-labelledby":f.labelId,"aria-activedescendant":u,id:f.inputId,type:"text",value:a?e.value:c,onChange:p=>{a||o.setState("search",p.target.value),r==null||r(p.target.value)}})}),WV=v.forwardRef((e,t)=>{let{children:r,label:s="Suggestions",...a}=e,o=v.useRef(null),c=v.useRef(null),u=eo(p=>p.selectedItemId),f=Qu();return v.useEffect(()=>{if(c.current&&o.current){let p=c.current,x=o.current,w,_=new ResizeObserver(()=>{w=requestAnimationFrame(()=>{let j=p.offsetHeight;x.style.setProperty("--cmdk-list-height",j.toFixed(1)+"px")})});return _.observe(p),()=>{cancelAnimationFrame(w),_.unobserve(p)}}},[]),v.createElement(qe.div,{ref:Ya(o,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":u,"aria-label":s,id:f.listId},lp(e,p=>v.createElement("div",{ref:Ya(c,f.listInnerRef),"cmdk-list-sizer":""},p)))}),HV=v.forwardRef((e,t)=>{let{open:r,onOpenChange:s,overlayClassName:a,contentClassName:o,container:c,...u}=e;return v.createElement(sv,{open:r,onOpenChange:s},v.createElement(av,{container:c},v.createElement(Hm,{"cmdk-overlay":"",className:a}),v.createElement(Gm,{"aria-label":e.label,"cmdk-dialog":"",className:o},v.createElement(AA,{ref:t,...u}))))}),GV=v.forwardRef((e,t)=>eo(r=>r.filtered.count===0)?v.createElement(qe.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),XV=v.forwardRef((e,t)=>{let{progress:r,children:s,label:a="Loading...",...o}=e;return v.createElement(qe.div,{ref:t,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},lp(e,c=>v.createElement("div",{"aria-hidden":!0},c)))}),Yn=Object.assign(AA,{List:WV,Item:UV,Input:qV,Group:$V,Separator:VV,Dialog:HV,Empty:GV,Loading:XV});function KV(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function YV(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function kA(e){let t=v.useRef(e);return sl(()=>{t.current=e}),t}var sl=typeof window>"u"?v.useEffect:v.useLayoutEffect;function zl(e){let t=v.useRef();return t.current===void 0&&(t.current=e()),t}function eo(e){let t=kv(),r=()=>e(t.snapshot());return v.useSyncExternalStore(t.subscribe,r,r)}function TA(e,t,r,s=[]){let a=v.useRef(),o=Qu();return sl(()=>{var c;let u=(()=>{var p;for(let x of r){if(typeof x=="string")return x.trim();if(typeof x=="object"&&"current"in x)return x.current?(p=x.current.textContent)==null?void 0:p.trim():a.current}})(),f=s.map(p=>p.trim());o.value(e,u,f),(c=t.current)==null||c.setAttribute(Bl,u),a.current=u}),a}var QV=()=>{let[e,t]=v.useState(),r=zl(()=>new Map);return sl(()=>{r.current.forEach(s=>s()),r.current=new Map},[e]),(s,a)=>{r.current.set(s,a),t({})}};function ZV(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function lp({asChild:e,children:t},r){return e&&v.isValidElement(t)?v.cloneElement(ZV(t),{ref:t.ref},r(t.props.children)):r(t)}var JV={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const IA=v.forwardRef(({className:e,...t},r)=>n.jsx(Yn,{ref:r,className:Le("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));IA.displayName=Yn.displayName;const RA=v.forwardRef(({className:e,...t},r)=>n.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[n.jsx(au,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),n.jsx(Yn.Input,{ref:r,className:Le("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));RA.displayName=Yn.Input.displayName;const eq=v.forwardRef(({className:e,...t},r)=>n.jsx(Yn.List,{ref:r,className:Le("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));eq.displayName=Yn.List.displayName;const PA=v.forwardRef((e,t)=>n.jsx(Yn.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));PA.displayName=Yn.Empty.displayName;const OA=v.forwardRef(({className:e,...t},r)=>n.jsx(Yn.Group,{ref:r,className:Le("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));OA.displayName=Yn.Group.displayName;const tq=v.forwardRef(({className:e,...t},r)=>n.jsx(Yn.Separator,{ref:r,className:Le("-mx-1 h-px bg-border",e),...t}));tq.displayName=Yn.Separator.displayName;const DA=v.forwardRef(({className:e,...t},r)=>n.jsx(Yn.Item,{ref:r,className:Le("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));DA.displayName=Yn.Item.displayName;function cp({value:e,onChange:t,placeholder:r="Selecione categorias..."}){const s=e||[],a=c=>{s.includes(c)?t(s.filter(u=>u!==c)):t([...s,c])},o=c=>{t(s.filter(u=>u!==c))};return n.jsxs("div",{className:"space-y-2",children:[n.jsxs(AV,{children:[n.jsx(kV,{asChild:!0,children:n.jsxs(K,{variant:"outline",role:"combobox",className:"w-full justify-between",children:[s.length>0?n.jsxs("span",{children:[s.length," categoria",s.length>1?"s":""," selecionada",s.length>1?"s":""]}):n.jsx("span",{className:"text-muted-foreground",children:r}),n.jsx(R8,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),n.jsx(_A,{className:"w-full p-0",align:"start",children:n.jsxs(IA,{children:[n.jsx(RA,{placeholder:"Buscar categoria..."}),n.jsx(PA,{children:"Nenhuma categoria encontrada."}),n.jsx(OA,{className:"max-h-64 overflow-auto",children:l0.map(c=>n.jsxs(DA,{onSelect:()=>a(c.value),children:[n.jsx(Xn,{className:Le("mr-2 h-4 w-4",s.includes(c.value)?"opacity-100":"opacity-0")}),c.label]},c.value))})]})})]}),s.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(c=>{const u=l0.find(f=>f.value===c);return u?n.jsxs(dt,{variant:"secondary",className:"gap-1",children:[u.label,n.jsx("button",{type:"button",onClick:()=>o(c),className:"ml-1 hover:bg-muted rounded-full",children:n.jsx(sr,{className:"h-3 w-3"})})]},c):null})})]})}function MA(){const[e,t]=v.useState({isNativeApp:!1,isWebBrowser:!0,isMobileWeb:!1,platform:"web"});return v.useEffect(()=>{const r=Ko.isNativePlatform(),s=Ko.getPlatform(),a=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);t({isNativeApp:r,isWebBrowser:!r,isMobileWeb:!r&&a,platform:s})},[]),e}function rq({featureName:e="venda de ingressos pela plataforma",description:t="Esta funcionalidade est disponvel apenas atravs do navegador web. Para continuar, acesse pelo computador ou abra este link no navegador do seu celular."}){const r=()=>{const a=window.location.href;navigator.clipboard.writeText(a).then(()=>{X.success("Link copiado! Cole no navegador para continuar.")}).catch(()=>{X.error("Erro ao copiar link")})},s=()=>{const a=window.location.href;window.open(a,"_blank")};return n.jsxs(Xu,{className:"border-amber-500/50 bg-amber-500/10",children:[n.jsx(dl,{className:"h-4 w-4 text-amber-500"}),n.jsx(dA,{className:"text-amber-500 font-semibold",children:"Recurso disponvel apenas no navegador"}),n.jsxs(Ku,{className:"space-y-3 mt-2",children:[n.jsxs("p",{className:"text-sm text-foreground/80",children:["A funcionalidade de ",n.jsx("strong",{children:e})," requer acesso atravs do navegador web."]}),n.jsx("p",{className:"text-sm text-foreground/80",children:t}),n.jsxs("div",{className:"flex flex-col gap-2 mt-4",children:[n.jsxs(K,{variant:"outline",size:"sm",onClick:r,className:"w-full justify-start gap-2",children:[n.jsx(Ej,{className:"h-4 w-4"}),"Copiar link desta pgina"]}),n.jsxs(K,{variant:"outline",size:"sm",onClick:s,className:"w-full justify-start gap-2",children:[n.jsx(Vr,{className:"h-4 w-4"}),"Abrir no navegador"]})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:" Dica: Voc pode criar eventos gratuitos normalmente pelo app. A restrio aplica-se apenas  venda de ingressos."})]})]})}function b0({onBack:e,eventId:t}){const{createEvent:r,organizerData:s}=ti(),{profile:a,updateProfile:o}=zm(),{isAdmin:c}=Fs(),{isNativeApp:u}=MA(),[f,p]=v.useState(!1),[x,w]=v.useState({title:"",description:"",date:"",time:"",endDate:"",endTime:"",location:"",address:"",locationLink:"",maxAttendees:"",ticketPrice:"",ticketLink:""}),[_,j]=v.useState([]),[N,C]=v.useState(null),[T,E]=v.useState(null),[S,b]=v.useState(!1),[k,O]=v.useState([]),[L,P]=v.useState(!1),[M,R]=v.useState(!1),[$,Y]=v.useState(!1),[z,q]=v.useState(null),ee=_t(),[H,re]=v.useState(""),[ae,ie]=v.useState((a==null?void 0:a.notes)||""),[te,ye]=v.useState(!0),[ge,W]=v.useState("presencial"),[J,G]=v.useState("free"),[se,ce]=v.useState([]),[ne,he]=v.useState({feePayer:"buyer",platformFeePercentage:5,paymentProcessingFeePercentage:3.99,paymentProcessingFeeFixed:.39,cancellationPolicy:"",acceptsPix:!0,acceptsCreditCard:!0,acceptsDebitCard:!0,maxInstallments:12}),[Ae,Pe]=v.useState(!1),[Be,Ee]=v.useState(!1),[ue,Fe]=v.useState(""),[_e,Ze]=v.useState(""),[be,ze]=v.useState("corrente"),[He,Ft]=v.useState(""),[pe,Je]=v.useState(""),[at,it]=v.useState(""),[ar,Nt]=v.useState("");v.useEffect(()=>{(async()=>{var ut;if(t){p(!0);try{const{data:lt,error:ft}=await U.from("events").select("*").eq("id",t).single();if(ft)throw ft;if(lt){const Te=new Date(lt.event_date),Dt=Te.toISOString().split("T")[0],mt=Te.toTimeString().slice(0,5);let Pt="",Rn="";if(lt.end_date){const Bs=new Date(lt.end_date);Pt=Bs.toISOString().split("T")[0],Rn=Bs.toTimeString().slice(0,5)}w({title:lt.title||"",description:lt.description||"",date:Dt,time:mt,endDate:Pt,endTime:Rn,location:lt.location||"",address:lt.is_live?"":lt.location||"",locationLink:lt.location_link||"",maxAttendees:((ut=lt.max_attendees)==null?void 0:ut.toString())||"",ticketPrice:"",ticketLink:""}),j(lt.category||[]),C(lt.image_url||null),W(lt.is_live?"live":"presencial"),b(lt.requires_registration||!1),lt.interests&&lt.interests.length>0&&re(lt.interests[0])}}catch(lt){console.error("Error loading event:",lt),X.error("Erro ao carregar evento")}}})()},[t]);const Sr=Se=>{var lt;const ut=(lt=Se.target.files)==null?void 0:lt[0];if(ut){E(ut);const ft=new FileReader;ft.onload=Te=>{var Dt;C((Dt=Te.target)==null?void 0:Dt.result)},ft.readAsDataURL(ut)}},At=(Se,ut)=>{w(lt=>({...lt,[Se]:ut}))},Ve=async Se=>{if(Se.preventDefault(),!x.title||!x.date||!x.time||!x.endDate||!x.endTime){X.error("Preencha todos os campos obrigatrios");return}if(ge==="presencial"&&!x.address){X.error("Preencha o endereo do evento");return}if(ge==="live"&&!x.locationLink){X.error("Preencha o link da transmisso");return}if(J==="platform"){if(u){X.error("Venda pela plataforma disponvel apenas no navegador"),Ee(!0);return}if(se.length===0){X.error("Configure pelo menos um tipo de ingresso");return}if(!Ae){X.error("Voc precisa aceitar os termos e condies");return}if(!ue&&(!_e||!He||!pe||!at||!ar)){X.error("Preencha sua chave PIX ou dados bancrios completos para receber os pagamentos");return}}if(J==="external"&&!x.ticketLink){X.error("Preencha o link de compra do ingresso");return}try{R(!0);let ut=null;if(T){const Te=T.name.split(".").pop(),Dt=`events/${Date.now()}.${Te}`,{error:mt}=await U.storage.from("user-uploads").upload(Dt,T);if(mt)throw mt;const{data:{publicUrl:Pt}}=U.storage.from("user-uploads").getPublicUrl(Dt);ut=Pt}const lt=new Date(`${x.date}T${x.time}`),ft=new Date(`${x.endDate}T${x.endTime}`);if(ae!==(a==null?void 0:a.notes)&&await o({notes:ae}),f&&t){const{error:Te}=await U.from("events").update({title:x.title,description:x.description,event_date:lt.toISOString(),end_date:ft.toISOString(),location:ge==="live"?"Online":x.address,location_link:x.locationLink||null,image_url:ut||N,max_attendees:x.maxAttendees?parseInt(x.maxAttendees):null,interests:H?[H]:[],is_live:ge==="live",requires_registration:S,category:_.length>0?_:null,ticket_price:x.ticketPrice?parseFloat(x.ticketPrice):0,ticket_link:x.ticketLink||null,updated_at:new Date().toISOString()}).eq("id",t);if(Te)throw Te;X.success("Evento atualizado com sucesso!")}else{const Te={title:x.title,description:x.description,event_date:lt.toISOString(),end_date:ft.toISOString(),location:ge==="live"?"Online":x.address,location_link:x.locationLink||null,image_url:ut,max_attendees:x.maxAttendees?parseInt(x.maxAttendees):null,interests:H?[H]:[],is_live:ge==="live",status:"upcoming",requires_registration:S,category:_.length>0?_:null,form_fields:S?k:[],ticket_price:J==="external"&&x.ticketPrice?parseFloat(x.ticketPrice):0,ticket_link:J==="external"&&x.ticketLink||null,has_platform_tickets:J==="platform",...J==="platform"&&{pix_key:ue||null,bank_name:_e||null,bank_account_type:be||null,bank_agency:He||null,bank_account:pe||null,bank_account_holder:at||null,bank_document:ar||null}};await r(Te);const{data:{user:Dt}}=await U.auth.getUser();if(!Dt)throw new Error("User not authenticated");const{data:mt}=await U.from("organizers").select("id").eq("user_id",Dt.id).single();if(!mt)throw new Error("Organizer not found");const{data:Pt}=await U.from("events").select("id").eq("organizer_id",mt.id).eq("title",x.title).order("created_at",{ascending:!1}).limit(1).single(),Rn=fn=>fn.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),Bs=(s==null?void 0:s.username)||(s!=null&&s.page_title?Rn(s.page_title):"")||(a!=null&&a.display_name?Rn(a.display_name):"organizador"),uo=Rn(x.title),kt=`${window.location.origin}/${Bs}/${uo}`;if(q({id:Pt.id,title:x.title,shareUrl:kt}),Y(!0),J==="platform"&&Pt){const{error:fn}=await U.from("event_ticket_settings").insert({event_id:Pt.id,accepts_platform_payment:!0,fee_payer:ne.feePayer,platform_fee_percentage:ne.platformFeePercentage,payment_processing_fee_percentage:ne.paymentProcessingFeePercentage,payment_processing_fee_fixed:ne.paymentProcessingFeeFixed,cancellation_policy:ne.cancellationPolicy,accepts_pix:ne.acceptsPix,accepts_credit_card:ne.acceptsCreditCard,accepts_debit_card:ne.acceptsDebitCard,max_installments:ne.maxInstallments,terms_accepted:Ae,terms_accepted_at:new Date().toISOString()});if(fn)throw fn;const Qn=se.map((Xe,Ot)=>({event_id:Pt.id,name:Xe.name,description:Xe.description,price:Xe.price,quantity:Xe.quantity,sales_start_date:Xe.salesStartDate&&Xe.salesStartTime?new Date(`${Xe.salesStartDate}T${Xe.salesStartTime}`).toISOString():null,sales_end_date:Xe.salesEndDate&&Xe.salesEndTime?new Date(`${Xe.salesEndDate}T${Xe.salesEndTime}`).toISOString():null,min_quantity_per_purchase:Xe.minQuantity,max_quantity_per_purchase:Xe.maxQuantity,sort_order:Ot})),{error:ho}=await U.from("ticket_types").insert(Qn);if(ho)throw ho}}f&&e()}catch(ut){console.error("Error saving event:",ut),X.error(f?"Erro ao atualizar evento":"Erro ao criar evento")}finally{R(!1)}};return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b border-border",children:n.jsxs("div",{className:"flex items-center justify-between p-4 max-w-md mx-auto",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:f?"Editar Evento":"Criar Evento"}),n.jsx("div",{className:"w-10"})]})}),n.jsx("div",{className:"p-4 max-w-md mx-auto pb-20",children:n.jsxs("form",{onSubmit:Ve,className:"space-y-6",children:[n.jsxs(je,{children:[n.jsx(We,{children:n.jsx(Ge,{className:"text-sm",children:"Arte do Evento"})}),n.jsx(Ce,{children:n.jsx("div",{className:"relative",children:N?n.jsxs("div",{className:"relative h-48 rounded-lg overflow-hidden",children:[n.jsx("img",{src:N,alt:"Preview do evento",className:"w-full h-full object-cover"}),n.jsx(K,{type:"button",variant:"secondary",size:"sm",className:"absolute top-2 right-2",onClick:()=>C(null),children:"Remover"})]}):n.jsxs("label",{className:"flex flex-col items-center justify-center h-48 border-2 border-dashed border-border rounded-lg cursor-pointer hover:border-primary/50 transition-colors",children:[n.jsx(Ms,{className:"h-8 w-8 text-muted-foreground mb-2"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"Clique para adicionar uma imagem"}),n.jsx("input",{type:"file",accept:"image/*",onChange:Sr,className:"hidden"})]})})})]}),n.jsxs(je,{children:[n.jsx(We,{children:n.jsx(Ge,{className:"text-sm",children:"Informaes Bsicas"})}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"title",children:"Nome do Evento"}),n.jsx(we,{id:"title",placeholder:"Digite o nome do evento",value:x.title,onChange:Se=>At("title",Se.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"description",children:"Descrio"}),n.jsx(An,{id:"description",placeholder:"Descreva seu evento...",value:x.description,onChange:Se=>At("description",Se.target.value),rows:3})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"category",children:"Categorias"}),n.jsx(cp,{value:_,onChange:j,placeholder:"Selecione uma ou mais categorias"})]})]})]}),n.jsxs(je,{children:[n.jsx(We,{children:n.jsx(Ge,{className:"text-sm",children:"Tipo de Evento"})}),n.jsx(Ce,{children:n.jsxs(zi,{value:ge,onValueChange:Se=>W(Se),children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(sn,{value:"presencial",id:"presencial"}),n.jsx(de,{htmlFor:"presencial",className:"cursor-pointer",children:" Evento Presencial"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(sn,{value:"live",id:"live"}),n.jsx(de,{htmlFor:"live",className:"cursor-pointer",children:" Evento Live (Online)"})]})]})})]}),n.jsxs(je,{children:[n.jsx(We,{children:n.jsxs(Ge,{className:"text-sm flex items-center gap-2",children:[n.jsx(Et,{className:"h-4 w-4"}),"Data e Hora"]})}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(de,{className:"text-sm font-medium mb-2 block",children:"Incio do Evento"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"date",className:"text-xs text-muted-foreground",children:"Data"}),n.jsx(we,{id:"date",type:"date",value:x.date,onChange:Se=>At("date",Se.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"time",className:"text-xs text-muted-foreground",children:"Horrio"}),n.jsx(we,{id:"time",type:"time",value:x.time,onChange:Se=>At("time",Se.target.value),required:!0})]})]})]}),n.jsxs("div",{className:"pt-2 border-t",children:[n.jsx(de,{className:"text-sm font-medium mb-2 block",children:"Encerramento do Evento *"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"endDate",className:"text-xs text-muted-foreground",children:"Data"}),n.jsx(we,{id:"endDate",type:"date",value:x.endDate,onChange:Se=>At("endDate",Se.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"endTime",className:"text-xs text-muted-foreground",children:"Horrio"}),n.jsx(we,{id:"endTime",type:"time",value:x.endTime,onChange:Se=>At("endTime",Se.target.value),required:!0})]})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Data e hora em que o evento ser encerrado automaticamente"})]})]})]}),n.jsxs(je,{children:[n.jsx(We,{children:n.jsxs(Ge,{className:"text-sm flex items-center gap-2",children:[n.jsx(Rt,{className:"h-4 w-4"}),ge==="live"?"Link da Transmisso":"Localizao"]})}),n.jsx(Ce,{className:"space-y-4",children:ge==="presencial"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"address",children:"Endereo Completo"}),n.jsx(we,{id:"address",placeholder:"Rua, nmero, bairro, cidade...",value:x.address,onChange:Se=>At("address",Se.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"locationLink",children:"Link do Endereo"}),n.jsx(we,{id:"locationLink",type:"url",placeholder:"https://maps.google.com/...",value:x.locationLink,onChange:Se=>At("locationLink",Se.target.value)}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Cole o link do Google Maps ou Waze"})]})]}):n.jsxs("div",{children:[n.jsx(de,{htmlFor:"locationLink",children:"Link da Live"}),n.jsx(we,{id:"locationLink",type:"url",placeholder:"https://youtube.com/live/... ou https://twitch.tv/...",value:x.locationLink,onChange:Se=>At("locationLink",Se.target.value),required:!0}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Cole o link da transmisso (YouTube, Twitch, etc)"})]})})]}),n.jsxs(je,{children:[n.jsx(We,{children:n.jsx(Ge,{className:"text-sm",children:"Capacidade e Ingressos"})}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs(de,{htmlFor:"maxAttendees",className:"flex items-center gap-1",children:[n.jsx(er,{className:"h-3 w-3"}),"Capacidade Mxima"]}),n.jsx(we,{id:"maxAttendees",type:"number",placeholder:"300",value:x.maxAttendees,onChange:Se=>At("maxAttendees",Se.target.value)})]}),n.jsx(ia,{}),n.jsxs("div",{children:[n.jsx(de,{className:"mb-2 block",children:"Tipo de Ingresso"}),n.jsxs(zi,{value:J,onValueChange:Se=>{if(Se==="platform"&&u){Ee(!0),X.info("Esta opo est disponvel apenas no navegador");return}G(Se),Ee(!1)},children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(sn,{value:"free",id:"free"}),n.jsx(de,{htmlFor:"free",className:"cursor-pointer",children:" Evento Gratuito"})]}),c&&n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(sn,{value:"external",id:"external"}),n.jsx(de,{htmlFor:"external",className:"cursor-pointer",children:" Link Externo (Sympla, Eventbrite, etc)"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(sn,{value:"platform",id:"platform",disabled:u}),n.jsxs(de,{htmlFor:"platform",className:u?"cursor-not-allowed opacity-50":"cursor-pointer",children:[" Vender pela plataforma ",u&&""]})]})]}),u&&n.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:" A venda pela plataforma est disponvel apenas no navegador web"})]}),Be&&u&&n.jsx("div",{className:"pt-4",children:n.jsx(rq,{})}),J==="external"&&c&&n.jsxs("div",{className:"pt-2 border-t",children:[n.jsx(de,{htmlFor:"ticketLink",children:"Link de Compra do Ingresso"}),n.jsx(we,{id:"ticketLink",type:"url",placeholder:"https://www.sympla.com.br/...",value:x.ticketLink,onChange:Se=>At("ticketLink",Se.target.value)}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Cole o link onde os participantes podem comprar o ingresso"})]})]})]}),J==="platform"&&n.jsxs(je,{children:[n.jsxs(We,{children:[n.jsx(Ge,{className:"text-sm",children:"Dados para Recebimento"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Informe seus dados para receber os valores das vendas"})]}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsx("div",{className:"p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:n.jsx("p",{className:"text-xs text-blue-400 font-medium",children:" Os valores sero transferidos em at 3 dias teis aps a finalizao do evento"})}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"pixKey",children:"Chave PIX"}),n.jsx(we,{id:"pixKey",placeholder:"Digite sua chave PIX (CPF, CNPJ, email, telefone ou chave aleatria)",value:ue,onChange:Se=>Fe(Se.target.value)}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Recomendado: mais rpido e prtico"})]}),n.jsx(ia,{}),n.jsx("p",{className:"text-sm font-medium",children:"Ou informe seus dados bancrios"}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"bankName",children:"Banco"}),n.jsx(we,{id:"bankName",placeholder:"Ex: Banco do Brasil, Nubank, Ita...",value:_e,onChange:Se=>Ze(Se.target.value)})]}),n.jsxs("div",{children:[n.jsx(de,{children:"Tipo de Conta"}),n.jsxs(zi,{value:be,onValueChange:Se=>ze(Se),children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(sn,{value:"corrente",id:"corrente"}),n.jsx(de,{htmlFor:"corrente",className:"cursor-pointer",children:"Conta Corrente"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(sn,{value:"poupanca",id:"poupanca"}),n.jsx(de,{htmlFor:"poupanca",className:"cursor-pointer",children:"Conta Poupana"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"bankAgency",children:"Agncia"}),n.jsx(we,{id:"bankAgency",placeholder:"0001",value:He,onChange:Se=>Ft(Se.target.value)})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"bankAccount",children:"Conta"}),n.jsx(we,{id:"bankAccount",placeholder:"12345-6",value:pe,onChange:Se=>Je(Se.target.value)})]})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"bankAccountHolder",children:"Titular da Conta"}),n.jsx(we,{id:"bankAccountHolder",placeholder:"Nome completo do titular",value:at,onChange:Se=>it(Se.target.value)})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"bankDocument",children:"CPF/CNPJ do Titular"}),n.jsx(we,{id:"bankDocument",placeholder:"000.000.000-00",value:ar,onChange:Se=>Nt(Se.target.value)})]})]})]}),J==="platform"&&n.jsxs(je,{children:[n.jsxs(We,{children:[n.jsx(Ge,{className:"text-sm",children:"Configurao de Venda"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Configure os tipos de ingressos, preos e formas de pagamento"})]}),n.jsx(Ce,{children:n.jsx(fV,{ticketTypes:se,ticketSettings:ne,onTicketTypesChange:ce,onTicketSettingsChange:he,termsAccepted:Ae,onTermsAccepted:Pe,organizerId:(s==null?void 0:s.id)||"",eventId:t})})]}),n.jsxs(je,{children:[n.jsx(We,{children:n.jsxs(Ge,{className:"text-sm flex items-center gap-2",children:[n.jsx(Sc,{className:"h-4 w-4"}),"Formulrio de Cadastro"]})}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(de,{children:"Exigir cadastro para participar"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Participantes precisaro se cadastrar antes do evento"})]}),n.jsx(Tr,{checked:S,onCheckedChange:b})]}),S&&n.jsxs(K,{type:"button",variant:"outline",className:"w-full",onClick:()=>P(!0),children:[n.jsx(Bo,{className:"h-4 w-4 mr-2"}),"Configurar Campos do Formulrio ",k.length>0&&`(${k.length} campos)`]})]})]}),n.jsx(cA,{open:L,onOpenChange:P,fields:k,onSave:O}),z&&n.jsx(mV,{open:$,onOpenChange:Y,eventId:z.id,eventTitle:z.title,shareUrl:z.shareUrl,onViewEvent:()=>{Y(!1),ee(`/e/${z.id}`)}}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(K,{type:"submit",className:"w-full btn-glow",disabled:M,children:M?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Criando Evento..."]}):"Criar Evento"}),n.jsx(K,{type:"button",variant:"outline",className:"w-full",onClick:e,children:"Cancelar"})]})]})})]})}function Tv({onBack:e,eventId:t}){const[r,s]=v.useState([]),[a,o]=v.useState(!0),[c,u]=v.useState(""),[f,p]=v.useState(null),[x,w]=v.useState(null),{user:_}=bt();v.useEffect(()=>{(async()=>{if(_)try{o(!0);let S=U.from("event_registrations").select(`
            id,
            user_id,
            user_name,
            user_email,
            user_phone,
            status,
            created_at,
            registration_data,
            event:events!inner(
              id,
              title,
              event_date,
              location,
              form_fields,
              organizer:organizers!inner(
                user_id
              )
            )
          `).eq("event.organizer.user_id",_.id);t&&(S=S.eq("event_id",t));const{data:b,error:k}=await S.order("created_at",{ascending:!1});if(k){console.error("Error fetching registrations:",k),X.error("Erro ao carregar cadastros");return}const O=(b==null?void 0:b.map(M=>M.user_id))||[],{data:L}=await U.from("profiles").select("user_id, avatar_url").in("user_id",O),P=new Map((L==null?void 0:L.map(M=>[M.user_id,M.avatar_url]))||[]);s((b==null?void 0:b.map(M=>({...M,user_avatar:P.get(M.user_id),registration_data:M.registration_data||{},event:{...M.event,form_fields:M.event.form_fields||[]}})))||[])}catch(S){console.error("Error:",S),X.error("Erro ao carregar cadastros")}finally{o(!1)}})()},[_,t]);const j=r.filter(E=>E.user_name.toLowerCase().includes(c.toLowerCase())||E.user_email.toLowerCase().includes(c.toLowerCase())||E.event.title.toLowerCase().includes(c.toLowerCase())),N=E=>{const S={confirmed:"bg-green-500/20 text-green-400",pending:"bg-yellow-500/20 text-yellow-400",cancelled:"bg-red-500/20 text-red-400"};return S[E]||S.confirmed},C=(E,S)=>{if(typeof S=="string"&&S.startsWith("data:")){const b=document.createElement("a");b.href=S,b.download=`${E}.${S.split(";")[0].split("/")[1]}`,document.body.appendChild(b),b.click(),document.body.removeChild(b),X.success("Download iniciado")}else X.error("Arquivo no disponvel para download")},T=async E=>{try{const{error:S}=await U.from("event_registrations").delete().eq("id",E);if(S){console.error("Error deleting registration:",S),X.error("Erro ao excluir cadastro");return}s(b=>b.filter(k=>k.id!==E)),p(null),w(null),X.success("Cadastro excludo com sucesso. O usurio pode se cadastrar novamente.")}catch(S){console.error("Error:",S),X.error("Erro ao excluir cadastro")}};return a?n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsxs("div",{className:"flex items-center gap-4 p-4 border-b border-border bg-surface/50 backdrop-blur-sm sticky top-0 z-10",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Cadastros dos Eventos"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando..."})]})]}),n.jsx("div",{className:"flex items-center justify-center p-8",children:n.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})})]}):n.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[n.jsxs("div",{className:"flex items-center gap-4 p-4 border-b border-border bg-surface/50 backdrop-blur-sm sticky top-0 z-10",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Cadastros dos Eventos"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[j.length," cadastro(s) encontrado(s)"]})]})]}),n.jsxs("div",{className:"p-4 max-w-md mx-auto",children:[n.jsxs("div",{className:"relative mb-4",children:[n.jsx(au,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(we,{placeholder:"Buscar por nome, email ou evento...",value:c,onChange:E=>u(E.target.value),className:"pl-10"})]}),j.length>0?n.jsx("div",{className:"space-y-2",children:j.map(E=>n.jsx(je,{className:"cursor-pointer hover:bg-accent/50 transition-colors",onClick:()=>p(E),children:n.jsx(Ce,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs($t,{className:"h-12 w-12",children:[n.jsx(Kt,{src:E.user_avatar}),n.jsx(Vt,{children:E.user_name.charAt(0).toUpperCase()})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium text-foreground truncate",children:E.user_name}),n.jsx("p",{className:"text-sm text-muted-foreground truncate",children:E.event.title})]}),n.jsx(Iu,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"})]})})},E.id))}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(er,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:c?"Nenhum cadastro encontrado":"Nenhum cadastro ainda"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:c?"Tente buscar por outro termo":"Os cadastros dos seus eventos aparecero aqui"})]})]}),n.jsx(Ut,{open:!!f,onOpenChange:E=>!E&&p(null),children:n.jsx(Bt,{className:"max-w-md max-h-[80vh] overflow-y-auto",children:f&&n.jsxs(n.Fragment,{children:[n.jsx(xr,{children:n.jsx(vr,{children:"Detalhes do Cadastro"})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b",children:[n.jsxs($t,{className:"h-16 w-16",children:[n.jsx(Kt,{src:f.user_avatar}),n.jsx(Vt,{className:"text-lg",children:f.user_name.charAt(0).toUpperCase()})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-lg",children:f.user_name}),n.jsx(dt,{className:N(f.status),children:f.status==="confirmed"?"Confirmado":f.status==="pending"?"Pendente":"Cancelado"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Ru,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{children:f.user_email})]}),f.user_phone&&n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(zc,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{children:f.user_phone})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Et,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("span",{children:["Evento: ",new Date(f.event.event_date).toLocaleDateString("pt-BR")]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Rt,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{children:f.event.location})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(er,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("span",{children:["Cadastrado em: ",new Date(f.created_at).toLocaleDateString("pt-BR")]})]})]}),f.registration_data&&Object.keys(f.registration_data).length>0&&n.jsxs("div",{className:"pt-4 border-t space-y-3",children:[n.jsx("h4",{className:"font-semibold text-sm",children:"Dados Personalizados"}),Object.entries(f.registration_data).map(([E,S])=>{const b=typeof S=="string"&&S.startsWith("data:image/"),k=typeof S=="string"&&S.startsWith("data:");return n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm font-medium",children:E}),b?n.jsxs("div",{className:"space-y-2",children:[n.jsx("img",{src:S,alt:E,className:"w-full h-auto rounded border max-h-64 object-contain"}),n.jsxs(K,{variant:"outline",size:"sm",onClick:()=>C(E,S),className:"w-full",children:[n.jsx(Ho,{className:"h-4 w-4 mr-2"}),"Baixar Imagem"]})]}):k?n.jsxs(K,{variant:"outline",size:"sm",onClick:()=>C(E,S),className:"w-full",children:[n.jsx(Ho,{className:"h-4 w-4 mr-2"}),"Baixar Arquivo"]}):Array.isArray(S)?n.jsx("p",{className:"text-sm text-muted-foreground",children:S.join(", ")}):n.jsx("p",{className:"text-sm text-muted-foreground",children:String(S)})]},E)})]}),n.jsxs("div",{className:"pt-4 border-t",children:[n.jsxs(K,{variant:"destructive",className:"w-full",onClick:()=>w(f.id),children:[n.jsx(Gn,{className:"h-4 w-4 mr-2"}),"Excluir Cadastro"]}),n.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:"Ao excluir, o usurio poder se cadastrar novamente"})]})]})]})})}),n.jsx(Zo,{open:!!x,onOpenChange:E=>!E&&w(null),children:n.jsxs(Yi,{children:[n.jsxs(Jo,{children:[n.jsx(el,{children:"Excluir Cadastro?"}),n.jsx(tl,{children:"Esta ao no pode ser desfeita. O cadastro ser permanentemente excludo e o usurio poder se cadastrar novamente no evento."})]}),n.jsxs(Qi,{children:[n.jsx(Ji,{children:"Cancelar"}),n.jsx(Zi,{onClick:()=>x&&T(x),className:"bg-destructive hover:bg-destructive/90",children:"Excluir"})]})]})})]})}function Iv({onBack:e,eventId:t}){const[r,s]=v.useState([]),[a,o]=v.useState(!0),{user:c}=bt();return v.useEffect(()=>{(async()=>{if(c)try{o(!0);let f=U.from("event_registrations").select("id, user_name, user_email, created_at, event:events!inner(id, organizer:organizers!inner(user_id))").eq("status","confirmed").eq("event.organizer.user_id",c.id);t&&(f=f.eq("event_id",t));const{data:p,error:x}=await f.order("created_at",{ascending:!1});if(x){console.error("Error fetching attendances:",x),X.error("Erro ao carregar presenas");return}const w=(p||[]).map(_=>({id:_.id,user_name:_.user_name,user_email:_.user_email,created_at:_.created_at}));s(w)}catch(f){console.error(f),X.error("Erro ao carregar presenas")}finally{o(!1)}})()},[c,t]),a?n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsxs("div",{className:"flex items-center gap-4 p-4 border-b border-border bg-surface/50 backdrop-blur-sm sticky top-0 z-10",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Presenas Confirmadas"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando..."})]})]}),n.jsx("div",{className:"flex items-center justify-center p-8",children:n.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})})]}):n.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[n.jsxs("div",{className:"flex items-center gap-4 p-4 border-b border-border bg-surface/50 backdrop-blur-sm sticky top-0 z-10",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Presenas Confirmadas"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.length," presena(s) confirmada(s)"]})]})]}),n.jsx("div",{className:"p-4 max-w-md mx-auto",children:r.length>0?n.jsx("div",{className:"space-y-4",children:r.map(u=>n.jsxs(je,{children:[n.jsx(We,{className:"pb-2",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs(Ge,{className:"text-base flex items-center gap-2",children:[n.jsx(hs,{className:"h-4 w-4"}),u.user_name]}),n.jsx(dt,{className:"bg-primary/10 text-primary border-primary/20",children:"Confirmado"})]})}),n.jsx(Ce,{children:n.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[n.jsx("div",{children:u.user_email}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"h-3 w-3"}),"Confirmado em: ",new Date(u.created_at).toLocaleDateString("pt-BR")]})]})})]},u.id))}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(er,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Nenhuma presena confirmada ainda"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Assim que algum confirmar presena, aparecer aqui."})]})})]})}function nq(){const e=_t(),[t,r]=v.useState("profile"),[s,a]=v.useState(!1),[o,c]=v.useState(!1),[u,f]=v.useState(!1),[p,x]=v.useState(null),[w,_]=v.useState(null),[j,N]=v.useState(!1),[C,T]=v.useState(!1),[E,S]=v.useState(!1),[b,k]=v.useState(!1),[O,L]=v.useState(""),[P,M]=v.useState({followers_count:0,events_count:0,page_views:0}),R=v.useRef(null),$=v.useRef(null),[Y,z]=v.useState({bio:"",instagram:"",website:""}),[q,ee]=v.useState({title:"",subtitle:"",description:"",primaryColor:"#8B5CF6",showStats:!0,showEvents:!0,showContact:!0}),[H,re]=v.useState({title:"",description:"",username:""}),[ae,ie]=v.useState(null),[te,ye]=v.useState(!1),[ge,W]=v.useState({instagram:{url:"",visible:!1},whatsapp:{url:"",visible:!1},location:{url:"",visible:!1},playlist:{url:"",visible:!1},website:{url:"",visible:!1}}),{user:J}=bt(),{organizerData:G,events:se,loading:ce,updateOrganizerProfile:ne}=ti(),{photoSessions:he,loading:Ae,uploadPhotos:Pe,deletePhoto:Be}=O$();if(v.useEffect(()=>{G&&((async()=>{const{data:ze}=await U.from("organizer_stats").select("*").eq("organizer_id",G.id).maybeSingle();M(ze?{followers_count:ze.followers_count||0,events_count:se.length,page_views:0}:{followers_count:0,events_count:se.length,page_views:0})})(),ee({title:G.page_title||"",subtitle:G.page_subtitle||"",description:G.page_description||"",primaryColor:G.primary_color||"#8B5CF6",showStats:G.show_statistics,showEvents:G.show_events,showContact:G.show_contact}),re({title:G.page_title||"",description:G.page_description||"",username:G.username||""}))},[G,se]),ce)return n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Carregando..."})]})});const Ee={name:(G==null?void 0:G.page_title)||"Meu Perfil",bio:(G==null?void 0:G.page_description)||"Organizador de eventos",followers:P.followers_count,events:P.events_count,pageViews:P.page_views},ue=async be=>{var He;const ze=(He=be.target.files)==null?void 0:He[0];if(!(!ze||!G||!J))try{T(!0);const Ft=ze.name.split(".").pop(),pe=`${J.id}/cover.${Ft}`,{error:Je}=await U.storage.from("user-uploads").upload(pe,ze,{upsert:!0});if(Je)throw Je;const{data:{publicUrl:at}}=U.storage.from("user-uploads").getPublicUrl(pe);await ne({cover_image_url:at}),X.success("Imagem de capa atualizada!")}catch(Ft){console.error("Error uploading cover:",Ft),X.error("Erro ao fazer upload da imagem")}finally{T(!1)}},Fe=async be=>{var He;const ze=(He=be.target.files)==null?void 0:He[0];if(!(!ze||!G||!J))try{S(!0);const Ft=ze.name.split(".").pop(),pe=`${J.id}/avatar.${Ft}`,{error:Je}=await U.storage.from("user-uploads").upload(pe,ze,{upsert:!0});if(Je)throw Je;const{data:{publicUrl:at}}=U.storage.from("user-uploads").getPublicUrl(pe);await ne({avatar_url:at}),await U.from("profiles").update({avatar_url:at}).eq("user_id",J.id),X.success("Foto de perfil atualizada em todos os lugares!")}catch(Ft){console.error("Error uploading avatar:",Ft),X.error("Erro ao fazer upload da foto")}finally{S(!1)}},_e=()=>{const be=`${window.location.origin}/${G==null?void 0:G.username}`;navigator.clipboard.writeText(be),X.success("Link copiado para a rea de transferncia!")},Ze=async be=>{const ze=be.target.files;if(!ze||ze.length===0)return;if(!O){X.error("Selecione um evento para associar as fotos");return}await Pe(ze,O)&&(N(!1),L(""),R.current&&(R.current.value=""))};return s?n.jsx(b0,{onBack:()=>a(!1)}):o?n.jsx(Tv,{onBack:()=>c(!1),eventId:p||void 0}):u?n.jsx(Iv,{onBack:()=>f(!1),eventId:w||void 0}):n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsxs("div",{className:"max-w-md mx-auto bg-background",children:[n.jsxs(Qm,{value:t,onValueChange:r,className:"w-full",children:[n.jsxs(Vu,{className:"grid w-full grid-cols-4",children:[n.jsxs(os,{value:"profile",className:"flex items-center gap-2",children:[n.jsx(hs,{className:"h-4 w-4"}),"Perfil"]}),n.jsxs(os,{value:"events",className:"flex items-center gap-2",children:[n.jsx(k1,{className:"h-4 w-4"}),"Eventos"]}),n.jsxs(os,{value:"photos",className:"flex items-center gap-2",children:[n.jsx(Wi,{className:"h-4 w-4"}),"Fotos"]}),n.jsxs(os,{value:"settings",className:"flex items-center gap-2",children:[n.jsx(Bo,{className:"h-4 w-4"}),"Config"]})]}),n.jsx(ls,{value:"profile",className:"space-y-6",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("header",{className:`relative h-64 bg-gradient-to-b from-surface to-background rounded-lg overflow-hidden ${b?"group cursor-pointer":""}`,children:[b&&n.jsxs(n.Fragment,{children:[n.jsx("input",{type:"file",accept:"image/*",onChange:ue,className:"hidden",id:"cover-upload"}),n.jsxs("label",{htmlFor:"cover-upload",className:"absolute inset-0 cursor-pointer",children:[G!=null&&G.cover_image_url?n.jsx("img",{src:G==null?void 0:G.cover_image_url,alt:"Cover",className:"w-full h-full object-cover opacity-30"}):n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-primary/20 to-secondary/20"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-background"}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity",children:C?n.jsx("div",{className:"w-8 h-8 border-4 border-white border-t-transparent rounded-full animate-spin"}):n.jsxs("div",{className:"text-white text-center",children:[n.jsx(Cn,{className:"h-12 w-12 mx-auto mb-2"}),n.jsx("p",{className:"text-sm font-medium",children:"Clique para alterar a capa"})]})})]})]}),!b&&n.jsxs(n.Fragment,{children:[G!=null&&G.cover_image_url?n.jsx("img",{src:G==null?void 0:G.cover_image_url,alt:"Cover",className:"w-full h-full object-cover opacity-30"}):n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-primary/20 to-secondary/20"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-background"})]}),n.jsx("div",{className:"absolute top-4 right-4 flex gap-2 z-10",children:n.jsx(K,{variant:"ghost",size:"icon",className:"bg-surface/80 backdrop-blur-sm",onClick:_e,children:n.jsx(ks,{className:"h-5 w-5"})})})]}),n.jsxs("div",{className:"-mt-16 relative z-10",children:[n.jsxs("div",{className:"flex items-end gap-4 mb-4",children:[n.jsxs("div",{className:"avatar-story relative group",children:[n.jsx($t,{className:"h-20 w-20 border-4 border-background",children:G!=null&&G.avatar_url?n.jsx("img",{src:G.avatar_url,alt:"Avatar",className:"w-full h-full object-cover"}):n.jsx(Vt,{className:"bg-surface text-lg font-bold",children:H.title.charAt(0)||"O"})}),b&&n.jsxs(n.Fragment,{children:[n.jsx("input",{type:"file",accept:"image/*",ref:$,onChange:Fe,className:"hidden",id:"avatar-upload"}),n.jsx("label",{htmlFor:"avatar-upload",className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:E?n.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):n.jsx(Ms,{className:"h-5 w-5 text-white"})})]})]}),n.jsx("div",{className:"flex-1 pb-2 space-y-2",children:b?n.jsxs(n.Fragment,{children:[n.jsx(we,{value:H.title,onChange:be=>re(ze=>({...ze,title:be.target.value})),className:"text-xl font-bold bg-transparent border-border",placeholder:"Nome do perfil"}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"@"}),n.jsx(we,{value:H.username,onChange:async be=>{const ze=be.target.value.toLowerCase().replace(/[^a-z0-9._]/g,"");if(re(He=>({...He,username:ze})),ze.length>=3&&ze!==(G==null?void 0:G.username)){ye(!0),ie(null);const{data:He,error:Ft}=await U.rpc("check_username_available",{username_to_check:ze,current_organizer_id:G==null?void 0:G.id});ye(!1),Ft?ie("Erro ao verificar username"):He||ie("Username j est em uso")}},className:"text-sm bg-transparent border-border pl-7",placeholder:"username"})]}),te&&n.jsx("p",{className:"text-xs text-muted-foreground",children:"Verificando disponibilidade..."}),ae&&n.jsx("p",{className:"text-xs text-destructive",children:ae}),!ae&&!te&&H.username&&H.username!==(G==null?void 0:G.username)&&n.jsx("p",{className:"text-xs text-green-600",children:"Username disponvel!"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Mnimo 3 caracteres. Apenas letras minsculas, nmeros, ponto e underline."})]}),n.jsx(An,{value:H.description,onChange:be=>re(ze=>({...ze,description:be.target.value})),className:"text-sm bg-transparent border-border min-h-[60px]",placeholder:"Descrio"})]}):n.jsxs(n.Fragment,{children:[n.jsx("h1",{className:"text-xl font-bold text-foreground",children:H.title||"Seu Nome"}),(G==null?void 0:G.username)&&n.jsxs("p",{className:"text-sm text-muted-foreground",children:["@",G.username]})]})}),(G==null?void 0:G.username)&&!b&&n.jsxs(K,{variant:"outline",size:"sm",onClick:()=>window.open(`${Zm()}/${G.username}`,"_blank"),className:"mb-2",children:[n.jsx(Vr,{className:"h-4 w-4 mr-2"}),"Ver Pgina"]})]}),b?n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx(K,{variant:"default",size:"sm",disabled:!!ae||te||H.username.length<3,onClick:async()=>{try{if(H.username!==(G==null?void 0:G.username)){const{data:be,error:ze}=await U.rpc("check_username_available",{username_to_check:H.username,current_organizer_id:G==null?void 0:G.id});if(ze||!be){X.error("Username j est em uso");return}}await ne({page_title:H.title,page_description:H.description,username:H.username}),J&&await U.from("profiles").update({display_name:H.title,bio:H.description}).eq("user_id",J.id),k(!1),ie(null)}catch(be){console.error("Error updating profile:",be)}},children:"Salvar"}),n.jsx(K,{variant:"outline",size:"sm",onClick:()=>{re({title:(G==null?void 0:G.page_title)||"",description:(G==null?void 0:G.page_description)||"",username:(G==null?void 0:G.username)||""}),ie(null),k(!1)},children:"Cancelar"})]}):n.jsxs(K,{variant:"outline",size:"sm",onClick:()=>k(!0),children:[n.jsx(U8,{className:"h-4 w-4"}),"Editar"]})]}),q.showStats&&n.jsxs("div",{className:"flex items-center justify-around py-4 mb-6 bg-card rounded-lg",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-lg font-bold text-foreground",children:Ee.followers}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Seguidores"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-lg font-bold text-foreground",children:Ee.events}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Eventos"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-lg font-bold text-foreground",children:Ee.pageViews}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Visualizaes"})]})]}),n.jsxs("div",{className:"space-y-4 bg-card rounded-lg p-4",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:"Links Sociais"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(de,{htmlFor:"whatsapp",className:"flex items-center gap-2",children:[n.jsx(zc,{className:"h-4 w-4"}),"WhatsApp"]}),n.jsx(Tr,{checked:G==null?void 0:G.show_whatsapp,onCheckedChange:async be=>{await ne({show_whatsapp:be})}})]}),n.jsx(we,{id:"whatsapp",placeholder:"https://wa.me/...",value:(G==null?void 0:G.whatsapp_url)||"",onChange:be=>ne({whatsapp_url:be.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(de,{htmlFor:"instagram",className:"flex items-center gap-2",children:[n.jsx(Hi,{className:"h-4 w-4"}),"Instagram"]}),n.jsx(Tr,{checked:G==null?void 0:G.show_instagram,onCheckedChange:async be=>{await ne({show_instagram:be})}})]}),n.jsx(we,{id:"instagram",placeholder:"https://instagram.com/...",value:(G==null?void 0:G.instagram_url)||"",onChange:be=>ne({instagram_url:be.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(de,{htmlFor:"playlist",className:"flex items-center gap-2",children:[n.jsx(su,{className:"h-4 w-4"}),"Playlist"]}),n.jsx(Tr,{checked:G==null?void 0:G.show_playlist,onCheckedChange:async be=>{await ne({show_playlist:be})}})]}),n.jsx(we,{id:"playlist",placeholder:"https://open.spotify.com/...",value:(G==null?void 0:G.playlist_url)||"",onChange:be=>ne({playlist_url:be.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(de,{htmlFor:"location",className:"flex items-center gap-2",children:[n.jsx(Rt,{className:"h-4 w-4"}),"Localizao"]}),n.jsx(Tr,{checked:G==null?void 0:G.show_location,onCheckedChange:async be=>{await ne({show_location:be})}})]}),n.jsx(we,{id:"location",placeholder:"https://maps.google.com/...",value:(G==null?void 0:G.location_url)||"",onChange:be=>ne({location_url:be.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(de,{htmlFor:"website",className:"flex items-center gap-2",children:[n.jsx(nu,{className:"h-4 w-4"}),"Website"]}),n.jsx(Tr,{checked:G==null?void 0:G.show_website,onCheckedChange:async be=>{await ne({show_website:be})}})]}),n.jsx(we,{id:"website",placeholder:"https://seusite.com",value:(G==null?void 0:G.website_url)||"",onChange:be=>ne({website_url:be.target.value})})]})]})]}),n.jsxs("div",{className:"space-y-4 bg-card rounded-lg p-4",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:"Categoria do Perfil"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"category",children:"Categoria"}),n.jsxs(Zs,{value:(G==null?void 0:G.category)||"",onValueChange:be=>ne({category:be}),children:[n.jsx(Es,{children:n.jsx(Js,{placeholder:"Selecione uma categoria"})}),n.jsxs(Ss,{children:[n.jsx(Ht,{value:"festas",children:"Festas"}),n.jsx(Ht,{value:"eventos",children:"Eventos"}),n.jsx(Ht,{value:"encontros",children:"Encontros"}),n.jsx(Ht,{value:"lives",children:"Lives"}),n.jsx(Ht,{value:"geek",children:"Geek"}),n.jsx(Ht,{value:"esporte",children:"Esporte"}),n.jsx(Ht,{value:"sade",children:"Sade"}),n.jsx(Ht,{value:"igreja",children:"Igreja"}),n.jsx(Ht,{value:"outro",children:"Outro"})]})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"A categoria ajuda os usurios a encontrar seu perfil"})]})]})]})}),n.jsxs(ls,{value:"events",className:"space-y-6",children:[n.jsx("div",{className:"p-4 md:p-6 space-y-6",children:n.jsx("div",{className:"bg-gradient-to-r from-green-500/10 via-emerald-500/10 to-blue-500/10 border border-green-500/20 rounded-xl p-5 md:p-6 shadow-sm hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2.5",children:[n.jsx("div",{className:"p-2 bg-green-500/10 rounded-lg",children:n.jsx(Sn,{className:"h-5 w-5 md:h-6 md:w-6 text-green-600"})}),n.jsx("h3",{className:"text-lg md:text-xl font-bold text-foreground",children:"Gesto Financeira"})]}),n.jsx("p",{className:"text-sm md:text-base text-muted-foreground leading-relaxed",children:"Viso consolidada de todos os seus eventos, vendas de ingressos e repasses"})]}),n.jsxs(K,{variant:"default",size:"default",className:"w-full md:w-auto md:min-w-[120px] bg-green-600 hover:bg-green-700",onClick:()=>{window.innerWidth<768?window.open(window.location.origin+"/organizer-financial","_blank"):e("/organizer-financial")},children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),"Acessar"]})]})})}),n.jsx(oV,{onCreateEvent:()=>a(!0),onManageRegistrations:be=>{x(be),c(!0)},onViewAttendances:be=>{_(be),f(!0)}})]}),n.jsx(ls,{value:"photos",className:"space-y-6 p-4",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Minhas Fotos"}),n.jsxs(K,{variant:"outline",size:"sm",onClick:()=>N(!0),children:[n.jsx(Cn,{className:"h-4 w-4 mr-2"}),"Adicionar"]})]}),Ae?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Carregando fotos..."})]}):he.length>0?n.jsx("div",{className:"space-y-6",children:he.map((be,ze)=>n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-foreground",children:be.eventName||"Sem evento"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[be.photos.length," foto",be.photos.length!==1?"s":"","  ",be.date]})]})}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[be.photos.slice(0,3).map(He=>n.jsxs("div",{className:"aspect-square bg-surface rounded-lg overflow-hidden relative group",children:[n.jsx("img",{src:He.photo_url,alt:He.caption||"Foto do evento",className:"w-full h-full object-cover hover:scale-105 transition-transform cursor-pointer"}),n.jsx(K,{variant:"destructive",size:"icon",className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity h-8 w-8",onClick:()=>Be(He.id),children:n.jsx(Gn,{className:"h-4 w-4"})})]},He.id)),be.photos.length>3&&n.jsxs("div",{className:"aspect-square bg-surface rounded-lg overflow-hidden relative",children:[n.jsx("img",{src:be.photos[3].photo_url,alt:"Mais fotos",className:"w-full h-full object-cover"}),n.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:n.jsxs("span",{className:"text-white font-semibold text-lg",children:["+",be.photos.length-3]})})]})]})]},ze))}):n.jsxs("div",{className:"text-center py-12 space-y-4",children:[n.jsx("div",{className:"w-16 h-16 mx-auto bg-surface rounded-full flex items-center justify-center",children:n.jsx(Cn,{className:"h-8 w-8 text-muted-foreground"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"Nenhuma foto ainda"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Adicione fotos dos seus eventos para mostrar seu trabalho"}),n.jsxs(K,{variant:"outline",onClick:()=>N(!0),children:[n.jsx(Cn,{className:"h-4 w-4 mr-2"}),"Adicionar Primeira Foto"]})]})]})]})}),n.jsx(ls,{value:"settings",className:"space-y-6",children:n.jsx(lV,{})})]}),n.jsx(Ut,{open:j,onOpenChange:N,children:n.jsxs(Bt,{children:[n.jsx(xr,{children:n.jsx(vr,{children:"Adicionar Fotos do Evento"})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"event-select",children:"Evento *"}),n.jsxs(Zs,{value:O,onValueChange:L,children:[n.jsx(Es,{children:n.jsx(Js,{placeholder:"Selecione um evento"})}),n.jsx(Ss,{children:se.length===0?n.jsx(Ht,{value:"none",disabled:!0,children:"Nenhum evento cadastrado"}):se.map(be=>n.jsx(Ht,{value:be.id,children:be.title},be.id))})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"As fotos sero associadas a este evento"})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"photos-upload",children:"Selecionar Fotos *"}),n.jsx(we,{ref:R,id:"photos-upload",type:"file",accept:"image/*",multiple:!0,onChange:Ze}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Voc pode selecionar vrias fotos de uma vez"})]}),n.jsx("div",{className:"flex gap-2",children:n.jsx(K,{variant:"outline",onClick:()=>{N(!1),L("")},className:"flex-1",children:"Cancelar"})})]})]})})]}),n.jsx("footer",{className:"mt-8 pb-6 text-center border-t border-border pt-6",children:n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Esse site foi desenvolvido pela ",n.jsx("a",{href:"https://flatgrowth.com.br/",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Flat Company"})]})})]})}var LA=["PageUp","PageDown"],FA=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],BA={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Yc="Slider",[_0,sq,aq]=Au(Yc),[zA]=Mr(Yc,[aq]),[iq,dp]=zA(Yc),UA=v.forwardRef((e,t)=>{const{name:r,min:s=0,max:a=100,step:o=1,orientation:c="horizontal",disabled:u=!1,minStepsBetweenThumbs:f=0,defaultValue:p=[s],value:x,onValueChange:w=()=>{},onValueCommit:_=()=>{},inverted:j=!1,form:N,...C}=e,T=v.useRef(new Set),E=v.useRef(0),b=c==="horizontal"?oq:lq,[k=[],O]=Os({prop:x,defaultProp:p,onChange:Y=>{var q;(q=[...T.current][E.current])==null||q.focus(),w(Y)}}),L=v.useRef(k);function P(Y){const z=fq(k,Y);$(Y,z)}function M(Y){$(Y,E.current)}function R(){const Y=L.current[E.current];k[E.current]!==Y&&_(k)}function $(Y,z,{commit:q}={commit:!1}){const ee=xq(o),H=vq(Math.round((Y-s)/o)*o+s,ee),re=xu(H,[s,a]);O((ae=[])=>{const ie=uq(ae,re,z);if(gq(ie,f*o)){E.current=ie.indexOf(re);const te=String(ie)!==String(ae);return te&&q&&_(ie),te?ie:ae}else return ae})}return n.jsx(iq,{scope:e.__scopeSlider,name:r,disabled:u,min:s,max:a,valueIndexToChangeRef:E,thumbs:T.current,values:k,orientation:c,form:N,children:n.jsx(_0.Provider,{scope:e.__scopeSlider,children:n.jsx(_0.Slot,{scope:e.__scopeSlider,children:n.jsx(b,{"aria-disabled":u,"data-disabled":u?"":void 0,...C,ref:t,onPointerDown:Ie(C.onPointerDown,()=>{u||(L.current=k)}),min:s,max:a,inverted:j,onSlideStart:u?void 0:P,onSlideMove:u?void 0:M,onSlideEnd:u?void 0:R,onHomeKeyDown:()=>!u&&$(s,0,{commit:!0}),onEndKeyDown:()=>!u&&$(a,k.length-1,{commit:!0}),onStepKeyDown:({event:Y,direction:z})=>{if(!u){const H=LA.includes(Y.key)||Y.shiftKey&&FA.includes(Y.key)?10:1,re=E.current,ae=k[re],ie=o*H*z;$(ae+ie,re,{commit:!0})}}})})})})});UA.displayName=Yc;var[$A,VA]=zA(Yc,{startEdge:"left",endEdge:"right",size:"width",direction:1}),oq=v.forwardRef((e,t)=>{const{min:r,max:s,dir:a,inverted:o,onSlideStart:c,onSlideMove:u,onSlideEnd:f,onStepKeyDown:p,...x}=e,[w,_]=v.useState(null),j=tt(t,b=>_(b)),N=v.useRef(void 0),C=pl(a),T=C==="ltr",E=T&&!o||!T&&o;function S(b){const k=N.current||w.getBoundingClientRect(),O=[0,k.width],P=Rv(O,E?[r,s]:[s,r]);return N.current=k,P(b-k.left)}return n.jsx($A,{scope:e.__scopeSlider,startEdge:E?"left":"right",endEdge:E?"right":"left",direction:E?1:-1,size:"width",children:n.jsx(qA,{dir:C,"data-orientation":"horizontal",...x,ref:j,style:{...x.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const k=S(b.clientX);c==null||c(k)},onSlideMove:b=>{const k=S(b.clientX);u==null||u(k)},onSlideEnd:()=>{N.current=void 0,f==null||f()},onStepKeyDown:b=>{const O=BA[E?"from-left":"from-right"].includes(b.key);p==null||p({event:b,direction:O?-1:1})}})})}),lq=v.forwardRef((e,t)=>{const{min:r,max:s,inverted:a,onSlideStart:o,onSlideMove:c,onSlideEnd:u,onStepKeyDown:f,...p}=e,x=v.useRef(null),w=tt(t,x),_=v.useRef(void 0),j=!a;function N(C){const T=_.current||x.current.getBoundingClientRect(),E=[0,T.height],b=Rv(E,j?[s,r]:[r,s]);return _.current=T,b(C-T.top)}return n.jsx($A,{scope:e.__scopeSlider,startEdge:j?"bottom":"top",endEdge:j?"top":"bottom",size:"height",direction:j?1:-1,children:n.jsx(qA,{"data-orientation":"vertical",...p,ref:w,style:{...p.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:C=>{const T=N(C.clientY);o==null||o(T)},onSlideMove:C=>{const T=N(C.clientY);c==null||c(T)},onSlideEnd:()=>{_.current=void 0,u==null||u()},onStepKeyDown:C=>{const E=BA[j?"from-bottom":"from-top"].includes(C.key);f==null||f({event:C,direction:E?-1:1})}})})}),qA=v.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:s,onSlideMove:a,onSlideEnd:o,onHomeKeyDown:c,onEndKeyDown:u,onStepKeyDown:f,...p}=e,x=dp(Yc,r);return n.jsx(qe.span,{...p,ref:t,onKeyDown:Ie(e.onKeyDown,w=>{w.key==="Home"?(c(w),w.preventDefault()):w.key==="End"?(u(w),w.preventDefault()):LA.concat(FA).includes(w.key)&&(f(w),w.preventDefault())}),onPointerDown:Ie(e.onPointerDown,w=>{const _=w.target;_.setPointerCapture(w.pointerId),w.preventDefault(),x.thumbs.has(_)?_.focus():s(w)}),onPointerMove:Ie(e.onPointerMove,w=>{w.target.hasPointerCapture(w.pointerId)&&a(w)}),onPointerUp:Ie(e.onPointerUp,w=>{const _=w.target;_.hasPointerCapture(w.pointerId)&&(_.releasePointerCapture(w.pointerId),o(w))})})}),WA="SliderTrack",HA=v.forwardRef((e,t)=>{const{__scopeSlider:r,...s}=e,a=dp(WA,r);return n.jsx(qe.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...s,ref:t})});HA.displayName=WA;var N0="SliderRange",GA=v.forwardRef((e,t)=>{const{__scopeSlider:r,...s}=e,a=dp(N0,r),o=VA(N0,r),c=v.useRef(null),u=tt(t,c),f=a.values.length,p=a.values.map(_=>YA(_,a.min,a.max)),x=f>1?Math.min(...p):0,w=100-Math.max(...p);return n.jsx(qe.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...s,ref:u,style:{...e.style,[o.startEdge]:x+"%",[o.endEdge]:w+"%"}})});GA.displayName=N0;var j0="SliderThumb",XA=v.forwardRef((e,t)=>{const r=sq(e.__scopeSlider),[s,a]=v.useState(null),o=tt(t,u=>a(u)),c=v.useMemo(()=>s?r().findIndex(u=>u.ref.current===s):-1,[r,s]);return n.jsx(cq,{...e,ref:o,index:c})}),cq=v.forwardRef((e,t)=>{const{__scopeSlider:r,index:s,name:a,...o}=e,c=dp(j0,r),u=VA(j0,r),[f,p]=v.useState(null),x=tt(t,S=>p(S)),w=f?c.form||!!f.closest("form"):!0,_=Ou(f),j=c.values[s],N=j===void 0?0:YA(j,c.min,c.max),C=hq(s,c.values.length),T=_==null?void 0:_[u.size],E=T?mq(T,N,u.direction):0;return v.useEffect(()=>{if(f)return c.thumbs.add(f),()=>{c.thumbs.delete(f)}},[f,c.thumbs]),n.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[u.startEdge]:`calc(${N}% + ${E}px)`},children:[n.jsx(_0.ItemSlot,{scope:e.__scopeSlider,children:n.jsx(qe.span,{role:"slider","aria-label":e["aria-label"]||C,"aria-valuemin":c.min,"aria-valuenow":j,"aria-valuemax":c.max,"aria-orientation":c.orientation,"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,tabIndex:c.disabled?void 0:0,...o,ref:x,style:j===void 0?{display:"none"}:e.style,onFocus:Ie(e.onFocus,()=>{c.valueIndexToChangeRef.current=s})})}),w&&n.jsx(KA,{name:a??(c.name?c.name+(c.values.length>1?"[]":""):void 0),form:c.form,value:j},s)]})});XA.displayName=j0;var dq="RadioBubbleInput",KA=v.forwardRef(({__scopeSlider:e,value:t,...r},s)=>{const a=v.useRef(null),o=tt(a,s),c=Gu(t);return v.useEffect(()=>{const u=a.current;if(!u)return;const f=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(f,"value").set;if(c!==t&&x){const w=new Event("input",{bubbles:!0});x.call(u,t),u.dispatchEvent(w)}},[c,t]),n.jsx(qe.input,{style:{display:"none"},...r,ref:o,defaultValue:t})});KA.displayName=dq;function uq(e=[],t,r){const s=[...e];return s[r]=t,s.sort((a,o)=>a-o)}function YA(e,t,r){const o=100/(r-t)*(e-t);return xu(o,[0,100])}function hq(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function fq(e,t){if(e.length===1)return 0;const r=e.map(a=>Math.abs(a-t)),s=Math.min(...r);return r.indexOf(s)}function mq(e,t,r){const s=e/2,o=Rv([0,50],[0,s]);return(s-o(t)*r)*r}function pq(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function gq(e,t){if(t>0){const r=pq(e);return Math.min(...r)>=t}return!0}function Rv(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(r-e[0])}}function xq(e){return(String(e).split(".")[1]||"").length}function vq(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var QA=UA,wq=HA,yq=GA,bq=XA;const ZA=v.forwardRef(({className:e,...t},r)=>n.jsxs(QA,{ref:r,className:Le("relative flex w-full touch-none select-none items-center",e),...t,children:[n.jsx(wq,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:n.jsx(yq,{className:"absolute h-full bg-primary"})}),n.jsx(bq,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));ZA.displayName=QA.displayName;function Pv({open:e,onOpenChange:t,imageSrc:r,onCropComplete:s,aspectRatio:a=1}){const[o,c]=v.useState(1),[u,f]=v.useState(0),[p,x]=v.useState({x:0,y:0}),[w,_]=v.useState(!1),[j,N]=v.useState({x:0,y:0}),C=v.useRef(null),T=v.useRef(null),E=v.useRef(null);v.useEffect(()=>{if(r&&e){const Y=new Image;Y.src=r,Y.onload=()=>{T.current=Y,S()}}},[r,e]),v.useEffect(()=>{S()},[o,u,p]);const S=()=>{var Ae,Pe;const Y=C.current,z=T.current;if(!Y||!z)return;const q=Y.getContext("2d");if(!q)return;const ee=((Ae=E.current)==null?void 0:Ae.clientWidth)||400,H=((Pe=E.current)==null?void 0:Pe.clientHeight)||400;Y.width=ee,Y.height=H,q.fillStyle="#000",q.fillRect(0,0,Y.width,Y.height),q.save();const re=Y.width/2,ae=Y.height/2;q.translate(re+p.x,ae+p.y),q.rotate(u*Math.PI/180),q.scale(o,o);const ie=z.width,te=z.height,ye=Math.max(Y.width/ie,Y.height/te),ge=ie*ye,W=te*ye;q.drawImage(z,-ge/2,-W/2,ge,W),q.restore();let J=Math.min(Y.width,Y.height)*.9,G=(Y.width-J)/2,se=(Y.height-J)/2,ce=J,ne=J;a!==1&&(ce=Math.min(Y.width*.9,Y.height*.9*a),ne=ce/a,G=(Y.width-ce)/2,se=(Y.height-ne)/2),q.fillStyle="rgba(0, 0, 0, 0.6)",q.fillRect(0,0,Y.width,se),q.fillRect(0,se+ne,Y.width,Y.height-se-ne),q.fillRect(0,se,G,ne),q.fillRect(G+ce,se,Y.width-G-ce,ne),q.strokeStyle="rgba(255, 255, 255, 0.9)",q.lineWidth=3,q.setLineDash([]),q.strokeRect(G,se,ce,ne);const he=20;q.fillStyle="rgba(255, 255, 255, 0.9)",q.fillRect(G-2,se-2,he,4),q.fillRect(G-2,se-2,4,he),q.fillRect(G+ce-he+2,se-2,he,4),q.fillRect(G+ce-2,se-2,4,he),q.fillRect(G-2,se+ne-2,he,4),q.fillRect(G-2,se+ne-he+2,4,he),q.fillRect(G+ce-he+2,se+ne-2,he,4),q.fillRect(G+ce-2,se+ne-he+2,4,he)},b=Y=>{_(!0),N({x:Y.clientX-p.x,y:Y.clientY-p.y})},k=Y=>{w&&x({x:Y.clientX-j.x,y:Y.clientY-j.y})},O=()=>{_(!1)},L=Y=>{const z=Y.touches[0];_(!0),N({x:z.clientX-p.x,y:z.clientY-p.y})},P=Y=>{if(!w)return;const z=Y.touches[0];x({x:z.clientX-j.x,y:z.clientY-j.y})},M=v.useCallback(async()=>{const Y=C.current,z=T.current;if(!Y||!z)return null;const q=document.createElement("canvas"),ee=q.getContext("2d");if(!ee)return null;const H=800;q.width=H,q.height=a===1?H:H/a;const re=Y.width,ae=Y.height;let ie=Math.min(re,ae)*.9,te=ie,ye=ie;a!==1&&(te=Math.min(re*.9,ae*.9*a),ye=te/a),ee.save(),ee.translate(q.width/2,q.height/2),ee.rotate(u*Math.PI/180),ee.scale(o,o);const ge=z.width,W=z.height,J=Math.max(re/ge,ae/W),G=ge*J,se=W*J,ce=G/2-te/2*(G/re)-p.x*G/re,ne=se/2-ye/2*(se/ae)-p.y*se/ae,he=te*(G/re),Ae=ye*(se/ae);return ee.drawImage(z,ce,ne,he,Ae,-q.width/2,-q.height/2,q.width,q.height),ee.restore(),new Promise(Pe=>{q.toBlob(Be=>{if(Be){const Ee=new File([Be],"cropped-image.jpg",{type:"image/jpeg"});Pe(Ee)}},"image/jpeg",.95)})},[o,u,p,a]),R=async()=>{const Y=await M();Y&&(s(Y),t(!1))},$=()=>{f(Y=>(Y+90)%360)};return n.jsx(Ut,{open:e,onOpenChange:t,children:n.jsxs(Bt,{className:"max-w-3xl p-0 gap-0",children:[n.jsxs(xr,{className:"px-6 pt-6 pb-4 space-y-1",children:[n.jsx(vr,{className:"text-xl",children:"Ajustar Foto"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Arraste para posicionar, use o zoom e gire a imagem conforme necessrio"})]}),n.jsxs("div",{className:"px-6 pb-6 space-y-6",children:[n.jsx("div",{ref:E,className:"relative w-full h-[500px] bg-black rounded-lg overflow-hidden cursor-move select-none touch-none",onMouseDown:b,onMouseMove:k,onMouseUp:O,onMouseLeave:O,onTouchStart:L,onTouchMove:P,onTouchEnd:O,children:n.jsx("canvas",{ref:C,className:"w-full h-full"})}),n.jsxs("div",{className:"space-y-6 bg-muted/50 p-4 rounded-lg",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("label",{className:"text-sm font-semibold flex items-center gap-2",children:[n.jsx(K8,{className:"h-4 w-4"}),"Zoom"]}),n.jsxs("span",{className:"text-sm font-medium tabular-nums",children:[Math.round(o*100),"%"]})]}),n.jsx(ZA,{value:[o],onValueChange:([Y])=>c(Y),min:.5,max:3,step:.05,className:"w-full"})]}),n.jsx("div",{className:"flex items-center justify-center pt-2",children:n.jsxs(K,{variant:"outline",onClick:$,className:"gap-2 h-11",children:[n.jsx(q8,{className:"h-5 w-5"}),"Girar 90"]})})]})]}),n.jsxs(Uu,{className:"px-6 pb-6 pt-0 gap-3",children:[n.jsx(K,{variant:"outline",onClick:()=>t(!1),className:"flex-1",children:"Cancelar"}),n.jsx(K,{onClick:R,className:"flex-1",children:"Salvar Foto"})]})]})})}const y2=[{id:"instagram",label:"Instagram",icon:Hi,color:"text-pink-500",placeholder:"https://instagram.com/seuperfil",field:"instagram_url"},{id:"whatsapp",label:"WhatsApp",icon:Ds,color:"text-green-500",placeholder:"https://wa.me/5511999999999",field:"phone"}];function _q({userType:e}){const t=_t(),[r,s]=v.useState("profile"),[a,o]=v.useState(!1),[c,u]=v.useState(null),[f,p]=v.useState(!1),[x,w]=v.useState(!1),[_,j]=v.useState(""),[N,C]=v.useState({display_name:"",bio:"",location:"",age:"",notes:"",notes_visible:!0,phone:"",website:"",interest:"curtio",relationship_status:"preferencia_nao_informar"}),{user:T,signOut:E}=bt(),{profile:S,loading:b,saving:k,updateProfile:O,uploadAvatar:L}=zm(),P=v.useRef(null),M=async()=>{try{const{data:{session:re}}=await U.auth.getSession();if(!re){X.error("Voc precisa estar logado para deletar sua conta");return}const{error:ae}=await U.functions.invoke("delete-user",{headers:{Authorization:`Bearer ${re.access_token}`}});if(ae){console.error("Error deleting account:",ae),X.error("Erro ao deletar conta. Tente novamente.");return}X.success("Conta deletada com sucesso!"),await U.auth.signOut(),window.location.href="/auth"}catch(re){console.error("Error:",re),X.error("Erro ao deletar conta. Tente novamente.")}},R=S!=null&&S.birth_date?cF(S.birth_date):null;v.useEffect(()=>{S&&(C({display_name:S.display_name||"",bio:S.bio||"",location:S.location||"",age:(R==null?void 0:R.toString())||"",notes:S.notes||"",notes_visible:S.notes_visible??!0,phone:S.phone||"",website:S.website||"",interest:S.interest||"curtio",relationship_status:S.relationship_status||"preferencia_nao_informar"}),p(!1))},[S,R]);const $=async re=>{const ae=N[re],ie={[re]:ae||null};re==="age"&&(ie.age=ae?parseInt(ae):null);const te=await O(ie);return te&&u(null),te},Y=async(re,ae)=>{const ie=y2.find(te=>te.id===re);ie&&await O({[ie.field]:ae||null})},z=async re=>{var te;const ae=(te=re.target.files)==null?void 0:te[0];if(!ae)return;if(!ae.type.startsWith("image/")){X.error("Por favor, selecione apenas arquivos de imagem");return}if(ae.size>5*1024*1024){X.error("A imagem deve ter no mximo 5MB");return}const ie=new FileReader;ie.onload=()=>{j(ie.result),w(!0)},ie.readAsDataURL(ae)},q=async re=>{await L(re),w(!1)};if(b)return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx(i0,{title:"Meu Perfil"}),n.jsx("div",{className:"flex items-center justify-center p-8",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Carregando perfil..."})]})})]});const ee=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsx(je,{children:n.jsx(Ce,{className:"p-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"h-20 w-20 rounded-full bg-primary/20 flex items-center justify-center overflow-hidden",children:S!=null&&S.avatar_url?n.jsx("img",{src:S.avatar_url,alt:"Avatar",className:"w-full h-full object-cover"}):n.jsx(hs,{className:"h-8 w-8 text-primary"})}),n.jsx(K,{size:"icon",variant:"outline",className:"absolute -bottom-1 -right-1 h-7 w-7 rounded-full",onClick:()=>{var re;return(re=P.current)==null?void 0:re.click()},disabled:k,children:n.jsx(Cn,{className:"h-3 w-3"})}),n.jsx("input",{ref:P,type:"file",accept:"image/*",onChange:z,className:"hidden"})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"flex items-center gap-2 mb-1",children:c==="display_name"?n.jsxs("div",{className:"flex gap-2 flex-1",children:[n.jsx(we,{value:N.display_name,onChange:re=>C(ae=>({...ae,display_name:re.target.value})),className:"text-xl font-semibold",placeholder:"Seu nome"}),n.jsx(K,{size:"sm",onClick:()=>$("display_name"),disabled:k,children:"Salvar"}),n.jsx(K,{size:"sm",variant:"outline",onClick:()=>u(null),children:"Cancelar"})]}):n.jsxs(n.Fragment,{children:[n.jsx("h2",{className:"text-xl font-semibold",children:(S==null?void 0:S.display_name)||"Seu Nome"}),n.jsx(K,{size:"sm",variant:"ghost",onClick:()=>u("display_name"),children:n.jsx(rs,{className:"h-4 w-4"})})]})}),n.jsx("div",{className:"mb-2",children:c==="location"?n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"flex gap-2",children:n.jsx(we,{value:N.location,onChange:re=>C(ae=>({...ae,location:re.target.value})),placeholder:"Localizao",className:"text-sm"})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(K,{size:"sm",onClick:()=>{$("location")},disabled:k,children:"Salvar"}),n.jsx(K,{size:"sm",variant:"outline",onClick:()=>u(null),children:"Cancelar"})]})]}):n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.jsx(Rt,{className:"h-3 w-3 inline mr-1"}),(S==null?void 0:S.location)||"Localizao","  ",R?`${R} anos`:"Idade no informada"]}),n.jsx(K,{size:"sm",variant:"ghost",onClick:()=>u("location"),className:"h-6 w-6 p-0",children:n.jsx(rs,{className:"h-3 w-3"})})]})}),c==="bio"?n.jsxs("div",{className:"space-y-2",children:[n.jsx(An,{value:N.bio,onChange:re=>C(ae=>({...ae,bio:re.target.value})),placeholder:"Escreva sobre voc...",className:"text-sm"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(K,{size:"sm",onClick:()=>$("bio"),disabled:k,children:"Salvar"}),n.jsx(K,{size:"sm",variant:"outline",onClick:()=>u(null),children:"Cancelar"})]})]}):n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx("p",{className:"text-sm flex-1",children:(S==null?void 0:S.bio)||"Clique para adicionar uma biografia"}),n.jsx(K,{size:"sm",variant:"ghost",onClick:()=>u("bio"),className:"h-6 w-6 p-0",children:n.jsx(rs,{className:"h-3 w-3"})})]})]})]})})}),n.jsxs(je,{children:[n.jsx(We,{children:n.jsxs(Ge,{className:"flex items-center gap-2",children:[n.jsx(Vr,{className:"h-5 w-5"}),"Redes Sociais"]})}),n.jsx(Ce,{children:n.jsx("div",{className:"space-y-3",children:y2.map(re=>{const ae=re.icon,ie=(S==null?void 0:S[re.field])||"",te=c===re.field;return n.jsxs("div",{className:"flex items-start gap-3 p-4 border rounded-lg bg-card hover:bg-accent/5 transition-colors",children:[n.jsx(ae,{className:`h-5 w-5 ${re.color} mt-0.5 flex-shrink-0`}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium text-sm mb-1",children:re.label}),te?n.jsx("div",{className:"flex gap-2",children:n.jsx(we,{defaultValue:ie,placeholder:re.placeholder,className:"text-sm h-9",onBlur:ye=>Y(re.id,ye.target.value),onKeyDown:ye=>{ye.key==="Enter"&&(Y(re.id,ye.currentTarget.value),u(null))},autoFocus:!0})}):n.jsx("p",{className:"text-sm text-muted-foreground break-all",children:ie||"No configurado"})]}),n.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[ie&&!te&&n.jsx(K,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0",onClick:()=>window.open(ie,"_blank"),children:n.jsx(Vr,{className:"h-4 w-4"})}),n.jsx(K,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0",onClick:()=>u(te?null:re.field),children:n.jsx(rs,{className:"h-4 w-4"})})]})]},re.id)})})})]}),n.jsxs(je,{children:[n.jsx(We,{children:n.jsxs(Ge,{className:"flex items-center gap-2",children:[n.jsx(er,{className:"h-5 w-5"}),"Status de Relacionamento"]})}),n.jsx(Ce,{children:n.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"solteiro",label:"Solteiro(a)",emoji:""},{value:"namorando",label:"Namorando",emoji:""},{value:"casado",label:"Casado(a)",emoji:""},{value:"relacionamento_aberto",label:"Relacionamento Aberto",emoji:""},{value:"preferencia_nao_informar",label:"No informar",emoji:""}].map(re=>n.jsxs("button",{type:"button",onClick:()=>{const ae=re.value;C(ie=>({...ie,relationship_status:ae})),O({relationship_status:ae})},className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${N.relationship_status===re.value?"bg-primary text-primary-foreground shadow-md":"bg-secondary text-secondary-foreground hover:bg-secondary/80"}`,children:[n.jsx("span",{className:"mr-1",children:re.emoji}),re.label]},re.value))})})]})]}),H=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs(je,{children:[n.jsx(We,{children:n.jsx(Ge,{children:"Informaes Pessoais"})}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Email"}),n.jsx(we,{value:(T==null?void 0:T.email)||"",disabled:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Telefone"}),c==="phone"?n.jsxs("div",{className:"flex gap-2",children:[n.jsx(we,{value:N.phone,onChange:re=>C(ae=>({...ae,phone:re.target.value})),placeholder:"(11) 99999-9999"}),n.jsx(K,{size:"sm",onClick:()=>$("phone"),disabled:k,children:"Salvar"}),n.jsx(K,{size:"sm",variant:"outline",onClick:()=>u(null),children:"Cancelar"})]}):n.jsxs("div",{className:"flex gap-2",children:[n.jsx(we,{value:(S==null?void 0:S.phone)||"No informado",disabled:!0}),n.jsx(K,{size:"sm",variant:"outline",onClick:()=>u("phone"),children:n.jsx(rs,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Website"}),c==="website"?n.jsxs("div",{className:"flex gap-2",children:[n.jsx(we,{value:N.website,onChange:re=>C(ae=>({...ae,website:re.target.value})),placeholder:"https://seusite.com"}),n.jsx(K,{size:"sm",onClick:()=>$("website"),disabled:k,children:"Salvar"}),n.jsx(K,{size:"sm",variant:"outline",onClick:()=>u(null),children:"Cancelar"})]}):n.jsxs("div",{className:"flex gap-2",children:[n.jsx(we,{value:(S==null?void 0:S.website)||"No informado",disabled:!0}),n.jsx(K,{size:"sm",variant:"outline",onClick:()=>u("website"),children:n.jsx(rs,{className:"h-4 w-4"})})]})]})]})]}),n.jsx(je,{children:n.jsx(Ce,{className:"p-6",children:n.jsxs(Zo,{children:[n.jsx(Qf,{asChild:!0,children:n.jsxs(K,{variant:"outline",className:"w-full text-orange-600 hover:text-orange-700 hover:bg-orange-50",children:[n.jsx(Aj,{className:"h-4 w-4 mr-2"}),"Sair da Conta"]})}),n.jsx(Yi,{children:n.jsxs(Qi,{children:[n.jsx(Ji,{children:"Cancelar"}),n.jsx(Zi,{onClick:E,children:"Sair"})]})})]})})}),n.jsxs(je,{className:"border-destructive/20",children:[n.jsx(We,{children:n.jsxs(Ge,{className:"flex items-center gap-2 text-destructive",children:[n.jsx(Gn,{className:"h-4 w-4"}),"Zona de Perigo"]})}),n.jsx(Ce,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-foreground",children:"Excluir Conta"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Esta ao no pode ser desfeita. Todos os seus dados sero permanentemente removidos."})]}),n.jsxs(Zo,{children:[n.jsx(Qf,{asChild:!0,children:n.jsxs(K,{variant:"destructive",size:"sm",children:[n.jsx(Gn,{className:"h-4 w-4 mr-2"}),"Excluir Conta"]})}),n.jsxs(Yi,{children:[n.jsxs(Jo,{children:[n.jsx(el,{children:"Excluir Conta Permanentemente"}),n.jsx(tl,{children:"Esta ao  irreversvel. Todos os seus dados sero permanentemente excludos. Voc poder criar uma nova conta a qualquer momento com o mesmo email."})]}),n.jsxs(Qi,{children:[n.jsx(Ji,{children:"Cancelar"}),n.jsx(Zi,{onClick:M,className:"bg-destructive hover:bg-destructive/90",children:"Excluir Definitivamente"})]})]})]})]})})]})]});return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx(i0,{title:"Meu Perfil"}),n.jsxs("div",{className:"p-4 pb-24",children:[n.jsxs("div",{className:"flex gap-2 mb-6 p-1 bg-muted rounded-lg",children:[n.jsxs("button",{onClick:()=>s("profile"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all ${r==="profile"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:[n.jsx(hs,{className:"h-4 w-4 inline mr-2"}),"Perfil"]}),n.jsxs("button",{onClick:()=>t("/my-events"),className:"flex-1 py-2 px-4 rounded-md text-sm font-medium text-muted-foreground hover:text-foreground transition-all",children:[n.jsx(Ac,{className:"h-4 w-4 inline mr-2"}),"Meus Eventos"]}),n.jsxs("button",{onClick:()=>s("settings"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all ${r==="settings"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:[n.jsx(Bo,{className:"h-4 w-4 inline mr-2"}),"Configuraes"]})]}),r==="profile"&&ee(),r==="settings"&&H()]}),n.jsx(Pv,{open:x,onOpenChange:w,imageSrc:_,onCropComplete:q,aspectRatio:1})]})}function Nq({onBack:e,onEventClick:t}){const{events:r,loading:s,toggleLike:a}=wS(),o=new Date,c=r.filter(u=>{const f=new Date(u.event_date),p=u.end_date?new Date(u.end_date):null,x=(u.status||"").toLowerCase()==="completed"||(u.status||"").toLowerCase()==="ended";return f<=o&&!x&&(!p||p>o)});return s?n.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[n.jsxs("div",{className:"flex items-center gap-4 p-4 border-b border-border bg-surface/50 backdrop-blur-sm sticky top-0 z-10",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Eventos ao Vivo"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando..."})]})]}),n.jsx("div",{className:"flex items-center justify-center p-8",children:n.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})})]}):n.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[n.jsxs("div",{className:"flex items-center gap-4 p-4 border-b border-border bg-surface/50 backdrop-blur-sm sticky top-0 z-10",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Eventos ao Vivo"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:c.length>0?"Acontecendo agora":"Nenhum evento ao vivo no momento"})]})]}),n.jsx("main",{className:"px-4 py-6 max-w-md mx-auto",children:c.length>0?n.jsx("div",{className:"space-y-6",children:c.map(u=>{var f,p,x;return n.jsx(o0,{id:u.id,title:u.title,image:u.image_url||"",organizerName:((f=u.organizer)==null?void 0:f.page_title)||"Organizador",organizerAvatar:((x=(p=u.organizer)==null?void 0:p.profile)==null?void 0:x.avatar_url)||"",date:new Date(u.event_date).toLocaleDateString("pt-BR"),location:u.location,locationLink:u.location_link||void 0,estimatedAttendees:u.current_attendees||0,likes:u.likes_count||0,comments:u.comments_count||0,isLiked:u.is_liked||!1,isLive:(()=>{const w=new Date(u.event_date),_=u.end_date?new Date(u.end_date):null;return w<=o&&(!_||_>o)})(),price:u.ticket_price||0,onClick:()=>t(u.id),onLike:()=>a(u.id),showJoinButton:!0,isPlatformEvent:u.is_platform_event||!1},u.id)})}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx("p",{className:"text-muted-foreground",children:"Nenhum evento ao vivo no momento"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Volte mais tarde para ver eventos acontecendo"})]})})]})}const b2=[{code:"001",name:"Banco do Brasil"},{code:"033",name:"Santander"},{code:"104",name:"Caixa Econmica Federal"},{code:"237",name:"Bradesco"},{code:"341",name:"Ita"},{code:"077",name:"Banco Inter"},{code:"260",name:"Nu Pagamentos (Nubank)"},{code:"290",name:"PagSeguro"},{code:"323",name:"Mercado Pago"},{code:"212",name:"Banco Original"},{code:"756",name:"Bancoob (Sicoob)"},{code:"748",name:"Sicredi"},{code:"422",name:"Banco Safra"}],jq=["AC","AL","AP","AM","BA","CE","DF","ES","GO","MA","MT","MS","MG","PA","PB","PR","PE","PI","RJ","RN","RS","RO","RR","SC","SP","SE","TO"];function JA({organizerId:e}){const{toast:t}=YN(),[r,s]=v.useState(!1),[a,o]=v.useState(!1),[c,u]=v.useState(!1),[f,p]=v.useState({document_type:"cpf",document_number:"",legal_name:"",trading_name:"",zip_code:"",street:"",number:"",complement:"",neighborhood:"",city:"",state:"SP",bank_code:"",bank_name:"",account_type:"corrente",agency:"",agency_digit:"",account_number:"",account_digit:"",phone:"",email:"",auto_transfer:!1,transfer_day:5,is_verified:!1});v.useEffect(()=>{x()},[e]);const x=async()=>{s(!0);try{const{data:b,error:k}=await U.from("organizer_financial_data").select("*").eq("organizer_id",e).maybeSingle();if(k)throw k;b&&(p(b),u(!0))}catch(b){console.error("Error loading financial data:",b),t({title:"Erro ao carregar dados",description:b.message,variant:"destructive"})}finally{s(!1)}},w=b=>{const k=b2.find(O=>O.code===b);p({...f,bank_code:b,bank_name:(k==null?void 0:k.name)||""})},_=b=>{const k=b.replace(/\D/g,"");return k.length<=11?k.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"):b},j=b=>{const k=b.replace(/\D/g,"");return k.length<=14?k.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,"$1.$2.$3/$4-$5"):b},N=b=>b.replace(/\D/g,"").replace(/(\d{5})(\d{3})/,"$1-$2"),C=b=>{const k=b.replace(/\D/g,"");return k.length<=10?k.replace(/(\d{2})(\d{4})(\d{4})/,"($1) $2-$3"):k.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3")},T=b=>{let k=b;f.document_type==="cpf"?k=_(b):k=j(b),p({...f,document_number:k})},E=async()=>{const b=f.zip_code.replace(/\D/g,"");if(b.length===8)try{const O=await(await fetch(`https://viacep.com.br/ws/${b}/json/`)).json();O.erro||p({...f,street:O.logradouro||"",neighborhood:O.bairro||"",city:O.localidade||"",state:O.uf||""})}catch(k){console.error("Error fetching zip code:",k)}},S=async b=>{b.preventDefault(),o(!0);try{const k={organizer_id:e,...f};if(c){const{error:O}=await U.from("organizer_financial_data").update(k).eq("organizer_id",e);if(O)throw O}else{const{error:O}=await U.from("organizer_financial_data").insert([k]);if(O)throw O;u(!0)}t({title:"Dados salvos com sucesso!",description:"Suas informaes financeiras foram atualizadas."})}catch(k){console.error("Error saving financial data:",k),t({title:"Erro ao salvar dados",description:k.message,variant:"destructive"})}finally{o(!1)}};return r?n.jsx("div",{className:"flex justify-center p-8",children:"Carregando..."}):n.jsxs("form",{onSubmit:S,className:"space-y-6",children:[n.jsxs(je,{children:[n.jsx(We,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(Ge,{className:"flex items-center gap-2",children:[n.jsx(E1,{className:"h-5 w-5"}),"Dados Fiscais"]}),n.jsx(cn,{children:"Informaes do responsvel legal pela conta"})]}),f.is_verified&&n.jsxs(dt,{variant:"default",className:"gap-1",children:[n.jsx(I1,{className:"h-3 w-3"}),"Verificado"]})]})}),n.jsxs(Ce,{className:"space-y-4",children:[!f.is_verified&&n.jsxs(Xu,{children:[n.jsx(dl,{className:"h-4 w-4"}),n.jsx(Ku,{children:"Seus dados sero verificados pela equipe antes de liberar os repasses"})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Tipo de Documento"}),n.jsxs(Zs,{value:f.document_type,onValueChange:b=>p({...f,document_type:b,document_number:""}),children:[n.jsx(Es,{children:n.jsx(Js,{})}),n.jsxs(Ss,{children:[n.jsx(Ht,{value:"cpf",children:"CPF - Pessoa Fsica"}),n.jsx(Ht,{value:"cnpj",children:"CNPJ - Pessoa Jurdica"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:f.document_type==="cpf"?"CPF":"CNPJ"}),n.jsx(we,{value:f.document_number,onChange:b=>T(b.target.value),placeholder:f.document_type==="cpf"?"000.000.000-00":"00.000.000/0000-00",required:!0})]}),n.jsxs("div",{className:"space-y-2 md:col-span-2",children:[n.jsx(de,{children:"Razo Social / Nome Completo"}),n.jsx(we,{value:f.legal_name,onChange:b=>p({...f,legal_name:b.target.value}),placeholder:"Nome legal conforme documento",required:!0})]}),f.document_type==="cnpj"&&n.jsxs("div",{className:"space-y-2 md:col-span-2",children:[n.jsx(de,{children:"Nome Fantasia"}),n.jsx(we,{value:f.trading_name,onChange:b=>p({...f,trading_name:b.target.value}),placeholder:"Nome fantasia da empresa"})]})]})]})]}),n.jsxs(je,{children:[n.jsxs(We,{children:[n.jsxs(Ge,{className:"flex items-center gap-2",children:[n.jsx(Rt,{className:"h-5 w-5"}),"Endereo Fiscal"]}),n.jsx(cn,{children:"Endereo conforme documento fiscal"})]}),n.jsx(Ce,{className:"space-y-4",children:n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"CEP"}),n.jsx(we,{value:f.zip_code,onChange:b=>p({...f,zip_code:N(b.target.value)}),onBlur:E,placeholder:"00000-000",required:!0})]}),n.jsxs("div",{className:"space-y-2 md:col-span-2",children:[n.jsx(de,{children:"Logradouro"}),n.jsx(we,{value:f.street,onChange:b=>p({...f,street:b.target.value}),placeholder:"Rua, Avenida, etc",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Nmero"}),n.jsx(we,{value:f.number,onChange:b=>p({...f,number:b.target.value}),placeholder:"123",required:!0})]}),n.jsxs("div",{className:"space-y-2 md:col-span-2",children:[n.jsx(de,{children:"Complemento"}),n.jsx(we,{value:f.complement,onChange:b=>p({...f,complement:b.target.value}),placeholder:"Apartamento, sala, etc"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Bairro"}),n.jsx(we,{value:f.neighborhood,onChange:b=>p({...f,neighborhood:b.target.value}),placeholder:"Bairro",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Cidade"}),n.jsx(we,{value:f.city,onChange:b=>p({...f,city:b.target.value}),placeholder:"Cidade",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Estado"}),n.jsxs(Zs,{value:f.state,onValueChange:b=>p({...f,state:b}),children:[n.jsx(Es,{children:n.jsx(Js,{})}),n.jsx(Ss,{children:jq.map(b=>n.jsx(Ht,{value:b,children:b},b))})]})]})]})})]}),n.jsxs(je,{children:[n.jsxs(We,{children:[n.jsxs(Ge,{className:"flex items-center gap-2",children:[n.jsx(O8,{className:"h-5 w-5"}),"Dados Bancrios"]}),n.jsx(cn,{children:"Conta para recebimento dos repasses"})]}),n.jsx(Ce,{className:"space-y-4",children:n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"space-y-2 md:col-span-2",children:[n.jsx(de,{children:"Banco"}),n.jsxs(Zs,{value:f.bank_code,onValueChange:w,children:[n.jsx(Es,{children:n.jsx(Js,{placeholder:"Selecione o banco"})}),n.jsx(Ss,{children:b2.map(b=>n.jsxs(Ht,{value:b.code,children:[b.code," - ",b.name]},b.code))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Tipo de Conta"}),n.jsxs(Zs,{value:f.account_type,onValueChange:b=>p({...f,account_type:b}),children:[n.jsx(Es,{children:n.jsx(Js,{})}),n.jsxs(Ss,{children:[n.jsx(Ht,{value:"corrente",children:"Conta Corrente"}),n.jsx(Ht,{value:"poupanca",children:"Conta Poupana"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Agncia"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(we,{value:f.agency,onChange:b=>p({...f,agency:b.target.value.replace(/\D/g,"")}),placeholder:"0000",className:"flex-1",required:!0}),n.jsx(we,{value:f.agency_digit,onChange:b=>p({...f,agency_digit:b.target.value}),placeholder:"X",className:"w-16",maxLength:1})]})]}),n.jsxs("div",{className:"space-y-2 md:col-span-2",children:[n.jsx(de,{children:"Nmero da Conta"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(we,{value:f.account_number,onChange:b=>p({...f,account_number:b.target.value.replace(/\D/g,"")}),placeholder:"00000000",className:"flex-1",required:!0}),n.jsx(we,{value:f.account_digit,onChange:b=>p({...f,account_digit:b.target.value}),placeholder:"X",className:"w-16",maxLength:2,required:!0})]})]})]})})]}),n.jsxs(je,{children:[n.jsxs(We,{children:[n.jsxs(Ge,{className:"flex items-center gap-2",children:[n.jsx(zc,{className:"h-5 w-5"}),"Dados de Contato"]}),n.jsx(cn,{children:"Informaes para comunicao sobre repasses"})]}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Telefone"}),n.jsx(we,{value:f.phone,onChange:b=>p({...f,phone:C(b.target.value)}),placeholder:"(00) 00000-0000",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Email"}),n.jsx(we,{type:"email",value:f.email,onChange:b=>p({...f,email:b.target.value}),placeholder:"email@example.com",required:!0})]})]}),n.jsx(ia,{}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(de,{children:"Repasse Automtico"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Receba automaticamente sem precisar solicitar"})]}),n.jsx(Tr,{checked:f.auto_transfer,onCheckedChange:b=>p({...f,auto_transfer:b})})]}),f.auto_transfer&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Dia do Repasse"}),n.jsxs(Zs,{value:f.transfer_day.toString(),onValueChange:b=>p({...f,transfer_day:parseInt(b)}),children:[n.jsx(Es,{children:n.jsx(Js,{})}),n.jsx(Ss,{children:Array.from({length:28},(b,k)=>k+1).map(b=>n.jsxs(Ht,{value:b.toString(),children:["Dia ",b," de cada ms"]},b))})]})]})]})]})]}),n.jsx("div",{className:"flex justify-end gap-4",children:n.jsx(K,{type:"submit",size:"lg",disabled:a,children:a?"Salvando...":c?"Atualizar Dados":"Salvar Dados"})})]})}function ek({organizerId:e}){const[t,r]=v.useState(!0),[s,a]=v.useState([]),[o,c]=v.useState({total_gross:0,total_fees:0,total_net:0,pending_amount:0,completed_amount:0,transaction_count:0});v.useEffect(()=>{u()},[e]);const u=async()=>{r(!0);try{const{data:w,error:_}=await U.from("ticket_sales_transactions").select(`
          *,
          events (
            title,
            slug
          )
        `).eq("organizer_id",e).order("created_at",{ascending:!1});if(_)throw _;a(w||[]);const j={total_gross:0,total_fees:0,total_net:0,pending_amount:0,completed_amount:0,transaction_count:(w==null?void 0:w.length)||0};w==null||w.forEach(N=>{j.total_gross+=Number(N.gross_amount),j.total_fees+=Number(N.platform_fee)+Number(N.payment_gateway_fee),j.total_net+=Number(N.net_amount),N.transaction_status==="completed"?j.completed_amount+=Number(N.net_amount):(N.transaction_status==="pending"||N.transaction_status==="processing")&&(j.pending_amount+=Number(N.net_amount))}),c(j)}catch(w){console.error("Error loading transactions:",w)}finally{r(!1)}},f=w=>{switch(w){case"completed":return n.jsxs(dt,{variant:"default",className:"gap-1",children:[n.jsx(as,{className:"h-3 w-3"}),"Recebido"]});case"processing":return n.jsxs(dt,{variant:"secondary",className:"gap-1",children:[n.jsx(tf,{className:"h-3 w-3"}),"Processando"]});case"pending":return n.jsxs(dt,{variant:"outline",className:"gap-1",children:[n.jsx(tf,{className:"h-3 w-3"}),"Pendente"]});case"failed":return n.jsxs(dt,{variant:"destructive",className:"gap-1",children:[n.jsx(dl,{className:"h-3 w-3"}),"Falhou"]});case"refunded":return n.jsx(dt,{variant:"secondary",children:"Reembolsado"});default:return n.jsx(dt,{variant:"outline",children:w})}},p=w=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(w),x=()=>{const w=[["Data","Evento","Valor Bruto","Taxas","Valor Lquido","Status","Data Pagamento","Data Repasse"].join(","),...s.map(N=>{var C;return[new Date(N.created_at).toLocaleDateString("pt-BR"),((C=N.events)==null?void 0:C.title)||"N/A",N.gross_amount,(Number(N.platform_fee)+Number(N.payment_gateway_fee)).toFixed(2),N.net_amount,N.transaction_status,N.payment_date?new Date(N.payment_date).toLocaleDateString("pt-BR"):"N/A",N.transfer_date?new Date(N.transfer_date).toLocaleDateString("pt-BR"):"N/A"].join(",")})].join(`
`),_=new Blob([w],{type:"text/csv;charset=utf-8;"}),j=document.createElement("a");j.href=URL.createObjectURL(_),j.download=`transacoes_${new Date().toISOString().split("T")[0]}.csv`,j.click()};return t?n.jsx("div",{className:"flex justify-center p-8",children:"Carregando vendas..."}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[n.jsxs(je,{children:[n.jsxs(We,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ge,{className:"text-sm font-medium",children:"Vendas Brutas"}),n.jsx(Sn,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ce,{children:[n.jsx("div",{className:"text-2xl font-bold",children:p(o.total_gross)}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[o.transaction_count," transaes"]})]})]}),n.jsxs(je,{children:[n.jsxs(We,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ge,{className:"text-sm font-medium",children:"Total em Taxas"}),n.jsx(G8,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ce,{children:[n.jsx("div",{className:"text-2xl font-bold",children:p(o.total_fees)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Plataforma + Gateway"})]})]}),n.jsxs(je,{children:[n.jsxs(We,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ge,{className:"text-sm font-medium",children:"A Receber"}),n.jsx(tf,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ce,{children:[n.jsx("div",{className:"text-2xl font-bold",children:p(o.pending_amount)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Aguardando repasse"})]})]}),n.jsxs(je,{children:[n.jsxs(We,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ge,{className:"text-sm font-medium",children:"Recebido"}),n.jsx(as,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ce,{children:[n.jsx("div",{className:"text-2xl font-bold",children:p(o.completed_amount)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Total transferido"})]})]})]}),n.jsxs(je,{children:[n.jsx(We,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ge,{children:"Histrico de Transaes"}),n.jsx(cn,{children:"Todas as vendas de ingressos e seus respectivos repasses"})]}),s.length>0&&n.jsxs(K,{variant:"outline",size:"sm",onClick:x,children:[n.jsx(Ho,{className:"h-4 w-4 mr-2"}),"Exportar CSV"]})]})}),n.jsx(Ce,{children:s.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Nenhuma transao encontrada"}):n.jsx("div",{className:"space-y-4",children:s.map(w=>{var _;return n.jsxs("div",{className:"border rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium",children:((_=w.events)==null?void 0:_.title)||"Evento"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:gu(new Date(w.created_at),{addSuffix:!0,locale:Ir})})]}),f(w.transaction_status)]}),n.jsx(ia,{className:"my-2"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground",children:"Valor Bruto"}),n.jsx("div",{className:"font-medium",children:p(Number(w.gross_amount))})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground",children:"Taxas"}),n.jsxs("div",{className:"font-medium text-red-600",children:["-",p(Number(w.platform_fee)+Number(w.payment_gateway_fee))]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground",children:"Valor Lquido"}),n.jsx("div",{className:"font-medium text-green-600",children:p(Number(w.net_amount))})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground",children:w.transfer_date?"Recebido em":"Previso"}),n.jsx("div",{className:"font-medium",children:w.transfer_date?new Date(w.transfer_date).toLocaleDateString("pt-BR"):w.transfer_scheduled_date?new Date(w.transfer_scheduled_date).toLocaleDateString("pt-BR"):"A definir"})]})]})]},w.id)})})})]})]})}function Cq(e){const[t,r]=v.useState(null),[s,a]=v.useState([]),[o,c]=v.useState([]),[u,f]=v.useState(!1),p=async()=>{if(e)try{f(!0);const{data:x,error:w}=await U.from("organizers").select("*").eq("id",e).eq("is_page_active",!0).maybeSingle();if(w)throw w;if(!x)return;const{data:_}=await U.from("profiles").select("display_name, avatar_url, bio").eq("user_id",x.user_id).maybeSingle(),{data:j}=await U.from("organizer_stats").select("*").eq("organizer_id",e).maybeSingle(),N={...x,profile:_,stats:j||{followers_count:0,events_count:0,average_rating:0,total_ratings:0}};r(N);const{data:C,error:T}=await U.from("events").select("*").eq("organizer_id",e).order("event_date",{ascending:!1});if(T)throw T;const E=await Promise.all((C||[]).map(async k=>{const{count:O}=await U.from("event_likes").select("*",{count:"exact",head:!0}).eq("event_id",k.id),{count:L}=await U.from("event_comments").select("*",{count:"exact",head:!0}).eq("event_id",k.id);return{...k,likes_count:O||0,comments_count:L||0}}));a(E);const{data:S,error:b}=await U.from("custom_links").select("*").eq("organizer_id",e).eq("is_active",!0).order("sort_order",{ascending:!0});if(b)throw b;c(S||[])}catch(x){console.error("Error fetching organizer details:",x)}finally{f(!1)}};return v.useEffect(()=>{p()},[e]),v.useEffect(()=>{if(!t)return;const x=U.channel("realtime-organizer-profile-details").on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles",filter:`user_id=eq.${t.user_id}`},w=>{const _=w.new;r(j=>{var N,C,T;return j&&{...j,profile:{...j.profile||{},display_name:_.display_name??((N=j.profile)==null?void 0:N.display_name),avatar_url:_.avatar_url??((C=j.profile)==null?void 0:C.avatar_url),bio:_.bio??((T=j.profile)==null?void 0:T.bio)}}})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"organizers",filter:`id=eq.${t.id}`},w=>{const _=w.new;r(j=>j&&{...j,page_title:_.page_title??j.page_title,avatar_url:_.avatar_url??j.avatar_url,page_description:_.page_description??j.page_description,updated_at:_.updated_at??j.updated_at})}).subscribe();return()=>{U.removeChannel(x)}},[t==null?void 0:t.id,t==null?void 0:t.user_id]),{organizer:t,events:s,customLinks:o,loading:u,refetch:p}}function Eq(e){const[t,r]=v.useState(!1),[s,a]=v.useState(!0),{user:o}=bt();v.useEffect(()=>{if(!o||!e){a(!1);return}c()},[o,e]);const c=async()=>{if(!(!o||!e))try{const{data:f,error:p}=await U.from("followers").select("id").eq("user_id",o.id).eq("organizer_id",e).maybeSingle();p&&p.code!=="PGRST116"&&console.error("Error checking follow status:",p),r(!!f)}catch(f){console.error("Error:",f)}finally{a(!1)}};return{isFollowing:t,loading:s,toggleFollow:async()=>{if(!o)return X.error("Faa login para seguir organizadores"),!1;if(!e)return X.error("ID do organizador no encontrado"),!1;a(!0);try{if(t){const{error:f}=await U.from("followers").delete().eq("user_id",o.id).eq("organizer_id",e);if(f)throw f;return r(!1),X.success("Voc deixou de seguir este organizador"),!0}else{const{error:f}=await U.from("followers").insert({user_id:o.id,organizer_id:e});if(f)throw f;return r(!0),X.success("Agora voc est seguindo este organizador!"),!0}}catch(f){return console.error("Error toggling follow:",f),X.error("Erro ao atualizar status de seguidor"),!1}finally{a(!1)}}}}function Sq({eventId:e,organizerId:t}){var R,$,Y;const[r,s]=v.useState([]),[a,o]=v.useState(!0),[c,u]=v.useState(!1),[f,p]=v.useState(!1),[x,w]=v.useState(0),[_,j]=v.useState(!1),[N,C]=v.useState(""),{user:T}=bt();if(_t(),Kn(),v.useEffect(()=>{(async()=>{try{const{data:q,error:ee}=await U.from("organizer_photos").select("*").eq("organizer_id",t).eq("event_id",e).eq("is_active",!0).order("created_at",{ascending:!1});if(ee)throw ee;s(q||[])}catch(q){console.error("Error fetching event photos:",q)}finally{o(!1)}})()},[e,t]),a)return n.jsx("div",{className:"grid grid-cols-2 gap-2",children:[1,2,3,4].map(z=>n.jsx(St,{className:"aspect-square rounded-lg"},z))});if(r.length===0)return n.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Nenhuma foto deste evento ainda"});const E=z=>{if(!T){C("para ver as fotos ampliadas"),j(!0);return}w(z),p(!0)},S=()=>{if(!T){C("para ver todas as fotos"),j(!0);return}u(!0)},b=z=>{w(z),u(!1),p(!0)},k=async(z,q)=>{try{const H=await(await fetch(z)).blob(),re=window.URL.createObjectURL(H),ae=document.createElement("a");ae.href=re,ae.download=q||"foto-evento.jpg",document.body.appendChild(ae),ae.click(),document.body.removeChild(ae),window.URL.revokeObjectURL(re),X.success("Foto baixada com sucesso!")}catch(ee){console.error("Error downloading photo:",ee),X.error("Erro ao baixar a foto")}},O=()=>{w(z=>z>0?z-1:r.length-1)},L=()=>{w(z=>z<r.length-1?z+1:0)},P=r.slice(0,3),M=r.length-3;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[P.map((z,q)=>n.jsx("div",{className:"aspect-square bg-surface rounded-lg overflow-hidden relative group cursor-pointer",onClick:()=>E(q),children:n.jsx("img",{src:z.photo_url,alt:z.caption||"Foto do evento",className:"w-full h-full object-cover hover:scale-105 transition-transform"})},z.id)),M>0&&n.jsxs("div",{className:"aspect-square bg-surface rounded-lg overflow-hidden relative cursor-pointer",onClick:S,children:[n.jsx("img",{src:r[3].photo_url,alt:"Mais fotos",className:"w-full h-full object-cover"}),n.jsx("div",{className:"absolute inset-0 bg-black/60 hover:bg-black/70 transition-colors flex items-center justify-center",children:n.jsxs("span",{className:"text-white font-bold text-2xl",children:["+",M+1]})})]})]}),n.jsx(Ut,{open:c,onOpenChange:u,children:n.jsx(Bt,{className:"max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-lg font-semibold",children:["Todas as fotos (",r.length,")"]}),n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>u(!1),children:n.jsx(sr,{className:"h-5 w-5"})})]}),n.jsx("div",{className:"grid grid-cols-3 gap-3",children:r.map((z,q)=>n.jsx("div",{className:"aspect-square bg-surface rounded-lg overflow-hidden cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>b(q),children:n.jsx("img",{src:z.photo_url,alt:z.caption||`Foto ${q+1}`,className:"w-full h-full object-cover"})},z.id))})]})})}),n.jsx(Ut,{open:f,onOpenChange:p,children:n.jsx(Bt,{className:"max-w-4xl w-full h-[90vh] p-0 bg-black",children:n.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[n.jsx(K,{variant:"ghost",size:"icon",className:"absolute top-4 right-4 z-50 bg-black/50 hover:bg-black/70 text-white",onClick:()=>p(!1),children:n.jsx(sr,{className:"h-6 w-6"})}),n.jsx(K,{variant:"ghost",size:"icon",className:"absolute top-4 right-16 z-50 bg-black/50 hover:bg-black/70 text-white",onClick:()=>k(r[x].photo_url,r[x].caption),children:n.jsx(Ho,{className:"h-6 w-6"})}),r.length>1&&n.jsx(K,{variant:"ghost",size:"icon",className:"absolute left-4 z-50 bg-black/50 hover:bg-black/70 text-white",onClick:O,children:n.jsx(A1,{className:"h-8 w-8"})}),r.length>1&&n.jsx(K,{variant:"ghost",size:"icon",className:"absolute right-4 z-50 bg-black/50 hover:bg-black/70 text-white",onClick:L,children:n.jsx(Iu,{className:"h-8 w-8"})}),n.jsx("img",{src:(R=r[x])==null?void 0:R.photo_url,alt:(($=r[x])==null?void 0:$.caption)||"Foto do evento",className:"max-h-full max-w-full object-contain"}),n.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/50 text-white px-4 py-2 rounded-full text-sm",children:[x+1," / ",r.length]}),((Y=r[x])==null?void 0:Y.caption)&&n.jsx("div",{className:"absolute bottom-16 left-1/2 -translate-x-1/2 bg-black/50 text-white px-4 py-2 rounded-lg text-sm max-w-md text-center",children:r[x].caption})]})})}),n.jsx(qu,{open:_,onOpenChange:j,actionDescription:N})]})}function Aq({onBack:e,organizerId:t,onEventClick:r}){var ce,ne,he,Ae,Pe,Be,Ee;const[s,a]=v.useState("eventos"),[o,c]=v.useState([]),[u,f]=v.useState(!1),[p,x]=v.useState(!1),[w,_]=v.useState(!1),[j,N]=v.useState(""),[C,T]=v.useState(!1),[E,S]=v.useState(!1),[b,k]=v.useState(""),O=v.useRef(null),{organizersWithStories:L,toggleLike:P,markAsViewed:M,deleteStory:R}=mv(),{organizer:$,events:Y,customLinks:z,loading:q}=Cq(t),{updateOrganizerProfile:ee}=ti(),{user:H}=bt();_t(),Kn();const{isFollowing:re,loading:ae,toggleFollow:ie}=Eq(t);v.useEffect(()=>{s==="fotos"&&(async()=>{if(!t)return;const{data:Fe}=await U.from("events").select("*").eq("organizer_id",t).order("event_date",{ascending:!1});c(Fe||[])})()},[t,s]);const te=()=>{if(!$)return;const ue=`${Zm()}/${$.username}`;navigator.clipboard.writeText(ue).then(()=>{X.success("Link copiado!",{description:"O link da pgina foi copiado para a rea de transferncia"})}).catch(()=>{X.error("Erro ao copiar link")})},ye=async ue=>{var ze;const Fe=(ze=ue.target.files)==null?void 0:ze[0];if(!Fe||!H)return;const _e=Fe.type.toLowerCase();if(!["image/jpeg","image/jpg","image/png","image/webp","image/gif"].includes(_e)){X.error("Formato no suportado",{description:"Por favor, use imagens JPG, PNG ou WEBP. Se voc est no iPhone, abra a foto no app Fotos e compartilhe > Salvar imagem para converter automaticamente para JPG."});return}if(Fe.size>5*1024*1024){X.error("Arquivo muito grande",{description:"A imagem deve ter no mximo 5MB"});return}const be=new FileReader;be.onload=()=>{k(be.result),S(!0)},be.readAsDataURL(Fe)},ge=async ue=>{var Fe;if(H)try{f(!0),S(!1);const _e=(Fe=ue.name.split(".").pop())==null?void 0:Fe.toLowerCase(),Ze=Date.now(),be=`${H.id}/cover-${Ze}.${_e}`,{error:ze}=await U.storage.from("user-uploads").upload(be,ue,{upsert:!0});if(ze)throw ze;const{data:{publicUrl:He}}=U.storage.from("user-uploads").getPublicUrl(be);await ee({cover_image_url:He}),X.success("Capa atualizada com sucesso!"),window.location.reload()}catch(_e){console.error("Error uploading cover:",_e),X.error("Erro ao atualizar capa")}finally{f(!1)}},W=async()=>{if(H)try{x(!0),await ee({cover_image_url:null}),X.success("Capa removida com sucesso!"),window.location.reload()}catch(ue){console.error("Error removing cover:",ue),X.error("Erro ao remover capa")}finally{x(!1)}},J=ue=>{const Fe=new Date(ue),Ze=["Dom","Seg","Ter","Qua","Qui","Sex","Sb"][Fe.getDay()],be=Fe.getHours().toString().padStart(2,"0"),ze=Fe.getMinutes().toString().padStart(2,"0");return`${Ze}, ${be}:${ze}`};if(q)return n.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[n.jsxs("div",{className:"flex items-center gap-4 p-4",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Organizador"})]}),n.jsxs("div",{className:"px-4 pb-6 text-center space-y-4",children:[n.jsx(St,{className:"h-24 w-24 rounded-full mx-auto"}),n.jsx(St,{className:"h-6 w-48 mx-auto"}),n.jsx(St,{className:"h-4 w-64 mx-auto"}),n.jsx("div",{className:"flex justify-center gap-6",children:[1,2,3].map(ue=>n.jsxs("div",{className:"text-center",children:[n.jsx(St,{className:"h-6 w-12 mx-auto mb-1"}),n.jsx(St,{className:"h-3 w-16 mx-auto"})]},ue))})]})]});if(!$)return n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-muted-foreground mb-4",children:"Organizador no encontrado"}),n.jsx(K,{variant:"outline",onClick:e,children:"Voltar"})]})});const G=H&&$.user_id===H.id,se=[{id:"eventos",label:"Eventos",icon:Et},{id:"links",label:"Links",icon:Vr},{id:"fotos",label:"Fotos",icon:Cn},...G?[{id:"financeiro",label:"Financeiro",icon:Sn}]:[]];return n.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[n.jsxs("div",{className:"relative h-[200px] overflow-hidden",style:{backgroundImage:$.cover_image_url?`url(${$.cover_image_url})`:"linear-gradient(135deg, hsl(var(--primary)) 0%, hsl(var(--primary) / 0.8) 25%, hsl(220 70% 50%) 50%, hsl(200 70% 50%) 75%, hsl(var(--primary) / 0.6) 100%)",backgroundSize:"cover",backgroundPosition:"center"},children:[n.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:"rgba(0, 0, 0, 0.5)",zIndex:0}}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 pointer-events-none",style:{height:"120px",background:"linear-gradient(to top, hsl(var(--background)) 0%, hsl(var(--background) / 0.95) 40%, transparent 100%)",zIndex:1}}),n.jsxs("div",{className:"flex items-center justify-between p-4 relative",style:{zIndex:10},children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:e,className:"bg-black/20 hover:bg-black/40 backdrop-blur-sm",children:n.jsx(gt,{className:"h-5 w-5 text-white"})}),n.jsx(K,{variant:"ghost",size:"icon",onClick:te,className:"bg-black/20 hover:bg-black/40 backdrop-blur-sm",children:n.jsx(ks,{className:"h-5 w-5 text-white"})})]}),H&&$.user_id===H.id&&n.jsxs(n.Fragment,{children:[n.jsx("input",{ref:O,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp,image/gif",onChange:ye,className:"hidden"}),n.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",style:{zIndex:10},children:[$.cover_image_url&&n.jsx(K,{variant:"ghost",size:"icon",onClick:W,disabled:p,className:"bg-red-500/80 hover:bg-red-600/90 backdrop-blur-sm text-white",title:"Remover capa",children:p?n.jsx("div",{className:"h-5 w-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):n.jsx(Cn,{className:"h-5 w-5"})}),n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>{var ue;return(ue=O.current)==null?void 0:ue.click()},disabled:u,className:"bg-black/20 hover:bg-black/40 backdrop-blur-sm text-white",title:$.cover_image_url?"Alterar capa":"Adicionar capa",children:u?n.jsx("div",{className:"h-5 w-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):n.jsx(Cn,{className:"h-5 w-5"})})]})]})]}),n.jsxs("div",{className:"px-4 pb-6 text-center -mt-24 relative z-10",children:[n.jsx($t,{className:"h-24 w-24 mx-auto mb-4 border-4 border-background shadow-lg cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>{if(t){const ue=L.find(Fe=>Fe.id===t);ue&&ue.stories.length>0&&T(!0)}},children:$.avatar_url||(ce=$.profile)!=null&&ce.avatar_url?n.jsx(Kt,{src:$.avatar_url||((ne=$.profile)==null?void 0:ne.avatar_url),alt:$.page_title}):n.jsx(Vt,{className:"bg-primary text-primary-foreground text-2xl",children:$.page_title.charAt(0)})}),n.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:((he=$.profile)==null?void 0:he.display_name)||$.page_title}),n.jsx("p",{className:"text-muted-foreground max-w-sm mx-auto mb-4",children:((Ae=$.profile)==null?void 0:Ae.bio)||$.page_description||"Organizador de eventos"}),n.jsxs("div",{className:"flex justify-center gap-8 mb-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-lg font-semibold text-foreground",children:((Be=(Pe=$.stats)==null?void 0:Pe.followers_count)==null?void 0:Be.toLocaleString())||"0"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Seguidores"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-lg font-semibold text-foreground",children:((Ee=$.stats)==null?void 0:Ee.events_count)||Y.length}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Eventos"})]})]}),!H||$.user_id!==H.id?n.jsxs("div",{className:"flex justify-center gap-3",children:[n.jsx(K,{variant:"glow",size:"lg",className:"flex-1 max-w-[200px]",onClick:async()=>{H?await ie():(N("para seguir este organizador"),_(!0))},disabled:ae,children:ae?"Carregando...":re?n.jsxs(n.Fragment,{children:[n.jsx(Oj,{className:"h-4 w-4 mr-2"}),"Seguindo"]}):n.jsxs(n.Fragment,{children:[n.jsx(bm,{className:"h-4 w-4 mr-2"}),"Seguir"]})}),n.jsxs(K,{variant:"outline",size:"lg",onClick:te,children:[n.jsx(ks,{className:"h-4 w-4 mr-2"}),"Compartilhar"]})]}):n.jsx("div",{className:"flex justify-center",children:n.jsxs(K,{variant:"outline",size:"lg",onClick:te,children:[n.jsx(ks,{className:"h-4 w-4 mr-2"}),"Compartilhar minha pgina"]})})]}),n.jsx("div",{className:"px-4 mb-6 -mt-4 relative",style:{zIndex:10},children:n.jsx("div",{className:"flex gap-2 justify-center",children:se.map(ue=>{const Fe=ue.icon;return n.jsxs("button",{onClick:()=>a(ue.id),className:`flex-shrink-0 flex items-center gap-2 px-4 py-2 rounded-full border transition-all ${s===ue.id?"bg-primary text-primary-foreground border-primary":"bg-surface border-border text-muted-foreground hover:text-foreground hover:border-primary/50"}`,children:[n.jsx(Fe,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm font-medium",children:ue.label})]},ue.id)})})}),n.jsxs("div",{className:"px-4 max-w-md mx-auto",children:[s==="eventos"&&n.jsx("div",{className:"space-y-4",children:Y.length>0?Y.map(ue=>n.jsxs(je,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>r==null?void 0:r(ue.id),children:[n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:ue.image_url||"/placeholder.svg",alt:ue.title,className:"w-full h-32 object-cover"}),ue.is_live&&n.jsxs(dt,{className:"absolute top-2 right-2 bg-destructive text-destructive-foreground",children:[n.jsx("div",{className:"h-2 w-2 bg-white rounded-full animate-pulse mr-1"}),"AO VIVO"]})]}),n.jsxs(Ce,{className:"p-4",children:[n.jsx("h3",{className:"font-semibold text-foreground mb-1",children:ue.title}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[n.jsx(Et,{className:"h-3 w-3"}),n.jsx("span",{children:J(ue.event_date)})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(Rt,{className:"h-3 w-3"}),n.jsx("span",{children:ue.location}),n.jsx(er,{className:"h-3 w-3 ml-auto"}),n.jsx("span",{children:ue.current_attendees})]}),n.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Qa,{className:"h-3 w-3"}),n.jsx("span",{children:ue.likes_count||0})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Ds,{className:"h-3 w-3"}),n.jsx("span",{children:ue.comments_count||0})]})]})]})]},ue.id)):n.jsxs("div",{className:"text-center py-8",children:[n.jsx("p",{className:"text-muted-foreground",children:"Nenhum evento criado ainda."}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Os eventos aparecero aqui assim que forem criados."})]})}),s==="links"&&n.jsxs("div",{className:"space-y-3",children:[$.show_whatsapp&&$.whatsapp_url&&n.jsx(je,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ce,{className:"p-4",children:n.jsxs("a",{href:$.whatsapp_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-green-500 text-white",children:n.jsx(Ds,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:"WhatsApp"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Entre em contato"})]}),n.jsx(Vr,{className:"h-4 w-4 text-muted-foreground"})]})})}),$.show_instagram&&$.instagram_url&&n.jsx(je,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ce,{className:"p-4",children:n.jsxs("a",{href:$.instagram_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-gradient-to-br from-purple-600 via-pink-600 to-orange-500 text-white",children:n.jsx(Hi,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:"Instagram"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Siga no Instagram"})]}),n.jsx(Vr,{className:"h-4 w-4 text-muted-foreground"})]})})}),$.show_playlist&&$.playlist_url&&n.jsx(je,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ce,{className:"p-4",children:n.jsxs("a",{href:$.playlist_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-purple-600 text-white",children:n.jsx(su,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:"Playlist"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Oua nossa playlist"})]}),n.jsx(Vr,{className:"h-4 w-4 text-muted-foreground"})]})})}),$.show_location&&$.location_url&&n.jsx(je,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ce,{className:"p-4",children:n.jsxs("a",{href:$.location_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-red-500 text-white",children:n.jsx(Rt,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:"Localizao"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Veja no mapa"})]}),n.jsx(Vr,{className:"h-4 w-4 text-muted-foreground"})]})})}),$.show_website&&$.website_url&&n.jsx(je,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ce,{className:"p-4",children:n.jsxs("a",{href:$.website_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-blue-600 text-white",children:n.jsx(nu,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:"Site"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Visite nosso site"})]}),n.jsx(Vr,{className:"h-4 w-4 text-muted-foreground"})]})})}),z.length>0&&z.map(ue=>n.jsx(je,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ce,{className:"p-4",children:n.jsxs("a",{href:ue.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white text-sm font-bold",style:{backgroundColor:ue.color},children:ue.icon||ue.title.charAt(0)}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:ue.title}),n.jsx("p",{className:"text-sm text-muted-foreground truncate",children:ue.url})]}),n.jsx(Vr,{className:"h-4 w-4 text-muted-foreground"})]})})},ue.id)),!$.show_whatsapp&&!$.show_instagram&&!$.show_playlist&&!$.show_location&&!$.show_website&&z.length===0&&n.jsxs("div",{className:"text-center py-8",children:[n.jsx("p",{className:"text-muted-foreground",children:"Nenhum link adicionado ainda."}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Os links aparecero aqui quando forem adicionados."})]})]}),s==="fotos"&&n.jsx("div",{className:"space-y-6",children:o.length===0?n.jsx("div",{className:"text-center py-8",children:n.jsxs("div",{className:"mb-4",children:[n.jsx(Cn,{className:"h-12 w-12 text-muted-foreground mx-auto mb-2"}),n.jsx("p",{className:"text-muted-foreground",children:"O organizador ainda no adicionou fotos."})]})}):o.map(ue=>n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-foreground",children:ue.title}),n.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(ue.event_date).toLocaleDateString("pt-BR")})]}),n.jsx(Sq,{eventId:ue.id,organizerId:$.id})]},ue.id))}),s==="financeiro"&&G&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Dados Financeiros"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Gerencie suas informaes bancrias e fiscais para receber repasses"})]}),n.jsx(JA,{organizerId:$.id})]}),n.jsx(Separator,{className:"my-8"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Vendas de Ingressos"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Acompanhe suas vendas e repasses"})]}),n.jsx(ek,{organizerId:$.id})]})]})]}),C&&t&&L.find(ue=>ue.id===t)&&n.jsx(fv,{open:C,onClose:()=>T(!1),organizer:L.find(ue=>ue.id===t),initialStoryIndex:0,onLike:P,onDelete:R,onMarkAsViewed:M}),n.jsx("footer",{className:"mt-8 pb-6 text-center border-t border-border pt-6",children:n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Esse site foi desenvolvido pela ",n.jsx("a",{href:"https://flatgrowth.com.br/",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Flat Company"})]})}),n.jsx(qu,{open:w,onOpenChange:_,actionDescription:j}),n.jsx(Pv,{open:E,onOpenChange:S,imageSrc:b,onCropComplete:ge,aspectRatio:16/9})]})}function kq(){const[e,t]=v.useState([]),[r,s]=v.useState(!1),a=async()=>{try{s(!0);const{data:o,error:c}=await U.from("organizers").select(`
          *,
          stats:organizer_stats(
            followers_count,
            events_count
          )
        `).eq("is_page_active",!0).order("created_at",{ascending:!1});if(c)throw c;const u=await Promise.all((o||[]).map(async f=>{const[p,x,w]=await Promise.all([U.from("profiles").select("display_name, avatar_url, bio").eq("user_id",f.user_id).maybeSingle(),U.from("followers").select("id",{count:"exact",head:!0}).eq("organizer_id",f.id),U.from("events").select("id",{count:"exact",head:!0}).eq("organizer_id",f.id)]),_=p.data,j=x.count??0,N=w.count??0;return{...f,profile:_,verified:Math.random()>.5,category:f.page_subtitle||"Entretenimento",stats:{followers_count:j,events_count:N}}}));t(u)}catch(o){console.error("Error fetching organizers:",o)}finally{s(!1)}};return v.useEffect(()=>{a()},[]),v.useEffect(()=>{const o=U.channel("realtime-organizer-list").on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles"},c=>{const u=c.new;t(f=>f.map(p=>{var x,w,_;return p.user_id===u.user_id?{...p,profile:{...p.profile||{},display_name:u.display_name??((x=p.profile)==null?void 0:x.display_name),avatar_url:u.avatar_url??((w=p.profile)==null?void 0:w.avatar_url),bio:u.bio??((_=p.profile)==null?void 0:_.bio)}}:p}))}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"organizers"},c=>{const u=c.new;t(f=>f.map(p=>p.id===u.id?{...p,page_title:u.page_title??p.page_title,avatar_url:u.avatar_url??p.avatar_url,page_description:u.page_description??p.page_description,updated_at:u.updated_at??p.updated_at}:p))}).on("postgres_changes",{event:"INSERT",schema:"public",table:"followers"},c=>{const u=c.new;t(f=>f.map(p=>{var x,w;if(p.id===u.organizer_id){const _=((x=p.stats)==null?void 0:x.followers_count)??0;return{...p,stats:{followers_count:_+1,events_count:((w=p.stats)==null?void 0:w.events_count)??0}}}return p}))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"followers"},c=>{const u=c.old;t(f=>f.map(p=>{var x,w;if(p.id===u.organizer_id){const _=((x=p.stats)==null?void 0:x.followers_count)??0;return{...p,stats:{followers_count:Math.max(0,_-1),events_count:((w=p.stats)==null?void 0:w.events_count)??0}}}return p}))}).on("postgres_changes",{event:"INSERT",schema:"public",table:"events"},c=>{const u=c.new;t(f=>f.map(p=>{var x,w;if(p.id===u.organizer_id){const _=((x=p.stats)==null?void 0:x.events_count)??0;return{...p,stats:{followers_count:((w=p.stats)==null?void 0:w.followers_count)??0,events_count:_+1}}}return p}))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"events"},c=>{const u=c.old;t(f=>f.map(p=>{var x,w;if(p.id===u.organizer_id){const _=((x=p.stats)==null?void 0:x.events_count)??0;return{...p,stats:{followers_count:((w=p.stats)==null?void 0:w.followers_count)??0,events_count:Math.max(0,_-1)}}}return p}))}).subscribe();return()=>{U.removeChannel(o)}},[]),{organizers:e,loading:r,fetchOrganizers:a}}function Tq({onBack:e,onOrganizerClick:t}){const[r,s]=v.useState(""),[a,o]=v.useState("todos"),{organizers:c,loading:u}=kq(),f=[{id:"todos",label:"Todos"},{id:"festas",label:" Festas"},{id:"shows",label:" Shows"},{id:"fitness",label:" Fitness"},{id:"igreja",label:" Igreja"},{id:"cursos",label:" Cursos"},{id:"bares",label:" Bares"},{id:"boates",label:" Boates"},{id:"esportes",label:" Esportes"}],p=c.filter(x=>{var j;const w=x.page_title.toLowerCase().includes(r.toLowerCase())||(((j=x.profile)==null?void 0:j.bio)||"").toLowerCase().includes(r.toLowerCase()),_=a==="todos"||(x.category||"")===a;return w&&_});return u?n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b border-border",children:n.jsxs("div",{className:"flex items-center justify-between p-4 max-w-md mx-auto",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Organizadores"}),n.jsx("div",{className:"w-10"})]})}),n.jsx("div",{className:"p-4 max-w-md mx-auto pb-20 space-y-4",children:[1,2,3,4].map(x=>n.jsx("div",{className:"p-4 space-y-3",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(St,{className:"h-12 w-12 rounded-full"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx(St,{className:"h-4 w-32"}),n.jsx(St,{className:"h-4 w-full"}),n.jsx(St,{className:"h-4 w-24"})]})]})},x))})]}):n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b border-border",children:n.jsxs("div",{className:"flex items-center justify-between p-4 max-w-md mx-auto",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Organizadores"}),n.jsx("div",{className:"w-10"})]})}),n.jsxs("div",{className:"p-4 max-w-md mx-auto pb-20",children:[n.jsx("div",{className:"mb-4",children:n.jsxs("div",{className:"relative",children:[n.jsx(au,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(we,{type:"text",placeholder:"Buscar organizadores...",value:r,onChange:x=>s(x.target.value),className:"pl-10"})]})}),n.jsx("div",{className:"mb-6",children:n.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:f.map(x=>n.jsx("button",{onClick:()=>o(x.id),className:`flex-shrink-0 px-4 py-2 rounded-full border transition-all ${a===x.id?"bg-primary text-primary-foreground border-primary":"bg-surface border-border text-muted-foreground hover:text-foreground hover:border-primary/50"}`,children:n.jsx("span",{className:"text-sm font-medium",children:x.label})},x.id))})}),n.jsx("div",{className:"space-y-4",children:p.map(x=>{var w,_,j,N,C;return n.jsx("div",{onClick:()=>t(x.id),className:"p-4 bg-card rounded-lg border border-border hover:border-primary/30 transition-all cursor-pointer event-card",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"avatar-story",children:n.jsxs($t,{className:"h-12 w-12",children:[n.jsx(Kt,{src:((w=x.profile)==null?void 0:w.avatar_url)||x.avatar_url}),n.jsx(Vt,{className:"bg-surface text-lg font-bold",children:x.page_title.charAt(0)})]})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h3",{className:"font-semibold text-foreground line-clamp-1",children:((_=x.profile)==null?void 0:_.display_name)||x.page_title}),x.verified&&n.jsx(dt,{variant:"secondary",className:"text-xs",children:" Verificado"})]}),n.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:((j=x.profile)==null?void 0:j.bio)||x.page_description||"Organizador de eventos"}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(er,{className:"h-3 w-3"}),n.jsxs("span",{children:[(((N=x.stats)==null?void 0:N.followers_count)||0).toLocaleString()," seguidores"]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Et,{className:"h-3 w-3"}),n.jsxs("span",{children:[((C=x.stats)==null?void 0:C.events_count)||0," eventos"]})]})]}),x.category&&n.jsx("div",{className:"mt-2",children:n.jsx(dt,{variant:"outline",className:"text-xs",children:x.category.charAt(0).toUpperCase()+x.category.slice(1)})})]})]})},x.id)})}),p.length===0&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx(au,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"Nenhum organizador encontrado"}),n.jsx("p",{className:"text-muted-foreground",children:"Tente ajustar os filtros ou buscar por outros termos"})]})]})]})}var up="Checkbox",[Iq]=Mr(up),[Rq,Ov]=Iq(up);function Pq(e){const{__scopeCheckbox:t,checked:r,children:s,defaultChecked:a,disabled:o,form:c,name:u,onCheckedChange:f,required:p,value:x="on",internal_do_not_use_render:w}=e,[_,j]=Os({prop:r,defaultProp:a??!1,onChange:f,caller:up}),[N,C]=v.useState(null),[T,E]=v.useState(null),S=v.useRef(!1),b=N?!!c||!!N.closest("form"):!0,k={checked:_,disabled:o,setChecked:j,control:N,setControl:C,name:u,form:c,value:x,hasConsumerStoppedPropagationRef:S,required:p,defaultChecked:Ui(a)?!1:a,isFormControl:b,bubbleInput:T,setBubbleInput:E};return n.jsx(Rq,{scope:t,...k,children:Oq(w)?w(k):s})}var tk="CheckboxTrigger",rk=v.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...s},a)=>{const{control:o,value:c,disabled:u,checked:f,required:p,setControl:x,setChecked:w,hasConsumerStoppedPropagationRef:_,isFormControl:j,bubbleInput:N}=Ov(tk,e),C=tt(a,x),T=v.useRef(f);return v.useEffect(()=>{const E=o==null?void 0:o.form;if(E){const S=()=>w(T.current);return E.addEventListener("reset",S),()=>E.removeEventListener("reset",S)}},[o,w]),n.jsx(qe.button,{type:"button",role:"checkbox","aria-checked":Ui(f)?"mixed":f,"aria-required":p,"data-state":ok(f),"data-disabled":u?"":void 0,disabled:u,value:c,...s,ref:C,onKeyDown:Ie(t,E=>{E.key==="Enter"&&E.preventDefault()}),onClick:Ie(r,E=>{w(S=>Ui(S)?!0:!S),N&&j&&(_.current=E.isPropagationStopped(),_.current||E.stopPropagation())})})});rk.displayName=tk;var Dv=v.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:s,checked:a,defaultChecked:o,required:c,disabled:u,value:f,onCheckedChange:p,form:x,...w}=e;return n.jsx(Pq,{__scopeCheckbox:r,checked:a,defaultChecked:o,disabled:u,required:c,onCheckedChange:p,name:s,form:x,value:f,internal_do_not_use_render:({isFormControl:_})=>n.jsxs(n.Fragment,{children:[n.jsx(rk,{...w,ref:t,__scopeCheckbox:r}),_&&n.jsx(ik,{__scopeCheckbox:r})]})})});Dv.displayName=up;var nk="CheckboxIndicator",sk=v.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:s,...a}=e,o=Ov(nk,r);return n.jsx(Hr,{present:s||Ui(o.checked)||o.checked===!0,children:n.jsx(qe.span,{"data-state":ok(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});sk.displayName=nk;var ak="CheckboxBubbleInput",ik=v.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:s,hasConsumerStoppedPropagationRef:a,checked:o,defaultChecked:c,required:u,disabled:f,name:p,value:x,form:w,bubbleInput:_,setBubbleInput:j}=Ov(ak,e),N=tt(r,j),C=Gu(o),T=Ou(s);v.useEffect(()=>{const S=_;if(!S)return;const b=window.HTMLInputElement.prototype,O=Object.getOwnPropertyDescriptor(b,"checked").set,L=!a.current;if(C!==o&&O){const P=new Event("click",{bubbles:L});S.indeterminate=Ui(o),O.call(S,Ui(o)?!1:o),S.dispatchEvent(P)}},[_,C,o,a]);const E=v.useRef(Ui(o)?!1:o);return n.jsx(qe.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??E.current,required:u,disabled:f,name:p,value:x,form:w,...t,tabIndex:-1,ref:N,style:{...t.style,...T,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});ik.displayName=ak;function Oq(e){return typeof e=="function"}function Ui(e){return e==="indeterminate"}function ok(e){return Ui(e)?"indeterminate":e?"checked":"unchecked"}const lk=v.forwardRef(({className:e,...t},r)=>n.jsx(Dv,{ref:r,className:Le("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:n.jsx(sk,{className:Le("flex items-center justify-center text-current"),children:n.jsx(Xn,{className:"h-4 w-4"})})}));lk.displayName=Dv.displayName;function ck({onBack:e,eventId:t}){const{user:r}=bt(),[s,a]=v.useState(null),[o,c]=v.useState(!0),[u,f]=v.useState({name:"",email:(r==null?void 0:r.email)||"",phone:""}),[p,x]=v.useState({}),[w,_]=v.useState(!1),[j,N]=v.useState(!1);v.useEffect(()=>{t&&C()},[t]);const C=async()=>{try{c(!0);const{data:b,error:k}=await U.from("events").select("*").eq("id",t).single();if(k)throw k;a(b)}catch(b){console.error("Error fetching event:",b),X.error("Erro ao carregar evento")}finally{c(!1)}},T=(b,k)=>{f(O=>({...O,[b]:k}))},E=(b,k)=>{if(k){const O=new FileReader;O.onload=L=>{var M;const P=(M=L.target)==null?void 0:M.result;x(R=>({...R,[b]:P})),T(b,k.name)},O.readAsDataURL(k)}},S=async b=>{if(b.preventDefault(),!r||!t){X.error("Voc precisa estar logado");return}try{N(!0);const k={};((s==null?void 0:s.form_fields)||[]).forEach(P=>{(P.type==="photo"||P.type==="file")&&p[P.id]?k[P.label]=p[P.id]:u[P.id]&&(k[P.label]=u[P.id])});const{error:L}=await U.from("event_registrations").insert({event_id:t,user_id:r.id,user_name:u.name,user_email:u.email,user_phone:u.phone||null,registration_data:k,status:"confirmed"});if(L)throw L;X.success("Cadastro realizado com sucesso!"),_(!0)}catch(k){console.error("Error submitting registration:",k),k.code==="23505"?X.error("Voc j est cadastrado neste evento"):X.error("Erro ao realizar cadastro")}finally{N(!1)}};return o?n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:n.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})}):s?w?n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:n.jsx(je,{className:"w-full max-w-md mx-4",children:n.jsxs(Ce,{className:"p-6 text-center space-y-4",children:[n.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx(Xn,{className:"h-8 w-8 text-green-600"})}),n.jsx("h2",{className:"text-xl font-semibold",children:"Cadastro Realizado!"}),n.jsx("p",{className:"text-muted-foreground",children:"Seu cadastro foi enviado com sucesso. Voc receber um e-mail de confirmao em breve."}),n.jsx(K,{onClick:e,className:"w-full",children:"Voltar ao Evento"})]})})}):n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b border-border",children:n.jsxs("div",{className:"flex items-center justify-between p-4 max-w-md mx-auto",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Cadastro no Evento"}),n.jsx("div",{className:"w-10"})]})}),n.jsxs("div",{className:"p-4 max-w-md mx-auto pb-20",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-bold mb-2",children:s.title}),n.jsx("p",{className:"text-muted-foreground text-sm",children:"Preencha os dados abaixo para confirmar sua presena no evento."})]}),n.jsxs("form",{onSubmit:S,className:"space-y-4",children:[n.jsx(je,{children:n.jsxs(Ce,{className:"p-4 space-y-4",children:[n.jsxs("div",{children:[n.jsxs(de,{children:["Nome Completo ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(we,{type:"text",value:u.name,onChange:b=>T("name",b.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsxs(de,{children:["Email ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(we,{type:"email",value:u.email,onChange:b=>T("email",b.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsx(de,{children:"Telefone"}),n.jsx(we,{type:"tel",placeholder:"(11) 99999-9999",value:u.phone,onChange:b=>T("phone",b.target.value)})]})]})}),s.form_fields&&Array.isArray(s.form_fields)&&s.form_fields.length>0&&n.jsx(n.Fragment,{children:s.form_fields.map(b=>{var k,O;return n.jsx(je,{children:n.jsx(Ce,{className:"p-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs(de,{className:"flex items-center gap-1",children:[b.label,b.required&&n.jsx("span",{className:"text-destructive",children:"*"})]}),b.type==="text"&&n.jsx(we,{type:"text",value:u[b.id]||"",onChange:L=>T(b.id,L.target.value),required:b.required}),b.type==="email"&&n.jsx(we,{type:"email",value:u[b.id]||"",onChange:L=>T(b.id,L.target.value),required:b.required}),b.type==="phone"&&n.jsx(we,{type:"tel",value:u[b.id]||"",onChange:L=>T(b.id,L.target.value),required:b.required}),b.type==="date"&&n.jsx(we,{type:"date",value:u[b.id]||"",onChange:L=>T(b.id,L.target.value),required:b.required}),b.type==="select"&&n.jsxs(Zs,{value:u[b.id]||"",onValueChange:L=>T(b.id,L),children:[n.jsx(Es,{children:n.jsx(Js,{placeholder:"Selecione uma opo"})}),n.jsx(Ss,{children:(k=b.options)==null?void 0:k.map((L,P)=>n.jsx(Ht,{value:L,children:L},P))})]}),b.type==="checkbox"&&n.jsx("div",{className:"space-y-2",children:(O=b.options)==null?void 0:O.map((L,P)=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(lk,{id:`${b.id}-${P}`,checked:(u[b.id]||[]).includes(L),onCheckedChange:M=>{const R=u[b.id]||[],$=M?[...R,L]:R.filter(Y=>Y!==L);T(b.id,$)}}),n.jsx(de,{htmlFor:`${b.id}-${P}`,className:"font-normal cursor-pointer",children:L})]},P))}),b.type==="photo"&&n.jsx("div",{className:"space-y-2",children:p[b.id]?n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:p[b.id],alt:"Foto enviada",className:"w-full h-32 object-cover rounded border"}),n.jsx(K,{type:"button",variant:"secondary",size:"sm",className:"absolute top-2 right-2",onClick:()=>{x(L=>({...L,[b.id]:""})),T(b.id,"")},children:"Remover"})]}):n.jsxs("label",{className:"flex flex-col items-center justify-center h-24 border-2 border-dashed border-border rounded cursor-pointer hover:border-primary/50 transition-colors",children:[n.jsx(Ms,{className:"h-6 w-6 text-muted-foreground mb-1"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"Enviar Foto"}),n.jsx("input",{type:"file",accept:"image/*",onChange:L=>{var M;const P=(M=L.target.files)==null?void 0:M[0];P&&E(b.id,P)},className:"hidden",required:b.required})]})}),b.type==="file"&&n.jsx("div",{className:"space-y-2",children:n.jsxs("label",{className:"flex flex-col items-center justify-center h-24 border-2 border-dashed border-border rounded cursor-pointer hover:border-primary/50 transition-colors",children:[n.jsx(Ms,{className:"h-6 w-6 text-muted-foreground mb-1"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:u[b.id]||"Enviar Arquivo"}),n.jsx("input",{type:"file",onChange:L=>{var M;const P=(M=L.target.files)==null?void 0:M[0];P&&T(b.id,P.name)},className:"hidden",required:b.required})]})})]})})},b.id)})}),n.jsx("div",{className:"pt-4",children:n.jsx(K,{type:"submit",className:"w-full btn-glow",disabled:j,children:j?"Enviando...":"Confirmar Cadastro"})})]})]})]}):n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:n.jsx(je,{className:"w-full max-w-md mx-4",children:n.jsxs(Ce,{className:"p-6 text-center",children:[n.jsx("p",{className:"text-muted-foreground",children:"Evento no encontrado"}),n.jsx(K,{onClick:e,className:"mt-4",children:"Voltar"})]})})})}function Dq(){const e=_t(),[t,r]=v.useState("home"),[s,a]=v.useState(null),[o,c]=v.useState(null),[u,f]=v.useState(null),[p,x]=v.useState("feed"),[w,_]=v.useState(null),{user:j,userRole:N,loading:C}=bt(),{setTheme:T}=Q1();v.useEffect(()=>{!C&&!j&&e("/auth",{replace:!0})},[j,C,e]),v.useEffect(()=>{(async()=>{if(!j||C||N!=="organizer")return;const{data:Y}=await U.from("organizers").select("preferred_theme").eq("user_id",j.id).maybeSingle();if(Y!=null&&Y.preferred_theme){const z=Y.preferred_theme;T(z)}})()},[j,N,C,T]),v.useEffect(()=>{(async()=>{if(!(!j||C||N===null||window.location.pathname.includes("onboarding")))try{const{data:z,error:q}=await U.from("profiles").select("username").eq("user_id",j.id).maybeSingle();if(q){console.error("Error fetching profile:",q);return}if(N==="organizer"){const{data:ee}=await U.from("organizers").select("id, username").eq("user_id",j.id).maybeSingle();(!ee||!ee.username)&&e("/organizer-onboarding",{replace:!0})}else N==="user"&&(!z||!z.username)&&e("/user-onboarding",{replace:!0})}catch(z){console.error("Error checking onboarding:",z)}})()},[j,N,C,e]);const E=Kn();v.useEffect(()=>{const $=E.state||null;$!=null&&$.initialTab&&(r($.initialTab),e(E.pathname,{replace:!0,state:{}}))},[E,e]);const S=$=>{$==="live-events"?x("liveEvents"):$==="register"?x("eventRegistration"):$==="registrations"?x("eventRegistrations"):(a($),x("eventDetails"))},b=()=>{x("findFriends")},k=$=>{if(console.log("handleOrganizerClick chamado com ID:",$),!$){console.error("ID do organizador est vazio!");return}c($),x("organizerProfile")},O=()=>{x("organizersList")},L=$=>{f($)},P=$=>{_($),x("editEvent")},M=()=>{x("feed"),a(null),c(null),_(null)};if(C)return n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Carregando..."})]})});const R=()=>{switch(t){case"home":switch(p){case"eventDetails":return n.jsx(VS,{onBack:M,eventId:s,onRegister:()=>{x("eventRegistration")},onManageRegistrations:()=>{x("eventRegistrations")},onViewAttendances:()=>{x("eventAttendances")},onFindFriends:b,onEdit:P});case"editEvent":return n.jsx(b0,{onBack:M,eventId:w||void 0});case"findFriends":return n.jsx(u0,{onBack:M});case"liveEvents":return n.jsx(Nq,{onBack:M,onEventClick:S});case"organizerProfile":return n.jsx(Aq,{onBack:M,organizerId:o||void 0,onEventClick:S});case"organizersList":return n.jsx(Tq,{onBack:M,onOrganizerClick:k});case"eventRegistration":return n.jsx(ck,{onBack:M,eventId:s||void 0});case"eventRegistrations":return n.jsx(Tv,{onBack:M,eventId:s||void 0});case"eventAttendances":return n.jsx(Iv,{onBack:M,eventId:s||void 0});default:return n.jsx(qb,{onEventClick:S,onFindFriends:b,onOrganizerClick:k,onShowOrganizers:O,onStoryClick:L,userType:N||"user"})}case"create":return N==="organizer"?n.jsx(b0,{onBack:()=>r("home")}):(r("home"),null);case"friends":return N==="user"?n.jsx(u0,{onBack:()=>r("home")}):(r("home"),null);case"profile":return N==="organizer"?n.jsx(nq,{}):n.jsx(_q,{userType:N||"user"});default:return n.jsx(qb,{onEventClick:S,onFindFriends:b,onOrganizerClick:k,onShowOrganizers:O,onStoryClick:L,userType:N||"user"})}};return n.jsxs("div",{className:"min-h-screen bg-background",children:[R(),n.jsx(sL,{activeTab:t,onTabChange:r,userType:N||"user"})]})}function Mq({eventId:e,organizerId:t}){var R,$,Y;const[r,s]=v.useState([]),[a,o]=v.useState(!0),[c,u]=v.useState(!1),[f,p]=v.useState(!1),[x,w]=v.useState(0),[_,j]=v.useState(!1),[N,C]=v.useState(""),{user:T}=bt();if(_t(),Kn(),v.useEffect(()=>{(async()=>{try{console.log("Buscando fotos para:",{eventId:e,organizerId:t});const{data:q,error:ee}=await U.from("organizer_photos").select("*").eq("organizer_id",t).eq("event_id",e).eq("is_active",!0).order("created_at",{ascending:!1});if(console.log("Fotos encontradas:",q),ee)throw console.error("Erro ao buscar fotos:",ee),ee;s(q||[])}catch(q){console.error("Error fetching event photos:",q)}finally{o(!1)}})()},[e,t]),a)return n.jsx("div",{className:"grid grid-cols-2 gap-2",children:[1,2,3,4].map(z=>n.jsx(St,{className:"aspect-square rounded-lg"},z))});if(r.length===0)return n.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Nenhuma foto deste evento ainda"});const E=z=>{if(!T){C("para ver as fotos ampliadas"),j(!0);return}w(z),p(!0)},S=()=>{if(!T){C("para ver todas as fotos"),j(!0);return}u(!0)},b=z=>{w(z),u(!1),p(!0)},k=async(z,q)=>{try{const H=await(await fetch(z)).blob(),re=window.URL.createObjectURL(H),ae=document.createElement("a");ae.href=re,ae.download=q||"foto-evento.jpg",document.body.appendChild(ae),ae.click(),document.body.removeChild(ae),window.URL.revokeObjectURL(re),X.success("Foto baixada com sucesso!")}catch(ee){console.error("Error downloading photo:",ee),X.error("Erro ao baixar a foto")}},O=()=>{w(z=>z>0?z-1:r.length-1)},L=()=>{w(z=>z<r.length-1?z+1:0)},P=r.slice(0,3),M=r.length-3;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[P.map((z,q)=>n.jsx("div",{className:"aspect-square bg-surface rounded-lg overflow-hidden relative group cursor-pointer",onClick:()=>E(q),children:n.jsx("img",{src:z.photo_url,alt:z.caption||"Foto do evento",className:"w-full h-full object-cover hover:scale-105 transition-transform"})},z.id)),M>0&&n.jsxs("div",{className:"aspect-square bg-surface rounded-lg overflow-hidden relative cursor-pointer",onClick:S,children:[n.jsx("img",{src:r[3].photo_url,alt:"Mais fotos",className:"w-full h-full object-cover"}),n.jsx("div",{className:"absolute inset-0 bg-black/60 hover:bg-black/70 transition-colors flex items-center justify-center",children:n.jsxs("span",{className:"text-white font-bold text-2xl",children:["+",M+1]})})]})]}),n.jsx(Ut,{open:c,onOpenChange:u,children:n.jsx(Bt,{className:"max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-lg font-semibold",children:["Todas as fotos (",r.length,")"]}),n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>u(!1),children:n.jsx(sr,{className:"h-5 w-5"})})]}),n.jsx("div",{className:"grid grid-cols-3 gap-3",children:r.map((z,q)=>n.jsx("div",{className:"aspect-square bg-surface rounded-lg overflow-hidden cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>b(q),children:n.jsx("img",{src:z.photo_url,alt:z.caption||`Foto ${q+1}`,className:"w-full h-full object-cover"})},z.id))})]})})}),n.jsx(Ut,{open:f,onOpenChange:p,children:n.jsx(Bt,{className:"max-w-4xl w-full h-[90vh] p-0 bg-black",children:n.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[n.jsx(K,{variant:"ghost",size:"icon",className:"absolute top-4 right-4 z-50 bg-black/50 hover:bg-black/70 text-white",onClick:()=>p(!1),children:n.jsx(sr,{className:"h-6 w-6"})}),n.jsx(K,{variant:"ghost",size:"icon",className:"absolute top-4 right-16 z-50 bg-black/50 hover:bg-black/70 text-white",onClick:()=>k(r[x].photo_url,r[x].caption),children:n.jsx(Ho,{className:"h-6 w-6"})}),r.length>1&&n.jsx(K,{variant:"ghost",size:"icon",className:"absolute left-4 z-50 bg-black/50 hover:bg-black/70 text-white",onClick:O,children:n.jsx(A1,{className:"h-8 w-8"})}),r.length>1&&n.jsx(K,{variant:"ghost",size:"icon",className:"absolute right-4 z-50 bg-black/50 hover:bg-black/70 text-white",onClick:L,children:n.jsx(Iu,{className:"h-8 w-8"})}),n.jsx("img",{src:(R=r[x])==null?void 0:R.photo_url,alt:(($=r[x])==null?void 0:$.caption)||"Foto do evento",className:"max-h-full max-w-full object-contain"}),n.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/50 text-white px-4 py-2 rounded-full text-sm",children:[x+1," / ",r.length]}),((Y=r[x])==null?void 0:Y.caption)&&n.jsx("div",{className:"absolute bottom-16 left-1/2 -translate-x-1/2 bg-black/50 text-white px-4 py-2 rounded-lg text-sm max-w-md text-center",children:r[x].caption})]})})}),n.jsx(qu,{open:_,onOpenChange:j,actionDescription:N})]})}function Lq(){var ae,ie,te,ye,ge;const{slug:e}=hl(),t=_t();Kn();const{user:r}=bt(),[s,a]=v.useState("eventos"),[o,c]=v.useState(null),[u,f]=v.useState([]),[p,x]=v.useState([]),[w,_]=v.useState([]),[j,N]=v.useState(!0),[C,T]=v.useState(!1),[E,S]=v.useState(!1),[b,k]=v.useState(!1),[O,L]=v.useState(""),[P,M]=v.useState(!1),{organizersWithStories:R,toggleLike:$,markAsViewed:Y,deleteStory:z}=mv();v.useEffect(()=>{s==="fotos"&&o&&(async()=>{if(!o)return;const{data:J}=await U.from("events").select("*").eq("organizer_id",o.id).order("event_date",{ascending:!1});x(J||[])})()},[s,o]),v.useEffect(()=>((async()=>{if(e)try{N(!0);const{data:J,error:G}=await U.from("organizers").select("*").eq("username",e).eq("is_page_active",!0).maybeSingle();if(G)throw G;if(!J){t("/404");return}const se=J.preferred_theme||"dark",ce=document.documentElement;if(ce.classList.remove("dark","light"),ce.classList.add(se),r&&J.user_id===r.id?S(!0):S(!1),r){const{data:ue}=await U.from("followers").select("id").eq("user_id",r.id).eq("organizer_id",J.id).maybeSingle();T(!!ue)}const{data:ne}=await U.from("profiles").select("display_name, avatar_url, bio").eq("user_id",J.user_id).maybeSingle(),{data:he}=await U.from("organizer_stats").select("*").eq("organizer_id",J.id).maybeSingle(),Ae={...J,profile:ne||void 0,stats:he||{followers_count:0,events_count:0,average_rating:0}};c(Ae);const{data:Pe}=await U.from("events").select("*").eq("organizer_id",J.id).eq("status","upcoming").order("event_date",{ascending:!0}),Be=await Promise.all((Pe||[]).map(async ue=>{const{count:Fe}=await U.from("event_likes").select("*",{count:"exact",head:!0}).eq("event_id",ue.id),{count:_e}=await U.from("event_comments").select("*",{count:"exact",head:!0}).eq("event_id",ue.id);return{...ue,likes_count:Fe||0,comments_count:_e||0}}));f(Be);const{data:Ee}=await U.from("custom_links").select("*").eq("organizer_id",J.id).eq("is_active",!0).order("sort_order",{ascending:!0});_(Ee||[])}catch(J){console.error("Error fetching organizer data:",J)}finally{N(!1)}})(),()=>{const J=localStorage.getItem("theme")||"dark",G=document.documentElement;G.classList.remove("dark","light"),G.classList.add(J)}),[e,r,t]),v.useEffect(()=>{if(!o)return;const W=U.channel("realtime-public-organizer-profile").on("postgres_changes",{event:"UPDATE",schema:"public",table:"organizers",filter:`id=eq.${o.id}`},J=>{const G=J.new;c(se=>se&&{...se,...G})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles",filter:`user_id=eq.${o.user_id}`},J=>{const G=J.new;c(se=>se&&{...se,profile:{display_name:G.display_name,avatar_url:G.avatar_url,bio:G.bio}})}).subscribe();return()=>{U.removeChannel(W)}},[o==null?void 0:o.id,o==null?void 0:o.user_id]);const q=async()=>{if(!r){L("para seguir este organizador"),k(!0);return}if(o)try{if(C){const{error:W}=await U.from("followers").delete().eq("user_id",r.id).eq("organizer_id",o.id);if(W)throw W;T(!1),X.success("Voc deixou de seguir este organizador")}else{const{error:W}=await U.from("followers").insert({user_id:r.id,organizer_id:o.id});if(W)throw W;T(!0),X.success("Voc est seguindo este organizador!")}}catch(W){console.error("Error following/unfollowing:",W),X.error("Erro ao processar sua solicitao")}},ee=()=>{if(!o)return;const W=`${Zm()}/${o.username}`;navigator.clipboard.writeText(W).then(()=>{X.success("Link copiado!",{description:"O link da pgina foi copiado para a rea de transferncia"})}).catch(()=>{X.error("Erro ao copiar link")})},H=W=>{const J=new Date(W),se=["Dom","Seg","Ter","Qua","Qui","Sex","Sb"][J.getDay()],ce=J.getHours().toString().padStart(2,"0"),ne=J.getMinutes().toString().padStart(2,"0");return`${se}, ${ce}:${ne}`},re=[{id:"eventos",label:"Eventos",icon:Et},{id:"links",label:"Links",icon:Vr},{id:"fotos",label:"Fotos",icon:Cn}];return j?n.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[n.jsxs("div",{className:"flex items-center justify-between p-4",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>t("/"),children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Organizador"}),n.jsx("div",{className:"w-10"})]}),n.jsxs("div",{className:"px-4 pb-6 text-center space-y-4",children:[n.jsx(St,{className:"h-24 w-24 rounded-full mx-auto"}),n.jsx(St,{className:"h-6 w-48 mx-auto"}),n.jsx(St,{className:"h-4 w-64 mx-auto"})]})]}):o?n.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[n.jsxs("div",{className:"relative h-[200px] overflow-hidden",style:{backgroundImage:o.cover_image_url?`url(${o.cover_image_url})`:"linear-gradient(135deg, hsl(var(--primary)) 0%, hsl(var(--primary) / 0.8) 25%, hsl(220 70% 50%) 50%, hsl(200 70% 50%) 75%, hsl(var(--primary) / 0.6) 100%)",backgroundSize:"cover",backgroundPosition:"center"},children:[n.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:"rgba(0, 0, 0, 0.5)",zIndex:0}}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 pointer-events-none",style:{height:"120px",background:"linear-gradient(to top, hsl(var(--background)) 0%, hsl(var(--background) / 0.95) 40%, transparent 100%)",zIndex:1}}),n.jsxs("div",{className:"flex items-center justify-between p-4 relative",style:{zIndex:10},children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>t("/"),className:"bg-black/20 hover:bg-black/40 backdrop-blur-sm",children:n.jsx(gt,{className:"h-5 w-5 text-white"})}),n.jsx("h1",{className:"text-lg font-semibold text-white",children:"Organizador"}),n.jsx(K,{variant:"ghost",size:"icon",onClick:ee,className:"bg-black/20 hover:bg-black/40 backdrop-blur-sm",children:n.jsx(ks,{className:"h-5 w-5 text-white"})})]})]}),n.jsxs("div",{className:"px-4 pb-6 text-center -mt-24 relative z-10",children:[(()=>{var G,se,ce,ne;const W=R.find(he=>he.id===o.id),J=W&&W.stories.length>0;return console.log("Debug Stories:",{organizerId:o.id,organizersWithStories:R,currentOrganizerStories:W,hasStories:J}),J?n.jsx("div",{className:"relative inline-block mb-4 p-1 rounded-full cursor-pointer hover:opacity-90 transition-opacity animate-pulse",style:{background:"linear-gradient(45deg, #a855f7, #d946ef, #ec4899, #a855f7)",backgroundSize:"300% 300%"},onClick:()=>M(!0),children:n.jsx("div",{className:"p-[3px] bg-background rounded-full",children:n.jsx($t,{className:"h-24 w-24 shadow-lg",children:o.avatar_url||(G=o.profile)!=null&&G.avatar_url?n.jsx(Kt,{src:o.avatar_url||((se=o.profile)==null?void 0:se.avatar_url),alt:o.page_title}):n.jsx(Vt,{className:"bg-primary text-primary-foreground text-2xl",children:o.page_title.charAt(0)})})})}):n.jsx("div",{className:"relative inline-block mb-4",children:n.jsx($t,{className:"h-24 w-24 mx-auto border-4 border-background shadow-lg",children:o.avatar_url||(ce=o.profile)!=null&&ce.avatar_url?n.jsx(Kt,{src:o.avatar_url||((ne=o.profile)==null?void 0:ne.avatar_url),alt:o.page_title}):n.jsx(Vt,{className:"bg-primary text-primary-foreground text-2xl",children:o.page_title.charAt(0)})})})})(),n.jsx("h2",{className:"text-2xl font-bold text-foreground mb-1",children:((ae=o.profile)==null?void 0:ae.display_name)||o.page_title}),o.username&&n.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["@",o.username]}),n.jsx("p",{className:"text-muted-foreground max-w-sm mx-auto mb-4",children:((ie=o.profile)==null?void 0:ie.bio)||o.page_description||"Organizador de eventos"}),o.show_statistics&&n.jsxs("div",{className:"flex justify-center gap-8 mb-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-lg font-semibold text-foreground",children:((ye=(te=o.stats)==null?void 0:te.followers_count)==null?void 0:ye.toLocaleString())||"0"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Seguidores"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-lg font-semibold text-foreground",children:((ge=o.stats)==null?void 0:ge.events_count)||u.length}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Eventos"})]})]}),!E&&n.jsxs("div",{className:"flex justify-center gap-3",children:[n.jsx(K,{variant:"glow",size:"lg",className:"flex-1 max-w-[200px]",onClick:q,children:C?"Seguindo":"Seguir"}),n.jsxs(K,{variant:"outline",size:"lg",onClick:ee,children:[n.jsx(ks,{className:"h-4 w-4 mr-2"}),"Compartilhar"]})]}),E&&n.jsx("div",{className:"flex justify-center",children:n.jsxs(K,{variant:"outline",size:"lg",onClick:ee,children:[n.jsx(ks,{className:"h-4 w-4 mr-2"}),"Compartilhar"]})}),E&&n.jsx("div",{className:"flex justify-center",children:n.jsxs(K,{variant:"outline",size:"lg",className:"bg-black/20 hover:bg-black/40 backdrop-blur-sm text-white border-white/20",onClick:ee,children:[n.jsx(ks,{className:"h-4 w-4 mr-2"}),"Compartilhar minha pgina"]})})]}),n.jsx("div",{className:"px-4 mb-6",children:n.jsx("div",{className:"flex gap-2 justify-center",children:re.map(W=>{const J=W.icon;return n.jsxs("button",{onClick:()=>a(W.id),className:`flex-shrink-0 flex items-center gap-2 px-4 py-2 rounded-full border transition-all ${s===W.id?"bg-primary text-primary-foreground border-primary":"bg-surface border-border text-muted-foreground hover:text-foreground hover:border-primary/50"}`,children:[n.jsx(J,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm font-medium",children:W.label})]},W.id)})})}),n.jsxs("div",{className:"px-4 max-w-md mx-auto",children:[s==="eventos"&&o.show_events&&n.jsx("div",{className:"space-y-4",children:u.length>0?u.map(W=>{const J=ne=>ne.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),G=J(o.username||o.page_title),se=J(W.title),ce=`/${G}/${se}`;return n.jsxs(je,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>t(ce),children:[n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:W.image_url||"/placeholder.svg",alt:W.title,className:"w-full h-32 object-cover"}),W.is_live&&n.jsxs(dt,{className:"absolute top-2 right-2 bg-destructive text-destructive-foreground",children:[n.jsx("div",{className:"h-2 w-2 bg-white rounded-full animate-pulse mr-1"}),"AO VIVO"]})]}),n.jsxs(Ce,{className:"p-4",children:[n.jsx("h3",{className:"font-semibold text-foreground mb-1",children:W.title}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[n.jsx(Et,{className:"h-3 w-3"}),n.jsx("span",{children:H(W.event_date)})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(Rt,{className:"h-3 w-3"}),n.jsx("span",{children:W.location}),n.jsx(er,{className:"h-3 w-3 ml-auto"}),n.jsx("span",{children:W.current_attendees})]}),n.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Qa,{className:"h-3 w-3"}),n.jsx("span",{children:W.likes_count||0})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Ds,{className:"h-3 w-3"}),n.jsx("span",{children:W.comments_count||0})]})]})]})]},W.id)}):n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-muted-foreground",children:"Nenhum evento disponvel no momento."})})}),s==="links"&&o.show_contact&&n.jsxs("div",{className:"space-y-3",children:[o.show_whatsapp&&o.whatsapp_url&&n.jsx(je,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ce,{className:"p-4",children:n.jsxs("a",{href:o.whatsapp_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-green-500 text-white",children:n.jsx(Ds,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:"WhatsApp"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Entre em contato"})]}),n.jsx(Vr,{className:"h-4 w-4 text-muted-foreground"})]})})}),o.show_instagram&&o.instagram_url&&n.jsx(je,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ce,{className:"p-4",children:n.jsxs("a",{href:o.instagram_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-gradient-to-br from-purple-600 via-pink-600 to-orange-500 text-white",children:n.jsx(Hi,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:"Instagram"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Siga no Instagram"})]}),n.jsx(Vr,{className:"h-4 w-4 text-muted-foreground"})]})})}),o.show_playlist&&o.playlist_url&&n.jsx(je,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ce,{className:"p-4",children:n.jsxs("a",{href:o.playlist_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-purple-600 text-white",children:n.jsx(su,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:"Playlist"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Oua nossa playlist"})]}),n.jsx(Vr,{className:"h-4 w-4 text-muted-foreground"})]})})}),o.show_location&&o.location_url&&n.jsx(je,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ce,{className:"p-4",children:n.jsxs("a",{href:o.location_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-red-500 text-white",children:n.jsx(Rt,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:"Localizao"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Veja no mapa"})]}),n.jsx(Vr,{className:"h-4 w-4 text-muted-foreground"})]})})}),o.show_website&&o.website_url&&n.jsx(je,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ce,{className:"p-4",children:n.jsxs("a",{href:o.website_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-blue-600 text-white",children:n.jsx(nu,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:"Site"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Visite nosso site"})]}),n.jsx(Vr,{className:"h-4 w-4 text-muted-foreground"})]})})}),w.map(W=>n.jsx(je,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ce,{className:"p-4",children:n.jsxs("a",{href:W.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white text-sm font-bold",style:{backgroundColor:W.color},children:W.icon||W.title.charAt(0)}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:W.title}),n.jsx("p",{className:"text-sm text-muted-foreground truncate",children:W.url})]}),n.jsx(Vr,{className:"h-4 w-4 text-muted-foreground"})]})})},W.id)),!o.show_whatsapp&&!o.show_instagram&&!o.show_playlist&&!o.show_location&&!o.show_website&&w.length===0&&n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-muted-foreground",children:"Nenhum link disponvel."})})]}),s==="fotos"&&n.jsx("div",{className:"space-y-6",children:p.length===0?n.jsx("div",{className:"text-center py-8",children:n.jsxs("div",{className:"mb-4",children:[n.jsx(Cn,{className:"h-12 w-12 text-muted-foreground mx-auto mb-2"}),n.jsx("p",{className:"text-muted-foreground",children:"Nenhuma foto adicionada ainda."}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"As fotos dos eventos aparecero aqui quando forem adicionadas pelo organizador."})]})}):p.map(W=>n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-foreground",children:W.title}),n.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(W.event_date).toLocaleDateString("pt-BR")})]}),n.jsx(Mq,{eventId:W.id,organizerId:o.id})]},W.id))})]}),P&&R.find(W=>W.id===o.id)&&n.jsx(fv,{open:P,onClose:()=>M(!1),organizer:R.find(W=>W.id===o.id),initialStoryIndex:0,onLike:$,onDelete:z,onMarkAsViewed:Y}),n.jsx("footer",{className:"mt-8 pb-6 text-center border-t border-border pt-6",children:n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Esse site foi desenvolvido pela ",n.jsx("a",{href:"https://flatgrowth.com.br/",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Flat Company"})]})}),n.jsx(qu,{open:b,onOpenChange:k,actionDescription:O})]}):null}const Dg=e=>e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();function _2(){const e=hl(),t=_t(),{user:r}=bt(),[s,a]=v.useState(null),[o,c]=v.useState(!0),[u,f]=v.useState(!1);return $S(s),v.useEffect(()=>((async()=>{var x;try{if(c(!0),e.eventId){if(console.log("Usando ID direto do evento:",e.eventId),a(e.eventId),r){const{data:P}=await U.from("events").select("organizer_id").eq("id",e.eventId).single();if(P){const{data:M}=await U.from("organizers").select("user_id, preferred_theme").eq("id",P.organizer_id).single();if(M){M.user_id===r.id&&f(!0);const R=document.documentElement;R.classList.remove("dark","light"),R.classList.add(M.preferred_theme||"dark")}}}c(!1);return}if(!e.organizerSlug||!e.eventSlug){console.log("Formato de URL invlido"),c(!1);return}const w=e.organizerSlug,_=e.eventSlug;console.log("Procurando evento:",{organizerSlug:w,eventSlug:_});let j=null,N="dark";const C=w.replace(/-/g," "),{data:T,error:E}=await U.from("organizers").select(`
            id,
            user_id,
            page_title,
            username,
            preferred_theme,
            profile:profiles!organizers_user_id_fkey(display_name)
          `);if(E)throw E;if(T&&T.length>0)for(const P of T){const M=((x=P.profile)==null?void 0:x.display_name)||"";if(P.username===w){j=P.id,N=P.preferred_theme||"dark",console.log("Match found by username:",P.username);break}if(Dg(M)===w){j=P.id,N=P.preferred_theme||"dark",console.log("Match found by display_name:",M);break}if(P.page_title&&Dg(P.page_title)===w){j=P.id,N=P.preferred_theme||"dark",console.log("Match found by page_title:",P.page_title);break}}if(!j){console.error("Nenhum organizador encontrado com slug:",w),console.log("Organizadores disponveis:",T==null?void 0:T.map(P=>{var M;return{username:P.username,page_title:P.page_title,display_name:(M=P.profile)==null?void 0:M.display_name}})),c(!1),X.error("Organizador no encontrado");return}const S=document.documentElement;S.classList.remove("dark","light"),S.classList.add(N);const{data:b,error:k}=await U.from("events").select("id, title, organizer_id").eq("organizer_id",j);if(k)throw k;const O=_.toLowerCase(),L=(b||[]).find(P=>Dg(P.title)===O);if(!L){c(!1),X.error("Evento no encontrado");return}if(a(L.id),r){const{data:P}=await U.from("organizers").select("user_id").eq("id",L.organizer_id).single();P&&P.user_id===r.id&&f(!0)}}catch(w){console.error("Error resolving event by slug:",w),X.error("Erro ao carregar evento")}finally{c(!1)}})(),()=>{const x=localStorage.getItem("theme")||"dark",w=document.documentElement;w.classList.remove("dark","light"),w.classList.add(x)}),[e.organizerSlug,e.eventSlug,e.eventId,r]),o?n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"relative",children:n.jsx(St,{className:"w-full h-80"})}),n.jsxs("div",{className:"px-4 py-6 max-w-md mx-auto space-y-4",children:[n.jsx(St,{className:"h-8 w-3/4"}),n.jsx(St,{className:"h-4 w-1/2"}),n.jsx(St,{className:"h-20 w-full"})]})]}):s?n.jsx(VS,{onBack:()=>t("/"),eventId:s,onRegister:()=>t(`/event/${s}/register`),onManageRegistrations:u?()=>t(`/event/${s}/registrations`):void 0,onViewAttendances:u?()=>t(`/event/${s}/attendances`):void 0,onEdit:u?p=>t(`/event/edit/${p}`):void 0,onFindFriends:()=>t(`/event/${s}/find-friends`)}):n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-muted-foreground",children:"Pgina no encontrada"}),n.jsx(K,{variant:"outline",onClick:()=>t("/"),className:"mt-4",children:"Voltar ao incio"})]})})}function Fq({onLogin:e}){const t=_t(),[r]=H1(),[s,a]=v.useState(!0),[o,c]=v.useState(!1),[u,f]=v.useState("user"),[p,x]=v.useState(!1),[w,_]=v.useState({name:"",email:"",password:""}),{signUp:j,signIn:N,user:C}=bt(),{theme:T,toggleTheme:E}=Q1();v.useEffect(()=>{if(C){const M=r.get("redirect")||"/";t(M)}},[C,t,r]);const S=async M=>{if(M.preventDefault(),s){x(!0);try{const{error:R}=await N(w.email,w.password);if(!R){const $=r.get("redirect")||"/";t($)}}finally{x(!1)}}else t("/user-onboarding",{state:{email:w.email,password:w.password,name:w.name}})},b=()=>{t("/organizer-onboarding")},k=(M,R)=>{_($=>({...$,[M]:R}))},P=u==="user"?[{icon:er,text:"Conecte-se com pessoas de interesses em comum"},{icon:Et,text:"Encontre eventos na sua cidade"},{icon:wy,text:"Descubra eventos por categorias"},{icon:_y,text:"Encontre pessoas num raio de 100 metros"},{icon:ks,text:"Rede social de interao"},{icon:Rt,text:"Veja quem est prximo em tempo real"}]:[{icon:Et,text:"Crie e gerencie seus eventos"},{icon:er,text:"Alcance seu pblico-alvo"},{icon:wy,text:"Organize eventos por categorias"},{icon:Rt,text:"Localize participantes prximos"},{icon:ks,text:"Divulgue seus eventos"},{icon:_y,text:"Conecte-se com participantes interessados"}];return n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-4 py-8",children:n.jsx("div",{className:"w-full max-w-6xl",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12 items-center",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center lg:text-left space-y-4",children:[n.jsx("h1",{className:"font-bold gradient-primary bg-clip-text text-[#147dc7] text-4xl md:text-5xl",children:"MeetLines"}),n.jsx("p",{className:"text-lg text-muted-foreground",children:"Conecte-se com pessoas e descubra eventos incrveis"}),n.jsx("div",{className:"flex items-center justify-center lg:justify-start pt-2",children:n.jsxs("div",{className:"flex bg-surface rounded-lg p-1 border border-border",children:[n.jsx("button",{type:"button",onClick:()=>f("user"),className:`px-6 py-2 text-sm font-medium rounded-md transition-smooth ${u==="user"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground"}`,children:" Usurio"}),n.jsx("button",{type:"button",onClick:()=>f("organizer"),className:`px-6 py-2 text-sm font-medium rounded-md transition-smooth ${u==="organizer"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground"}`,children:" Organizador"})]})})]}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:P.map((M,R)=>{const $=M.icon;return n.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg bg-card/50 border border-border/50 hover:border-primary/50 transition-colors",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:n.jsx($,{className:"h-5 w-5 text-primary"})}),n.jsx("p",{className:"text-sm text-muted-foreground text-left",children:M.text})]},R)})})]}),n.jsxs("div",{className:"w-full max-w-md mx-auto lg:mx-0 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[s?n.jsxs("button",{type:"button",onClick:b,className:"text-xs text-muted-foreground hover:text-primary transition-smooth",children:["Quer criar eventos? ",n.jsx("span",{className:"text-primary font-medium",children:"Registrar como organizador"})]}):n.jsx("div",{className:"w-8"}),n.jsx(K,{variant:"ghost",size:"icon",onClick:E,className:"h-8 w-8",children:T==="dark"?n.jsx(Ij,{className:"h-4 w-4"}):n.jsx(kj,{className:"h-4 w-4"})})]}),n.jsx("div",{className:"text-center space-y-2 bg-card/50 p-6 rounded-lg border border-border/50",children:n.jsx("p",{className:"text-lg font-semibold",children:s?"Entre na sua conta":"Crie sua conta"})}),n.jsx("div",{children:n.jsxs("form",{onSubmit:S,className:"space-y-4",children:[!s&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"name",children:"Nome completo"}),n.jsxs("div",{className:"relative",children:[n.jsx(hs,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(we,{id:"name",type:"text",placeholder:"Seu nome",value:w.name,onChange:M=>k("name",M.target.value),className:"pl-10",required:!s})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"email",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(Ru,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(we,{id:"email",type:"email",placeholder:"seu@email.com",value:w.email,onChange:M=>k("email",M.target.value),className:"pl-10",required:!0})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"password",children:"Senha"}),n.jsxs("div",{className:"relative",children:[n.jsx(Px,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(we,{id:"password",type:o?"text":"password",placeholder:"Sua senha",value:w.password,onChange:M=>k("password",M.target.value),className:"pl-10 pr-10",required:!0}),n.jsx("button",{type:"button",onClick:()=>c(!o),className:"absolute right-3 top-3 text-muted-foreground hover:text-foreground",children:o?n.jsx(Rx,{className:"h-4 w-4"}):n.jsx(Go,{className:"h-4 w-4"})})]})]}),n.jsx(K,{type:"submit",variant:"glow",size:"lg",className:"w-full",disabled:p,children:p?"Carregando...":s?"Entrar":"Continuar"})]})}),n.jsx("div",{className:"text-center",children:n.jsxs("button",{type:"button",onClick:()=>{a(!s)},className:"text-sm text-muted-foreground hover:text-primary transition-smooth",children:[s?"No tem uma conta? ":"J tem uma conta? ",n.jsx("span",{className:"text-primary font-medium",children:s?"Cadastre-se":"Entre"})]})}),n.jsx("div",{className:"text-center pt-6 pb-4",children:n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Esse site foi desenvolvido pela ",n.jsx("a",{href:"https://flatgrowth.com.br/",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Flat Company"})]})})]})]})})})}var Mv="Progress",Lv=100,[Bq]=Mr(Mv),[zq,Uq]=Bq(Mv),dk=v.forwardRef((e,t)=>{const{__scopeProgress:r,value:s=null,max:a,getValueLabel:o=$q,...c}=e;(a||a===0)&&!N2(a)&&console.error(Vq(`${a}`,"Progress"));const u=N2(a)?a:Lv;s!==null&&!j2(s,u)&&console.error(qq(`${s}`,"Progress"));const f=j2(s,u)?s:null,p=rm(f)?o(f,u):void 0;return n.jsx(zq,{scope:r,value:f,max:u,children:n.jsx(qe.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":rm(f)?f:void 0,"aria-valuetext":p,role:"progressbar","data-state":fk(f,u),"data-value":f??void 0,"data-max":u,...c,ref:t})})});dk.displayName=Mv;var uk="ProgressIndicator",hk=v.forwardRef((e,t)=>{const{__scopeProgress:r,...s}=e,a=Uq(uk,r);return n.jsx(qe.div,{"data-state":fk(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...s,ref:t})});hk.displayName=uk;function $q(e,t){return`${Math.round(e/t*100)}%`}function fk(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function rm(e){return typeof e=="number"}function N2(e){return rm(e)&&!isNaN(e)&&e>0}function j2(e,t){return rm(e)&&!isNaN(e)&&e<=t&&e>=0}function Vq(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Lv}\`.`}function qq(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Lv} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var mk=dk,Wq=hk;const Fv=v.forwardRef(({className:e,value:t,...r},s)=>n.jsx(mk,{ref:s,className:Le("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:n.jsx(Wq,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Fv.displayName=mk.displayName;function pk({value:e,onChange:t,label:r="Cidade",placeholder:s="Buscar cidade...",required:a=!1,showUseLocation:o=!0,autoRequestLocation:c=!1}){const[u,f]=v.useState([]),[p,x]=v.useState([]),[w,_]=v.useState(""),[j,N]=v.useState(null),[C,T]=v.useState(!1),{getCurrentPosition:E,loading:S}=ev();v.useEffect(()=>{b()},[]),v.useEffect(()=>{c&&!C&&!e&&u.length>0&&(T(!0),L())},[c,C,e,u]),v.useEffect(()=>{e&&k(e)},[e]),v.useEffect(()=>{if(w.trim()==="")x(u);else{const R=w.toLowerCase(),$=u.filter(Y=>Y.name.toLowerCase().includes(R)||Y.state.toLowerCase().includes(R));x($)}},[w,u]);const b=async()=>{try{const{data:R,error:$}=await U.from("cities").select("*").order("state").order("name");if($)throw $;f(R||[]),x(R||[])}catch(R){console.error("Error loading cities:",R),X.error("Erro ao carregar cidades")}},k=async R=>{try{const{data:$,error:Y}=await U.from("cities").select("*").eq("id",R).maybeSingle();if(Y)throw Y;N($)}catch($){console.error("Error loading selected city:",$)}},O=R=>{N(R),t(R.id,R.name),_("")},L=async()=>{const R=await E();if(!R){X.error("No foi possvel obter sua localizao");return}try{const Y=await(await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${R.lat}&lon=${R.lon}&format=json`)).json(),z=Y.address.city||Y.address.town||Y.address.municipality;if(z){let q=u.find(ee=>ee.name.toLowerCase()===z.toLowerCase());if(!q){const ee=Y.address.state,H=P(ee),{data:re,error:ae}=await U.from("cities").insert({name:z,state:H}).select().single();if(ae){console.error("Error creating city:",ae),X.error("Erro ao adicionar cidade");return}q=re,f([...u,re])}q&&(O(q),X.success(`Localizao detectada: ${q.name}`))}else X.error("No foi possvel identificar sua cidade")}catch($){console.error("Error fetching location:",$),X.error("Erro ao obter localizao")}},P=R=>({Acre:"AC",Alagoas:"AL",Amap:"AP",Amazonas:"AM",Bahia:"BA",Cear:"CE","Distrito Federal":"DF","Esprito Santo":"ES",Gois:"GO",Maranho:"MA","Mato Grosso":"MT","Mato Grosso do Sul":"MS","Minas Gerais":"MG",Par:"PA",Paraba:"PB",Paran:"PR",Pernambuco:"PE",Piau:"PI","Rio de Janeiro":"RJ","Rio Grande do Norte":"RN","Rio Grande do Sul":"RS",Rondnia:"RO",Roraima:"RR","Santa Catarina":"SC","So Paulo":"SP",Sergipe:"SE",Tocantins:"TO"})[R]||"BR",M=p.reduce((R,$)=>(R[$.state]||(R[$.state]=[]),R[$.state].push($),R),{});return n.jsxs("div",{className:"space-y-3",children:[n.jsxs(de,{htmlFor:"city",children:[r," ",a&&n.jsx("span",{className:"text-destructive",children:"*"})]}),o&&n.jsxs(K,{type:"button",variant:"outline",onClick:L,disabled:S,className:"w-full justify-start",children:[n.jsx(Tj,{className:"h-4 w-4 mr-2 text-primary"}),S?"Detectando localizao...":"Usar minha localizao atual"]}),j&&n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-accent rounded-lg",children:[n.jsx(Rt,{className:"h-4 w-4 text-primary"}),n.jsxs("span",{className:"text-sm font-medium",children:[j.name,", ",j.state]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(we,{id:"city",type:"text",placeholder:s,value:w,onChange:R=>_(R.target.value)}),(!j||w)&&n.jsx(Qo,{className:"h-[200px] w-full border rounded-md",children:n.jsx("div",{className:"p-2 space-y-1",children:Object.entries(M).length===0?n.jsx("p",{className:"text-sm text-muted-foreground p-2",children:"Nenhuma cidade encontrada"}):Object.entries(M).map(([R,$])=>n.jsxs("div",{className:"mb-3",children:[n.jsx("h3",{className:"text-xs font-semibold text-muted-foreground mb-1 px-2",children:R}),$.map(Y=>n.jsx("button",{type:"button",onClick:()=>O(Y),className:"w-full text-left px-2 py-2 text-sm hover:bg-accent rounded-md transition-colors",children:Y.name},Y.id))]},R))})})]}),a&&!j&&n.jsx("p",{className:"text-xs text-muted-foreground",children:"Selecione sua cidade para que os usurios possam encontrar seus eventos"})]})}function Hq(){const e=_t(),t=Kn(),{email:r,password:s,name:a}=t.state||{},[o,c]=v.useState(r||""),[u,f]=v.useState(s||""),[p,x]=v.useState(a||""),[w,_]=v.useState(r&&s?1:0),[j,N]=v.useState(!1),[C,T]=v.useState(""),[E,S]=v.useState(a||""),[b,k]=v.useState(""),[O,L]=v.useState(null),P=v.useMemo(()=>O?URL.createObjectURL(O):"",[O]),[M,R]=v.useState(""),$=v.useRef(null),[Y,z]=v.useState(""),[q,ee]=v.useState(""),[H,re]=v.useState(""),[ae,ie]=v.useState(""),[te,ye]=v.useState(""),[ge,W]=v.useState(null),[J,G]=v.useState(""),[se,ce]=v.useState("dark"),ne=5,he=(w+1)/ne*100;v.useEffect(()=>{},[]);const Ae=async _e=>{if(k(""),!/^[a-z0-9._]+$/.test(_e))return k("Use apenas letras minsculas, nmeros, pontos e underscores"),!1;if(_e.length<3)return k("Username deve ter no mnimo 3 caracteres"),!1;if(_e.length>30)return k("Username deve ter no mximo 30 caracteres"),!1;const{data:be}=await U.from("organizers").select("id").eq("username",_e).maybeSingle();return be?(k("Este username j est em uso"),!1):!0},Pe=async()=>{if(!o||!u||!p){X.error("Preencha email, senha e nome");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)){X.error("Email invlido");return}if(u.length<6){X.error("Senha deve ter no mnimo 6 caracteres");return}S(p),_(1)},Be=async()=>{if(!C||!E){X.error("Preencha todos os campos");return}N(!0);const _e=await Ae(C);N(!1),_e&&_(2)},Ee=()=>{if(!M){X.error("Escreva uma bio para seu perfil");return}if(!ge){X.error("Selecione sua cidade");return}_(3)},ue=()=>{_(4)},Fe=async()=>{N(!0);try{const _e=`${window.location.origin}/`,{data:Ze,error:be}=await U.auth.signUp({email:o,password:u,options:{emailRedirectTo:_e,data:{display_name:E,role:"organizer"}}});if(be)throw be;Ze.session||await U.auth.signInWithPassword({email:o,password:u});const{data:ze}=await U.auth.getUser(),He=ze.user;if(!He){X.success("Conta criada! Verifique seu email para confirmar o acesso."),e("/");return}await U.from("organizers").delete().eq("user_id",He.id),await U.from("profiles").delete().eq("user_id",He.id);let Ft;if(O){const at=O.name.split(".").pop(),it=`${He.id}/avatar.${at}`,{error:ar}=await U.storage.from("user-uploads").upload(it,O,{upsert:!0});if(ar)console.warn("Erro ao subir avatar, continuando sem avatar:",ar);else{const{data:Nt}=U.storage.from("user-uploads").getPublicUrl(it);Ft=Nt.publicUrl}}await U.from("profiles").insert({user_id:He.id,display_name:E,avatar_url:Ft,bio:M,role:"organizer"});const{data:pe,error:Je}=await U.from("organizers").insert({user_id:He.id,username:C,page_title:E,page_subtitle:"Organizador de Eventos",page_description:M,avatar_url:Ft,whatsapp_url:Y||null,instagram_url:q||null,playlist_url:H||null,location_url:ae||null,website_url:te||null,show_whatsapp:!!Y,show_instagram:!!q,show_playlist:!!H,show_location:!!ae,show_website:!!te,preferred_theme:se,city_id:ge}).select().maybeSingle();if(Je)throw Je;pe!=null&&pe.id&&await U.from("organizer_stats").insert({organizer_id:pe.id,followers_count:0,events_count:0,average_rating:0,total_ratings:0}),X.success("Perfil criado com sucesso! "),e("/")}catch(_e){console.error("Error completing onboarding:",_e),X.error((_e==null?void 0:_e.message)||"Erro ao criar perfil")}finally{N(!1)}};return n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:n.jsxs(je,{className:"w-full max-w-md",children:[n.jsxs(We,{children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsxs(K,{variant:"ghost",size:"sm",onClick:()=>e("/auth"),className:"text-muted-foreground hover:text-foreground",children:[n.jsx(gt,{className:"h-4 w-4 mr-2"}),"Cancelar"]})}),n.jsx(Ge,{children:"Configure seu Perfil de Organizador"}),n.jsxs(cn,{children:["Etapa ",w+1," de ",ne]}),n.jsx(Fv,{value:he,className:"mt-2"})]}),n.jsxs(Ce,{children:[w===0&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx(Ru,{className:"h-12 w-12 mx-auto text-primary mb-2"}),n.jsx("h3",{className:"text-lg font-semibold",children:"Crie seu acesso"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Informe seu email, senha e nome"})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"email",children:"Email"}),n.jsx(we,{id:"email",type:"email",value:o,onChange:_e=>c(_e.target.value),placeholder:"voce@email.com"})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"password",children:"Senha"}),n.jsx(we,{id:"password",type:"password",value:u,onChange:_e=>f(_e.target.value),placeholder:""})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"name",children:"Seu nome ou da marca"}),n.jsx(we,{id:"name",value:p,onChange:_e=>x(_e.target.value),placeholder:"Minha Marca"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(K,{variant:"outline",onClick:()=>e("/auth"),className:"flex-1",children:[n.jsx(gt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsx(K,{onClick:Pe,className:"flex-1",children:"Prximo"})]})]}),w===1&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx(hs,{className:"h-12 w-12 mx-auto text-primary mb-2"}),n.jsx("h3",{className:"text-lg font-semibold",children:"Escolha seu Username"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Seu username  nico e no pode ser alterado depois"})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"username",children:"Username (como @instagram)"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"@"}),n.jsx(we,{id:"username",value:C,onChange:_e=>{const Ze=_e.target.value.toLowerCase();T(Ze),Ze.length>=3&&Ae(Ze)},placeholder:"seuusername",className:"pl-8",maxLength:30})]}),b&&n.jsx("p",{className:"text-sm text-destructive mt-1",children:b}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Apenas letras minsculas, nmeros, . e _"})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"displayName",children:"Nome de Exibio"}),n.jsx(we,{id:"displayName",value:E,onChange:_e=>S(_e.target.value),placeholder:"Nome da sua empresa/marca",maxLength:50}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Este nome pode ser alterado depois"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(K,{variant:"outline",onClick:()=>_(0),className:"flex-1",disabled:j,children:[n.jsx(gt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsx(K,{onClick:Be,className:"flex-1",disabled:j||!C||!E||!!b,children:j?"Verificando...":"Prximo"})]})]}),w===2&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx(Ms,{className:"h-12 w-12 mx-auto text-primary mb-2"}),n.jsx("h3",{className:"text-lg font-semibold",children:"Foto e Biografia"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Ajude as pessoas a conhecerem voc"})]}),n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsx($t,{className:"h-24 w-24",children:P?n.jsx(Kt,{src:P}):n.jsx(Vt,{className:"bg-surface text-2xl",children:E.charAt(0)||"U"})}),n.jsx("input",{ref:$,type:"file",accept:"image/*",onChange:_e=>{var be;const Ze=((be=_e.target.files)==null?void 0:be[0])||null;L(Ze)},className:"hidden"}),n.jsxs(K,{variant:"outline",className:"w-full",type:"button",onClick:()=>{var _e;return(_e=$.current)==null?void 0:_e.click()},children:[n.jsx(Ms,{className:"h-4 w-4 mr-2"}),P?"Trocar Foto":"Adicionar Foto"]}),n.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Foto de perfil (opcional)"})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"bio",children:"Biografia *"}),n.jsx(An,{id:"bio",value:M,onChange:_e=>R(_e.target.value),placeholder:"Conte um pouco sobre voc e seus eventos...",rows:4,maxLength:500}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[M.length,"/500 caracteres"]})]}),n.jsx(pk,{value:ge||void 0,onChange:(_e,Ze)=>{W(_e),G(Ze)},label:"Localizao",placeholder:"Em qual cidade voc organiza eventos?",required:!0,showUseLocation:!0}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(K,{variant:"outline",onClick:()=>_(1),className:"flex-1",children:[n.jsx(gt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsx(K,{onClick:Ee,className:"flex-1",disabled:!M||!ge,children:"Prximo"})]})]}),w===3&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx(Sj,{className:"h-12 w-12 mx-auto text-primary mb-2"}),n.jsx("h3",{className:"text-lg font-semibold",children:"Links e Redes Sociais"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Selecione as redes que deseja adicionar (opcional)"})]}),n.jsxs("div",{className:"grid grid-cols-5 gap-4 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>{z(Y?"":"https://wa.me/")},className:`p-4 rounded-lg border-2 transition-all ${Y?"border-green-500 bg-green-500/10":"border-border hover:border-green-500/50"}`,children:n.jsx(Ds,{className:`h-6 w-6 mx-auto ${Y?"text-green-500":"text-muted-foreground"}`})}),n.jsx("button",{type:"button",onClick:()=>{ee(q?"":"https://instagram.com/")},className:`p-4 rounded-lg border-2 transition-all ${q?"border-pink-500 bg-pink-500/10":"border-border hover:border-pink-500/50"}`,children:n.jsx(Hi,{className:`h-6 w-6 mx-auto ${q?"text-pink-500":"text-muted-foreground"}`})}),n.jsx("button",{type:"button",onClick:()=>{re(H?"":"https://open.spotify.com/")},className:`p-4 rounded-lg border-2 transition-all ${H?"border-purple-500 bg-purple-500/10":"border-border hover:border-purple-500/50"}`,children:n.jsx(su,{className:`h-6 w-6 mx-auto ${H?"text-purple-500":"text-muted-foreground"}`})}),n.jsx("button",{type:"button",onClick:()=>{ie(ae?"":"https://maps.google.com/")},className:`p-4 rounded-lg border-2 transition-all ${ae?"border-red-500 bg-red-500/10":"border-border hover:border-red-500/50"}`,children:n.jsx(Rt,{className:`h-6 w-6 mx-auto ${ae?"text-red-500":"text-muted-foreground"}`})}),n.jsx("button",{type:"button",onClick:()=>{ye(te?"":"https://")},className:`p-4 rounded-lg border-2 transition-all ${te?"border-blue-500 bg-blue-500/10":"border-border hover:border-blue-500/50"}`,children:n.jsx(nu,{className:`h-6 w-6 mx-auto ${te?"text-blue-500":"text-muted-foreground"}`})})]}),Y&&n.jsxs("div",{children:[n.jsxs(de,{htmlFor:"whatsapp",className:"flex items-center gap-2",children:[n.jsx(Ds,{className:"h-4 w-4 text-green-500"}),"WhatsApp"]}),n.jsx(we,{id:"whatsapp",value:Y,onChange:_e=>z(_e.target.value),placeholder:"https://wa.me/5511999999999"})]}),q&&n.jsxs("div",{children:[n.jsxs(de,{htmlFor:"instagram",className:"flex items-center gap-2",children:[n.jsx(Hi,{className:"h-4 w-4 text-pink-500"}),"Instagram"]}),n.jsx(we,{id:"instagram",value:q,onChange:_e=>ee(_e.target.value),placeholder:"https://instagram.com/seu_perfil"})]}),H&&n.jsxs("div",{children:[n.jsxs(de,{htmlFor:"playlist",className:"flex items-center gap-2",children:[n.jsx(su,{className:"h-4 w-4 text-purple-500"}),"Playlist"]}),n.jsx(we,{id:"playlist",value:H,onChange:_e=>re(_e.target.value),placeholder:"https://open.spotify.com/playlist/..."})]}),ae&&n.jsxs("div",{children:[n.jsxs(de,{htmlFor:"location",className:"flex items-center gap-2",children:[n.jsx(Rt,{className:"h-4 w-4 text-red-500"}),"Localizao"]}),n.jsx(we,{id:"location",value:ae,onChange:_e=>ie(_e.target.value),placeholder:"https://maps.google.com/..."})]}),te&&n.jsxs("div",{children:[n.jsxs(de,{htmlFor:"website",className:"flex items-center gap-2",children:[n.jsx(nu,{className:"h-4 w-4 text-blue-500"}),"Site"]}),n.jsx(we,{id:"website",value:te,onChange:_e=>ye(_e.target.value),placeholder:"https://seusite.com.br"})]}),n.jsxs("div",{className:"flex gap-2 mt-6",children:[n.jsxs(K,{variant:"outline",onClick:()=>_(2),className:"flex-1",children:[n.jsx(gt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsx(K,{onClick:ue,className:"flex-1",children:"Prximo"})]})]}),w===4&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx(z8,{className:"h-12 w-12 mx-auto text-primary mb-2"}),n.jsx("h3",{className:"text-lg font-semibold",children:"Escolha o Tema da Sua Pgina"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Selecione como seus visitantes vero sua pgina"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx("button",{type:"button",onClick:()=>ce("dark"),className:`p-6 rounded-lg border-2 transition-all ${se==="dark"?"border-primary bg-primary/10":"border-border hover:border-primary/50"}`,children:n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"w-full h-24 bg-gradient-to-br from-gray-900 to-gray-800 rounded-md flex items-center justify-center",children:n.jsx("div",{className:"text-white text-xs font-medium",children:"Modo Escuro"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"font-medium text-sm",children:"Dark Mode"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Visual moderno e elegante"})]})]})}),n.jsx("button",{type:"button",onClick:()=>ce("light"),className:`p-6 rounded-lg border-2 transition-all ${se==="light"?"border-primary bg-primary/10":"border-border hover:border-primary/50"}`,children:n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"w-full h-24 bg-gradient-to-br from-blue-400 via-pink-400 to-orange-400 rounded-md flex items-center justify-center",children:n.jsx("div",{className:"text-white text-xs font-medium",children:"Modo Claro"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"font-medium text-sm",children:"Light Mode"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Visual colorido e vibrante"})]})]})})]}),n.jsx("div",{className:"bg-muted/50 p-4 rounded-lg",children:n.jsx("p",{className:"text-xs text-muted-foreground text-center",children:" Seus visitantes sempre vero sua pgina no tema que voc escolher aqui"})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(K,{variant:"outline",onClick:()=>_(3),className:"flex-1",disabled:j,children:[n.jsx(gt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsx(K,{onClick:Fe,className:"flex-1",disabled:j,children:j?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Criando..."]}):n.jsxs(n.Fragment,{children:[n.jsx(as,{className:"h-4 w-4 mr-2"}),"Concluir"]})})]})]})]})]})})}const Gq=l0.map(e=>{var t;return{id:e.value,label:e.label.replace(/^.+\s/,""),icon:((t=e.label.match(/^(.+?)\s/))==null?void 0:t[1])||""}});function Xq(){const e=_t(),r=Kn().state,[s,a]=v.useState((r==null?void 0:r.email)||""),[o,c]=v.useState((r==null?void 0:r.password)||""),[u,f]=v.useState((r==null?void 0:r.name)||""),[p,x]=v.useState(""),[w,_]=v.useState(""),[j,N]=v.useState(null),[C,T]=v.useState(""),[E,S]=v.useState(""),[b,k]=v.useState(""),[O,L]=v.useState([]),[P,M]=v.useState([]),[R,$]=v.useState([]),[Y,z]=v.useState(""),[q,ee]=v.useState(0),[H,re]=v.useState(!1),[ae,ie]=v.useState(""),[te,ye]=v.useState(!1),[ge,W]=v.useState(null),[J,G]=v.useState(!1),[se,ce]=v.useState(""),ne=["Dados Bsicos","Localizao","Foto de Perfil","Redes Sociais","Interesses","Sugestes"],he=(q+1)/ne.length*100;v.useEffect(()=>{(async()=>{var at;const{data:{session:Je}}=await U.auth.getSession();if(Je!=null&&Je.user){ye(!0),W(Je.user.id),a(Je.user.email||"");const it=(at=Je.user.user_metadata)==null?void 0:at.display_name;it&&f(it),ee(1)}})()},[]);const Ae=async()=>{try{await U.auth.signOut(),X.info("Sesso encerrada. Voc pode criar uma nova conta."),ye(!1),W(null),ee(0),a(""),c(""),f(""),_(""),e("/auth")}catch(pe){console.error("Error logging out:",pe),X.error("Erro ao sair. Tente novamente.")}},Pe=async pe=>{if(!pe)return ie("Username  obrigatrio"),!1;if(!/^[a-z0-9_]{3,20}$/.test(pe))return ie("Use apenas letras minsculas, nmeros e _ (3-20 caracteres)"),!1;try{const{data:Je,error:at}=await U.from("profiles").select("username").eq("username",pe).maybeSingle();return at&&at.code!=="PGRST116"?(console.error("Error checking username:",at),ie("Erro ao verificar username"),!1):Je?(ie("Username j est em uso"),!1):(ie(""),!0)}catch(Je){return console.error("Error:",Je),ie("Erro ao verificar username"),!1}},Be=pe=>{var at;const Je=(at=pe.target.files)==null?void 0:at[0];if(Je){if(!Je.type.startsWith("image/")){X.error("Por favor, selecione apenas arquivos de imagem");return}if(Je.size>5*1024*1024){X.error("A imagem deve ter no mximo 5MB");return}const it=new FileReader;it.onloadend=()=>{ce(it.result),G(!0)},it.readAsDataURL(Je)}},Ee=pe=>{N(pe);const Je=new FileReader;Je.onloadend=()=>{T(Je.result)},Je.readAsDataURL(pe),G(!1)},ue=pe=>{L(Je=>Je.includes(pe)?Je.filter(at=>at!==pe):[...Je,pe])},Fe=()=>{if(!s||!o||!u||!p){X.error("Preencha todos os campos");return}const pe=new Date,Je=new Date(p),at=pe.getFullYear()-Je.getFullYear(),it=pe.getMonth()-Je.getMonth();if((it<0||it===0&&pe.getDate()<Je.getDate()?at-1:at)<13){X.error("Voc precisa ter pelo menos 13 anos para se cadastrar");return}ee(1)},_e=async()=>{await Pe(w)&&ee(3)},Ze=()=>{ee(4)},be=async()=>{if(O.length===0){X.error("Selecione pelo menos um interesse");return}ee(5)};v.useEffect(()=>{q===5&&O.length>0&&ze()},[q,O]);const ze=async()=>{try{re(!0);const{data:pe,error:Je}=await U.from("organizers").select(`
          id,
          page_title,
          avatar_url,
          category,
          user_id
        `).eq("is_page_active",!0).limit(10);if(Je)throw Je;const at=await Promise.all((pe||[]).map(async it=>{const[ar,Nt]=await Promise.all([U.from("followers").select("id",{count:"exact",head:!0}).eq("organizer_id",it.id),U.from("events").select("id",{count:"exact",head:!0}).eq("organizer_id",it.id)]);return{...it,followers_count:ar.count??0,events_count:Nt.count??0}}));at.sort((it,ar)=>ar.followers_count+ar.events_count-(it.followers_count+it.events_count)),M(at.slice(0,6))}catch(pe){console.error("Error fetching suggested organizers:",pe)}finally{re(!1)}},He=pe=>{$(Je=>Je.includes(pe)?Je.filter(at=>at!==pe):[...Je,pe])},Ft=async()=>{var pe,Je,at;re(!0);try{let it;if(te&&ge)it=ge;else{const{data:Sr,error:At}=await U.auth.signUp({email:s,password:o,options:{emailRedirectTo:`${window.location.origin}/`,data:{display_name:u,role:"user"}}});if(At)if((pe=At.message)!=null&&pe.includes("already registered")||(Je=At.message)!=null&&Je.includes("User already registered")){const{data:Ve,error:Se}=await U.auth.signInWithPassword({email:s,password:o});if(Se){X.error("Email j cadastrado. Verifique sua senha e tente novamente."),ee(0);return}if(!Ve.user)throw new Error("Falha ao fazer login");it=Ve.user.id,X.info("Login realizado! Complete seu perfil."),await new Promise(ut=>setTimeout(ut,1e3))}else throw At;else{if(!Sr.user)throw new Error("Falha ao criar usurio");const{error:Ve}=await U.auth.signInWithPassword({email:s,password:o});if(Ve){X.success("Conta criada! Verifique seu email para confirmar."),e("/auth");return}it=Sr.user.id,await new Promise(Se=>setTimeout(Se,1500))}}let ar="";if(j){const Sr=j.name.split(".").pop(),At=`${it}/avatar.${Sr}`,{error:Ve}=await U.storage.from("user-uploads").upload(At,j,{upsert:!0});if(Ve)console.error("Error uploading avatar:",Ve);else{const{data:{publicUrl:Se}}=U.storage.from("user-uploads").getPublicUrl(At);ar=Se}}const{error:Nt}=await U.from("profiles").update({display_name:u,username:w,avatar_url:ar||null,instagram_url:E||null,phone:b||null,interests:O,city_id:Y||null,birth_date:p||null,notes:`Interesses: ${O.join(", ")}`}).eq("user_id",it);if(Nt)throw console.error("Profile update error:",Nt),new Error(`Erro ao atualizar perfil: ${Nt.message}`);if(R.length>0){const Sr=R.map(At=>U.from("followers").insert({user_id:it,organizer_id:At}));await Promise.all(Sr)}X.success("Perfil criado com sucesso!"),e("/")}catch(it){console.error("Error creating profile:",it),(at=it.message)!=null&&at.includes("Username cannot be changed")?X.error("Erro: Username j foi definido. Tente fazer login."):it.message?X.error(it.message):X.error("Erro ao criar perfil. Tente novamente.")}finally{re(!1)}};return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary/10 via-background to-primary/5 flex items-center justify-center p-4",children:[n.jsx(je,{className:"w-full max-w-md",children:n.jsxs(Ce,{className:"p-6",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsxs(K,{variant:"ghost",size:"sm",onClick:()=>e("/auth"),className:"text-muted-foreground hover:text-foreground",children:[n.jsx(gt,{className:"h-4 w-4 mr-2"}),"Cancelar"]})}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary/10 mb-4",children:n.jsx(hs,{className:"h-8 w-8 text-primary"})}),n.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Complete seu Perfil"}),n.jsx("p",{className:"text-muted-foreground text-sm",children:ne[q]}),!te&&q===0&&n.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["J tem conta?"," ",n.jsx("button",{onClick:()=>e("/auth"),className:"text-primary hover:underline font-medium",children:"Fazer login"})]}),te&&n.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Conectado como ",s,"."," ",n.jsx("button",{onClick:Ae,className:"text-destructive hover:underline font-medium",children:"Sair"})]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx(Fv,{value:he,className:"h-2"}),n.jsxs("div",{className:"flex justify-between mt-2 text-xs text-muted-foreground",children:[n.jsxs("span",{children:["Passo ",q+1," de ",ne.length]}),n.jsxs("span",{children:[Math.round(he),"%"]})]})]}),q===0&&n.jsx("div",{className:"space-y-4",children:!te&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"name",children:"Nome Completo"}),n.jsx(we,{id:"name",value:u,onChange:pe=>f(pe.target.value),placeholder:"Seu nome"})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"email",children:"Email"}),n.jsx(we,{id:"email",type:"email",value:s,onChange:pe=>a(pe.target.value),placeholder:"seu@email.com"})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"password",children:"Senha"}),n.jsx(we,{id:"password",type:"password",value:o,onChange:pe=>c(pe.target.value),placeholder:"Mnimo 6 caracteres"})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"birthDate",children:"Data de Nascimento"}),n.jsx(we,{id:"birthDate",type:"date",value:p,onChange:pe=>x(pe.target.value),max:new Date().toISOString().split("T")[0]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Sua idade ser calculada automaticamente"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(K,{variant:"outline",onClick:()=>e("/auth"),className:"flex-1",children:[n.jsx(gt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsxs(K,{onClick:Fe,className:"flex-1",children:["Prximo ",n.jsx(fd,{className:"ml-2 h-4 w-4"})]})]})]})}),q===1&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary/10 mb-4",children:n.jsx(Rt,{className:"h-8 w-8 text-primary"})}),n.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Onde voc est?"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Selecione sua cidade para ver eventos prximos"})]}),n.jsx(pk,{value:Y,onChange:z,label:"Sua Cidade",placeholder:"Selecione sua cidade",autoRequestLocation:!0}),n.jsx("p",{className:"text-xs text-muted-foreground text-center",children:" Voc ver eventos da sua cidade automaticamente. Para ver eventos de outras cidades, use a busca."}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(K,{variant:"outline",onClick:()=>te?e("/auth"):ee(0),className:"flex-1",children:[n.jsx(gt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsxs(K,{onClick:()=>ee(2),className:"flex-1",disabled:!Y,children:["Prximo ",n.jsx(fd,{className:"ml-2 h-4 w-4"})]})]})]}),q===2&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"username",children:"Username (ID nico)"}),n.jsx(we,{id:"username",value:w,onChange:pe=>{_(pe.target.value.toLowerCase()),ie("")},onBlur:pe=>Pe(pe.target.value),placeholder:"seu_username",className:ae?"border-destructive":""}),ae&&n.jsx("p",{className:"text-sm text-destructive mt-1",children:ae}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Use letras minsculas, nmeros e _"})]}),n.jsxs("div",{children:[n.jsx(de,{children:"Foto de Perfil"}),n.jsxs("div",{className:"flex flex-col items-center gap-4 mt-2",children:[n.jsx($t,{className:"h-24 w-24",children:C?n.jsx(Kt,{src:C}):n.jsx(Vt,{children:n.jsx(hs,{className:"h-12 w-12"})})}),n.jsx("label",{htmlFor:"avatar-upload",children:n.jsx(K,{type:"button",variant:"outline",size:"sm",asChild:!0,children:n.jsxs("span",{className:"cursor-pointer",children:[n.jsx(Ms,{className:"mr-2 h-4 w-4"}),C?"Trocar Foto":"Escolher Foto"]})})}),n.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",onChange:Be,className:"hidden"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(K,{variant:"outline",onClick:()=>ee(1),className:"flex-1",children:[n.jsx(gt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsxs(K,{onClick:_e,className:"flex-1",children:["Prximo ",n.jsx(fd,{className:"ml-2 h-4 w-4"})]})]})]}),q===3&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"instagram",children:"Instagram (opcional)"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Hi,{className:"h-4 w-4 text-muted-foreground"}),n.jsx(we,{id:"instagram",value:E,onChange:pe=>S(pe.target.value),placeholder:"https://instagram.com/seu_username"})]})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"whatsapp",children:"WhatsApp (opcional)"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ds,{className:"h-4 w-4 text-muted-foreground"}),n.jsx(we,{id:"whatsapp",value:b,onChange:pe=>k(pe.target.value),placeholder:"https://wa.me/5511999999999"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(K,{variant:"outline",onClick:()=>ee(1),className:"flex-1",children:[n.jsx(gt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsxs(K,{onClick:Ze,className:"flex-1",children:["Prximo ",n.jsx(fd,{className:"ml-2 h-4 w-4"})]})]})]}),q===4&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs(de,{className:"flex items-center gap-2 mb-3",children:[n.jsx(iu,{className:"h-4 w-4"}),"Selecione seus interesses"]}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:Gq.map(pe=>n.jsxs(dt,{variant:O.includes(pe.id)?"default":"outline",className:"justify-center cursor-pointer py-3 text-sm transition-all hover:scale-105",onClick:()=>ue(pe.id),children:[n.jsx("span",{className:"mr-2",children:pe.icon}),pe.label,O.includes(pe.id)&&n.jsx(Xn,{className:"ml-2 h-3 w-3"})]},pe.id))}),n.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Selecione pelo menos um interesse"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(K,{variant:"outline",onClick:()=>ee(3),className:"flex-1",children:[n.jsx(gt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsxs(K,{onClick:be,disabled:O.length===0,className:"flex-1",children:["Prximo ",n.jsx(fd,{className:"ml-2 h-4 w-4"})]})]})]}),q===5&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs(de,{className:"flex items-center gap-2 mb-3",children:[n.jsx(er,{className:"h-4 w-4"}),"Siga organizadores que te interessam"]}),n.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Personalize sua experincia seguindo organizadores"}),H?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Carregando sugestes..."}):P.length>0?n.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:P.map(pe=>n.jsxs("div",{onClick:()=>He(pe.id),className:`flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all hover:bg-accent/50 ${R.includes(pe.id)?"border-primary bg-primary/5":"border-border"}`,children:[n.jsxs($t,{className:"h-12 w-12",children:[n.jsx(Kt,{src:pe.avatar_url}),n.jsx(Vt,{children:pe.page_title[0]})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium text-sm truncate",children:pe.page_title}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[pe.followers_count," seguidores  ",pe.events_count," eventos"]})]}),R.includes(pe.id)&&n.jsx(Xn,{className:"h-5 w-5 text-primary flex-shrink-0"})]},pe.id))}):n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Nenhum organizador encontrado"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(K,{variant:"outline",onClick:()=>ee(4),className:"flex-1",children:[n.jsx(gt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsx(K,{onClick:Ft,disabled:H,className:"flex-1",children:H?"Criando...":"Concluir"})]})]})]})}),n.jsx(Pv,{open:J,onOpenChange:G,imageSrc:se,onCropComplete:Ee,aspectRatio:1})]})}const Kq=()=>{const e=Kn();return v.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),n.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"mb-4 text-4xl font-bold text-foreground",children:"404"}),n.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Pgina no encontrada"}),n.jsx("a",{href:"/",className:"text-primary underline hover:text-primary-glow transition-smooth",children:"Voltar ao Incio"})]})})};function Yq(){const e=_t(),{isAdmin:t,loading:r}=Fs(),[s,a]=v.useState({totalUsers:0,totalOrganizers:0,pendingClaims:0,unreadSupport:0}),[o,c]=v.useState(!0);return v.useEffect(()=>{!r&&!t&&e("/")},[t,r,e]),v.useEffect(()=>{t&&(async()=>{try{const[f,p,x,w]=await Promise.all([U.from("profiles").select("id",{count:"exact",head:!0}),U.from("organizers").select("id",{count:"exact",head:!0}),U.from("event_claim_requests").select("id",{count:"exact",head:!0}).eq("status","pending"),U.from("support_messages").select("id",{count:"exact",head:!0}).eq("read",!1).eq("is_admin_reply",!1)]);a({totalUsers:f.count||0,totalOrganizers:p.count||0,pendingClaims:x.count||0,unreadSupport:w.count||0})}catch(f){console.error("Error fetching stats:",f)}finally{c(!1)}})()},[t]),r||!t?null:n.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>e("/"),children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Painel Administrativo"}),n.jsx("p",{className:"text-muted-foreground",children:"Gerencie a plataforma"})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[n.jsxs(je,{children:[n.jsxs(We,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ge,{className:"text-sm font-medium",children:"Total de Usurios"}),n.jsx(er,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(Ce,{children:o?n.jsx(St,{className:"h-8 w-20"}):n.jsx("div",{className:"text-2xl font-bold",children:s.totalUsers})})]}),n.jsxs(je,{children:[n.jsxs(We,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ge,{className:"text-sm font-medium",children:"Organizadores"}),n.jsx(Et,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(Ce,{children:o?n.jsx(St,{className:"h-8 w-20"}):n.jsx("div",{className:"text-2xl font-bold",children:s.totalOrganizers})})]}),n.jsxs(je,{className:"cursor-pointer hover:bg-accent",onClick:()=>e("/admin/claims"),children:[n.jsxs(We,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ge,{className:"text-sm font-medium",children:"Solicitaes Pendentes"}),n.jsx(dl,{className:"h-4 w-4 text-yellow-500"})]}),n.jsx(Ce,{children:o?n.jsx(St,{className:"h-8 w-20"}):n.jsx("div",{className:"text-2xl font-bold",children:s.pendingClaims})})]}),n.jsxs(je,{className:"cursor-pointer hover:bg-accent",onClick:()=>e("/admin/support"),children:[n.jsxs(We,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ge,{className:"text-sm font-medium",children:"Mensagens de Suporte"}),n.jsx(Ox,{className:"h-4 w-4 text-blue-500"})]}),n.jsx(Ce,{children:o?n.jsx(St,{className:"h-8 w-20"}):n.jsx("div",{className:"text-2xl font-bold",children:s.unreadSupport})})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[n.jsxs(je,{children:[n.jsxs(We,{children:[n.jsx(Ge,{children:"Repasses de Organizadores"}),n.jsx(cn,{children:"Gerencie pagamentos e repasses para organizadores"})]}),n.jsx(Ce,{children:n.jsxs(K,{onClick:()=>e("/admin/organizer-payments"),className:"w-full",children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),"Ver Repasses"]})})]}),n.jsxs(je,{children:[n.jsxs(We,{children:[n.jsx(Ge,{children:"Eventos da Plataforma"}),n.jsx(cn,{children:"Gerencie todos os eventos oficiais da plataforma"})]}),n.jsxs(Ce,{className:"space-y-2",children:[n.jsx(K,{onClick:()=>e("/admin/platform-events"),className:"w-full",variant:"outline",children:"Ver Todos os Eventos"}),n.jsx(K,{onClick:()=>e("/admin/create-platform-event"),className:"w-full",children:"Criar Novo Evento"})]})]}),n.jsxs(je,{children:[n.jsxs(We,{children:[n.jsx(Ge,{children:"Gerao Automtica"}),n.jsx(cn,{children:"Use IA para extrair eventos de APIs externas"})]}),n.jsxs(Ce,{className:"space-y-2",children:[n.jsx(K,{onClick:()=>e("/admin/auto-generate-events"),className:"w-full",children:"Gerar Eventos com IA"}),n.jsx(K,{onClick:()=>e("/admin/pending-events"),className:"w-full",variant:"outline",children:"Ver Eventos Pendentes"})]})]}),n.jsxs(je,{children:[n.jsxs(We,{children:[n.jsx(Ge,{children:"Gerenciar Solicitaes"}),n.jsx(cn,{children:"Aprove ou rejeite pedidos de associao de eventos"})]}),n.jsx(Ce,{children:n.jsx(K,{onClick:()=>e("/admin/claims"),variant:"outline",className:"w-full",children:"Ver Solicitaes"})})]})]})]})}function Qq(){const e=_t(),{user:t}=bt(),{isAdmin:r}=Fs(),[s,a]=v.useState(!1),[o,c]=v.useState("presencial"),[u,f]=v.useState(!0),[p,x]=v.useState(!1),[w,_]=v.useState([]),[j,N]=v.useState(!1),[C,T]=v.useState(null),[E,S]=v.useState(null),[b,k]=v.useState({title:"",description:"",organizer_name:"",date:"",time:"",end_date:"",end_time:"",address:"",location_link:"",max_attendees:"",ticket_price:"",ticket_link:""}),[O,L]=v.useState([]);if(!r)return e("/"),null;const P=R=>{var Y;const $=(Y=R.target.files)==null?void 0:Y[0];if($){S($);const z=new FileReader;z.onload=q=>{var ee;T((ee=q.target)==null?void 0:ee.result)},z.readAsDataURL($)}},M=async R=>{if(R.preventDefault(),!!t){if(!b.title||!b.organizer_name||!b.date||!b.time||!b.end_date||!b.end_time){X.error("Preencha todos os campos obrigatrios");return}if(o==="presencial"&&!b.address){X.error("Preencha o endereo do evento");return}if(o==="live"&&!b.location_link){X.error("Preencha o link da transmisso");return}a(!0);try{let $=null;if(E){const ee=E.name.split(".").pop(),H=`platform-events/${Date.now()}.${ee}`,{error:re}=await U.storage.from("user-uploads").upload(H,E);if(re)throw re;const{data:{publicUrl:ae}}=U.storage.from("user-uploads").getPublicUrl(H);$=ae}const Y=new Date(`${b.date}T${b.time}`),z=new Date(`${b.end_date}T${b.end_time}`),{error:q}=await U.from("platform_events").insert({title:b.title,description:b.description,organizer_name:b.organizer_name,event_date:Y.toISOString(),end_date:z.toISOString(),location:o==="live"?"Online":b.address,location_link:b.location_link||null,category:O.length>0?O:null,max_attendees:b.max_attendees?parseInt(b.max_attendees):null,image_url:$,created_by_admin_id:t.id});if(q)throw q;X.success("Evento da plataforma criado com sucesso!"),e("/admin")}catch($){console.error("Error creating platform event:",$),X.error("Erro ao criar evento: "+$.message)}finally{a(!1)}}};return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b border-border",children:n.jsxs("div",{className:"flex items-center justify-between p-4 max-w-md mx-auto",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>e("/admin"),children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Criar Evento da Plataforma"}),n.jsx("div",{className:"w-10"})]})}),n.jsxs("div",{className:"p-4 max-w-md mx-auto pb-20",children:[n.jsx("div",{className:"mb-4 p-3 bg-primary/10 rounded-lg border border-primary/20",children:n.jsx("p",{className:"text-sm text-muted-foreground",children:"Eventos da plataforma no so associados a nenhum organizador especfico. Organizadores podero reivindicar esses eventos."})}),n.jsxs("form",{onSubmit:M,className:"space-y-6",children:[n.jsxs(je,{children:[n.jsx(We,{children:n.jsx(Ge,{className:"text-sm",children:"Arte do Evento"})}),n.jsx(Ce,{children:n.jsx("div",{className:"relative",children:C?n.jsxs("div",{className:"relative h-48 rounded-lg overflow-hidden",children:[n.jsx("img",{src:C,alt:"Preview do evento",className:"w-full h-full object-cover"}),n.jsx(K,{type:"button",variant:"secondary",size:"sm",className:"absolute top-2 right-2",onClick:()=>{T(null),S(null)},children:"Remover"})]}):n.jsxs("label",{className:"flex flex-col items-center justify-center h-48 border-2 border-dashed border-border rounded-lg cursor-pointer hover:border-primary/50 transition-colors",children:[n.jsx(Ms,{className:"h-8 w-8 text-muted-foreground mb-2"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"Clique para adicionar uma imagem"}),n.jsx("input",{type:"file",accept:"image/*",onChange:P,className:"hidden"})]})})})]}),n.jsxs(je,{children:[n.jsx(We,{children:n.jsx(Ge,{className:"text-sm",children:"Informaes Bsicas"})}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"title",children:"Nome do Evento *"}),n.jsx(we,{id:"title",placeholder:"Digite o nome do evento",value:b.title,onChange:R=>k({...b,title:R.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"organizer_name",children:"Nome do Organizador *"}),n.jsx(we,{id:"organizer_name",placeholder:"Nome que aparecer como organizador",value:b.organizer_name,onChange:R=>k({...b,organizer_name:R.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"description",children:"Descrio"}),n.jsx(An,{id:"description",placeholder:"Descreva o evento...",value:b.description,onChange:R=>k({...b,description:R.target.value}),rows:3})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"category",children:"Categorias"}),n.jsx(cp,{value:O,onChange:L,placeholder:"Selecione uma ou mais categorias"})]})]})]}),n.jsxs(je,{children:[n.jsx(We,{children:n.jsx(Ge,{className:"text-sm",children:"Tipo de Evento"})}),n.jsx(Ce,{children:n.jsxs(zi,{value:o,onValueChange:R=>c(R),children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(sn,{value:"presencial",id:"presencial"}),n.jsx(de,{htmlFor:"presencial",className:"cursor-pointer",children:" Evento Presencial"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(sn,{value:"live",id:"live"}),n.jsx(de,{htmlFor:"live",className:"cursor-pointer",children:" Evento Live (Online)"})]})]})})]}),n.jsxs(je,{children:[n.jsx(We,{children:n.jsxs(Ge,{className:"text-sm flex items-center gap-2",children:[n.jsx(Et,{className:"h-4 w-4"}),"Data e Hora"]})}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(de,{className:"text-sm font-medium mb-2 block",children:"Incio do Evento"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"date",className:"text-xs text-muted-foreground",children:"Data *"}),n.jsx(we,{id:"date",type:"date",value:b.date,onChange:R=>k({...b,date:R.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"time",className:"text-xs text-muted-foreground",children:"Horrio *"}),n.jsx(we,{id:"time",type:"time",value:b.time,onChange:R=>k({...b,time:R.target.value}),required:!0})]})]})]}),n.jsxs("div",{className:"pt-2 border-t",children:[n.jsx(de,{className:"text-sm font-medium mb-2 block",children:"Encerramento do Evento *"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"end_date",className:"text-xs text-muted-foreground",children:"Data *"}),n.jsx(we,{id:"end_date",type:"date",value:b.end_date,onChange:R=>k({...b,end_date:R.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"end_time",className:"text-xs text-muted-foreground",children:"Horrio *"}),n.jsx(we,{id:"end_time",type:"time",value:b.end_time,onChange:R=>k({...b,end_time:R.target.value}),required:!0})]})]})]})]})]}),n.jsxs(je,{children:[n.jsx(We,{children:n.jsxs(Ge,{className:"text-sm flex items-center gap-2",children:[n.jsx(Rt,{className:"h-4 w-4"}),o==="live"?"Link da Transmisso":"Localizao"]})}),n.jsx(Ce,{className:"space-y-4",children:o==="presencial"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"address",children:"Endereo Completo *"}),n.jsx(we,{id:"address",placeholder:"Rua, nmero, bairro, cidade...",value:b.address,onChange:R=>k({...b,address:R.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"location_link",children:"Link do Endereo"}),n.jsx(we,{id:"location_link",type:"url",placeholder:"https://maps.google.com/...",value:b.location_link,onChange:R=>k({...b,location_link:R.target.value})})]})]}):n.jsxs("div",{children:[n.jsx(de,{htmlFor:"location_link",children:"Link da Transmisso *"}),n.jsx(we,{id:"location_link",type:"url",placeholder:"https://youtube.com/... ou outro link",value:b.location_link,onChange:R=>k({...b,location_link:R.target.value}),required:!0})]})})]}),n.jsxs(je,{children:[n.jsx(We,{children:n.jsxs(Ge,{className:"text-sm flex items-center gap-2",children:[n.jsx(er,{className:"h-4 w-4"}),"Capacidade e Ingresso"]})}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"max_attendees",children:"Nmero Mximo de Participantes"}),n.jsx(we,{id:"max_attendees",type:"number",placeholder:"Deixe em branco para ilimitado",value:b.max_attendees,onChange:R=>k({...b,max_attendees:R.target.value}),min:"1"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(de,{htmlFor:"is_free",children:"Evento Gratuito"}),n.jsx(Tr,{id:"is_free",checked:u,onCheckedChange:f})]}),!u&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsxs(de,{htmlFor:"ticket_price",className:"flex items-center gap-2",children:[n.jsx(Sn,{className:"h-4 w-4"}),"Valor do Ingresso"]}),n.jsx(we,{id:"ticket_price",placeholder:"Ex: R$ 50,00",value:b.ticket_price,onChange:R=>k({...b,ticket_price:R.target.value})})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"ticket_link",children:"Link para Compra"}),n.jsx(we,{id:"ticket_link",type:"url",placeholder:"https://...",value:b.ticket_link,onChange:R=>k({...b,ticket_link:R.target.value})})]})]})]})]}),n.jsxs(je,{children:[n.jsx(We,{children:n.jsxs(Ge,{className:"text-sm flex items-center gap-2",children:[n.jsx(Sc,{className:"h-4 w-4"}),"Formulrio de Cadastro"]})}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"requires_registration",children:"Requer Cadastro dos Participantes"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Nome, email e telefone sempre sero coletados"})]}),n.jsx(Tr,{id:"requires_registration",checked:p,onCheckedChange:x})]}),p&&n.jsxs(K,{type:"button",variant:"outline",onClick:()=>N(!0),className:"w-full",children:["Configurar Campos Personalizados",w.length>0&&n.jsx("span",{className:"ml-2 text-xs bg-primary text-primary-foreground px-2 py-0.5 rounded",children:w.length})]})]})]}),n.jsx(K,{type:"submit",className:"w-full",disabled:s,children:s?"Criando...":"Criar Evento"})]})]}),n.jsx(cA,{open:j,onOpenChange:N,fields:w,onSave:_})]})}function Zq(){const e=_t(),{user:t}=bt(),{isAdmin:r,loading:s}=Fs(),[a,o]=v.useState([]),[c,u]=v.useState(!0);v.useEffect(()=>{if(!s&&!r){e("/");return}r&&f()},[r,s,e]);const f=async()=>{try{const{data:w,error:_}=await U.from("event_claim_requests").select(`
          *,
          platform_events (id, title, organizer_name, event_date, location, image_url, description),
          organizers (id, username, page_title, avatar_url, page_description, category)
        `).order("created_at",{ascending:!1});if(_)throw _;o(w||[])}catch(w){console.error("Error fetching requests:",w),X.error("Erro ao carregar solicitaes")}finally{u(!1)}},p=async(w,_,j)=>{if(t)try{const{data:N,error:C}=await U.from("platform_events").select("*").eq("id",_).single();if(C)throw C;if(!N)throw new Error("Evento no encontrado");const{data:T}=await U.from("events").select("id").eq("organizer_id",j).eq("title",N.title).maybeSingle();if(T){X.error("Este evento j foi criado para este organizador");return}const{data:E,error:S}=await U.from("events").insert({organizer_id:j,title:N.title,description:N.description,event_date:N.event_date,end_date:N.end_date,location:N.location,location_link:N.location_link,image_url:N.image_url,category:N.category,max_attendees:N.max_attendees,ticket_price:N.ticket_price,ticket_link:N.ticket_link,status:N.status||"upcoming",current_attendees:0,is_live:!1}).select().single();if(S)throw S;const{error:b}=await U.from("platform_events").update({claimed_by_organizer_id:j,approval_status:"approved"}).eq("id",_);if(b)throw b;const{error:k}=await U.from("event_claim_requests").update({status:"approved",reviewed_at:new Date().toISOString(),reviewed_by_admin_id:t.id}).eq("id",w);if(k)throw k;X.success("Solicitao aprovada! Evento criado para o organizador e j est disponvel no perfil dele."),f()}catch(N){console.error("Error approving request:",N),X.error("Erro ao aprovar: "+N.message)}},x=async w=>{if(t)try{const{error:_}=await U.from("event_claim_requests").update({status:"rejected",reviewed_at:new Date().toISOString(),reviewed_by_admin_id:t.id}).eq("id",w);if(_)throw _;X.success("Solicitao rejeitada"),f()}catch(_){console.error("Error rejecting request:",_),X.error("Erro ao rejeitar: "+_.message)}};return s||!r?null:n.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[n.jsxs(K,{variant:"ghost",onClick:()=>e("/admin"),className:"mb-4",children:[n.jsx(gt,{className:"mr-2 h-4 w-4"}),"Voltar"]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Solicitaes de Associao"}),n.jsx("p",{className:"text-muted-foreground",children:"Gerencie pedidos de organizadores para eventos da plataforma"})]}),c?n.jsx("div",{className:"space-y-4",children:[1,2,3].map(w=>n.jsxs(je,{children:[n.jsxs(We,{children:[n.jsx(St,{className:"h-6 w-3/4"}),n.jsx(St,{className:"h-4 w-1/2 mt-2"})]}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsx(St,{className:"h-20"}),n.jsx(St,{className:"h-20"})]}),n.jsx(St,{className:"h-24"})]})]},w))}):a.length===0?n.jsx(je,{className:"border-2 border-dashed",children:n.jsxs(Ce,{className:"py-16 text-center",children:[n.jsx(Ox,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Nenhuma solicitao ainda"}),n.jsx("p",{className:"text-muted-foreground max-w-md mx-auto",children:"Quando organizadores solicitarem associao a eventos da plataforma, eles aparecero aqui para voc aprovar ou rejeitar."})]})}):n.jsx("div",{className:"space-y-6",children:a.map(w=>n.jsxs(je,{className:"overflow-hidden",children:[w.platform_events.image_url&&n.jsx("div",{className:"h-48 overflow-hidden",children:n.jsx("img",{src:w.platform_events.image_url,alt:w.platform_events.title,className:"w-full h-full object-cover"})}),n.jsx(We,{children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"space-y-1 flex-1",children:[n.jsx(Ge,{className:"text-2xl",children:w.platform_events.title}),n.jsxs(cn,{children:["Solicitado em ",ln(new Date(w.created_at),"d 'de' MMMM 's' HH:mm",{locale:Ir})]})]}),n.jsx(dt,{variant:w.status==="pending"?"default":w.status==="approved"?"secondary":"destructive",className:"text-sm",children:w.status==="pending"?" Pendente":w.status==="approved"?" Aprovado":" Rejeitado"})]})}),n.jsxs(Ce,{className:"space-y-6",children:[n.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg space-y-3",children:[n.jsx("h3",{className:"font-semibold text-sm uppercase tracking-wide text-muted-foreground",children:"Detalhes do Evento"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Et,{className:"h-4 w-4 mt-0.5 text-muted-foreground"}),n.jsx("span",{className:"text-sm",children:ln(new Date(w.platform_events.event_date),"d 'de' MMMM 'de' yyyy 's' HH:mm",{locale:Ir})})]}),n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Rt,{className:"h-4 w-4 mt-0.5 text-muted-foreground"}),n.jsx("span",{className:"text-sm",children:w.platform_events.location})]}),w.platform_events.description&&n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:w.platform_events.description})]})]}),n.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg space-y-3",children:[n.jsx("h3",{className:"font-semibold text-sm uppercase tracking-wide text-muted-foreground",children:"Organizador Solicitante"}),n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsxs($t,{className:"h-16 w-16",children:[n.jsx(Kt,{src:w.organizers.avatar_url||""}),n.jsx(Vt,{children:n.jsx(hs,{className:"h-8 w-8"})})]}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("p",{className:"font-semibold text-lg",children:w.organizers.page_title}),w.organizers.category&&n.jsx(dt,{variant:"outline",className:"text-xs",children:w.organizers.category})]}),n.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["@",w.organizers.username]}),w.organizers.page_description&&n.jsx("p",{className:"text-sm text-muted-foreground",children:w.organizers.page_description})]})]})]}),w.message&&n.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex gap-2 mb-2",children:[n.jsx(Ox,{className:"h-4 w-4 text-blue-500 mt-0.5"}),n.jsx("p",{className:"text-sm font-medium text-blue-500",children:"Mensagem do Organizador"})]}),n.jsx("p",{className:"text-sm pl-6",children:w.message})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[n.jsxs(K,{variant:"outline",onClick:()=>e(`/${w.organizers.username}`),className:"flex-1 min-w-[200px]",children:[n.jsx(Vr,{className:"mr-2 h-4 w-4"}),"Ver Perfil Completo"]}),w.status==="pending"&&n.jsxs(n.Fragment,{children:[n.jsxs(K,{onClick:()=>p(w.id,w.platform_events.id,w.organizers.id),className:"flex-1 min-w-[150px]",children:[n.jsx(as,{className:"mr-2 h-4 w-4"}),"Aprovar"]}),n.jsxs(K,{variant:"destructive",onClick:()=>x(w.id),className:"flex-1 min-w-[150px]",children:[n.jsx(ef,{className:"mr-2 h-4 w-4"}),"Rejeitar"]})]})]})]})]},w.id))})]})}function Jq(){const e=_t(),{isAdmin:t,loading:r}=Fs(),[s,a]=v.useState([]),[o,c]=v.useState(!0);v.useEffect(()=>{!r&&!t&&e("/")},[t,r,e]),v.useEffect(()=>{t&&u()},[t]);const u=async()=>{try{const{data:N,error:C}=await U.from("platform_events").select("*").order("event_date",{ascending:!0});if(C)throw C;const T=new Date,E=(N||[]).filter(S=>new Date(S.end_date||S.event_date)<T&&S.status!=="ended");if(E.length>0){const S=E.map(O=>U.from("platform_events").update({status:"ended"}).eq("id",O.id));await Promise.all(S),console.log(`Auto-ended ${E.length} past events`);const{data:b,error:k}=await U.from("platform_events").select("*").order("event_date",{ascending:!0});if(k)throw k;a(b||[])}else a(N||[])}catch(N){console.error("Error fetching platform events:",N),X.error("Erro ao carregar eventos")}finally{c(!1)}},f=async N=>{try{const{error:C}=await U.from("platform_events").update({status:"ended"}).eq("id",N);if(C)throw C;X.success("Evento encerrado com sucesso"),u()}catch(C){console.error("Error ending event:",C),X.error("Erro ao encerrar evento")}},p=async N=>{if(confirm("Tem certeza que deseja excluir este evento? Esta ao no pode ser desfeita."))try{const{error:C}=await U.from("platform_events").delete().eq("id",N);if(C)throw C;X.success("Evento excludo com sucesso"),u()}catch(C){console.error("Error deleting event:",C),X.error("Erro ao excluir evento")}},x=()=>{const N=new Date,C=s.filter(S=>{const b=new Date(S.event_date);return S.end_date&&new Date(S.end_date),b>N&&S.status!=="ended"}),T=s.filter(S=>{const b=new Date(S.event_date),k=S.end_date?new Date(S.end_date):null;return b<=N&&(!k||k>N)&&S.status!=="ended"}),E=s.filter(S=>(S.end_date?new Date(S.end_date):new Date(S.event_date))<N||S.status==="ended");return{upcoming:C,live:T,ended:E}},{upcoming:w,live:_,ended:j}=x();return r||!t?null:n.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx(K,{variant:"ghost",onClick:()=>e("/admin"),children:" Voltar"}),n.jsx("h1",{className:"text-3xl font-bold mt-2",children:"Eventos da Plataforma"}),n.jsx("p",{className:"text-muted-foreground",children:"Gerencie todos os eventos criados pela plataforma"})]}),n.jsx(K,{onClick:()=>e("/admin/create-platform-event"),children:"Criar Novo Evento"})]}),o?n.jsx("div",{className:"grid gap-4 md:grid-cols-3 lg:grid-cols-4",children:[1,2,3,4].map(N=>n.jsx(St,{className:"h-48"},N))}):s.length===0?n.jsx(je,{children:n.jsx(Ce,{className:"py-12 text-center",children:n.jsx("p",{className:"text-muted-foreground",children:"Nenhum evento da plataforma encontrado"})})}):n.jsxs("div",{className:"space-y-8",children:[_.length>0&&n.jsxs("div",{children:[n.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[n.jsx("div",{className:"h-3 w-3 bg-green-500 rounded-full animate-pulse"}),"Acontecendo Agora (",_.length,")"]}),n.jsx("div",{className:"grid gap-3 md:grid-cols-3 lg:grid-cols-4",children:_.map(N=>n.jsxs(je,{className:"overflow-hidden",children:[N.image_url&&n.jsx("div",{className:"h-32 overflow-hidden",children:n.jsx("img",{src:N.image_url,alt:N.title,className:"w-full h-full object-cover"})}),n.jsxs(We,{className:"p-3",children:[n.jsx(Ge,{className:"text-sm line-clamp-2",children:N.title}),n.jsx("p",{className:"text-xs text-muted-foreground",children:N.organizer_name})]}),n.jsxs(Ce,{className:"p-3 pt-0 space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[n.jsx(Et,{className:"h-3 w-3"}),n.jsx("span",{className:"truncate",children:ln(new Date(N.event_date),"d/MM 's' HH:mm",{locale:Ir})})]}),n.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[n.jsx(Rt,{className:"h-3 w-3"}),n.jsx("span",{className:"truncate",children:N.location})]}),n.jsxs("div",{className:"flex gap-1 pt-1",children:[n.jsx(K,{variant:"outline",size:"sm",onClick:()=>e(`/admin/platform-event/${N.id}/edit`),className:"flex-1 h-7 text-xs",children:n.jsx(rs,{className:"h-3 w-3"})}),n.jsx(K,{variant:"outline",size:"sm",onClick:()=>e(`/admin/platform-event/${N.id}/registrations`),className:"flex-1 h-7 text-xs",children:n.jsx(as,{className:"h-3 w-3"})}),n.jsx(K,{variant:"destructive",size:"sm",onClick:()=>f(N.id),className:"h-7 text-xs",children:n.jsx(ef,{className:"h-3 w-3"})})]})]})]},N.id))})]}),w.length>0&&n.jsxs("div",{children:[n.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[n.jsx(Et,{className:"h-5 w-5 text-blue-500"}),"Prximos Eventos (",w.length,")"]}),n.jsx("div",{className:"grid gap-3 md:grid-cols-3 lg:grid-cols-4",children:w.map(N=>n.jsxs(je,{className:"overflow-hidden",children:[N.image_url&&n.jsx("div",{className:"h-32 overflow-hidden",children:n.jsx("img",{src:N.image_url,alt:N.title,className:"w-full h-full object-cover"})}),n.jsxs(We,{className:"p-3",children:[n.jsx(Ge,{className:"text-sm line-clamp-2",children:N.title}),n.jsx("p",{className:"text-xs text-muted-foreground",children:N.organizer_name})]}),n.jsxs(Ce,{className:"p-3 pt-0 space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[n.jsx(Et,{className:"h-3 w-3"}),n.jsx("span",{className:"truncate",children:ln(new Date(N.event_date),"d/MM 's' HH:mm",{locale:Ir})})]}),n.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[n.jsx(Rt,{className:"h-3 w-3"}),n.jsx("span",{className:"truncate",children:N.location})]}),n.jsxs("div",{className:"flex gap-1 pt-1",children:[n.jsx(K,{variant:"outline",size:"sm",onClick:()=>e(`/admin/platform-event/${N.id}/edit`),className:"flex-1 h-7 text-xs",children:n.jsx(rs,{className:"h-3 w-3"})}),n.jsx(K,{variant:"outline",size:"sm",onClick:()=>e(`/admin/platform-event/${N.id}/registrations`),className:"flex-1 h-7 text-xs",children:n.jsx(as,{className:"h-3 w-3"})}),n.jsx(K,{variant:"destructive",size:"sm",onClick:()=>f(N.id),className:"h-7 text-xs",children:n.jsx(ef,{className:"h-3 w-3"})})]})]})]},N.id))})]}),j.length>0&&n.jsxs("div",{children:[n.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2 text-muted-foreground",children:[n.jsx(as,{className:"h-5 w-5"}),"Eventos Realizados (",j.length,")"]}),n.jsx("div",{className:"grid gap-3 md:grid-cols-3 lg:grid-cols-4",children:j.map(N=>n.jsxs(je,{className:"overflow-hidden opacity-75",children:[N.image_url&&n.jsx("div",{className:"h-32 overflow-hidden",children:n.jsx("img",{src:N.image_url,alt:N.title,className:"w-full h-full object-cover grayscale"})}),n.jsxs(We,{className:"p-3",children:[n.jsx(Ge,{className:"text-sm line-clamp-2",children:N.title}),n.jsx("p",{className:"text-xs text-muted-foreground",children:N.organizer_name})]}),n.jsxs(Ce,{className:"p-3 pt-0 space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[n.jsx(Et,{className:"h-3 w-3"}),n.jsx("span",{className:"truncate",children:ln(new Date(N.event_date),"d/MM 's' HH:mm",{locale:Ir})})]}),n.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[n.jsx(Rt,{className:"h-3 w-3"}),n.jsx("span",{className:"truncate",children:N.location})]}),n.jsxs("div",{className:"flex gap-1 pt-1",children:[n.jsx(K,{variant:"outline",size:"sm",onClick:()=>e(`/admin/platform-event/${N.id}/registrations`),className:"flex-1 h-7 text-xs",children:n.jsx(as,{className:"h-3 w-3"})}),n.jsx(K,{variant:"destructive",size:"sm",onClick:()=>p(N.id),className:"h-7 text-xs",children:n.jsx(ef,{className:"h-3 w-3"})})]})]})]},N.id))})]})]})]})}function eW(){const{eventId:e}=hl(),t=_t(),{isAdmin:r,loading:s}=Fs(),[a,o]=v.useState(!0),[c,u]=v.useState(!1),[f,p]=v.useState(!1),[x,w]=v.useState({title:"",description:"",event_date:"",end_date:"",location:"",location_link:"",organizer_name:"",max_attendees:"",ticket_price:"",ticket_link:""}),[_,j]=v.useState([]),[N,C]=v.useState(null),[T,E]=v.useState(null),[S,b]=v.useState(!1);v.useEffect(()=>{!s&&!r&&t("/")},[r,s,t]),v.useEffect(()=>{r&&e&&k()},[r,e]);const k=async()=>{var M,R;try{const{data:$,error:Y}=await U.from("platform_events").select("*").eq("id",e).single();if(Y)throw Y;w({title:$.title,description:$.description||"",event_date:$.event_date,end_date:$.end_date||"",location:$.location,location_link:$.location_link||"",organizer_name:$.organizer_name,max_attendees:((M=$.max_attendees)==null?void 0:M.toString())||"",ticket_price:((R=$.ticket_price)==null?void 0:R.toString())||"",ticket_link:$.ticket_link||""}),j($.category||[]),C($.image_url||null);const z=$.ticket_price,q=$.ticket_link;b(!!(z&&z>0)||!!q)}catch($){console.error("Error fetching event:",$),X.error("Erro ao carregar evento")}finally{o(!1)}},O=M=>{var $;const R=($=M.target.files)==null?void 0:$[0];if(R){E(R);const Y=new FileReader;Y.onload=z=>{var q;C((q=z.target)==null?void 0:q.result)},Y.readAsDataURL(R)}},L=async M=>{M.preventDefault(),u(!0);try{let R=N;if(T){const Y=T.name.split(".").pop(),z=`platform-events/${Date.now()}.${Y}`,{error:q}=await U.storage.from("user-uploads").upload(z,T);if(q)throw q;const{data:{publicUrl:ee}}=U.storage.from("user-uploads").getPublicUrl(z);R=ee}const{error:$}=await U.from("platform_events").update({title:x.title,description:x.description,event_date:x.event_date,end_date:x.end_date||null,location:x.location,location_link:x.location_link||null,organizer_name:x.organizer_name,max_attendees:x.max_attendees?parseInt(x.max_attendees):null,category:_.length>0?_:null,image_url:R,ticket_price:S&&x.ticket_price?parseFloat(x.ticket_price):0,ticket_link:S&&x.ticket_link||null,updated_at:new Date().toISOString()}).eq("id",e);if($)throw $;X.success("Evento atualizado com sucesso!"),t("/admin/platform-events")}catch(R){console.error("Error updating event:",R),X.error("Erro ao atualizar evento")}finally{u(!1)}},P=async()=>{if(!x.title||!x.organizer_name||!x.event_date||!x.location){X.error("Preencha os campos obrigatrios antes de gerar a descrio");return}p(!0);try{const{data:M,error:R}=await U.functions.invoke("generate-event-description",{body:{title:x.title,organizerName:x.organizer_name,eventDate:x.event_date,location:x.location,category:_,ticketPrice:S&&x.ticket_price?parseFloat(x.ticket_price):0}});if(R)throw R;if(M!=null&&M.description)w({...x,description:M.description}),X.success("Descrio gerada com sucesso!");else throw new Error("Nenhuma descrio foi gerada")}catch(M){console.error("Error generating description:",M),X.error("Erro ao gerar descrio. Tente novamente.")}finally{p(!1)}};return s||!r||a?null:n.jsxs("div",{className:"container mx-auto p-6 max-w-2xl",children:[n.jsx(K,{variant:"ghost",onClick:()=>t("/admin/platform-events"),className:"mb-4",children:" Voltar"}),n.jsxs(je,{children:[n.jsx(We,{children:n.jsx(Ge,{children:"Editar Evento da Plataforma"})}),n.jsx(Ce,{children:n.jsxs("form",{onSubmit:L,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(de,{children:"Banner do Evento"}),n.jsx("div",{className:"mt-2",children:N?n.jsxs("div",{className:"relative h-48 rounded-lg overflow-hidden",children:[n.jsx("img",{src:N,alt:"Preview do evento",className:"w-full h-full object-cover"}),n.jsx(K,{type:"button",variant:"secondary",size:"sm",className:"absolute top-2 right-2",onClick:()=>{C(null),E(null)},children:"Remover"})]}):n.jsxs("label",{className:"flex flex-col items-center justify-center h-48 border-2 border-dashed border-border rounded-lg cursor-pointer hover:border-primary/50 transition-colors",children:[n.jsx(Ms,{className:"h-8 w-8 text-muted-foreground mb-2"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"Clique para adicionar uma imagem"}),n.jsx("input",{type:"file",accept:"image/*",onChange:O,className:"hidden"})]})})]}),n.jsxs("div",{children:[n.jsx(de,{children:"Ttulo do Evento"}),n.jsx(we,{value:x.title,onChange:M=>w({...x,title:M.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsx(de,{children:"Nome do Organizador"}),n.jsx(we,{value:x.organizer_name,onChange:M=>w({...x,organizer_name:M.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx(de,{children:"Descrio"}),n.jsxs(K,{type:"button",variant:"outline",size:"sm",onClick:P,disabled:f||!x.title,children:[n.jsx(iu,{className:"h-4 w-4 mr-2"}),f?"Gerando...":"Gerar com IA"]})]}),n.jsx(An,{value:x.description,onChange:M=>w({...x,description:M.target.value}),rows:4,placeholder:"Clique em 'Gerar com IA' para criar uma descrio automtica ou escreva manualmente"})]}),n.jsxs("div",{children:[n.jsx(de,{children:"Categorias"}),n.jsx(cp,{value:_,onChange:j,placeholder:"Selecione uma ou mais categorias"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(de,{children:"Data/Hora Incio *"}),n.jsx(we,{type:"datetime-local",value:x.event_date,onChange:M=>w({...x,event_date:M.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsx(de,{children:"Data/Hora Fim *"}),n.jsx(we,{type:"datetime-local",value:x.end_date,onChange:M=>w({...x,end_date:M.target.value}),required:!0})]})]}),n.jsxs("div",{children:[n.jsx(de,{children:"Local"}),n.jsx(we,{value:x.location,onChange:M=>w({...x,location:M.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsx(de,{children:"Link do Local"}),n.jsx(we,{type:"url",value:x.location_link,onChange:M=>w({...x,location_link:M.target.value}),placeholder:"https://maps.google.com/..."})]}),n.jsxs("div",{children:[n.jsx(de,{children:"Capacidade Mxima"}),n.jsx(we,{type:"number",value:x.max_attendees,onChange:M=>w({...x,max_attendees:M.target.value}),placeholder:"Deixe em branco para ilimitado"})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[n.jsx("h3",{className:"font-medium",children:"Informaes de Pagamento"}),n.jsxs("div",{children:[n.jsx(de,{children:"Tipo de Evento"}),n.jsxs(zi,{value:S?"paid":"free",onValueChange:M=>{b(M==="paid"),M==="free"&&w({...x,ticket_price:"",ticket_link:""})},className:"flex gap-4 mt-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(sn,{value:"free",id:"free"}),n.jsx(de,{htmlFor:"free",className:"cursor-pointer font-normal",children:" Gratuito"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(sn,{value:"paid",id:"paid"}),n.jsx(de,{htmlFor:"paid",className:"cursor-pointer font-normal",children:" Pago"})]})]})]}),S&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(de,{children:"Preo do Ingresso (R$)"}),n.jsx(we,{type:"number",step:"0.01",min:"0",value:x.ticket_price,onChange:M=>w({...x,ticket_price:M.target.value}),placeholder:"Ex: 50.00"})]}),n.jsxs("div",{children:[n.jsx(de,{children:"Link de Pagamento/Ingresso"}),n.jsx(we,{type:"url",value:x.ticket_link,onChange:M=>w({...x,ticket_link:M.target.value}),placeholder:"https://sympla.com.br/..."}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Link externo para compra de ingressos (Sympla, Eventbrite, etc)"})]})]})]}),n.jsxs(K,{type:"submit",className:"w-full",disabled:c,children:[c&&n.jsx(ka,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvar Alteraes"]})]})})]})]})}function tW(){const{eventId:e}=hl(),t=_t(),{isAdmin:r,loading:s}=Fs(),[a,o]=v.useState([]),[c,u]=v.useState(""),[f,p]=v.useState(!0);v.useEffect(()=>{!s&&!r&&t("/")},[r,s,t]),v.useEffect(()=>{r&&e&&x()},[r,e]);const x=async()=>{try{const{data:_,error:j}=await U.from("platform_events").select("title").eq("id",e).single();if(j)throw j;u(_.title);const{data:N,error:C}=await U.from("event_registrations").select("*").eq("event_id",e).order("created_at",{ascending:!1});if(C)throw C;o(N||[])}catch(_){console.error("Error fetching data:",_),X.error("Erro ao carregar dados")}finally{p(!1)}};if(s||!r)return null;const w=a.filter(_=>_.attendance_confirmed).length;return n.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx(K,{variant:"ghost",onClick:()=>t("/admin/platform-events"),children:" Voltar"}),n.jsx("h1",{className:"text-3xl font-bold mt-2",children:c}),n.jsxs("p",{className:"text-muted-foreground",children:[a.length," cadastros | ",w," presenas confirmadas"]})]}),f?n.jsx("div",{className:"space-y-4",children:[1,2,3].map(_=>n.jsx(St,{className:"h-32"},_))}):a.length===0?n.jsx(je,{children:n.jsx(Ce,{className:"py-12 text-center",children:n.jsx("p",{className:"text-muted-foreground",children:"Nenhum cadastro encontrado"})})}):n.jsx("div",{className:"space-y-4",children:a.map(_=>n.jsxs(je,{children:[n.jsx(We,{children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs(Ge,{className:"text-lg flex items-center gap-2",children:[n.jsx(hs,{className:"h-5 w-5"}),_.user_name]}),_.attendance_confirmed&&n.jsxs("span",{className:"flex items-center gap-1 px-3 py-1 rounded-full bg-green-500/20 text-green-500 text-sm",children:[n.jsx(as,{className:"h-4 w-4"}),"Presena Confirmada"]})]})}),n.jsxs(Ce,{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Ru,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("a",{href:`mailto:${_.user_email}`,className:"hover:underline",children:_.user_email})]}),_.user_phone&&n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(zc,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("a",{href:`tel:${_.user_phone}`,className:"hover:underline",children:_.user_phone})]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Cadastrado em: ",ln(new Date(_.created_at),"d 'de' MMMM 'de' yyyy 's' HH:mm",{locale:Ir})]}),_.registration_data&&n.jsxs("div",{className:"mt-4 p-3 bg-muted rounded-lg",children:[n.jsx("p",{className:"text-sm font-medium mb-2",children:"Dados adicionais:"}),n.jsx("pre",{className:"text-xs overflow-auto",children:JSON.stringify(_.registration_data,null,2)})]})]})]},_.id))})]})}function rW(){var T;const e=_t(),{isAdmin:t}=Fs(),[r,s]=v.useState({}),[a,o]=v.useState(null),[c,u]=v.useState(""),[f,p]=v.useState(!0),[x,w]=v.useState(!1);v.useEffect(()=>{if(!t){e("/");return}_();const E=U.channel("support-messages").on("postgres_changes",{event:"*",schema:"public",table:"support_messages"},()=>{_()}).subscribe();return()=>{U.removeChannel(E)}},[t,e]);const _=async()=>{try{const{data:E,error:S}=await U.from("support_messages").select("*").order("created_at",{ascending:!0});if(S)throw S;const b=[...new Set((E==null?void 0:E.map(M=>M.user_id))||[])],{data:k,error:O}=await U.from("profiles").select("user_id, display_name, avatar_url").in("user_id",b);if(O)throw O;const L=new Map((k==null?void 0:k.map(M=>[M.user_id,M]))||[]),P={};E==null||E.forEach(M=>{const R=L.get(M.user_id);P[M.user_id]||(P[M.user_id]={user:{display_name:(R==null?void 0:R.display_name)||"Usurio",avatar_url:(R==null?void 0:R.avatar_url)||""},messages:[]}),P[M.user_id].messages.push({...M,profiles:{display_name:(R==null?void 0:R.display_name)||"Usurio",avatar_url:(R==null?void 0:R.avatar_url)||""}})}),s(P)}catch(E){console.error("Error fetching messages:",E),X.error("Erro ao carregar mensagens")}finally{p(!1)}},j=async()=>{if(!(!a||!c.trim())){w(!0);try{const{error:E}=await U.from("support_messages").insert({user_id:a,message:c,is_admin_reply:!0});if(E)throw E;u(""),X.success("Resposta enviada!"),_()}catch(E){console.error("Error sending reply:",E),X.error("Erro ao enviar: "+E.message)}finally{w(!1)}}},N=async E=>{try{await U.from("support_messages").update({read:!0}).eq("user_id",E).eq("is_admin_reply",!1)}catch(S){console.error("Error marking as read:",S)}};if(!t)return null;const C=a?((T=r[a])==null?void 0:T.messages)||[]:[];return n.jsxs("div",{className:"container mx-auto p-6 max-w-6xl",children:[n.jsxs(K,{variant:"ghost",onClick:()=>e("/admin"),className:"mb-4",children:[n.jsx(gt,{className:"mr-2 h-4 w-4"}),"Voltar"]}),n.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Chat de Suporte"}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[n.jsx(je,{className:"md:col-span-1",children:n.jsxs(Ce,{className:"p-4 space-y-2",children:[n.jsx("h2",{className:"font-semibold mb-4",children:"Conversas"}),f?n.jsx("div",{children:"Carregando..."}):Object.keys(r).length===0?n.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhuma mensagem"}):Object.entries(r).map(([E,S])=>{const b=S.messages.filter(k=>!k.is_admin_reply&&!k.read).length;return n.jsx("div",{onClick:()=>{o(E),N(E)},className:`p-3 rounded cursor-pointer hover:bg-accent ${a===E?"bg-accent":""}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[S.user.avatar_url&&n.jsx("img",{src:S.user.avatar_url,alt:"",className:"w-8 h-8 rounded-full"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-sm",children:S.user.display_name}),b>0&&n.jsxs("span",{className:"text-xs text-primary",children:[b," nova(s)"]})]})]})},E)})]})}),n.jsx(je,{className:"md:col-span-2",children:n.jsx(Ce,{className:"p-4",children:a?n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"h-[400px] overflow-y-auto space-y-3 mb-4",children:C.map(E=>n.jsx("div",{className:`flex ${E.is_admin_reply?"justify-end":"justify-start"}`,children:n.jsxs("div",{className:`max-w-[70%] p-3 rounded-lg ${E.is_admin_reply?"bg-primary text-primary-foreground":"bg-muted"}`,children:[n.jsx("p",{className:"text-sm",children:E.message}),n.jsx("p",{className:"text-xs opacity-70 mt-1",children:ln(new Date(E.created_at),"HH:mm",{locale:Ir})})]})},E.id))}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(An,{value:c,onChange:E=>u(E.target.value),placeholder:"Digite sua resposta...",rows:3}),n.jsx(K,{onClick:j,disabled:x||!c.trim(),children:n.jsx(T1,{className:"h-4 w-4"})})]})]}):n.jsx("div",{className:"h-[400px] flex items-center justify-center text-muted-foreground",children:"Selecione uma conversa"})})})]})]})}function nW(){const e=_t(),{isAdmin:t,loading:r}=Fs(),[s,a]=v.useState(""),[o,c]=v.useState(""),[u,f]=v.useState(!1),[p,x]=v.useState(null),[w,_]=v.useState(null);if(r)return null;if(!t)return e("/"),null;const j=T=>{var S;const E=(S=T.target.files)==null?void 0:S[0];if(E){x(E);const b=new FileReader;b.onloadend=()=>{_(b.result)},b.readAsDataURL(E)}},N=async()=>{if(!p){X.error("Por favor, selecione uma imagem");return}f(!0);try{const T=new FileReader;T.onloadend=async()=>{const E=T.result,{data:S,error:b}=await U.functions.invoke("extract-event-from-image",{body:{image:E}});if(b)throw b;if(S!=null&&S.success){const k=S.message||"Evento extrado da imagem com sucesso!";X.success(k+" Verifique e complete os campos necessrios na reviso."),e("/admin/pending-events")}else throw new Error((S==null?void 0:S.error)||"Erro ao extrair evento da imagem")},T.readAsDataURL(p)}catch(T){console.error("Error extracting from image:",T);const E=T instanceof Error?T.message:"Erro ao processar imagem";X.error(E)}finally{f(!1)}},C=async()=>{if(!s.trim()){X.error("Por favor, insira um endpoint de API");return}f(!0);try{const{data:T,error:E}=await U.functions.invoke("extract-events",{body:{apiEndpoint:s.trim(),apiKey:o.trim()||void 0}});if(E)throw E;if(T!=null&&T.success)X.success(T.message||"Eventos extrados com sucesso!"),e("/admin/pending-events");else throw new Error((T==null?void 0:T.error)||"Erro ao extrair eventos")}catch(T){console.error("Error extracting events:",T),X.error(T instanceof Error?T.message:"Erro ao processar dados")}finally{f(!1)}};return n.jsxs("div",{className:"container mx-auto p-6 space-y-6 max-w-2xl",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>e("/admin"),children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Gerar Eventos Automaticamente"}),n.jsx("p",{className:"text-muted-foreground",children:"Use IA para extrair eventos de APIs externas"})]})]}),n.jsxs(je,{children:[n.jsxs(We,{children:[n.jsxs(Ge,{className:"flex items-center gap-2",children:[n.jsx(Wi,{className:"h-5 w-5"}),"Extrair de Imagem"]}),n.jsx(cn,{children:'Faa upload de uma imagem de evento (flyer, cartaz, banner promocional) e nossa IA ir extrair todas as informaes disponveis automaticamente. No precisa ter todos os dados - voc pode completar manualmente os campos que faltarem. O evento ser salvo como "pendente" para reviso e edio antes da publicao.'})]}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"image",children:"Upload de Imagem *"}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx(we,{id:"image",type:"file",accept:"image/*",onChange:j,disabled:u,className:"cursor-pointer"}),w&&n.jsx("div",{className:"relative w-full aspect-video rounded-lg overflow-hidden border",children:n.jsx("img",{src:w,alt:"Preview",className:"w-full h-full object-contain bg-muted"})})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Formatos aceitos: JPG, PNG, WEBP"})]}),n.jsx("div",{className:"pt-4",children:n.jsx(K,{onClick:N,disabled:u||!p,className:"w-full",size:"lg",children:u?n.jsxs(n.Fragment,{children:[n.jsx(ka,{className:"mr-2 h-4 w-4 animate-spin"}),"Analisando imagem..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ms,{className:"mr-2 h-4 w-4"}),"Extrair Evento da Imagem"]})})}),n.jsxs("div",{className:"pt-4 border-t space-y-2",children:[n.jsx("h3",{className:"font-semibold text-sm",children:"Como funciona:"}),n.jsxs("ol",{className:"text-sm text-muted-foreground space-y-1 list-decimal list-inside",children:[n.jsx("li",{children:"A IA analisa a imagem e identifica informaes do evento"}),n.jsx("li",{children:"Extrai ttulo, data, local, preo e outras informaes disponveis"}),n.jsx("li",{children:'Cria o evento como "pendente" mesmo com dados incompletos'}),n.jsx("li",{children:"Voc completa os campos faltantes e aprova antes de publicar"})]})]})]})]}),n.jsxs(je,{children:[n.jsxs(We,{children:[n.jsxs(Ge,{className:"flex items-center gap-2",children:[n.jsx(iu,{className:"h-5 w-5"}),"Extrao de API Externa"]}),n.jsx(cn,{children:'Fornea um endpoint de API que retorne dados de eventos. Nossa IA ir analisar os dados e extrair automaticamente as informaes dos eventos. Os eventos sero salvos como "pendentes" para sua aprovao.'})]}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"endpoint",children:"Endpoint da API *"}),n.jsx(we,{id:"endpoint",type:"url",placeholder:"https://api.exemplo.com/eventos",value:s,onChange:T=>a(T.target.value),disabled:u}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"URL completa do endpoint que retorna dados de eventos (JSON ou HTML)"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"apiKey",children:"Chave API (opcional)"}),n.jsx(we,{id:"apiKey",type:"password",placeholder:"Bearer token ou API key",value:o,onChange:T=>c(T.target.value),disabled:u}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Se a API requer autenticao, insira a chave aqui"})]}),n.jsx("div",{className:"pt-4",children:n.jsx(K,{onClick:C,disabled:u||!s.trim(),className:"w-full",size:"lg",children:u?n.jsxs(n.Fragment,{children:[n.jsx(ka,{className:"mr-2 h-4 w-4 animate-spin"}),"Processando..."]}):n.jsxs(n.Fragment,{children:[n.jsx(iu,{className:"mr-2 h-4 w-4"}),"Extrair Eventos com IA"]})})}),n.jsxs("div",{className:"pt-4 border-t space-y-2",children:[n.jsx("h3",{className:"font-semibold text-sm",children:"Como funciona:"}),n.jsxs("ol",{className:"text-sm text-muted-foreground space-y-1 list-decimal list-inside",children:[n.jsx("li",{children:"A IA busca dados do endpoint fornecido"}),n.jsx("li",{children:"Analisa e extrai informaes de eventos automaticamente"}),n.jsx("li",{children:'Cria eventos como "pendentes" para reviso'}),n.jsx("li",{children:"Voc revisa e aprova os eventos antes de public-los"})]})]})]})]})]})}function sW(){const e=_t(),{isAdmin:t,loading:r}=Fs(),[s,a]=v.useState([]),[o,c]=v.useState(!0);v.useEffect(()=>{!r&&!t&&e("/")},[t,r,e]),v.useEffect(()=>{t&&u()},[t]);const u=async()=>{try{const{data:x,error:w}=await U.from("platform_events").select("*").eq("auto_generated",!0).eq("approval_status","pending").order("created_at",{ascending:!1});if(w)throw w;a(x||[])}catch(x){console.error("Error fetching pending events:",x),X.error("Erro ao carregar eventos pendentes")}finally{c(!1)}},f=async x=>{try{const{error:w}=await U.from("platform_events").update({approval_status:"approved"}).eq("id",x);if(w)throw w;X.success("Evento aprovado com sucesso!"),u()}catch(w){console.error("Error approving event:",w),X.error("Erro ao aprovar evento")}},p=async x=>{try{const{error:w}=await U.from("platform_events").delete().eq("id",x);if(w)throw w;X.success("Evento rejeitado"),u()}catch(w){console.error("Error rejecting event:",w),X.error("Erro ao rejeitar evento")}};return r||!t?null:n.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>e("/admin"),children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Eventos Pendentes de Aprovao"}),n.jsx("p",{className:"text-muted-foreground",children:"Eventos gerados automaticamente aguardando reviso"})]})]}),o?n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:[1,2,3,4].map(x=>n.jsx(St,{className:"h-80"},x))}):s.length===0?n.jsx(je,{children:n.jsxs(Ce,{className:"py-12 text-center space-y-4",children:[n.jsx("p",{className:"text-muted-foreground",children:"Nenhum evento pendente de aprovao"}),n.jsx(K,{onClick:()=>e("/admin/auto-generate-events"),children:"Gerar Novos Eventos"})]})}):n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:s.map(x=>n.jsxs(je,{className:"overflow-hidden",children:[x.image_url&&x.image_url.trim()!==""&&n.jsx("div",{className:"h-48 overflow-hidden",children:n.jsx("img",{src:x.image_url,alt:x.title,className:"w-full h-full object-cover"})}),n.jsxs(We,{children:[n.jsx(Ge,{className:"text-xl",children:x.title}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Por: ",x.organizer_name]})]}),n.jsxs(Ce,{className:"space-y-4",children:[x.description&&n.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:x.description}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{children:ln(new Date(x.event_date),"d 'de' MMMM 's' HH:mm",{locale:Ir})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Rt,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{children:x.location})]}),x.category&&n.jsx("div",{className:"inline-block px-2 py-1 bg-primary/10 rounded-full text-xs",children:x.category})]}),n.jsxs("div",{className:"flex gap-2 pt-2",children:[n.jsxs(K,{onClick:()=>e(`/admin/pending-event/${x.id}/edit`),variant:"outline",className:"flex-1",children:[n.jsx(rs,{className:"h-4 w-4 mr-1"}),"Editar"]}),n.jsxs(K,{onClick:()=>f(x.id),className:"flex-1",children:[n.jsx(Xn,{className:"h-4 w-4 mr-1"}),"Aprovar"]}),n.jsxs(K,{onClick:()=>p(x.id),variant:"destructive",children:[n.jsx(sr,{className:"h-4 w-4 mr-1"}),"Rejeitar"]})]})]})]},x.id))})]})}function aW(){const e=_t(),{eventId:t}=hl(),{isAdmin:r,loading:s}=Fs(),[a,o]=v.useState(!0),[c,u]=v.useState(!1),[f,p]=v.useState(!1),[x,w]=v.useState(null),[_,j]=v.useState(null),[N,C]=v.useState({title:"",description:"",organizer_name:"",event_date:"",end_date:"",location:"",location_link:"",ticket_price:0,ticket_link:"",max_attendees:null}),[T,E]=v.useState([]);v.useEffect(()=>{!s&&!r&&e("/")},[r,s,e]),v.useEffect(()=>{r&&t&&S()},[r,t]);const S=async()=>{try{const{data:P,error:M}=await U.from("platform_events").select("*").eq("id",t).eq("approval_status","pending").single();if(M)throw M;P&&(C({title:P.title||"",description:P.description||"",organizer_name:P.organizer_name||"",event_date:P.event_date||"",end_date:P.end_date||"",location:P.location||"",location_link:P.location_link||"",ticket_price:P.ticket_price||0,ticket_link:P.ticket_link||"",max_attendees:P.max_attendees}),E(P.category||[]),P.image_url&&w(P.image_url))}catch(P){console.error("Error fetching event:",P),X.error("Erro ao carregar evento"),e("/admin/pending-events")}finally{o(!1)}},b=P=>{var R;const M=(R=P.target.files)==null?void 0:R[0];if(M){j(M);const $=new FileReader;$.onloadend=()=>{w($.result)},$.readAsDataURL(M)}},k=async()=>{if(!N.title||!N.organizer_name||!N.event_date||!N.location){X.error("Preencha todos os campos obrigatrios");return}u(!0);try{let P=x;if(_){const R=_.name.split(".").pop(),Y=`${`${Math.random().toString(36).substring(2)}.${R}`}`,{error:z}=await U.storage.from("user-uploads").upload(Y,_);if(z)throw z;const{data:{publicUrl:q}}=U.storage.from("user-uploads").getPublicUrl(Y);P=q}const{error:M}=await U.from("platform_events").update({title:N.title,description:N.description||null,organizer_name:N.organizer_name,event_date:N.event_date,end_date:N.end_date||N.event_date,location:N.location,location_link:N.location_link||null,image_url:P||null,category:T.length>0?T:null,ticket_price:N.ticket_price||0,ticket_link:N.ticket_link||null,max_attendees:N.max_attendees}).eq("id",t);if(M)throw M;X.success("Evento salvo com sucesso!")}catch(P){console.error("Error saving event:",P),X.error("Erro ao salvar evento")}finally{u(!1)}},O=async()=>{await k();try{const{error:P}=await U.from("platform_events").update({approval_status:"approved"}).eq("id",t);if(P)throw P;X.success("Evento aprovado e publicado!"),e("/admin/pending-events")}catch(P){console.error("Error approving event:",P),X.error("Erro ao publicar evento")}},L=async()=>{if(!N.title||!N.organizer_name||!N.event_date||!N.location){X.error("Preencha os campos obrigatrios antes de gerar a descrio");return}p(!0);try{const{data:P,error:M}=await U.functions.invoke("generate-event-description",{body:{title:N.title,organizerName:N.organizer_name,eventDate:N.event_date,location:N.location,category:T,ticketPrice:N.ticket_price}});if(M)throw M;if(P!=null&&P.description)C({...N,description:P.description}),X.success("Descrio gerada com sucesso!");else throw new Error("Nenhuma descrio foi gerada")}catch(P){console.error("Error generating description:",P),X.error("Erro ao gerar descrio. Tente novamente.")}finally{p(!1)}};return s||a||!r?null:n.jsxs("div",{className:"container mx-auto p-6 space-y-6 max-w-3xl",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>e("/admin/pending-events"),children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Editar Evento Pendente"}),n.jsx("p",{className:"text-muted-foreground",children:"Revise e ajuste os dados antes de publicar"})]})]}),n.jsxs(je,{children:[n.jsx(We,{children:n.jsx(Ge,{children:"Informaes do Evento"})}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Banner do Evento"}),x?n.jsxs("div",{className:"relative h-48 rounded-lg overflow-hidden",children:[n.jsx("img",{src:x,alt:"Preview do evento",className:"w-full h-full object-cover"}),n.jsx(K,{type:"button",variant:"secondary",size:"sm",className:"absolute top-2 right-2",onClick:()=>{w(null),j(null)},children:"Remover"})]}):n.jsxs("label",{className:"flex flex-col items-center justify-center h-48 border-2 border-dashed border-border rounded-lg cursor-pointer hover:border-primary/50 transition-colors",children:[n.jsx(Ms,{className:"h-8 w-8 text-muted-foreground mb-2"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"Clique para adicionar uma imagem"}),n.jsx("input",{type:"file",accept:"image/*",onChange:b,className:"hidden"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"title",children:"Ttulo *"}),n.jsx(we,{id:"title",value:N.title,onChange:P=>C({...N,title:P.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx(de,{htmlFor:"description",children:"Descrio"}),n.jsxs(K,{type:"button",variant:"outline",size:"sm",onClick:L,disabled:f||!N.title,children:[n.jsx(iu,{className:"h-4 w-4 mr-2"}),f?"Gerando...":"Gerar com IA"]})]}),n.jsx(An,{id:"description",value:N.description,onChange:P=>C({...N,description:P.target.value}),rows:4,placeholder:"Clique em 'Gerar com IA' para criar uma descrio automtica ou escreva manualmente"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"organizer_name",children:"Nome do Organizador *"}),n.jsx(we,{id:"organizer_name",value:N.organizer_name,onChange:P=>C({...N,organizer_name:P.target.value})})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"event_date",children:"Data de Incio *"}),n.jsx(we,{id:"event_date",type:"datetime-local",value:N.event_date,onChange:P=>C({...N,event_date:P.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"end_date",children:"Data de Trmino"}),n.jsx(we,{id:"end_date",type:"datetime-local",value:N.end_date,onChange:P=>C({...N,end_date:P.target.value})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"location",children:"Local *"}),n.jsx(we,{id:"location",value:N.location,onChange:P=>C({...N,location:P.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"location_link",children:"Link do Local (Google Maps)"}),n.jsx(we,{id:"location_link",type:"url",value:N.location_link,onChange:P=>C({...N,location_link:P.target.value})})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"category",children:"Categorias"}),n.jsx(cp,{value:T,onChange:E,placeholder:"Selecione uma ou mais categorias"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"max_attendees",children:"Capacidade Mxima"}),n.jsx(we,{id:"max_attendees",type:"number",value:N.max_attendees||"",onChange:P=>C({...N,max_attendees:P.target.value?parseInt(P.target.value):null})})]})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"ticket_price",children:"Preo do Ingresso (R$)"}),n.jsx(we,{id:"ticket_price",type:"number",step:"0.01",value:N.ticket_price,onChange:P=>C({...N,ticket_price:parseFloat(P.target.value)||0})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"ticket_link",children:"Link de Compra"}),n.jsx(we,{id:"ticket_link",type:"url",value:N.ticket_link,onChange:P=>C({...N,ticket_link:P.target.value})})]})]}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsxs(K,{onClick:k,disabled:c,variant:"outline",className:"flex-1",children:[n.jsx(W8,{className:"h-4 w-4 mr-2"}),"Salvar Alteraes"]}),n.jsxs(K,{onClick:O,disabled:c,className:"flex-1",children:[n.jsx(Xn,{className:"h-4 w-4 mr-2"}),"Salvar e Publicar"]})]})]})]})]})}function iW(){const{user:e}=bt(),t=_t(),{notifications:r,loading:s,markAsRead:a,markAllAsRead:o,deleteNotification:c}=bE(),{acceptFriendRequest:u,declineFriendRequest:f,loading:p}=_E(),[x,w]=v.useState({});v.useEffect(()=>{const b=async()=>{const k=r.filter(O=>O.type==="friend_request");if(k.length!==0)for(const O of k){const{data:L}=await U.from("friendships").select("user_id").eq("friend_id",e==null?void 0:e.id).eq("status","pending").order("created_at",{ascending:!1}).limit(1).maybeSingle();if(L){const{data:P}=await U.from("profiles").select("user_id, display_name, avatar_url, interest, relationship_status").eq("user_id",L.user_id).single();P&&w(M=>({...M,[O.id]:{...P,friendshipUserId:L.user_id}}))}}};e&&r.length>0&&b()},[r,e]);const _=b=>{switch(b){case"event_created":return Et;case"event_updated":return dl;case"event_cancelled":return sr;case"friend_request":return bm;default:return qa}},j=b=>{try{return gu(new Date(b),{addSuffix:!0,locale:Ir})}catch{return"recentemente"}},N=async b=>{if(b.type==="friend_request"){await a(b.id);return}await a(b.id),b.type==="user_message"||b.type==="user_like"?t("/find-friends"):b.event_id&&t(`/e/${b.event_id}`)},C=async(b,k)=>{await u("",k)&&c(b)},T=async(b,k)=>{await f("",k)&&c(b)},E=b=>({solteiro:"Solteiro(a)",relacionamento:"Em relacionamento",casado:"Casado(a)",preferencia_nao_informar:"Prefiro no informar"})[b]||b,S=b=>({curtio:"Curtio",namoro:"Namoro",amizade:"Amizade"})[b]||b;return e?n.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[n.jsx("div",{className:"sticky top-0 z-10 bg-background border-b border-border",children:n.jsx("div",{className:"max-w-2xl mx-auto px-4 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>t(-1),children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Notificaes"})]}),r.some(b=>!b.read)&&n.jsx(K,{variant:"ghost",size:"sm",onClick:o,children:"Marcar todas como lidas"})]})})}),n.jsx("div",{className:"max-w-2xl mx-auto",children:s?n.jsxs("div",{className:"p-12 text-center text-muted-foreground",children:[n.jsx(qa,{className:"h-12 w-12 mx-auto mb-4 opacity-50 animate-pulse"}),n.jsx("p",{className:"text-lg",children:"Carregando..."})]}):r.length===0?n.jsxs("div",{className:"p-12 text-center text-muted-foreground",children:[n.jsx(qa,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{className:"text-lg font-medium mb-2",children:"Nenhuma notificao"}),n.jsx("p",{className:"text-sm",children:"Voc est em dia!"})]}):n.jsx("div",{className:"divide-y divide-border",children:r.map(b=>{var P,M;const k=_(b.type),O=b.type==="friend_request",L=O?x[b.id]:null;return n.jsx("div",{className:`p-4 ${O?"":"hover:bg-surface cursor-pointer"} transition-colors group ${b.read?"":"bg-primary/5 border-l-4 border-l-primary"}`,onClick:()=>N(b),children:O&&L?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsxs($t,{className:"h-14 w-14",children:[n.jsx(Kt,{src:L.avatar_url}),n.jsx(Vt,{children:(M=(P=L.display_name)==null?void 0:P[0])==null?void 0:M.toUpperCase()})]}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-base font-semibold text-foreground",children:L.display_name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:S(L.interest)}),n.jsx("p",{className:"text-sm text-muted-foreground",children:E(L.relationship_status)}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:j(b.created_at)})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[!b.read&&n.jsx(dt,{variant:"destructive",className:"h-2 w-2 p-0 rounded-full"}),n.jsx(K,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-destructive/10",onClick:R=>{R.stopPropagation(),c(b.id)},children:n.jsx(sr,{className:"h-4 w-4"})})]})]})})]}),n.jsxs("div",{className:"flex gap-3 ml-[72px]",children:[n.jsxs(K,{size:"default",className:"flex-1",onClick:()=>C(b.id,L.friendshipUserId),disabled:p,children:[n.jsx(Xn,{className:"h-4 w-4 mr-2"}),"Aceitar"]}),n.jsxs(K,{size:"default",variant:"outline",className:"flex-1",onClick:()=>T(b.id,L.friendshipUserId),disabled:p,children:[n.jsx(sr,{className:"h-4 w-4 mr-2"}),"Recusar"]})]})]}):n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:`p-2 rounded-full ${b.read?"bg-surface":"bg-primary/20"}`,children:n.jsx(k,{className:"h-5 w-5 text-primary"})}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-base font-medium text-foreground mb-1",children:b.title}),n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:b.message}),n.jsx("p",{className:"text-xs text-muted-foreground",children:j(b.created_at)})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[!b.read&&n.jsx(dt,{variant:"destructive",className:"h-2 w-2 p-0 rounded-full"}),n.jsx(K,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 group-hover:opacity-100 hover:bg-destructive/10",onClick:R=>{R.stopPropagation(),c(b.id)},children:n.jsx(sr,{className:"h-4 w-4"})})]})]})})]})},b.id)})})})]}):(t("/auth"),null)}var hp={},gk={exports:{}},oW="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",lW=oW,cW=lW;function xk(){}function vk(){}vk.resetWarningCache=xk;var dW=function(){function e(s,a,o,c,u,f){if(f!==cW){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:vk,resetWarningCache:xk};return r.PropTypes=r,r};gk.exports=dW();var wk=gk.exports,yk={L:1,M:0,Q:3,H:2},bk={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},uW=bk;function _k(e){this.mode=uW.MODE_8BIT_BYTE,this.data=e}_k.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}};var hW=_k,Fh=yk;function Na(e,t){this.totalCount=e,this.dataCount=t}Na.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];Na.getRSBlocks=function(e,t){var r=Na.getRsBlockTable(e,t);if(r==null)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var s=r.length/3,a=new Array,o=0;o<s;o++)for(var c=r[o*3+0],u=r[o*3+1],f=r[o*3+2],p=0;p<c;p++)a.push(new Na(u,f));return a};Na.getRsBlockTable=function(e,t){switch(t){case Fh.L:return Na.RS_BLOCK_TABLE[(e-1)*4+0];case Fh.M:return Na.RS_BLOCK_TABLE[(e-1)*4+1];case Fh.Q:return Na.RS_BLOCK_TABLE[(e-1)*4+2];case Fh.H:return Na.RS_BLOCK_TABLE[(e-1)*4+3];default:return}};var fW=Na;function Nk(){this.buffer=new Array,this.length=0}Nk.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var r=0;r<t;r++)this.putBit((e>>>t-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var mW=Nk,ea={glog:function(e){if(e<1)throw new Error("glog("+e+")");return ea.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return ea.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var an=0;an<8;an++)ea.EXP_TABLE[an]=1<<an;for(var an=8;an<256;an++)ea.EXP_TABLE[an]=ea.EXP_TABLE[an-4]^ea.EXP_TABLE[an-5]^ea.EXP_TABLE[an-6]^ea.EXP_TABLE[an-8];for(var an=0;an<255;an++)ea.LOG_TABLE[ea.EXP_TABLE[an]]=an;var jk=ea,wo=jk;function df(e,t){if(e.length==null)throw new Error(e.length+"/"+t);for(var r=0;r<e.length&&e[r]==0;)r++;this.num=new Array(e.length-r+t);for(var s=0;s<e.length-r;s++)this.num[s]=e[s+r]}df.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),r=0;r<this.getLength();r++)for(var s=0;s<e.getLength();s++)t[r+s]^=wo.gexp(wo.glog(this.get(r))+wo.glog(e.get(s)));return new df(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=wo.glog(this.get(0))-wo.glog(e.get(0)),r=new Array(this.getLength()),s=0;s<this.getLength();s++)r[s]=this.get(s);for(var s=0;s<e.getLength();s++)r[s]^=wo.gexp(wo.glog(e.get(s))+t);return new df(r,0).mod(e)}};var Ck=df,bs=bk,C2=Ck,pW=jk,mi={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},rn={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;rn.getBCHDigit(t)-rn.getBCHDigit(rn.G15)>=0;)t^=rn.G15<<rn.getBCHDigit(t)-rn.getBCHDigit(rn.G15);return(e<<10|t)^rn.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;rn.getBCHDigit(t)-rn.getBCHDigit(rn.G18)>=0;)t^=rn.G18<<rn.getBCHDigit(t)-rn.getBCHDigit(rn.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;e!=0;)t++,e>>>=1;return t},getPatternPosition:function(e){return rn.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,r){switch(e){case mi.PATTERN000:return(t+r)%2==0;case mi.PATTERN001:return t%2==0;case mi.PATTERN010:return r%3==0;case mi.PATTERN011:return(t+r)%3==0;case mi.PATTERN100:return(Math.floor(t/2)+Math.floor(r/3))%2==0;case mi.PATTERN101:return t*r%2+t*r%3==0;case mi.PATTERN110:return(t*r%2+t*r%3)%2==0;case mi.PATTERN111:return(t*r%3+(t+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new C2([1],0),r=0;r<e;r++)t=t.multiply(new C2([1,pW.gexp(r)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case bs.MODE_NUMBER:return 10;case bs.MODE_ALPHA_NUM:return 9;case bs.MODE_8BIT_BYTE:return 8;case bs.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case bs.MODE_NUMBER:return 12;case bs.MODE_ALPHA_NUM:return 11;case bs.MODE_8BIT_BYTE:return 16;case bs.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else if(t<41)switch(e){case bs.MODE_NUMBER:return 14;case bs.MODE_ALPHA_NUM:return 13;case bs.MODE_8BIT_BYTE:return 16;case bs.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}else throw new Error("type:"+t)},getLostPoint:function(e){for(var t=e.getModuleCount(),r=0,s=0;s<t;s++)for(var a=0;a<t;a++){for(var o=0,c=e.isDark(s,a),u=-1;u<=1;u++)if(!(s+u<0||t<=s+u))for(var f=-1;f<=1;f++)a+f<0||t<=a+f||u==0&&f==0||c==e.isDark(s+u,a+f)&&o++;o>5&&(r+=3+o-5)}for(var s=0;s<t-1;s++)for(var a=0;a<t-1;a++){var p=0;e.isDark(s,a)&&p++,e.isDark(s+1,a)&&p++,e.isDark(s,a+1)&&p++,e.isDark(s+1,a+1)&&p++,(p==0||p==4)&&(r+=3)}for(var s=0;s<t;s++)for(var a=0;a<t-6;a++)e.isDark(s,a)&&!e.isDark(s,a+1)&&e.isDark(s,a+2)&&e.isDark(s,a+3)&&e.isDark(s,a+4)&&!e.isDark(s,a+5)&&e.isDark(s,a+6)&&(r+=40);for(var a=0;a<t;a++)for(var s=0;s<t-6;s++)e.isDark(s,a)&&!e.isDark(s+1,a)&&e.isDark(s+2,a)&&e.isDark(s+3,a)&&e.isDark(s+4,a)&&!e.isDark(s+5,a)&&e.isDark(s+6,a)&&(r+=40);for(var x=0,a=0;a<t;a++)for(var s=0;s<t;s++)e.isDark(s,a)&&x++;var w=Math.abs(100*x/t/t-50)/5;return r+=w*10,r}},gW=rn,xW=hW,Ek=fW,Sk=mW,co=gW,vW=Ck;function Ca(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var ps=Ca.prototype;ps.addData=function(e){var t=new xW(e);this.dataList.push(t),this.dataCache=null};ps.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]};ps.getModuleCount=function(){return this.moduleCount};ps.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=Ek.getRSBlocks(e,this.errorCorrectLevel),r=new Sk,s=0,a=0;a<t.length;a++)s+=t[a].dataCount;for(var a=0;a<this.dataList.length;a++){var o=this.dataList[a];r.put(o.mode,4),r.put(o.getLength(),co.getLengthInBits(o.mode,e)),o.write(r)}if(r.getLengthInBits()<=s*8)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())};ps.makeImpl=function(e,t){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var s=0;s<this.moduleCount;s++)this.modules[r][s]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache==null&&(this.dataCache=Ca.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)};ps.setupPositionProbePattern=function(e,t){for(var r=-1;r<=7;r++)if(!(e+r<=-1||this.moduleCount<=e+r))for(var s=-1;s<=7;s++)t+s<=-1||this.moduleCount<=t+s||(0<=r&&r<=6&&(s==0||s==6)||0<=s&&s<=6&&(r==0||r==6)||2<=r&&r<=4&&2<=s&&s<=4?this.modules[e+r][t+s]=!0:this.modules[e+r][t+s]=!1)};ps.getBestMaskPattern=function(){for(var e=0,t=0,r=0;r<8;r++){this.makeImpl(!0,r);var s=co.getLostPoint(this);(r==0||e>s)&&(e=s,t=r)}return t};ps.createMovieClip=function(e,t,r){var s=e.createEmptyMovieClip(t,r),a=1;this.make();for(var o=0;o<this.modules.length;o++)for(var c=o*a,u=0;u<this.modules[o].length;u++){var f=u*a,p=this.modules[o][u];p&&(s.beginFill(0,100),s.moveTo(f,c),s.lineTo(f+a,c),s.lineTo(f+a,c+a),s.lineTo(f,c+a),s.endFill())}return s};ps.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)this.modules[e][6]==null&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)};ps.setupPositionAdjustPattern=function(){for(var e=co.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var r=0;r<e.length;r++){var s=e[t],a=e[r];if(this.modules[s][a]==null)for(var o=-2;o<=2;o++)for(var c=-2;c<=2;c++)o==-2||o==2||c==-2||c==2||o==0&&c==0?this.modules[s+o][a+c]=!0:this.modules[s+o][a+c]=!1}};ps.setupTypeNumber=function(e){for(var t=co.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var s=!e&&(t>>r&1)==1;this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=s}for(var r=0;r<18;r++){var s=!e&&(t>>r&1)==1;this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=s}};ps.setupTypeInfo=function(e,t){for(var r=this.errorCorrectLevel<<3|t,s=co.getBCHTypeInfo(r),a=0;a<15;a++){var o=!e&&(s>>a&1)==1;a<6?this.modules[a][8]=o:a<8?this.modules[a+1][8]=o:this.modules[this.moduleCount-15+a][8]=o}for(var a=0;a<15;a++){var o=!e&&(s>>a&1)==1;a<8?this.modules[8][this.moduleCount-a-1]=o:a<9?this.modules[8][15-a-1+1]=o:this.modules[8][15-a-1]=o}this.modules[this.moduleCount-8][8]=!e};ps.mapData=function(e,t){for(var r=-1,s=this.moduleCount-1,a=7,o=0,c=this.moduleCount-1;c>0;c-=2)for(c==6&&c--;;){for(var u=0;u<2;u++)if(this.modules[s][c-u]==null){var f=!1;o<e.length&&(f=(e[o]>>>a&1)==1);var p=co.getMask(t,s,c-u);p&&(f=!f),this.modules[s][c-u]=f,a--,a==-1&&(o++,a=7)}if(s+=r,s<0||this.moduleCount<=s){s-=r,r=-r;break}}};Ca.PAD0=236;Ca.PAD1=17;Ca.createData=function(e,t,r){for(var s=Ek.getRSBlocks(e,t),a=new Sk,o=0;o<r.length;o++){var c=r[o];a.put(c.mode,4),a.put(c.getLength(),co.getLengthInBits(c.mode,e)),c.write(a)}for(var u=0,o=0;o<s.length;o++)u+=s[o].dataCount;if(a.getLengthInBits()>u*8)throw new Error("code length overflow. ("+a.getLengthInBits()+">"+u*8+")");for(a.getLengthInBits()+4<=u*8&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(!1);for(;!(a.getLengthInBits()>=u*8||(a.put(Ca.PAD0,8),a.getLengthInBits()>=u*8));)a.put(Ca.PAD1,8);return Ca.createBytes(a,s)};Ca.createBytes=function(e,t){for(var r=0,s=0,a=0,o=new Array(t.length),c=new Array(t.length),u=0;u<t.length;u++){var f=t[u].dataCount,p=t[u].totalCount-f;s=Math.max(s,f),a=Math.max(a,p),o[u]=new Array(f);for(var x=0;x<o[u].length;x++)o[u][x]=255&e.buffer[x+r];r+=f;var w=co.getErrorCorrectPolynomial(p),_=new vW(o[u],w.getLength()-1),j=_.mod(w);c[u]=new Array(w.getLength()-1);for(var x=0;x<c[u].length;x++){var N=x+j.getLength()-c[u].length;c[u][x]=N>=0?j.get(N):0}}for(var C=0,x=0;x<t.length;x++)C+=t[x].totalCount;for(var T=new Array(C),E=0,x=0;x<s;x++)for(var u=0;u<t.length;u++)x<o[u].length&&(T[E++]=o[u][x]);for(var x=0;x<a;x++)for(var u=0;u<t.length;u++)x<c[u].length&&(T[E++]=c[u][x]);return T};var wW=Ca,Bv={};Object.defineProperty(Bv,"__esModule",{value:!0});var yW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},bW=wk,_s=kk(bW),Ak=v,Bh=kk(Ak);function kk(e){return e&&e.__esModule?e:{default:e}}function _W(e,t){var r={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r}var NW={bgColor:_s.default.oneOfType([_s.default.object,_s.default.string]).isRequired,bgD:_s.default.string.isRequired,fgColor:_s.default.oneOfType([_s.default.object,_s.default.string]).isRequired,fgD:_s.default.string.isRequired,size:_s.default.number.isRequired,title:_s.default.string,viewBoxSize:_s.default.number.isRequired,xmlns:_s.default.string},zv=(0,Ak.forwardRef)(function(e,t){var r=e.bgColor,s=e.bgD,a=e.fgD,o=e.fgColor,c=e.size,u=e.title,f=e.viewBoxSize,p=e.xmlns,x=p===void 0?"http://www.w3.org/2000/svg":p,w=_W(e,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return Bh.default.createElement("svg",yW({},w,{height:c,ref:t,viewBox:"0 0 "+f+" "+f,width:c,xmlns:x}),u?Bh.default.createElement("title",null,u):null,Bh.default.createElement("path",{d:s,fill:r}),Bh.default.createElement("path",{d:a,fill:o}))});zv.displayName="QRCodeSvg";zv.propTypes=NW;Bv.default=zv;Object.defineProperty(hp,"__esModule",{value:!0});hp.QRCode=void 0;var jW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},CW=wk,Da=Zu(CW),EW=yk,SW=Zu(EW),AW=wW,kW=Zu(AW),Tk=v,TW=Zu(Tk),IW=Bv,RW=Zu(IW);function Zu(e){return e&&e.__esModule?e:{default:e}}function PW(e,t){var r={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r}var OW={bgColor:Da.default.oneOfType([Da.default.object,Da.default.string]),fgColor:Da.default.oneOfType([Da.default.object,Da.default.string]),level:Da.default.string,size:Da.default.number,value:Da.default.string.isRequired},fp=(0,Tk.forwardRef)(function(e,t){var r=e.bgColor,s=r===void 0?"#FFFFFF":r,a=e.fgColor,o=a===void 0?"#000000":a,c=e.level,u=c===void 0?"L":c,f=e.size,p=f===void 0?256:f,x=e.value,w=PW(e,["bgColor","fgColor","level","size","value"]),_=new kW.default(-1,SW.default[u]);_.addData(x),_.make();var j=_.modules;return TW.default.createElement(RW.default,jW({},w,{bgColor:s,bgD:j.map(function(N,C){return N.map(function(T,E){return T?"":"M "+E+" "+C+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:o,fgD:j.map(function(N,C){return N.map(function(T,E){return T?"M "+E+" "+C+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:t,size:p,viewBoxSize:j.length}))});hp.QRCode=fp;fp.displayName="QRCode";fp.propTypes=OW;var Ik=hp.default=fp;function DW(){const[e]=H1(),t=_t(),[r,s]=v.useState(!0),[a,o]=v.useState(null),c=e.get("session_id");if(v.useEffect(()=>{(async()=>{var p,x,w,_,j;if(!c){X.error("ID da sesso no encontrado"),t("/");return}try{let N=5,C=null;for(;N>0&&!C;){const{data:b,error:k}=await U.from("ticket_sales").select(`
              id,
              quantity,
              total_amount,
              buyer_name,
              payment_status,
              event_id,
              ticket_type_id
            `).eq("stripe_checkout_session_id",c).maybeSingle();if(b){C=b;break}if(k&&k.code!=="PGRST116")throw k;if(N>1){const O=(6-N)*400+600;await new Promise(L=>setTimeout(L,O))}N--}if(!C)throw new Error("Ingresso no encontrado");const[T,E]=await Promise.all([U.from("events").select("title, event_date, location, image_url").eq("id",C.event_id).single(),U.from("ticket_types").select("name, is_active").eq("id",C.ticket_type_id).maybeSingle()]),S={id:C.id,quantity:C.quantity,total_amount:C.total_amount,buyer_name:C.buyer_name,event:{title:((p=T.data)==null?void 0:p.title)??"Ingresso",event_date:((x=T.data)==null?void 0:x.event_date)??new Date().toISOString(),location:((w=T.data)==null?void 0:w.location)??"",image_url:((_=T.data)==null?void 0:_.image_url)??null},ticket_type:{name:((j=E.data)==null?void 0:j.name)??"Ingresso"}};if(o(S),C.payment_status==="pending")try{const{data:b,error:k}=await U.functions.invoke("verify-ticket-payment",{body:{sessionId:c}});if(k)throw k;b==null||b.payment_status}catch(b){console.warn("Verify payment failed:",b)}}catch(N){console.error("Error fetching ticket details:",N),X.error("Erro ao carregar detalhes do ingresso"),setTimeout(()=>t("/"),2e3)}finally{s(!1)}})()},[c,t]),r)return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:n.jsx(ka,{className:"h-8 w-8 animate-spin text-primary"})});if(!a)return null;const u=JSON.stringify({ticketId:a.id,eventTitle:a.event.title,buyerName:a.buyer_name,quantity:a.quantity});return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background to-secondary/20 py-8 px-4",children:n.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("div",{className:"flex justify-center",children:n.jsx(as,{className:"h-16 w-16 text-green-500"})}),n.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Compra Finalizada com Sucesso!"}),n.jsx("p",{className:"text-muted-foreground",children:"Seu ingresso foi confirmado. Guarde o QR Code abaixo para apresentar no evento."})]}),n.jsxs(je,{className:"overflow-hidden",children:[n.jsx(We,{className:"bg-primary/5",children:n.jsxs(Ge,{className:"flex items-center gap-2",children:[n.jsx(Ac,{className:"h-5 w-5"}),"Detalhes do Ingresso"]})}),n.jsxs(Ce,{className:"space-y-6 pt-6",children:[n.jsx("div",{className:"flex justify-center p-6 bg-white rounded-lg",children:n.jsx(Ik,{value:u,size:200})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg text-foreground mb-2",children:a.event.title}),n.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"h-4 w-4"}),n.jsx("span",{children:ln(new Date(a.event.event_date),"dd 'de' MMMM 'de' yyyy 's' HH:mm",{locale:Ir})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Rt,{className:"h-4 w-4"}),n.jsx("span",{children:a.event.location})]})]})]}),n.jsxs("div",{className:"border-t pt-4",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Tipo de Ingresso:"}),n.jsx("span",{className:"font-medium",children:a.ticket_type.name})]}),n.jsxs("div",{className:"flex justify-between text-sm mt-2",children:[n.jsx("span",{className:"text-muted-foreground",children:"Quantidade:"}),n.jsxs("span",{className:"font-medium",children:[a.quantity,"x"]})]}),n.jsxs("div",{className:"flex justify-between text-sm mt-2",children:[n.jsx("span",{className:"text-muted-foreground",children:"Comprador:"}),n.jsx("span",{className:"font-medium",children:a.buyer_name})]}),n.jsxs("div",{className:"flex justify-between text-lg font-bold mt-4 pt-4 border-t",children:[n.jsx("span",{children:"Total Pago:"}),n.jsxs("span",{className:"text-primary",children:["R$ ",a.total_amount.toFixed(2)]})]})]})]}),n.jsxs("div",{className:"space-y-2 pt-4",children:[n.jsx(K,{onClick:()=>window.print(),variant:"outline",className:"w-full",children:"Imprimir Ingresso"}),n.jsx(K,{onClick:()=>t("/"),className:"w-full",children:"Voltar para Home"})]})]})]}),n.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:[n.jsx("p",{children:"Este QR Code  nico e intransfervel."}),n.jsx("p",{children:"Guarde-o com segurana para apresentar no dia do evento."})]})]})})}const mp=v.forwardRef(({className:e,...t},r)=>n.jsx("div",{className:"relative w-full overflow-auto",children:n.jsx("table",{ref:r,className:Le("w-full caption-bottom text-sm",e),...t})}));mp.displayName="Table";const pp=v.forwardRef(({className:e,...t},r)=>n.jsx("thead",{ref:r,className:Le("[&_tr]:border-b",e),...t}));pp.displayName="TableHeader";const gp=v.forwardRef(({className:e,...t},r)=>n.jsx("tbody",{ref:r,className:Le("[&_tr:last-child]:border-0",e),...t}));gp.displayName="TableBody";const MW=v.forwardRef(({className:e,...t},r)=>n.jsx("tfoot",{ref:r,className:Le("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));MW.displayName="TableFooter";const al=v.forwardRef(({className:e,...t},r)=>n.jsx("tr",{ref:r,className:Le("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",e),...t}));al.displayName="TableRow";const hr=v.forwardRef(({className:e,...t},r)=>n.jsx("th",{ref:r,className:Le("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));hr.displayName="TableHead";const fr=v.forwardRef(({className:e,...t},r)=>n.jsx("td",{ref:r,className:Le("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));fr.displayName="TableCell";const LW=v.forwardRef(({className:e,...t},r)=>n.jsx("caption",{ref:r,className:Le("mt-4 text-sm text-muted-foreground",e),...t}));LW.displayName="TableCaption";function FW(){const{eventId:e}=hl(),t=_t(),[r,s]=v.useState(!0),[a,o]=v.useState([]),[c,u]=v.useState(null),[f,p]=v.useState({totalSales:0,totalRevenue:0,totalTickets:0,grossRevenue:0,netRevenue:0});v.useEffect(()=>{(async()=>{if(e)try{const{data:j,error:N}=await U.from("events").select("title, event_date").eq("id",e).single();if(N)throw N;u(j);const{data:C,error:T}=await U.from("ticket_sales").select(`
            id,
            buyer_name,
            buyer_email,
            buyer_phone,
            quantity,
            unit_price,
            total_amount,
            payment_status,
            created_at,
            paid_at,
            ticket_type:ticket_types(name)
          `).eq("event_id",e).order("created_at",{ascending:!1});if(T)throw T;o(C||[]);const E=(C==null?void 0:C.filter(L=>L.payment_status==="completed"))||[],S=E.reduce((L,P)=>L+Number(P.total_amount),0),b=S*.05,k=S*.0399+E.length*.39,O=S-b-k;p({totalSales:E.length,totalRevenue:S,totalTickets:E.reduce((L,P)=>L+P.quantity,0),grossRevenue:S,netRevenue:O})}catch(j){console.error("Error fetching sales data:",j),X.error("Erro ao carregar dados de vendas")}finally{s(!1)}})()},[e]);const x=_=>{switch(_){case"completed":return n.jsx(dt,{className:"bg-green-600",children:"Pago"});case"pending":return n.jsx(dt,{variant:"secondary",children:"Pendente"});case"cancelled":return n.jsx(dt,{variant:"destructive",children:"Cancelado"});default:return n.jsx(dt,{variant:"outline",children:_})}},w=()=>{const _=["Data","Comprador","Email","Telefone","Tipo","Quantidade","Total","Status"],j=a.map(E=>[ln(new Date(E.created_at),"dd/MM/yyyy HH:mm"),E.buyer_name,E.buyer_email,E.buyer_phone||"-",E.ticket_type.name,E.quantity,`R$ ${E.total_amount.toFixed(2)}`,E.payment_status==="completed"?"Pago":E.payment_status]),N=[_,...j].map(E=>E.join(",")).join(`
`),C=new Blob([N],{type:"text/csv;charset=utf-8;"}),T=document.createElement("a");T.href=URL.createObjectURL(C),T.download=`vendas_${e}_${Date.now()}.csv`,T.click(),X.success("Relatrio exportado com sucesso!")};return r?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:n.jsx(ka,{className:"h-8 w-8 animate-spin text-primary"})}):n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b border-border",children:n.jsxs("div",{className:"flex items-center justify-between p-4 max-w-6xl mx-auto",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>t(-1),children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1 ml-4",children:[n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Vendas de Ingressos"}),c&&n.jsx("p",{className:"text-sm text-muted-foreground",children:c.title})]}),n.jsxs(K,{variant:"outline",size:"sm",onClick:w,children:[n.jsx(Ho,{className:"h-4 w-4 mr-2"}),"Exportar"]})]})}),n.jsxs("div",{className:"p-4 max-w-6xl mx-auto pb-20",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[n.jsxs(je,{children:[n.jsxs(We,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ge,{className:"text-sm font-medium",children:"Total de Vendas"}),n.jsx(er,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ce,{children:[n.jsx("div",{className:"text-2xl font-bold",children:f.totalSales}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"vendas confirmadas"})]})]}),n.jsxs(je,{children:[n.jsxs(We,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ge,{className:"text-sm font-medium",children:"Ingressos Vendidos"}),n.jsx(Ac,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ce,{children:[n.jsx("div",{className:"text-2xl font-bold",children:f.totalTickets}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"ingressos no total"})]})]}),n.jsxs(je,{children:[n.jsxs(We,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ge,{className:"text-sm font-medium",children:"Receita Bruta"}),n.jsx(Sn,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ce,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:["R$ ",f.grossRevenue.toFixed(2)]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"valor total de vendas"})]})]}),n.jsxs(je,{className:"border-primary/50",children:[n.jsxs(We,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ge,{className:"text-sm font-medium",children:"Valor a Receber"}),n.jsx(Sn,{className:"h-4 w-4 text-primary"})]}),n.jsxs(Ce,{children:[n.jsxs("div",{className:"text-2xl font-bold text-primary",children:["R$ ",f.netRevenue.toFixed(2)]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"aps taxas (5% + Stripe)"})]})]}),n.jsxs(je,{className:"bg-muted/50",children:[n.jsxs(We,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ge,{className:"text-sm font-medium",children:"Taxas Totais"}),n.jsx(Sn,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ce,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:["R$ ",(f.grossRevenue-f.netRevenue).toFixed(2)]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"plataforma + processamento"})]})]})]}),n.jsxs(je,{children:[n.jsx(We,{children:n.jsx(Ge,{children:"Lista de Vendas"})}),n.jsx(Ce,{children:a.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(Ac,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"Nenhuma venda registrada ainda"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(mp,{children:[n.jsx(pp,{children:n.jsxs(al,{children:[n.jsx(hr,{children:"Data"}),n.jsx(hr,{children:"Comprador"}),n.jsx(hr,{children:"Contato"}),n.jsx(hr,{children:"Tipo"}),n.jsx(hr,{className:"text-center",children:"Qtd"}),n.jsx(hr,{className:"text-right",children:"Valor"}),n.jsx(hr,{className:"text-center",children:"Status"})]})}),n.jsx(gp,{children:a.map(_=>n.jsxs(al,{children:[n.jsx(fr,{className:"whitespace-nowrap",children:ln(new Date(_.created_at),"dd/MM/yy HH:mm",{locale:Ir})}),n.jsx(fr,{children:n.jsx("div",{className:"font-medium",children:_.buyer_name})}),n.jsx(fr,{children:n.jsxs("div",{className:"text-sm",children:[n.jsx("div",{className:"text-muted-foreground",children:_.buyer_email}),_.buyer_phone&&n.jsx("div",{className:"text-muted-foreground",children:_.buyer_phone})]})}),n.jsx(fr,{children:_.ticket_type.name}),n.jsxs(fr,{className:"text-center",children:[_.quantity,"x"]}),n.jsxs(fr,{className:"text-right font-medium",children:["R$ ",_.total_amount.toFixed(2)]}),n.jsx(fr,{className:"text-center",children:x(_.payment_status)})]},_.id))})]})})})]})]})]})}function BW(){const e=_t(),[t,r]=v.useState(!0),[s,a]=v.useState([]);v.useEffect(()=>{o()},[]);const o=async()=>{try{const{data:c,error:u}=await U.from("events").select(`
          id,
          title,
          end_date,
          organizer_id,
          organizers!inner (
            id,
            page_title,
            avatar_url
          ),
          event_ticket_settings!inner (
            accepts_platform_payment
          )
        `).eq("event_ticket_settings.accepts_platform_payment",!0);if(u)throw u;const{data:f,error:p}=await U.from("ticket_sales").select("*").eq("payment_status","completed");if(p)throw p;const x=new Map;for(const _ of f||[])x.has(_.event_id)||x.set(_.event_id,[]),x.get(_.event_id).push(_);const w=[];for(const _ of c||[]){const j=_,N=j.organizers,C=x.get(j.id)||[],T=C.reduce((O,L)=>O+Number(L.total_amount),0),{data:E}=await U.from("organizer_payouts").select("*").eq("event_id",j.id).maybeSingle(),S=(E==null?void 0:E.platform_fee)||(T>0?T*.05:0),b=(E==null?void 0:E.processing_fee)||(T>0?T*.0399+.39:0),k=T-S-b;w.push({event_id:j.id,event_title:j.title,event_end_date:j.end_date,organizer_id:N.id,organizer_name:N.page_title,organizer_avatar:N.avatar_url,total_sales:C.length,gross_amount:T,platform_fee:S,processing_fee:b,net_amount:k,has_payout:!!E,payout_status:(E==null?void 0:E.payout_status)||null,payout_date:(E==null?void 0:E.payout_date)||null})}a(w)}catch(c){console.error("Error fetching events:",c),X.error("Erro ao carregar eventos")}finally{r(!1)}};return t?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:n.jsx(ka,{className:"h-8 w-8 animate-spin text-primary"})}):n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b border-border",children:n.jsx("div",{className:"flex items-center justify-between p-4 max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>e("/admin"),children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Repasses de Organizadores"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Gerencie pagamentos dos organizadores"})]})]})})}),n.jsxs("div",{className:"p-4 max-w-7xl mx-auto pb-20",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[n.jsxs(je,{children:[n.jsxs(We,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ge,{className:"text-sm font-medium",children:"Total Eventos"}),n.jsx(Et,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ce,{children:[n.jsx("div",{className:"text-2xl font-bold",children:s.length}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"com vendas"})]})]}),n.jsxs(je,{children:[n.jsxs(We,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ge,{className:"text-sm font-medium",children:"Total Bruto"}),n.jsx(Sn,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ce,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:["R$ ",s.reduce((c,u)=>c+u.gross_amount,0).toFixed(2)]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"em vendas"})]})]}),n.jsxs(je,{children:[n.jsxs(We,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ge,{className:"text-sm font-medium",children:"Total Lquido"}),n.jsx(Sn,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ce,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:["R$ ",s.reduce((c,u)=>c+u.net_amount,0).toFixed(2)]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"a repassar"})]})]})]}),n.jsxs(je,{children:[n.jsx(We,{children:n.jsx(Ge,{children:"Eventos com Vendas"})}),n.jsx(Ce,{children:s.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(Et,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"Nenhum evento com vendas"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(mp,{children:[n.jsx(pp,{children:n.jsxs(al,{children:[n.jsx(hr,{children:"Evento"}),n.jsx(hr,{children:"Organizador"}),n.jsx(hr,{className:"text-center",children:"Vendas"}),n.jsx(hr,{className:"text-right",children:"Bruto"}),n.jsx(hr,{className:"text-right",children:"Lquido"}),n.jsx(hr,{className:"text-center",children:"Status"}),n.jsx(hr,{className:"text-center",children:"Aes"})]})}),n.jsx(gp,{children:s.map(c=>n.jsxs(al,{children:[n.jsxs(fr,{children:[n.jsx("div",{className:"font-medium",children:c.event_title}),c.event_end_date&&n.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(c.event_end_date).toLocaleDateString("pt-BR")})]}),n.jsx(fr,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[c.organizer_avatar?n.jsx("img",{src:c.organizer_avatar,alt:c.organizer_name,className:"w-8 h-8 rounded-full object-cover"}):n.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx(E1,{className:"h-4 w-4 text-primary"})}),n.jsx("span",{className:"text-sm",children:c.organizer_name})]})}),n.jsx(fr,{className:"text-center",children:n.jsx(dt,{variant:"secondary",children:c.total_sales})}),n.jsxs(fr,{className:"text-right",children:["R$ ",c.gross_amount.toFixed(2)]}),n.jsxs(fr,{className:"text-right font-medium text-primary",children:["R$ ",c.net_amount.toFixed(2)]}),n.jsx(fr,{className:"text-center",children:c.has_payout?n.jsx(dt,{variant:c.payout_status==="completed"?"default":"secondary",children:c.payout_status==="completed"?"Pago":"Pendente"}):n.jsx(dt,{variant:"outline",children:"Sem repasse"})}),n.jsx(fr,{className:"text-center",children:n.jsx(K,{size:"sm",onClick:()=>e(`/admin/organizer-payments/${c.organizer_id}?event=${c.event_id}`),children:"Ver Detalhes"})})]},c.event_id))})]})})})]})]})]})}function zW(){const{organizerId:e}=hl(),t=_t(),[r]=H1(),s=r.get("event"),[a,o]=v.useState(!0),[c,u]=v.useState(null),[f,p]=v.useState([]),[x,w]=v.useState({open:!1,payoutId:null,eventId:""}),[_,j]=v.useState("");v.useEffect(()=>{N()},[e]);const N=async()=>{var k,O;if(e)try{const{data:L,error:P}=await U.from("organizers").select("id, page_title, avatar_url, user_id").eq("id",e).single();if(P)throw P;u(L);const{data:M,error:R}=await U.from("events").select(`
          *,
          event_ticket_settings (
            accepts_platform_payment
          )
        `).eq("organizer_id",e);if(R)throw R;const $=[];for(const z of M||[]){const{data:q}=await U.from("ticket_sales").select("*").eq("event_id",z.id).eq("payment_status","completed"),ee=Array.isArray(z.event_ticket_settings)?(k=z.event_ticket_settings[0])==null?void 0:k.accepts_platform_payment:(O=z.event_ticket_settings)==null?void 0:O.accepts_platform_payment,{data:H}=await U.from("organizer_payouts").select("*").eq("event_id",z.id).maybeSingle(),re=q||[],ae=re.reduce((ge,W)=>ge+Number(W.total_amount),0),ie=re.length>0?ae*.05:0,te=re.length>0?ae*.0399+re.length*.39:0,ye=ae-ie-te;if(re.length>0||ee){const ge=C(new Date(z.end_date));$.push({event_id:z.id,event_title:z.title,event_end_date:z.end_date,gross_amount:ae,platform_fee:ie,processing_fee:te,net_amount:ye,payout_due_date:ge,payout_status:(H==null?void 0:H.payout_status)||"pending",payout_id:(H==null?void 0:H.id)||null,bank_name:z.bank_name,bank_account:z.bank_account,bank_agency:z.bank_agency,bank_account_holder:z.bank_account_holder,bank_document:z.bank_document,bank_account_type:z.bank_account_type,pix_key:z.pix_key})}}const Y=s?$.filter(z=>z.event_id===s):$;p(Y)}catch(L){console.error("Error fetching organizer details:",L),X.error("Erro ao carregar detalhes")}finally{o(!1)}},C=k=>{const O=new Date(k);let L=0;for(;L<3;)O.setDate(O.getDate()+1),O.getDay()!==0&&O.getDay()!==6&&L++;return O.toISOString()},T=async()=>{if(!(!x.payoutId&&!x.eventId))try{const k=f.find(O=>O.event_id===x.eventId);if(!k)return;if(x.payoutId){const{error:O}=await U.from("organizer_payouts").update({payout_status:"completed",payout_date:new Date().toISOString(),payout_notes:_}).eq("id",x.payoutId);if(O)throw O}else{const{error:O}=await U.from("organizer_payouts").insert({event_id:k.event_id,organizer_id:e,gross_amount:k.gross_amount,platform_fee:k.platform_fee,processing_fee:k.processing_fee,net_amount:k.net_amount,payout_due_date:k.payout_due_date,payout_status:"completed",payout_date:new Date().toISOString(),payout_notes:_});if(O)throw O}X.success("Repasse marcado como pago!"),w({open:!1,payoutId:null,eventId:""}),j(""),N()}catch(k){console.error("Error marking payout as paid:",k),X.error("Erro ao marcar repasse como pago")}},E=k=>{switch(k){case"completed":return n.jsx(dt,{className:"bg-green-600",children:"Pago"});case"pending":return n.jsx(dt,{variant:"secondary",children:"Pendente"});default:return n.jsx(dt,{variant:"outline",children:k})}};if(a)return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:n.jsx(ka,{className:"h-8 w-8 animate-spin text-primary"})});if(!c)return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:n.jsx("p",{children:"Organizador no encontrado"})});const S=f.filter(k=>k.payout_status==="pending").reduce((k,O)=>k+O.net_amount,0),b=f.filter(k=>k.payout_status==="completed").reduce((k,O)=>k+O.net_amount,0);return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b border-border",children:n.jsx("div",{className:"flex items-center justify-between p-4 max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>t("/admin/organizer-payments"),children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex items-center gap-3",children:[c.avatar_url?n.jsx("img",{src:c.avatar_url,alt:c.page_title,className:"w-12 h-12 rounded-full object-cover"}):n.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx(E1,{className:"h-6 w-6 text-primary"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:c.page_title}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Detalhes de repasses"})]})]})]})})}),n.jsxs("div",{className:"p-4 max-w-7xl mx-auto pb-20",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[n.jsxs(je,{children:[n.jsxs(We,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ge,{className:"text-sm font-medium",children:"Total Pendente"}),n.jsx(Sn,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ce,{children:[n.jsxs("div",{className:"text-2xl font-bold text-primary",children:["R$ ",S.toFixed(2)]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[f.filter(k=>k.payout_status==="pending").length," eventos"]})]})]}),n.jsxs(je,{children:[n.jsxs(We,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ge,{className:"text-sm font-medium",children:"Total Pago"}),n.jsx(Xn,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ce,{children:[n.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["R$ ",b.toFixed(2)]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[f.filter(k=>k.payout_status==="completed").length," eventos"]})]})]}),n.jsxs(je,{children:[n.jsxs(We,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ge,{className:"text-sm font-medium",children:"Total de Eventos"}),n.jsx(Et,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ce,{children:[n.jsx("div",{className:"text-2xl font-bold",children:f.length}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"com vendas"})]})]})]}),n.jsxs(je,{className:"mb-6",children:[n.jsx(We,{children:n.jsx(Ge,{children:"Repasses por Evento"})}),n.jsx(Ce,{children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(mp,{children:[n.jsx(pp,{children:n.jsxs(al,{children:[n.jsx(hr,{children:"Evento"}),n.jsx(hr,{children:"Fim do Evento"}),n.jsx(hr,{className:"text-right",children:"Receita Bruta"}),n.jsx(hr,{className:"text-right",children:"Taxa Plataforma"}),n.jsx(hr,{className:"text-right",children:"Taxa Stripe"}),n.jsx(hr,{className:"text-right",children:"Valor Lquido"}),n.jsx(hr,{children:"Data Repasse"}),n.jsx(hr,{className:"text-center",children:"Status"}),n.jsx(hr,{className:"text-center",children:"Aes"})]})}),n.jsx(gp,{children:f.map(k=>n.jsxs(al,{children:[n.jsx(fr,{className:"font-medium",children:k.event_title}),n.jsx(fr,{children:ln(new Date(k.event_end_date),"dd/MM/yyyy",{locale:Ir})}),n.jsxs(fr,{className:"text-right",children:["R$ ",k.gross_amount.toFixed(2)]}),n.jsxs(fr,{className:"text-right text-red-600",children:["-R$ ",k.platform_fee.toFixed(2)]}),n.jsxs(fr,{className:"text-right text-red-600",children:["-R$ ",k.processing_fee.toFixed(2)]}),n.jsxs(fr,{className:"text-right font-bold text-primary",children:["R$ ",k.net_amount.toFixed(2)]}),n.jsx(fr,{children:ln(new Date(k.payout_due_date),"dd/MM/yyyy",{locale:Ir})}),n.jsx(fr,{className:"text-center",children:E(k.payout_status)}),n.jsx(fr,{className:"text-center",children:k.payout_status==="pending"&&n.jsx(K,{size:"sm",onClick:()=>w({open:!0,payoutId:k.payout_id,eventId:k.event_id}),children:"Marcar como Pago"})})]},k.event_id))})]})})})]}),f.length>0&&n.jsxs(je,{children:[n.jsx(We,{children:n.jsx(Ge,{children:"Dados para Repasse"})}),n.jsxs(Ce,{className:"space-y-4",children:[f[0].pix_key&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Chave PIX"}),n.jsx("p",{className:"text-sm bg-muted p-3 rounded",children:f[0].pix_key})]}),f[0].bank_name&&n.jsxs(n.Fragment,{children:[n.jsx(ia,{}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Dados Bancrios"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Banco:"}),n.jsx("p",{className:"font-medium",children:f[0].bank_name})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Tipo de Conta:"}),n.jsx("p",{className:"font-medium",children:f[0].bank_account_type})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Agncia:"}),n.jsx("p",{className:"font-medium",children:f[0].bank_agency})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Conta:"}),n.jsx("p",{className:"font-medium",children:f[0].bank_account})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Titular:"}),n.jsx("p",{className:"font-medium",children:f[0].bank_account_holder})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"CPF/CNPJ:"}),n.jsx("p",{className:"font-medium",children:f[0].bank_document})]})]})]})]})]})]})]}),n.jsx(Ut,{open:x.open,onOpenChange:k=>!k&&w({open:!1,payoutId:null,eventId:""}),children:n.jsxs(Bt,{children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Confirmar Repasse"}),n.jsx(is,{children:"Tem certeza que deseja marcar este repasse como pago? Esta ao no pode ser desfeita."})]}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Observaes (opcional)"}),n.jsx(An,{value:_,onChange:k=>j(k.target.value),placeholder:"Adicione informaes sobre o pagamento...",className:"mt-2"})]})}),n.jsxs(Uu,{children:[n.jsx(K,{variant:"outline",onClick:()=>w({open:!1,payoutId:null,eventId:""}),children:"Cancelar"}),n.jsx(K,{onClick:T,children:"Confirmar Pagamento"})]})]})})]})}function UW(){const e=_t(),{user:t}=bt(),[r,s]=v.useState(!0),[a,o]=v.useState([]),[c,u]=v.useState([]),[f,p]=v.useState(null),x=v.useRef(null),w=T=>T.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();v.useEffect(()=>{t&&_()},[t]);const _=async()=>{if(t)try{s(!0);const{data:T,error:E}=await U.from("event_registrations").select(`
          id,
          event_id,
          attendance_confirmed,
          created_at,
          events!inner (
            id,
            title,
            event_date,
            location,
            image_url,
            organizers!inner (
              page_title
            )
          )
        `).eq("user_id",t.id).order("created_at",{ascending:!1});if(E)throw E;const{data:S,error:b}=await U.from("ticket_sales").select(`
          id,
          event_id,
          quantity,
          total_amount,
          payment_status,
          created_at,
          buyer_name,
          buyer_email,
          ticket_type_id,
          ticket_types!inner (
            name
          ),
          events!inner (
            id,
            title,
            event_date,
            location,
            image_url,
            organizers!inner (
              page_title
            )
          )
        `).eq("user_id",t.id).eq("payment_status","completed").order("created_at",{ascending:!1});if(b)throw b;o((T||[]).map(k=>({...k,event:{...k.events,organizer:k.events.organizers}}))),u((S||[]).map(k=>({...k,event:{...k.events,organizer:k.events.organizers},ticket_type:k.ticket_types})))}catch(T){console.error("Error fetching user events:",T),X.error("Erro ao carregar eventos")}finally{s(!1)}},j=a.filter(T=>T.attendance_confirmed),N=a.filter(T=>!T.attendance_confirmed),C=({event:T,type:E,registration:S,purchase:b})=>n.jsx(je,{className:E==="purchase"?"":"cursor-pointer hover:shadow-lg transition-shadow",onClick:E==="purchase"?void 0:()=>e(`/events/${T.id}`),children:n.jsxs("div",{className:"flex gap-4 p-4",children:[T.image_url&&n.jsx("img",{src:T.image_url,alt:T.title,className:"w-24 h-24 rounded-lg object-cover"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-lg mb-1",children:T.title}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:T.organizer.page_title}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[n.jsx(Et,{className:"h-4 w-4"}),n.jsx("span",{children:ln(new Date(T.event_date),"PPP 's' HH:mm",{locale:Ir})})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(Rt,{className:"h-4 w-4"}),n.jsx("span",{className:"line-clamp-1",children:T.location})]}),E==="purchase"&&b&&n.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(dt,{variant:"secondary",children:b.ticket_type.name}),n.jsxs("span",{className:"ml-2 text-sm text-muted-foreground",children:[b.quantity,"x - R$ ",b.total_amount.toFixed(2)]})]}),n.jsxs(K,{size:"sm",onClick:()=>p(b),children:[n.jsx(V8,{className:"h-4 w-4 mr-2"}),"Ver Ingresso"]})]}),E==="confirmed"&&n.jsxs(dt,{className:"mt-2 bg-green-600",children:[n.jsx(as,{className:"h-3 w-3 mr-1"}),"Presena Confirmada"]})]})]})});return r?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:n.jsx(ka,{className:"h-8 w-8 animate-spin text-primary"})}):n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b border-border",children:n.jsx("div",{className:"flex items-center justify-between p-4 max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>e("/",{state:{initialTab:"profile"}}),children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Meus Eventos"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Cadastros, confirmaes e ingressos"})]})]})})}),n.jsx("div",{className:"p-4 max-w-7xl mx-auto pb-20",children:n.jsxs(Qm,{defaultValue:"purchases",className:"w-full",children:[n.jsxs(Vu,{className:"grid w-full grid-cols-3",children:[n.jsxs(os,{value:"purchases",children:[n.jsx(Ac,{className:"h-4 w-4 mr-2"}),"Ingressos (",c.length,")"]}),n.jsxs(os,{value:"confirmed",children:[n.jsx(as,{className:"h-4 w-4 mr-2"}),"Confirmados (",j.length,")"]}),n.jsxs(os,{value:"registrations",children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"Cadastros (",N.length,")"]})]}),n.jsx(ls,{value:"purchases",className:"space-y-4 mt-6",children:c.length===0?n.jsx(je,{children:n.jsxs(Ce,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(Ac,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("p",{className:"text-muted-foreground text-center",children:"Voc ainda no comprou nenhum ingresso"})]})}):c.map(T=>n.jsx(C,{event:T.event,type:"purchase",purchase:T},T.id))}),n.jsx(ls,{value:"confirmed",className:"space-y-4 mt-6",children:j.length===0?n.jsx(je,{children:n.jsxs(Ce,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(as,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("p",{className:"text-muted-foreground text-center",children:"Voc ainda no confirmou presena em nenhum evento"})]})}):j.map(T=>n.jsx(C,{event:T.event,type:"confirmed",registration:T},T.id))}),n.jsx(ls,{value:"registrations",className:"space-y-4 mt-6",children:N.length===0?n.jsx(je,{children:n.jsxs(Ce,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(Et,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("p",{className:"text-muted-foreground text-center",children:"Voc no tem cadastros pendentes em eventos"})]})}):N.map(T=>n.jsx(C,{event:T.event,type:"registration",registration:T},T.id))})]})}),n.jsx(Ut,{open:!!f,onOpenChange:()=>p(null),children:n.jsxs(Bt,{className:"sm:max-w-lg max-h-[90vh] overflow-y-auto",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Seu Ingresso Digital"}),n.jsx(is,{children:"Apresente este QR Code na entrada do evento"})]}),f&&n.jsxs("div",{className:"space-y-4 pb-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Titular do Ingresso"}),n.jsx("p",{className:"font-semibold",children:f.buyer_name})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Email"}),n.jsx("p",{className:"font-medium text-sm",children:f.buyer_email})]})]}),n.jsx("div",{className:"border-t border-dashed"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Evento"}),n.jsx("p",{className:"font-semibold",children:f.event.title})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Organizador"}),n.jsx("p",{className:"font-medium text-sm",children:f.event.organizer.page_title})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Data"}),n.jsx("p",{className:"font-medium text-sm",children:ln(new Date(f.event.event_date),"dd/MM/yyyy",{locale:Ir})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Horrio"}),n.jsx("p",{className:"font-medium text-sm",children:ln(new Date(f.event.event_date),"HH:mm",{locale:Ir})})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Local"}),n.jsx("p",{className:"font-medium text-sm",children:f.event.location})]})]}),n.jsx("div",{className:"border-t border-dashed"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Tipo de Ingresso"}),n.jsx("p",{className:"font-semibold text-sm",children:f.ticket_type.name})]}),n.jsxs(dt,{variant:"secondary",children:[f.quantity,"x"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Valor Total"}),n.jsxs("p",{className:"font-bold text-lg text-primary",children:["R$ ",f.total_amount.toFixed(2)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Data da Compra"}),n.jsx("p",{className:"font-medium text-sm",children:ln(new Date(f.created_at),"dd/MM/yyyy 's' HH:mm",{locale:Ir})})]})]}),n.jsx("div",{className:"border-t border-dashed"}),n.jsxs("div",{className:"flex flex-col items-center gap-3 py-2",children:[n.jsx("div",{ref:x,className:"bg-white p-4 rounded-lg shadow-sm",children:n.jsx(Ik,{value:f.id,size:200})}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Cdigo do Ingresso"}),n.jsx("p",{className:"text-xs font-mono bg-muted px-2 py-1 rounded",children:f.id})]})]}),n.jsxs("div",{className:"flex gap-2 pt-2",children:[n.jsx(K,{variant:"outline",className:"flex-1",onClick:()=>{var L;const T=(L=x.current)==null?void 0:L.querySelector("svg");if(!T){X.error("Erro ao gerar QR Code");return}const S=new XMLSerializer().serializeToString(T),b=new Blob([S],{type:"image/svg+xml;charset=utf-8"}),k=URL.createObjectURL(b),O=new Image;O.onload=()=>{const P=document.createElement("canvas"),M=P.getContext("2d");if(!M)return;P.width=400,P.height=500,M.fillStyle="white",M.fillRect(0,0,P.width,P.height),M.fillStyle="black",M.textAlign="center",M.font="bold 18px Arial",M.fillText("Ingresso Digital",P.width/2,30),M.font="14px Arial",M.fillText(f.event.title,P.width/2,60),M.drawImage(O,100,80,200,200),M.font="12px Arial",M.fillText(`Tipo: ${f.ticket_type.name}`,P.width/2,300),M.fillText(`Quantidade: ${f.quantity}x`,P.width/2,320),M.fillText(`Titular: ${f.buyer_name}`,P.width/2,340),M.font="10px monospace",M.fillText(f.id,P.width/2,380);const R=P.toDataURL("image/png"),$=document.createElement("a");$.download=`ingresso-${f.event.title.replace(/\s+/g,"-").toLowerCase()}.png`,$.href=R,$.click(),URL.revokeObjectURL(k),X.success("Ingresso baixado com sucesso!")},O.onerror=()=>{URL.revokeObjectURL(k),X.error("Erro ao processar QR Code")},O.src=k},children:"Baixar Ingresso"}),new Date(f.event.event_date)>new Date&&n.jsx(K,{className:"flex-1",onClick:async()=>{var E;if(!f)return;const{data:T}=await U.from("organizers").select("username").eq("id",(E=(await U.from("events").select("organizer_id").eq("id",f.event_id).maybeSingle()).data)==null?void 0:E.organizer_id).maybeSingle();if(T!=null&&T.username){const S=w(f.event.title);p(null),e(`/${T.username}/${S}`)}else X.error("Erro ao abrir evento")},children:"Ver Evento"})]})]})]})})]})}function $W(){const e=_t(),{organizerData:t}=ti(),{isNativeApp:r}=MA(),[s,a]=v.useState(!1);return v.useEffect(()=>{a(window.innerWidth<768)},[]),t!=null&&t.id?n.jsx("div",{className:"min-h-screen bg-background pb-20",children:n.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 md:px-6 lg:px-8 py-4 md:py-6 lg:py-8",children:[n.jsxs("div",{className:"mb-6 md:mb-8",children:[n.jsxs(K,{variant:"ghost",onClick:()=>{s&&!r?window.close():e(-1)},className:"mb-4 hover:bg-accent",children:[n.jsx(gt,{className:"h-4 w-4 mr-2"}),"Voltar"]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h1",{className:"text-2xl md:text-3xl lg:text-4xl font-bold",children:"Gesto Financeira"}),n.jsx("p",{className:"text-sm md:text-base text-muted-foreground",children:"Gerencie seus dados bancrios e acompanhe suas vendas"})]})]}),n.jsxs("div",{className:"grid gap-6 md:gap-8 lg:grid-cols-2 xl:gap-10",children:[n.jsx("div",{className:"space-y-4 md:space-y-6",children:n.jsxs("div",{className:"bg-card rounded-xl border p-4 md:p-6",children:[n.jsxs("div",{className:"mb-4 md:mb-6",children:[n.jsx("h2",{className:"text-xl md:text-2xl font-bold mb-1",children:"Dados Financeiros"}),n.jsx("p",{className:"text-sm md:text-base text-muted-foreground",children:"Configure suas informaes bancrias e fiscais"})]}),n.jsx(JA,{organizerId:t.id})]})}),n.jsx("div",{className:"space-y-4 md:space-y-6",children:n.jsxs("div",{className:"bg-card rounded-xl border p-4 md:p-6",children:[n.jsxs("div",{className:"mb-4 md:mb-6",children:[n.jsx("h2",{className:"text-xl md:text-2xl font-bold mb-1",children:"Vendas de Ingressos"}),n.jsx("p",{className:"text-sm md:text-base text-muted-foreground",children:"Acompanhe suas vendas e repasses"})]}),n.jsx(ek,{organizerId:t.id})]})})]})]})}):n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:n.jsx("div",{className:"text-center",children:n.jsx("p",{className:"text-muted-foreground mb-4",children:"Carregando..."})})})}const VW=new y5,qW=()=>n.jsx(_5,{client:VW,children:n.jsx(GO,{children:n.jsx(eL,{children:n.jsxs(tL,{children:[n.jsx(IP,{}),n.jsx(c6,{}),n.jsx(vD,{children:n.jsxs(mD,{children:[n.jsx(Wt,{path:"/",element:n.jsx(Dq,{})}),n.jsx(Wt,{path:"/auth",element:n.jsx(Fq,{onLogin:()=>{}})}),n.jsx(Wt,{path:"/organizer-onboarding",element:n.jsx(Hq,{})}),n.jsx(Wt,{path:"/user-onboarding",element:n.jsx(Xq,{})}),n.jsx(Wt,{path:"/notifications",element:n.jsx(iW,{})}),n.jsx(Wt,{path:"/ticket-success",element:n.jsx(DW,{})}),n.jsx(Wt,{path:"/my-events",element:n.jsx(UW,{})}),n.jsx(Wt,{path:"/organizer-financial",element:n.jsx($W,{})}),n.jsx(Wt,{path:"/event/:eventId/sales",element:n.jsx(FW,{})}),n.jsx(Wt,{path:"/event/:eventId/register",element:n.jsx(ck,{})}),n.jsx(Wt,{path:"/event/:eventId/registrations",element:n.jsx(Tv,{})}),n.jsx(Wt,{path:"/event/:eventId/attendances",element:n.jsx(Iv,{})}),n.jsx(Wt,{path:"/event/:eventId/find-friends",element:n.jsx(u0,{})}),n.jsx(Wt,{path:"/e/:eventId",element:n.jsx(_2,{})}),n.jsx(Wt,{path:"/admin",element:n.jsx(Yq,{})}),n.jsx(Wt,{path:"/admin/create-platform-event",element:n.jsx(Qq,{})}),n.jsx(Wt,{path:"/admin/claims",element:n.jsx(Zq,{})}),n.jsx(Wt,{path:"/admin/platform-events",element:n.jsx(Jq,{})}),n.jsx(Wt,{path:"/admin/platform-event/:eventId/edit",element:n.jsx(eW,{})}),n.jsx(Wt,{path:"/admin/platform-event/:eventId/registrations",element:n.jsx(tW,{})}),n.jsx(Wt,{path:"/admin/support",element:n.jsx(rW,{})}),n.jsx(Wt,{path:"/admin/auto-generate-events",element:n.jsx(nW,{})}),n.jsx(Wt,{path:"/admin/pending-events",element:n.jsx(sW,{})}),n.jsx(Wt,{path:"/admin/pending-event/:eventId/edit",element:n.jsx(aW,{})}),n.jsx(Wt,{path:"/admin/organizer-payments",element:n.jsx(BW,{})}),n.jsx(Wt,{path:"/admin/organizer-payments/:organizerId",element:n.jsx(zW,{})}),n.jsx(Wt,{path:"/:organizerSlug/:eventSlug",element:n.jsx(_2,{})}),n.jsx(Wt,{path:"/:slug",element:n.jsx(Lq,{})}),n.jsx(Wt,{path:"*",element:n.jsx(Kq,{})})]})})]})})})});KN(document.getElementById("root")).render(n.jsx(v.StrictMode,{children:n.jsx(qW,{})}));export{Yb as B,Ng as C,Pc as E,Zb as L,kE as W};
