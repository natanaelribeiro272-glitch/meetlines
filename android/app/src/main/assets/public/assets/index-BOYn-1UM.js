var ew=e=>{throw TypeError(e)};var Ip=(e,t,r)=>t.has(e)||ew("Cannot "+r);var je=(e,t,r)=>(Ip(e,t,"read from private field"),r?r.call(e):t.get(e)),It=(e,t,r)=>t.has(e)?ew("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),ut=(e,t,r,s)=>(Ip(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),xn=(e,t,r)=>(Ip(e,t,"access private method"),r);var ih=(e,t,r,s)=>({set _(a){ut(e,t,a,r)},get _(){return je(e,t,s)}});function O2(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const o=Object.getOwnPropertyDescriptor(s,a);o&&Object.defineProperty(e,a,o.get?o:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var cn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function C0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function iT(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var a=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,a.get?a:{enumerable:!0,get:function(){return e[s]}})}),r}var D2={exports:{}},rm={},M2={exports:{}},jt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ju=Symbol.for("react.element"),oT=Symbol.for("react.portal"),lT=Symbol.for("react.fragment"),cT=Symbol.for("react.strict_mode"),dT=Symbol.for("react.profiler"),uT=Symbol.for("react.provider"),hT=Symbol.for("react.context"),fT=Symbol.for("react.forward_ref"),mT=Symbol.for("react.suspense"),pT=Symbol.for("react.memo"),gT=Symbol.for("react.lazy"),tw=Symbol.iterator;function xT(e){return e===null||typeof e!="object"?null:(e=tw&&e[tw]||e["@@iterator"],typeof e=="function"?e:null)}var L2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F2=Object.assign,B2={};function Lc(e,t,r){this.props=e,this.context=t,this.refs=B2,this.updater=r||L2}Lc.prototype.isReactComponent={};Lc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Lc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function z2(){}z2.prototype=Lc.prototype;function E0(e,t,r){this.props=e,this.context=t,this.refs=B2,this.updater=r||L2}var S0=E0.prototype=new z2;S0.constructor=E0;F2(S0,Lc.prototype);S0.isPureReactComponent=!0;var rw=Array.isArray,U2=Object.prototype.hasOwnProperty,A0={current:null},$2={key:!0,ref:!0,__self:!0,__source:!0};function V2(e,t,r){var s,a={},o=null,c=null;if(t!=null)for(s in t.ref!==void 0&&(c=t.ref),t.key!==void 0&&(o=""+t.key),t)U2.call(t,s)&&!$2.hasOwnProperty(s)&&(a[s]=t[s]);var u=arguments.length-2;if(u===1)a.children=r;else if(1<u){for(var f=Array(u),p=0;p<u;p++)f[p]=arguments[p+2];a.children=f}if(e&&e.defaultProps)for(s in u=e.defaultProps,u)a[s]===void 0&&(a[s]=u[s]);return{$$typeof:ju,type:e,key:o,ref:c,props:a,_owner:A0.current}}function vT(e,t){return{$$typeof:ju,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function k0(e){return typeof e=="object"&&e!==null&&e.$$typeof===ju}function wT(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var nw=/\/+/g;function Rp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?wT(""+e.key):t.toString(36)}function Bh(e,t,r,s,a){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var c=!1;if(e===null)c=!0;else switch(o){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case ju:case oT:c=!0}}if(c)return c=e,a=a(c),e=s===""?"."+Rp(c,0):s,rw(a)?(r="",e!=null&&(r=e.replace(nw,"$&/")+"/"),Bh(a,t,r,"",function(p){return p})):a!=null&&(k0(a)&&(a=vT(a,r+(!a.key||c&&c.key===a.key?"":(""+a.key).replace(nw,"$&/")+"/")+e)),t.push(a)),1;if(c=0,s=s===""?".":s+":",rw(e))for(var u=0;u<e.length;u++){o=e[u];var f=s+Rp(o,u);c+=Bh(o,t,r,f,a)}else if(f=xT(e),typeof f=="function")for(e=f.call(e),u=0;!(o=e.next()).done;)o=o.value,f=s+Rp(o,u++),c+=Bh(o,t,r,f,a);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function oh(e,t,r){if(e==null)return e;var s=[],a=0;return Bh(e,s,"","",function(o){return t.call(r,o,a++)}),s}function yT(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Tn={current:null},zh={transition:null},bT={ReactCurrentDispatcher:Tn,ReactCurrentBatchConfig:zh,ReactCurrentOwner:A0};function q2(){throw Error("act(...) is not supported in production builds of React.")}jt.Children={map:oh,forEach:function(e,t,r){oh(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return oh(e,function(){t++}),t},toArray:function(e){return oh(e,function(t){return t})||[]},only:function(e){if(!k0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};jt.Component=Lc;jt.Fragment=lT;jt.Profiler=dT;jt.PureComponent=E0;jt.StrictMode=cT;jt.Suspense=mT;jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bT;jt.act=q2;jt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=F2({},e.props),a=e.key,o=e.ref,c=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,c=A0.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(f in t)U2.call(t,f)&&!$2.hasOwnProperty(f)&&(s[f]=t[f]===void 0&&u!==void 0?u[f]:t[f])}var f=arguments.length-2;if(f===1)s.children=r;else if(1<f){u=Array(f);for(var p=0;p<f;p++)u[p]=arguments[p+2];s.children=u}return{$$typeof:ju,type:e.type,key:a,ref:o,props:s,_owner:c}};jt.createContext=function(e){return e={$$typeof:hT,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:uT,_context:e},e.Consumer=e};jt.createElement=V2;jt.createFactory=function(e){var t=V2.bind(null,e);return t.type=e,t};jt.createRef=function(){return{current:null}};jt.forwardRef=function(e){return{$$typeof:fT,render:e}};jt.isValidElement=k0;jt.lazy=function(e){return{$$typeof:gT,_payload:{_status:-1,_result:e},_init:yT}};jt.memo=function(e,t){return{$$typeof:pT,type:e,compare:t===void 0?null:t}};jt.startTransition=function(e){var t=zh.transition;zh.transition={};try{e()}finally{zh.transition=t}};jt.unstable_act=q2;jt.useCallback=function(e,t){return Tn.current.useCallback(e,t)};jt.useContext=function(e){return Tn.current.useContext(e)};jt.useDebugValue=function(){};jt.useDeferredValue=function(e){return Tn.current.useDeferredValue(e)};jt.useEffect=function(e,t){return Tn.current.useEffect(e,t)};jt.useId=function(){return Tn.current.useId()};jt.useImperativeHandle=function(e,t,r){return Tn.current.useImperativeHandle(e,t,r)};jt.useInsertionEffect=function(e,t){return Tn.current.useInsertionEffect(e,t)};jt.useLayoutEffect=function(e,t){return Tn.current.useLayoutEffect(e,t)};jt.useMemo=function(e,t){return Tn.current.useMemo(e,t)};jt.useReducer=function(e,t,r){return Tn.current.useReducer(e,t,r)};jt.useRef=function(e){return Tn.current.useRef(e)};jt.useState=function(e){return Tn.current.useState(e)};jt.useSyncExternalStore=function(e,t,r){return Tn.current.useSyncExternalStore(e,t,r)};jt.useTransition=function(){return Tn.current.useTransition()};jt.version="18.3.1";M2.exports=jt;var v=M2.exports;const Ue=C0(v),T0=O2({__proto__:null,default:Ue},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _T=v,NT=Symbol.for("react.element"),jT=Symbol.for("react.fragment"),CT=Object.prototype.hasOwnProperty,ET=_T.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ST={key:!0,ref:!0,__self:!0,__source:!0};function W2(e,t,r){var s,a={},o=null,c=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(c=t.ref);for(s in t)CT.call(t,s)&&!ST.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:NT,type:e,key:o,ref:c,props:a,_owner:ET.current}}rm.Fragment=jT;rm.jsx=W2;rm.jsxs=W2;D2.exports=rm;var n=D2.exports,H2={exports:{}},ps={},G2={exports:{}},X2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ae,J){var he=ae.length;ae.push(J);e:for(;0<he;){var ye=he-1>>>1,H=ae[ye];if(0<a(H,J))ae[ye]=J,ae[he]=H,he=ye;else break e}}function r(ae){return ae.length===0?null:ae[0]}function s(ae){if(ae.length===0)return null;var J=ae[0],he=ae.pop();if(he!==J){ae[0]=he;e:for(var ye=0,H=ae.length,ee=H>>>1;ye<ee;){var X=2*(ye+1)-1,te=ae[X],se=X+1,ce=ae[se];if(0>a(te,he))se<H&&0>a(ce,te)?(ae[ye]=ce,ae[se]=he,ye=se):(ae[ye]=te,ae[X]=he,ye=X);else if(se<H&&0>a(ce,he))ae[ye]=ce,ae[se]=he,ye=se;else break e}}return J}function a(ae,J){var he=ae.sortIndex-J.sortIndex;return he!==0?he:ae.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();e.unstable_now=function(){return c.now()-u}}var f=[],p=[],x=1,w=null,b=3,j=!1,N=!1,C=!1,T=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(ae){for(var J=r(p);J!==null;){if(J.callback===null)s(p);else if(J.startTime<=ae)s(p),J.sortIndex=J.expirationTime,t(f,J);else break;J=r(p)}}function k(ae){if(C=!1,_(ae),!N)if(r(f)!==null)N=!0,ne(D);else{var J=r(p);J!==null&&oe(k,J.startTime-ae)}}function D(ae,J){N=!1,C&&(C=!1,S(M),M=-1),j=!0;var he=b;try{for(_(J),w=r(f);w!==null&&(!(w.expirationTime>J)||ae&&!Y());){var ye=w.callback;if(typeof ye=="function"){w.callback=null,b=w.priorityLevel;var H=ye(w.expirationTime<=J);J=e.unstable_now(),typeof H=="function"?w.callback=H:w===r(f)&&s(f),_(J)}else s(f);w=r(f)}if(w!==null)var ee=!0;else{var X=r(p);X!==null&&oe(k,X.startTime-J),ee=!1}return ee}finally{w=null,b=he,j=!1}}var L=!1,R=null,M=-1,P=5,F=-1;function Y(){return!(e.unstable_now()-F<P)}function U(){if(R!==null){var ae=e.unstable_now();F=ae;var J=!0;try{J=R(!0,ae)}finally{J?q():(L=!1,R=null)}}else L=!1}var q;if(typeof E=="function")q=function(){E(U)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,W=re.port2;re.port1.onmessage=U,q=function(){W.postMessage(null)}}else q=function(){T(U,0)};function ne(ae){R=ae,L||(L=!0,q())}function oe(ae,J){M=T(function(){ae(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ae){ae.callback=null},e.unstable_continueExecution=function(){N||j||(N=!0,ne(D))},e.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<ae?Math.floor(1e3/ae):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_getFirstCallbackNode=function(){return r(f)},e.unstable_next=function(ae){switch(b){case 1:case 2:case 3:var J=3;break;default:J=b}var he=b;b=J;try{return ae()}finally{b=he}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ae,J){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var he=b;b=ae;try{return J()}finally{b=he}},e.unstable_scheduleCallback=function(ae,J,he){var ye=e.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?ye+he:ye):he=ye,ae){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=he+H,ae={id:x++,callback:J,priorityLevel:ae,startTime:he,expirationTime:H,sortIndex:-1},he>ye?(ae.sortIndex=he,t(p,ae),r(f)===null&&ae===r(p)&&(C?(S(M),M=-1):C=!0,oe(k,he-ye))):(ae.sortIndex=H,t(f,ae),N||j||(N=!0,ne(D))),ae},e.unstable_shouldYield=Y,e.unstable_wrapCallback=function(ae){var J=b;return function(){var he=b;b=J;try{return ae.apply(this,arguments)}finally{b=he}}}})(X2);G2.exports=X2;var AT=G2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kT=v,fs=AT;function Oe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var K2=new Set,Ud={};function ll(e,t){yc(e,t),yc(e+"Capture",t)}function yc(e,t){for(Ud[e]=t,e=0;e<t.length;e++)K2.add(t[e])}var Xa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Og=Object.prototype.hasOwnProperty,TT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sw={},aw={};function IT(e){return Og.call(aw,e)?!0:Og.call(sw,e)?!1:TT.test(e)?aw[e]=!0:(sw[e]=!0,!1)}function RT(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function PT(e,t,r,s){if(t===null||typeof t>"u"||RT(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function In(e,t,r,s,a,o,c){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=c}var fn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){fn[e]=new In(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];fn[t]=new In(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){fn[e]=new In(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){fn[e]=new In(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){fn[e]=new In(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){fn[e]=new In(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){fn[e]=new In(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){fn[e]=new In(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){fn[e]=new In(e,5,!1,e.toLowerCase(),null,!1,!1)});var I0=/[\-:]([a-z])/g;function R0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(I0,R0);fn[t]=new In(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(I0,R0);fn[t]=new In(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(I0,R0);fn[t]=new In(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){fn[e]=new In(e,1,!1,e.toLowerCase(),null,!1,!1)});fn.xlinkHref=new In("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){fn[e]=new In(e,1,!1,e.toLowerCase(),null,!0,!0)});function P0(e,t,r,s){var a=fn.hasOwnProperty(t)?fn[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(PT(t,r,a,s)&&(r=null),s||a===null?IT(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,s=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var ri=kT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lh=Symbol.for("react.element"),Ul=Symbol.for("react.portal"),$l=Symbol.for("react.fragment"),O0=Symbol.for("react.strict_mode"),Dg=Symbol.for("react.profiler"),Y2=Symbol.for("react.provider"),Q2=Symbol.for("react.context"),D0=Symbol.for("react.forward_ref"),Mg=Symbol.for("react.suspense"),Lg=Symbol.for("react.suspense_list"),M0=Symbol.for("react.memo"),wi=Symbol.for("react.lazy"),Z2=Symbol.for("react.offscreen"),iw=Symbol.iterator;function od(e){return e===null||typeof e!="object"?null:(e=iw&&e[iw]||e["@@iterator"],typeof e=="function"?e:null)}var yr=Object.assign,Pp;function yd(e){if(Pp===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Pp=t&&t[1]||""}return`
`+Pp+e}var Op=!1;function Dp(e,t){if(!e||Op)return"";Op=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(p){var s=p}Reflect.construct(e,[],t)}else{try{t.call()}catch(p){s=p}e.call(t.prototype)}else{try{throw Error()}catch(p){s=p}e()}}catch(p){if(p&&s&&typeof p.stack=="string"){for(var a=p.stack.split(`
`),o=s.stack.split(`
`),c=a.length-1,u=o.length-1;1<=c&&0<=u&&a[c]!==o[u];)u--;for(;1<=c&&0<=u;c--,u--)if(a[c]!==o[u]){if(c!==1||u!==1)do if(c--,u--,0>u||a[c]!==o[u]){var f=`
`+a[c].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=c&&0<=u);break}}}finally{Op=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?yd(e):""}function OT(e){switch(e.tag){case 5:return yd(e.type);case 16:return yd("Lazy");case 13:return yd("Suspense");case 19:return yd("SuspenseList");case 0:case 2:case 15:return e=Dp(e.type,!1),e;case 11:return e=Dp(e.type.render,!1),e;case 1:return e=Dp(e.type,!0),e;default:return""}}function Fg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $l:return"Fragment";case Ul:return"Portal";case Dg:return"Profiler";case O0:return"StrictMode";case Mg:return"Suspense";case Lg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Q2:return(e.displayName||"Context")+".Consumer";case Y2:return(e._context.displayName||"Context")+".Provider";case D0:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case M0:return t=e.displayName||null,t!==null?t:Fg(e.type)||"Memo";case wi:t=e._payload,e=e._init;try{return Fg(e(t))}catch{}}return null}function DT(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fg(t);case 8:return t===O0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Vi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function J2(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function MT(e){var t=J2(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(c){s=""+c,o.call(this,c)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(c){s=""+c},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ch(e){e._valueTracker||(e._valueTracker=MT(e))}function e_(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=J2(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function df(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Bg(e,t){var r=t.checked;return yr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function ow(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=Vi(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function t_(e,t){t=t.checked,t!=null&&P0(e,"checked",t,!1)}function zg(e,t){t_(e,t);var r=Vi(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ug(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ug(e,t.type,Vi(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function lw(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Ug(e,t,r){(t!=="number"||df(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var bd=Array.isArray;function ec(e,t,r,s){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&s&&(e[r].defaultSelected=!0)}else{for(r=""+Vi(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function $g(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Oe(91));return yr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function cw(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Oe(92));if(bd(r)){if(1<r.length)throw Error(Oe(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Vi(r)}}function r_(e,t){var r=Vi(t.value),s=Vi(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function dw(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function n_(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?n_(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var dh,s_=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(dh=dh||document.createElement("div"),dh.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=dh.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function $d(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Sd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LT=["Webkit","ms","Moz","O"];Object.keys(Sd).forEach(function(e){LT.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Sd[t]=Sd[e]})});function a_(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Sd.hasOwnProperty(e)&&Sd[e]?(""+t).trim():t+"px"}function i_(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=a_(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,a):e[r]=a}}var FT=yr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qg(e,t){if(t){if(FT[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Oe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Oe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Oe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Oe(62))}}function Wg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hg=null;function L0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Gg=null,tc=null,rc=null;function uw(e){if(e=Su(e)){if(typeof Gg!="function")throw Error(Oe(280));var t=e.stateNode;t&&(t=om(t),Gg(e.stateNode,e.type,t))}}function o_(e){tc?rc?rc.push(e):rc=[e]:tc=e}function l_(){if(tc){var e=tc,t=rc;if(rc=tc=null,uw(e),t)for(e=0;e<t.length;e++)uw(t[e])}}function c_(e,t){return e(t)}function d_(){}var Mp=!1;function u_(e,t,r){if(Mp)return e(t,r);Mp=!0;try{return c_(e,t,r)}finally{Mp=!1,(tc!==null||rc!==null)&&(d_(),l_())}}function Vd(e,t){var r=e.stateNode;if(r===null)return null;var s=om(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Oe(231,t,typeof r));return r}var Xg=!1;if(Xa)try{var ld={};Object.defineProperty(ld,"passive",{get:function(){Xg=!0}}),window.addEventListener("test",ld,ld),window.removeEventListener("test",ld,ld)}catch{Xg=!1}function BT(e,t,r,s,a,o,c,u,f){var p=Array.prototype.slice.call(arguments,3);try{t.apply(r,p)}catch(x){this.onError(x)}}var Ad=!1,uf=null,hf=!1,Kg=null,zT={onError:function(e){Ad=!0,uf=e}};function UT(e,t,r,s,a,o,c,u,f){Ad=!1,uf=null,BT.apply(zT,arguments)}function $T(e,t,r,s,a,o,c,u,f){if(UT.apply(this,arguments),Ad){if(Ad){var p=uf;Ad=!1,uf=null}else throw Error(Oe(198));hf||(hf=!0,Kg=p)}}function cl(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function h_(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function hw(e){if(cl(e)!==e)throw Error(Oe(188))}function VT(e){var t=e.alternate;if(!t){if(t=cl(e),t===null)throw Error(Oe(188));return t!==e?null:e}for(var r=e,s=t;;){var a=r.return;if(a===null)break;var o=a.alternate;if(o===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===r)return hw(a),e;if(o===s)return hw(a),t;o=o.sibling}throw Error(Oe(188))}if(r.return!==s.return)r=a,s=o;else{for(var c=!1,u=a.child;u;){if(u===r){c=!0,r=a,s=o;break}if(u===s){c=!0,s=a,r=o;break}u=u.sibling}if(!c){for(u=o.child;u;){if(u===r){c=!0,r=o,s=a;break}if(u===s){c=!0,s=o,r=a;break}u=u.sibling}if(!c)throw Error(Oe(189))}}if(r.alternate!==s)throw Error(Oe(190))}if(r.tag!==3)throw Error(Oe(188));return r.stateNode.current===r?e:t}function f_(e){return e=VT(e),e!==null?m_(e):null}function m_(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=m_(e);if(t!==null)return t;e=e.sibling}return null}var p_=fs.unstable_scheduleCallback,fw=fs.unstable_cancelCallback,qT=fs.unstable_shouldYield,WT=fs.unstable_requestPaint,kr=fs.unstable_now,HT=fs.unstable_getCurrentPriorityLevel,F0=fs.unstable_ImmediatePriority,g_=fs.unstable_UserBlockingPriority,ff=fs.unstable_NormalPriority,GT=fs.unstable_LowPriority,x_=fs.unstable_IdlePriority,nm=null,Aa=null;function XT(e){if(Aa&&typeof Aa.onCommitFiberRoot=="function")try{Aa.onCommitFiberRoot(nm,e,void 0,(e.current.flags&128)===128)}catch{}}var na=Math.clz32?Math.clz32:QT,KT=Math.log,YT=Math.LN2;function QT(e){return e>>>=0,e===0?32:31-(KT(e)/YT|0)|0}var uh=64,hh=4194304;function _d(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function mf(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,a=e.suspendedLanes,o=e.pingedLanes,c=r&268435455;if(c!==0){var u=c&~a;u!==0?s=_d(u):(o&=c,o!==0&&(s=_d(o)))}else c=r&~a,c!==0?s=_d(c):o!==0&&(s=_d(o));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,o=t&-t,a>=o||a===16&&(o&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-na(t),a=1<<r,s|=e[r],t&=~a;return s}function ZT(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function JT(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var c=31-na(o),u=1<<c,f=a[c];f===-1?(!(u&r)||u&s)&&(a[c]=ZT(u,t)):f<=t&&(e.expiredLanes|=u),o&=~u}}function Yg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function v_(){var e=uh;return uh<<=1,!(uh&4194240)&&(uh=64),e}function Lp(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Cu(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-na(t),e[t]=r}function eI(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-na(r),o=1<<a;t[a]=0,s[a]=-1,e[a]=-1,r&=~o}}function B0(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-na(r),a=1<<s;a&t|e[s]&t&&(e[s]|=t),r&=~a}}var Xt=0;function w_(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var y_,z0,b_,__,N_,Qg=!1,fh=[],Pi=null,Oi=null,Di=null,qd=new Map,Wd=new Map,bi=[],tI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mw(e,t){switch(e){case"focusin":case"focusout":Pi=null;break;case"dragenter":case"dragleave":Oi=null;break;case"mouseover":case"mouseout":Di=null;break;case"pointerover":case"pointerout":qd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wd.delete(t.pointerId)}}function cd(e,t,r,s,a,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:o,targetContainers:[a]},t!==null&&(t=Su(t),t!==null&&z0(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function rI(e,t,r,s,a){switch(t){case"focusin":return Pi=cd(Pi,e,t,r,s,a),!0;case"dragenter":return Oi=cd(Oi,e,t,r,s,a),!0;case"mouseover":return Di=cd(Di,e,t,r,s,a),!0;case"pointerover":var o=a.pointerId;return qd.set(o,cd(qd.get(o)||null,e,t,r,s,a)),!0;case"gotpointercapture":return o=a.pointerId,Wd.set(o,cd(Wd.get(o)||null,e,t,r,s,a)),!0}return!1}function j_(e){var t=Ao(e.target);if(t!==null){var r=cl(t);if(r!==null){if(t=r.tag,t===13){if(t=h_(r),t!==null){e.blockedOn=t,N_(e.priority,function(){b_(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Uh(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Zg(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);Hg=s,r.target.dispatchEvent(s),Hg=null}else return t=Su(r),t!==null&&z0(t),e.blockedOn=r,!1;t.shift()}return!0}function pw(e,t,r){Uh(e)&&r.delete(t)}function nI(){Qg=!1,Pi!==null&&Uh(Pi)&&(Pi=null),Oi!==null&&Uh(Oi)&&(Oi=null),Di!==null&&Uh(Di)&&(Di=null),qd.forEach(pw),Wd.forEach(pw)}function dd(e,t){e.blockedOn===t&&(e.blockedOn=null,Qg||(Qg=!0,fs.unstable_scheduleCallback(fs.unstable_NormalPriority,nI)))}function Hd(e){function t(a){return dd(a,e)}if(0<fh.length){dd(fh[0],e);for(var r=1;r<fh.length;r++){var s=fh[r];s.blockedOn===e&&(s.blockedOn=null)}}for(Pi!==null&&dd(Pi,e),Oi!==null&&dd(Oi,e),Di!==null&&dd(Di,e),qd.forEach(t),Wd.forEach(t),r=0;r<bi.length;r++)s=bi[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<bi.length&&(r=bi[0],r.blockedOn===null);)j_(r),r.blockedOn===null&&bi.shift()}var nc=ri.ReactCurrentBatchConfig,pf=!0;function sI(e,t,r,s){var a=Xt,o=nc.transition;nc.transition=null;try{Xt=1,U0(e,t,r,s)}finally{Xt=a,nc.transition=o}}function aI(e,t,r,s){var a=Xt,o=nc.transition;nc.transition=null;try{Xt=4,U0(e,t,r,s)}finally{Xt=a,nc.transition=o}}function U0(e,t,r,s){if(pf){var a=Zg(e,t,r,s);if(a===null)Gp(e,t,s,gf,r),mw(e,s);else if(rI(a,e,t,r,s))s.stopPropagation();else if(mw(e,s),t&4&&-1<tI.indexOf(e)){for(;a!==null;){var o=Su(a);if(o!==null&&y_(o),o=Zg(e,t,r,s),o===null&&Gp(e,t,s,gf,r),o===a)break;a=o}a!==null&&s.stopPropagation()}else Gp(e,t,s,null,r)}}var gf=null;function Zg(e,t,r,s){if(gf=null,e=L0(s),e=Ao(e),e!==null)if(t=cl(e),t===null)e=null;else if(r=t.tag,r===13){if(e=h_(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return gf=e,null}function C_(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(HT()){case F0:return 1;case g_:return 4;case ff:case GT:return 16;case x_:return 536870912;default:return 16}default:return 16}}var Ti=null,$0=null,$h=null;function E_(){if($h)return $h;var e,t=$0,r=t.length,s,a="value"in Ti?Ti.value:Ti.textContent,o=a.length;for(e=0;e<r&&t[e]===a[e];e++);var c=r-e;for(s=1;s<=c&&t[r-s]===a[o-s];s++);return $h=a.slice(e,1<s?1-s:void 0)}function Vh(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function mh(){return!0}function gw(){return!1}function gs(e){function t(r,s,a,o,c){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=o,this.target=c,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(r=e[u],this[u]=r?r(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?mh:gw,this.isPropagationStopped=gw,this}return yr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=mh)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=mh)},persist:function(){},isPersistent:mh}),t}var Fc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},V0=gs(Fc),Eu=yr({},Fc,{view:0,detail:0}),iI=gs(Eu),Fp,Bp,ud,sm=yr({},Eu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:q0,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ud&&(ud&&e.type==="mousemove"?(Fp=e.screenX-ud.screenX,Bp=e.screenY-ud.screenY):Bp=Fp=0,ud=e),Fp)},movementY:function(e){return"movementY"in e?e.movementY:Bp}}),xw=gs(sm),oI=yr({},sm,{dataTransfer:0}),lI=gs(oI),cI=yr({},Eu,{relatedTarget:0}),zp=gs(cI),dI=yr({},Fc,{animationName:0,elapsedTime:0,pseudoElement:0}),uI=gs(dI),hI=yr({},Fc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),fI=gs(hI),mI=yr({},Fc,{data:0}),vw=gs(mI),pI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vI(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=xI[e])?!!t[e]:!1}function q0(){return vI}var wI=yr({},Eu,{key:function(e){if(e.key){var t=pI[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Vh(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?gI[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:q0,charCode:function(e){return e.type==="keypress"?Vh(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Vh(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),yI=gs(wI),bI=yr({},sm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ww=gs(bI),_I=yr({},Eu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:q0}),NI=gs(_I),jI=yr({},Fc,{propertyName:0,elapsedTime:0,pseudoElement:0}),CI=gs(jI),EI=yr({},sm,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),SI=gs(EI),AI=[9,13,27,32],W0=Xa&&"CompositionEvent"in window,kd=null;Xa&&"documentMode"in document&&(kd=document.documentMode);var kI=Xa&&"TextEvent"in window&&!kd,S_=Xa&&(!W0||kd&&8<kd&&11>=kd),yw=" ",bw=!1;function A_(e,t){switch(e){case"keyup":return AI.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function k_(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vl=!1;function TI(e,t){switch(e){case"compositionend":return k_(t);case"keypress":return t.which!==32?null:(bw=!0,yw);case"textInput":return e=t.data,e===yw&&bw?null:e;default:return null}}function II(e,t){if(Vl)return e==="compositionend"||!W0&&A_(e,t)?(e=E_(),$h=$0=Ti=null,Vl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return S_&&t.locale!=="ko"?null:t.data;default:return null}}var RI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _w(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!RI[e.type]:t==="textarea"}function T_(e,t,r,s){o_(s),t=xf(t,"onChange"),0<t.length&&(r=new V0("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Td=null,Gd=null;function PI(e){U_(e,0)}function am(e){var t=Hl(e);if(e_(t))return e}function OI(e,t){if(e==="change")return t}var I_=!1;if(Xa){var Up;if(Xa){var $p="oninput"in document;if(!$p){var Nw=document.createElement("div");Nw.setAttribute("oninput","return;"),$p=typeof Nw.oninput=="function"}Up=$p}else Up=!1;I_=Up&&(!document.documentMode||9<document.documentMode)}function jw(){Td&&(Td.detachEvent("onpropertychange",R_),Gd=Td=null)}function R_(e){if(e.propertyName==="value"&&am(Gd)){var t=[];T_(t,Gd,e,L0(e)),u_(PI,t)}}function DI(e,t,r){e==="focusin"?(jw(),Td=t,Gd=r,Td.attachEvent("onpropertychange",R_)):e==="focusout"&&jw()}function MI(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return am(Gd)}function LI(e,t){if(e==="click")return am(t)}function FI(e,t){if(e==="input"||e==="change")return am(t)}function BI(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var aa=typeof Object.is=="function"?Object.is:BI;function Xd(e,t){if(aa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!Og.call(t,a)||!aa(e[a],t[a]))return!1}return!0}function Cw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ew(e,t){var r=Cw(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Cw(r)}}function P_(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?P_(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function O_(){for(var e=window,t=df();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=df(e.document)}return t}function H0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function zI(e){var t=O_(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&P_(r.ownerDocument.documentElement,r)){if(s!==null&&H0(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,o=Math.min(s.start,a);s=s.end===void 0?o:Math.min(s.end,a),!e.extend&&o>s&&(a=s,s=o,o=a),a=Ew(r,o);var c=Ew(r,s);a&&c&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==c.node||e.focusOffset!==c.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),o>s?(e.addRange(t),e.extend(c.node,c.offset)):(t.setEnd(c.node,c.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var UI=Xa&&"documentMode"in document&&11>=document.documentMode,ql=null,Jg=null,Id=null,ex=!1;function Sw(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ex||ql==null||ql!==df(s)||(s=ql,"selectionStart"in s&&H0(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Id&&Xd(Id,s)||(Id=s,s=xf(Jg,"onSelect"),0<s.length&&(t=new V0("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=ql)))}function ph(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Wl={animationend:ph("Animation","AnimationEnd"),animationiteration:ph("Animation","AnimationIteration"),animationstart:ph("Animation","AnimationStart"),transitionend:ph("Transition","TransitionEnd")},Vp={},D_={};Xa&&(D_=document.createElement("div").style,"AnimationEvent"in window||(delete Wl.animationend.animation,delete Wl.animationiteration.animation,delete Wl.animationstart.animation),"TransitionEvent"in window||delete Wl.transitionend.transition);function im(e){if(Vp[e])return Vp[e];if(!Wl[e])return e;var t=Wl[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in D_)return Vp[e]=t[r];return e}var M_=im("animationend"),L_=im("animationiteration"),F_=im("animationstart"),B_=im("transitionend"),z_=new Map,Aw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ro(e,t){z_.set(e,t),ll(t,[e])}for(var qp=0;qp<Aw.length;qp++){var Wp=Aw[qp],$I=Wp.toLowerCase(),VI=Wp[0].toUpperCase()+Wp.slice(1);ro($I,"on"+VI)}ro(M_,"onAnimationEnd");ro(L_,"onAnimationIteration");ro(F_,"onAnimationStart");ro("dblclick","onDoubleClick");ro("focusin","onFocus");ro("focusout","onBlur");ro(B_,"onTransitionEnd");yc("onMouseEnter",["mouseout","mouseover"]);yc("onMouseLeave",["mouseout","mouseover"]);yc("onPointerEnter",["pointerout","pointerover"]);yc("onPointerLeave",["pointerout","pointerover"]);ll("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ll("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ll("onBeforeInput",["compositionend","keypress","textInput","paste"]);ll("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ll("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ll("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nd));function kw(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,$T(s,t,void 0,e),e.currentTarget=null}function U_(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],a=s.event;s=s.listeners;e:{var o=void 0;if(t)for(var c=s.length-1;0<=c;c--){var u=s[c],f=u.instance,p=u.currentTarget;if(u=u.listener,f!==o&&a.isPropagationStopped())break e;kw(a,u,p),o=f}else for(c=0;c<s.length;c++){if(u=s[c],f=u.instance,p=u.currentTarget,u=u.listener,f!==o&&a.isPropagationStopped())break e;kw(a,u,p),o=f}}}if(hf)throw e=Kg,hf=!1,Kg=null,e}function lr(e,t){var r=t[ax];r===void 0&&(r=t[ax]=new Set);var s=e+"__bubble";r.has(s)||($_(t,e,2,!1),r.add(s))}function Hp(e,t,r){var s=0;t&&(s|=4),$_(r,e,s,t)}var gh="_reactListening"+Math.random().toString(36).slice(2);function Kd(e){if(!e[gh]){e[gh]=!0,K2.forEach(function(r){r!=="selectionchange"&&(qI.has(r)||Hp(r,!1,e),Hp(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[gh]||(t[gh]=!0,Hp("selectionchange",!1,t))}}function $_(e,t,r,s){switch(C_(t)){case 1:var a=sI;break;case 4:a=aI;break;default:a=U0}r=a.bind(null,t,r,e),a=void 0,!Xg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Gp(e,t,r,s,a){var o=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var c=s.tag;if(c===3||c===4){var u=s.stateNode.containerInfo;if(u===a||u.nodeType===8&&u.parentNode===a)break;if(c===4)for(c=s.return;c!==null;){var f=c.tag;if((f===3||f===4)&&(f=c.stateNode.containerInfo,f===a||f.nodeType===8&&f.parentNode===a))return;c=c.return}for(;u!==null;){if(c=Ao(u),c===null)return;if(f=c.tag,f===5||f===6){s=o=c;continue e}u=u.parentNode}}s=s.return}u_(function(){var p=o,x=L0(r),w=[];e:{var b=z_.get(e);if(b!==void 0){var j=V0,N=e;switch(e){case"keypress":if(Vh(r)===0)break e;case"keydown":case"keyup":j=yI;break;case"focusin":N="focus",j=zp;break;case"focusout":N="blur",j=zp;break;case"beforeblur":case"afterblur":j=zp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=xw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=lI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=NI;break;case M_:case L_:case F_:j=uI;break;case B_:j=CI;break;case"scroll":j=iI;break;case"wheel":j=SI;break;case"copy":case"cut":case"paste":j=fI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=ww}var C=(t&4)!==0,T=!C&&e==="scroll",S=C?b!==null?b+"Capture":null:b;C=[];for(var E=p,_;E!==null;){_=E;var k=_.stateNode;if(_.tag===5&&k!==null&&(_=k,S!==null&&(k=Vd(E,S),k!=null&&C.push(Yd(E,k,_)))),T)break;E=E.return}0<C.length&&(b=new j(b,N,null,r,x),w.push({event:b,listeners:C}))}}if(!(t&7)){e:{if(b=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",b&&r!==Hg&&(N=r.relatedTarget||r.fromElement)&&(Ao(N)||N[Ka]))break e;if((j||b)&&(b=x.window===x?x:(b=x.ownerDocument)?b.defaultView||b.parentWindow:window,j?(N=r.relatedTarget||r.toElement,j=p,N=N?Ao(N):null,N!==null&&(T=cl(N),N!==T||N.tag!==5&&N.tag!==6)&&(N=null)):(j=null,N=p),j!==N)){if(C=xw,k="onMouseLeave",S="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(C=ww,k="onPointerLeave",S="onPointerEnter",E="pointer"),T=j==null?b:Hl(j),_=N==null?b:Hl(N),b=new C(k,E+"leave",j,r,x),b.target=T,b.relatedTarget=_,k=null,Ao(x)===p&&(C=new C(S,E+"enter",N,r,x),C.target=_,C.relatedTarget=T,k=C),T=k,j&&N)t:{for(C=j,S=N,E=0,_=C;_;_=El(_))E++;for(_=0,k=S;k;k=El(k))_++;for(;0<E-_;)C=El(C),E--;for(;0<_-E;)S=El(S),_--;for(;E--;){if(C===S||S!==null&&C===S.alternate)break t;C=El(C),S=El(S)}C=null}else C=null;j!==null&&Tw(w,b,j,C,!1),N!==null&&T!==null&&Tw(w,T,N,C,!0)}}e:{if(b=p?Hl(p):window,j=b.nodeName&&b.nodeName.toLowerCase(),j==="select"||j==="input"&&b.type==="file")var D=OI;else if(_w(b))if(I_)D=FI;else{D=MI;var L=DI}else(j=b.nodeName)&&j.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(D=LI);if(D&&(D=D(e,p))){T_(w,D,r,x);break e}L&&L(e,b,p),e==="focusout"&&(L=b._wrapperState)&&L.controlled&&b.type==="number"&&Ug(b,"number",b.value)}switch(L=p?Hl(p):window,e){case"focusin":(_w(L)||L.contentEditable==="true")&&(ql=L,Jg=p,Id=null);break;case"focusout":Id=Jg=ql=null;break;case"mousedown":ex=!0;break;case"contextmenu":case"mouseup":case"dragend":ex=!1,Sw(w,r,x);break;case"selectionchange":if(UI)break;case"keydown":case"keyup":Sw(w,r,x)}var R;if(W0)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Vl?A_(e,r)&&(M="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(M="onCompositionStart");M&&(S_&&r.locale!=="ko"&&(Vl||M!=="onCompositionStart"?M==="onCompositionEnd"&&Vl&&(R=E_()):(Ti=x,$0="value"in Ti?Ti.value:Ti.textContent,Vl=!0)),L=xf(p,M),0<L.length&&(M=new vw(M,e,null,r,x),w.push({event:M,listeners:L}),R?M.data=R:(R=k_(r),R!==null&&(M.data=R)))),(R=kI?TI(e,r):II(e,r))&&(p=xf(p,"onBeforeInput"),0<p.length&&(x=new vw("onBeforeInput","beforeinput",null,r,x),w.push({event:x,listeners:p}),x.data=R))}U_(w,t)})}function Yd(e,t,r){return{instance:e,listener:t,currentTarget:r}}function xf(e,t){for(var r=t+"Capture",s=[];e!==null;){var a=e,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=Vd(e,r),o!=null&&s.unshift(Yd(e,o,a)),o=Vd(e,t),o!=null&&s.push(Yd(e,o,a))),e=e.return}return s}function El(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Tw(e,t,r,s,a){for(var o=t._reactName,c=[];r!==null&&r!==s;){var u=r,f=u.alternate,p=u.stateNode;if(f!==null&&f===s)break;u.tag===5&&p!==null&&(u=p,a?(f=Vd(r,o),f!=null&&c.unshift(Yd(r,f,u))):a||(f=Vd(r,o),f!=null&&c.push(Yd(r,f,u)))),r=r.return}c.length!==0&&e.push({event:t,listeners:c})}var WI=/\r\n?/g,HI=/\u0000|\uFFFD/g;function Iw(e){return(typeof e=="string"?e:""+e).replace(WI,`
`).replace(HI,"")}function xh(e,t,r){if(t=Iw(t),Iw(e)!==t&&r)throw Error(Oe(425))}function vf(){}var tx=null,rx=null;function nx(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var sx=typeof setTimeout=="function"?setTimeout:void 0,GI=typeof clearTimeout=="function"?clearTimeout:void 0,Rw=typeof Promise=="function"?Promise:void 0,XI=typeof queueMicrotask=="function"?queueMicrotask:typeof Rw<"u"?function(e){return Rw.resolve(null).then(e).catch(KI)}:sx;function KI(e){setTimeout(function(){throw e})}function Xp(e,t){var r=t,s=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){e.removeChild(a),Hd(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);Hd(t)}function Mi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Pw(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Bc=Math.random().toString(36).slice(2),ba="__reactFiber$"+Bc,Qd="__reactProps$"+Bc,Ka="__reactContainer$"+Bc,ax="__reactEvents$"+Bc,YI="__reactListeners$"+Bc,QI="__reactHandles$"+Bc;function Ao(e){var t=e[ba];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ka]||r[ba]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Pw(e);e!==null;){if(r=e[ba])return r;e=Pw(e)}return t}e=r,r=e.parentNode}return null}function Su(e){return e=e[ba]||e[Ka],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Hl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Oe(33))}function om(e){return e[Qd]||null}var ix=[],Gl=-1;function no(e){return{current:e}}function dr(e){0>Gl||(e.current=ix[Gl],ix[Gl]=null,Gl--)}function nr(e,t){Gl++,ix[Gl]=e.current,e.current=t}var qi={},bn=no(qi),Hn=no(!1),qo=qi;function bc(e,t){var r=e.type.contextTypes;if(!r)return qi;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in r)a[o]=t[o];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Gn(e){return e=e.childContextTypes,e!=null}function wf(){dr(Hn),dr(bn)}function Ow(e,t,r){if(bn.current!==qi)throw Error(Oe(168));nr(bn,t),nr(Hn,r)}function V_(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(Oe(108,DT(e)||"Unknown",a));return yr({},r,s)}function yf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||qi,qo=bn.current,nr(bn,e),nr(Hn,Hn.current),!0}function Dw(e,t,r){var s=e.stateNode;if(!s)throw Error(Oe(169));r?(e=V_(e,t,qo),s.__reactInternalMemoizedMergedChildContext=e,dr(Hn),dr(bn),nr(bn,e)):dr(Hn),nr(Hn,r)}var $a=null,lm=!1,Kp=!1;function q_(e){$a===null?$a=[e]:$a.push(e)}function ZI(e){lm=!0,q_(e)}function so(){if(!Kp&&$a!==null){Kp=!0;var e=0,t=Xt;try{var r=$a;for(Xt=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}$a=null,lm=!1}catch(a){throw $a!==null&&($a=$a.slice(e+1)),p_(F0,so),a}finally{Xt=t,Kp=!1}}return null}var Xl=[],Kl=0,bf=null,_f=0,Es=[],Ss=0,Wo=null,qa=1,Wa="";function bo(e,t){Xl[Kl++]=_f,Xl[Kl++]=bf,bf=e,_f=t}function W_(e,t,r){Es[Ss++]=qa,Es[Ss++]=Wa,Es[Ss++]=Wo,Wo=e;var s=qa;e=Wa;var a=32-na(s)-1;s&=~(1<<a),r+=1;var o=32-na(t)+a;if(30<o){var c=a-a%5;o=(s&(1<<c)-1).toString(32),s>>=c,a-=c,qa=1<<32-na(t)+a|r<<a|s,Wa=o+e}else qa=1<<o|r<<a|s,Wa=e}function G0(e){e.return!==null&&(bo(e,1),W_(e,1,0))}function X0(e){for(;e===bf;)bf=Xl[--Kl],Xl[Kl]=null,_f=Xl[--Kl],Xl[Kl]=null;for(;e===Wo;)Wo=Es[--Ss],Es[Ss]=null,Wa=Es[--Ss],Es[Ss]=null,qa=Es[--Ss],Es[Ss]=null}var ds=null,is=null,mr=!1,Js=null;function H_(e,t){var r=Ts(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Mw(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ds=e,is=Mi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ds=e,is=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Wo!==null?{id:qa,overflow:Wa}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ts(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ds=e,is=null,!0):!1;default:return!1}}function ox(e){return(e.mode&1)!==0&&(e.flags&128)===0}function lx(e){if(mr){var t=is;if(t){var r=t;if(!Mw(e,t)){if(ox(e))throw Error(Oe(418));t=Mi(r.nextSibling);var s=ds;t&&Mw(e,t)?H_(s,r):(e.flags=e.flags&-4097|2,mr=!1,ds=e)}}else{if(ox(e))throw Error(Oe(418));e.flags=e.flags&-4097|2,mr=!1,ds=e}}}function Lw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ds=e}function vh(e){if(e!==ds)return!1;if(!mr)return Lw(e),mr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!nx(e.type,e.memoizedProps)),t&&(t=is)){if(ox(e))throw G_(),Error(Oe(418));for(;t;)H_(e,t),t=Mi(t.nextSibling)}if(Lw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Oe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){is=Mi(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}is=null}}else is=ds?Mi(e.stateNode.nextSibling):null;return!0}function G_(){for(var e=is;e;)e=Mi(e.nextSibling)}function _c(){is=ds=null,mr=!1}function K0(e){Js===null?Js=[e]:Js.push(e)}var JI=ri.ReactCurrentBatchConfig;function hd(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Oe(309));var s=r.stateNode}if(!s)throw Error(Oe(147,e));var a=s,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(c){var u=a.refs;c===null?delete u[o]:u[o]=c},t._stringRef=o,t)}if(typeof e!="string")throw Error(Oe(284));if(!r._owner)throw Error(Oe(290,e))}return e}function wh(e,t){throw e=Object.prototype.toString.call(t),Error(Oe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Fw(e){var t=e._init;return t(e._payload)}function X_(e){function t(S,E){if(e){var _=S.deletions;_===null?(S.deletions=[E],S.flags|=16):_.push(E)}}function r(S,E){if(!e)return null;for(;E!==null;)t(S,E),E=E.sibling;return null}function s(S,E){for(S=new Map;E!==null;)E.key!==null?S.set(E.key,E):S.set(E.index,E),E=E.sibling;return S}function a(S,E){return S=zi(S,E),S.index=0,S.sibling=null,S}function o(S,E,_){return S.index=_,e?(_=S.alternate,_!==null?(_=_.index,_<E?(S.flags|=2,E):_):(S.flags|=2,E)):(S.flags|=1048576,E)}function c(S){return e&&S.alternate===null&&(S.flags|=2),S}function u(S,E,_,k){return E===null||E.tag!==6?(E=rg(_,S.mode,k),E.return=S,E):(E=a(E,_),E.return=S,E)}function f(S,E,_,k){var D=_.type;return D===$l?x(S,E,_.props.children,k,_.key):E!==null&&(E.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===wi&&Fw(D)===E.type)?(k=a(E,_.props),k.ref=hd(S,E,_),k.return=S,k):(k=Yh(_.type,_.key,_.props,null,S.mode,k),k.ref=hd(S,E,_),k.return=S,k)}function p(S,E,_,k){return E===null||E.tag!==4||E.stateNode.containerInfo!==_.containerInfo||E.stateNode.implementation!==_.implementation?(E=ng(_,S.mode,k),E.return=S,E):(E=a(E,_.children||[]),E.return=S,E)}function x(S,E,_,k,D){return E===null||E.tag!==7?(E=Bo(_,S.mode,k,D),E.return=S,E):(E=a(E,_),E.return=S,E)}function w(S,E,_){if(typeof E=="string"&&E!==""||typeof E=="number")return E=rg(""+E,S.mode,_),E.return=S,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case lh:return _=Yh(E.type,E.key,E.props,null,S.mode,_),_.ref=hd(S,null,E),_.return=S,_;case Ul:return E=ng(E,S.mode,_),E.return=S,E;case wi:var k=E._init;return w(S,k(E._payload),_)}if(bd(E)||od(E))return E=Bo(E,S.mode,_,null),E.return=S,E;wh(S,E)}return null}function b(S,E,_,k){var D=E!==null?E.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return D!==null?null:u(S,E,""+_,k);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case lh:return _.key===D?f(S,E,_,k):null;case Ul:return _.key===D?p(S,E,_,k):null;case wi:return D=_._init,b(S,E,D(_._payload),k)}if(bd(_)||od(_))return D!==null?null:x(S,E,_,k,null);wh(S,_)}return null}function j(S,E,_,k,D){if(typeof k=="string"&&k!==""||typeof k=="number")return S=S.get(_)||null,u(E,S,""+k,D);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case lh:return S=S.get(k.key===null?_:k.key)||null,f(E,S,k,D);case Ul:return S=S.get(k.key===null?_:k.key)||null,p(E,S,k,D);case wi:var L=k._init;return j(S,E,_,L(k._payload),D)}if(bd(k)||od(k))return S=S.get(_)||null,x(E,S,k,D,null);wh(E,k)}return null}function N(S,E,_,k){for(var D=null,L=null,R=E,M=E=0,P=null;R!==null&&M<_.length;M++){R.index>M?(P=R,R=null):P=R.sibling;var F=b(S,R,_[M],k);if(F===null){R===null&&(R=P);break}e&&R&&F.alternate===null&&t(S,R),E=o(F,E,M),L===null?D=F:L.sibling=F,L=F,R=P}if(M===_.length)return r(S,R),mr&&bo(S,M),D;if(R===null){for(;M<_.length;M++)R=w(S,_[M],k),R!==null&&(E=o(R,E,M),L===null?D=R:L.sibling=R,L=R);return mr&&bo(S,M),D}for(R=s(S,R);M<_.length;M++)P=j(R,S,M,_[M],k),P!==null&&(e&&P.alternate!==null&&R.delete(P.key===null?M:P.key),E=o(P,E,M),L===null?D=P:L.sibling=P,L=P);return e&&R.forEach(function(Y){return t(S,Y)}),mr&&bo(S,M),D}function C(S,E,_,k){var D=od(_);if(typeof D!="function")throw Error(Oe(150));if(_=D.call(_),_==null)throw Error(Oe(151));for(var L=D=null,R=E,M=E=0,P=null,F=_.next();R!==null&&!F.done;M++,F=_.next()){R.index>M?(P=R,R=null):P=R.sibling;var Y=b(S,R,F.value,k);if(Y===null){R===null&&(R=P);break}e&&R&&Y.alternate===null&&t(S,R),E=o(Y,E,M),L===null?D=Y:L.sibling=Y,L=Y,R=P}if(F.done)return r(S,R),mr&&bo(S,M),D;if(R===null){for(;!F.done;M++,F=_.next())F=w(S,F.value,k),F!==null&&(E=o(F,E,M),L===null?D=F:L.sibling=F,L=F);return mr&&bo(S,M),D}for(R=s(S,R);!F.done;M++,F=_.next())F=j(R,S,M,F.value,k),F!==null&&(e&&F.alternate!==null&&R.delete(F.key===null?M:F.key),E=o(F,E,M),L===null?D=F:L.sibling=F,L=F);return e&&R.forEach(function(U){return t(S,U)}),mr&&bo(S,M),D}function T(S,E,_,k){if(typeof _=="object"&&_!==null&&_.type===$l&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case lh:e:{for(var D=_.key,L=E;L!==null;){if(L.key===D){if(D=_.type,D===$l){if(L.tag===7){r(S,L.sibling),E=a(L,_.props.children),E.return=S,S=E;break e}}else if(L.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===wi&&Fw(D)===L.type){r(S,L.sibling),E=a(L,_.props),E.ref=hd(S,L,_),E.return=S,S=E;break e}r(S,L);break}else t(S,L);L=L.sibling}_.type===$l?(E=Bo(_.props.children,S.mode,k,_.key),E.return=S,S=E):(k=Yh(_.type,_.key,_.props,null,S.mode,k),k.ref=hd(S,E,_),k.return=S,S=k)}return c(S);case Ul:e:{for(L=_.key;E!==null;){if(E.key===L)if(E.tag===4&&E.stateNode.containerInfo===_.containerInfo&&E.stateNode.implementation===_.implementation){r(S,E.sibling),E=a(E,_.children||[]),E.return=S,S=E;break e}else{r(S,E);break}else t(S,E);E=E.sibling}E=ng(_,S.mode,k),E.return=S,S=E}return c(S);case wi:return L=_._init,T(S,E,L(_._payload),k)}if(bd(_))return N(S,E,_,k);if(od(_))return C(S,E,_,k);wh(S,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,E!==null&&E.tag===6?(r(S,E.sibling),E=a(E,_),E.return=S,S=E):(r(S,E),E=rg(_,S.mode,k),E.return=S,S=E),c(S)):r(S,E)}return T}var Nc=X_(!0),K_=X_(!1),Nf=no(null),jf=null,Yl=null,Y0=null;function Q0(){Y0=Yl=jf=null}function Z0(e){var t=Nf.current;dr(Nf),e._currentValue=t}function cx(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function sc(e,t){jf=e,Y0=Yl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Wn=!0),e.firstContext=null)}function Os(e){var t=e._currentValue;if(Y0!==e)if(e={context:e,memoizedValue:t,next:null},Yl===null){if(jf===null)throw Error(Oe(308));Yl=e,jf.dependencies={lanes:0,firstContext:e}}else Yl=Yl.next=e;return t}var ko=null;function J0(e){ko===null?ko=[e]:ko.push(e)}function Y_(e,t,r,s){var a=t.interleaved;return a===null?(r.next=r,J0(t)):(r.next=a.next,a.next=r),t.interleaved=r,Ya(e,s)}function Ya(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var yi=!1;function e1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Q_(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ga(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Li(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Lt&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,Ya(e,r)}return a=s.interleaved,a===null?(t.next=t,J0(s)):(t.next=a.next,a.next=t),s.interleaved=t,Ya(e,r)}function qh(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,B0(e,r)}}function Bw(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var c={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?a=o=c:o=o.next=c,r=r.next}while(r!==null);o===null?a=o=t:o=o.next=t}else a=o=t;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Cf(e,t,r,s){var a=e.updateQueue;yi=!1;var o=a.firstBaseUpdate,c=a.lastBaseUpdate,u=a.shared.pending;if(u!==null){a.shared.pending=null;var f=u,p=f.next;f.next=null,c===null?o=p:c.next=p,c=f;var x=e.alternate;x!==null&&(x=x.updateQueue,u=x.lastBaseUpdate,u!==c&&(u===null?x.firstBaseUpdate=p:u.next=p,x.lastBaseUpdate=f))}if(o!==null){var w=a.baseState;c=0,x=p=f=null,u=o;do{var b=u.lane,j=u.eventTime;if((s&b)===b){x!==null&&(x=x.next={eventTime:j,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var N=e,C=u;switch(b=t,j=r,C.tag){case 1:if(N=C.payload,typeof N=="function"){w=N.call(j,w,b);break e}w=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=C.payload,b=typeof N=="function"?N.call(j,w,b):N,b==null)break e;w=yr({},w,b);break e;case 2:yi=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,b=a.effects,b===null?a.effects=[u]:b.push(u))}else j={eventTime:j,lane:b,tag:u.tag,payload:u.payload,callback:u.callback,next:null},x===null?(p=x=j,f=w):x=x.next=j,c|=b;if(u=u.next,u===null){if(u=a.shared.pending,u===null)break;b=u,u=b.next,b.next=null,a.lastBaseUpdate=b,a.shared.pending=null}}while(!0);if(x===null&&(f=w),a.baseState=f,a.firstBaseUpdate=p,a.lastBaseUpdate=x,t=a.shared.interleaved,t!==null){a=t;do c|=a.lane,a=a.next;while(a!==t)}else o===null&&(a.shared.lanes=0);Go|=c,e.lanes=c,e.memoizedState=w}}function zw(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(Oe(191,a));a.call(s)}}}var Au={},ka=no(Au),Zd=no(Au),Jd=no(Au);function To(e){if(e===Au)throw Error(Oe(174));return e}function t1(e,t){switch(nr(Jd,t),nr(Zd,e),nr(ka,Au),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Vg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Vg(t,e)}dr(ka),nr(ka,t)}function jc(){dr(ka),dr(Zd),dr(Jd)}function Z_(e){To(Jd.current);var t=To(ka.current),r=Vg(t,e.type);t!==r&&(nr(Zd,e),nr(ka,r))}function r1(e){Zd.current===e&&(dr(ka),dr(Zd))}var gr=no(0);function Ef(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Yp=[];function n1(){for(var e=0;e<Yp.length;e++)Yp[e]._workInProgressVersionPrimary=null;Yp.length=0}var Wh=ri.ReactCurrentDispatcher,Qp=ri.ReactCurrentBatchConfig,Ho=0,wr=null,$r=null,Qr=null,Sf=!1,Rd=!1,eu=0,eR=0;function vn(){throw Error(Oe(321))}function s1(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!aa(e[r],t[r]))return!1;return!0}function a1(e,t,r,s,a,o){if(Ho=o,wr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Wh.current=e===null||e.memoizedState===null?sR:aR,e=r(s,a),Rd){o=0;do{if(Rd=!1,eu=0,25<=o)throw Error(Oe(301));o+=1,Qr=$r=null,t.updateQueue=null,Wh.current=iR,e=r(s,a)}while(Rd)}if(Wh.current=Af,t=$r!==null&&$r.next!==null,Ho=0,Qr=$r=wr=null,Sf=!1,t)throw Error(Oe(300));return e}function i1(){var e=eu!==0;return eu=0,e}function ga(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qr===null?wr.memoizedState=Qr=e:Qr=Qr.next=e,Qr}function Ds(){if($r===null){var e=wr.alternate;e=e!==null?e.memoizedState:null}else e=$r.next;var t=Qr===null?wr.memoizedState:Qr.next;if(t!==null)Qr=t,$r=e;else{if(e===null)throw Error(Oe(310));$r=e,e={memoizedState:$r.memoizedState,baseState:$r.baseState,baseQueue:$r.baseQueue,queue:$r.queue,next:null},Qr===null?wr.memoizedState=Qr=e:Qr=Qr.next=e}return Qr}function tu(e,t){return typeof t=="function"?t(e):t}function Zp(e){var t=Ds(),r=t.queue;if(r===null)throw Error(Oe(311));r.lastRenderedReducer=e;var s=$r,a=s.baseQueue,o=r.pending;if(o!==null){if(a!==null){var c=a.next;a.next=o.next,o.next=c}s.baseQueue=a=o,r.pending=null}if(a!==null){o=a.next,s=s.baseState;var u=c=null,f=null,p=o;do{var x=p.lane;if((Ho&x)===x)f!==null&&(f=f.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),s=p.hasEagerState?p.eagerState:e(s,p.action);else{var w={lane:x,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};f===null?(u=f=w,c=s):f=f.next=w,wr.lanes|=x,Go|=x}p=p.next}while(p!==null&&p!==o);f===null?c=s:f.next=u,aa(s,t.memoizedState)||(Wn=!0),t.memoizedState=s,t.baseState=c,t.baseQueue=f,r.lastRenderedState=s}if(e=r.interleaved,e!==null){a=e;do o=a.lane,wr.lanes|=o,Go|=o,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Jp(e){var t=Ds(),r=t.queue;if(r===null)throw Error(Oe(311));r.lastRenderedReducer=e;var s=r.dispatch,a=r.pending,o=t.memoizedState;if(a!==null){r.pending=null;var c=a=a.next;do o=e(o,c.action),c=c.next;while(c!==a);aa(o,t.memoizedState)||(Wn=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,s]}function J_(){}function eN(e,t){var r=wr,s=Ds(),a=t(),o=!aa(s.memoizedState,a);if(o&&(s.memoizedState=a,Wn=!0),s=s.queue,o1(nN.bind(null,r,s,e),[e]),s.getSnapshot!==t||o||Qr!==null&&Qr.memoizedState.tag&1){if(r.flags|=2048,ru(9,rN.bind(null,r,s,a,t),void 0,null),en===null)throw Error(Oe(349));Ho&30||tN(r,t,a)}return a}function tN(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=wr.updateQueue,t===null?(t={lastEffect:null,stores:null},wr.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function rN(e,t,r,s){t.value=r,t.getSnapshot=s,sN(t)&&aN(e)}function nN(e,t,r){return r(function(){sN(t)&&aN(e)})}function sN(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!aa(e,r)}catch{return!0}}function aN(e){var t=Ya(e,1);t!==null&&sa(t,e,1,-1)}function Uw(e){var t=ga();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tu,lastRenderedState:e},t.queue=e,e=e.dispatch=nR.bind(null,wr,e),[t.memoizedState,e]}function ru(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=wr.updateQueue,t===null?(t={lastEffect:null,stores:null},wr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function iN(){return Ds().memoizedState}function Hh(e,t,r,s){var a=ga();wr.flags|=e,a.memoizedState=ru(1|t,r,void 0,s===void 0?null:s)}function cm(e,t,r,s){var a=Ds();s=s===void 0?null:s;var o=void 0;if($r!==null){var c=$r.memoizedState;if(o=c.destroy,s!==null&&s1(s,c.deps)){a.memoizedState=ru(t,r,o,s);return}}wr.flags|=e,a.memoizedState=ru(1|t,r,o,s)}function $w(e,t){return Hh(8390656,8,e,t)}function o1(e,t){return cm(2048,8,e,t)}function oN(e,t){return cm(4,2,e,t)}function lN(e,t){return cm(4,4,e,t)}function cN(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function dN(e,t,r){return r=r!=null?r.concat([e]):null,cm(4,4,cN.bind(null,t,e),r)}function l1(){}function uN(e,t){var r=Ds();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&s1(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function hN(e,t){var r=Ds();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&s1(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function fN(e,t,r){return Ho&21?(aa(r,t)||(r=v_(),wr.lanes|=r,Go|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Wn=!0),e.memoizedState=r)}function tR(e,t){var r=Xt;Xt=r!==0&&4>r?r:4,e(!0);var s=Qp.transition;Qp.transition={};try{e(!1),t()}finally{Xt=r,Qp.transition=s}}function mN(){return Ds().memoizedState}function rR(e,t,r){var s=Bi(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},pN(e))gN(t,r);else if(r=Y_(e,t,r,s),r!==null){var a=Sn();sa(r,e,s,a),xN(r,t,s)}}function nR(e,t,r){var s=Bi(e),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(pN(e))gN(t,a);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var c=t.lastRenderedState,u=o(c,r);if(a.hasEagerState=!0,a.eagerState=u,aa(u,c)){var f=t.interleaved;f===null?(a.next=a,J0(t)):(a.next=f.next,f.next=a),t.interleaved=a;return}}catch{}finally{}r=Y_(e,t,a,s),r!==null&&(a=Sn(),sa(r,e,s,a),xN(r,t,s))}}function pN(e){var t=e.alternate;return e===wr||t!==null&&t===wr}function gN(e,t){Rd=Sf=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function xN(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,B0(e,r)}}var Af={readContext:Os,useCallback:vn,useContext:vn,useEffect:vn,useImperativeHandle:vn,useInsertionEffect:vn,useLayoutEffect:vn,useMemo:vn,useReducer:vn,useRef:vn,useState:vn,useDebugValue:vn,useDeferredValue:vn,useTransition:vn,useMutableSource:vn,useSyncExternalStore:vn,useId:vn,unstable_isNewReconciler:!1},sR={readContext:Os,useCallback:function(e,t){return ga().memoizedState=[e,t===void 0?null:t],e},useContext:Os,useEffect:$w,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Hh(4194308,4,cN.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Hh(4194308,4,e,t)},useInsertionEffect:function(e,t){return Hh(4,2,e,t)},useMemo:function(e,t){var r=ga();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=ga();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=rR.bind(null,wr,e),[s.memoizedState,e]},useRef:function(e){var t=ga();return e={current:e},t.memoizedState=e},useState:Uw,useDebugValue:l1,useDeferredValue:function(e){return ga().memoizedState=e},useTransition:function(){var e=Uw(!1),t=e[0];return e=tR.bind(null,e[1]),ga().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=wr,a=ga();if(mr){if(r===void 0)throw Error(Oe(407));r=r()}else{if(r=t(),en===null)throw Error(Oe(349));Ho&30||tN(s,t,r)}a.memoizedState=r;var o={value:r,getSnapshot:t};return a.queue=o,$w(nN.bind(null,s,o,e),[e]),s.flags|=2048,ru(9,rN.bind(null,s,o,r,t),void 0,null),r},useId:function(){var e=ga(),t=en.identifierPrefix;if(mr){var r=Wa,s=qa;r=(s&~(1<<32-na(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=eu++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=eR++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},aR={readContext:Os,useCallback:uN,useContext:Os,useEffect:o1,useImperativeHandle:dN,useInsertionEffect:oN,useLayoutEffect:lN,useMemo:hN,useReducer:Zp,useRef:iN,useState:function(){return Zp(tu)},useDebugValue:l1,useDeferredValue:function(e){var t=Ds();return fN(t,$r.memoizedState,e)},useTransition:function(){var e=Zp(tu)[0],t=Ds().memoizedState;return[e,t]},useMutableSource:J_,useSyncExternalStore:eN,useId:mN,unstable_isNewReconciler:!1},iR={readContext:Os,useCallback:uN,useContext:Os,useEffect:o1,useImperativeHandle:dN,useInsertionEffect:oN,useLayoutEffect:lN,useMemo:hN,useReducer:Jp,useRef:iN,useState:function(){return Jp(tu)},useDebugValue:l1,useDeferredValue:function(e){var t=Ds();return $r===null?t.memoizedState=e:fN(t,$r.memoizedState,e)},useTransition:function(){var e=Jp(tu)[0],t=Ds().memoizedState;return[e,t]},useMutableSource:J_,useSyncExternalStore:eN,useId:mN,unstable_isNewReconciler:!1};function Gs(e,t){if(e&&e.defaultProps){t=yr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function dx(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:yr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var dm={isMounted:function(e){return(e=e._reactInternals)?cl(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=Sn(),a=Bi(e),o=Ga(s,a);o.payload=t,r!=null&&(o.callback=r),t=Li(e,o,a),t!==null&&(sa(t,e,a,s),qh(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=Sn(),a=Bi(e),o=Ga(s,a);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=Li(e,o,a),t!==null&&(sa(t,e,a,s),qh(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Sn(),s=Bi(e),a=Ga(r,s);a.tag=2,t!=null&&(a.callback=t),t=Li(e,a,s),t!==null&&(sa(t,e,s,r),qh(t,e,s))}};function Vw(e,t,r,s,a,o,c){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,o,c):t.prototype&&t.prototype.isPureReactComponent?!Xd(r,s)||!Xd(a,o):!0}function vN(e,t,r){var s=!1,a=qi,o=t.contextType;return typeof o=="object"&&o!==null?o=Os(o):(a=Gn(t)?qo:bn.current,s=t.contextTypes,o=(s=s!=null)?bc(e,a):qi),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=dm,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function qw(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&dm.enqueueReplaceState(t,t.state,null)}function ux(e,t,r,s){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},e1(e);var o=t.contextType;typeof o=="object"&&o!==null?a.context=Os(o):(o=Gn(t)?qo:bn.current,a.context=bc(e,o)),a.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(dx(e,t,o,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&dm.enqueueReplaceState(a,a.state,null),Cf(e,r,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Cc(e,t){try{var r="",s=t;do r+=OT(s),s=s.return;while(s);var a=r}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:a,digest:null}}function eg(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function hx(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var oR=typeof WeakMap=="function"?WeakMap:Map;function wN(e,t,r){r=Ga(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){Tf||(Tf=!0,_x=s),hx(e,t)},r}function yN(e,t,r){r=Ga(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;r.payload=function(){return s(a)},r.callback=function(){hx(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){hx(e,t),typeof s!="function"&&(Fi===null?Fi=new Set([this]):Fi.add(this));var c=t.stack;this.componentDidCatch(t.value,{componentStack:c!==null?c:""})}),r}function Ww(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new oR;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(r)||(a.add(r),e=bR.bind(null,e,t,r),t.then(e,e))}function Hw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Gw(e,t,r,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ga(-1,1),t.tag=2,Li(r,t,1))),r.lanes|=1),e)}var lR=ri.ReactCurrentOwner,Wn=!1;function jn(e,t,r,s){t.child=e===null?K_(t,null,r,s):Nc(t,e.child,r,s)}function Xw(e,t,r,s,a){r=r.render;var o=t.ref;return sc(t,a),s=a1(e,t,r,s,o,a),r=i1(),e!==null&&!Wn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Qa(e,t,a)):(mr&&r&&G0(t),t.flags|=1,jn(e,t,s,a),t.child)}function Kw(e,t,r,s,a){if(e===null){var o=r.type;return typeof o=="function"&&!g1(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,bN(e,t,o,s,a)):(e=Yh(r.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&a)){var c=o.memoizedProps;if(r=r.compare,r=r!==null?r:Xd,r(c,s)&&e.ref===t.ref)return Qa(e,t,a)}return t.flags|=1,e=zi(o,s),e.ref=t.ref,e.return=t,t.child=e}function bN(e,t,r,s,a){if(e!==null){var o=e.memoizedProps;if(Xd(o,s)&&e.ref===t.ref)if(Wn=!1,t.pendingProps=s=o,(e.lanes&a)!==0)e.flags&131072&&(Wn=!0);else return t.lanes=e.lanes,Qa(e,t,a)}return fx(e,t,r,s,a)}function _N(e,t,r){var s=t.pendingProps,a=s.children,o=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},nr(Zl,ns),ns|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,nr(Zl,ns),ns|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=o!==null?o.baseLanes:r,nr(Zl,ns),ns|=s}else o!==null?(s=o.baseLanes|r,t.memoizedState=null):s=r,nr(Zl,ns),ns|=s;return jn(e,t,a,r),t.child}function NN(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function fx(e,t,r,s,a){var o=Gn(r)?qo:bn.current;return o=bc(t,o),sc(t,a),r=a1(e,t,r,s,o,a),s=i1(),e!==null&&!Wn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Qa(e,t,a)):(mr&&s&&G0(t),t.flags|=1,jn(e,t,r,a),t.child)}function Yw(e,t,r,s,a){if(Gn(r)){var o=!0;yf(t)}else o=!1;if(sc(t,a),t.stateNode===null)Gh(e,t),vN(t,r,s),ux(t,r,s,a),s=!0;else if(e===null){var c=t.stateNode,u=t.memoizedProps;c.props=u;var f=c.context,p=r.contextType;typeof p=="object"&&p!==null?p=Os(p):(p=Gn(r)?qo:bn.current,p=bc(t,p));var x=r.getDerivedStateFromProps,w=typeof x=="function"||typeof c.getSnapshotBeforeUpdate=="function";w||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(u!==s||f!==p)&&qw(t,c,s,p),yi=!1;var b=t.memoizedState;c.state=b,Cf(t,s,c,a),f=t.memoizedState,u!==s||b!==f||Hn.current||yi?(typeof x=="function"&&(dx(t,r,x,s),f=t.memoizedState),(u=yi||Vw(t,r,u,s,b,f,p))?(w||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=f),c.props=s,c.state=f,c.context=p,s=u):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{c=t.stateNode,Q_(e,t),u=t.memoizedProps,p=t.type===t.elementType?u:Gs(t.type,u),c.props=p,w=t.pendingProps,b=c.context,f=r.contextType,typeof f=="object"&&f!==null?f=Os(f):(f=Gn(r)?qo:bn.current,f=bc(t,f));var j=r.getDerivedStateFromProps;(x=typeof j=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(u!==w||b!==f)&&qw(t,c,s,f),yi=!1,b=t.memoizedState,c.state=b,Cf(t,s,c,a);var N=t.memoizedState;u!==w||b!==N||Hn.current||yi?(typeof j=="function"&&(dx(t,r,j,s),N=t.memoizedState),(p=yi||Vw(t,r,p,s,b,N,f)||!1)?(x||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(s,N,f),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(s,N,f)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||u===e.memoizedProps&&b===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&b===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=N),c.props=s,c.state=N,c.context=f,s=p):(typeof c.componentDidUpdate!="function"||u===e.memoizedProps&&b===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&b===e.memoizedState||(t.flags|=1024),s=!1)}return mx(e,t,r,s,o,a)}function mx(e,t,r,s,a,o){NN(e,t);var c=(t.flags&128)!==0;if(!s&&!c)return a&&Dw(t,r,!1),Qa(e,t,o);s=t.stateNode,lR.current=t;var u=c&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&c?(t.child=Nc(t,e.child,null,o),t.child=Nc(t,null,u,o)):jn(e,t,u,o),t.memoizedState=s.state,a&&Dw(t,r,!0),t.child}function jN(e){var t=e.stateNode;t.pendingContext?Ow(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ow(e,t.context,!1),t1(e,t.containerInfo)}function Qw(e,t,r,s,a){return _c(),K0(a),t.flags|=256,jn(e,t,r,s),t.child}var px={dehydrated:null,treeContext:null,retryLane:0};function gx(e){return{baseLanes:e,cachePool:null,transitions:null}}function CN(e,t,r){var s=t.pendingProps,a=gr.current,o=!1,c=(t.flags&128)!==0,u;if((u=c)||(u=e!==null&&e.memoizedState===null?!1:(a&2)!==0),u?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),nr(gr,a&1),e===null)return lx(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(c=s.children,e=s.fallback,o?(s=t.mode,o=t.child,c={mode:"hidden",children:c},!(s&1)&&o!==null?(o.childLanes=0,o.pendingProps=c):o=fm(c,s,0,null),e=Bo(e,s,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=gx(r),t.memoizedState=px,e):c1(t,c));if(a=e.memoizedState,a!==null&&(u=a.dehydrated,u!==null))return cR(e,t,c,s,u,a,r);if(o){o=s.fallback,c=t.mode,a=e.child,u=a.sibling;var f={mode:"hidden",children:s.children};return!(c&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=f,t.deletions=null):(s=zi(a,f),s.subtreeFlags=a.subtreeFlags&14680064),u!==null?o=zi(u,o):(o=Bo(o,c,r,null),o.flags|=2),o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,c=e.child.memoizedState,c=c===null?gx(r):{baseLanes:c.baseLanes|r,cachePool:null,transitions:c.transitions},o.memoizedState=c,o.childLanes=e.childLanes&~r,t.memoizedState=px,s}return o=e.child,e=o.sibling,s=zi(o,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function c1(e,t){return t=fm({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function yh(e,t,r,s){return s!==null&&K0(s),Nc(t,e.child,null,r),e=c1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function cR(e,t,r,s,a,o,c){if(r)return t.flags&256?(t.flags&=-257,s=eg(Error(Oe(422))),yh(e,t,c,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=s.fallback,a=t.mode,s=fm({mode:"visible",children:s.children},a,0,null),o=Bo(o,a,c,null),o.flags|=2,s.return=t,o.return=t,s.sibling=o,t.child=s,t.mode&1&&Nc(t,e.child,null,c),t.child.memoizedState=gx(c),t.memoizedState=px,o);if(!(t.mode&1))return yh(e,t,c,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var u=s.dgst;return s=u,o=Error(Oe(419)),s=eg(o,s,void 0),yh(e,t,c,s)}if(u=(c&e.childLanes)!==0,Wn||u){if(s=en,s!==null){switch(c&-c){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|c)?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,Ya(e,a),sa(s,e,a,-1))}return p1(),s=eg(Error(Oe(421))),yh(e,t,c,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=_R.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,is=Mi(a.nextSibling),ds=t,mr=!0,Js=null,e!==null&&(Es[Ss++]=qa,Es[Ss++]=Wa,Es[Ss++]=Wo,qa=e.id,Wa=e.overflow,Wo=t),t=c1(t,s.children),t.flags|=4096,t)}function Zw(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),cx(e.return,t,r)}function tg(e,t,r,s,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=r,o.tailMode=a)}function EN(e,t,r){var s=t.pendingProps,a=s.revealOrder,o=s.tail;if(jn(e,t,s.children,r),s=gr.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Zw(e,r,t);else if(e.tag===19)Zw(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(nr(gr,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Ef(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),tg(t,!1,a,r,o);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ef(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}tg(t,!0,r,null,o);break;case"together":tg(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gh(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qa(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Go|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Oe(153));if(t.child!==null){for(e=t.child,r=zi(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=zi(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function dR(e,t,r){switch(t.tag){case 3:jN(t),_c();break;case 5:Z_(t);break;case 1:Gn(t.type)&&yf(t);break;case 4:t1(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;nr(Nf,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(nr(gr,gr.current&1),t.flags|=128,null):r&t.child.childLanes?CN(e,t,r):(nr(gr,gr.current&1),e=Qa(e,t,r),e!==null?e.sibling:null);nr(gr,gr.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return EN(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),nr(gr,gr.current),s)break;return null;case 22:case 23:return t.lanes=0,_N(e,t,r)}return Qa(e,t,r)}var SN,xx,AN,kN;SN=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};xx=function(){};AN=function(e,t,r,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,To(ka.current);var o=null;switch(r){case"input":a=Bg(e,a),s=Bg(e,s),o=[];break;case"select":a=yr({},a,{value:void 0}),s=yr({},s,{value:void 0}),o=[];break;case"textarea":a=$g(e,a),s=$g(e,s),o=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=vf)}qg(r,s);var c;r=null;for(p in a)if(!s.hasOwnProperty(p)&&a.hasOwnProperty(p)&&a[p]!=null)if(p==="style"){var u=a[p];for(c in u)u.hasOwnProperty(c)&&(r||(r={}),r[c]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Ud.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in s){var f=s[p];if(u=a!=null?a[p]:void 0,s.hasOwnProperty(p)&&f!==u&&(f!=null||u!=null))if(p==="style")if(u){for(c in u)!u.hasOwnProperty(c)||f&&f.hasOwnProperty(c)||(r||(r={}),r[c]="");for(c in f)f.hasOwnProperty(c)&&u[c]!==f[c]&&(r||(r={}),r[c]=f[c])}else r||(o||(o=[]),o.push(p,r)),r=f;else p==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,u=u?u.__html:void 0,f!=null&&u!==f&&(o=o||[]).push(p,f)):p==="children"?typeof f!="string"&&typeof f!="number"||(o=o||[]).push(p,""+f):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Ud.hasOwnProperty(p)?(f!=null&&p==="onScroll"&&lr("scroll",e),o||u===f||(o=[])):(o=o||[]).push(p,f))}r&&(o=o||[]).push("style",r);var p=o;(t.updateQueue=p)&&(t.flags|=4)}};kN=function(e,t,r,s){r!==s&&(t.flags|=4)};function fd(e,t){if(!mr)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function wn(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function uR(e,t,r){var s=t.pendingProps;switch(X0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wn(t),null;case 1:return Gn(t.type)&&wf(),wn(t),null;case 3:return s=t.stateNode,jc(),dr(Hn),dr(bn),n1(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(vh(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Js!==null&&(Cx(Js),Js=null))),xx(e,t),wn(t),null;case 5:r1(t);var a=To(Jd.current);if(r=t.type,e!==null&&t.stateNode!=null)AN(e,t,r,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(Oe(166));return wn(t),null}if(e=To(ka.current),vh(t)){s=t.stateNode,r=t.type;var o=t.memoizedProps;switch(s[ba]=t,s[Qd]=o,e=(t.mode&1)!==0,r){case"dialog":lr("cancel",s),lr("close",s);break;case"iframe":case"object":case"embed":lr("load",s);break;case"video":case"audio":for(a=0;a<Nd.length;a++)lr(Nd[a],s);break;case"source":lr("error",s);break;case"img":case"image":case"link":lr("error",s),lr("load",s);break;case"details":lr("toggle",s);break;case"input":ow(s,o),lr("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!o.multiple},lr("invalid",s);break;case"textarea":cw(s,o),lr("invalid",s)}qg(r,o),a=null;for(var c in o)if(o.hasOwnProperty(c)){var u=o[c];c==="children"?typeof u=="string"?s.textContent!==u&&(o.suppressHydrationWarning!==!0&&xh(s.textContent,u,e),a=["children",u]):typeof u=="number"&&s.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&xh(s.textContent,u,e),a=["children",""+u]):Ud.hasOwnProperty(c)&&u!=null&&c==="onScroll"&&lr("scroll",s)}switch(r){case"input":ch(s),lw(s,o,!0);break;case"textarea":ch(s),dw(s);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(s.onclick=vf)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{c=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=n_(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=c.createElement(r,{is:s.is}):(e=c.createElement(r),r==="select"&&(c=e,s.multiple?c.multiple=!0:s.size&&(c.size=s.size))):e=c.createElementNS(e,r),e[ba]=t,e[Qd]=s,SN(e,t,!1,!1),t.stateNode=e;e:{switch(c=Wg(r,s),r){case"dialog":lr("cancel",e),lr("close",e),a=s;break;case"iframe":case"object":case"embed":lr("load",e),a=s;break;case"video":case"audio":for(a=0;a<Nd.length;a++)lr(Nd[a],e);a=s;break;case"source":lr("error",e),a=s;break;case"img":case"image":case"link":lr("error",e),lr("load",e),a=s;break;case"details":lr("toggle",e),a=s;break;case"input":ow(e,s),a=Bg(e,s),lr("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=yr({},s,{value:void 0}),lr("invalid",e);break;case"textarea":cw(e,s),a=$g(e,s),lr("invalid",e);break;default:a=s}qg(r,a),u=a;for(o in u)if(u.hasOwnProperty(o)){var f=u[o];o==="style"?i_(e,f):o==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&s_(e,f)):o==="children"?typeof f=="string"?(r!=="textarea"||f!=="")&&$d(e,f):typeof f=="number"&&$d(e,""+f):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ud.hasOwnProperty(o)?f!=null&&o==="onScroll"&&lr("scroll",e):f!=null&&P0(e,o,f,c))}switch(r){case"input":ch(e),lw(e,s,!1);break;case"textarea":ch(e),dw(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Vi(s.value));break;case"select":e.multiple=!!s.multiple,o=s.value,o!=null?ec(e,!!s.multiple,o,!1):s.defaultValue!=null&&ec(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=vf)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return wn(t),null;case 6:if(e&&t.stateNode!=null)kN(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(Oe(166));if(r=To(Jd.current),To(ka.current),vh(t)){if(s=t.stateNode,r=t.memoizedProps,s[ba]=t,(o=s.nodeValue!==r)&&(e=ds,e!==null))switch(e.tag){case 3:xh(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&xh(s.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[ba]=t,t.stateNode=s}return wn(t),null;case 13:if(dr(gr),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(mr&&is!==null&&t.mode&1&&!(t.flags&128))G_(),_c(),t.flags|=98560,o=!1;else if(o=vh(t),s!==null&&s.dehydrated!==null){if(e===null){if(!o)throw Error(Oe(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Oe(317));o[ba]=t}else _c(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;wn(t),o=!1}else Js!==null&&(Cx(Js),Js=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||gr.current&1?qr===0&&(qr=3):p1())),t.updateQueue!==null&&(t.flags|=4),wn(t),null);case 4:return jc(),xx(e,t),e===null&&Kd(t.stateNode.containerInfo),wn(t),null;case 10:return Z0(t.type._context),wn(t),null;case 17:return Gn(t.type)&&wf(),wn(t),null;case 19:if(dr(gr),o=t.memoizedState,o===null)return wn(t),null;if(s=(t.flags&128)!==0,c=o.rendering,c===null)if(s)fd(o,!1);else{if(qr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(c=Ef(e),c!==null){for(t.flags|=128,fd(o,!1),s=c.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)o=r,e=s,o.flags&=14680066,c=o.alternate,c===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,e=c.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return nr(gr,gr.current&1|2),t.child}e=e.sibling}o.tail!==null&&kr()>Ec&&(t.flags|=128,s=!0,fd(o,!1),t.lanes=4194304)}else{if(!s)if(e=Ef(c),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),fd(o,!0),o.tail===null&&o.tailMode==="hidden"&&!c.alternate&&!mr)return wn(t),null}else 2*kr()-o.renderingStartTime>Ec&&r!==1073741824&&(t.flags|=128,s=!0,fd(o,!1),t.lanes=4194304);o.isBackwards?(c.sibling=t.child,t.child=c):(r=o.last,r!==null?r.sibling=c:t.child=c,o.last=c)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=kr(),t.sibling=null,r=gr.current,nr(gr,s?r&1|2:r&1),t):(wn(t),null);case 22:case 23:return m1(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?ns&1073741824&&(wn(t),t.subtreeFlags&6&&(t.flags|=8192)):wn(t),null;case 24:return null;case 25:return null}throw Error(Oe(156,t.tag))}function hR(e,t){switch(X0(t),t.tag){case 1:return Gn(t.type)&&wf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return jc(),dr(Hn),dr(bn),n1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return r1(t),null;case 13:if(dr(gr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Oe(340));_c()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return dr(gr),null;case 4:return jc(),null;case 10:return Z0(t.type._context),null;case 22:case 23:return m1(),null;case 24:return null;default:return null}}var bh=!1,yn=!1,fR=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function Ql(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Cr(e,t,s)}else r.current=null}function vx(e,t,r){try{r()}catch(s){Cr(e,t,s)}}var Jw=!1;function mR(e,t){if(tx=pf,e=O_(),H0(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var c=0,u=-1,f=-1,p=0,x=0,w=e,b=null;t:for(;;){for(var j;w!==r||a!==0&&w.nodeType!==3||(u=c+a),w!==o||s!==0&&w.nodeType!==3||(f=c+s),w.nodeType===3&&(c+=w.nodeValue.length),(j=w.firstChild)!==null;)b=w,w=j;for(;;){if(w===e)break t;if(b===r&&++p===a&&(u=c),b===o&&++x===s&&(f=c),(j=w.nextSibling)!==null)break;w=b,b=w.parentNode}w=j}r=u===-1||f===-1?null:{start:u,end:f}}else r=null}r=r||{start:0,end:0}}else r=null;for(rx={focusedElem:e,selectionRange:r},pf=!1,Qe=t;Qe!==null;)if(t=Qe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Qe=e;else for(;Qe!==null;){t=Qe;try{var N=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var C=N.memoizedProps,T=N.memoizedState,S=t.stateNode,E=S.getSnapshotBeforeUpdate(t.elementType===t.type?C:Gs(t.type,C),T);S.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Oe(163))}}catch(k){Cr(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,Qe=e;break}Qe=t.return}return N=Jw,Jw=!1,N}function Pd(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,o!==void 0&&vx(t,r,o)}a=a.next}while(a!==s)}}function um(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function wx(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function TN(e){var t=e.alternate;t!==null&&(e.alternate=null,TN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ba],delete t[Qd],delete t[ax],delete t[YI],delete t[QI])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function IN(e){return e.tag===5||e.tag===3||e.tag===4}function ey(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||IN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function yx(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=vf));else if(s!==4&&(e=e.child,e!==null))for(yx(e,t,r),e=e.sibling;e!==null;)yx(e,t,r),e=e.sibling}function bx(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(bx(e,t,r),e=e.sibling;e!==null;)bx(e,t,r),e=e.sibling}var an=null,Qs=!1;function di(e,t,r){for(r=r.child;r!==null;)RN(e,t,r),r=r.sibling}function RN(e,t,r){if(Aa&&typeof Aa.onCommitFiberUnmount=="function")try{Aa.onCommitFiberUnmount(nm,r)}catch{}switch(r.tag){case 5:yn||Ql(r,t);case 6:var s=an,a=Qs;an=null,di(e,t,r),an=s,Qs=a,an!==null&&(Qs?(e=an,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):an.removeChild(r.stateNode));break;case 18:an!==null&&(Qs?(e=an,r=r.stateNode,e.nodeType===8?Xp(e.parentNode,r):e.nodeType===1&&Xp(e,r),Hd(e)):Xp(an,r.stateNode));break;case 4:s=an,a=Qs,an=r.stateNode.containerInfo,Qs=!0,di(e,t,r),an=s,Qs=a;break;case 0:case 11:case 14:case 15:if(!yn&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var o=a,c=o.destroy;o=o.tag,c!==void 0&&(o&2||o&4)&&vx(r,t,c),a=a.next}while(a!==s)}di(e,t,r);break;case 1:if(!yn&&(Ql(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(u){Cr(r,t,u)}di(e,t,r);break;case 21:di(e,t,r);break;case 22:r.mode&1?(yn=(s=yn)||r.memoizedState!==null,di(e,t,r),yn=s):di(e,t,r);break;default:di(e,t,r)}}function ty(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new fR),t.forEach(function(s){var a=NR.bind(null,e,s);r.has(s)||(r.add(s),s.then(a,a))})}}function Vs(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var o=e,c=t,u=c;e:for(;u!==null;){switch(u.tag){case 5:an=u.stateNode,Qs=!1;break e;case 3:an=u.stateNode.containerInfo,Qs=!0;break e;case 4:an=u.stateNode.containerInfo,Qs=!0;break e}u=u.return}if(an===null)throw Error(Oe(160));RN(o,c,a),an=null,Qs=!1;var f=a.alternate;f!==null&&(f.return=null),a.return=null}catch(p){Cr(a,t,p)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)PN(t,e),t=t.sibling}function PN(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Vs(t,e),pa(e),s&4){try{Pd(3,e,e.return),um(3,e)}catch(C){Cr(e,e.return,C)}try{Pd(5,e,e.return)}catch(C){Cr(e,e.return,C)}}break;case 1:Vs(t,e),pa(e),s&512&&r!==null&&Ql(r,r.return);break;case 5:if(Vs(t,e),pa(e),s&512&&r!==null&&Ql(r,r.return),e.flags&32){var a=e.stateNode;try{$d(a,"")}catch(C){Cr(e,e.return,C)}}if(s&4&&(a=e.stateNode,a!=null)){var o=e.memoizedProps,c=r!==null?r.memoizedProps:o,u=e.type,f=e.updateQueue;if(e.updateQueue=null,f!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&t_(a,o),Wg(u,c);var p=Wg(u,o);for(c=0;c<f.length;c+=2){var x=f[c],w=f[c+1];x==="style"?i_(a,w):x==="dangerouslySetInnerHTML"?s_(a,w):x==="children"?$d(a,w):P0(a,x,w,p)}switch(u){case"input":zg(a,o);break;case"textarea":r_(a,o);break;case"select":var b=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var j=o.value;j!=null?ec(a,!!o.multiple,j,!1):b!==!!o.multiple&&(o.defaultValue!=null?ec(a,!!o.multiple,o.defaultValue,!0):ec(a,!!o.multiple,o.multiple?[]:"",!1))}a[Qd]=o}catch(C){Cr(e,e.return,C)}}break;case 6:if(Vs(t,e),pa(e),s&4){if(e.stateNode===null)throw Error(Oe(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(C){Cr(e,e.return,C)}}break;case 3:if(Vs(t,e),pa(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Hd(t.containerInfo)}catch(C){Cr(e,e.return,C)}break;case 4:Vs(t,e),pa(e);break;case 13:Vs(t,e),pa(e),a=e.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||(h1=kr())),s&4&&ty(e);break;case 22:if(x=r!==null&&r.memoizedState!==null,e.mode&1?(yn=(p=yn)||x,Vs(t,e),yn=p):Vs(t,e),pa(e),s&8192){if(p=e.memoizedState!==null,(e.stateNode.isHidden=p)&&!x&&e.mode&1)for(Qe=e,x=e.child;x!==null;){for(w=Qe=x;Qe!==null;){switch(b=Qe,j=b.child,b.tag){case 0:case 11:case 14:case 15:Pd(4,b,b.return);break;case 1:Ql(b,b.return);var N=b.stateNode;if(typeof N.componentWillUnmount=="function"){s=b,r=b.return;try{t=s,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch(C){Cr(s,r,C)}}break;case 5:Ql(b,b.return);break;case 22:if(b.memoizedState!==null){ny(w);continue}}j!==null?(j.return=b,Qe=j):ny(w)}x=x.sibling}e:for(x=null,w=e;;){if(w.tag===5){if(x===null){x=w;try{a=w.stateNode,p?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=w.stateNode,f=w.memoizedProps.style,c=f!=null&&f.hasOwnProperty("display")?f.display:null,u.style.display=a_("display",c))}catch(C){Cr(e,e.return,C)}}}else if(w.tag===6){if(x===null)try{w.stateNode.nodeValue=p?"":w.memoizedProps}catch(C){Cr(e,e.return,C)}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===e)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===e)break e;for(;w.sibling===null;){if(w.return===null||w.return===e)break e;x===w&&(x=null),w=w.return}x===w&&(x=null),w.sibling.return=w.return,w=w.sibling}}break;case 19:Vs(t,e),pa(e),s&4&&ty(e);break;case 21:break;default:Vs(t,e),pa(e)}}function pa(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(IN(r)){var s=r;break e}r=r.return}throw Error(Oe(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&($d(a,""),s.flags&=-33);var o=ey(e);bx(e,o,a);break;case 3:case 4:var c=s.stateNode.containerInfo,u=ey(e);yx(e,u,c);break;default:throw Error(Oe(161))}}catch(f){Cr(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function pR(e,t,r){Qe=e,ON(e)}function ON(e,t,r){for(var s=(e.mode&1)!==0;Qe!==null;){var a=Qe,o=a.child;if(a.tag===22&&s){var c=a.memoizedState!==null||bh;if(!c){var u=a.alternate,f=u!==null&&u.memoizedState!==null||yn;u=bh;var p=yn;if(bh=c,(yn=f)&&!p)for(Qe=a;Qe!==null;)c=Qe,f=c.child,c.tag===22&&c.memoizedState!==null?sy(a):f!==null?(f.return=c,Qe=f):sy(a);for(;o!==null;)Qe=o,ON(o),o=o.sibling;Qe=a,bh=u,yn=p}ry(e)}else a.subtreeFlags&8772&&o!==null?(o.return=a,Qe=o):ry(e)}}function ry(e){for(;Qe!==null;){var t=Qe;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:yn||um(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!yn)if(r===null)s.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Gs(t.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&zw(t,o,s);break;case 3:var c=t.updateQueue;if(c!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}zw(t,c,r)}break;case 5:var u=t.stateNode;if(r===null&&t.flags&4){r=u;var f=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&r.focus();break;case"img":f.src&&(r.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var p=t.alternate;if(p!==null){var x=p.memoizedState;if(x!==null){var w=x.dehydrated;w!==null&&Hd(w)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Oe(163))}yn||t.flags&512&&wx(t)}catch(b){Cr(t,t.return,b)}}if(t===e){Qe=null;break}if(r=t.sibling,r!==null){r.return=t.return,Qe=r;break}Qe=t.return}}function ny(e){for(;Qe!==null;){var t=Qe;if(t===e){Qe=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Qe=r;break}Qe=t.return}}function sy(e){for(;Qe!==null;){var t=Qe;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{um(4,t)}catch(f){Cr(t,r,f)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(f){Cr(t,a,f)}}var o=t.return;try{wx(t)}catch(f){Cr(t,o,f)}break;case 5:var c=t.return;try{wx(t)}catch(f){Cr(t,c,f)}}}catch(f){Cr(t,t.return,f)}if(t===e){Qe=null;break}var u=t.sibling;if(u!==null){u.return=t.return,Qe=u;break}Qe=t.return}}var gR=Math.ceil,kf=ri.ReactCurrentDispatcher,d1=ri.ReactCurrentOwner,Rs=ri.ReactCurrentBatchConfig,Lt=0,en=null,Dr=null,un=0,ns=0,Zl=no(0),qr=0,nu=null,Go=0,hm=0,u1=0,Od=null,$n=null,h1=0,Ec=1/0,za=null,Tf=!1,_x=null,Fi=null,_h=!1,Ii=null,If=0,Dd=0,Nx=null,Xh=-1,Kh=0;function Sn(){return Lt&6?kr():Xh!==-1?Xh:Xh=kr()}function Bi(e){return e.mode&1?Lt&2&&un!==0?un&-un:JI.transition!==null?(Kh===0&&(Kh=v_()),Kh):(e=Xt,e!==0||(e=window.event,e=e===void 0?16:C_(e.type)),e):1}function sa(e,t,r,s){if(50<Dd)throw Dd=0,Nx=null,Error(Oe(185));Cu(e,r,s),(!(Lt&2)||e!==en)&&(e===en&&(!(Lt&2)&&(hm|=r),qr===4&&_i(e,un)),Xn(e,s),r===1&&Lt===0&&!(t.mode&1)&&(Ec=kr()+500,lm&&so()))}function Xn(e,t){var r=e.callbackNode;JT(e,t);var s=mf(e,e===en?un:0);if(s===0)r!==null&&fw(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&fw(r),t===1)e.tag===0?ZI(ay.bind(null,e)):q_(ay.bind(null,e)),XI(function(){!(Lt&6)&&so()}),r=null;else{switch(w_(s)){case 1:r=F0;break;case 4:r=g_;break;case 16:r=ff;break;case 536870912:r=x_;break;default:r=ff}r=$N(r,DN.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function DN(e,t){if(Xh=-1,Kh=0,Lt&6)throw Error(Oe(327));var r=e.callbackNode;if(ac()&&e.callbackNode!==r)return null;var s=mf(e,e===en?un:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Rf(e,s);else{t=s;var a=Lt;Lt|=2;var o=LN();(en!==e||un!==t)&&(za=null,Ec=kr()+500,Fo(e,t));do try{wR();break}catch(u){MN(e,u)}while(!0);Q0(),kf.current=o,Lt=a,Dr!==null?t=0:(en=null,un=0,t=qr)}if(t!==0){if(t===2&&(a=Yg(e),a!==0&&(s=a,t=jx(e,a))),t===1)throw r=nu,Fo(e,0),_i(e,s),Xn(e,kr()),r;if(t===6)_i(e,s);else{if(a=e.current.alternate,!(s&30)&&!xR(a)&&(t=Rf(e,s),t===2&&(o=Yg(e),o!==0&&(s=o,t=jx(e,o))),t===1))throw r=nu,Fo(e,0),_i(e,s),Xn(e,kr()),r;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(Oe(345));case 2:_o(e,$n,za);break;case 3:if(_i(e,s),(s&130023424)===s&&(t=h1+500-kr(),10<t)){if(mf(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){Sn(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=sx(_o.bind(null,e,$n,za),t);break}_o(e,$n,za);break;case 4:if(_i(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var c=31-na(s);o=1<<c,c=t[c],c>a&&(a=c),s&=~o}if(s=a,s=kr()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*gR(s/1960))-s,10<s){e.timeoutHandle=sx(_o.bind(null,e,$n,za),s);break}_o(e,$n,za);break;case 5:_o(e,$n,za);break;default:throw Error(Oe(329))}}}return Xn(e,kr()),e.callbackNode===r?DN.bind(null,e):null}function jx(e,t){var r=Od;return e.current.memoizedState.isDehydrated&&(Fo(e,t).flags|=256),e=Rf(e,t),e!==2&&(t=$n,$n=r,t!==null&&Cx(t)),e}function Cx(e){$n===null?$n=e:$n.push.apply($n,e)}function xR(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],o=a.getSnapshot;a=a.value;try{if(!aa(o(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _i(e,t){for(t&=~u1,t&=~hm,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-na(t),s=1<<r;e[r]=-1,t&=~s}}function ay(e){if(Lt&6)throw Error(Oe(327));ac();var t=mf(e,0);if(!(t&1))return Xn(e,kr()),null;var r=Rf(e,t);if(e.tag!==0&&r===2){var s=Yg(e);s!==0&&(t=s,r=jx(e,s))}if(r===1)throw r=nu,Fo(e,0),_i(e,t),Xn(e,kr()),r;if(r===6)throw Error(Oe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_o(e,$n,za),Xn(e,kr()),null}function f1(e,t){var r=Lt;Lt|=1;try{return e(t)}finally{Lt=r,Lt===0&&(Ec=kr()+500,lm&&so())}}function Xo(e){Ii!==null&&Ii.tag===0&&!(Lt&6)&&ac();var t=Lt;Lt|=1;var r=Rs.transition,s=Xt;try{if(Rs.transition=null,Xt=1,e)return e()}finally{Xt=s,Rs.transition=r,Lt=t,!(Lt&6)&&so()}}function m1(){ns=Zl.current,dr(Zl)}function Fo(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,GI(r)),Dr!==null)for(r=Dr.return;r!==null;){var s=r;switch(X0(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&wf();break;case 3:jc(),dr(Hn),dr(bn),n1();break;case 5:r1(s);break;case 4:jc();break;case 13:dr(gr);break;case 19:dr(gr);break;case 10:Z0(s.type._context);break;case 22:case 23:m1()}r=r.return}if(en=e,Dr=e=zi(e.current,null),un=ns=t,qr=0,nu=null,u1=hm=Go=0,$n=Od=null,ko!==null){for(t=0;t<ko.length;t++)if(r=ko[t],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,o=r.pending;if(o!==null){var c=o.next;o.next=a,s.next=c}r.pending=s}ko=null}return e}function MN(e,t){do{var r=Dr;try{if(Q0(),Wh.current=Af,Sf){for(var s=wr.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Sf=!1}if(Ho=0,Qr=$r=wr=null,Rd=!1,eu=0,d1.current=null,r===null||r.return===null){qr=1,nu=t,Dr=null;break}e:{var o=e,c=r.return,u=r,f=t;if(t=un,u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var p=f,x=u,w=x.tag;if(!(x.mode&1)&&(w===0||w===11||w===15)){var b=x.alternate;b?(x.updateQueue=b.updateQueue,x.memoizedState=b.memoizedState,x.lanes=b.lanes):(x.updateQueue=null,x.memoizedState=null)}var j=Hw(c);if(j!==null){j.flags&=-257,Gw(j,c,u,o,t),j.mode&1&&Ww(o,p,t),t=j,f=p;var N=t.updateQueue;if(N===null){var C=new Set;C.add(f),t.updateQueue=C}else N.add(f);break e}else{if(!(t&1)){Ww(o,p,t),p1();break e}f=Error(Oe(426))}}else if(mr&&u.mode&1){var T=Hw(c);if(T!==null){!(T.flags&65536)&&(T.flags|=256),Gw(T,c,u,o,t),K0(Cc(f,u));break e}}o=f=Cc(f,u),qr!==4&&(qr=2),Od===null?Od=[o]:Od.push(o),o=c;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var S=wN(o,f,t);Bw(o,S);break e;case 1:u=f;var E=o.type,_=o.stateNode;if(!(o.flags&128)&&(typeof E.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Fi===null||!Fi.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t;var k=yN(o,u,t);Bw(o,k);break e}}o=o.return}while(o!==null)}BN(r)}catch(D){t=D,Dr===r&&r!==null&&(Dr=r=r.return);continue}break}while(!0)}function LN(){var e=kf.current;return kf.current=Af,e===null?Af:e}function p1(){(qr===0||qr===3||qr===2)&&(qr=4),en===null||!(Go&268435455)&&!(hm&268435455)||_i(en,un)}function Rf(e,t){var r=Lt;Lt|=2;var s=LN();(en!==e||un!==t)&&(za=null,Fo(e,t));do try{vR();break}catch(a){MN(e,a)}while(!0);if(Q0(),Lt=r,kf.current=s,Dr!==null)throw Error(Oe(261));return en=null,un=0,qr}function vR(){for(;Dr!==null;)FN(Dr)}function wR(){for(;Dr!==null&&!qT();)FN(Dr)}function FN(e){var t=UN(e.alternate,e,ns);e.memoizedProps=e.pendingProps,t===null?BN(e):Dr=t,d1.current=null}function BN(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=hR(r,t),r!==null){r.flags&=32767,Dr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qr=6,Dr=null;return}}else if(r=uR(r,t,ns),r!==null){Dr=r;return}if(t=t.sibling,t!==null){Dr=t;return}Dr=t=e}while(t!==null);qr===0&&(qr=5)}function _o(e,t,r){var s=Xt,a=Rs.transition;try{Rs.transition=null,Xt=1,yR(e,t,r,s)}finally{Rs.transition=a,Xt=s}return null}function yR(e,t,r,s){do ac();while(Ii!==null);if(Lt&6)throw Error(Oe(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Oe(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(eI(e,o),e===en&&(Dr=en=null,un=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||_h||(_h=!0,$N(ff,function(){return ac(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Rs.transition,Rs.transition=null;var c=Xt;Xt=1;var u=Lt;Lt|=4,d1.current=null,mR(e,r),PN(r,e),zI(rx),pf=!!tx,rx=tx=null,e.current=r,pR(r),WT(),Lt=u,Xt=c,Rs.transition=o}else e.current=r;if(_h&&(_h=!1,Ii=e,If=a),o=e.pendingLanes,o===0&&(Fi=null),XT(r.stateNode),Xn(e,kr()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(Tf)throw Tf=!1,e=_x,_x=null,e;return If&1&&e.tag!==0&&ac(),o=e.pendingLanes,o&1?e===Nx?Dd++:(Dd=0,Nx=e):Dd=0,so(),null}function ac(){if(Ii!==null){var e=w_(If),t=Rs.transition,r=Xt;try{if(Rs.transition=null,Xt=16>e?16:e,Ii===null)var s=!1;else{if(e=Ii,Ii=null,If=0,Lt&6)throw Error(Oe(331));var a=Lt;for(Lt|=4,Qe=e.current;Qe!==null;){var o=Qe,c=o.child;if(Qe.flags&16){var u=o.deletions;if(u!==null){for(var f=0;f<u.length;f++){var p=u[f];for(Qe=p;Qe!==null;){var x=Qe;switch(x.tag){case 0:case 11:case 15:Pd(8,x,o)}var w=x.child;if(w!==null)w.return=x,Qe=w;else for(;Qe!==null;){x=Qe;var b=x.sibling,j=x.return;if(TN(x),x===p){Qe=null;break}if(b!==null){b.return=j,Qe=b;break}Qe=j}}}var N=o.alternate;if(N!==null){var C=N.child;if(C!==null){N.child=null;do{var T=C.sibling;C.sibling=null,C=T}while(C!==null)}}Qe=o}}if(o.subtreeFlags&2064&&c!==null)c.return=o,Qe=c;else e:for(;Qe!==null;){if(o=Qe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Pd(9,o,o.return)}var S=o.sibling;if(S!==null){S.return=o.return,Qe=S;break e}Qe=o.return}}var E=e.current;for(Qe=E;Qe!==null;){c=Qe;var _=c.child;if(c.subtreeFlags&2064&&_!==null)_.return=c,Qe=_;else e:for(c=E;Qe!==null;){if(u=Qe,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:um(9,u)}}catch(D){Cr(u,u.return,D)}if(u===c){Qe=null;break e}var k=u.sibling;if(k!==null){k.return=u.return,Qe=k;break e}Qe=u.return}}if(Lt=a,so(),Aa&&typeof Aa.onPostCommitFiberRoot=="function")try{Aa.onPostCommitFiberRoot(nm,e)}catch{}s=!0}return s}finally{Xt=r,Rs.transition=t}}return!1}function iy(e,t,r){t=Cc(r,t),t=wN(e,t,1),e=Li(e,t,1),t=Sn(),e!==null&&(Cu(e,1,t),Xn(e,t))}function Cr(e,t,r){if(e.tag===3)iy(e,e,r);else for(;t!==null;){if(t.tag===3){iy(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Fi===null||!Fi.has(s))){e=Cc(r,e),e=yN(t,e,1),t=Li(t,e,1),e=Sn(),t!==null&&(Cu(t,1,e),Xn(t,e));break}}t=t.return}}function bR(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=Sn(),e.pingedLanes|=e.suspendedLanes&r,en===e&&(un&r)===r&&(qr===4||qr===3&&(un&130023424)===un&&500>kr()-h1?Fo(e,0):u1|=r),Xn(e,t)}function zN(e,t){t===0&&(e.mode&1?(t=hh,hh<<=1,!(hh&130023424)&&(hh=4194304)):t=1);var r=Sn();e=Ya(e,t),e!==null&&(Cu(e,t,r),Xn(e,r))}function _R(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),zN(e,r)}function NR(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(Oe(314))}s!==null&&s.delete(t),zN(e,r)}var UN;UN=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Hn.current)Wn=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Wn=!1,dR(e,t,r);Wn=!!(e.flags&131072)}else Wn=!1,mr&&t.flags&1048576&&W_(t,_f,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Gh(e,t),e=t.pendingProps;var a=bc(t,bn.current);sc(t,r),a=a1(null,t,s,e,a,r);var o=i1();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Gn(s)?(o=!0,yf(t)):o=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,e1(t),a.updater=dm,t.stateNode=a,a._reactInternals=t,ux(t,s,e,r),t=mx(null,t,s,!0,o,r)):(t.tag=0,mr&&o&&G0(t),jn(null,t,a,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Gh(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=CR(s),e=Gs(s,e),a){case 0:t=fx(null,t,s,e,r);break e;case 1:t=Yw(null,t,s,e,r);break e;case 11:t=Xw(null,t,s,e,r);break e;case 14:t=Kw(null,t,s,Gs(s.type,e),r);break e}throw Error(Oe(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Gs(s,a),fx(e,t,s,a,r);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Gs(s,a),Yw(e,t,s,a,r);case 3:e:{if(jN(t),e===null)throw Error(Oe(387));s=t.pendingProps,o=t.memoizedState,a=o.element,Q_(e,t),Cf(t,s,null,r);var c=t.memoizedState;if(s=c.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){a=Cc(Error(Oe(423)),t),t=Qw(e,t,s,r,a);break e}else if(s!==a){a=Cc(Error(Oe(424)),t),t=Qw(e,t,s,r,a);break e}else for(is=Mi(t.stateNode.containerInfo.firstChild),ds=t,mr=!0,Js=null,r=K_(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(_c(),s===a){t=Qa(e,t,r);break e}jn(e,t,s,r)}t=t.child}return t;case 5:return Z_(t),e===null&&lx(t),s=t.type,a=t.pendingProps,o=e!==null?e.memoizedProps:null,c=a.children,nx(s,a)?c=null:o!==null&&nx(s,o)&&(t.flags|=32),NN(e,t),jn(e,t,c,r),t.child;case 6:return e===null&&lx(t),null;case 13:return CN(e,t,r);case 4:return t1(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Nc(t,null,s,r):jn(e,t,s,r),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Gs(s,a),Xw(e,t,s,a,r);case 7:return jn(e,t,t.pendingProps,r),t.child;case 8:return jn(e,t,t.pendingProps.children,r),t.child;case 12:return jn(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,o=t.memoizedProps,c=a.value,nr(Nf,s._currentValue),s._currentValue=c,o!==null)if(aa(o.value,c)){if(o.children===a.children&&!Hn.current){t=Qa(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var u=o.dependencies;if(u!==null){c=o.child;for(var f=u.firstContext;f!==null;){if(f.context===s){if(o.tag===1){f=Ga(-1,r&-r),f.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var x=p.pending;x===null?f.next=f:(f.next=x.next,x.next=f),p.pending=f}}o.lanes|=r,f=o.alternate,f!==null&&(f.lanes|=r),cx(o.return,r,t),u.lanes|=r;break}f=f.next}}else if(o.tag===10)c=o.type===t.type?null:o.child;else if(o.tag===18){if(c=o.return,c===null)throw Error(Oe(341));c.lanes|=r,u=c.alternate,u!==null&&(u.lanes|=r),cx(c,r,t),c=o.sibling}else c=o.child;if(c!==null)c.return=o;else for(c=o;c!==null;){if(c===t){c=null;break}if(o=c.sibling,o!==null){o.return=c.return,c=o;break}c=c.return}o=c}jn(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,sc(t,r),a=Os(a),s=s(a),t.flags|=1,jn(e,t,s,r),t.child;case 14:return s=t.type,a=Gs(s,t.pendingProps),a=Gs(s.type,a),Kw(e,t,s,a,r);case 15:return bN(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Gs(s,a),Gh(e,t),t.tag=1,Gn(s)?(e=!0,yf(t)):e=!1,sc(t,r),vN(t,s,a),ux(t,s,a,r),mx(null,t,s,!0,e,r);case 19:return EN(e,t,r);case 22:return _N(e,t,r)}throw Error(Oe(156,t.tag))};function $N(e,t){return p_(e,t)}function jR(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ts(e,t,r,s){return new jR(e,t,r,s)}function g1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function CR(e){if(typeof e=="function")return g1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===D0)return 11;if(e===M0)return 14}return 2}function zi(e,t){var r=e.alternate;return r===null?(r=Ts(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Yh(e,t,r,s,a,o){var c=2;if(s=e,typeof e=="function")g1(e)&&(c=1);else if(typeof e=="string")c=5;else e:switch(e){case $l:return Bo(r.children,a,o,t);case O0:c=8,a|=8;break;case Dg:return e=Ts(12,r,t,a|2),e.elementType=Dg,e.lanes=o,e;case Mg:return e=Ts(13,r,t,a),e.elementType=Mg,e.lanes=o,e;case Lg:return e=Ts(19,r,t,a),e.elementType=Lg,e.lanes=o,e;case Z2:return fm(r,a,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Y2:c=10;break e;case Q2:c=9;break e;case D0:c=11;break e;case M0:c=14;break e;case wi:c=16,s=null;break e}throw Error(Oe(130,e==null?e:typeof e,""))}return t=Ts(c,r,t,a),t.elementType=e,t.type=s,t.lanes=o,t}function Bo(e,t,r,s){return e=Ts(7,e,s,t),e.lanes=r,e}function fm(e,t,r,s){return e=Ts(22,e,s,t),e.elementType=Z2,e.lanes=r,e.stateNode={isHidden:!1},e}function rg(e,t,r){return e=Ts(6,e,null,t),e.lanes=r,e}function ng(e,t,r){return t=Ts(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ER(e,t,r,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lp(0),this.expirationTimes=Lp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lp(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function x1(e,t,r,s,a,o,c,u,f){return e=new ER(e,t,r,u,f),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Ts(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},e1(o),e}function SR(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ul,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function VN(e){if(!e)return qi;e=e._reactInternals;e:{if(cl(e)!==e||e.tag!==1)throw Error(Oe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Gn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Oe(171))}if(e.tag===1){var r=e.type;if(Gn(r))return V_(e,r,t)}return t}function qN(e,t,r,s,a,o,c,u,f){return e=x1(r,s,!0,e,a,o,c,u,f),e.context=VN(null),r=e.current,s=Sn(),a=Bi(r),o=Ga(s,a),o.callback=t??null,Li(r,o,a),e.current.lanes=a,Cu(e,a,s),Xn(e,s),e}function mm(e,t,r,s){var a=t.current,o=Sn(),c=Bi(a);return r=VN(r),t.context===null?t.context=r:t.pendingContext=r,t=Ga(o,c),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Li(a,t,c),e!==null&&(sa(e,a,c,o),qh(e,a,c)),c}function Pf(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function oy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function v1(e,t){oy(e,t),(e=e.alternate)&&oy(e,t)}function AR(){return null}var WN=typeof reportError=="function"?reportError:function(e){console.error(e)};function w1(e){this._internalRoot=e}pm.prototype.render=w1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Oe(409));mm(e,t,null,null)};pm.prototype.unmount=w1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Xo(function(){mm(null,e,null,null)}),t[Ka]=null}};function pm(e){this._internalRoot=e}pm.prototype.unstable_scheduleHydration=function(e){if(e){var t=__();e={blockedOn:null,target:e,priority:t};for(var r=0;r<bi.length&&t!==0&&t<bi[r].priority;r++);bi.splice(r,0,e),r===0&&j_(e)}};function y1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function gm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ly(){}function kR(e,t,r,s,a){if(a){if(typeof s=="function"){var o=s;s=function(){var p=Pf(c);o.call(p)}}var c=qN(t,s,e,0,null,!1,!1,"",ly);return e._reactRootContainer=c,e[Ka]=c.current,Kd(e.nodeType===8?e.parentNode:e),Xo(),c}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var u=s;s=function(){var p=Pf(f);u.call(p)}}var f=x1(e,0,!1,null,null,!1,!1,"",ly);return e._reactRootContainer=f,e[Ka]=f.current,Kd(e.nodeType===8?e.parentNode:e),Xo(function(){mm(t,f,r,s)}),f}function xm(e,t,r,s,a){var o=r._reactRootContainer;if(o){var c=o;if(typeof a=="function"){var u=a;a=function(){var f=Pf(c);u.call(f)}}mm(t,c,e,a)}else c=kR(r,t,e,a,s);return Pf(c)}y_=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=_d(t.pendingLanes);r!==0&&(B0(t,r|1),Xn(t,kr()),!(Lt&6)&&(Ec=kr()+500,so()))}break;case 13:Xo(function(){var s=Ya(e,1);if(s!==null){var a=Sn();sa(s,e,1,a)}}),v1(e,1)}};z0=function(e){if(e.tag===13){var t=Ya(e,134217728);if(t!==null){var r=Sn();sa(t,e,134217728,r)}v1(e,134217728)}};b_=function(e){if(e.tag===13){var t=Bi(e),r=Ya(e,t);if(r!==null){var s=Sn();sa(r,e,t,s)}v1(e,t)}};__=function(){return Xt};N_=function(e,t){var r=Xt;try{return Xt=e,t()}finally{Xt=r}};Gg=function(e,t,r){switch(t){case"input":if(zg(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var a=om(s);if(!a)throw Error(Oe(90));e_(s),zg(s,a)}}}break;case"textarea":r_(e,r);break;case"select":t=r.value,t!=null&&ec(e,!!r.multiple,t,!1)}};c_=f1;d_=Xo;var TR={usingClientEntryPoint:!1,Events:[Su,Hl,om,o_,l_,f1]},md={findFiberByHostInstance:Ao,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},IR={bundleType:md.bundleType,version:md.version,rendererPackageName:md.rendererPackageName,rendererConfig:md.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ri.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=f_(e),e===null?null:e.stateNode},findFiberByHostInstance:md.findFiberByHostInstance||AR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nh.isDisabled&&Nh.supportsFiber)try{nm=Nh.inject(IR),Aa=Nh}catch{}}ps.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TR;ps.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y1(t))throw Error(Oe(200));return SR(e,t,null,r)};ps.createRoot=function(e,t){if(!y1(e))throw Error(Oe(299));var r=!1,s="",a=WN;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=x1(e,1,!1,null,null,r,!1,s,a),e[Ka]=t.current,Kd(e.nodeType===8?e.parentNode:e),new w1(t)};ps.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Oe(188)):(e=Object.keys(e).join(","),Error(Oe(268,e)));return e=f_(t),e=e===null?null:e.stateNode,e};ps.flushSync=function(e){return Xo(e)};ps.hydrate=function(e,t,r){if(!gm(t))throw Error(Oe(200));return xm(null,e,t,!0,r)};ps.hydrateRoot=function(e,t,r){if(!y1(e))throw Error(Oe(405));var s=r!=null&&r.hydratedSources||null,a=!1,o="",c=WN;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(c=r.onRecoverableError)),t=qN(t,null,e,1,r??null,a,!1,o,c),e[Ka]=t.current,Kd(e),s)for(e=0;e<s.length;e++)r=s[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new pm(t)};ps.render=function(e,t,r){if(!gm(t))throw Error(Oe(200));return xm(null,e,t,!1,r)};ps.unmountComponentAtNode=function(e){if(!gm(e))throw Error(Oe(40));return e._reactRootContainer?(Xo(function(){xm(null,null,e,!1,function(){e._reactRootContainer=null,e[Ka]=null})}),!0):!1};ps.unstable_batchedUpdates=f1;ps.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!gm(r))throw Error(Oe(200));if(e==null||e._reactInternals===void 0)throw Error(Oe(38));return xm(e,t,r,!1,s)};ps.version="18.3.1-next-f1338f8080-20240426";function HN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(HN)}catch(e){console.error(e)}}HN(),H2.exports=ps;var dl=H2.exports;const GN=C0(dl);var XN,cy=dl;XN=cy.createRoot,cy.hydrateRoot;const RR=1,PR=1e6;let sg=0;function OR(){return sg=(sg+1)%Number.MAX_SAFE_INTEGER,sg.toString()}const ag=new Map,dy=e=>{if(ag.has(e))return;const t=setTimeout(()=>{ag.delete(e),Md({type:"REMOVE_TOAST",toastId:e})},PR);ag.set(e,t)},DR=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,RR)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?dy(r):e.toasts.forEach(s=>{dy(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===r||r===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},Qh=[];let Zh={toasts:[]};function Md(e){Zh=DR(Zh,e),Qh.forEach(t=>{t(Zh)})}function MR({...e}){const t=OR(),r=a=>Md({type:"UPDATE_TOAST",toast:{...a,id:t}}),s=()=>Md({type:"DISMISS_TOAST",toastId:t});return Md({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||s()}}}),{id:t,dismiss:s,update:r}}function KN(){const[e,t]=v.useState(Zh);return v.useEffect(()=>(Qh.push(t),()=>{const r=Qh.indexOf(t);r>-1&&Qh.splice(r,1)}),[e]),{...e,toast:MR,dismiss:r=>Md({type:"DISMISS_TOAST",toastId:r})}}function Re(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function uy(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Za(...e){return t=>{let r=!1;const s=e.map(a=>{const o=uy(a,t);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let a=0;a<s.length;a++){const o=s[a];typeof o=="function"?o():uy(e[a],null)}}}}function tt(...e){return v.useCallback(Za(...e),e)}function LR(e,t){const r=v.createContext(t),s=o=>{const{children:c,...u}=o,f=v.useMemo(()=>u,Object.values(u));return n.jsx(r.Provider,{value:f,children:c})};s.displayName=e+"Provider";function a(o){const c=v.useContext(r);if(c)return c;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[s,a]}function Mr(e,t=[]){let r=[];function s(o,c){const u=v.createContext(c),f=r.length;r=[...r,c];const p=w=>{var S;const{scope:b,children:j,...N}=w,C=((S=b==null?void 0:b[e])==null?void 0:S[f])||u,T=v.useMemo(()=>N,Object.values(N));return n.jsx(C.Provider,{value:T,children:j})};p.displayName=o+"Provider";function x(w,b){var C;const j=((C=b==null?void 0:b[e])==null?void 0:C[f])||u,N=v.useContext(j);if(N)return N;if(c!==void 0)return c;throw new Error(`\`${w}\` must be used within \`${o}\``)}return[p,x]}const a=()=>{const o=r.map(c=>v.createContext(c));return function(u){const f=(u==null?void 0:u[e])||o;return v.useMemo(()=>({[`__scope${e}`]:{...u,[e]:f}}),[u,f])}};return a.scopeName=e,[s,FR(a,...t)]}function FR(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const c=s.reduce((u,{useScope:f,scopeName:p})=>{const w=f(o)[`__scope${p}`];return{...u,...w}},{});return v.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return r.scopeName=t.scopeName,r}function Wi(e){const t=zR(e),r=v.forwardRef((s,a)=>{const{children:o,...c}=s,u=v.Children.toArray(o),f=u.find(UR);if(f){const p=f.props.children,x=u.map(w=>w===f?v.Children.count(p)>1?v.Children.only(null):v.isValidElement(p)?p.props.children:null:w);return n.jsx(t,{...c,ref:a,children:v.isValidElement(p)?v.cloneElement(p,void 0,x):null})}return n.jsx(t,{...c,ref:a,children:o})});return r.displayName=`${e}.Slot`,r}var BR=Wi("Slot");function zR(e){const t=v.forwardRef((r,s)=>{const{children:a,...o}=r;if(v.isValidElement(a)){const c=VR(a),u=$R(o,a.props);return a.type!==v.Fragment&&(u.ref=s?Za(s,c):c),v.cloneElement(a,u)}return v.Children.count(a)>1?v.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var YN=Symbol("radix.slottable");function QN(e){const t=({children:r})=>n.jsx(n.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=YN,t}function UR(e){return v.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===YN}function $R(e,t){const r={...t};for(const s in t){const a=e[s],o=t[s];/^on[A-Z]/.test(s)?a&&o?r[s]=(...u)=>{const f=o(...u);return a(...u),f}:a&&(r[s]=a):s==="style"?r[s]={...a,...o}:s==="className"&&(r[s]=[a,o].filter(Boolean).join(" "))}return{...e,...r}}function VR(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function ku(e){const t=e+"CollectionProvider",[r,s]=Mr(t),[a,o]=r(t,{collectionRef:{current:null},itemMap:new Map}),c=C=>{const{scope:T,children:S}=C,E=Ue.useRef(null),_=Ue.useRef(new Map).current;return n.jsx(a,{scope:T,itemMap:_,collectionRef:E,children:S})};c.displayName=t;const u=e+"CollectionSlot",f=Wi(u),p=Ue.forwardRef((C,T)=>{const{scope:S,children:E}=C,_=o(u,S),k=tt(T,_.collectionRef);return n.jsx(f,{ref:k,children:E})});p.displayName=u;const x=e+"CollectionItemSlot",w="data-radix-collection-item",b=Wi(x),j=Ue.forwardRef((C,T)=>{const{scope:S,children:E,..._}=C,k=Ue.useRef(null),D=tt(T,k),L=o(x,S);return Ue.useEffect(()=>(L.itemMap.set(k,{ref:k,..._}),()=>void L.itemMap.delete(k))),n.jsx(b,{[w]:"",ref:D,children:E})});j.displayName=x;function N(C){const T=o(e+"CollectionConsumer",C);return Ue.useCallback(()=>{const E=T.collectionRef.current;if(!E)return[];const _=Array.from(E.querySelectorAll(`[${w}]`));return Array.from(T.itemMap.values()).sort((L,R)=>_.indexOf(L.ref.current)-_.indexOf(R.ref.current))},[T.collectionRef,T.itemMap])}return[{Provider:c,Slot:p,ItemSlot:j},N,s]}var qR=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ve=qR.reduce((e,t)=>{const r=Wi(`Primitive.${t}`),s=v.forwardRef((a,o)=>{const{asChild:c,...u}=a,f=c?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(f,{...u,ref:o})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function b1(e,t){e&&dl.flushSync(()=>e.dispatchEvent(t))}function Er(e){const t=v.useRef(e);return v.useEffect(()=>{t.current=e}),v.useMemo(()=>(...r)=>{var s;return(s=t.current)==null?void 0:s.call(t,...r)},[])}function WR(e,t=globalThis==null?void 0:globalThis.document){const r=Er(e);v.useEffect(()=>{const s=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[r,t])}var HR="DismissableLayer",Ex="dismissableLayer.update",GR="dismissableLayer.pointerDownOutside",XR="dismissableLayer.focusOutside",hy,ZN=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ul=v.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:c,onDismiss:u,...f}=e,p=v.useContext(ZN),[x,w]=v.useState(null),b=(x==null?void 0:x.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,j]=v.useState({}),N=tt(t,R=>w(R)),C=Array.from(p.layers),[T]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),S=C.indexOf(T),E=x?C.indexOf(x):-1,_=p.layersWithOutsidePointerEventsDisabled.size>0,k=E>=S,D=YR(R=>{const M=R.target,P=[...p.branches].some(F=>F.contains(M));!k||P||(a==null||a(R),c==null||c(R),R.defaultPrevented||u==null||u())},b),L=QR(R=>{const M=R.target;[...p.branches].some(F=>F.contains(M))||(o==null||o(R),c==null||c(R),R.defaultPrevented||u==null||u())},b);return WR(R=>{E===p.layers.size-1&&(s==null||s(R),!R.defaultPrevented&&u&&(R.preventDefault(),u()))},b),v.useEffect(()=>{if(x)return r&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(hy=b.body.style.pointerEvents,b.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(x)),p.layers.add(x),fy(),()=>{r&&p.layersWithOutsidePointerEventsDisabled.size===1&&(b.body.style.pointerEvents=hy)}},[x,b,r,p]),v.useEffect(()=>()=>{x&&(p.layers.delete(x),p.layersWithOutsidePointerEventsDisabled.delete(x),fy())},[x,p]),v.useEffect(()=>{const R=()=>j({});return document.addEventListener(Ex,R),()=>document.removeEventListener(Ex,R)},[]),n.jsx(Ve.div,{...f,ref:N,style:{pointerEvents:_?k?"auto":"none":void 0,...e.style},onFocusCapture:Re(e.onFocusCapture,L.onFocusCapture),onBlurCapture:Re(e.onBlurCapture,L.onBlurCapture),onPointerDownCapture:Re(e.onPointerDownCapture,D.onPointerDownCapture)})});ul.displayName=HR;var KR="DismissableLayerBranch",JN=v.forwardRef((e,t)=>{const r=v.useContext(ZN),s=v.useRef(null),a=tt(t,s);return v.useEffect(()=>{const o=s.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),n.jsx(Ve.div,{...e,ref:a})});JN.displayName=KR;function YR(e,t=globalThis==null?void 0:globalThis.document){const r=Er(e),s=v.useRef(!1),a=v.useRef(()=>{});return v.useEffect(()=>{const o=u=>{if(u.target&&!s.current){let f=function(){ej(GR,r,p,{discrete:!0})};const p={originalEvent:u};u.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=f,t.addEventListener("click",a.current,{once:!0})):f()}else t.removeEventListener("click",a.current);s.current=!1},c=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(c),t.removeEventListener("pointerdown",o),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>s.current=!0}}function QR(e,t=globalThis==null?void 0:globalThis.document){const r=Er(e),s=v.useRef(!1);return v.useEffect(()=>{const a=o=>{o.target&&!s.current&&ej(XR,r,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function fy(){const e=new CustomEvent(Ex);document.dispatchEvent(e)}function ej(e,t,r,{discrete:s}){const a=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),s?b1(a,o):a.dispatchEvent(o)}var ZR=ul,JR=JN,Rr=globalThis!=null&&globalThis.document?v.useLayoutEffect:()=>{},e8="Portal",zc=v.forwardRef((e,t)=>{var u;const{container:r,...s}=e,[a,o]=v.useState(!1);Rr(()=>o(!0),[]);const c=r||a&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?GN.createPortal(n.jsx(Ve.div,{...s,ref:t}),c):null});zc.displayName=e8;function t8(e,t){return v.useReducer((r,s)=>t[r][s]??r,e)}var Hr=e=>{const{present:t,children:r}=e,s=r8(t),a=typeof r=="function"?r({present:s.isPresent}):v.Children.only(r),o=tt(s.ref,n8(a));return typeof r=="function"||s.isPresent?v.cloneElement(a,{ref:o}):null};Hr.displayName="Presence";function r8(e){const[t,r]=v.useState(),s=v.useRef(null),a=v.useRef(e),o=v.useRef("none"),c=e?"mounted":"unmounted",[u,f]=t8(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return v.useEffect(()=>{const p=jh(s.current);o.current=u==="mounted"?p:"none"},[u]),Rr(()=>{const p=s.current,x=a.current;if(x!==e){const b=o.current,j=jh(p);e?f("MOUNT"):j==="none"||(p==null?void 0:p.display)==="none"?f("UNMOUNT"):f(x&&b!==j?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,f]),Rr(()=>{if(t){let p;const x=t.ownerDocument.defaultView??window,w=j=>{const C=jh(s.current).includes(CSS.escape(j.animationName));if(j.target===t&&C&&(f("ANIMATION_END"),!a.current)){const T=t.style.animationFillMode;t.style.animationFillMode="forwards",p=x.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=T)})}},b=j=>{j.target===t&&(o.current=jh(s.current))};return t.addEventListener("animationstart",b),t.addEventListener("animationcancel",w),t.addEventListener("animationend",w),()=>{x.clearTimeout(p),t.removeEventListener("animationstart",b),t.removeEventListener("animationcancel",w),t.removeEventListener("animationend",w)}}else f("ANIMATION_END")},[t,f]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:v.useCallback(p=>{s.current=p?getComputedStyle(p):null,r(p)},[])}}function jh(e){return(e==null?void 0:e.animationName)||"none"}function n8(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var s8=T0[" useInsertionEffect ".trim().toString()]||Rr;function Ms({prop:e,defaultProp:t,onChange:r=()=>{},caller:s}){const[a,o,c]=a8({defaultProp:t,onChange:r}),u=e!==void 0,f=u?e:a;{const x=v.useRef(e!==void 0);v.useEffect(()=>{const w=x.current;w!==u&&console.warn(`${s} is changing from ${w?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),x.current=u},[u,s])}const p=v.useCallback(x=>{var w;if(u){const b=i8(x)?x(e):x;b!==e&&((w=c.current)==null||w.call(c,b))}else o(x)},[u,e,o,c]);return[f,p]}function a8({defaultProp:e,onChange:t}){const[r,s]=v.useState(e),a=v.useRef(r),o=v.useRef(t);return s8(()=>{o.current=t},[t]),v.useEffect(()=>{var c;a.current!==r&&((c=o.current)==null||c.call(o,r),a.current=r)},[r,a]),[r,s,o]}function i8(e){return typeof e=="function"}var tj=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),o8="VisuallyHidden",vm=v.forwardRef((e,t)=>n.jsx(Ve.span,{...e,ref:t,style:{...tj,...e.style}}));vm.displayName=o8;var l8=vm,_1="ToastProvider",[N1,c8,d8]=ku("Toast"),[rj]=Mr("Toast",[d8]),[u8,wm]=rj(_1),nj=e=>{const{__scopeToast:t,label:r="Notification",duration:s=5e3,swipeDirection:a="right",swipeThreshold:o=50,children:c}=e,[u,f]=v.useState(null),[p,x]=v.useState(0),w=v.useRef(!1),b=v.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${_1}\`. Expected non-empty \`string\`.`),n.jsx(N1.Provider,{scope:t,children:n.jsx(u8,{scope:t,label:r,duration:s,swipeDirection:a,swipeThreshold:o,toastCount:p,viewport:u,onViewportChange:f,onToastAdd:v.useCallback(()=>x(j=>j+1),[]),onToastRemove:v.useCallback(()=>x(j=>j-1),[]),isFocusedToastEscapeKeyDownRef:w,isClosePausedRef:b,children:c})})};nj.displayName=_1;var sj="ToastViewport",h8=["F8"],Sx="toast.viewportPause",Ax="toast.viewportResume",aj=v.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:s=h8,label:a="Notifications ({hotkey})",...o}=e,c=wm(sj,r),u=c8(r),f=v.useRef(null),p=v.useRef(null),x=v.useRef(null),w=v.useRef(null),b=tt(t,w,c.onViewportChange),j=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),N=c.toastCount>0;v.useEffect(()=>{const T=S=>{var _;s.length!==0&&s.every(k=>S[k]||S.code===k)&&((_=w.current)==null||_.focus())};return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[s]),v.useEffect(()=>{const T=f.current,S=w.current;if(N&&T&&S){const E=()=>{if(!c.isClosePausedRef.current){const L=new CustomEvent(Sx);S.dispatchEvent(L),c.isClosePausedRef.current=!0}},_=()=>{if(c.isClosePausedRef.current){const L=new CustomEvent(Ax);S.dispatchEvent(L),c.isClosePausedRef.current=!1}},k=L=>{!T.contains(L.relatedTarget)&&_()},D=()=>{T.contains(document.activeElement)||_()};return T.addEventListener("focusin",E),T.addEventListener("focusout",k),T.addEventListener("pointermove",E),T.addEventListener("pointerleave",D),window.addEventListener("blur",E),window.addEventListener("focus",_),()=>{T.removeEventListener("focusin",E),T.removeEventListener("focusout",k),T.removeEventListener("pointermove",E),T.removeEventListener("pointerleave",D),window.removeEventListener("blur",E),window.removeEventListener("focus",_)}}},[N,c.isClosePausedRef]);const C=v.useCallback(({tabbingDirection:T})=>{const E=u().map(_=>{const k=_.ref.current,D=[k,...C8(k)];return T==="forwards"?D:D.reverse()});return(T==="forwards"?E.reverse():E).flat()},[u]);return v.useEffect(()=>{const T=w.current;if(T){const S=E=>{var D,L,R;const _=E.altKey||E.ctrlKey||E.metaKey;if(E.key==="Tab"&&!_){const M=document.activeElement,P=E.shiftKey;if(E.target===T&&P){(D=p.current)==null||D.focus();return}const U=C({tabbingDirection:P?"backwards":"forwards"}),q=U.findIndex(re=>re===M);ig(U.slice(q+1))?E.preventDefault():P?(L=p.current)==null||L.focus():(R=x.current)==null||R.focus()}};return T.addEventListener("keydown",S),()=>T.removeEventListener("keydown",S)}},[u,C]),n.jsxs(JR,{ref:f,role:"region","aria-label":a.replace("{hotkey}",j),tabIndex:-1,style:{pointerEvents:N?void 0:"none"},children:[N&&n.jsx(kx,{ref:p,onFocusFromOutsideViewport:()=>{const T=C({tabbingDirection:"forwards"});ig(T)}}),n.jsx(N1.Slot,{scope:r,children:n.jsx(Ve.ol,{tabIndex:-1,...o,ref:b})}),N&&n.jsx(kx,{ref:x,onFocusFromOutsideViewport:()=>{const T=C({tabbingDirection:"backwards"});ig(T)}})]})});aj.displayName=sj;var ij="ToastFocusProxy",kx=v.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:s,...a}=e,o=wm(ij,r);return n.jsx(vm,{tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:c=>{var p;const u=c.relatedTarget;!((p=o.viewport)!=null&&p.contains(u))&&s()}})});kx.displayName=ij;var Tu="Toast",f8="toast.swipeStart",m8="toast.swipeMove",p8="toast.swipeCancel",g8="toast.swipeEnd",oj=v.forwardRef((e,t)=>{const{forceMount:r,open:s,defaultOpen:a,onOpenChange:o,...c}=e,[u,f]=Ms({prop:s,defaultProp:a??!0,onChange:o,caller:Tu});return n.jsx(Hr,{present:r||u,children:n.jsx(w8,{open:u,...c,ref:t,onClose:()=>f(!1),onPause:Er(e.onPause),onResume:Er(e.onResume),onSwipeStart:Re(e.onSwipeStart,p=>{p.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Re(e.onSwipeMove,p=>{const{x,y:w}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","move"),p.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${x}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${w}px`)}),onSwipeCancel:Re(e.onSwipeCancel,p=>{p.currentTarget.setAttribute("data-swipe","cancel"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Re(e.onSwipeEnd,p=>{const{x,y:w}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","end"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${x}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${w}px`),f(!1)})})})});oj.displayName=Tu;var[x8,v8]=rj(Tu,{onClose(){}}),w8=v.forwardRef((e,t)=>{const{__scopeToast:r,type:s="foreground",duration:a,open:o,onClose:c,onEscapeKeyDown:u,onPause:f,onResume:p,onSwipeStart:x,onSwipeMove:w,onSwipeCancel:b,onSwipeEnd:j,...N}=e,C=wm(Tu,r),[T,S]=v.useState(null),E=tt(t,re=>S(re)),_=v.useRef(null),k=v.useRef(null),D=a||C.duration,L=v.useRef(0),R=v.useRef(D),M=v.useRef(0),{onToastAdd:P,onToastRemove:F}=C,Y=Er(()=>{var W;(T==null?void 0:T.contains(document.activeElement))&&((W=C.viewport)==null||W.focus()),c()}),U=v.useCallback(re=>{!re||re===1/0||(window.clearTimeout(M.current),L.current=new Date().getTime(),M.current=window.setTimeout(Y,re))},[Y]);v.useEffect(()=>{const re=C.viewport;if(re){const W=()=>{U(R.current),p==null||p()},ne=()=>{const oe=new Date().getTime()-L.current;R.current=R.current-oe,window.clearTimeout(M.current),f==null||f()};return re.addEventListener(Sx,ne),re.addEventListener(Ax,W),()=>{re.removeEventListener(Sx,ne),re.removeEventListener(Ax,W)}}},[C.viewport,D,f,p,U]),v.useEffect(()=>{o&&!C.isClosePausedRef.current&&U(D)},[o,D,C.isClosePausedRef,U]),v.useEffect(()=>(P(),()=>F()),[P,F]);const q=v.useMemo(()=>T?mj(T):null,[T]);return C.viewport?n.jsxs(n.Fragment,{children:[q&&n.jsx(y8,{__scopeToast:r,role:"status","aria-live":s==="foreground"?"assertive":"polite",children:q}),n.jsx(x8,{scope:r,onClose:Y,children:dl.createPortal(n.jsx(N1.ItemSlot,{scope:r,children:n.jsx(ZR,{asChild:!0,onEscapeKeyDown:Re(u,()=>{C.isFocusedToastEscapeKeyDownRef.current||Y(),C.isFocusedToastEscapeKeyDownRef.current=!1}),children:n.jsx(Ve.li,{tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":C.swipeDirection,...N,ref:E,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Re(e.onKeyDown,re=>{re.key==="Escape"&&(u==null||u(re.nativeEvent),re.nativeEvent.defaultPrevented||(C.isFocusedToastEscapeKeyDownRef.current=!0,Y()))}),onPointerDown:Re(e.onPointerDown,re=>{re.button===0&&(_.current={x:re.clientX,y:re.clientY})}),onPointerMove:Re(e.onPointerMove,re=>{if(!_.current)return;const W=re.clientX-_.current.x,ne=re.clientY-_.current.y,oe=!!k.current,ae=["left","right"].includes(C.swipeDirection),J=["left","up"].includes(C.swipeDirection)?Math.min:Math.max,he=ae?J(0,W):0,ye=ae?0:J(0,ne),H=re.pointerType==="touch"?10:2,ee={x:he,y:ye},X={originalEvent:re,delta:ee};oe?(k.current=ee,Ch(m8,w,X,{discrete:!1})):my(ee,C.swipeDirection,H)?(k.current=ee,Ch(f8,x,X,{discrete:!1}),re.target.setPointerCapture(re.pointerId)):(Math.abs(W)>H||Math.abs(ne)>H)&&(_.current=null)}),onPointerUp:Re(e.onPointerUp,re=>{const W=k.current,ne=re.target;if(ne.hasPointerCapture(re.pointerId)&&ne.releasePointerCapture(re.pointerId),k.current=null,_.current=null,W){const oe=re.currentTarget,ae={originalEvent:re,delta:W};my(W,C.swipeDirection,C.swipeThreshold)?Ch(g8,j,ae,{discrete:!0}):Ch(p8,b,ae,{discrete:!0}),oe.addEventListener("click",J=>J.preventDefault(),{once:!0})}})})})}),C.viewport)})]}):null}),y8=e=>{const{__scopeToast:t,children:r,...s}=e,a=wm(Tu,t),[o,c]=v.useState(!1),[u,f]=v.useState(!1);return N8(()=>c(!0)),v.useEffect(()=>{const p=window.setTimeout(()=>f(!0),1e3);return()=>window.clearTimeout(p)},[]),u?null:n.jsx(zc,{asChild:!0,children:n.jsx(vm,{...s,children:o&&n.jsxs(n.Fragment,{children:[a.label," ",r]})})})},b8="ToastTitle",lj=v.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e;return n.jsx(Ve.div,{...s,ref:t})});lj.displayName=b8;var _8="ToastDescription",cj=v.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e;return n.jsx(Ve.div,{...s,ref:t})});cj.displayName=_8;var dj="ToastAction",uj=v.forwardRef((e,t)=>{const{altText:r,...s}=e;return r.trim()?n.jsx(fj,{altText:r,asChild:!0,children:n.jsx(j1,{...s,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${dj}\`. Expected non-empty \`string\`.`),null)});uj.displayName=dj;var hj="ToastClose",j1=v.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e,a=v8(hj,r);return n.jsx(fj,{asChild:!0,children:n.jsx(Ve.button,{type:"button",...s,ref:t,onClick:Re(e.onClick,a.onClose)})})});j1.displayName=hj;var fj=v.forwardRef((e,t)=>{const{__scopeToast:r,altText:s,...a}=e;return n.jsx(Ve.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...a,ref:t})});function mj(e){const t=[];return Array.from(e.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&t.push(s.textContent),j8(s)){const a=s.ariaHidden||s.hidden||s.style.display==="none",o=s.dataset.radixToastAnnounceExclude==="";if(!a)if(o){const c=s.dataset.radixToastAnnounceAlt;c&&t.push(c)}else t.push(...mj(s))}}),t}function Ch(e,t,r,{discrete:s}){const a=r.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),s?b1(a,o):a.dispatchEvent(o)}var my=(e,t,r=0)=>{const s=Math.abs(e.x),a=Math.abs(e.y),o=s>a;return t==="left"||t==="right"?o&&s>r:!o&&a>r};function N8(e=()=>{}){const t=Er(e);Rr(()=>{let r=0,s=0;return r=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(s)}},[t])}function j8(e){return e.nodeType===e.ELEMENT_NODE}function C8(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function ig(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var E8=nj,pj=aj,gj=oj,xj=lj,vj=cj,wj=uj,yj=j1;function bj(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=bj(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function _j(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=bj(e))&&(s&&(s+=" "),s+=t);return s}const py=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,gy=_j,Iu=(e,t)=>r=>{var s;if((t==null?void 0:t.variants)==null)return gy(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:o}=t,c=Object.keys(a).map(p=>{const x=r==null?void 0:r[p],w=o==null?void 0:o[p];if(x===null)return null;const b=py(x)||py(w);return a[p][b]}),u=r&&Object.entries(r).reduce((p,x)=>{let[w,b]=x;return b===void 0||(p[w]=b),p},{}),f=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((p,x)=>{let{class:w,className:b,...j}=x;return Object.entries(j).every(N=>{let[C,T]=N;return Array.isArray(T)?T.includes({...o,...u}[C]):{...o,...u}[C]===T})?[...p,w,b]:p},[]);return gy(e,c,f,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S8=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Nj=(...e)=>e.filter((t,r,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var A8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k8=v.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:a="",children:o,iconNode:c,...u},f)=>v.createElement("svg",{ref:f,...A8,width:t,height:t,stroke:e,strokeWidth:s?Number(r)*24/Number(t):r,className:Nj("lucide",a),...u},[...c.map(([p,x])=>v.createElement(p,x)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=(e,t)=>{const r=v.forwardRef(({className:s,...a},o)=>v.createElement(k8,{ref:o,iconNode:t,className:Nj(`lucide-${S8(e)}`,s),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=Be("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=Be("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=Be("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=Be("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=Be("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=Be("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=Be("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=Be("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=Be("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=Be("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T8=Be("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I8=Be("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=Be("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=Be("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=Be("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=Be("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=Be("CircleStop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=Be("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=Be("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const og=Be("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ef=Be("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=Be("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=Be("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P8=Be("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=Be("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=Be("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O8=Be("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=Be("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=Be("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=Be("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=Be("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=Be("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=Be("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=Be("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=Be("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=Be("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=Be("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D8=Be("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=Be("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M8=Be("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=Be("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=Be("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=Be("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=Be("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=Be("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=Be("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=Be("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=Be("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=Be("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8=Be("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=Be("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=Be("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=Be("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=Be("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B8=Be("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z8=Be("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=Be("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=Be("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U8=Be("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=Be("Radar",[["path",{d:"M19.07 4.93A10 10 0 0 0 6.99 3.34",key:"z3du51"}],["path",{d:"M4 6h.01",key:"oypzma"}],["path",{d:"M2.29 9.62A10 10 0 1 0 21.31 8.35",key:"qzzz0"}],["path",{d:"M16.24 7.76A6 6 0 1 0 8.23 16.67",key:"1yjesh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M17.99 11.66A6 6 0 0 1 15.77 16.67",key:"1u2y91"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"m13.41 10.59 5.66-5.66",key:"mhq4k0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8=Be("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V8=Be("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=Be("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=Be("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=Be("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=Be("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=Be("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=Be("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q8=Be("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=Be("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=Be("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=Be("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=Be("SwitchCamera",[["path",{d:"M11 19H4a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h5",key:"mtk2lu"}],["path",{d:"M13 5h7a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-5",key:"120jsl"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"m18 22-3-3 3-3",key:"kgdoj7"}],["path",{d:"m6 2 3 3-3 3",key:"1fnbkv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tf=Be("Text",[["path",{d:"M17 6.1H3",key:"wptmhv"}],["path",{d:"M21 12.1H3",key:"1j38uz"}],["path",{d:"M15.1 18H3",key:"1nb16a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=Be("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=Be("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=Be("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W8=Be("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=Be("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=Be("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ym=Be("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=Be("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=Be("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H8=Be("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=Be("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G8=Be("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),I1="-",X8=e=>{const t=Y8(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:c=>{const u=c.split(I1);return u[0]===""&&u.length!==1&&u.shift(),Oj(u,t)||K8(c)},getConflictingClassGroupIds:(c,u)=>{const f=r[c]||[];return u&&s[c]?[...f,...s[c]]:f}}},Oj=(e,t)=>{var c;if(e.length===0)return t.classGroupId;const r=e[0],s=t.nextPart.get(r),a=s?Oj(e.slice(1),s):void 0;if(a)return a;if(t.validators.length===0)return;const o=e.join(I1);return(c=t.validators.find(({validator:u})=>u(o)))==null?void 0:c.classGroupId},Ny=/^\[(.+)\]$/,K8=e=>{if(Ny.test(e)){const t=Ny.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},Y8=e=>{const{theme:t,prefix:r}=e,s={nextPart:new Map,validators:[]};return Z8(Object.entries(e.classGroups),r).forEach(([o,c])=>{Ox(c,s,o,t)}),s},Ox=(e,t,r,s)=>{e.forEach(a=>{if(typeof a=="string"){const o=a===""?t:jy(t,a);o.classGroupId=r;return}if(typeof a=="function"){if(Q8(a)){Ox(a(s),t,r,s);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([o,c])=>{Ox(c,jy(t,o),r,s)})})},jy=(e,t)=>{let r=e;return t.split(I1).forEach(s=>{r.nextPart.has(s)||r.nextPart.set(s,{nextPart:new Map,validators:[]}),r=r.nextPart.get(s)}),r},Q8=e=>e.isThemeGetter,Z8=(e,t)=>t?e.map(([r,s])=>{const a=s.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([c,u])=>[t+c,u])):o);return[r,a]}):e,J8=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,s=new Map;const a=(o,c)=>{r.set(o,c),t++,t>e&&(t=0,s=r,r=new Map)};return{get(o){let c=r.get(o);if(c!==void 0)return c;if((c=s.get(o))!==void 0)return a(o,c),c},set(o,c){r.has(o)?r.set(o,c):a(o,c)}}},Dj="!",e6=e=>{const{separator:t,experimentalParseClassName:r}=e,s=t.length===1,a=t[0],o=t.length,c=u=>{const f=[];let p=0,x=0,w;for(let T=0;T<u.length;T++){let S=u[T];if(p===0){if(S===a&&(s||u.slice(T,T+o)===t)){f.push(u.slice(x,T)),x=T+o;continue}if(S==="/"){w=T;continue}}S==="["?p++:S==="]"&&p--}const b=f.length===0?u:u.substring(x),j=b.startsWith(Dj),N=j?b.substring(1):b,C=w&&w>x?w-x:void 0;return{modifiers:f,hasImportantModifier:j,baseClassName:N,maybePostfixModifierPosition:C}};return r?u=>r({className:u,parseClassName:c}):c},t6=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(s=>{s[0]==="["?(t.push(...r.sort(),s),r=[]):r.push(s)}),t.push(...r.sort()),t},r6=e=>({cache:J8(e.cacheSize),parseClassName:e6(e),...X8(e)}),n6=/\s+/,s6=(e,t)=>{const{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:a}=t,o=[],c=e.trim().split(n6);let u="";for(let f=c.length-1;f>=0;f-=1){const p=c[f],{modifiers:x,hasImportantModifier:w,baseClassName:b,maybePostfixModifierPosition:j}=r(p);let N=!!j,C=s(N?b.substring(0,j):b);if(!C){if(!N){u=p+(u.length>0?" "+u:u);continue}if(C=s(b),!C){u=p+(u.length>0?" "+u:u);continue}N=!1}const T=t6(x).join(":"),S=w?T+Dj:T,E=S+C;if(o.includes(E))continue;o.push(E);const _=a(C,N);for(let k=0;k<_.length;++k){const D=_[k];o.push(S+D)}u=p+(u.length>0?" "+u:u)}return u};function a6(){let e=0,t,r,s="";for(;e<arguments.length;)(t=arguments[e++])&&(r=Mj(t))&&(s&&(s+=" "),s+=r);return s}const Mj=e=>{if(typeof e=="string")return e;let t,r="";for(let s=0;s<e.length;s++)e[s]&&(t=Mj(e[s]))&&(r&&(r+=" "),r+=t);return r};function i6(e,...t){let r,s,a,o=c;function c(f){const p=t.reduce((x,w)=>w(x),e());return r=r6(p),s=r.cache.get,a=r.cache.set,o=u,u(f)}function u(f){const p=s(f);if(p)return p;const x=s6(f,r);return a(f,x),x}return function(){return o(a6.apply(null,arguments))}}const or=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},Lj=/^\[(?:([a-z-]+):)?(.+)\]$/i,o6=/^\d+\/\d+$/,l6=new Set(["px","full","screen"]),c6=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,d6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,u6=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,h6=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,f6=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ma=e=>ic(e)||l6.has(e)||o6.test(e),ui=e=>Vc(e,"length",b6),ic=e=>!!e&&!Number.isNaN(Number(e)),lg=e=>Vc(e,"number",ic),gd=e=>!!e&&Number.isInteger(Number(e)),m6=e=>e.endsWith("%")&&ic(e.slice(0,-1)),vt=e=>Lj.test(e),hi=e=>c6.test(e),p6=new Set(["length","size","percentage"]),g6=e=>Vc(e,p6,Fj),x6=e=>Vc(e,"position",Fj),v6=new Set(["image","url"]),w6=e=>Vc(e,v6,N6),y6=e=>Vc(e,"",_6),xd=()=>!0,Vc=(e,t,r)=>{const s=Lj.exec(e);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):r(s[2]):!1},b6=e=>d6.test(e)&&!u6.test(e),Fj=()=>!1,_6=e=>h6.test(e),N6=e=>f6.test(e),j6=()=>{const e=or("colors"),t=or("spacing"),r=or("blur"),s=or("brightness"),a=or("borderColor"),o=or("borderRadius"),c=or("borderSpacing"),u=or("borderWidth"),f=or("contrast"),p=or("grayscale"),x=or("hueRotate"),w=or("invert"),b=or("gap"),j=or("gradientColorStops"),N=or("gradientColorStopPositions"),C=or("inset"),T=or("margin"),S=or("opacity"),E=or("padding"),_=or("saturate"),k=or("scale"),D=or("sepia"),L=or("skew"),R=or("space"),M=or("translate"),P=()=>["auto","contain","none"],F=()=>["auto","hidden","clip","visible","scroll"],Y=()=>["auto",vt,t],U=()=>[vt,t],q=()=>["",Ma,ui],re=()=>["auto",ic,vt],W=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ne=()=>["solid","dashed","dotted","double","none"],oe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ae=()=>["start","end","center","between","around","evenly","stretch"],J=()=>["","0",vt],he=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ye=()=>[ic,vt];return{cacheSize:500,separator:":",theme:{colors:[xd],spacing:[Ma,ui],blur:["none","",hi,vt],brightness:ye(),borderColor:[e],borderRadius:["none","","full",hi,vt],borderSpacing:U(),borderWidth:q(),contrast:ye(),grayscale:J(),hueRotate:ye(),invert:J(),gap:U(),gradientColorStops:[e],gradientColorStopPositions:[m6,ui],inset:Y(),margin:Y(),opacity:ye(),padding:U(),saturate:ye(),scale:ye(),sepia:J(),skew:ye(),space:U(),translate:U()},classGroups:{aspect:[{aspect:["auto","square","video",vt]}],container:["container"],columns:[{columns:[hi]}],"break-after":[{"break-after":he()}],"break-before":[{"break-before":he()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...W(),vt]}],overflow:[{overflow:F()}],"overflow-x":[{"overflow-x":F()}],"overflow-y":[{"overflow-y":F()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[C]}],"inset-x":[{"inset-x":[C]}],"inset-y":[{"inset-y":[C]}],start:[{start:[C]}],end:[{end:[C]}],top:[{top:[C]}],right:[{right:[C]}],bottom:[{bottom:[C]}],left:[{left:[C]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",gd,vt]}],basis:[{basis:Y()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",vt]}],grow:[{grow:J()}],shrink:[{shrink:J()}],order:[{order:["first","last","none",gd,vt]}],"grid-cols":[{"grid-cols":[xd]}],"col-start-end":[{col:["auto",{span:["full",gd,vt]},vt]}],"col-start":[{"col-start":re()}],"col-end":[{"col-end":re()}],"grid-rows":[{"grid-rows":[xd]}],"row-start-end":[{row:["auto",{span:[gd,vt]},vt]}],"row-start":[{"row-start":re()}],"row-end":[{"row-end":re()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",vt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",vt]}],gap:[{gap:[b]}],"gap-x":[{"gap-x":[b]}],"gap-y":[{"gap-y":[b]}],"justify-content":[{justify:["normal",...ae()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...ae(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...ae(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[E]}],px:[{px:[E]}],py:[{py:[E]}],ps:[{ps:[E]}],pe:[{pe:[E]}],pt:[{pt:[E]}],pr:[{pr:[E]}],pb:[{pb:[E]}],pl:[{pl:[E]}],m:[{m:[T]}],mx:[{mx:[T]}],my:[{my:[T]}],ms:[{ms:[T]}],me:[{me:[T]}],mt:[{mt:[T]}],mr:[{mr:[T]}],mb:[{mb:[T]}],ml:[{ml:[T]}],"space-x":[{"space-x":[R]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[R]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",vt,t]}],"min-w":[{"min-w":[vt,t,"min","max","fit"]}],"max-w":[{"max-w":[vt,t,"none","full","min","max","fit","prose",{screen:[hi]},hi]}],h:[{h:[vt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[vt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[vt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[vt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",hi,ui]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",lg]}],"font-family":[{font:[xd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",vt]}],"line-clamp":[{"line-clamp":["none",ic,lg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ma,vt]}],"list-image":[{"list-image":["none",vt]}],"list-style-type":[{list:["none","disc","decimal",vt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[S]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[S]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ne(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ma,ui]}],"underline-offset":[{"underline-offset":["auto",Ma,vt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:U()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",vt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",vt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[S]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...W(),x6]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",g6]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},w6]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[N]}],"gradient-via-pos":[{via:[N]}],"gradient-to-pos":[{to:[N]}],"gradient-from":[{from:[j]}],"gradient-via":[{via:[j]}],"gradient-to":[{to:[j]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[S]}],"border-style":[{border:[...ne(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[S]}],"divide-style":[{divide:ne()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...ne()]}],"outline-offset":[{"outline-offset":[Ma,vt]}],"outline-w":[{outline:[Ma,ui]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[S]}],"ring-offset-w":[{"ring-offset":[Ma,ui]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",hi,y6]}],"shadow-color":[{shadow:[xd]}],opacity:[{opacity:[S]}],"mix-blend":[{"mix-blend":[...oe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":oe()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[s]}],contrast:[{contrast:[f]}],"drop-shadow":[{"drop-shadow":["","none",hi,vt]}],grayscale:[{grayscale:[p]}],"hue-rotate":[{"hue-rotate":[x]}],invert:[{invert:[w]}],saturate:[{saturate:[_]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[f]}],"backdrop-grayscale":[{"backdrop-grayscale":[p]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[x]}],"backdrop-invert":[{"backdrop-invert":[w]}],"backdrop-opacity":[{"backdrop-opacity":[S]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[c]}],"border-spacing-x":[{"border-spacing-x":[c]}],"border-spacing-y":[{"border-spacing-y":[c]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",vt]}],duration:[{duration:ye()}],ease:[{ease:["linear","in","out","in-out",vt]}],delay:[{delay:ye()}],animate:[{animate:["none","spin","ping","pulse","bounce",vt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[gd,vt]}],"translate-x":[{"translate-x":[M]}],"translate-y":[{"translate-y":[M]}],"skew-x":[{"skew-x":[L]}],"skew-y":[{"skew-y":[L]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",vt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",vt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":U()}],"scroll-mx":[{"scroll-mx":U()}],"scroll-my":[{"scroll-my":U()}],"scroll-ms":[{"scroll-ms":U()}],"scroll-me":[{"scroll-me":U()}],"scroll-mt":[{"scroll-mt":U()}],"scroll-mr":[{"scroll-mr":U()}],"scroll-mb":[{"scroll-mb":U()}],"scroll-ml":[{"scroll-ml":U()}],"scroll-p":[{"scroll-p":U()}],"scroll-px":[{"scroll-px":U()}],"scroll-py":[{"scroll-py":U()}],"scroll-ps":[{"scroll-ps":U()}],"scroll-pe":[{"scroll-pe":U()}],"scroll-pt":[{"scroll-pt":U()}],"scroll-pr":[{"scroll-pr":U()}],"scroll-pb":[{"scroll-pb":U()}],"scroll-pl":[{"scroll-pl":U()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",vt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ma,ui,lg]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},C6=i6(j6);function Fe(...e){return C6(_j(e))}const E6=E8,Bj=v.forwardRef(({className:e,...t},r)=>n.jsx(pj,{ref:r,className:Fe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));Bj.displayName=pj.displayName;const S6=Iu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),zj=v.forwardRef(({className:e,variant:t,...r},s)=>n.jsx(gj,{ref:s,className:Fe(S6({variant:t}),e),...r}));zj.displayName=gj.displayName;const A6=v.forwardRef(({className:e,...t},r)=>n.jsx(wj,{ref:r,className:Fe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));A6.displayName=wj.displayName;const Uj=v.forwardRef(({className:e,...t},r)=>n.jsx(yj,{ref:r,className:Fe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:n.jsx(sr,{className:"h-4 w-4"})}));Uj.displayName=yj.displayName;const $j=v.forwardRef(({className:e,...t},r)=>n.jsx(xj,{ref:r,className:Fe("text-sm font-semibold",e),...t}));$j.displayName=xj.displayName;const Vj=v.forwardRef(({className:e,...t},r)=>n.jsx(vj,{ref:r,className:Fe("text-sm opacity-90",e),...t}));Vj.displayName=vj.displayName;function k6(){const{toasts:e}=KN();return n.jsxs(E6,{children:[e.map(function({id:t,title:r,description:s,action:a,...o}){return n.jsxs(zj,{...o,children:[n.jsxs("div",{className:"grid gap-1",children:[r&&n.jsx($j,{children:r}),s&&n.jsx(Vj,{children:s})]}),a,n.jsx(Uj,{})]},t)}),n.jsx(Bj,{})]})}var Cy=["light","dark"],T6="(prefers-color-scheme: dark)",I6=v.createContext(void 0),R6={setTheme:e=>{},themes:[]},P6=()=>{var e;return(e=v.useContext(I6))!=null?e:R6};v.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:s,enableColorScheme:a,defaultTheme:o,value:c,attrs:u,nonce:f})=>{let p=o==="system",x=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${u.map(N=>`'${N}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,w=a?Cy.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",b=(N,C=!1,T=!0)=>{let S=c?c[N]:N,E=C?N+"|| ''":`'${S}'`,_="";return a&&T&&!C&&Cy.includes(N)&&(_+=`d.style.colorScheme = '${N}';`),r==="class"?C||S?_+=`c.add(${E})`:_+="null":S&&(_+=`d[s](n,${E})`),_},j=e?`!function(){${x}${b(e)}}()`:s?`!function(){try{${x}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${p})){var t='${T6}',m=window.matchMedia(t);if(m.media!==t||m.matches){${b("dark")}}else{${b("light")}}}else if(e){${c?`var x=${JSON.stringify(c)};`:""}${b(c?"x[e]":"e",!0)}}${p?"":"else{"+b(o,!1,!1)+"}"}${w}}catch(e){}}()`:`!function(){try{${x}var e=localStorage.getItem('${t}');if(e){${c?`var x=${JSON.stringify(c)};`:""}${b(c?"x[e]":"e",!0)}}else{${b(o,!1,!1)};}${w}}catch(t){}}();`;return v.createElement("script",{nonce:f,dangerouslySetInnerHTML:{__html:j}})});var O6=e=>{switch(e){case"success":return L6;case"info":return B6;case"warning":return F6;case"error":return z6;default:return null}},D6=Array(12).fill(0),M6=({visible:e,className:t})=>Ue.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},Ue.createElement("div",{className:"sonner-spinner"},D6.map((r,s)=>Ue.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),L6=Ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ue.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),F6=Ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ue.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),B6=Ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ue.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),z6=Ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ue.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),U6=Ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ue.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ue.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),$6=()=>{let[e,t]=Ue.useState(document.hidden);return Ue.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},Dx=1,V6=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...s}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Dx++,o=this.toasts.find(u=>u.id===a),c=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),o?this.toasts=this.toasts.map(u=>u.id===a?(this.publish({...u,...e,id:a,title:r}),{...u,...e,id:a,dismissible:c,title:r}):u):this.addToast({title:r,...s,dismissible:c,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let s=e instanceof Promise?e:e(),a=r!==void 0,o,c=s.then(async f=>{if(o=["resolve",f],Ue.isValidElement(f))a=!1,this.create({id:r,type:"default",message:f});else if(W6(f)&&!f.ok){a=!1;let p=typeof t.error=="function"?await t.error(`HTTP error! status: ${f.status}`):t.error,x=typeof t.description=="function"?await t.description(`HTTP error! status: ${f.status}`):t.description;this.create({id:r,type:"error",message:p,description:x})}else if(t.success!==void 0){a=!1;let p=typeof t.success=="function"?await t.success(f):t.success,x=typeof t.description=="function"?await t.description(f):t.description;this.create({id:r,type:"success",message:p,description:x})}}).catch(async f=>{if(o=["reject",f],t.error!==void 0){a=!1;let p=typeof t.error=="function"?await t.error(f):t.error,x=typeof t.description=="function"?await t.description(f):t.description;this.create({id:r,type:"error",message:p,description:x})}}).finally(()=>{var f;a&&(this.dismiss(r),r=void 0),(f=t.finally)==null||f.call(t)}),u=()=>new Promise((f,p)=>c.then(()=>o[0]==="reject"?p(o[1]):f(o[1])).catch(p));return typeof r!="string"&&typeof r!="number"?{unwrap:u}:Object.assign(r,{unwrap:u})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||Dx++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Un=new V6,q6=(e,t)=>{let r=(t==null?void 0:t.id)||Dx++;return Un.addToast({title:e,...t,id:r}),r},W6=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",H6=q6,G6=()=>Un.toasts,X6=()=>Un.getActiveToasts(),G=Object.assign(H6,{success:Un.success,info:Un.info,warning:Un.warning,error:Un.error,custom:Un.custom,message:Un.message,promise:Un.promise,dismiss:Un.dismiss,loading:Un.loading},{getHistory:G6,getToasts:X6});function K6(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t==="top"&&r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}K6(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Eh(e){return e.label!==void 0}var Y6=3,Q6="32px",Z6="16px",Ey=4e3,J6=356,eP=14,tP=20,rP=200;function qs(...e){return e.filter(Boolean).join(" ")}function nP(e){let[t,r]=e.split("-"),s=[];return t&&s.push(t),r&&s.push(r),s}var sP=e=>{var t,r,s,a,o,c,u,f,p,x,w;let{invert:b,toast:j,unstyled:N,interacting:C,setHeights:T,visibleToasts:S,heights:E,index:_,toasts:k,expanded:D,removeToast:L,defaultRichColors:R,closeButton:M,style:P,cancelButtonStyle:F,actionButtonStyle:Y,className:U="",descriptionClassName:q="",duration:re,position:W,gap:ne,loadingIcon:oe,expandByDefault:ae,classNames:J,icons:he,closeButtonAriaLabel:ye="Close toast",pauseWhenPageIsHidden:H}=e,[ee,X]=Ue.useState(null),[te,se]=Ue.useState(null),[ce,ge]=Ue.useState(!1),[Te,be]=Ue.useState(!1),[Se,Me]=Ue.useState(!1),[ue,We]=Ue.useState(!1),[Ee,Je]=Ue.useState(!1),[_e,ze]=Ue.useState(0),[Ge,Vt]=Ue.useState(0),pe=Ue.useRef(j.duration||re||Ey),Ze=Ue.useRef(null),it=Ue.useRef(null),ot=_===0,ar=_+1<=S,Nt=j.type,Sr=j.dismissible!==!1,At=j.className||"",$e=j.descriptionClassName||"",Ae=Ue.useMemo(()=>E.findIndex(Xe=>Xe.toastId===j.id)||0,[E,j.id]),st=Ue.useMemo(()=>{var Xe;return(Xe=j.closeButton)!=null?Xe:M},[j.closeButton,M]),dt=Ue.useMemo(()=>j.duration||re||Ey,[j.duration,re]),ft=Ue.useRef(0),Ie=Ue.useRef(0),Dt=Ue.useRef(0),mt=Ue.useRef(null),[Pt,Pn]=W.split("-"),Us=Ue.useMemo(()=>E.reduce((Xe,Ot,xt)=>xt>=Ae?Xe:Xe+Ot.height,0),[E,Ae]),ho=$6(),kt=j.invert||b,mn=Nt==="loading";Ie.current=Ue.useMemo(()=>Ae*ne+Us,[Ae,Us]),Ue.useEffect(()=>{pe.current=dt},[dt]),Ue.useEffect(()=>{ge(!0)},[]),Ue.useEffect(()=>{let Xe=it.current;if(Xe){let Ot=Xe.getBoundingClientRect().height;return Vt(Ot),T(xt=>[{toastId:j.id,height:Ot,position:j.position},...xt]),()=>T(xt=>xt.filter(Gr=>Gr.toastId!==j.id))}},[T,j.id]),Ue.useLayoutEffect(()=>{if(!ce)return;let Xe=it.current,Ot=Xe.style.height;Xe.style.height="auto";let xt=Xe.getBoundingClientRect().height;Xe.style.height=Ot,Vt(xt),T(Gr=>Gr.find(pn=>pn.toastId===j.id)?Gr.map(pn=>pn.toastId===j.id?{...pn,height:xt}:pn):[{toastId:j.id,height:xt,position:j.position},...Gr])},[ce,j.title,j.description,T,j.id]);let Jn=Ue.useCallback(()=>{be(!0),ze(Ie.current),T(Xe=>Xe.filter(Ot=>Ot.toastId!==j.id)),setTimeout(()=>{L(j)},rP)},[j,L,T,Ie]);Ue.useEffect(()=>{if(j.promise&&Nt==="loading"||j.duration===1/0||j.type==="loading")return;let Xe;return D||C||H&&ho?(()=>{if(Dt.current<ft.current){let Ot=new Date().getTime()-ft.current;pe.current=pe.current-Ot}Dt.current=new Date().getTime()})():pe.current!==1/0&&(ft.current=new Date().getTime(),Xe=setTimeout(()=>{var Ot;(Ot=j.onAutoClose)==null||Ot.call(j,j),Jn()},pe.current)),()=>clearTimeout(Xe)},[D,C,j,Nt,H,ho,Jn]),Ue.useEffect(()=>{j.delete&&Jn()},[Jn,j.delete]);function fo(){var Xe,Ot,xt;return he!=null&&he.loading?Ue.createElement("div",{className:qs(J==null?void 0:J.loader,(Xe=j==null?void 0:j.classNames)==null?void 0:Xe.loader,"sonner-loader"),"data-visible":Nt==="loading"},he.loading):oe?Ue.createElement("div",{className:qs(J==null?void 0:J.loader,(Ot=j==null?void 0:j.classNames)==null?void 0:Ot.loader,"sonner-loader"),"data-visible":Nt==="loading"},oe):Ue.createElement(M6,{className:qs(J==null?void 0:J.loader,(xt=j==null?void 0:j.classNames)==null?void 0:xt.loader),visible:Nt==="loading"})}return Ue.createElement("li",{tabIndex:0,ref:it,className:qs(U,At,J==null?void 0:J.toast,(t=j==null?void 0:j.classNames)==null?void 0:t.toast,J==null?void 0:J.default,J==null?void 0:J[Nt],(r=j==null?void 0:j.classNames)==null?void 0:r[Nt]),"data-sonner-toast":"","data-rich-colors":(s=j.richColors)!=null?s:R,"data-styled":!(j.jsx||j.unstyled||N),"data-mounted":ce,"data-promise":!!j.promise,"data-swiped":Ee,"data-removed":Te,"data-visible":ar,"data-y-position":Pt,"data-x-position":Pn,"data-index":_,"data-front":ot,"data-swiping":Se,"data-dismissible":Sr,"data-type":Nt,"data-invert":kt,"data-swipe-out":ue,"data-swipe-direction":te,"data-expanded":!!(D||ae&&ce),style:{"--index":_,"--toasts-before":_,"--z-index":k.length-_,"--offset":`${Te?_e:Ie.current}px`,"--initial-height":ae?"auto":`${Ge}px`,...P,...j.style},onDragEnd:()=>{Me(!1),X(null),mt.current=null},onPointerDown:Xe=>{mn||!Sr||(Ze.current=new Date,ze(Ie.current),Xe.target.setPointerCapture(Xe.pointerId),Xe.target.tagName!=="BUTTON"&&(Me(!0),mt.current={x:Xe.clientX,y:Xe.clientY}))},onPointerUp:()=>{var Xe,Ot,xt,Gr;if(ue||!Sr)return;mt.current=null;let pn=Number(((Xe=it.current)==null?void 0:Xe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Lr=Number(((Ot=it.current)==null?void 0:Ot.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Da=new Date().getTime()-((xt=Ze.current)==null?void 0:xt.getTime()),Fr=ee==="x"?pn:Lr,vs=Math.abs(Fr)/Da;if(Math.abs(Fr)>=tP||vs>.11){ze(Ie.current),(Gr=j.onDismiss)==null||Gr.call(j,j),se(ee==="x"?pn>0?"right":"left":Lr>0?"down":"up"),Jn(),We(!0),Je(!1);return}Me(!1),X(null)},onPointerMove:Xe=>{var Ot,xt,Gr,pn;if(!mt.current||!Sr||((Ot=window.getSelection())==null?void 0:Ot.toString().length)>0)return;let Lr=Xe.clientY-mt.current.y,Da=Xe.clientX-mt.current.x,Fr=(xt=e.swipeDirections)!=null?xt:nP(W);!ee&&(Math.abs(Da)>1||Math.abs(Lr)>1)&&X(Math.abs(Da)>Math.abs(Lr)?"x":"y");let vs={x:0,y:0};ee==="y"?(Fr.includes("top")||Fr.includes("bottom"))&&(Fr.includes("top")&&Lr<0||Fr.includes("bottom")&&Lr>0)&&(vs.y=Lr):ee==="x"&&(Fr.includes("left")||Fr.includes("right"))&&(Fr.includes("left")&&Da<0||Fr.includes("right")&&Da>0)&&(vs.x=Da),(Math.abs(vs.x)>0||Math.abs(vs.y)>0)&&Je(!0),(Gr=it.current)==null||Gr.style.setProperty("--swipe-amount-x",`${vs.x}px`),(pn=it.current)==null||pn.style.setProperty("--swipe-amount-y",`${vs.y}px`)}},st&&!j.jsx?Ue.createElement("button",{"aria-label":ye,"data-disabled":mn,"data-close-button":!0,onClick:mn||!Sr?()=>{}:()=>{var Xe;Jn(),(Xe=j.onDismiss)==null||Xe.call(j,j)},className:qs(J==null?void 0:J.closeButton,(a=j==null?void 0:j.classNames)==null?void 0:a.closeButton)},(o=he==null?void 0:he.close)!=null?o:U6):null,j.jsx||v.isValidElement(j.title)?j.jsx?j.jsx:typeof j.title=="function"?j.title():j.title:Ue.createElement(Ue.Fragment,null,Nt||j.icon||j.promise?Ue.createElement("div",{"data-icon":"",className:qs(J==null?void 0:J.icon,(c=j==null?void 0:j.classNames)==null?void 0:c.icon)},j.promise||j.type==="loading"&&!j.icon?j.icon||fo():null,j.type!=="loading"?j.icon||(he==null?void 0:he[Nt])||O6(Nt):null):null,Ue.createElement("div",{"data-content":"",className:qs(J==null?void 0:J.content,(u=j==null?void 0:j.classNames)==null?void 0:u.content)},Ue.createElement("div",{"data-title":"",className:qs(J==null?void 0:J.title,(f=j==null?void 0:j.classNames)==null?void 0:f.title)},typeof j.title=="function"?j.title():j.title),j.description?Ue.createElement("div",{"data-description":"",className:qs(q,$e,J==null?void 0:J.description,(p=j==null?void 0:j.classNames)==null?void 0:p.description)},typeof j.description=="function"?j.description():j.description):null),v.isValidElement(j.cancel)?j.cancel:j.cancel&&Eh(j.cancel)?Ue.createElement("button",{"data-button":!0,"data-cancel":!0,style:j.cancelButtonStyle||F,onClick:Xe=>{var Ot,xt;Eh(j.cancel)&&Sr&&((xt=(Ot=j.cancel).onClick)==null||xt.call(Ot,Xe),Jn())},className:qs(J==null?void 0:J.cancelButton,(x=j==null?void 0:j.classNames)==null?void 0:x.cancelButton)},j.cancel.label):null,v.isValidElement(j.action)?j.action:j.action&&Eh(j.action)?Ue.createElement("button",{"data-button":!0,"data-action":!0,style:j.actionButtonStyle||Y,onClick:Xe=>{var Ot,xt;Eh(j.action)&&((xt=(Ot=j.action).onClick)==null||xt.call(Ot,Xe),!Xe.defaultPrevented&&Jn())},className:qs(J==null?void 0:J.actionButton,(w=j==null?void 0:j.classNames)==null?void 0:w.actionButton)},j.action.label):null))};function Sy(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function aP(e,t){let r={};return[e,t].forEach((s,a)=>{let o=a===1,c=o?"--mobile-offset":"--offset",u=o?Z6:Q6;function f(p){["top","right","bottom","left"].forEach(x=>{r[`${c}-${x}`]=typeof p=="number"?`${p}px`:p})}typeof s=="number"||typeof s=="string"?f(s):typeof s=="object"?["top","right","bottom","left"].forEach(p=>{s[p]===void 0?r[`${c}-${p}`]=u:r[`${c}-${p}`]=typeof s[p]=="number"?`${s[p]}px`:s[p]}):f(u)}),r}var iP=v.forwardRef(function(e,t){let{invert:r,position:s="bottom-right",hotkey:a=["altKey","KeyT"],expand:o,closeButton:c,className:u,offset:f,mobileOffset:p,theme:x="light",richColors:w,duration:b,style:j,visibleToasts:N=Y6,toastOptions:C,dir:T=Sy(),gap:S=eP,loadingIcon:E,icons:_,containerAriaLabel:k="Notifications",pauseWhenPageIsHidden:D}=e,[L,R]=Ue.useState([]),M=Ue.useMemo(()=>Array.from(new Set([s].concat(L.filter(H=>H.position).map(H=>H.position)))),[L,s]),[P,F]=Ue.useState([]),[Y,U]=Ue.useState(!1),[q,re]=Ue.useState(!1),[W,ne]=Ue.useState(x!=="system"?x:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),oe=Ue.useRef(null),ae=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),J=Ue.useRef(null),he=Ue.useRef(!1),ye=Ue.useCallback(H=>{R(ee=>{var X;return(X=ee.find(te=>te.id===H.id))!=null&&X.delete||Un.dismiss(H.id),ee.filter(({id:te})=>te!==H.id)})},[]);return Ue.useEffect(()=>Un.subscribe(H=>{if(H.dismiss){R(ee=>ee.map(X=>X.id===H.id?{...X,delete:!0}:X));return}setTimeout(()=>{GN.flushSync(()=>{R(ee=>{let X=ee.findIndex(te=>te.id===H.id);return X!==-1?[...ee.slice(0,X),{...ee[X],...H},...ee.slice(X+1)]:[H,...ee]})})})}),[]),Ue.useEffect(()=>{if(x!=="system"){ne(x);return}if(x==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ne("dark"):ne("light")),typeof window>"u")return;let H=window.matchMedia("(prefers-color-scheme: dark)");try{H.addEventListener("change",({matches:ee})=>{ne(ee?"dark":"light")})}catch{H.addListener(({matches:X})=>{try{ne(X?"dark":"light")}catch(te){console.error(te)}})}},[x]),Ue.useEffect(()=>{L.length<=1&&U(!1)},[L]),Ue.useEffect(()=>{let H=ee=>{var X,te;a.every(se=>ee[se]||ee.code===se)&&(U(!0),(X=oe.current)==null||X.focus()),ee.code==="Escape"&&(document.activeElement===oe.current||(te=oe.current)!=null&&te.contains(document.activeElement))&&U(!1)};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[a]),Ue.useEffect(()=>{if(oe.current)return()=>{J.current&&(J.current.focus({preventScroll:!0}),J.current=null,he.current=!1)}},[oe.current]),Ue.createElement("section",{ref:t,"aria-label":`${k} ${ae}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},M.map((H,ee)=>{var X;let[te,se]=H.split("-");return L.length?Ue.createElement("ol",{key:H,dir:T==="auto"?Sy():T,tabIndex:-1,ref:oe,className:u,"data-sonner-toaster":!0,"data-theme":W,"data-y-position":te,"data-lifted":Y&&L.length>1&&!o,"data-x-position":se,style:{"--front-toast-height":`${((X=P[0])==null?void 0:X.height)||0}px`,"--width":`${J6}px`,"--gap":`${S}px`,...j,...aP(f,p)},onBlur:ce=>{he.current&&!ce.currentTarget.contains(ce.relatedTarget)&&(he.current=!1,J.current&&(J.current.focus({preventScroll:!0}),J.current=null))},onFocus:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||he.current||(he.current=!0,J.current=ce.relatedTarget)},onMouseEnter:()=>U(!0),onMouseMove:()=>U(!0),onMouseLeave:()=>{q||U(!1)},onDragEnd:()=>U(!1),onPointerDown:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||re(!0)},onPointerUp:()=>re(!1)},L.filter(ce=>!ce.position&&ee===0||ce.position===H).map((ce,ge)=>{var Te,be;return Ue.createElement(sP,{key:ce.id,icons:_,index:ge,toast:ce,defaultRichColors:w,duration:(Te=C==null?void 0:C.duration)!=null?Te:b,className:C==null?void 0:C.className,descriptionClassName:C==null?void 0:C.descriptionClassName,invert:r,visibleToasts:N,closeButton:(be=C==null?void 0:C.closeButton)!=null?be:c,interacting:q,position:H,style:C==null?void 0:C.style,unstyled:C==null?void 0:C.unstyled,classNames:C==null?void 0:C.classNames,cancelButtonStyle:C==null?void 0:C.cancelButtonStyle,actionButtonStyle:C==null?void 0:C.actionButtonStyle,removeToast:ye,toasts:L.filter(Se=>Se.position==ce.position),heights:P.filter(Se=>Se.position==ce.position),setHeights:F,expandByDefault:o,gap:S,loadingIcon:E,expanded:Y,pauseWhenPageIsHidden:D,swipeDirections:e.swipeDirections})})):null}))});const oP=({...e})=>{const{theme:t="system"}=P6();return n.jsx(iP,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var lP=T0[" useId ".trim().toString()]||(()=>{}),cP=0;function hn(e){const[t,r]=v.useState(lP());return Rr(()=>{r(s=>s??String(cP++))},[e]),t?`radix-${t}`:""}const dP=["top","right","bottom","left"],Xi=Math.min,as=Math.max,Of=Math.round,Sh=Math.floor,Ta=e=>({x:e,y:e}),uP={left:"right",right:"left",bottom:"top",top:"bottom"},hP={start:"end",end:"start"};function Mx(e,t,r){return as(e,Xi(t,r))}function ei(e,t){return typeof e=="function"?e(t):e}function ti(e){return e.split("-")[0]}function qc(e){return e.split("-")[1]}function R1(e){return e==="x"?"y":"x"}function P1(e){return e==="y"?"height":"width"}const fP=new Set(["top","bottom"]);function Ea(e){return fP.has(ti(e))?"y":"x"}function O1(e){return R1(Ea(e))}function mP(e,t,r){r===void 0&&(r=!1);const s=qc(e),a=O1(e),o=P1(a);let c=a==="x"?s===(r?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(c=Df(c)),[c,Df(c)]}function pP(e){const t=Df(e);return[Lx(e),t,Lx(t)]}function Lx(e){return e.replace(/start|end/g,t=>hP[t])}const Ay=["left","right"],ky=["right","left"],gP=["top","bottom"],xP=["bottom","top"];function vP(e,t,r){switch(e){case"top":case"bottom":return r?t?ky:Ay:t?Ay:ky;case"left":case"right":return t?gP:xP;default:return[]}}function wP(e,t,r,s){const a=qc(e);let o=vP(ti(e),r==="start",s);return a&&(o=o.map(c=>c+"-"+a),t&&(o=o.concat(o.map(Lx)))),o}function Df(e){return e.replace(/left|right|bottom|top/g,t=>uP[t])}function yP(e){return{top:0,right:0,bottom:0,left:0,...e}}function qj(e){return typeof e!="number"?yP(e):{top:e,right:e,bottom:e,left:e}}function Mf(e){const{x:t,y:r,width:s,height:a}=e;return{width:s,height:a,top:r,left:t,right:t+s,bottom:r+a,x:t,y:r}}function Ty(e,t,r){let{reference:s,floating:a}=e;const o=Ea(t),c=O1(t),u=P1(c),f=ti(t),p=o==="y",x=s.x+s.width/2-a.width/2,w=s.y+s.height/2-a.height/2,b=s[u]/2-a[u]/2;let j;switch(f){case"top":j={x,y:s.y-a.height};break;case"bottom":j={x,y:s.y+s.height};break;case"right":j={x:s.x+s.width,y:w};break;case"left":j={x:s.x-a.width,y:w};break;default:j={x:s.x,y:s.y}}switch(qc(t)){case"start":j[c]-=b*(r&&p?-1:1);break;case"end":j[c]+=b*(r&&p?-1:1);break}return j}const bP=async(e,t,r)=>{const{placement:s="bottom",strategy:a="absolute",middleware:o=[],platform:c}=r,u=o.filter(Boolean),f=await(c.isRTL==null?void 0:c.isRTL(t));let p=await c.getElementRects({reference:e,floating:t,strategy:a}),{x,y:w}=Ty(p,s,f),b=s,j={},N=0;for(let C=0;C<u.length;C++){const{name:T,fn:S}=u[C],{x:E,y:_,data:k,reset:D}=await S({x,y:w,initialPlacement:s,placement:b,strategy:a,middlewareData:j,rects:p,platform:c,elements:{reference:e,floating:t}});x=E??x,w=_??w,j={...j,[T]:{...j[T],...k}},D&&N<=50&&(N++,typeof D=="object"&&(D.placement&&(b=D.placement),D.rects&&(p=D.rects===!0?await c.getElementRects({reference:e,floating:t,strategy:a}):D.rects),{x,y:w}=Ty(p,b,f)),C=-1)}return{x,y:w,placement:b,strategy:a,middlewareData:j}};async function lu(e,t){var r;t===void 0&&(t={});const{x:s,y:a,platform:o,rects:c,elements:u,strategy:f}=e,{boundary:p="clippingAncestors",rootBoundary:x="viewport",elementContext:w="floating",altBoundary:b=!1,padding:j=0}=ei(t,e),N=qj(j),T=u[b?w==="floating"?"reference":"floating":w],S=Mf(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(T)))==null||r?T:T.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:p,rootBoundary:x,strategy:f})),E=w==="floating"?{x:s,y:a,width:c.floating.width,height:c.floating.height}:c.reference,_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),k=await(o.isElement==null?void 0:o.isElement(_))?await(o.getScale==null?void 0:o.getScale(_))||{x:1,y:1}:{x:1,y:1},D=Mf(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:E,offsetParent:_,strategy:f}):E);return{top:(S.top-D.top+N.top)/k.y,bottom:(D.bottom-S.bottom+N.bottom)/k.y,left:(S.left-D.left+N.left)/k.x,right:(D.right-S.right+N.right)/k.x}}const _P=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:s,placement:a,rects:o,platform:c,elements:u,middlewareData:f}=t,{element:p,padding:x=0}=ei(e,t)||{};if(p==null)return{};const w=qj(x),b={x:r,y:s},j=O1(a),N=P1(j),C=await c.getDimensions(p),T=j==="y",S=T?"top":"left",E=T?"bottom":"right",_=T?"clientHeight":"clientWidth",k=o.reference[N]+o.reference[j]-b[j]-o.floating[N],D=b[j]-o.reference[j],L=await(c.getOffsetParent==null?void 0:c.getOffsetParent(p));let R=L?L[_]:0;(!R||!await(c.isElement==null?void 0:c.isElement(L)))&&(R=u.floating[_]||o.floating[N]);const M=k/2-D/2,P=R/2-C[N]/2-1,F=Xi(w[S],P),Y=Xi(w[E],P),U=F,q=R-C[N]-Y,re=R/2-C[N]/2+M,W=Mx(U,re,q),ne=!f.arrow&&qc(a)!=null&&re!==W&&o.reference[N]/2-(re<U?F:Y)-C[N]/2<0,oe=ne?re<U?re-U:re-q:0;return{[j]:b[j]+oe,data:{[j]:W,centerOffset:re-W-oe,...ne&&{alignmentOffset:oe}},reset:ne}}}),NP=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,s;const{placement:a,middlewareData:o,rects:c,initialPlacement:u,platform:f,elements:p}=t,{mainAxis:x=!0,crossAxis:w=!0,fallbackPlacements:b,fallbackStrategy:j="bestFit",fallbackAxisSideDirection:N="none",flipAlignment:C=!0,...T}=ei(e,t);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const S=ti(a),E=Ea(u),_=ti(u)===u,k=await(f.isRTL==null?void 0:f.isRTL(p.floating)),D=b||(_||!C?[Df(u)]:pP(u)),L=N!=="none";!b&&L&&D.push(...wP(u,C,N,k));const R=[u,...D],M=await lu(t,T),P=[];let F=((s=o.flip)==null?void 0:s.overflows)||[];if(x&&P.push(M[S]),w){const re=mP(a,c,k);P.push(M[re[0]],M[re[1]])}if(F=[...F,{placement:a,overflows:P}],!P.every(re=>re<=0)){var Y,U;const re=(((Y=o.flip)==null?void 0:Y.index)||0)+1,W=R[re];if(W&&(!(w==="alignment"?E!==Ea(W):!1)||F.every(ae=>Ea(ae.placement)===E?ae.overflows[0]>0:!0)))return{data:{index:re,overflows:F},reset:{placement:W}};let ne=(U=F.filter(oe=>oe.overflows[0]<=0).sort((oe,ae)=>oe.overflows[1]-ae.overflows[1])[0])==null?void 0:U.placement;if(!ne)switch(j){case"bestFit":{var q;const oe=(q=F.filter(ae=>{if(L){const J=Ea(ae.placement);return J===E||J==="y"}return!0}).map(ae=>[ae.placement,ae.overflows.filter(J=>J>0).reduce((J,he)=>J+he,0)]).sort((ae,J)=>ae[1]-J[1])[0])==null?void 0:q[0];oe&&(ne=oe);break}case"initialPlacement":ne=u;break}if(a!==ne)return{reset:{placement:ne}}}return{}}}};function Iy(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Ry(e){return dP.some(t=>e[t]>=0)}const jP=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:s="referenceHidden",...a}=ei(e,t);switch(s){case"referenceHidden":{const o=await lu(t,{...a,elementContext:"reference"}),c=Iy(o,r.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:Ry(c)}}}case"escaped":{const o=await lu(t,{...a,altBoundary:!0}),c=Iy(o,r.floating);return{data:{escapedOffsets:c,escaped:Ry(c)}}}default:return{}}}}},Wj=new Set(["left","top"]);async function CP(e,t){const{placement:r,platform:s,elements:a}=e,o=await(s.isRTL==null?void 0:s.isRTL(a.floating)),c=ti(r),u=qc(r),f=Ea(r)==="y",p=Wj.has(c)?-1:1,x=o&&f?-1:1,w=ei(t,e);let{mainAxis:b,crossAxis:j,alignmentAxis:N}=typeof w=="number"?{mainAxis:w,crossAxis:0,alignmentAxis:null}:{mainAxis:w.mainAxis||0,crossAxis:w.crossAxis||0,alignmentAxis:w.alignmentAxis};return u&&typeof N=="number"&&(j=u==="end"?N*-1:N),f?{x:j*x,y:b*p}:{x:b*p,y:j*x}}const EP=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,s;const{x:a,y:o,placement:c,middlewareData:u}=t,f=await CP(t,e);return c===((r=u.offset)==null?void 0:r.placement)&&(s=u.arrow)!=null&&s.alignmentOffset?{}:{x:a+f.x,y:o+f.y,data:{...f,placement:c}}}}},SP=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:s,placement:a}=t,{mainAxis:o=!0,crossAxis:c=!1,limiter:u={fn:T=>{let{x:S,y:E}=T;return{x:S,y:E}}},...f}=ei(e,t),p={x:r,y:s},x=await lu(t,f),w=Ea(ti(a)),b=R1(w);let j=p[b],N=p[w];if(o){const T=b==="y"?"top":"left",S=b==="y"?"bottom":"right",E=j+x[T],_=j-x[S];j=Mx(E,j,_)}if(c){const T=w==="y"?"top":"left",S=w==="y"?"bottom":"right",E=N+x[T],_=N-x[S];N=Mx(E,N,_)}const C=u.fn({...t,[b]:j,[w]:N});return{...C,data:{x:C.x-r,y:C.y-s,enabled:{[b]:o,[w]:c}}}}}},AP=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:s,placement:a,rects:o,middlewareData:c}=t,{offset:u=0,mainAxis:f=!0,crossAxis:p=!0}=ei(e,t),x={x:r,y:s},w=Ea(a),b=R1(w);let j=x[b],N=x[w];const C=ei(u,t),T=typeof C=="number"?{mainAxis:C,crossAxis:0}:{mainAxis:0,crossAxis:0,...C};if(f){const _=b==="y"?"height":"width",k=o.reference[b]-o.floating[_]+T.mainAxis,D=o.reference[b]+o.reference[_]-T.mainAxis;j<k?j=k:j>D&&(j=D)}if(p){var S,E;const _=b==="y"?"width":"height",k=Wj.has(ti(a)),D=o.reference[w]-o.floating[_]+(k&&((S=c.offset)==null?void 0:S[w])||0)+(k?0:T.crossAxis),L=o.reference[w]+o.reference[_]+(k?0:((E=c.offset)==null?void 0:E[w])||0)-(k?T.crossAxis:0);N<D?N=D:N>L&&(N=L)}return{[b]:j,[w]:N}}}},kP=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,s;const{placement:a,rects:o,platform:c,elements:u}=t,{apply:f=()=>{},...p}=ei(e,t),x=await lu(t,p),w=ti(a),b=qc(a),j=Ea(a)==="y",{width:N,height:C}=o.floating;let T,S;w==="top"||w==="bottom"?(T=w,S=b===(await(c.isRTL==null?void 0:c.isRTL(u.floating))?"start":"end")?"left":"right"):(S=w,T=b==="end"?"top":"bottom");const E=C-x.top-x.bottom,_=N-x.left-x.right,k=Xi(C-x[T],E),D=Xi(N-x[S],_),L=!t.middlewareData.shift;let R=k,M=D;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(M=_),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(R=E),L&&!b){const F=as(x.left,0),Y=as(x.right,0),U=as(x.top,0),q=as(x.bottom,0);j?M=N-2*(F!==0||Y!==0?F+Y:as(x.left,x.right)):R=C-2*(U!==0||q!==0?U+q:as(x.top,x.bottom))}await f({...t,availableWidth:M,availableHeight:R});const P=await c.getDimensions(u.floating);return N!==P.width||C!==P.height?{reset:{rects:!0}}:{}}}};function bm(){return typeof window<"u"}function Wc(e){return Hj(e)?(e.nodeName||"").toLowerCase():"#document"}function hs(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ra(e){var t;return(t=(Hj(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Hj(e){return bm()?e instanceof Node||e instanceof hs(e).Node:!1}function ia(e){return bm()?e instanceof Element||e instanceof hs(e).Element:!1}function Ia(e){return bm()?e instanceof HTMLElement||e instanceof hs(e).HTMLElement:!1}function Py(e){return!bm()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof hs(e).ShadowRoot}const TP=new Set(["inline","contents"]);function Ou(e){const{overflow:t,overflowX:r,overflowY:s,display:a}=oa(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+r)&&!TP.has(a)}const IP=new Set(["table","td","th"]);function RP(e){return IP.has(Wc(e))}const PP=[":popover-open",":modal"];function _m(e){return PP.some(t=>{try{return e.matches(t)}catch{return!1}})}const OP=["transform","translate","scale","rotate","perspective"],DP=["transform","translate","scale","rotate","perspective","filter"],MP=["paint","layout","strict","content"];function D1(e){const t=M1(),r=ia(e)?oa(e):e;return OP.some(s=>r[s]?r[s]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||DP.some(s=>(r.willChange||"").includes(s))||MP.some(s=>(r.contain||"").includes(s))}function LP(e){let t=Ki(e);for(;Ia(t)&&!kc(t);){if(D1(t))return t;if(_m(t))return null;t=Ki(t)}return null}function M1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const FP=new Set(["html","body","#document"]);function kc(e){return FP.has(Wc(e))}function oa(e){return hs(e).getComputedStyle(e)}function Nm(e){return ia(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ki(e){if(Wc(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Py(e)&&e.host||Ra(e);return Py(t)?t.host:t}function Gj(e){const t=Ki(e);return kc(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ia(t)&&Ou(t)?t:Gj(t)}function cu(e,t,r){var s;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=Gj(e),o=a===((s=e.ownerDocument)==null?void 0:s.body),c=hs(a);if(o){const u=Fx(c);return t.concat(c,c.visualViewport||[],Ou(a)?a:[],u&&r?cu(u):[])}return t.concat(a,cu(a,[],r))}function Fx(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Xj(e){const t=oa(e);let r=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const a=Ia(e),o=a?e.offsetWidth:r,c=a?e.offsetHeight:s,u=Of(r)!==o||Of(s)!==c;return u&&(r=o,s=c),{width:r,height:s,$:u}}function L1(e){return ia(e)?e:e.contextElement}function oc(e){const t=L1(e);if(!Ia(t))return Ta(1);const r=t.getBoundingClientRect(),{width:s,height:a,$:o}=Xj(t);let c=(o?Of(r.width):r.width)/s,u=(o?Of(r.height):r.height)/a;return(!c||!Number.isFinite(c))&&(c=1),(!u||!Number.isFinite(u))&&(u=1),{x:c,y:u}}const BP=Ta(0);function Kj(e){const t=hs(e);return!M1()||!t.visualViewport?BP:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function zP(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==hs(e)?!1:t}function Qo(e,t,r,s){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),o=L1(e);let c=Ta(1);t&&(s?ia(s)&&(c=oc(s)):c=oc(e));const u=zP(o,r,s)?Kj(o):Ta(0);let f=(a.left+u.x)/c.x,p=(a.top+u.y)/c.y,x=a.width/c.x,w=a.height/c.y;if(o){const b=hs(o),j=s&&ia(s)?hs(s):s;let N=b,C=Fx(N);for(;C&&s&&j!==N;){const T=oc(C),S=C.getBoundingClientRect(),E=oa(C),_=S.left+(C.clientLeft+parseFloat(E.paddingLeft))*T.x,k=S.top+(C.clientTop+parseFloat(E.paddingTop))*T.y;f*=T.x,p*=T.y,x*=T.x,w*=T.y,f+=_,p+=k,N=hs(C),C=Fx(N)}}return Mf({width:x,height:w,x:f,y:p})}function jm(e,t){const r=Nm(e).scrollLeft;return t?t.left+r:Qo(Ra(e)).left+r}function Yj(e,t){const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-jm(e,r),a=r.top+t.scrollTop;return{x:s,y:a}}function UP(e){let{elements:t,rect:r,offsetParent:s,strategy:a}=e;const o=a==="fixed",c=Ra(s),u=t?_m(t.floating):!1;if(s===c||u&&o)return r;let f={scrollLeft:0,scrollTop:0},p=Ta(1);const x=Ta(0),w=Ia(s);if((w||!w&&!o)&&((Wc(s)!=="body"||Ou(c))&&(f=Nm(s)),Ia(s))){const j=Qo(s);p=oc(s),x.x=j.x+s.clientLeft,x.y=j.y+s.clientTop}const b=c&&!w&&!o?Yj(c,f):Ta(0);return{width:r.width*p.x,height:r.height*p.y,x:r.x*p.x-f.scrollLeft*p.x+x.x+b.x,y:r.y*p.y-f.scrollTop*p.y+x.y+b.y}}function $P(e){return Array.from(e.getClientRects())}function VP(e){const t=Ra(e),r=Nm(e),s=e.ownerDocument.body,a=as(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),o=as(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let c=-r.scrollLeft+jm(e);const u=-r.scrollTop;return oa(s).direction==="rtl"&&(c+=as(t.clientWidth,s.clientWidth)-a),{width:a,height:o,x:c,y:u}}const Oy=25;function qP(e,t){const r=hs(e),s=Ra(e),a=r.visualViewport;let o=s.clientWidth,c=s.clientHeight,u=0,f=0;if(a){o=a.width,c=a.height;const x=M1();(!x||x&&t==="fixed")&&(u=a.offsetLeft,f=a.offsetTop)}const p=jm(s);if(p<=0){const x=s.ownerDocument,w=x.body,b=getComputedStyle(w),j=x.compatMode==="CSS1Compat"&&parseFloat(b.marginLeft)+parseFloat(b.marginRight)||0,N=Math.abs(s.clientWidth-w.clientWidth-j);N<=Oy&&(o-=N)}else p<=Oy&&(o+=p);return{width:o,height:c,x:u,y:f}}const WP=new Set(["absolute","fixed"]);function HP(e,t){const r=Qo(e,!0,t==="fixed"),s=r.top+e.clientTop,a=r.left+e.clientLeft,o=Ia(e)?oc(e):Ta(1),c=e.clientWidth*o.x,u=e.clientHeight*o.y,f=a*o.x,p=s*o.y;return{width:c,height:u,x:f,y:p}}function Dy(e,t,r){let s;if(t==="viewport")s=qP(e,r);else if(t==="document")s=VP(Ra(e));else if(ia(t))s=HP(t,r);else{const a=Kj(e);s={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Mf(s)}function Qj(e,t){const r=Ki(e);return r===t||!ia(r)||kc(r)?!1:oa(r).position==="fixed"||Qj(r,t)}function GP(e,t){const r=t.get(e);if(r)return r;let s=cu(e,[],!1).filter(u=>ia(u)&&Wc(u)!=="body"),a=null;const o=oa(e).position==="fixed";let c=o?Ki(e):e;for(;ia(c)&&!kc(c);){const u=oa(c),f=D1(c);!f&&u.position==="fixed"&&(a=null),(o?!f&&!a:!f&&u.position==="static"&&!!a&&WP.has(a.position)||Ou(c)&&!f&&Qj(e,c))?s=s.filter(x=>x!==c):a=u,c=Ki(c)}return t.set(e,s),s}function XP(e){let{element:t,boundary:r,rootBoundary:s,strategy:a}=e;const c=[...r==="clippingAncestors"?_m(t)?[]:GP(t,this._c):[].concat(r),s],u=c[0],f=c.reduce((p,x)=>{const w=Dy(t,x,a);return p.top=as(w.top,p.top),p.right=Xi(w.right,p.right),p.bottom=Xi(w.bottom,p.bottom),p.left=as(w.left,p.left),p},Dy(t,u,a));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function KP(e){const{width:t,height:r}=Xj(e);return{width:t,height:r}}function YP(e,t,r){const s=Ia(t),a=Ra(t),o=r==="fixed",c=Qo(e,!0,o,t);let u={scrollLeft:0,scrollTop:0};const f=Ta(0);function p(){f.x=jm(a)}if(s||!s&&!o)if((Wc(t)!=="body"||Ou(a))&&(u=Nm(t)),s){const j=Qo(t,!0,o,t);f.x=j.x+t.clientLeft,f.y=j.y+t.clientTop}else a&&p();o&&!s&&a&&p();const x=a&&!s&&!o?Yj(a,u):Ta(0),w=c.left+u.scrollLeft-f.x-x.x,b=c.top+u.scrollTop-f.y-x.y;return{x:w,y:b,width:c.width,height:c.height}}function cg(e){return oa(e).position==="static"}function My(e,t){if(!Ia(e)||oa(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Ra(e)===r&&(r=r.ownerDocument.body),r}function Zj(e,t){const r=hs(e);if(_m(e))return r;if(!Ia(e)){let a=Ki(e);for(;a&&!kc(a);){if(ia(a)&&!cg(a))return a;a=Ki(a)}return r}let s=My(e,t);for(;s&&RP(s)&&cg(s);)s=My(s,t);return s&&kc(s)&&cg(s)&&!D1(s)?r:s||LP(e)||r}const QP=async function(e){const t=this.getOffsetParent||Zj,r=this.getDimensions,s=await r(e.floating);return{reference:YP(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function ZP(e){return oa(e).direction==="rtl"}const JP={convertOffsetParentRelativeRectToViewportRelativeRect:UP,getDocumentElement:Ra,getClippingRect:XP,getOffsetParent:Zj,getElementRects:QP,getClientRects:$P,getDimensions:KP,getScale:oc,isElement:ia,isRTL:ZP};function Jj(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function e5(e,t){let r=null,s;const a=Ra(e);function o(){var u;clearTimeout(s),(u=r)==null||u.disconnect(),r=null}function c(u,f){u===void 0&&(u=!1),f===void 0&&(f=1),o();const p=e.getBoundingClientRect(),{left:x,top:w,width:b,height:j}=p;if(u||t(),!b||!j)return;const N=Sh(w),C=Sh(a.clientWidth-(x+b)),T=Sh(a.clientHeight-(w+j)),S=Sh(x),_={rootMargin:-N+"px "+-C+"px "+-T+"px "+-S+"px",threshold:as(0,Xi(1,f))||1};let k=!0;function D(L){const R=L[0].intersectionRatio;if(R!==f){if(!k)return c();R?c(!1,R):s=setTimeout(()=>{c(!1,1e-7)},1e3)}R===1&&!Jj(p,e.getBoundingClientRect())&&c(),k=!1}try{r=new IntersectionObserver(D,{..._,root:a.ownerDocument})}catch{r=new IntersectionObserver(D,_)}r.observe(e)}return c(!0),o}function t5(e,t,r,s){s===void 0&&(s={});const{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:f=!1}=s,p=L1(e),x=a||o?[...p?cu(p):[],...cu(t)]:[];x.forEach(S=>{a&&S.addEventListener("scroll",r,{passive:!0}),o&&S.addEventListener("resize",r)});const w=p&&u?e5(p,r):null;let b=-1,j=null;c&&(j=new ResizeObserver(S=>{let[E]=S;E&&E.target===p&&j&&(j.unobserve(t),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var _;(_=j)==null||_.observe(t)})),r()}),p&&!f&&j.observe(p),j.observe(t));let N,C=f?Qo(e):null;f&&T();function T(){const S=Qo(e);C&&!Jj(C,S)&&r(),C=S,N=requestAnimationFrame(T)}return r(),()=>{var S;x.forEach(E=>{a&&E.removeEventListener("scroll",r),o&&E.removeEventListener("resize",r)}),w==null||w(),(S=j)==null||S.disconnect(),j=null,f&&cancelAnimationFrame(N)}}const r5=EP,n5=SP,s5=NP,a5=kP,i5=jP,Ly=_P,o5=AP,l5=(e,t,r)=>{const s=new Map,a={platform:JP,...r},o={...a.platform,_c:s};return bP(e,t,{...a,platform:o})};var c5=typeof document<"u",d5=function(){},rf=c5?v.useLayoutEffect:d5;function Lf(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,s,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(s=r;s--!==0;)if(!Lf(e[s],t[s]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(s=r;s--!==0;)if(!{}.hasOwnProperty.call(t,a[s]))return!1;for(s=r;s--!==0;){const o=a[s];if(!(o==="_owner"&&e.$$typeof)&&!Lf(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function eC(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Fy(e,t){const r=eC(e);return Math.round(t*r)/r}function dg(e){const t=v.useRef(e);return rf(()=>{t.current=e}),t}function u5(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:s=[],platform:a,elements:{reference:o,floating:c}={},transform:u=!0,whileElementsMounted:f,open:p}=e,[x,w]=v.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[b,j]=v.useState(s);Lf(b,s)||j(s);const[N,C]=v.useState(null),[T,S]=v.useState(null),E=v.useCallback(ae=>{ae!==L.current&&(L.current=ae,C(ae))},[]),_=v.useCallback(ae=>{ae!==R.current&&(R.current=ae,S(ae))},[]),k=o||N,D=c||T,L=v.useRef(null),R=v.useRef(null),M=v.useRef(x),P=f!=null,F=dg(f),Y=dg(a),U=dg(p),q=v.useCallback(()=>{if(!L.current||!R.current)return;const ae={placement:t,strategy:r,middleware:b};Y.current&&(ae.platform=Y.current),l5(L.current,R.current,ae).then(J=>{const he={...J,isPositioned:U.current!==!1};re.current&&!Lf(M.current,he)&&(M.current=he,dl.flushSync(()=>{w(he)}))})},[b,t,r,Y,U]);rf(()=>{p===!1&&M.current.isPositioned&&(M.current.isPositioned=!1,w(ae=>({...ae,isPositioned:!1})))},[p]);const re=v.useRef(!1);rf(()=>(re.current=!0,()=>{re.current=!1}),[]),rf(()=>{if(k&&(L.current=k),D&&(R.current=D),k&&D){if(F.current)return F.current(k,D,q);q()}},[k,D,q,F,P]);const W=v.useMemo(()=>({reference:L,floating:R,setReference:E,setFloating:_}),[E,_]),ne=v.useMemo(()=>({reference:k,floating:D}),[k,D]),oe=v.useMemo(()=>{const ae={position:r,left:0,top:0};if(!ne.floating)return ae;const J=Fy(ne.floating,x.x),he=Fy(ne.floating,x.y);return u?{...ae,transform:"translate("+J+"px, "+he+"px)",...eC(ne.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:J,top:he}},[r,u,ne.floating,x.x,x.y]);return v.useMemo(()=>({...x,update:q,refs:W,elements:ne,floatingStyles:oe}),[x,q,W,ne,oe])}const h5=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:s,padding:a}=typeof e=="function"?e(r):e;return s&&t(s)?s.current!=null?Ly({element:s.current,padding:a}).fn(r):{}:s?Ly({element:s,padding:a}).fn(r):{}}}},f5=(e,t)=>({...r5(e),options:[e,t]}),m5=(e,t)=>({...n5(e),options:[e,t]}),p5=(e,t)=>({...o5(e),options:[e,t]}),g5=(e,t)=>({...s5(e),options:[e,t]}),x5=(e,t)=>({...a5(e),options:[e,t]}),v5=(e,t)=>({...i5(e),options:[e,t]}),w5=(e,t)=>({...h5(e),options:[e,t]});var y5="Arrow",tC=v.forwardRef((e,t)=>{const{children:r,width:s=10,height:a=5,...o}=e;return n.jsx(Ve.svg,{...o,ref:t,width:s,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:n.jsx("polygon",{points:"0,0 30,0 15,10"})})});tC.displayName=y5;var b5=tC;function Du(e){const[t,r]=v.useState(void 0);return Rr(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const o=a[0];let c,u;if("borderBoxSize"in o){const f=o.borderBoxSize,p=Array.isArray(f)?f[0]:f;c=p.inlineSize,u=p.blockSize}else c=e.offsetWidth,u=e.offsetHeight;r({width:c,height:u})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else r(void 0)},[e]),t}var F1="Popper",[rC,ao]=Mr(F1),[_5,nC]=rC(F1),sC=e=>{const{__scopePopper:t,children:r}=e,[s,a]=v.useState(null);return n.jsx(_5,{scope:t,anchor:s,onAnchorChange:a,children:r})};sC.displayName=F1;var aC="PopperAnchor",iC=v.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:s,...a}=e,o=nC(aC,r),c=v.useRef(null),u=tt(t,c),f=v.useRef(null);return v.useEffect(()=>{const p=f.current;f.current=(s==null?void 0:s.current)||c.current,p!==f.current&&o.onAnchorChange(f.current)}),s?null:n.jsx(Ve.div,{...a,ref:u})});iC.displayName=aC;var B1="PopperContent",[N5,j5]=rC(B1),oC=v.forwardRef((e,t)=>{var ce,ge,Te,be,Se,Me;const{__scopePopper:r,side:s="bottom",sideOffset:a=0,align:o="center",alignOffset:c=0,arrowPadding:u=0,avoidCollisions:f=!0,collisionBoundary:p=[],collisionPadding:x=0,sticky:w="partial",hideWhenDetached:b=!1,updatePositionStrategy:j="optimized",onPlaced:N,...C}=e,T=nC(B1,r),[S,E]=v.useState(null),_=tt(t,ue=>E(ue)),[k,D]=v.useState(null),L=Du(k),R=(L==null?void 0:L.width)??0,M=(L==null?void 0:L.height)??0,P=s+(o!=="center"?"-"+o:""),F=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},Y=Array.isArray(p)?p:[p],U=Y.length>0,q={padding:F,boundary:Y.filter(E5),altBoundary:U},{refs:re,floatingStyles:W,placement:ne,isPositioned:oe,middlewareData:ae}=u5({strategy:"fixed",placement:P,whileElementsMounted:(...ue)=>t5(...ue,{animationFrame:j==="always"}),elements:{reference:T.anchor},middleware:[f5({mainAxis:a+M,alignmentAxis:c}),f&&m5({mainAxis:!0,crossAxis:!1,limiter:w==="partial"?p5():void 0,...q}),f&&g5({...q}),x5({...q,apply:({elements:ue,rects:We,availableWidth:Ee,availableHeight:Je})=>{const{width:_e,height:ze}=We.reference,Ge=ue.floating.style;Ge.setProperty("--radix-popper-available-width",`${Ee}px`),Ge.setProperty("--radix-popper-available-height",`${Je}px`),Ge.setProperty("--radix-popper-anchor-width",`${_e}px`),Ge.setProperty("--radix-popper-anchor-height",`${ze}px`)}}),k&&w5({element:k,padding:u}),S5({arrowWidth:R,arrowHeight:M}),b&&v5({strategy:"referenceHidden",...q})]}),[J,he]=dC(ne),ye=Er(N);Rr(()=>{oe&&(ye==null||ye())},[oe,ye]);const H=(ce=ae.arrow)==null?void 0:ce.x,ee=(ge=ae.arrow)==null?void 0:ge.y,X=((Te=ae.arrow)==null?void 0:Te.centerOffset)!==0,[te,se]=v.useState();return Rr(()=>{S&&se(window.getComputedStyle(S).zIndex)},[S]),n.jsx("div",{ref:re.setFloating,"data-radix-popper-content-wrapper":"",style:{...W,transform:oe?W.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:te,"--radix-popper-transform-origin":[(be=ae.transformOrigin)==null?void 0:be.x,(Se=ae.transformOrigin)==null?void 0:Se.y].join(" "),...((Me=ae.hide)==null?void 0:Me.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:n.jsx(N5,{scope:r,placedSide:J,onArrowChange:D,arrowX:H,arrowY:ee,shouldHideArrow:X,children:n.jsx(Ve.div,{"data-side":J,"data-align":he,...C,ref:_,style:{...C.style,animation:oe?void 0:"none"}})})})});oC.displayName=B1;var lC="PopperArrow",C5={top:"bottom",right:"left",bottom:"top",left:"right"},cC=v.forwardRef(function(t,r){const{__scopePopper:s,...a}=t,o=j5(lC,s),c=C5[o.placedSide];return n.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:n.jsx(b5,{...a,ref:r,style:{...a.style,display:"block"}})})});cC.displayName=lC;function E5(e){return e!==null}var S5=e=>({name:"transformOrigin",options:e,fn(t){var T,S,E;const{placement:r,rects:s,middlewareData:a}=t,c=((T=a.arrow)==null?void 0:T.centerOffset)!==0,u=c?0:e.arrowWidth,f=c?0:e.arrowHeight,[p,x]=dC(r),w={start:"0%",center:"50%",end:"100%"}[x],b=(((S=a.arrow)==null?void 0:S.x)??0)+u/2,j=(((E=a.arrow)==null?void 0:E.y)??0)+f/2;let N="",C="";return p==="bottom"?(N=c?w:`${b}px`,C=`${-f}px`):p==="top"?(N=c?w:`${b}px`,C=`${s.floating.height+f}px`):p==="right"?(N=`${-f}px`,C=c?w:`${j}px`):p==="left"&&(N=`${s.floating.width+f}px`,C=c?w:`${j}px`),{data:{x:N,y:C}}}});function dC(e){const[t,r="center"]=e.split("-");return[t,r]}var z1=sC,Mu=iC,Cm=oC,Em=cC,[Sm]=Mr("Tooltip",[ao]),U1=ao(),uC="TooltipProvider",A5=700,By="tooltip.open",[k5,hC]=Sm(uC),fC=e=>{const{__scopeTooltip:t,delayDuration:r=A5,skipDelayDuration:s=300,disableHoverableContent:a=!1,children:o}=e,c=v.useRef(!0),u=v.useRef(!1),f=v.useRef(0);return v.useEffect(()=>{const p=f.current;return()=>window.clearTimeout(p)},[]),n.jsx(k5,{scope:t,isOpenDelayedRef:c,delayDuration:r,onOpen:v.useCallback(()=>{window.clearTimeout(f.current),c.current=!1},[]),onClose:v.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>c.current=!0,s)},[s]),isPointerInTransitRef:u,onPointerInTransitChange:v.useCallback(p=>{u.current=p},[]),disableHoverableContent:a,children:o})};fC.displayName=uC;var mC="Tooltip",[$W,Am]=Sm(mC),Bx="TooltipTrigger",T5=v.forwardRef((e,t)=>{const{__scopeTooltip:r,...s}=e,a=Am(Bx,r),o=hC(Bx,r),c=U1(r),u=v.useRef(null),f=tt(t,u,a.onTriggerChange),p=v.useRef(!1),x=v.useRef(!1),w=v.useCallback(()=>p.current=!1,[]);return v.useEffect(()=>()=>document.removeEventListener("pointerup",w),[w]),n.jsx(Mu,{asChild:!0,...c,children:n.jsx(Ve.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...s,ref:f,onPointerMove:Re(e.onPointerMove,b=>{b.pointerType!=="touch"&&!x.current&&!o.isPointerInTransitRef.current&&(a.onTriggerEnter(),x.current=!0)}),onPointerLeave:Re(e.onPointerLeave,()=>{a.onTriggerLeave(),x.current=!1}),onPointerDown:Re(e.onPointerDown,()=>{a.open&&a.onClose(),p.current=!0,document.addEventListener("pointerup",w,{once:!0})}),onFocus:Re(e.onFocus,()=>{p.current||a.onOpen()}),onBlur:Re(e.onBlur,a.onClose),onClick:Re(e.onClick,a.onClose)})})});T5.displayName=Bx;var I5="TooltipPortal",[VW,R5]=Sm(I5,{forceMount:void 0}),Tc="TooltipContent",pC=v.forwardRef((e,t)=>{const r=R5(Tc,e.__scopeTooltip),{forceMount:s=r.forceMount,side:a="top",...o}=e,c=Am(Tc,e.__scopeTooltip);return n.jsx(Hr,{present:s||c.open,children:c.disableHoverableContent?n.jsx(gC,{side:a,...o,ref:t}):n.jsx(P5,{side:a,...o,ref:t})})}),P5=v.forwardRef((e,t)=>{const r=Am(Tc,e.__scopeTooltip),s=hC(Tc,e.__scopeTooltip),a=v.useRef(null),o=tt(t,a),[c,u]=v.useState(null),{trigger:f,onClose:p}=r,x=a.current,{onPointerInTransitChange:w}=s,b=v.useCallback(()=>{u(null),w(!1)},[w]),j=v.useCallback((N,C)=>{const T=N.currentTarget,S={x:N.clientX,y:N.clientY},E=F5(S,T.getBoundingClientRect()),_=B5(S,E),k=z5(C.getBoundingClientRect()),D=$5([..._,...k]);u(D),w(!0)},[w]);return v.useEffect(()=>()=>b(),[b]),v.useEffect(()=>{if(f&&x){const N=T=>j(T,x),C=T=>j(T,f);return f.addEventListener("pointerleave",N),x.addEventListener("pointerleave",C),()=>{f.removeEventListener("pointerleave",N),x.removeEventListener("pointerleave",C)}}},[f,x,j,b]),v.useEffect(()=>{if(c){const N=C=>{const T=C.target,S={x:C.clientX,y:C.clientY},E=(f==null?void 0:f.contains(T))||(x==null?void 0:x.contains(T)),_=!U5(S,c);E?b():_&&(b(),p())};return document.addEventListener("pointermove",N),()=>document.removeEventListener("pointermove",N)}},[f,x,c,p,b]),n.jsx(gC,{...e,ref:o})}),[O5,D5]=Sm(mC,{isInside:!1}),M5=QN("TooltipContent"),gC=v.forwardRef((e,t)=>{const{__scopeTooltip:r,children:s,"aria-label":a,onEscapeKeyDown:o,onPointerDownOutside:c,...u}=e,f=Am(Tc,r),p=U1(r),{onClose:x}=f;return v.useEffect(()=>(document.addEventListener(By,x),()=>document.removeEventListener(By,x)),[x]),v.useEffect(()=>{if(f.trigger){const w=b=>{const j=b.target;j!=null&&j.contains(f.trigger)&&x()};return window.addEventListener("scroll",w,{capture:!0}),()=>window.removeEventListener("scroll",w,{capture:!0})}},[f.trigger,x]),n.jsx(ul,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:w=>w.preventDefault(),onDismiss:x,children:n.jsxs(Cm,{"data-state":f.stateAttribute,...p,...u,ref:t,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[n.jsx(M5,{children:s}),n.jsx(O5,{scope:r,isInside:!0,children:n.jsx(l8,{id:f.contentId,role:"tooltip",children:a||s})})]})})});pC.displayName=Tc;var xC="TooltipArrow",L5=v.forwardRef((e,t)=>{const{__scopeTooltip:r,...s}=e,a=U1(r);return D5(xC,r).isInside?null:n.jsx(Em,{...a,...s,ref:t})});L5.displayName=xC;function F5(e,t){const r=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(r,s,a,o)){case o:return"left";case a:return"right";case r:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function B5(e,t,r=5){const s=[];switch(t){case"top":s.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":s.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":s.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":s.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return s}function z5(e){const{top:t,right:r,bottom:s,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:s},{x:a,y:s}]}function U5(e,t){const{x:r,y:s}=e;let a=!1;for(let o=0,c=t.length-1;o<t.length;c=o++){const u=t[o],f=t[c],p=u.x,x=u.y,w=f.x,b=f.y;x>s!=b>s&&r<(w-p)*(s-x)/(b-x)+p&&(a=!a)}return a}function $5(e){const t=e.slice();return t.sort((r,s)=>r.x<s.x?-1:r.x>s.x?1:r.y<s.y?-1:r.y>s.y?1:0),V5(t)}function V5(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const a=e[s];for(;t.length>=2;){const o=t[t.length-1],c=t[t.length-2];if((o.x-c.x)*(a.y-c.y)>=(o.y-c.y)*(a.x-c.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let s=e.length-1;s>=0;s--){const a=e[s];for(;r.length>=2;){const o=r[r.length-1],c=r[r.length-2];if((o.x-c.x)*(a.y-c.y)>=(o.y-c.y)*(a.x-c.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var q5=fC,vC=pC;const W5=q5,H5=v.forwardRef(({className:e,sideOffset:t=4,...r},s)=>n.jsx(vC,{ref:s,sideOffset:t,className:Fe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));H5.displayName=vC.displayName;var km=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},G5={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},ji,j0,C2,X5=(C2=class{constructor(){It(this,ji,G5);It(this,j0,!1)}setTimeoutProvider(e){ut(this,ji,e)}setTimeout(e,t){return je(this,ji).setTimeout(e,t)}clearTimeout(e){je(this,ji).clearTimeout(e)}setInterval(e,t){return je(this,ji).setInterval(e,t)}clearInterval(e){je(this,ji).clearInterval(e)}},ji=new WeakMap,j0=new WeakMap,C2),zx=new X5;function K5(e){setTimeout(e,0)}var Tm=typeof window>"u"||"Deno"in globalThis;function Xs(){}function Y5(e,t){return typeof e=="function"?e(t):e}function Q5(e){return typeof e=="number"&&e>=0&&e!==1/0}function Z5(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ux(e,t){return typeof e=="function"?e(t):e}function J5(e,t){return typeof e=="function"?e(t):e}function zy(e,t){const{type:r="all",exact:s,fetchStatus:a,predicate:o,queryKey:c,stale:u}=e;if(c){if(s){if(t.queryHash!==$1(c,t.options))return!1}else if(!uu(t.queryKey,c))return!1}if(r!=="all"){const f=t.isActive();if(r==="active"&&!f||r==="inactive"&&f)return!1}return!(typeof u=="boolean"&&t.isStale()!==u||a&&a!==t.state.fetchStatus||o&&!o(t))}function Uy(e,t){const{exact:r,status:s,predicate:a,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(r){if(du(t.options.mutationKey)!==du(o))return!1}else if(!uu(t.options.mutationKey,o))return!1}return!(s&&t.state.status!==s||a&&!a(t))}function $1(e,t){return((t==null?void 0:t.queryKeyHashFn)||du)(e)}function du(e){return JSON.stringify(e,(t,r)=>$x(r)?Object.keys(r).sort().reduce((s,a)=>(s[a]=r[a],s),{}):r)}function uu(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>uu(e[r],t[r])):!1}var eO=Object.prototype.hasOwnProperty;function wC(e,t){if(e===t)return e;const r=$y(e)&&$y(t);if(!r&&!($x(e)&&$x(t)))return t;const a=(r?e:Object.keys(e)).length,o=r?t:Object.keys(t),c=o.length,u=r?new Array(c):{};let f=0;for(let p=0;p<c;p++){const x=r?p:o[p],w=e[x],b=t[x];if(w===b){u[x]=w,(r?p<a:eO.call(e,x))&&f++;continue}if(w===null||b===null||typeof w!="object"||typeof b!="object"){u[x]=b;continue}const j=wC(w,b);u[x]=j,j===w&&f++}return a===c&&f===a?e:u}function $y(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function $x(e){if(!Vy(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Vy(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Vy(e){return Object.prototype.toString.call(e)==="[object Object]"}function tO(e){return new Promise(t=>{zx.setTimeout(t,e)})}function rO(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?wC(e,t):t}function nO(e,t,r=0){const s=[...e,t];return r&&s.length>r?s.slice(1):s}function sO(e,t,r=0){const s=[t,...e];return r&&s.length>r?s.slice(0,-1):s}var V1=Symbol();function yC(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===V1?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Ro,Ci,hc,E2,aO=(E2=class extends km{constructor(){super();It(this,Ro);It(this,Ci);It(this,hc);ut(this,hc,t=>{if(!Tm&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){je(this,Ci)||this.setEventListener(je(this,hc))}onUnsubscribe(){var t;this.hasListeners()||((t=je(this,Ci))==null||t.call(this),ut(this,Ci,void 0))}setEventListener(t){var r;ut(this,hc,t),(r=je(this,Ci))==null||r.call(this),ut(this,Ci,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){je(this,Ro)!==t&&(ut(this,Ro,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof je(this,Ro)=="boolean"?je(this,Ro):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Ro=new WeakMap,Ci=new WeakMap,hc=new WeakMap,E2),bC=new aO;function iO(){let e,t;const r=new Promise((a,o)=>{e=a,t=o});r.status="pending",r.catch(()=>{});function s(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{s({status:"fulfilled",value:a}),e(a)},r.reject=a=>{s({status:"rejected",reason:a}),t(a)},r}var oO=K5;function lO(){let e=[],t=0,r=u=>{u()},s=u=>{u()},a=oO;const o=u=>{t?e.push(u):a(()=>{r(u)})},c=()=>{const u=e;e=[],u.length&&a(()=>{s(()=>{u.forEach(f=>{r(f)})})})};return{batch:u=>{let f;t++;try{f=u()}finally{t--,t||c()}return f},batchCalls:u=>(...f)=>{o(()=>{u(...f)})},schedule:o,setNotifyFunction:u=>{r=u},setBatchNotifyFunction:u=>{s=u},setScheduler:u=>{a=u}}}var Cn=lO(),fc,Ei,mc,S2,cO=(S2=class extends km{constructor(){super();It(this,fc,!0);It(this,Ei);It(this,mc);ut(this,mc,t=>{if(!Tm&&window.addEventListener){const r=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}})}onSubscribe(){je(this,Ei)||this.setEventListener(je(this,mc))}onUnsubscribe(){var t;this.hasListeners()||((t=je(this,Ei))==null||t.call(this),ut(this,Ei,void 0))}setEventListener(t){var r;ut(this,mc,t),(r=je(this,Ei))==null||r.call(this),ut(this,Ei,t(this.setOnline.bind(this)))}setOnline(t){je(this,fc)!==t&&(ut(this,fc,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return je(this,fc)}},fc=new WeakMap,Ei=new WeakMap,mc=new WeakMap,S2),Ff=new cO;function dO(e){return Math.min(1e3*2**e,3e4)}function _C(e){return(e??"online")==="online"?Ff.isOnline():!0}var Vx=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function NC(e){let t=!1,r=0,s;const a=iO(),o=()=>a.status!=="pending",c=C=>{var T;if(!o()){const S=new Vx(C);b(S),(T=e.onCancel)==null||T.call(e,S)}},u=()=>{t=!0},f=()=>{t=!1},p=()=>bC.isFocused()&&(e.networkMode==="always"||Ff.isOnline())&&e.canRun(),x=()=>_C(e.networkMode)&&e.canRun(),w=C=>{o()||(s==null||s(),a.resolve(C))},b=C=>{o()||(s==null||s(),a.reject(C))},j=()=>new Promise(C=>{var T;s=S=>{(o()||p())&&C(S)},(T=e.onPause)==null||T.call(e)}).then(()=>{var C;s=void 0,o()||(C=e.onContinue)==null||C.call(e)}),N=()=>{if(o())return;let C;const T=r===0?e.initialPromise:void 0;try{C=T??e.fn()}catch(S){C=Promise.reject(S)}Promise.resolve(C).then(w).catch(S=>{var L;if(o())return;const E=e.retry??(Tm?0:3),_=e.retryDelay??dO,k=typeof _=="function"?_(r,S):_,D=E===!0||typeof E=="number"&&r<E||typeof E=="function"&&E(r,S);if(t||!D){b(S);return}r++,(L=e.onFail)==null||L.call(e,r,S),tO(k).then(()=>p()?void 0:j()).then(()=>{t?b(S):N()})})};return{promise:a,status:()=>a.status,cancel:c,continue:()=>(s==null||s(),a),cancelRetry:u,continueRetry:f,canStart:x,start:()=>(x()?N():j().then(N),a)}}var Po,A2,jC=(A2=class{constructor(){It(this,Po)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Q5(this.gcTime)&&ut(this,Po,zx.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Tm?1/0:5*60*1e3))}clearGcTimeout(){je(this,Po)&&(zx.clearTimeout(je(this,Po)),ut(this,Po,void 0))}},Po=new WeakMap,A2),Oo,pc,Cs,Do,Yr,bu,Mo,Ks,Fa,k2,uO=(k2=class extends jC{constructor(t){super();It(this,Ks);It(this,Oo);It(this,pc);It(this,Cs);It(this,Do);It(this,Yr);It(this,bu);It(this,Mo);ut(this,Mo,!1),ut(this,bu,t.defaultOptions),this.setOptions(t.options),this.observers=[],ut(this,Do,t.client),ut(this,Cs,je(this,Do).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ut(this,Oo,qy(this.options)),this.state=t.state??je(this,Oo),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=je(this,Yr))==null?void 0:t.promise}setOptions(t){if(this.options={...je(this,bu),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=qy(this.options);r.data!==void 0&&(this.setData(r.data,{updatedAt:r.dataUpdatedAt,manual:!0}),ut(this,Oo,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&je(this,Cs).remove(this)}setData(t,r){const s=rO(this.state.data,t,this.options);return xn(this,Ks,Fa).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(t,r){xn(this,Ks,Fa).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var s,a;const r=(s=je(this,Yr))==null?void 0:s.promise;return(a=je(this,Yr))==null||a.cancel(t),r?r.then(Xs).catch(Xs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(je(this,Oo))}isActive(){return this.observers.some(t=>J5(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===V1||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Ux(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Z5(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=je(this,Yr))==null||r.continue()}onOnline(){var r;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=je(this,Yr))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),je(this,Cs).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(je(this,Yr)&&(je(this,Mo)?je(this,Yr).cancel({revert:!0}):je(this,Yr).cancelRetry()),this.scheduleGc()),je(this,Cs).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||xn(this,Ks,Fa).call(this,{type:"invalidate"})}async fetch(t,r){var f,p,x,w,b,j,N,C,T,S,E,_;if(this.state.fetchStatus!=="idle"&&((f=je(this,Yr))==null?void 0:f.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(je(this,Yr))return je(this,Yr).continueRetry(),je(this,Yr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const k=this.observers.find(D=>D.options.queryFn);k&&this.setOptions(k.options)}const s=new AbortController,a=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(ut(this,Mo,!0),s.signal)})},o=()=>{const k=yC(this.options,r),L=(()=>{const R={client:je(this,Do),queryKey:this.queryKey,meta:this.meta};return a(R),R})();return ut(this,Mo,!1),this.options.persister?this.options.persister(k,L,this):k(L)},u=(()=>{const k={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:je(this,Do),state:this.state,fetchFn:o};return a(k),k})();(p=this.options.behavior)==null||p.onFetch(u,this),ut(this,pc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((x=u.fetchOptions)==null?void 0:x.meta))&&xn(this,Ks,Fa).call(this,{type:"fetch",meta:(w=u.fetchOptions)==null?void 0:w.meta}),ut(this,Yr,NC({initialPromise:r==null?void 0:r.initialPromise,fn:u.fetchFn,onCancel:k=>{k instanceof Vx&&k.revert&&this.setState({...je(this,pc),fetchStatus:"idle"}),s.abort()},onFail:(k,D)=>{xn(this,Ks,Fa).call(this,{type:"failed",failureCount:k,error:D})},onPause:()=>{xn(this,Ks,Fa).call(this,{type:"pause"})},onContinue:()=>{xn(this,Ks,Fa).call(this,{type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0}));try{const k=await je(this,Yr).start();if(k===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(k),(j=(b=je(this,Cs).config).onSuccess)==null||j.call(b,k,this),(C=(N=je(this,Cs).config).onSettled)==null||C.call(N,k,this.state.error,this),k}catch(k){if(k instanceof Vx){if(k.silent)return je(this,Yr).promise;if(k.revert){if(this.state.data===void 0)throw k;return this.state.data}}throw xn(this,Ks,Fa).call(this,{type:"error",error:k}),(S=(T=je(this,Cs).config).onError)==null||S.call(T,k,this),(_=(E=je(this,Cs).config).onSettled)==null||_.call(E,this.state.data,k,this),k}finally{this.scheduleGc()}}},Oo=new WeakMap,pc=new WeakMap,Cs=new WeakMap,Do=new WeakMap,Yr=new WeakMap,bu=new WeakMap,Mo=new WeakMap,Ks=new WeakSet,Fa=function(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...hO(s.data,this.options),fetchMeta:t.meta??null};case"success":const a={...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ut(this,pc,t.manual?a:void 0),a;case"error":const o=t.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),Cn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),je(this,Cs).notify({query:this,type:"updated",action:t})})},k2);function hO(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:_C(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function qy(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,s=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}function Wy(e){return{onFetch:(t,r)=>{var x,w,b,j,N;const s=t.options,a=(b=(w=(x=t.fetchOptions)==null?void 0:x.meta)==null?void 0:w.fetchMore)==null?void 0:b.direction,o=((j=t.state.data)==null?void 0:j.pages)||[],c=((N=t.state.data)==null?void 0:N.pageParams)||[];let u={pages:[],pageParams:[]},f=0;const p=async()=>{let C=!1;const T=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(t.signal.aborted?C=!0:t.signal.addEventListener("abort",()=>{C=!0}),t.signal)})},S=yC(t.options,t.fetchOptions),E=async(_,k,D)=>{if(C)return Promise.reject();if(k==null&&_.pages.length)return Promise.resolve(_);const R=(()=>{const Y={client:t.client,queryKey:t.queryKey,pageParam:k,direction:D?"backward":"forward",meta:t.options.meta};return T(Y),Y})(),M=await S(R),{maxPages:P}=t.options,F=D?sO:nO;return{pages:F(_.pages,M,P),pageParams:F(_.pageParams,k,P)}};if(a&&o.length){const _=a==="backward",k=_?fO:Hy,D={pages:o,pageParams:c},L=k(s,D);u=await E(D,L,_)}else{const _=e??o.length;do{const k=f===0?c[0]??s.initialPageParam:Hy(s,u);if(f>0&&k==null)break;u=await E(u,k),f++}while(f<_)}return u};t.options.persister?t.fetchFn=()=>{var C,T;return(T=(C=t.options).persister)==null?void 0:T.call(C,p,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=p}}}function Hy(e,{pages:t,pageParams:r}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,r[s],r):void 0}function fO(e,{pages:t,pageParams:r}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,r[0],r):void 0}var _u,va,Nn,Lo,wa,gi,T2,mO=(T2=class extends jC{constructor(t){super();It(this,wa);It(this,_u);It(this,va);It(this,Nn);It(this,Lo);ut(this,_u,t.client),this.mutationId=t.mutationId,ut(this,Nn,t.mutationCache),ut(this,va,[]),this.state=t.state||pO(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){je(this,va).includes(t)||(je(this,va).push(t),this.clearGcTimeout(),je(this,Nn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ut(this,va,je(this,va).filter(r=>r!==t)),this.scheduleGc(),je(this,Nn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){je(this,va).length||(this.state.status==="pending"?this.scheduleGc():je(this,Nn).remove(this))}continue(){var t;return((t=je(this,Lo))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var c,u,f,p,x,w,b,j,N,C,T,S,E,_,k,D,L,R,M,P;const r=()=>{xn(this,wa,gi).call(this,{type:"continue"})},s={client:je(this,_u),meta:this.options.meta,mutationKey:this.options.mutationKey};ut(this,Lo,NC({fn:()=>this.options.mutationFn?this.options.mutationFn(t,s):Promise.reject(new Error("No mutationFn found")),onFail:(F,Y)=>{xn(this,wa,gi).call(this,{type:"failed",failureCount:F,error:Y})},onPause:()=>{xn(this,wa,gi).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>je(this,Nn).canRun(this)}));const a=this.state.status==="pending",o=!je(this,Lo).canStart();try{if(a)r();else{xn(this,wa,gi).call(this,{type:"pending",variables:t,isPaused:o}),await((u=(c=je(this,Nn).config).onMutate)==null?void 0:u.call(c,t,this,s));const Y=await((p=(f=this.options).onMutate)==null?void 0:p.call(f,t,s));Y!==this.state.context&&xn(this,wa,gi).call(this,{type:"pending",context:Y,variables:t,isPaused:o})}const F=await je(this,Lo).start();return await((w=(x=je(this,Nn).config).onSuccess)==null?void 0:w.call(x,F,t,this.state.context,this,s)),await((j=(b=this.options).onSuccess)==null?void 0:j.call(b,F,t,this.state.context,s)),await((C=(N=je(this,Nn).config).onSettled)==null?void 0:C.call(N,F,null,this.state.variables,this.state.context,this,s)),await((S=(T=this.options).onSettled)==null?void 0:S.call(T,F,null,t,this.state.context,s)),xn(this,wa,gi).call(this,{type:"success",data:F}),F}catch(F){try{throw await((_=(E=je(this,Nn).config).onError)==null?void 0:_.call(E,F,t,this.state.context,this,s)),await((D=(k=this.options).onError)==null?void 0:D.call(k,F,t,this.state.context,s)),await((R=(L=je(this,Nn).config).onSettled)==null?void 0:R.call(L,void 0,F,this.state.variables,this.state.context,this,s)),await((P=(M=this.options).onSettled)==null?void 0:P.call(M,void 0,F,t,this.state.context,s)),F}finally{xn(this,wa,gi).call(this,{type:"error",error:F})}}finally{je(this,Nn).runNext(this)}}},_u=new WeakMap,va=new WeakMap,Nn=new WeakMap,Lo=new WeakMap,wa=new WeakSet,gi=function(t){const r=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Cn.batch(()=>{je(this,va).forEach(s=>{s.onMutationUpdate(t)}),je(this,Nn).notify({mutation:this,type:"updated",action:t})})},T2);function pO(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Va,Ys,Nu,I2,gO=(I2=class extends km{constructor(t={}){super();It(this,Va);It(this,Ys);It(this,Nu);this.config=t,ut(this,Va,new Set),ut(this,Ys,new Map),ut(this,Nu,0)}build(t,r,s){const a=new mO({client:t,mutationCache:this,mutationId:++ih(this,Nu)._,options:t.defaultMutationOptions(r),state:s});return this.add(a),a}add(t){je(this,Va).add(t);const r=Ah(t);if(typeof r=="string"){const s=je(this,Ys).get(r);s?s.push(t):je(this,Ys).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(je(this,Va).delete(t)){const r=Ah(t);if(typeof r=="string"){const s=je(this,Ys).get(r);if(s)if(s.length>1){const a=s.indexOf(t);a!==-1&&s.splice(a,1)}else s[0]===t&&je(this,Ys).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Ah(t);if(typeof r=="string"){const s=je(this,Ys).get(r),a=s==null?void 0:s.find(o=>o.state.status==="pending");return!a||a===t}else return!0}runNext(t){var s;const r=Ah(t);if(typeof r=="string"){const a=(s=je(this,Ys).get(r))==null?void 0:s.find(o=>o!==t&&o.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Cn.batch(()=>{je(this,Va).forEach(t=>{this.notify({type:"removed",mutation:t})}),je(this,Va).clear(),je(this,Ys).clear()})}getAll(){return Array.from(je(this,Va))}find(t){const r={exact:!0,...t};return this.getAll().find(s=>Uy(r,s))}findAll(t={}){return this.getAll().filter(r=>Uy(t,r))}notify(t){Cn.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Cn.batch(()=>Promise.all(t.map(r=>r.continue().catch(Xs))))}},Va=new WeakMap,Ys=new WeakMap,Nu=new WeakMap,I2);function Ah(e){var t;return(t=e.options.scope)==null?void 0:t.id}var ya,R2,xO=(R2=class extends km{constructor(t={}){super();It(this,ya);this.config=t,ut(this,ya,new Map)}build(t,r,s){const a=r.queryKey,o=r.queryHash??$1(a,r);let c=this.get(o);return c||(c=new uO({client:t,queryKey:a,queryHash:o,options:t.defaultQueryOptions(r),state:s,defaultOptions:t.getQueryDefaults(a)}),this.add(c)),c}add(t){je(this,ya).has(t.queryHash)||(je(this,ya).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=je(this,ya).get(t.queryHash);r&&(t.destroy(),r===t&&je(this,ya).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Cn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return je(this,ya).get(t)}getAll(){return[...je(this,ya).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(s=>zy(r,s))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(s=>zy(t,s)):r}notify(t){Cn.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Cn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Cn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ya=new WeakMap,R2),Nr,Si,Ai,gc,xc,ki,vc,wc,P2,vO=(P2=class{constructor(e={}){It(this,Nr);It(this,Si);It(this,Ai);It(this,gc);It(this,xc);It(this,ki);It(this,vc);It(this,wc);ut(this,Nr,e.queryCache||new xO),ut(this,Si,e.mutationCache||new gO),ut(this,Ai,e.defaultOptions||{}),ut(this,gc,new Map),ut(this,xc,new Map),ut(this,ki,0)}mount(){ih(this,ki)._++,je(this,ki)===1&&(ut(this,vc,bC.subscribe(async e=>{e&&(await this.resumePausedMutations(),je(this,Nr).onFocus())})),ut(this,wc,Ff.subscribe(async e=>{e&&(await this.resumePausedMutations(),je(this,Nr).onOnline())})))}unmount(){var e,t;ih(this,ki)._--,je(this,ki)===0&&((e=je(this,vc))==null||e.call(this),ut(this,vc,void 0),(t=je(this,wc))==null||t.call(this),ut(this,wc,void 0))}isFetching(e){return je(this,Nr).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return je(this,Si).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=je(this,Nr).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=je(this,Nr).build(this,t),s=r.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Ux(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return je(this,Nr).findAll(e).map(({queryKey:t,state:r})=>{const s=r.data;return[t,s]})}setQueryData(e,t,r){const s=this.defaultQueryOptions({queryKey:e}),a=je(this,Nr).get(s.queryHash),o=a==null?void 0:a.state.data,c=Y5(t,o);if(c!==void 0)return je(this,Nr).build(this,s).setData(c,{...r,manual:!0})}setQueriesData(e,t,r){return Cn.batch(()=>je(this,Nr).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=je(this,Nr).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=je(this,Nr);Cn.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=je(this,Nr);return Cn.batch(()=>(r.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},s=Cn.batch(()=>je(this,Nr).findAll(e).map(a=>a.cancel(r)));return Promise.all(s).then(Xs).catch(Xs)}invalidateQueries(e,t={}){return Cn.batch(()=>(je(this,Nr).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},s=Cn.batch(()=>je(this,Nr).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let o=a.fetch(void 0,r);return r.throwOnError||(o=o.catch(Xs)),a.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(s).then(Xs)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=je(this,Nr).build(this,t);return r.isStaleByTime(Ux(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Xs).catch(Xs)}fetchInfiniteQuery(e){return e.behavior=Wy(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Xs).catch(Xs)}ensureInfiniteQueryData(e){return e.behavior=Wy(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Ff.isOnline()?je(this,Si).resumePausedMutations():Promise.resolve()}getQueryCache(){return je(this,Nr)}getMutationCache(){return je(this,Si)}getDefaultOptions(){return je(this,Ai)}setDefaultOptions(e){ut(this,Ai,e)}setQueryDefaults(e,t){je(this,gc).set(du(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...je(this,gc).values()],r={};return t.forEach(s=>{uu(e,s.queryKey)&&Object.assign(r,s.defaultOptions)}),r}setMutationDefaults(e,t){je(this,xc).set(du(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...je(this,xc).values()],r={};return t.forEach(s=>{uu(e,s.mutationKey)&&Object.assign(r,s.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...je(this,Ai).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=$1(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===V1&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...je(this,Ai).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){je(this,Nr).clear(),je(this,Si).clear()}},Nr=new WeakMap,Si=new WeakMap,Ai=new WeakMap,gc=new WeakMap,xc=new WeakMap,ki=new WeakMap,vc=new WeakMap,wc=new WeakMap,P2),wO=v.createContext(void 0),yO=({client:e,children:t})=>(v.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(wO.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hu(){return hu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},hu.apply(this,arguments)}var Ri;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ri||(Ri={}));const Gy="popstate";function bO(e){e===void 0&&(e={});function t(s,a){let{pathname:o,search:c,hash:u}=s.location;return qx("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){return typeof a=="string"?a:EC(a)}return NO(t,r,null,e)}function Wr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function CC(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function _O(){return Math.random().toString(36).substr(2,8)}function Xy(e,t){return{usr:e.state,key:e.key,idx:t}}function qx(e,t,r,s){return r===void 0&&(r=null),hu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Hc(t):t,{state:r,key:t&&t.key||s||_O()})}function EC(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Hc(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function NO(e,t,r,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:o=!1}=s,c=a.history,u=Ri.Pop,f=null,p=x();p==null&&(p=0,c.replaceState(hu({},c.state,{idx:p}),""));function x(){return(c.state||{idx:null}).idx}function w(){u=Ri.Pop;let T=x(),S=T==null?null:T-p;p=T,f&&f({action:u,location:C.location,delta:S})}function b(T,S){u=Ri.Push;let E=qx(C.location,T,S);p=x()+1;let _=Xy(E,p),k=C.createHref(E);try{c.pushState(_,"",k)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;a.location.assign(k)}o&&f&&f({action:u,location:C.location,delta:1})}function j(T,S){u=Ri.Replace;let E=qx(C.location,T,S);p=x();let _=Xy(E,p),k=C.createHref(E);c.replaceState(_,"",k),o&&f&&f({action:u,location:C.location,delta:0})}function N(T){let S=a.location.origin!=="null"?a.location.origin:a.location.href,E=typeof T=="string"?T:EC(T);return E=E.replace(/ $/,"%20"),Wr(S,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,S)}let C={get action(){return u},get location(){return e(a,c)},listen(T){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(Gy,w),f=T,()=>{a.removeEventListener(Gy,w),f=null}},createHref(T){return t(a,T)},createURL:N,encodeLocation(T){let S=N(T);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:b,replace:j,go(T){return c.go(T)}};return C}var Ky;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Ky||(Ky={}));function jO(e,t,r){return r===void 0&&(r="/"),CO(e,t,r)}function CO(e,t,r,s){let a=typeof t=="string"?Hc(t):t,o=kC(a.pathname||"/",r);if(o==null)return null;let c=SC(e);EO(c);let u=null;for(let f=0;u==null&&f<c.length;++f){let p=FO(o);u=DO(c[f],p)}return u}function SC(e,t,r,s){t===void 0&&(t=[]),r===void 0&&(r=[]),s===void 0&&(s="");let a=(o,c,u)=>{let f={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};f.relativePath.startsWith("/")&&(Wr(f.relativePath.startsWith(s),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(s.length));let p=Uo([s,f.relativePath]),x=r.concat(f);o.children&&o.children.length>0&&(Wr(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),SC(o.children,t,x,p)),!(o.path==null&&!o.index)&&t.push({path:p,score:PO(p,o.index),routesMeta:x})};return e.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))a(o,c);else for(let f of AC(o.path))a(o,c,f)}),t}function AC(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,a=r.endsWith("?"),o=r.replace(/\?$/,"");if(s.length===0)return a?[o,""]:[o];let c=AC(s.join("/")),u=[];return u.push(...c.map(f=>f===""?o:[o,f].join("/"))),a&&u.push(...c),u.map(f=>e.startsWith("/")&&f===""?"/":f)}function EO(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:OO(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const SO=/^:[\w-]+$/,AO=3,kO=2,TO=1,IO=10,RO=-2,Yy=e=>e==="*";function PO(e,t){let r=e.split("/"),s=r.length;return r.some(Yy)&&(s+=RO),t&&(s+=kO),r.filter(a=>!Yy(a)).reduce((a,o)=>a+(SO.test(o)?AO:o===""?TO:IO),s)}function OO(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function DO(e,t,r){let{routesMeta:s}=e,a={},o="/",c=[];for(let u=0;u<s.length;++u){let f=s[u],p=u===s.length-1,x=o==="/"?t:t.slice(o.length)||"/",w=MO({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},x),b=f.route;if(!w)return null;Object.assign(a,w.params),c.push({params:a,pathname:Uo([o,w.pathname]),pathnameBase:qO(Uo([o,w.pathnameBase])),route:b}),w.pathnameBase!=="/"&&(o=Uo([o,w.pathnameBase]))}return c}function MO(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=LO(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let o=a[0],c=o.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:s.reduce((p,x,w)=>{let{paramName:b,isOptional:j}=x;if(b==="*"){let C=u[w]||"";c=o.slice(0,o.length-C.length).replace(/(.)\/+$/,"$1")}const N=u[w];return j&&!N?p[b]=void 0:p[b]=(N||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:c,pattern:e}}function LO(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),CC(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,f)=>(s.push({paramName:u,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function FO(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return CC(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function kC(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function BO(e,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:a=""}=typeof e=="string"?Hc(e):e;return{pathname:r?r.startsWith("/")?r:zO(r,t):t,search:WO(s),hash:HO(a)}}function zO(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function ug(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function UO(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function $O(e,t){let r=UO(e);return t?r.map((s,a)=>a===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function VO(e,t,r,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=Hc(e):(a=hu({},e),Wr(!a.pathname||!a.pathname.includes("?"),ug("?","pathname","search",a)),Wr(!a.pathname||!a.pathname.includes("#"),ug("#","pathname","hash",a)),Wr(!a.search||!a.search.includes("#"),ug("#","search","hash",a)));let o=e===""||a.pathname==="",c=o?"/":a.pathname,u;if(c==null)u=r;else{let w=t.length-1;if(!s&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),w-=1;a.pathname=b.join("/")}u=w>=0?t[w]:"/"}let f=BO(a,u),p=c&&c!=="/"&&c.endsWith("/"),x=(o||c===".")&&r.endsWith("/");return!f.pathname.endsWith("/")&&(p||x)&&(f.pathname+="/"),f}const Uo=e=>e.join("/").replace(/\/\/+/g,"/"),qO=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),WO=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,HO=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function GO(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const TC=["post","put","patch","delete"];new Set(TC);const XO=["get",...TC];new Set(XO);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fu(){return fu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},fu.apply(this,arguments)}const q1=v.createContext(null),KO=v.createContext(null),Im=v.createContext(null),Rm=v.createContext(null),hl=v.createContext({outlet:null,matches:[],isDataRoute:!1}),IC=v.createContext(null);function Pm(){return v.useContext(Rm)!=null}function Qn(){return Pm()||Wr(!1),v.useContext(Rm).location}function RC(e){v.useContext(Im).static||v.useLayoutEffect(e)}function _t(){let{isDataRoute:e}=v.useContext(hl);return e?lD():YO()}function YO(){Pm()||Wr(!1);let e=v.useContext(q1),{basename:t,future:r,navigator:s}=v.useContext(Im),{matches:a}=v.useContext(hl),{pathname:o}=Qn(),c=JSON.stringify($O(a,r.v7_relativeSplatPath)),u=v.useRef(!1);return RC(()=>{u.current=!0}),v.useCallback(function(p,x){if(x===void 0&&(x={}),!u.current)return;if(typeof p=="number"){s.go(p);return}let w=VO(p,JSON.parse(c),o,x.relative==="path");e==null&&t!=="/"&&(w.pathname=w.pathname==="/"?t:Uo([t,w.pathname])),(x.replace?s.replace:s.push)(w,x.state,x)},[t,s,c,o,e])}function fl(){let{matches:e}=v.useContext(hl),t=e[e.length-1];return t?t.params:{}}function QO(e,t){return ZO(e,t)}function ZO(e,t,r,s){Pm()||Wr(!1);let{navigator:a}=v.useContext(Im),{matches:o}=v.useContext(hl),c=o[o.length-1],u=c?c.params:{};c&&c.pathname;let f=c?c.pathnameBase:"/";c&&c.route;let p=Qn(),x;if(t){var w;let T=typeof t=="string"?Hc(t):t;f==="/"||(w=T.pathname)!=null&&w.startsWith(f)||Wr(!1),x=T}else x=p;let b=x.pathname||"/",j=b;if(f!=="/"){let T=f.replace(/^\//,"").split("/");j="/"+b.replace(/^\//,"").split("/").slice(T.length).join("/")}let N=jO(e,{pathname:j}),C=nD(N&&N.map(T=>Object.assign({},T,{params:Object.assign({},u,T.params),pathname:Uo([f,a.encodeLocation?a.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?f:Uo([f,a.encodeLocation?a.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),o,r,s);return t&&C?v.createElement(Rm.Provider,{value:{location:fu({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:Ri.Pop}},C):C}function JO(){let e=oD(),t=GO(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),r?v.createElement("pre",{style:a},r):null,null)}const eD=v.createElement(JO,null);class tD extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?v.createElement(hl.Provider,{value:this.props.routeContext},v.createElement(IC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function rD(e){let{routeContext:t,match:r,children:s}=e,a=v.useContext(q1);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),v.createElement(hl.Provider,{value:t},s)}function nD(e,t,r,s){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var o;if(!r)return null;if(r.errors)e=r.matches;else if((o=s)!=null&&o.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let c=e,u=(a=r)==null?void 0:a.errors;if(u!=null){let x=c.findIndex(w=>w.route.id&&(u==null?void 0:u[w.route.id])!==void 0);x>=0||Wr(!1),c=c.slice(0,Math.min(c.length,x+1))}let f=!1,p=-1;if(r&&s&&s.v7_partialHydration)for(let x=0;x<c.length;x++){let w=c[x];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(p=x),w.route.id){let{loaderData:b,errors:j}=r,N=w.route.loader&&b[w.route.id]===void 0&&(!j||j[w.route.id]===void 0);if(w.route.lazy||N){f=!0,p>=0?c=c.slice(0,p+1):c=[c[0]];break}}}return c.reduceRight((x,w,b)=>{let j,N=!1,C=null,T=null;r&&(j=u&&w.route.id?u[w.route.id]:void 0,C=w.route.errorElement||eD,f&&(p<0&&b===0?(cD("route-fallback"),N=!0,T=null):p===b&&(N=!0,T=w.route.hydrateFallbackElement||null)));let S=t.concat(c.slice(0,b+1)),E=()=>{let _;return j?_=C:N?_=T:w.route.Component?_=v.createElement(w.route.Component,null):w.route.element?_=w.route.element:_=x,v.createElement(rD,{match:w,routeContext:{outlet:x,matches:S,isDataRoute:r!=null},children:_})};return r&&(w.route.ErrorBoundary||w.route.errorElement||b===0)?v.createElement(tD,{location:r.location,revalidation:r.revalidation,component:C,error:j,children:E(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):E()},null)}var PC=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(PC||{}),OC=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(OC||{});function sD(e){let t=v.useContext(q1);return t||Wr(!1),t}function aD(e){let t=v.useContext(KO);return t||Wr(!1),t}function iD(e){let t=v.useContext(hl);return t||Wr(!1),t}function DC(e){let t=iD(),r=t.matches[t.matches.length-1];return r.route.id||Wr(!1),r.route.id}function oD(){var e;let t=v.useContext(IC),r=aD(),s=DC();return t!==void 0?t:(e=r.errors)==null?void 0:e[s]}function lD(){let{router:e}=sD(PC.UseNavigateStable),t=DC(OC.UseNavigateStable),r=v.useRef(!1);return RC(()=>{r.current=!0}),v.useCallback(function(a,o){o===void 0&&(o={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,fu({fromRouteId:t},o)))},[e,t])}const Qy={};function cD(e,t,r){Qy[e]||(Qy[e]=!0)}function dD(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Wt(e){Wr(!1)}function uD(e){let{basename:t="/",children:r=null,location:s,navigationType:a=Ri.Pop,navigator:o,static:c=!1,future:u}=e;Pm()&&Wr(!1);let f=t.replace(/^\/*/,"/"),p=v.useMemo(()=>({basename:f,navigator:o,static:c,future:fu({v7_relativeSplatPath:!1},u)}),[f,u,o,c]);typeof s=="string"&&(s=Hc(s));let{pathname:x="/",search:w="",hash:b="",state:j=null,key:N="default"}=s,C=v.useMemo(()=>{let T=kC(x,f);return T==null?null:{location:{pathname:T,search:w,hash:b,state:j,key:N},navigationType:a}},[f,x,w,b,j,N,a]);return C==null?null:v.createElement(Im.Provider,{value:p},v.createElement(Rm.Provider,{children:r,value:C}))}function hD(e){let{children:t,location:r}=e;return QO(Wx(t),r)}new Promise(()=>{});function Wx(e,t){t===void 0&&(t=[]);let r=[];return v.Children.forEach(e,(s,a)=>{if(!v.isValidElement(s))return;let o=[...t,a];if(s.type===v.Fragment){r.push.apply(r,Wx(s.props.children,o));return}s.type!==Wt&&Wr(!1),!s.props.index||!s.props.children||Wr(!1);let c={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=Wx(s.props.children,o)),r.push(c)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hx(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let s=e[r];return t.concat(Array.isArray(s)?s.map(a=>[r,a]):[[r,s]])},[]))}function fD(e,t){let r=Hx(e);return t&&t.forEach((s,a)=>{r.has(a)||t.getAll(a).forEach(o=>{r.append(a,o)})}),r}const mD="6";try{window.__reactRouterVersion=mD}catch{}const pD="startTransition",Zy=T0[pD];function gD(e){let{basename:t,children:r,future:s,window:a}=e,o=v.useRef();o.current==null&&(o.current=bO({window:a,v5Compat:!0}));let c=o.current,[u,f]=v.useState({action:c.action,location:c.location}),{v7_startTransition:p}=s||{},x=v.useCallback(w=>{p&&Zy?Zy(()=>f(w)):f(w)},[f,p]);return v.useLayoutEffect(()=>c.listen(x),[c,x]),v.useEffect(()=>dD(s),[s]),v.createElement(uD,{basename:t,children:r,location:u.location,navigationType:u.action,navigator:c,future:s})}var Jy;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Jy||(Jy={}));var eb;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(eb||(eb={}));function W1(e){let t=v.useRef(Hx(e)),r=v.useRef(!1),s=Qn(),a=v.useMemo(()=>fD(s.search,r.current?null:t.current),[s.search]),o=_t(),c=v.useCallback((u,f)=>{const p=Hx(typeof u=="function"?u(a):u);r.current=!0,o("?"+p,f)},[o,a]);return[a,c]}const xD="modulepreload",vD=function(e,t){return new URL(e,t).href},tb={},Gc=function(t,r,s){let a=Promise.resolve();if(r&&r.length>0){const c=document.getElementsByTagName("link"),u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));a=Promise.allSettled(r.map(p=>{if(p=vD(p,s),p in tb)return;tb[p]=!0;const x=p.endsWith(".css"),w=x?'[rel="stylesheet"]':"";if(!!s)for(let N=c.length-1;N>=0;N--){const C=c[N];if(C.href===p&&(!x||C.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${p}"]${w}`))return;const j=document.createElement("link");if(j.rel=x?"stylesheet":xD,x||(j.as="script"),j.crossOrigin="",j.href=p,f&&j.setAttribute("nonce",f),document.head.appendChild(j),x)return new Promise((N,C)=>{j.addEventListener("load",N),j.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return a.then(c=>{for(const u of c||[])u.status==="rejected"&&o(u.reason);return t().catch(o)})},wD=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Gc(async()=>{const{default:s}=await Promise.resolve().then(()=>Xc);return{default:s}},void 0,import.meta.url).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)};class H1 extends Error{constructor(t,r="FunctionsError",s){super(t),this.name=r,this.context=s}}class rb extends H1{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class nb extends H1{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class sb extends H1{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Gx;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Gx||(Gx={}));var yD=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{p(s.next(x))}catch(w){c(w)}}function f(x){try{p(s.throw(x))}catch(w){c(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})};class bD{constructor(t,{headers:r={},customFetch:s,region:a=Gx.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=wD(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return yD(this,arguments,void 0,function*(r,s={}){var a;try{const{headers:o,method:c,body:u,signal:f}=s;let p={},{region:x}=s;x||(x=this.region);const w=new URL(`${this.url}/${r}`);x&&x!=="any"&&(p["x-region"]=x,w.searchParams.set("forceFunctionRegion",x));let b;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",b=u):typeof u=="string"?(p["Content-Type"]="text/plain",b=u):typeof FormData<"u"&&u instanceof FormData?b=u:(p["Content-Type"]="application/json",b=JSON.stringify(u)));const j=yield this.fetch(w.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),o),body:b,signal:f}).catch(S=>{throw S.name==="AbortError"?S:new rb(S)}),N=j.headers.get("x-relay-error");if(N&&N==="true")throw new nb(j);if(!j.ok)throw new sb(j);let C=((a=j.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),T;return C==="application/json"?T=yield j.json():C==="application/octet-stream"?T=yield j.blob():C==="text/event-stream"?T=j:C==="multipart/form-data"?T=yield j.formData():T=yield j.text(),{data:T,error:null,response:j}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new rb(o)}:{data:null,error:o,response:o instanceof sb||o instanceof nb?o.context:void 0}}})}}var Vn={},G1={},Om={},Lu={},Dm={},Mm={},_D=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ic=_D();const ND=Ic.fetch,MC=Ic.fetch.bind(Ic),LC=Ic.Headers,jD=Ic.Request,CD=Ic.Response,Xc=Object.freeze(Object.defineProperty({__proto__:null,Headers:LC,Request:jD,Response:CD,default:MC,fetch:ND},Symbol.toStringTag,{value:"Module"})),ED=iT(Xc);var Lm={};Object.defineProperty(Lm,"__esModule",{value:!0});let SD=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Lm.default=SD;var FC=cn&&cn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mm,"__esModule",{value:!0});const AD=FC(ED),kD=FC(Lm);let TD=class{constructor(t){var r,s;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(s=t.isMaybeSingle)!==null&&s!==void 0?s:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=AD.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let a=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var c,u,f,p;let x=null,w=null,b=null,j=o.status,N=o.statusText;if(o.ok){if(this.method!=="HEAD"){const E=await o.text();E===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?w=E:w=JSON.parse(E))}const T=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),S=(f=o.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");T&&S&&S.length>1&&(b=parseInt(S[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(w)&&(w.length>1?(x={code:"PGRST116",details:`Results contain ${w.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},w=null,b=null,j=406,N="Not Acceptable"):w.length===1?w=w[0]:w=null)}else{const T=await o.text();try{x=JSON.parse(T),Array.isArray(x)&&o.status===404&&(w=[],x=null,j=200,N="OK")}catch{o.status===404&&T===""?(j=204,N="No Content"):x={message:T}}if(x&&this.isMaybeSingle&&(!((p=x==null?void 0:x.details)===null||p===void 0)&&p.includes("0 rows"))&&(x=null,j=200,N="OK"),x&&this.shouldThrowOnError)throw new kD.default(x)}return{error:x,data:w,count:b,status:j,statusText:N}});return this.shouldThrowOnError||(a=a.catch(o=>{var c,u,f;return{error:{message:`${(c=o==null?void 0:o.name)!==null&&c!==void 0?c:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(u=o==null?void 0:o.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(f=o==null?void 0:o.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,r)}returns(){return this}overrideTypes(){return this}};Mm.default=TD;var ID=cn&&cn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Dm,"__esModule",{value:!0});const RD=ID(Mm);let PD=class extends RD.default{select(t){let r=!1;const s=(t??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:s,foreignTable:a,referencedTable:o=a}={}){const c=o?`${o}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${t}.${r?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:s=r}={}){const a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,r,{foreignTable:s,referencedTable:a=s}={}){const o=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(c,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:s=!1,buffers:a=!1,wal:o=!1,format:c="text"}={}){var u;const f=[t?"analyze":null,r?"verbose":null,s?"settings":null,a?"buffers":null,o?"wal":null].filter(Boolean).join("|"),p=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${p}"; options=${f};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Dm.default=PD;var OD=cn&&cn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Lu,"__esModule",{value:!0});const DD=OD(Dm);let MD=class extends DD.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const s=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${s})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:s,type:a}={}){let o="";a==="plain"?o="pl":a==="phrase"?o="ph":a==="websearch"&&(o="w");const c=s===void 0?"":`(${s})`;return this.url.searchParams.append(t,`${o}fts${c}.${r}`),this}match(t){return Object.entries(t).forEach(([r,s])=>{this.url.searchParams.append(r,`eq.${s}`)}),this}not(t,r,s){return this.url.searchParams.append(t,`not.${r}.${s}`),this}or(t,{foreignTable:r,referencedTable:s=r}={}){const a=s?`${s}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,r,s){return this.url.searchParams.append(t,`${r}.${s}`),this}};Lu.default=MD;var LD=cn&&cn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Om,"__esModule",{value:!0});const vd=LD(Lu);let FD=class{constructor(t,{headers:r={},schema:s,fetch:a}){this.url=t,this.headers=new Headers(r),this.schema=s,this.fetch=a}select(t,r){const{head:s=!1,count:a}=r??{},o=s?"HEAD":"GET";let c=!1;const u=(t??"*").split("").map(f=>/\s/.test(f)&&!c?"":(f==='"'&&(c=!c),f)).join("");return this.url.searchParams.set("select",u),a&&this.headers.append("Prefer",`count=${a}`),new vd.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:s=!0}={}){var a;const o="POST";if(r&&this.headers.append("Prefer",`count=${r}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,f)=>u.concat(Object.keys(f)),[]);if(c.length>0){const u=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",u.join(","))}}return new vd.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:s=!1,count:a,defaultToNull:o=!0}={}){var c;const u="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),a&&this.headers.append("Prefer",`count=${a}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const f=t.reduce((p,x)=>p.concat(Object.keys(x)),[]);if(f.length>0){const p=[...new Set(f)].map(x=>`"${x}"`);this.url.searchParams.set("columns",p.join(","))}}return new vd.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(t,{count:r}={}){var s;const a="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new vd.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:t}={}){var r;const s="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new vd.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};Om.default=FD;var BC=cn&&cn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(G1,"__esModule",{value:!0});const BD=BC(Om),zD=BC(Lu);let UD=class zC{constructor(t,{headers:r={},schema:s,fetch:a}={}){this.url=t,this.headers=new Headers(r),this.schemaName=s,this.fetch=a}from(t){const r=new URL(`${this.url}/${t}`);return new BD.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new zC(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:s=!1,get:a=!1,count:o}={}){var c;let u;const f=new URL(`${this.url}/rpc/${t}`);let p;s||a?(u=s?"HEAD":"GET",Object.entries(r).filter(([w,b])=>b!==void 0).map(([w,b])=>[w,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([w,b])=>{f.searchParams.append(w,b)})):(u="POST",p=r);const x=new Headers(this.headers);return o&&x.set("Prefer",`count=${o}`),new zD.default({method:u,url:f,headers:x,schema:this.schemaName,body:p,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}};G1.default=UD;var Kc=cn&&cn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.PostgrestError=Vn.PostgrestBuilder=Vn.PostgrestTransformBuilder=Vn.PostgrestFilterBuilder=Vn.PostgrestQueryBuilder=Vn.PostgrestClient=void 0;const UC=Kc(G1);Vn.PostgrestClient=UC.default;const $C=Kc(Om);Vn.PostgrestQueryBuilder=$C.default;const VC=Kc(Lu);Vn.PostgrestFilterBuilder=VC.default;const qC=Kc(Dm);Vn.PostgrestTransformBuilder=qC.default;const WC=Kc(Mm);Vn.PostgrestBuilder=WC.default;const HC=Kc(Lm);Vn.PostgrestError=HC.default;var $D=Vn.default={PostgrestClient:UC.default,PostgrestQueryBuilder:$C.default,PostgrestFilterBuilder:VC.default,PostgrestTransformBuilder:qC.default,PostgrestBuilder:WC.default,PostgrestError:HC.default};const{PostgrestClient:VD,PostgrestQueryBuilder:KW,PostgrestFilterBuilder:YW,PostgrestTransformBuilder:QW,PostgrestBuilder:ZW,PostgrestError:JW}=$D;class qD{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const s=r.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const s=this.getWebSocketConstructor();return new s(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const WD="2.75.0",HD=`realtime-js/${WD}`,GD="1.0.0",Xx=1e4,XD=1e3,KD=100;var Ld;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ld||(Ld={}));var Ur;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ur||(Ur={}));var Zs;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Zs||(Zs={}));var Kx;(function(e){e.websocket="websocket"})(Kx||(Kx={}));var Eo;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Eo||(Eo={}));class YD{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),s=new TextDecoder;return this._decodeBroadcast(t,r,s)}_decodeBroadcast(t,r,s){const a=r.getUint8(1),o=r.getUint8(2);let c=this.HEADER_LENGTH+2;const u=s.decode(t.slice(c,c+a));c=c+a;const f=s.decode(t.slice(c,c+o));c=c+o;const p=JSON.parse(s.decode(t.slice(c,t.byteLength)));return{ref:null,topic:u,event:f,payload:p}}}class GC{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var rr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(rr||(rr={}));const ab=(e,t,r={})=>{var s;const a=(s=r.skipTypes)!==null&&s!==void 0?s:[];return t?Object.keys(t).reduce((o,c)=>(o[c]=QD(c,e,t,a),o),{}):{}},QD=(e,t,r,s)=>{const a=t.find(u=>u.name===e),o=a==null?void 0:a.type,c=r[e];return o&&!s.includes(o)?XC(o,c):Yx(c)},XC=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return tM(t,r)}switch(e){case rr.bool:return ZD(t);case rr.float4:case rr.float8:case rr.int2:case rr.int4:case rr.int8:case rr.numeric:case rr.oid:return JD(t);case rr.json:case rr.jsonb:return eM(t);case rr.timestamp:return rM(t);case rr.abstime:case rr.date:case rr.daterange:case rr.int4range:case rr.int8range:case rr.money:case rr.reltime:case rr.text:case rr.time:case rr.timestamptz:case rr.timetz:case rr.tsrange:case rr.tstzrange:return Yx(t);default:return Yx(t)}},Yx=e=>e,ZD=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},JD=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},eM=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},tM=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,s=e[r];if(e[0]==="{"&&s==="}"){let o;const c=e.slice(1,r);try{o=JSON.parse("["+c+"]")}catch{o=c?c.split(","):[]}return o.map(u=>XC(t,u))}return e},rM=e=>typeof e=="string"?e.replace(" ","T"):e,KC=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class hg{constructor(t,r,s={},a=Xx){this.channel=t,this.event=r,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var s;return this._hasReceived(t)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var ib;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(ib||(ib={}));class Fd{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:o,onLeave:c,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Fd.syncState(this.state,a,o,c),this.pendingDiffs.forEach(f=>{this.state=Fd.syncDiff(this.state,f,o,c)}),this.pendingDiffs=[],u()}),this.channel._on(s.diff,{},a=>{const{onJoin:o,onLeave:c,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Fd.syncDiff(this.state,a,o,c),u())}),this.onJoin((a,o,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:c})}),this.onLeave((a,o,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,s,a){const o=this.cloneDeep(t),c=this.transformState(r),u={},f={};return this.map(o,(p,x)=>{c[p]||(f[p]=x)}),this.map(c,(p,x)=>{const w=o[p];if(w){const b=x.map(T=>T.presence_ref),j=w.map(T=>T.presence_ref),N=x.filter(T=>j.indexOf(T.presence_ref)<0),C=w.filter(T=>b.indexOf(T.presence_ref)<0);N.length>0&&(u[p]=N),C.length>0&&(f[p]=C)}else u[p]=x}),this.syncDiff(o,{joins:u,leaves:f},s,a)}static syncDiff(t,r,s,a){const{joins:o,leaves:c}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(o,(u,f)=>{var p;const x=(p=t[u])!==null&&p!==void 0?p:[];if(t[u]=this.cloneDeep(f),x.length>0){const w=t[u].map(j=>j.presence_ref),b=x.filter(j=>w.indexOf(j.presence_ref)<0);t[u].unshift(...b)}s(u,x,f)}),this.map(c,(u,f)=>{let p=t[u];if(!p)return;const x=f.map(w=>w.presence_ref);p=p.filter(w=>x.indexOf(w.presence_ref)<0),t[u]=p,a(u,p,f),p.length===0&&delete t[u]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(s=>r(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,s)=>{const a=t[s];return"metas"in a?r[s]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[s]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ob;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(ob||(ob={}));var Bd;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Bd||(Bd={}));var Ua;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ua||(Ua={}));class X1{constructor(t,r={config:{}},s){var a,o;if(this.topic=t,this.params=r,this.socket=s,this.bindings={},this.state=Ur.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new hg(this,Zs.join,this.params,this.timeout),this.rejoinTimer=new GC(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ur.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ur.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Ur.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ur.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Ur.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Zs.reply,{},(c,u)=>{this._trigger(this._replyEventName(u),c)}),this.presence=new Fd(this),this.broadcastEndpointURL=KC(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var s,a,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Ur.closed){const{config:{broadcast:c,presence:u,private:f}}=this.params,p=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(j=>j.filter))!==null&&a!==void 0?a:[],x=!!this.bindings[Bd.PRESENCE]&&this.bindings[Bd.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,w={},b={broadcast:c,presence:Object.assign(Object.assign({},u),{enabled:x}),postgres_changes:p,private:f};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(j=>t==null?void 0:t(Ua.CHANNEL_ERROR,j)),this._onClose(()=>t==null?void 0:t(Ua.CLOSED)),this.updateJoinPayload(Object.assign({config:b},w)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:j})=>{var N;if(this.socket.setAuth(),j===void 0){t==null||t(Ua.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,T=(N=C==null?void 0:C.length)!==null&&N!==void 0?N:0,S=[];for(let E=0;E<T;E++){const _=C[E],{filter:{event:k,schema:D,table:L,filter:R}}=_,M=j&&j[E];if(M&&M.event===k&&M.schema===D&&M.table===L&&M.filter===R)S.push(Object.assign(Object.assign({},_),{id:M.id}));else{this.unsubscribe(),this.state=Ur.errored,t==null||t(Ua.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,t&&t(Ua.SUBSCRIBED);return}}).receive("error",j=>{this.state=Ur.errored,t==null||t(Ua.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(j).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ua.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,s){return this.state===Ur.joined&&t===Bd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,s)}async send(t,r={}){var s,a;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:c}=t,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:c,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=p.body)===null||a===void 0?void 0:a.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var c,u,f;const p=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((f=(u=(c=this.params)===null||c===void 0?void 0:c.config)===null||u===void 0?void 0:u.broadcast)===null||f===void 0)&&f.ack)&&o("ok"),p.receive("ok",()=>o("ok")),p.receive("error",()=>o("error")),p.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ur.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Zs.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new hg(this,Zs.leave,{},t),s.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ur.closed,this.bindings={}}async _fetchWithTimeout(t,r,s){const a=new AbortController,o=setTimeout(()=>a.abort(),s),c=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(o),c}_push(t,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new hg(this,t,r,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>KD){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,s){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,s){var a,o;const c=t.toLocaleLowerCase(),{close:u,error:f,leave:p,join:x}=Zs;if(s&&[u,f,p,x].indexOf(c)>=0&&s!==this._joinRef())return;let b=this._onMessage(c,r,s);if(r&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(j=>{var N,C,T;return((N=j.filter)===null||N===void 0?void 0:N.event)==="*"||((T=(C=j.filter)===null||C===void 0?void 0:C.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===c}).map(j=>j.callback(b,s)):(o=this.bindings[c])===null||o===void 0||o.filter(j=>{var N,C,T,S,E,_;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in j){const k=j.id,D=(N=j.filter)===null||N===void 0?void 0:N.event;return k&&((C=r.ids)===null||C===void 0?void 0:C.includes(k))&&(D==="*"||(D==null?void 0:D.toLocaleLowerCase())===((T=r.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const k=(E=(S=j==null?void 0:j.filter)===null||S===void 0?void 0:S.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return k==="*"||k===((_=r==null?void 0:r.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return j.type.toLocaleLowerCase()===c}).map(j=>{if(typeof b=="object"&&"ids"in b){const N=b.data,{schema:C,table:T,commit_timestamp:S,type:E,errors:_}=N;b=Object.assign(Object.assign({},{schema:C,table:T,commit_timestamp:S,eventType:E,new:{},old:{},errors:_}),this._getPayloadRecords(N))}j.callback(b,s)})}_isClosed(){return this.state===Ur.closed}_isJoined(){return this.state===Ur.joined}_isJoining(){return this.state===Ur.joining}_isLeaving(){return this.state===Ur.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,s){const a=t.toLocaleLowerCase(),o={type:a,filter:r,callback:s};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(t,r){const s=t.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===s&&X1.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const s in t)if(t[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Zs.close,{},t)}_onError(t){this._on(Zs.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ur.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=ab(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=ab(t.columns,t.old_record)),r}}const fg=()=>{},kh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},nM=[1e3,2e3,5e3,1e4],sM=1e4,aM=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class iM{constructor(t,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Xx,this.transport=null,this.heartbeatIntervalMs=kh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=fg,this.ref=0,this.reconnectTimer=null,this.logger=fg,this.conn=null,this.sendBuffer=[],this.serializer=new YD,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...c)=>Gc(async()=>{const{default:u}=await Promise.resolve().then(()=>Xc);return{default:u}},void 0,import.meta.url).then(({default:u})=>u(...c)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...c)=>o(...c)},!(!((s=r==null?void 0:r.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Kx.websocket}`,this.httpEndpoint=KC(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=qD.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:GD}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,s){this.logger(t,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Ld.connecting:return Eo.Connecting;case Ld.open:return Eo.Open;case Ld.closing:return Eo.Closing;default:return Eo.Closed}}isConnected(){return this.connectionState()===Eo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const s=`realtime:${t}`,a=this.getChannels().find(o=>o.topic===s);if(a)return a;{const o=new X1(`realtime:${t}`,r,this);return this.channels.push(o),o}}push(t){const{topic:r,event:s,payload:a,ref:o}=t,c=()=>{this.encode(t,u=>{var f;(f=this.conn)===null||f===void 0||f.send(u)})};this.log("push",`${r} ${s} (${o})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(XD,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},kh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:o,ref:c}=r,u=c?`(${c})`:"",f=o.status||"";this.log("receive",`${f} ${s} ${a} ${u}`.trim(),o),this.channels.filter(p=>p._isMember(s)).forEach(p=>p._trigger(a,o,c)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Zs.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const s=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${s}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const s=new Blob([aM],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const a={access_token:r,version:HD};r&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(Zs.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(s=>{try{s(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(s){this.log("error",`error triggering ${t} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new GC(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},kh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,s,a,o,c,u,f,p,x;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(s=t==null?void 0:t.timeout)!==null&&s!==void 0?s:Xx,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:kh.HEARTBEAT_INTERVAL,this.worker=(o=t==null?void 0:t.worker)!==null&&o!==void 0?o:!1,this.accessToken=(c=t==null?void 0:t.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:fg,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=t==null?void 0:t.reconnectAfterMs)!==null&&f!==void 0?f:w=>nM[w-1]||sM,this.encode=(p=t==null?void 0:t.encode)!==null&&p!==void 0?p:(w,b)=>b(JSON.stringify(w)),this.decode=(x=t==null?void 0:t.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class K1 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Or(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class oM extends K1{constructor(t,r,s){super(t),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Qx extends K1{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var lM=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{p(s.next(x))}catch(w){c(w)}}function f(x){try{p(s.throw(x))}catch(w){c(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})};const YC=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Gc(async()=>{const{default:s}=await Promise.resolve().then(()=>Xc);return{default:s}},void 0,import.meta.url).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)},cM=()=>lM(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Gc(()=>Promise.resolve().then(()=>Xc),void 0,import.meta.url)).Response:Response}),Zx=e=>{if(Array.isArray(e))return e.map(r=>Zx(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,s])=>{const a=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[a]=Zx(s)}),t},dM=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var ml=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{p(s.next(x))}catch(w){c(w)}}function f(x){try{p(s.throw(x))}catch(w){c(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})};const mg=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),uM=(e,t,r)=>ml(void 0,void 0,void 0,function*(){const s=yield cM();e instanceof s&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{const o=e.status||500,c=(a==null?void 0:a.statusCode)||o+"";t(new oM(mg(a),o,c))}).catch(a=>{t(new Qx(mg(a),a))}):t(new Qx(mg(e),e))}),hM=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!s?a:(dM(s)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(s)):a.body=s,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function Fu(e,t,r,s,a,o){return ml(this,void 0,void 0,function*(){return new Promise((c,u)=>{e(r,hM(t,s,a,o)).then(f=>{if(!f.ok)throw f;return s!=null&&s.noResolveJson?f:f.json()}).then(f=>c(f)).catch(f=>uM(f,u,s))})})}function Bf(e,t,r,s){return ml(this,void 0,void 0,function*(){return Fu(e,"GET",t,r,s)})}function xa(e,t,r,s,a){return ml(this,void 0,void 0,function*(){return Fu(e,"POST",t,s,a,r)})}function Jx(e,t,r,s,a){return ml(this,void 0,void 0,function*(){return Fu(e,"PUT",t,s,a,r)})}function fM(e,t,r,s){return ml(this,void 0,void 0,function*(){return Fu(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function QC(e,t,r,s,a){return ml(this,void 0,void 0,function*(){return Fu(e,"DELETE",t,s,a,r)})}var mM=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{p(s.next(x))}catch(w){c(w)}}function f(x){try{p(s.throw(x))}catch(w){c(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})};class pM{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return mM(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Or(t))return{data:null,error:t};throw t}})}}var gM=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{p(s.next(x))}catch(w){c(w)}}function f(x){try{p(s.throw(x))}catch(w){c(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})};class xM{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}asStream(){return new pM(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.execute().then(t,r)}execute(){return gM(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Or(t))return{data:null,error:t};throw t}})}}var Bn=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{p(s.next(x))}catch(w){c(w)}}function f(x){try{p(s.throw(x))}catch(w){c(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})};const vM={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},lb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class wM{constructor(t,r={},s,a){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=s,this.fetch=YC(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,s,a){return Bn(this,void 0,void 0,function*(){try{let o;const c=Object.assign(Object.assign({},lb),a);let u=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(c.upsert)});const f=c.metadata;typeof Blob<"u"&&s instanceof Blob?(o=new FormData,o.append("cacheControl",c.cacheControl),f&&o.append("metadata",this.encodeMetadata(f)),o.append("",s)):typeof FormData<"u"&&s instanceof FormData?(o=s,o.append("cacheControl",c.cacheControl),f&&o.append("metadata",this.encodeMetadata(f))):(o=s,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType,f&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),a!=null&&a.headers&&(u=Object.assign(Object.assign({},u),a.headers));const p=this._removeEmptyFolders(r),x=this._getFinalPath(p),w=yield(t=="PUT"?Jx:xa)(this.fetch,`${this.url}/object/${x}`,o,Object.assign({headers:u},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:p,id:w.Id,fullPath:w.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Or(o))return{data:null,error:o};throw o}})}upload(t,r,s){return Bn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,s)})}uploadToSignedUrl(t,r,s,a){return Bn(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),c=this._getFinalPath(o),u=new URL(this.url+`/object/upload/sign/${c}`);u.searchParams.set("token",r);try{let f;const p=Object.assign({upsert:lb.upsert},a),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&s instanceof Blob?(f=new FormData,f.append("cacheControl",p.cacheControl),f.append("",s)):typeof FormData<"u"&&s instanceof FormData?(f=s,f.append("cacheControl",p.cacheControl)):(f=s,x["cache-control"]=`max-age=${p.cacheControl}`,x["content-type"]=p.contentType);const w=yield Jx(this.fetch,u.toString(),f,{headers:x});return{data:{path:o,fullPath:w.Key},error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(Or(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(t,r){return Bn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const o=yield xa(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),c=new URL(this.url+o.url),u=c.searchParams.get("token");if(!u)throw new K1("No token returned by API");return{data:{signedUrl:c.toString(),path:t,token:u},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Or(s))return{data:null,error:s};throw s}})}update(t,r,s){return Bn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,s)})}move(t,r,s){return Bn(this,void 0,void 0,function*(){try{return{data:yield xa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Or(a))return{data:null,error:a};throw a}})}copy(t,r,s){return Bn(this,void 0,void 0,function*(){try{return{data:{path:(yield xa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Or(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,s){return Bn(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),o=yield xa(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const c=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${c}`)},{data:o,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Or(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,s){return Bn(this,void 0,void 0,function*(){try{const a=yield xa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${o}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Or(a))return{data:null,error:a};throw a}})}download(t,r){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),c=o?`?${o}`:"",u=this._getFinalPath(t),f=()=>Bf(this.fetch,`${this.url}/${a}/${u}${c}`,{headers:this.headers,noResolveJson:!0});return new xM(f,this.shouldThrowOnError)}info(t){return Bn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const s=yield Bf(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Zx(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Or(s))return{data:null,error:s};throw s}})}exists(t){return Bn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield fM(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Or(s)&&s instanceof Qx){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}})}getPublicUrl(t,r){const s=this._getFinalPath(t),a=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&a.push(o);const u=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",f=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});f!==""&&a.push(f);let p=a.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${s}${p}`)}}}remove(t){return Bn(this,void 0,void 0,function*(){try{return{data:yield QC(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Or(r))return{data:null,error:r};throw r}})}list(t,r,s){return Bn(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},vM),r),{prefix:t||""});return{data:yield xa(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Or(a))return{data:null,error:a};throw a}})}listV2(t,r){return Bn(this,void 0,void 0,function*(){try{const s=Object.assign({},t);return{data:yield xa(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Or(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const yM="2.75.0",bM={"X-Client-Info":`storage-js/${yM}`};var Sl=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{p(s.next(x))}catch(w){c(w)}}function f(x){try{p(s.throw(x))}catch(w){c(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})};class _M{constructor(t,r={},s,a){this.shouldThrowOnError=!1;const o=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},bM),r),this.fetch=YC(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Sl(this,void 0,void 0,function*(){try{return{data:yield Bf(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Or(t))return{data:null,error:t};throw t}})}getBucket(t){return Sl(this,void 0,void 0,function*(){try{return{data:yield Bf(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Or(r))return{data:null,error:r};throw r}})}createBucket(t){return Sl(this,arguments,void 0,function*(r,s={public:!1}){try{return{data:yield xa(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Or(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return Sl(this,void 0,void 0,function*(){try{return{data:yield Jx(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Or(s))return{data:null,error:s};throw s}})}emptyBucket(t){return Sl(this,void 0,void 0,function*(){try{return{data:yield xa(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Or(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Sl(this,void 0,void 0,function*(){try{return{data:yield QC(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Or(r))return{data:null,error:r};throw r}})}}class NM extends _M{constructor(t,r={},s,a){super(t,r,s,a)}from(t){return new wM(this.url,this.headers,t,this.fetch)}}const jM="2.75.0";let jd="";typeof Deno<"u"?jd="deno":typeof document<"u"?jd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?jd="react-native":jd="node";const CM={"X-Client-Info":`supabase-js-${jd}/${jM}`},EM={headers:CM},SM={schema:"public"},AM={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},kM={};var TM=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{p(s.next(x))}catch(w){c(w)}}function f(x){try{p(s.throw(x))}catch(w){c(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})};const IM=e=>{let t;return e?t=e:typeof fetch>"u"?t=MC:t=fetch,(...r)=>t(...r)},RM=()=>typeof Headers>"u"?LC:Headers,PM=(e,t,r)=>{const s=IM(r),a=RM();return(o,c)=>TM(void 0,void 0,void 0,function*(){var u;const f=(u=yield t())!==null&&u!==void 0?u:e;let p=new a(c==null?void 0:c.headers);return p.has("apikey")||p.set("apikey",e),p.has("Authorization")||p.set("Authorization",`Bearer ${f}`),s(o,Object.assign(Object.assign({},c),{headers:p}))})};var OM=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{p(s.next(x))}catch(w){c(w)}}function f(x){try{p(s.throw(x))}catch(w){c(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})};function DM(e){return e.endsWith("/")?e:e+"/"}function MM(e,t){var r,s;const{db:a,auth:o,realtime:c,global:u}=e,{db:f,auth:p,realtime:x,global:w}=t,b={db:Object.assign(Object.assign({},f),a),auth:Object.assign(Object.assign({},p),o),realtime:Object.assign(Object.assign({},x),c),storage:{},global:Object.assign(Object.assign(Object.assign({},w),u),{headers:Object.assign(Object.assign({},(r=w==null?void 0:w.headers)!==null&&r!==void 0?r:{}),(s=u==null?void 0:u.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>OM(this,void 0,void 0,function*(){return""})};return e.accessToken?b.accessToken=e.accessToken:delete b.accessToken,b}function LM(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(DM(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const ZC="2.75.0",Ll=30*1e3,e0=3,pg=e0*Ll,FM="http://localhost:9999",BM="supabase.auth.token",zM={"X-Client-Info":`gotrue-js/${ZC}`},t0="X-Supabase-Api-Version",JC={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},UM=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,$M=10*60*1e3;class mu extends Error{constructor(t,r,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function nt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class VM extends mu{constructor(t,r,s){super(t,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function qM(e){return nt(e)&&e.name==="AuthApiError"}class So extends mu{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class io extends mu{constructor(t,r,s,a){super(t,s,a),this.name=r,this.status=s}}class xi extends io{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function WM(e){return nt(e)&&e.name==="AuthSessionMissingError"}class Al extends io{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Th extends io{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ih extends io{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function HM(e){return nt(e)&&e.name==="AuthImplicitGrantRedirectError"}class cb extends io{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class r0 extends io{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function gg(e){return nt(e)&&e.name==="AuthRetryableFetchError"}class db extends io{constructor(t,r,s){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class n0 extends io{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const zf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ub=` 	
\r=`.split(""),GM=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<ub.length;t+=1)e[ub[t].charCodeAt(0)]=-2;for(let t=0;t<zf.length;t+=1)e[zf[t].charCodeAt(0)]=t;return e})();function hb(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(zf[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(zf[s]),t.queuedBits-=6}}function eE(e,t,r){const s=GM[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function fb(e){const t=[],r=c=>{t.push(String.fromCodePoint(c))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=c=>{YM(c,s,r)};for(let c=0;c<e.length;c+=1)eE(e.charCodeAt(c),a,o);return t.join("")}function XM(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function KM(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}XM(s,t)}}function YM(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function lc(e){const t=[],r={queue:0,queuedBits:0},s=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)eE(e.charCodeAt(a),r,s);return new Uint8Array(t)}function QM(e){const t=[];return KM(e,r=>t.push(r)),new Uint8Array(t)}function Io(e){const t=[],r={queue:0,queuedBits:0},s=a=>{t.push(a)};return e.forEach(a=>hb(a,r,s)),hb(null,r,s),t.join("")}function ZM(e){return Math.round(Date.now()/1e3)+e}function JM(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const ts=()=>typeof window<"u"&&typeof document<"u",vo={tested:!1,writable:!1},tE=()=>{if(!ts())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(vo.tested)return vo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),vo.tested=!0,vo.writable=!0}catch{vo.tested=!0,vo.writable=!1}return vo.writable};function e7(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,o)=>{t[o]=a})}catch{}return r.searchParams.forEach((s,a)=>{t[a]=s}),t}const rE=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Gc(async()=>{const{default:s}=await Promise.resolve().then(()=>Xc);return{default:s}},void 0,import.meta.url).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)},t7=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Fl=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},wo=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},fi=async(e,t)=>{await e.removeItem(t)};class Fm{constructor(){this.promise=new Fm.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Fm.promiseConstructor=Promise;function xg(e){const t=e.split(".");if(t.length!==3)throw new n0("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!UM.test(t[s]))throw new n0("JWT not in base64url format");return{header:JSON.parse(fb(t[0])),payload:JSON.parse(fb(t[1])),signature:lc(t[2]),raw:{header:t[0],payload:t[1]}}}async function r7(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function n7(e,t){return new Promise((s,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const c=await e(o);if(!t(o,null,c)){s(c);return}}catch(c){if(!t(o,c)){a(c);return}}})()})}function s7(e){return("0"+e.toString(16)).substr(-2)}function a7(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let a="";for(let o=0;o<56;o++)a+=r.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(t),Array.from(t,s7).join("")}async function i7(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(s);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function o7(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await i7(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function kl(e,t,r=!1){const s=a7();let a=s;r&&(a+="/PASSWORD_RECOVERY"),await Fl(e,`${t}-code-verifier`,a);const o=await o7(s);return[o,s===o?"plain":"s256"]}const l7=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function c7(e){const t=e.headers.get(t0);if(!t||!t.match(l7))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function d7(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function u7(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const h7=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Tl(e){if(!h7.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function vg(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function mb(e){return JSON.parse(JSON.stringify(e))}var f7=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r};const No=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),m7=[502,503,504];async function pb(e){var t;if(!t7(e))throw new r0(No(e),0);if(m7.includes(e.status))throw new r0(No(e),e.status);let r;try{r=await e.json()}catch(o){throw new So(No(o),o)}let s;const a=c7(e);if(a&&a.getTime()>=JC["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new db(No(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new xi}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,c)=>o&&typeof c=="string",!0))throw new db(No(r),e.status,r.weak_password.reasons);throw new VM(No(r),e.status||500,s)}const p7=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),r))};async function ht(e,t,r,s){var a;const o=Object.assign({},s==null?void 0:s.headers);o[t0]||(o[t0]=JC["2024-01-01"].name),s!=null&&s.jwt&&(o.Authorization=`Bearer ${s.jwt}`);const c=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(c.redirect_to=s.redirectTo);const u=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",f=await g7(e,t,r+u,{headers:o,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(f):{data:Object.assign({},f),error:null}}async function g7(e,t,r,s,a,o){const c=p7(t,s,a,o);let u;try{u=await e(r,Object.assign({},c))}catch(f){throw console.error(f),new r0(No(f),0)}if(u.ok||await pb(u),s!=null&&s.noResolveJson)return u;try{return await u.json()}catch(f){await pb(f)}}function Ws(e){var t;let r=null;w7(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=ZM(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:s},error:null}}function gb(e){const t=Ws(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ni(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function x7(e){return{data:e,error:null}}function v7(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:a,verification_type:o}=e,c=f7(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:r,hashed_token:s,redirect_to:a,verification_type:o},f=Object.assign({},c);return{data:{properties:u,user:f},error:null}}function xb(e){return e}function w7(e){return e.access_token&&e.refresh_token&&e.expires_in}const wg=["global","local","others"];var y7=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r};class b7{constructor({url:t="",headers:r={},fetch:s}){this.url=t,this.headers=r,this.fetch=rE(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=wg[0]){if(wg.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${wg.join(", ")}`);try{return await ht(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(nt(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,r={}){try{return await ht(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ni})}catch(s){if(nt(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:r}=t,s=y7(t,["options"]),a=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await ht(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:v7,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(nt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await ht(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ni})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,s,a,o,c,u,f;try{const p={nextPage:null,lastPage:0,total:0},x=await ht(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(o=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:xb});if(x.error)throw x.error;const w=await x.json(),b=(c=x.headers.get("x-total-count"))!==null&&c!==void 0?c:0,j=(f=(u=x.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return j.length>0&&(j.forEach(N=>{const C=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(N.split(";")[1].split("=")[1]);p[`${T}Page`]=C}),p.total=parseInt(b)),{data:Object.assign(Object.assign({},w),p),error:null}}catch(p){if(nt(p))return{data:{users:[]},error:p};throw p}}async getUserById(t){Tl(t);try{return await ht(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ni})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Tl(t);try{return await ht(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Ni})}catch(s){if(nt(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,r=!1){Tl(t);try{return await ht(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ni})}catch(s){if(nt(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){Tl(t.userId);try{const{data:r,error:s}=await ht(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:s}}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Tl(t.userId),Tl(t.id);try{return{data:await ht(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,s,a,o,c,u,f;try{const p={nextPage:null,lastPage:0,total:0},x=await ht(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(o=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:xb});if(x.error)throw x.error;const w=await x.json(),b=(c=x.headers.get("x-total-count"))!==null&&c!==void 0?c:0,j=(f=(u=x.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return j.length>0&&(j.forEach(N=>{const C=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(N.split(";")[1].split("=")[1]);p[`${T}Page`]=C}),p.total=parseInt(b)),{data:Object.assign(Object.assign({},w),p),error:null}}catch(p){if(nt(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(t){try{return await ht(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await ht(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await ht(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await ht(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}}function vb(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Il={debug:!!(globalThis&&tE()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class nE extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class _7 extends nE{}async function N7(e,t,r){Il.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),Il.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){Il.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Il.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Il.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new _7(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Il.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function j7(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function sE(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function C7(e){return parseInt(e,16)}function E7(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,s=>s.toString(16).padStart(2,"0")).join("")}function S7(e){var t;const{chainId:r,domain:s,expirationTime:a,issuedAt:o=new Date,nonce:c,notBefore:u,requestId:f,resources:p,scheme:x,uri:w,version:b}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const j=sE(e.address),N=x?`${x}://${s}`:s,C=e.statement?`${e.statement}
`:"",T=`${N} wants you to sign in with your Ethereum account:
${j}

${C}`;let S=`URI: ${w}
Version: ${b}
Chain ID: ${r}${c?`
Nonce: ${c}`:""}
Issued At: ${o.toISOString()}`;if(a&&(S+=`
Expiration Time: ${a.toISOString()}`),u&&(S+=`
Not Before: ${u.toISOString()}`),f&&(S+=`
Request ID: ${f}`),p){let E=`
Resources:`;for(const _ of p){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);E+=`
- ${_}`}S+=E}return`${T}
${S}`}class Pr extends Error{constructor({message:t,code:r,cause:s,name:a}){var o;super(t,{cause:s}),this.__isWebAuthnError=!0,this.name=(o=a??(s instanceof Error?s.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=r}}class Uf extends Pr{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function A7({error:e,options:t}){var r,s,a;const{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Pr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=o.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Pr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Pr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=o.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Pr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Pr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Pr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new Pr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Pr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const c=window.location.hostname;if(iE(c)){if(o.rp.id!==c)return new Pr({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Pr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Pr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Pr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Pr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function k7({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Pr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Pr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(iE(s)){if(r.rpId!==s)return new Pr({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Pr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Pr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Pr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var aE=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r};class T7{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const I7=new T7;function R7(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:s}=e,a=aE(e,["challenge","user","excludeCredentials"]),o=lc(t).buffer,c=Object.assign(Object.assign({},r),{id:lc(r.id).buffer}),u=Object.assign(Object.assign({},a),{challenge:o,user:c});if(s&&s.length>0){u.excludeCredentials=new Array(s.length);for(let f=0;f<s.length;f++){const p=s[f];u.excludeCredentials[f]=Object.assign(Object.assign({},p),{id:lc(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return u}function P7(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,s=aE(e,["challenge","allowCredentials"]),a=lc(t).buffer,o=Object.assign(Object.assign({},s),{challenge:a});if(r&&r.length>0){o.allowCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const u=r[c];o.allowCredentials[c]=Object.assign(Object.assign({},u),{id:lc(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function O7(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Io(new Uint8Array(e.response.attestationObject)),clientDataJSON:Io(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function D7(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,s=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Io(new Uint8Array(a.authenticatorData)),clientDataJSON:Io(new Uint8Array(a.clientDataJSON)),signature:Io(new Uint8Array(a.signature)),userHandle:a.userHandle?Io(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function iE(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function wb(){var e,t;return!!(ts()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function M7(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Uf("Browser returned unexpected credential type",t)}:{data:null,error:new Uf("Empty credential response",t)}}catch(t){return{data:null,error:A7({error:t,options:e})}}}async function L7(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Uf("Browser returned unexpected credential type",t)}:{data:null,error:new Uf("Empty credential response",t)}}catch(t){return{data:null,error:k7({error:t,options:e})}}}const F7={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},B7={userVerification:"preferred",hints:["security-key"]};function $f(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of e)if(a)for(const o in a){const c=a[o];if(c!==void 0)if(Array.isArray(c))s[o]=c;else if(r(c))s[o]=c;else if(t(c)){const u=s[o];t(u)?s[o]=$f(u,c):s[o]=$f(c)}else s[o]=c}return s}function z7(e,t){return $f(F7,e,t||{})}function U7(e,t){return $f(B7,e,t||{})}class $7{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:s,signal:a},o){try{const{data:c,error:u}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!c)return{data:null,error:u};const f=a??I7.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:p}=c.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${s}`),p.displayName||(p.displayName=p.name)}switch(c.webauthn.type){case"create":{const p=z7(c.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:x,error:w}=await M7({publicKey:p,signal:f});return x?{data:{factorId:t,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:x}},error:null}:{data:null,error:w}}case"request":{const p=U7(c.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:x,error:w}=await L7(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:p,signal:f}));return x?{data:{factorId:t,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:x}},error:null}:{data:null,error:w}}}}catch(c){return nt(c)?{data:null,error:c}:{data:null,error:new So("Unexpected error in challenge",c)}}}async _verify({challengeId:t,factorId:r,webauthn:s}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:s})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}},o){if(!r)return{data:null,error:new mu("rpId is required for WebAuthn authentication")};try{if(!wb())return{data:null,error:new So("Browser does not support WebAuthn",null)};const{data:c,error:u}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:s},signal:a},{request:o});if(!c)return{data:null,error:u};const{webauthn:f}=c;return this._verify({factorId:t,challengeId:c.challengeId,webauthn:{type:f.type,rpId:r,rpOrigins:s,credential_response:f.credential_response}})}catch(c){return nt(c)?{data:null,error:c}:{data:null,error:new So("Unexpected error in authenticate",c)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a},o){if(!r)return{data:null,error:new mu("rpId is required for WebAuthn registration")};try{if(!wb())return{data:null,error:new So("Browser does not support WebAuthn",null)};const{data:c,error:u}=await this._enroll({friendlyName:t});if(!c)return await this.client.mfa.listFactors().then(x=>{var w;return(w=x.data)===null||w===void 0?void 0:w.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===t&&b.status!=="unverified")}).then(x=>x?this.client.mfa.unenroll({factorId:x==null?void 0:x.id}):void 0),{data:null,error:u};const{data:f,error:p}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:r,rpOrigins:s},signal:a},{create:o});return f?this._verify({factorId:c.id,challengeId:f.challengeId,webauthn:{rpId:r,rpOrigins:s,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:p}}catch(c){return nt(c)?{data:null,error:c}:{data:null,error:new So("Unexpected error in register",c)}}}}j7();const V7={url:FM,storageKey:BM,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:zM,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function yb(e,t,r){return await r()}const Rl={};class pu{get jwks(){var t,r;return(r=(t=Rl[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Rl[this.storageKey]=Object.assign(Object.assign({},Rl[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Rl[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Rl[this.storageKey]=Object.assign(Object.assign({},Rl[this.storageKey]),{cachedAt:t})}constructor(t){var r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=pu.nextInstanceID,pu.nextInstanceID+=1,this.instanceID>0&&ts()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},V7),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new b7({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=rE(a.fetch),this.lock=a.lock||yb,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:ts()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=N7:this.lock=yb,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new $7(this)},this.persistSession?(a.storage?this.storage=a.storage:tE()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=vb(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=vb(this.memoryStorage)),ts()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ZC}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=e7(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),ts()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:o}=await this._getSessionFromURL(r,s);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),HM(o)){const f=(t=o.details)===null||t===void 0?void 0:t.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:c,redirectType:u}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",u),await this._saveSession(c),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return nt(r)?{error:r}:{error:new So("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,s,a;try{const o=await ht(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Ws}),{data:c,error:u}=o;if(u||!c)return{data:{user:null,session:null},error:u};const f=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(o){if(nt(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var r,s,a;try{let o;if("email"in t){const{email:x,password:w,options:b}=t;let j=null,N=null;this.flowType==="pkce"&&([j,N]=await kl(this.storage,this.storageKey)),o=await ht(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b==null?void 0:b.emailRedirectTo,body:{email:x,password:w,data:(r=b==null?void 0:b.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:j,code_challenge_method:N},xform:Ws})}else if("phone"in t){const{phone:x,password:w,options:b}=t;o=await ht(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:w,data:(s=b==null?void 0:b.data)!==null&&s!==void 0?s:{},channel:(a=b==null?void 0:b.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken}},xform:Ws})}else throw new Th("You must provide either an email or phone number and a password");const{data:c,error:u}=o;if(u||!c)return{data:{user:null,session:null},error:u};const f=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(o){if(nt(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let r;if("email"in t){const{email:o,password:c,options:u}=t;r=await ht(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:c,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:gb})}else if("phone"in t){const{phone:o,password:c,options:u}=t;r=await ht(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:c,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:gb})}else throw new Th("You must provide either an email or phone number and a password");const{data:s,error:a}=r;return a?{data:{user:null,session:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Al}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(r){if(nt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,s,a,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,s,a,o,c,u,f,p,x,w,b;let j,N;if("message"in t)j=t.message,N=t.signature;else{const{chain:C,wallet:T,statement:S,options:E}=t;let _;if(ts())if(typeof T=="object")_=T;else{const P=window;if("ethereum"in P&&typeof P.ethereum=="object"&&"request"in P.ethereum&&typeof P.ethereum.request=="function")_=P.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!(E!=null&&E.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=T}const k=new URL((r=E==null?void 0:E.url)!==null&&r!==void 0?r:window.location.href),D=await _.request({method:"eth_requestAccounts"}).then(P=>P).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!D||D.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const L=sE(D[0]);let R=(s=E==null?void 0:E.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!R){const P=await _.request({method:"eth_chainId"});R=C7(P)}const M={domain:k.host,address:L,statement:S,uri:k.href,version:"1",chainId:R,nonce:(a=E==null?void 0:E.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(o=E==null?void 0:E.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(u=E==null?void 0:E.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(f=E==null?void 0:E.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(p=E==null?void 0:E.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(x=E==null?void 0:E.signInWithEthereum)===null||x===void 0?void 0:x.resources};j=S7(M),N=await _.request({method:"personal_sign",params:[E7(j),L]})}try{const{data:C,error:T}=await ht(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:j,signature:N},!((w=t.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Ws});if(T)throw T;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new Al}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:T})}catch(C){if(nt(C))return{data:{user:null,session:null},error:C};throw C}}async signInWithSolana(t){var r,s,a,o,c,u,f,p,x,w,b,j;let N,C;if("message"in t)N=t.message,C=t.signature;else{const{chain:T,wallet:S,statement:E,options:_}=t;let k;if(ts())if(typeof S=="object")k=S;else{const L=window;if("solana"in L&&typeof L.solana=="object"&&("signIn"in L.solana&&typeof L.solana.signIn=="function"||"signMessage"in L.solana&&typeof L.solana.signMessage=="function"))k=L.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=S}const D=new URL((r=_==null?void 0:_.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in k&&k.signIn){const L=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),E?{statement:E}:null));let R;if(Array.isArray(L)&&L[0]&&typeof L[0]=="object")R=L[0];else if(L&&typeof L=="object"&&"signedMessage"in L&&"signature"in L)R=L;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)N=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),C=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");N=[`${D.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(a=(s=_==null?void 0:_.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((c=_==null?void 0:_.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((u=_==null?void 0:_.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((f=_==null?void 0:_.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((p=_==null?void 0:_.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((w=(x=_==null?void 0:_.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||w===void 0)&&w.length?["Resources",..._.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const L=await k.signMessage(new TextEncoder().encode(N),"utf8");if(!L||!(L instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=L}}try{const{data:T,error:S}=await ht(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:N,signature:Io(C)},!((b=t.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(j=t.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:Ws});if(S)throw S;return!T||!T.session||!T.user?{data:{user:null,session:null},error:new Al}:(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),{data:Object.assign({},T),error:S})}catch(T){if(nt(T))return{data:{user:null,session:null},error:T};throw T}}async _exchangeCodeForSession(t){const r=await wo(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(r??"").split("/");try{const{data:o,error:c}=await ht(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:Ws});if(await fi(this.storage,`${this.storageKey}-code-verifier`),c)throw c;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Al}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:c})}catch(o){if(nt(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:r,provider:s,token:a,access_token:o,nonce:c}=t,u=await ht(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:o,nonce:c,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ws}),{data:f,error:p}=u;return p?{data:{user:null,session:null},error:p}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new Al}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:p})}catch(r){if(nt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,s,a,o,c;try{if("email"in t){const{email:u,options:f}=t;let p=null,x=null;this.flowType==="pkce"&&([p,x]=await kl(this.storage,this.storageKey));const{error:w}=await ht(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},create_user:(s=f==null?void 0:f.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:x},redirectTo:f==null?void 0:f.emailRedirectTo});return{data:{user:null,session:null},error:w}}if("phone"in t){const{phone:u,options:f}=t,{data:p,error:x}=await ht(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(a=f==null?void 0:f.data)!==null&&a!==void 0?a:{},create_user:(o=f==null?void 0:f.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(c=f==null?void 0:f.channel)!==null&&c!==void 0?c:"sms"}});return{data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:x}}throw new Th("You must provide either an email or phone number.")}catch(u){if(nt(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(t){var r,s;try{let a,o;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,o=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:c,error:u}=await ht(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:Ws});if(u)throw u;if(!c)throw new Error("An error occurred on token verification.");const f=c.session,p=c.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(a){if(nt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,s,a;try{let o=null,c=null;return this.flowType==="pkce"&&([o,c]=await kl(this.storage,this.storageKey)),await ht(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:c}),headers:this.headers,xform:x7})}catch(o){if(nt(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;if(s)throw s;if(!r)throw new xi;const{error:a}=await ht(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(nt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:s,type:a,options:o}=t,{error:c}=await ht(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:c}}else if("phone"in t){const{phone:s,type:a,options:o}=t,{data:c,error:u}=await ht(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Th("You must provide either an email or phone number and a type")}catch(r){if(nt(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await wo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<pg:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const c=await wo(this.userStorage,this.storageKey+"-user");c!=null&&c.user?t.user=c.user:t.user=vg()}if(this.storage.isServer&&t.user){let c=this.suppressGetSessionWarning;t=new Proxy(t,{get:(f,p,x)=>(!c&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),c=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,p,x))})}return{data:{session:t},error:null}}const{data:a,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ht(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ni}):await this._useSession(async r=>{var s,a,o;const{data:c,error:u}=r;if(u)throw u;return!(!((s=c.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new xi}:await ht(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:Ni})})}catch(r){if(nt(r))return WM(r)&&(await this._removeSession(),await fi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async s=>{const{data:a,error:o}=s;if(o)throw o;if(!a.session)throw new xi;const c=a.session;let u=null,f=null;this.flowType==="pkce"&&t.email!=null&&([u,f]=await kl(this.storage,this.storageKey));const{data:p,error:x}=await ht(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:f}),jwt:c.access_token,xform:Ni});if(x)throw x;return c.user=p.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}})}catch(s){if(nt(s))return{data:{user:null},error:s};throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new xi;const r=Date.now()/1e3;let s=r,a=!0,o=null;const{payload:c}=xg(t.access_token);if(c.exp&&(s=c.exp,a=s<=r),a){const{data:u,error:f}=await this._callRefreshToken(t.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:f}=await this._getUser(t.access_token);if(f)throw f;o={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if(nt(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var s;if(!t){const{data:c,error:u}=r;if(u)throw u;t=(s=c.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new xi;const{data:a,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(nt(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!ts())throw new Ih("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ih(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new cb("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ih("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new cb("No code detected.");const{data:E,error:_}=await this._exchangeCodeForSession(t.code);if(_)throw _;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:o,refresh_token:c,expires_in:u,expires_at:f,token_type:p}=t;if(!o||!u||!c||!p)throw new Ih("No session defined in URL");const x=Math.round(Date.now()/1e3),w=parseInt(u);let b=x+w;f&&(b=parseInt(f));const j=b-x;j*1e3<=Ll&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${j}s, should have been closer to ${w}s`);const N=b-w;x-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,b,x):x-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,b,x);const{data:C,error:T}=await this._getUser(o);if(T)throw T;const S={provider_token:s,provider_refresh_token:a,access_token:o,expires_in:w,expires_at:b,refresh_token:c,token_type:p,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:S,redirectType:t.type},error:null}}catch(s){if(nt(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await wo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:a,error:o}=r;if(o)return{error:o};const c=(s=a.session)===null||s===void 0?void 0:s.access_token;if(c){const{error:u}=await this.admin.signOut(c,t);if(u&&!(qM(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return t!=="others"&&(await this._removeSession(),await fi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=JM(),s={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async r=>{var s,a;try{const{data:{session:o},error:c}=r;if(c)throw c;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,r={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await kl(this.storage,this.storageKey,!0));try{return await ht(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(nt(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:s,error:a}=await this._useSession(async o=>{var c,u,f,p,x;const{data:w,error:b}=o;if(b)throw b;const j=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(c=t.options)===null||c===void 0?void 0:c.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(f=t.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await ht(this.fetch,"GET",j,{headers:this.headers,jwt:(x=(p=w.session)===null||p===void 0?void 0:p.access_token)!==null&&x!==void 0?x:void 0})});if(a)throw a;return ts()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:t.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(nt(s))return{data:{provider:t.provider,url:null},error:s};throw s}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var s;try{const{error:a,data:{session:o}}=r;if(a)throw a;const{options:c,provider:u,token:f,access_token:p,nonce:x}=t,w=await ht(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=o==null?void 0:o.access_token)!==null&&s!==void 0?s:void 0,body:{provider:u,id_token:f,access_token:p,nonce:x,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Ws}),{data:b,error:j}=w;return j?{data:{user:null,session:null},error:j}:!b||!b.session||!b.user?{data:{user:null,session:null},error:new Al}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),{data:b,error:j})}catch(a){if(nt(a))return{data:{user:null,session:null},error:a};throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var s,a;const{data:o,error:c}=r;if(c)throw c;return await ht(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await n7(async a=>(a>0&&await r7(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await ht(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ws})),(a,o)=>{const c=200*Math.pow(2,a);return o&&gg(o)&&Date.now()+c-s<Ll})}catch(s){if(this._debug(r,"error",s),nt(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",s),ts()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await wo(this.storage,this.storageKey);if(a&&this.userStorage){let c=await wo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await Fl(this.userStorage,this.storageKey+"-user",c)),a.user=(t=c==null?void 0:c.user)!==null&&t!==void 0?t:vg()}else if(a&&!a.user&&!a.user){const c=await wo(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(a.user=c.user,await fi(this.storage,this.storageKey+"-user"),await Fl(this.storage,this.storageKey,a)):a.user=vg()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const o=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<pg;if(this._debug(s,`session has${o?"":" not"} expired with margin of ${pg}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),gg(c)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:u}=await this._getUser(a.access_token);!u&&(c!=null&&c.user)?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(s,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var r,s;if(!t)throw new xi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Fm;const{data:o,error:c}=await this._refreshAccessToken(t);if(c)throw c;if(!o.session)throw new xi;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={data:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(a,"error",o),nt(o)){const c={data:null,error:o};return gg(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(c),c}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,s=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:r});const o=[],c=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,r)}catch(f){o.push(f)}});if(await Promise.all(c),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await Fl(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const o=mb(a);await Fl(this.storage,this.storageKey,o)}else{const a=mb(r);await Fl(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await fi(this.storage,this.storageKey),await fi(this.storage,this.storageKey+"-code-verifier"),await fi(this.storage,this.storageKey+"-user"),this.userStorage&&await fi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ts()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ll);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-t)/Ll);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Ll}ms, refresh threshold is ${e0} ticks`),a<=e0&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof nE)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ts()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,s){const a=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[o,c]=await kl(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(u.toString())}if(s!=null&&s.queryParams){const o=new URLSearchParams(s.queryParams);a.push(o.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var s;const{data:a,error:o}=r;return o?{data:null,error:o}:await ht(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var s,a;const{data:o,error:c}=r;if(c)return{data:null,error:c};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:f,error:p}=await ht(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});return p?{data:null,error:p}:(t.factorType==="totp"&&f.type==="totp"&&(!((a=f==null?void 0:f.totp)===null||a===void 0)&&a.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:o}=r;if(o)return{data:null,error:o};const c=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?O7(t.webauthn.credential_response):D7(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:f}=await ht(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:c,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:f})})}catch(r){if(nt(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:o}=r;if(o)return{data:null,error:o};const c=await ht(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});if(c.error)return c;const{data:u}=c;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:R7(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:P7(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(nt(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:s}=await this._challenge({factorId:t.factorId});return s?{data:null,error:s}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const o of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(o),o.status==="verified"&&a[o.factor_type].push(o);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,s;const{data:{session:a},error:o}=t;if(o)return{data:null,error:o};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=xg(a.access_token);let u=null;c.aal&&(u=c.aal);let f=u;((s=(r=a.user.factors)===null||r===void 0?void 0:r.filter(w=>w.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(f="aal2");const x=c.amr||[];return{data:{currentLevel:u,nextLevel:f,currentAuthenticationMethods:x},error:null}}))}async fetchJwk(t,r={keys:[]}){let s=r.keys.find(u=>u.kid===t);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(u=>u.kid===t),s&&this.jwks_cached_at+$M>a)return s;const{data:o,error:c}=await ht(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,s=o.keys.find(u=>u.kid===t),!s)?null:s}async getClaims(t,r={}){try{let s=t;if(!s){const{data:j,error:N}=await this.getSession();if(N||!j.session)return{data:null,error:N};s=j.session.access_token}const{header:a,payload:o,signature:c,raw:{header:u,payload:f}}=xg(s);r!=null&&r.allowExpired||d7(o.exp);const p=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!p){const{error:j}=await this.getUser(s);if(j)throw j;return{data:{claims:o,header:a,signature:c},error:null}}const x=u7(a.alg),w=await crypto.subtle.importKey("jwk",p,x,!0,["verify"]);if(!await crypto.subtle.verify(x,w,c,QM(`${u}.${f}`)))throw new n0("Invalid JWT signature");return{data:{claims:o,header:a,signature:c},error:null}}catch(s){if(nt(s))return{data:null,error:s};throw s}}}pu.nextInstanceID=0;const q7=pu;class W7 extends q7{constructor(t){super(t)}}var H7=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{p(s.next(x))}catch(w){c(w)}}function f(x){try{p(s.throw(x))}catch(w){c(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})};class G7{constructor(t,r,s){var a,o,c;this.supabaseUrl=t,this.supabaseKey=r;const u=LM(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const f=`sb-${u.hostname.split(".")[0]}-auth-token`,p={db:SM,realtime:kM,auth:Object.assign(Object.assign({},AM),{storageKey:f}),global:EM},x=MM(s??{},p);this.storageKey=(a=x.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=x.global.headers)!==null&&o!==void 0?o:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(w,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=x.auth)!==null&&c!==void 0?c:{},this.headers,x.global.fetch),this.fetch=PM(r,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new VD(new URL("rest/v1",u).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new NM(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new bD(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,s)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return H7(this,void 0,void 0,function*(){var t,r;if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(r=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:a,userStorage:o,storageKey:c,flowType:u,lock:f,debug:p},x,w){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new W7({url:this.authUrl.href,headers:Object.assign(Object.assign({},b),x),storageKey:c,autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:a,userStorage:o,flowType:u,lock:f,debug:p,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(j=>j.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new iM(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(t,r,s){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const X7=(e,t,r)=>new G7(e,t,r);function K7(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}K7()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Y7="https://nsyaecxzjqruqkbnaael.supabase.co",Q7="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5zeWFlY3h6anFydXFrYm5hYWVsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgxMjQwMjgsImV4cCI6MjA3MzcwMDAyOH0.bTmmKPcStHhkJgi0SJZjz-8YEll--FfRBvZH8ObOdKU",$=X7(Y7,Q7,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),oE=v.createContext(void 0);function Z7({children:e}){const[t,r]=v.useState(null),[s,a]=v.useState(null),[o,c]=v.useState(null),[u,f]=v.useState(!0),p=async j=>{try{const{data:N}=await $.from("profiles").select("role").eq("user_id",j).single();c((N==null?void 0:N.role)||"user")}catch(N){console.error("Error fetching user role:",N),c("user")}};v.useEffect(()=>{const{data:{subscription:j}}=$.auth.onAuthStateChange(async(N,C)=>{a(C),r((C==null?void 0:C.user)??null),C!=null&&C.user?p(C.user.id):c(null),f(!1)});return $.auth.getSession().then(({data:{session:N}})=>{a(N),r((N==null?void 0:N.user)??null),N!=null&&N.user&&p(N.user.id),f(!1)}),()=>j.unsubscribe()},[]);const x=async(j,N,C,T)=>{try{const S=`${window.location.origin}/`,{error:E}=await $.auth.signUp({email:j,password:N,options:{emailRedirectTo:S,data:{display_name:C,role:T}}});return E?(G.error(E.message),{error:E}):(G.success("Conta criada com sucesso! Verifique seu email."),{error:null})}catch(S){return G.error("Erro ao criar conta"),{error:S}}},w=async(j,N)=>{try{const{error:C}=await $.auth.signInWithPassword({email:j,password:N});return C?(G.error(C.message),{error:C}):(G.success("Login realizado com sucesso!"),{error:null})}catch(C){return G.error("Erro ao fazer login"),{error:C}}},b=async()=>{try{await $.auth.signOut({scope:"global"}),a(null),r(null),c(null),G.success("Logout realizado com sucesso!"),setTimeout(()=>{window.location.href="/"},100)}catch(j){a(null),r(null),c(null),console.error("Logout error:",j),setTimeout(()=>{window.location.href="/"},100)}};return n.jsx(oE.Provider,{value:{user:t,session:s,userRole:o,loading:u,signUp:x,signIn:w,signOut:b},children:e})}function bt(){const e=v.useContext(oE);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const lE=v.createContext(void 0);function J7({children:e,forcedTheme:t}){const[r,s]=v.useState(()=>t||localStorage.getItem("theme")||"dark");v.useEffect(()=>{if(t){s(t);const u=document.documentElement;u.classList.remove("dark","light"),u.classList.add(t);return}const c=document.documentElement;c.classList.remove("dark","light"),c.classList.add(r),localStorage.setItem("theme",r)},[r,t]);const a=c=>{t||s(c)},o=()=>{if(t)console.log("Theme toggle blocked by forcedTheme:",t);else{const c=r==="dark"?"light":"dark";console.log("Toggling theme from",r,"to",c),a(c)}};return n.jsx(lE.Provider,{value:{theme:r,setTheme:a,toggleTheme:o},children:e})}function Y1(){const e=v.useContext(lE);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}const eL=Iu("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ct({className:e,variant:t,...r}){return n.jsx("div",{className:Fe(eL({variant:t}),e),...r})}function tL(){const[e,t]=v.useState(0),{user:r}=bt();return v.useEffect(()=>{if(!r){t(0);return}(async()=>{const{count:o,error:c}=await $.from("user_messages").select("*",{count:"exact",head:!0}).eq("to_user_id",r.id).eq("read",!1);!c&&o!==null&&t(o)})();const a=$.channel("unread-messages-count").on("postgres_changes",{event:"INSERT",schema:"public",table:"user_messages"},o=>{const c=o.new;c.to_user_id===r.id&&!c.read&&t(u=>u+1)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"user_messages"},o=>{const c=o.new,u=o.old;c.to_user_id===r.id&&!u.read&&c.read&&t(f=>Math.max(0,f-1))}).subscribe();return()=>{$.removeChannel(a)}},[r]),e}function rL({activeTab:e,onTabChange:t,userType:r}){const{user:s}=bt(),a=_t(),o=Qn(),c=tL(),u=w=>{if(["friends","profile"].includes(w)&&!s){const j=o.pathname;a(`/auth?redirect=${encodeURIComponent(j)}`);return}t(w)},x=r==="organizer"?[{id:"home",icon:yy,label:"Início"},{id:"create",icon:R8,label:"Criar"},{id:"profile",icon:ms,label:"Perfil"}]:[{id:"home",icon:yy,label:"Início"},{id:"friends",icon:er,label:"Amigos"},{id:"profile",icon:ms,label:"Perfil"}];return n.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-card border-t border-border z-50",children:n.jsx("div",{className:"flex items-center justify-around py-2 px-4 max-w-md mx-auto",children:x.map(w=>{const b=e===w.id;return n.jsxs("button",{onClick:()=>u(w.id),className:Fe("flex flex-col items-center gap-1 py-2 px-3 rounded-lg transition-smooth relative",b?"text-primary glow-purple":"text-muted-foreground hover:text-foreground"),children:[n.jsx(w.icon,{className:Fe("h-5 w-5 transition-smooth",b&&"scale-110")}),n.jsx("span",{className:"text-xs font-medium",children:w.label}),w.id==="friends"&&c>0&&n.jsx(ct,{variant:"destructive",className:"absolute -top-0 -right-0 h-5 w-5 p-0 flex items-center justify-center text-xs rounded-full animate-pulse",children:c>9?"9+":c})]},w.id)})})})}const Q1=Iu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-smooth focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"gradient-primary text-primary-foreground hover:scale-105 shadow-purple",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-border bg-card hover:bg-surface hover:shadow-card",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-surface hover:text-foreground",link:"text-primary underline-offset-4 hover:underline",glow:"gradient-primary text-primary-foreground hover:glow-purple-strong hover:scale-105 shadow-purple",fab:"gradient-primary text-primary-foreground rounded-full shadow-elevated glow-purple hover:glow-purple-strong hover:scale-110 transition-bounce",live:"bg-destructive text-destructive-foreground animate-glow-pulse hover:scale-105",confirm:"bg-surface-elevated text-foreground border border-border hover:bg-surface hover:border-primary/50 hover:shadow-card"},size:{default:"h-10 px-4 py-2",sm:"h-8 rounded-md px-3",lg:"h-12 rounded-md px-8",xl:"h-14 rounded-lg px-10 text-base",icon:"h-10 w-10",fab:"h-14 w-14"}},defaultVariants:{variant:"default",size:"default"}}),K=v.forwardRef(({className:e,variant:t,size:r,asChild:s=!1,...a},o)=>{const c=s?BR:"button";return n.jsx(c,{className:Fe(Q1({variant:t,size:r,className:e})),ref:o,...a})});K.displayName="Button";var cE={exports:{}},dE={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rc=v;function nL(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var sL=typeof Object.is=="function"?Object.is:nL,aL=Rc.useState,iL=Rc.useEffect,oL=Rc.useLayoutEffect,lL=Rc.useDebugValue;function cL(e,t){var r=t(),s=aL({inst:{value:r,getSnapshot:t}}),a=s[0].inst,o=s[1];return oL(function(){a.value=r,a.getSnapshot=t,yg(a)&&o({inst:a})},[e,r,t]),iL(function(){return yg(a)&&o({inst:a}),e(function(){yg(a)&&o({inst:a})})},[e]),lL(r),r}function yg(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!sL(e,r)}catch{return!0}}function dL(e,t){return t()}var uL=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?dL:cL;dE.useSyncExternalStore=Rc.useSyncExternalStore!==void 0?Rc.useSyncExternalStore:uL;cE.exports=dE;var hL=cE.exports;function fL(){return hL.useSyncExternalStore(mL,()=>!0,()=>!1)}function mL(){return()=>{}}var Z1="Avatar",[pL]=Mr(Z1),[gL,uE]=pL(Z1),hE=v.forwardRef((e,t)=>{const{__scopeAvatar:r,...s}=e,[a,o]=v.useState("idle");return n.jsx(gL,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:o,children:n.jsx(Ve.span,{...s,ref:t})})});hE.displayName=Z1;var fE="AvatarImage",mE=v.forwardRef((e,t)=>{const{__scopeAvatar:r,src:s,onLoadingStatusChange:a=()=>{},...o}=e,c=uE(fE,r),u=xL(s,o),f=Er(p=>{a(p),c.onImageLoadingStatusChange(p)});return Rr(()=>{u!=="idle"&&f(u)},[u,f]),u==="loaded"?n.jsx(Ve.img,{...o,ref:t,src:s}):null});mE.displayName=fE;var pE="AvatarFallback",gE=v.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:s,...a}=e,o=uE(pE,r),[c,u]=v.useState(s===void 0);return v.useEffect(()=>{if(s!==void 0){const f=window.setTimeout(()=>u(!0),s);return()=>window.clearTimeout(f)}},[s]),c&&o.imageLoadingStatus!=="loaded"?n.jsx(Ve.span,{...a,ref:t}):null});gE.displayName=pE;function bb(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function xL(e,{referrerPolicy:t,crossOrigin:r}){const s=fL(),a=v.useRef(null),o=s?(a.current||(a.current=new window.Image),a.current):null,[c,u]=v.useState(()=>bb(o,e));return Rr(()=>{u(bb(o,e))},[o,e]),Rr(()=>{const f=w=>()=>{u(w)};if(!o)return;const p=f("loaded"),x=f("error");return o.addEventListener("load",p),o.addEventListener("error",x),t&&(o.referrerPolicy=t),typeof r=="string"&&(o.crossOrigin=r),()=>{o.removeEventListener("load",p),o.removeEventListener("error",x)}},[o,r,t]),c}var xE=hE,vE=mE,wE=gE;const Ut=v.forwardRef(({className:e,...t},r)=>n.jsx(xE,{ref:r,className:Fe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Ut.displayName=xE.displayName;const Kt=v.forwardRef(({className:e,...t},r)=>n.jsx(vE,{ref:r,className:Fe("aspect-square h-full w-full",e),...t}));Kt.displayName=vE.displayName;const $t=v.forwardRef(({className:e,...t},r)=>n.jsx(wE,{ref:r,className:Fe("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));$t.displayName=wE.displayName;function yE(){const[e,t]=v.useState([]),[r,s]=v.useState(0),[a,o]=v.useState(!0),{user:c}=bt();v.useEffect(()=>{if(!c){t([]),s(0),o(!1);return}u();const b=$.channel("notifications-changes").on("postgres_changes",{event:"*",schema:"public",table:"notifications",filter:`user_id=eq.${c.id}`},()=>{u()}).subscribe();return()=>{$.removeChannel(b)}},[c]);const u=async()=>{if(c)try{o(!0);const{data:b,error:j}=await $.from("notifications").select("*").eq("user_id",c.id).order("created_at",{ascending:!1}).limit(50);if(j)throw j;t(b||[]),s((b==null?void 0:b.filter(N=>!N.read).length)||0)}catch(b){console.error("Error fetching notifications:",b)}finally{o(!1)}};return{notifications:e,unreadCount:r,loading:a,markAsRead:async b=>{try{const j=e.find(C=>C.id===b);if(!j||j.read)return;t(C=>C.map(T=>T.id===b?{...T,read:!0}:T)),s(C=>Math.max(0,C-1));const{error:N}=await $.from("notifications").update({read:!0}).eq("id",b);if(N)throw N}catch(j){console.error("Error marking notification as read:",j),u()}},markAllAsRead:async()=>{if(c)try{t(j=>j.map(N=>({...N,read:!0}))),s(0);const{error:b}=await $.from("notifications").update({read:!0}).eq("user_id",c.id).eq("read",!1);if(b)throw b}catch(b){console.error("Error marking all as read:",b),u()}},deleteNotification:async b=>{try{const j=e.find(C=>C.id===b);t(C=>C.filter(T=>T.id!==b)),j&&!j.read&&s(C=>Math.max(0,C-1));const{error:N}=await $.from("notifications").delete().eq("id",b);if(N)throw N}catch(j){console.error("Error deleting notification:",j),u()}},refetch:u,clearLocalNotifications:()=>{t([]),s(0)}}}function bE(){const[e,t]=v.useState(!1);return{loading:e,acceptFriendRequest:async(a,o)=>{t(!0);try{const{error:c}=await $.from("friendships").update({status:"accepted"}).or(`and(id.eq.${a}),and(user_id.eq.${o})`);if(c)throw c;return G.success("Solicitação aceita!"),!0}catch(c){return console.error("Error accepting friend request:",c),G.error("Erro ao aceitar solicitação"),!1}finally{t(!1)}},declineFriendRequest:async(a,o)=>{t(!0);try{const{error:c}=await $.from("friendships").delete().or(`and(id.eq.${a}),and(user_id.eq.${o})`);if(c)throw c;return G.success("Solicitação recusada"),!0}catch(c){return console.error("Error declining friend request:",c),G.error("Erro ao recusar solicitação"),!1}finally{t(!1)}}}}function Jt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Yi(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const _E=6048e5,vL=864e5,Rh=43200,_b=1440;let wL={};function Bu(){return wL}function gu(e,t){var u,f,p,x;const r=Bu(),s=(t==null?void 0:t.weekStartsOn)??((f=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:f.weekStartsOn)??r.weekStartsOn??((x=(p=r.locale)==null?void 0:p.options)==null?void 0:x.weekStartsOn)??0,a=Jt(e),o=a.getDay(),c=(o<s?7:0)+o-s;return a.setDate(a.getDate()-c),a.setHours(0,0,0,0),a}function Vf(e){return gu(e,{weekStartsOn:1})}function NE(e){const t=Jt(e),r=t.getFullYear(),s=Yi(e,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=Vf(s),o=Yi(e,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const c=Vf(o);return t.getTime()>=a.getTime()?r+1:t.getTime()>=c.getTime()?r:r-1}function Nb(e){const t=Jt(e);return t.setHours(0,0,0,0),t}function qf(e){const t=Jt(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function yL(e,t){const r=Nb(e),s=Nb(t),a=+r-qf(r),o=+s-qf(s);return Math.round((a-o)/vL)}function bL(e){const t=NE(e),r=Yi(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Vf(r)}function nf(e,t){const r=Jt(e),s=Jt(t),a=r.getTime()-s.getTime();return a<0?-1:a>0?1:a}function _L(e){return Yi(e,Date.now())}function NL(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function jL(e){if(!NL(e)&&typeof e!="number")return!1;const t=Jt(e);return!isNaN(Number(t))}function CL(e,t){const r=Jt(e),s=Jt(t),a=r.getFullYear()-s.getFullYear(),o=r.getMonth()-s.getMonth();return a*12+o}function EL(e){return t=>{const s=(e?Math[e]:Math.trunc)(t);return s===0?0:s}}function SL(e,t){return+Jt(e)-+Jt(t)}function AL(e){const t=Jt(e);return t.setHours(23,59,59,999),t}function kL(e){const t=Jt(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function TL(e){const t=Jt(e);return+AL(t)==+kL(t)}function IL(e,t){const r=Jt(e),s=Jt(t),a=nf(r,s),o=Math.abs(CL(r,s));let c;if(o<1)c=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*o);let u=nf(r,s)===-a;TL(Jt(e))&&o===1&&nf(e,s)===1&&(u=!1),c=a*(o-Number(u))}return c===0?0:c}function RL(e,t,r){const s=SL(e,t)/1e3;return EL(r==null?void 0:r.roundingMethod)(s)}function PL(e){const t=Jt(e),r=Yi(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const OL={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},DL=(e,t,r)=>{let s;const a=OL[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function cc(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const ML={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},LL={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},FL={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},BL={date:cc({formats:ML,defaultWidth:"full"}),time:cc({formats:LL,defaultWidth:"full"}),dateTime:cc({formats:FL,defaultWidth:"full"})},zL={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},UL=(e,t,r,s)=>zL[e];function _a(e){return(t,r)=>{const s=r!=null&&r.context?String(r.context):"standalone";let a;if(s==="formatting"&&e.formattingValues){const c=e.defaultFormattingWidth||e.defaultWidth,u=r!=null&&r.width?String(r.width):c;a=e.formattingValues[u]||e.formattingValues[c]}else{const c=e.defaultWidth,u=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[u]||e.values[c]}const o=e.argumentCallback?e.argumentCallback(t):t;return a[o]}}const $L={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},VL={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},qL={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},WL={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},HL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},GL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},XL=(e,t)=>{const r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},KL={ordinalNumber:XL,era:_a({values:$L,defaultWidth:"wide"}),quarter:_a({values:VL,defaultWidth:"wide",argumentCallback:e=>e-1}),month:_a({values:qL,defaultWidth:"wide"}),day:_a({values:WL,defaultWidth:"wide"}),dayPeriod:_a({values:HL,defaultWidth:"wide",formattingValues:GL,defaultFormattingWidth:"wide"})};function Na(e){return(t,r={})=>{const s=r.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],o=t.match(a);if(!o)return null;const c=o[0],u=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],f=Array.isArray(u)?QL(u,w=>w.test(c)):YL(u,w=>w.test(c));let p;p=e.valueCallback?e.valueCallback(f):f,p=r.valueCallback?r.valueCallback(p):p;const x=t.slice(c.length);return{value:p,rest:x}}}function YL(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function QL(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function jE(e){return(t,r={})=>{const s=t.match(e.matchPattern);if(!s)return null;const a=s[0],o=t.match(e.parsePattern);if(!o)return null;let c=e.valueCallback?e.valueCallback(o[0]):o[0];c=r.valueCallback?r.valueCallback(c):c;const u=t.slice(a.length);return{value:c,rest:u}}}const ZL=/^(\d+)(th|st|nd|rd)?/i,JL=/\d+/i,e9={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},t9={any:[/^b/i,/^(a|c)/i]},r9={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},n9={any:[/1/i,/2/i,/3/i,/4/i]},s9={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},a9={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},i9={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},o9={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},l9={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},c9={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},d9={ordinalNumber:jE({matchPattern:ZL,parsePattern:JL,valueCallback:e=>parseInt(e,10)}),era:Na({matchPatterns:e9,defaultMatchWidth:"wide",parsePatterns:t9,defaultParseWidth:"any"}),quarter:Na({matchPatterns:r9,defaultMatchWidth:"wide",parsePatterns:n9,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Na({matchPatterns:s9,defaultMatchWidth:"wide",parsePatterns:a9,defaultParseWidth:"any"}),day:Na({matchPatterns:i9,defaultMatchWidth:"wide",parsePatterns:o9,defaultParseWidth:"any"}),dayPeriod:Na({matchPatterns:l9,defaultMatchWidth:"any",parsePatterns:c9,defaultParseWidth:"any"})},CE={code:"en-US",formatDistance:DL,formatLong:BL,formatRelative:UL,localize:KL,match:d9,options:{weekStartsOn:0,firstWeekContainsDate:1}};function u9(e){const t=Jt(e);return yL(t,PL(t))+1}function h9(e){const t=Jt(e),r=+Vf(t)-+bL(t);return Math.round(r/_E)+1}function EE(e,t){var x,w,b,j;const r=Jt(e),s=r.getFullYear(),a=Bu(),o=(t==null?void 0:t.firstWeekContainsDate)??((w=(x=t==null?void 0:t.locale)==null?void 0:x.options)==null?void 0:w.firstWeekContainsDate)??a.firstWeekContainsDate??((j=(b=a.locale)==null?void 0:b.options)==null?void 0:j.firstWeekContainsDate)??1,c=Yi(e,0);c.setFullYear(s+1,0,o),c.setHours(0,0,0,0);const u=gu(c,t),f=Yi(e,0);f.setFullYear(s,0,o),f.setHours(0,0,0,0);const p=gu(f,t);return r.getTime()>=u.getTime()?s+1:r.getTime()>=p.getTime()?s:s-1}function f9(e,t){var u,f,p,x;const r=Bu(),s=(t==null?void 0:t.firstWeekContainsDate)??((f=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((x=(p=r.locale)==null?void 0:p.options)==null?void 0:x.firstWeekContainsDate)??1,a=EE(e,t),o=Yi(e,0);return o.setFullYear(a,0,s),o.setHours(0,0,0,0),gu(o,t)}function m9(e,t){const r=Jt(e),s=+gu(r,t)-+f9(r,t);return Math.round(s/_E)+1}function Gt(e,t){const r=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return r+s}const mi={y(e,t){const r=e.getFullYear(),s=r>0?r:1-r;return Gt(t==="yy"?s%100:s,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Gt(r+1,2)},d(e,t){return Gt(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Gt(e.getHours()%12||12,t.length)},H(e,t){return Gt(e.getHours(),t.length)},m(e,t){return Gt(e.getMinutes(),t.length)},s(e,t){return Gt(e.getSeconds(),t.length)},S(e,t){const r=t.length,s=e.getMilliseconds(),a=Math.trunc(s*Math.pow(10,r-3));return Gt(a,t.length)}},Pl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},jb={G:function(e,t,r){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const s=e.getFullYear(),a=s>0?s:1-s;return r.ordinalNumber(a,{unit:"year"})}return mi.y(e,t)},Y:function(e,t,r,s){const a=EE(e,s),o=a>0?a:1-a;if(t==="YY"){const c=o%100;return Gt(c,2)}return t==="Yo"?r.ordinalNumber(o,{unit:"year"}):Gt(o,t.length)},R:function(e,t){const r=NE(e);return Gt(r,t.length)},u:function(e,t){const r=e.getFullYear();return Gt(r,t.length)},Q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return Gt(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return Gt(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,r){const s=e.getMonth();switch(t){case"M":case"MM":return mi.M(e,t);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,r){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return Gt(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,r,s){const a=m9(e,s);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):Gt(a,t.length)},I:function(e,t,r){const s=h9(e);return t==="Io"?r.ordinalNumber(s,{unit:"week"}):Gt(s,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):mi.d(e,t)},D:function(e,t,r){const s=u9(e);return t==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):Gt(s,t.length)},E:function(e,t,r){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,r,s){const a=e.getDay(),o=(a-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return Gt(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,s){const a=e.getDay(),o=(a-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return Gt(o,t.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const s=e.getDay(),a=s===0?7:s;switch(t){case"i":return String(a);case"ii":return Gt(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const s=e.getHours();let a;switch(s===12?a=Pl.noon:s===0?a=Pl.midnight:a=s/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const s=e.getHours();let a;switch(s>=17?a=Pl.evening:s>=12?a=Pl.afternoon:s>=4?a=Pl.morning:a=Pl.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return mi.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):mi.H(e,t)},K:function(e,t,r){const s=e.getHours()%12;return t==="Ko"?r.ordinalNumber(s,{unit:"hour"}):Gt(s,t.length)},k:function(e,t,r){let s=e.getHours();return s===0&&(s=24),t==="ko"?r.ordinalNumber(s,{unit:"hour"}):Gt(s,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):mi.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):mi.s(e,t)},S:function(e,t){return mi.S(e,t)},X:function(e,t,r){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return Eb(s);case"XXXX":case"XX":return jo(s);case"XXXXX":case"XXX":default:return jo(s,":")}},x:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"x":return Eb(s);case"xxxx":case"xx":return jo(s);case"xxxxx":case"xxx":default:return jo(s,":")}},O:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Cb(s,":");case"OOOO":default:return"GMT"+jo(s,":")}},z:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Cb(s,":");case"zzzz":default:return"GMT"+jo(s,":")}},t:function(e,t,r){const s=Math.trunc(e.getTime()/1e3);return Gt(s,t.length)},T:function(e,t,r){const s=e.getTime();return Gt(s,t.length)}};function Cb(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),o=s%60;return o===0?r+String(a):r+String(a)+t+Gt(o,2)}function Eb(e,t){return e%60===0?(e>0?"-":"+")+Gt(Math.abs(e)/60,2):jo(e,t)}function jo(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=Gt(Math.trunc(s/60),2),o=Gt(s%60,2);return r+a+t+o}const Sb=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},SE=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},p9=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return Sb(e,t);let o;switch(s){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",Sb(s,t)).replace("{{time}}",SE(a,t))},g9={p:SE,P:p9},x9=/^D+$/,v9=/^Y+$/,w9=["D","DD","YY","YYYY"];function y9(e){return x9.test(e)}function b9(e){return v9.test(e)}function _9(e,t,r){const s=N9(e,t,r);if(console.warn(s),w9.includes(e))throw new RangeError(s)}function N9(e,t,r){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const j9=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,C9=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,E9=/^'([^]*?)'?$/,S9=/''/g,A9=/[a-zA-Z]/;function dn(e,t,r){var x,w,b,j,N,C,T,S;const s=Bu(),a=(r==null?void 0:r.locale)??s.locale??CE,o=(r==null?void 0:r.firstWeekContainsDate)??((w=(x=r==null?void 0:r.locale)==null?void 0:x.options)==null?void 0:w.firstWeekContainsDate)??s.firstWeekContainsDate??((j=(b=s.locale)==null?void 0:b.options)==null?void 0:j.firstWeekContainsDate)??1,c=(r==null?void 0:r.weekStartsOn)??((C=(N=r==null?void 0:r.locale)==null?void 0:N.options)==null?void 0:C.weekStartsOn)??s.weekStartsOn??((S=(T=s.locale)==null?void 0:T.options)==null?void 0:S.weekStartsOn)??0,u=Jt(e);if(!jL(u))throw new RangeError("Invalid time value");let f=t.match(C9).map(E=>{const _=E[0];if(_==="p"||_==="P"){const k=g9[_];return k(E,a.formatLong)}return E}).join("").match(j9).map(E=>{if(E==="''")return{isToken:!1,value:"'"};const _=E[0];if(_==="'")return{isToken:!1,value:k9(E)};if(jb[_])return{isToken:!0,value:E};if(_.match(A9))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:E}});a.localize.preprocessor&&(f=a.localize.preprocessor(u,f));const p={firstWeekContainsDate:o,weekStartsOn:c,locale:a};return f.map(E=>{if(!E.isToken)return E.value;const _=E.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&b9(_)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&y9(_))&&_9(_,t,String(e));const k=jb[_[0]];return k(u,_,a.localize,p)}).join("")}function k9(e){const t=e.match(E9);return t?t[1].replace(S9,"'"):e}function T9(e,t,r){const s=Bu(),a=(r==null?void 0:r.locale)??s.locale??CE,o=2520,c=nf(e,t);if(isNaN(c))throw new RangeError("Invalid time value");const u=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:c});let f,p;c>0?(f=Jt(t),p=Jt(e)):(f=Jt(e),p=Jt(t));const x=RL(p,f),w=(qf(p)-qf(f))/1e3,b=Math.round((x-w)/60);let j;if(b<2)return r!=null&&r.includeSeconds?x<5?a.formatDistance("lessThanXSeconds",5,u):x<10?a.formatDistance("lessThanXSeconds",10,u):x<20?a.formatDistance("lessThanXSeconds",20,u):x<40?a.formatDistance("halfAMinute",0,u):x<60?a.formatDistance("lessThanXMinutes",1,u):a.formatDistance("xMinutes",1,u):b===0?a.formatDistance("lessThanXMinutes",1,u):a.formatDistance("xMinutes",b,u);if(b<45)return a.formatDistance("xMinutes",b,u);if(b<90)return a.formatDistance("aboutXHours",1,u);if(b<_b){const N=Math.round(b/60);return a.formatDistance("aboutXHours",N,u)}else{if(b<o)return a.formatDistance("xDays",1,u);if(b<Rh){const N=Math.round(b/_b);return a.formatDistance("xDays",N,u)}else if(b<Rh*2)return j=Math.round(b/Rh),a.formatDistance("aboutXMonths",j,u)}if(j=IL(p,f),j<12){const N=Math.round(b/Rh);return a.formatDistance("xMonths",N,u)}else{const N=j%12,C=Math.trunc(j/12);return N<3?a.formatDistance("aboutXYears",C,u):N<9?a.formatDistance("overXYears",C,u):a.formatDistance("almostXYears",C+1,u)}}function xu(e,t){return T9(e,_L(e),t)}const I9={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 mês",other:"cerca de {{count}} meses"},xMonths:{one:"1 mês",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},R9=(e,t,r)=>{let s;const a=I9[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",String(t)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"em "+s:"há "+s:s},P9={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},O9={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},D9={full:"{{date}} 'às' {{time}}",long:"{{date}} 'às' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},M9={date:cc({formats:P9,defaultWidth:"full"}),time:cc({formats:O9,defaultWidth:"full"}),dateTime:cc({formats:D9,defaultWidth:"full"})},L9={lastWeek:e=>{const t=e.getDay();return"'"+(t===0||t===6?"último":"última")+"' eeee 'às' p"},yesterday:"'ontem às' p",today:"'hoje às' p",tomorrow:"'amanhã às' p",nextWeek:"eeee 'às' p",other:"P"},F9=(e,t,r,s)=>{const a=L9[e];return typeof a=="function"?a(t):a},B9={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},z9={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},U9={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},$9={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","terça","quarta","quinta","sexta","sábado"],wide:["domingo","segunda-feira","terça-feira","quarta-feira","quinta-feira","sexta-feira","sábado"]},V9={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"}},q9={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},W9=(e,t)=>{const r=Number(e);return(t==null?void 0:t.unit)==="week"?r+"ª":r+"º"},H9={ordinalNumber:W9,era:_a({values:B9,defaultWidth:"wide"}),quarter:_a({values:z9,defaultWidth:"wide",argumentCallback:e=>e-1}),month:_a({values:U9,defaultWidth:"wide"}),day:_a({values:$9,defaultWidth:"wide"}),dayPeriod:_a({values:V9,defaultWidth:"wide",formattingValues:q9,defaultFormattingWidth:"wide"})},G9=/^(\d+)[ºªo]?/i,X9=/\d+/i,K9={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},Y9={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},Q9={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},Z9={any:[/1/i,/2/i,/3/i,/4/i]},J9={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},eF={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},tF={narrow:/^(dom|[23456]ª?|s[aá]b)/i,short:/^(dom|[23456]ª?|s[aá]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[aá]b)/i,wide:/^(domingo|(segunda|ter[cç]a|quarta|quinta|sexta)([- ]feira)?|s[aá]bado)/i},rF={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[aá]b/i]},nF={narrow:/^(a|p|mn|md|(da) (manhã|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manhã|tarde|noite))/i},sF={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manhã/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},aF={ordinalNumber:jE({matchPattern:G9,parsePattern:X9,valueCallback:e=>parseInt(e,10)}),era:Na({matchPatterns:K9,defaultMatchWidth:"wide",parsePatterns:Y9,defaultParseWidth:"any"}),quarter:Na({matchPatterns:Q9,defaultMatchWidth:"wide",parsePatterns:Z9,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Na({matchPatterns:J9,defaultMatchWidth:"wide",parsePatterns:eF,defaultParseWidth:"any"}),day:Na({matchPatterns:tF,defaultMatchWidth:"wide",parsePatterns:rF,defaultParseWidth:"any"}),dayPeriod:Na({matchPatterns:nF,defaultMatchWidth:"any",parsePatterns:sF,defaultParseWidth:"any"})},Ir={code:"pt-BR",formatDistance:R9,formatLong:M9,formatRelative:F9,localize:H9,match:aF,options:{weekStartsOn:0,firstWeekContainsDate:1}};function iF({onUnauthorizedClick:e}={}){const{user:t}=bt(),r=_t(),{notifications:s,unreadCount:a,loading:o,markAsRead:c,markAllAsRead:u,deleteNotification:f,clearLocalNotifications:p}=yE(),{acceptFriendRequest:x,declineFriendRequest:w,loading:b}=bE(),j=v.useRef(null),[N,C]=v.useState(!1),[T,S]=v.useState({}),E=a,_=()=>{t?C(!N):e?e():r("/auth")};v.useEffect(()=>{function U(q){j.current&&!j.current.contains(q.target)&&C(!1)}return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[]),v.useEffect(()=>{const U=async()=>{const q=s.filter(re=>re.type==="friend_request");if(q.length!==0)for(const re of q){const{data:W}=await $.from("friendships").select("user_id").eq("friend_id",t==null?void 0:t.id).eq("status","pending").order("created_at",{ascending:!1}).limit(1).maybeSingle();if(W){const{data:ne}=await $.from("profiles").select("user_id, display_name, avatar_url, interest, relationship_status").eq("user_id",W.user_id).single();ne&&S(oe=>({...oe,[re.id]:{...ne,friendshipUserId:W.user_id}}))}}};t&&s.length>0&&U()},[s,t]);const k=U=>{switch(U){case"event_created":return Et;case"event_updated":return qn;case"event_cancelled":return sr;case"friend_request":return ym;default:return Ha}},D=U=>{try{return xu(new Date(U),{addSuffix:!0,locale:Ir})}catch{return"recentemente"}},L=s.filter(U=>!U.read),R=async U=>{if(U.type==="friend_request"){await c(U.id);return}await c(U.id),U.type==="user_message"||U.type==="user_like"?(C(!1),r("/find-friends")):U.event_id?(C(!1),r(`/e/${U.event_id}`)):C(!1)},M=async(U,q)=>{await x("",q)&&f(U)},P=async(U,q)=>{await w("",q)&&f(U)},F=U=>({solteiro:"Solteiro(a)",relacionamento:"Em relacionamento",casado:"Casado(a)",preferencia_nao_informar:"Prefiro não informar"})[U]||U,Y=U=>({curtição:"Curtição",namoro:"Namoro",amizade:"Amizade"})[U]||U;return n.jsxs("div",{className:"relative",ref:j,children:[n.jsxs(K,{variant:"ghost",size:"icon",className:"relative hover:bg-primary/10",onClick:_,children:[n.jsx(Ha,{className:"h-5 w-5"}),E>0&&n.jsx("div",{className:"absolute -top-1 -right-1 h-3 w-3 bg-destructive rounded-full flex items-center justify-center animate-pulse",children:n.jsx("span",{className:"text-xs text-destructive-foreground font-bold",children:E})})]}),N&&n.jsxs("div",{className:"absolute right-0 top-full mt-2 w-80 max-h-96 overflow-hidden bg-background border border-border rounded-lg shadow-lg z-50",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:"Notificações"}),E>0&&n.jsx(K,{variant:"ghost",size:"sm",onClick:async U=>{U.preventDefault(),U.stopPropagation(),await u(),p(),C(!1)},children:"Marcar todas como lidas"})]}),n.jsx("div",{className:"max-h-80 overflow-y-auto",children:o?n.jsxs("div",{className:"p-6 text-center text-muted-foreground",children:[n.jsx(Ha,{className:"h-8 w-8 mx-auto mb-2 opacity-50 animate-pulse"}),n.jsx("p",{children:"Carregando..."})]}):L.length===0?n.jsxs("div",{className:"p-6 text-center text-muted-foreground",children:[n.jsx(Ha,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"Nenhuma notificação"})]}):n.jsx("div",{className:"space-y-1",children:L.map(U=>{var ne,oe;const q=k(U.type),re=U.type==="friend_request",W=re?T[U.id]:null;return n.jsx("div",{className:`p-3 ${re?"":"hover:bg-surface cursor-pointer"} transition-colors group ${U.read?"":"bg-primary/5 border-l-2 border-l-primary"}`,onClick:()=>R(U),children:re&&W?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsxs(Ut,{className:"h-12 w-12",children:[n.jsx(Kt,{src:W.avatar_url}),n.jsx($t,{children:(oe=(ne=W.display_name)==null?void 0:ne[0])==null?void 0:oe.toUpperCase()})]}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:W.display_name}),n.jsx("p",{className:"text-xs text-muted-foreground",children:Y(W.interest)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:F(W.relationship_status)})]}),n.jsx(K,{variant:"ghost",size:"icon",className:"h-6 w-6 hover:bg-destructive/10",onClick:ae=>{ae.stopPropagation(),f(U.id)},children:n.jsx(sr,{className:"h-3 w-3"})})]})})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(K,{size:"sm",className:"flex-1",onClick:()=>M(U.id,W.friendshipUserId),disabled:b,children:[n.jsx(Yn,{className:"h-4 w-4 mr-1"}),"Aceitar"]}),n.jsxs(K,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>P(U.id,W.friendshipUserId),disabled:b,children:[n.jsx(sr,{className:"h-4 w-4 mr-1"}),"Recusar"]})]})]}):n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:`p-1 rounded-full ${U.read?"bg-surface":"bg-primary/20"}`,children:n.jsx(q,{className:"h-4 w-4 text-primary"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:U.title}),n.jsxs("div",{className:"flex items-center gap-1",children:[!U.read&&n.jsx(ct,{variant:"destructive",className:"h-2 w-2 p-0 rounded-full"}),n.jsx(K,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover:opacity-100 hover:bg-destructive/10",onClick:ae=>{ae.stopPropagation(),f(U.id)},children:n.jsx(sr,{className:"h-3 w-3"})})]})]}),n.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:U.message}),n.jsx("p",{className:"text-xs text-muted-foreground",children:D(U.created_at)})]})]})},U.id)})})}),s.length>0&&n.jsx("div",{className:"p-3 border-t border-border",children:n.jsx(K,{variant:"ghost",className:"w-full text-sm",onClick:()=>{C(!1),r("/notifications")},children:"Ver todas as notificações"})})]})]})}function oF(e){if(!e)return null;const t=new Date,r=new Date(e),s=t.getFullYear()-r.getFullYear(),a=t.getMonth()-r.getMonth();return a<0||a===0&&t.getDate()<r.getDate()?s-1:s}function Bm(){const[e,t]=v.useState(null),[r,s]=v.useState(!0),[a,o]=v.useState(!1),{user:c}=bt(),u=async()=>{if(c)try{s(!0);const{data:x,error:w}=await $.from("profiles").select("*").eq("user_id",c.id).single();if(w&&w.code!=="PGRST116"){console.error("Error fetching profile:",w),G.error("Erro ao carregar perfil");return}t(x||null)}catch(x){console.error("Error:",x),G.error("Erro ao carregar perfil")}finally{s(!1)}},f=async x=>{if(!c||!e)return!1;try{o(!0);const{error:w}=await $.from("profiles").update(x).eq("user_id",c.id);return w?(console.error("Error updating profile:",w),G.error("Erro ao salvar perfil"),!1):(t(b=>b?{...b,...x}:null),G.success("Perfil salvo com sucesso!"),!0)}catch(w){return console.error("Error:",w),G.error("Erro ao salvar perfil"),!1}finally{o(!1)}},p=async x=>{if(!c)return null;try{o(!0);const w=x.name.split(".").pop(),b=`${c.id}/avatar.${w}`,{error:j}=await $.storage.from("user-uploads").upload(b,x,{upsert:!0});if(j)return console.error("Error uploading file:",j),G.error("Erro ao fazer upload da foto"),null;const{data:{publicUrl:N}}=$.storage.from("user-uploads").getPublicUrl(b);return await f({avatar_url:N})?(G.success("Foto de perfil atualizada!"),N):null}catch(w){return console.error("Error:",w),G.error("Erro ao atualizar foto"),null}finally{o(!1)}};return v.useEffect(()=>{u()},[c]),{profile:e,loading:r,saving:a,updateProfile:f,uploadAvatar:p,refetch:u}}var bg="focusScope.autoFocusOnMount",_g="focusScope.autoFocusOnUnmount",Ab={bubbles:!1,cancelable:!0},lF="FocusScope",zu=v.forwardRef((e,t)=>{const{loop:r=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...c}=e,[u,f]=v.useState(null),p=Er(a),x=Er(o),w=v.useRef(null),b=tt(t,C=>f(C)),j=v.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;v.useEffect(()=>{if(s){let C=function(_){if(j.paused||!u)return;const k=_.target;u.contains(k)?w.current=k:vi(w.current,{select:!0})},T=function(_){if(j.paused||!u)return;const k=_.relatedTarget;k!==null&&(u.contains(k)||vi(w.current,{select:!0}))},S=function(_){if(document.activeElement===document.body)for(const D of _)D.removedNodes.length>0&&vi(u)};document.addEventListener("focusin",C),document.addEventListener("focusout",T);const E=new MutationObserver(S);return u&&E.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",C),document.removeEventListener("focusout",T),E.disconnect()}}},[s,u,j.paused]),v.useEffect(()=>{if(u){Tb.add(j);const C=document.activeElement;if(!u.contains(C)){const S=new CustomEvent(bg,Ab);u.addEventListener(bg,p),u.dispatchEvent(S),S.defaultPrevented||(cF(mF(AE(u)),{select:!0}),document.activeElement===C&&vi(u))}return()=>{u.removeEventListener(bg,p),setTimeout(()=>{const S=new CustomEvent(_g,Ab);u.addEventListener(_g,x),u.dispatchEvent(S),S.defaultPrevented||vi(C??document.body,{select:!0}),u.removeEventListener(_g,x),Tb.remove(j)},0)}}},[u,p,x,j]);const N=v.useCallback(C=>{if(!r&&!s||j.paused)return;const T=C.key==="Tab"&&!C.altKey&&!C.ctrlKey&&!C.metaKey,S=document.activeElement;if(T&&S){const E=C.currentTarget,[_,k]=dF(E);_&&k?!C.shiftKey&&S===k?(C.preventDefault(),r&&vi(_,{select:!0})):C.shiftKey&&S===_&&(C.preventDefault(),r&&vi(k,{select:!0})):S===E&&C.preventDefault()}},[r,s,j.paused]);return n.jsx(Ve.div,{tabIndex:-1,...c,ref:b,onKeyDown:N})});zu.displayName=lF;function cF(e,{select:t=!1}={}){const r=document.activeElement;for(const s of e)if(vi(s,{select:t}),document.activeElement!==r)return}function dF(e){const t=AE(e),r=kb(t,e),s=kb(t.reverse(),e);return[r,s]}function AE(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function kb(e,t){for(const r of e)if(!uF(r,{upTo:t}))return r}function uF(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function hF(e){return e instanceof HTMLInputElement&&"select"in e}function vi(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&hF(e)&&t&&e.select()}}var Tb=fF();function fF(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=Ib(e,t),e.unshift(t)},remove(t){var r;e=Ib(e,t),(r=e[0])==null||r.resume()}}}function Ib(e,t){const r=[...e],s=r.indexOf(t);return s!==-1&&r.splice(s,1),r}function mF(e){return e.filter(t=>t.tagName!=="A")}var Ng=0;function zm(){v.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Rb()),document.body.insertAdjacentElement("beforeend",e[1]??Rb()),Ng++,()=>{Ng===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Ng--}},[])}function Rb(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ja=function(){return ja=Object.assign||function(t){for(var r,s=1,a=arguments.length;s<a;s++){r=arguments[s];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},ja.apply(this,arguments)};function kE(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r}function pF(e,t,r){if(r||arguments.length===2)for(var s=0,a=t.length,o;s<a;s++)(o||!(s in t))&&(o||(o=Array.prototype.slice.call(t,0,s)),o[s]=t[s]);return e.concat(o||Array.prototype.slice.call(t))}var sf="right-scroll-bar-position",af="width-before-scroll-bar",gF="with-scroll-bars-hidden",xF="--removed-body-scroll-bar-size";function jg(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function vF(e,t){var r=v.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(s){var a=r.value;a!==s&&(r.value=s,r.callback(s,a))}}}})[0];return r.callback=t,r.facade}var wF=typeof window<"u"?v.useLayoutEffect:v.useEffect,Pb=new WeakMap;function yF(e,t){var r=vF(null,function(s){return e.forEach(function(a){return jg(a,s)})});return wF(function(){var s=Pb.get(r);if(s){var a=new Set(s),o=new Set(e),c=r.current;a.forEach(function(u){o.has(u)||jg(u,null)}),o.forEach(function(u){a.has(u)||jg(u,c)})}Pb.set(r,e)},[e]),r}function bF(e){return e}function _F(e,t){t===void 0&&(t=bF);var r=[],s=!1,a={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(o){var c=t(o,s);return r.push(c),function(){r=r.filter(function(u){return u!==c})}},assignSyncMedium:function(o){for(s=!0;r.length;){var c=r;r=[],c.forEach(o)}r={push:function(u){return o(u)},filter:function(){return r}}},assignMedium:function(o){s=!0;var c=[];if(r.length){var u=r;r=[],u.forEach(o),c=r}var f=function(){var x=c;c=[],x.forEach(o)},p=function(){return Promise.resolve().then(f)};p(),r={push:function(x){c.push(x),p()},filter:function(x){return c=c.filter(x),r}}}};return a}function NF(e){e===void 0&&(e={});var t=_F(null);return t.options=ja({async:!0,ssr:!1},e),t}var TE=function(e){var t=e.sideCar,r=kE(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return v.createElement(s,ja({},r))};TE.isSideCarExport=!0;function jF(e,t){return e.useMedium(t),TE}var IE=NF(),Cg=function(){},Um=v.forwardRef(function(e,t){var r=v.useRef(null),s=v.useState({onScrollCapture:Cg,onWheelCapture:Cg,onTouchMoveCapture:Cg}),a=s[0],o=s[1],c=e.forwardProps,u=e.children,f=e.className,p=e.removeScrollBar,x=e.enabled,w=e.shards,b=e.sideCar,j=e.noRelative,N=e.noIsolation,C=e.inert,T=e.allowPinchZoom,S=e.as,E=S===void 0?"div":S,_=e.gapMode,k=kE(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),D=b,L=yF([r,t]),R=ja(ja({},k),a);return v.createElement(v.Fragment,null,x&&v.createElement(D,{sideCar:IE,removeScrollBar:p,shards:w,noRelative:j,noIsolation:N,inert:C,setCallbacks:o,allowPinchZoom:!!T,lockRef:r,gapMode:_}),c?v.cloneElement(v.Children.only(u),ja(ja({},R),{ref:L})):v.createElement(E,ja({},R,{className:f,ref:L}),u))});Um.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Um.classNames={fullWidth:af,zeroRight:sf};var CF=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function EF(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=CF();return t&&e.setAttribute("nonce",t),e}function SF(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function AF(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var kF=function(){var e=0,t=null;return{add:function(r){e==0&&(t=EF())&&(SF(t,r),AF(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},TF=function(){var e=kF();return function(t,r){v.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},RE=function(){var e=TF(),t=function(r){var s=r.styles,a=r.dynamic;return e(s,a),null};return t},IF={left:0,top:0,right:0,gap:0},Eg=function(e){return parseInt(e||"",10)||0},RF=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[Eg(r),Eg(s),Eg(a)]},PF=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return IF;var t=RF(e),r=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-r+t[2]-t[0])}},OF=RE(),dc="data-scroll-locked",DF=function(e,t,r,s){var a=e.left,o=e.top,c=e.right,u=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(gF,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(u,"px ").concat(s,`;
  }
  body[`).concat(dc,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(s,`;
    `),r==="padding"&&"padding-right: ".concat(u,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(sf,` {
    right: `).concat(u,"px ").concat(s,`;
  }
  
  .`).concat(af,` {
    margin-right: `).concat(u,"px ").concat(s,`;
  }
  
  .`).concat(sf," .").concat(sf,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(af," .").concat(af,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(dc,`] {
    `).concat(xF,": ").concat(u,`px;
  }
`)},Ob=function(){var e=parseInt(document.body.getAttribute(dc)||"0",10);return isFinite(e)?e:0},MF=function(){v.useEffect(function(){return document.body.setAttribute(dc,(Ob()+1).toString()),function(){var e=Ob()-1;e<=0?document.body.removeAttribute(dc):document.body.setAttribute(dc,e.toString())}},[])},LF=function(e){var t=e.noRelative,r=e.noImportant,s=e.gapMode,a=s===void 0?"margin":s;MF();var o=v.useMemo(function(){return PF(a)},[a]);return v.createElement(OF,{styles:DF(o,!t,a,r?"":"!important")})},s0=!1;if(typeof window<"u")try{var Ph=Object.defineProperty({},"passive",{get:function(){return s0=!0,!0}});window.addEventListener("test",Ph,Ph),window.removeEventListener("test",Ph,Ph)}catch{s0=!1}var Ol=s0?{passive:!1}:!1,FF=function(e){return e.tagName==="TEXTAREA"},PE=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!FF(e)&&r[t]==="visible")},BF=function(e){return PE(e,"overflowY")},zF=function(e){return PE(e,"overflowX")},Db=function(e,t){var r=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var a=OE(e,s);if(a){var o=DE(e,s),c=o[1],u=o[2];if(c>u)return!0}s=s.parentNode}while(s&&s!==r.body);return!1},UF=function(e){var t=e.scrollTop,r=e.scrollHeight,s=e.clientHeight;return[t,r,s]},$F=function(e){var t=e.scrollLeft,r=e.scrollWidth,s=e.clientWidth;return[t,r,s]},OE=function(e,t){return e==="v"?BF(t):zF(t)},DE=function(e,t){return e==="v"?UF(t):$F(t)},VF=function(e,t){return e==="h"&&t==="rtl"?-1:1},qF=function(e,t,r,s,a){var o=VF(e,window.getComputedStyle(t).direction),c=o*s,u=r.target,f=t.contains(u),p=!1,x=c>0,w=0,b=0;do{if(!u)break;var j=DE(e,u),N=j[0],C=j[1],T=j[2],S=C-T-o*N;(N||S)&&OE(e,u)&&(w+=S,b+=N);var E=u.parentNode;u=E&&E.nodeType===Node.DOCUMENT_FRAGMENT_NODE?E.host:E}while(!f&&u!==document.body||f&&(t.contains(u)||t===u));return(x&&Math.abs(w)<1||!x&&Math.abs(b)<1)&&(p=!0),p},Oh=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Mb=function(e){return[e.deltaX,e.deltaY]},Lb=function(e){return e&&"current"in e?e.current:e},WF=function(e,t){return e[0]===t[0]&&e[1]===t[1]},HF=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},GF=0,Dl=[];function XF(e){var t=v.useRef([]),r=v.useRef([0,0]),s=v.useRef(),a=v.useState(GF++)[0],o=v.useState(RE)[0],c=v.useRef(e);v.useEffect(function(){c.current=e},[e]),v.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var C=pF([e.lockRef.current],(e.shards||[]).map(Lb),!0).filter(Boolean);return C.forEach(function(T){return T.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),C.forEach(function(T){return T.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var u=v.useCallback(function(C,T){if("touches"in C&&C.touches.length===2||C.type==="wheel"&&C.ctrlKey)return!c.current.allowPinchZoom;var S=Oh(C),E=r.current,_="deltaX"in C?C.deltaX:E[0]-S[0],k="deltaY"in C?C.deltaY:E[1]-S[1],D,L=C.target,R=Math.abs(_)>Math.abs(k)?"h":"v";if("touches"in C&&R==="h"&&L.type==="range")return!1;var M=Db(R,L);if(!M)return!0;if(M?D=R:(D=R==="v"?"h":"v",M=Db(R,L)),!M)return!1;if(!s.current&&"changedTouches"in C&&(_||k)&&(s.current=D),!D)return!0;var P=s.current||D;return qF(P,T,C,P==="h"?_:k)},[]),f=v.useCallback(function(C){var T=C;if(!(!Dl.length||Dl[Dl.length-1]!==o)){var S="deltaY"in T?Mb(T):Oh(T),E=t.current.filter(function(D){return D.name===T.type&&(D.target===T.target||T.target===D.shadowParent)&&WF(D.delta,S)})[0];if(E&&E.should){T.cancelable&&T.preventDefault();return}if(!E){var _=(c.current.shards||[]).map(Lb).filter(Boolean).filter(function(D){return D.contains(T.target)}),k=_.length>0?u(T,_[0]):!c.current.noIsolation;k&&T.cancelable&&T.preventDefault()}}},[]),p=v.useCallback(function(C,T,S,E){var _={name:C,delta:T,target:S,should:E,shadowParent:KF(S)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(k){return k!==_})},1)},[]),x=v.useCallback(function(C){r.current=Oh(C),s.current=void 0},[]),w=v.useCallback(function(C){p(C.type,Mb(C),C.target,u(C,e.lockRef.current))},[]),b=v.useCallback(function(C){p(C.type,Oh(C),C.target,u(C,e.lockRef.current))},[]);v.useEffect(function(){return Dl.push(o),e.setCallbacks({onScrollCapture:w,onWheelCapture:w,onTouchMoveCapture:b}),document.addEventListener("wheel",f,Ol),document.addEventListener("touchmove",f,Ol),document.addEventListener("touchstart",x,Ol),function(){Dl=Dl.filter(function(C){return C!==o}),document.removeEventListener("wheel",f,Ol),document.removeEventListener("touchmove",f,Ol),document.removeEventListener("touchstart",x,Ol)}},[]);var j=e.removeScrollBar,N=e.inert;return v.createElement(v.Fragment,null,N?v.createElement(o,{styles:HF(a)}):null,j?v.createElement(LF,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function KF(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const YF=jF(IE,XF);var Uu=v.forwardRef(function(e,t){return v.createElement(Um,ja({},e,{ref:t,sideCar:YF}))});Uu.classNames=Um.classNames;var QF=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ml=new WeakMap,Dh=new WeakMap,Mh={},Sg=0,ME=function(e){return e&&(e.host||ME(e.parentNode))},ZF=function(e,t){return t.map(function(r){if(e.contains(r))return r;var s=ME(r);return s&&e.contains(s)?s:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},JF=function(e,t,r,s){var a=ZF(t,Array.isArray(e)?e:[e]);Mh[r]||(Mh[r]=new WeakMap);var o=Mh[r],c=[],u=new Set,f=new Set(a),p=function(w){!w||u.has(w)||(u.add(w),p(w.parentNode))};a.forEach(p);var x=function(w){!w||f.has(w)||Array.prototype.forEach.call(w.children,function(b){if(u.has(b))x(b);else try{var j=b.getAttribute(s),N=j!==null&&j!=="false",C=(Ml.get(b)||0)+1,T=(o.get(b)||0)+1;Ml.set(b,C),o.set(b,T),c.push(b),C===1&&N&&Dh.set(b,!0),T===1&&b.setAttribute(r,"true"),N||b.setAttribute(s,"true")}catch(S){console.error("aria-hidden: cannot operate on ",b,S)}})};return x(t),u.clear(),Sg++,function(){c.forEach(function(w){var b=Ml.get(w)-1,j=o.get(w)-1;Ml.set(w,b),o.set(w,j),b||(Dh.has(w)||w.removeAttribute(s),Dh.delete(w)),j||w.removeAttribute(r)}),Sg--,Sg||(Ml=new WeakMap,Ml=new WeakMap,Dh=new WeakMap,Mh={})}},$m=function(e,t,r){r===void 0&&(r="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),a=QF(e);return a?(s.push.apply(s,Array.from(a.querySelectorAll("[aria-live], script"))),JF(s,a,r,"aria-hidden")):function(){return null}},Vm="Dialog",[LE,FE]=Mr(Vm),[eB,ca]=LE(Vm),BE=e=>{const{__scopeDialog:t,children:r,open:s,defaultOpen:a,onOpenChange:o,modal:c=!0}=e,u=v.useRef(null),f=v.useRef(null),[p,x]=Ms({prop:s,defaultProp:a??!1,onChange:o,caller:Vm});return n.jsx(eB,{scope:t,triggerRef:u,contentRef:f,contentId:hn(),titleId:hn(),descriptionId:hn(),open:p,onOpenChange:x,onOpenToggle:v.useCallback(()=>x(w=>!w),[x]),modal:c,children:r})};BE.displayName=Vm;var zE="DialogTrigger",UE=v.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=ca(zE,r),o=tt(t,a.triggerRef);return n.jsx(Ve.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":tv(a.open),...s,ref:o,onClick:Re(e.onClick,a.onOpenToggle)})});UE.displayName=zE;var J1="DialogPortal",[tB,$E]=LE(J1,{forceMount:void 0}),VE=e=>{const{__scopeDialog:t,forceMount:r,children:s,container:a}=e,o=ca(J1,t);return n.jsx(tB,{scope:t,forceMount:r,children:v.Children.map(s,c=>n.jsx(Hr,{present:r||o.open,children:n.jsx(zc,{asChild:!0,container:a,children:c})}))})};VE.displayName=J1;var Wf="DialogOverlay",qE=v.forwardRef((e,t)=>{const r=$E(Wf,e.__scopeDialog),{forceMount:s=r.forceMount,...a}=e,o=ca(Wf,e.__scopeDialog);return o.modal?n.jsx(Hr,{present:s||o.open,children:n.jsx(nB,{...a,ref:t})}):null});qE.displayName=Wf;var rB=Wi("DialogOverlay.RemoveScroll"),nB=v.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=ca(Wf,r);return n.jsx(Uu,{as:rB,allowPinchZoom:!0,shards:[a.contentRef],children:n.jsx(Ve.div,{"data-state":tv(a.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),Zo="DialogContent",WE=v.forwardRef((e,t)=>{const r=$E(Zo,e.__scopeDialog),{forceMount:s=r.forceMount,...a}=e,o=ca(Zo,e.__scopeDialog);return n.jsx(Hr,{present:s||o.open,children:o.modal?n.jsx(sB,{...a,ref:t}):n.jsx(aB,{...a,ref:t})})});WE.displayName=Zo;var sB=v.forwardRef((e,t)=>{const r=ca(Zo,e.__scopeDialog),s=v.useRef(null),a=tt(t,r.contentRef,s);return v.useEffect(()=>{const o=s.current;if(o)return $m(o)},[]),n.jsx(HE,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Re(e.onCloseAutoFocus,o=>{var c;o.preventDefault(),(c=r.triggerRef.current)==null||c.focus()}),onPointerDownOutside:Re(e.onPointerDownOutside,o=>{const c=o.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0;(c.button===2||u)&&o.preventDefault()}),onFocusOutside:Re(e.onFocusOutside,o=>o.preventDefault())})}),aB=v.forwardRef((e,t)=>{const r=ca(Zo,e.__scopeDialog),s=v.useRef(!1),a=v.useRef(!1);return n.jsx(HE,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var c,u;(c=e.onCloseAutoFocus)==null||c.call(e,o),o.defaultPrevented||(s.current||(u=r.triggerRef.current)==null||u.focus(),o.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:o=>{var f,p;(f=e.onInteractOutside)==null||f.call(e,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const c=o.target;((p=r.triggerRef.current)==null?void 0:p.contains(c))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),HE=v.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,...c}=e,u=ca(Zo,r),f=v.useRef(null),p=tt(t,f);return zm(),n.jsxs(n.Fragment,{children:[n.jsx(zu,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:o,children:n.jsx(ul,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":tv(u.open),...c,ref:p,onDismiss:()=>u.onOpenChange(!1)})}),n.jsxs(n.Fragment,{children:[n.jsx(oB,{titleId:u.titleId}),n.jsx(cB,{contentRef:f,descriptionId:u.descriptionId})]})]})}),ev="DialogTitle",GE=v.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=ca(ev,r);return n.jsx(Ve.h2,{id:a.titleId,...s,ref:t})});GE.displayName=ev;var XE="DialogDescription",KE=v.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=ca(XE,r);return n.jsx(Ve.p,{id:a.descriptionId,...s,ref:t})});KE.displayName=XE;var YE="DialogClose",QE=v.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=ca(YE,r);return n.jsx(Ve.button,{type:"button",...s,ref:t,onClick:Re(e.onClick,()=>a.onOpenChange(!1))})});QE.displayName=YE;function tv(e){return e?"open":"closed"}var ZE="DialogTitleWarning",[iB,JE]=LR(ZE,{contentName:Zo,titleName:ev,docsSlug:"dialog"}),oB=({titleId:e})=>{const t=JE(ZE),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return v.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},lB="DialogDescriptionWarning",cB=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${JE(lB).contentName}}.`;return v.useEffect(()=>{var o;const a=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},rv=BE,eS=UE,nv=VE,qm=qE,Wm=WE,sv=GE,av=KE,iv=QE;const zt=rv,tS=eS,dB=nv,rS=v.forwardRef(({className:e,...t},r)=>n.jsx(qm,{ref:r,className:Fe("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));rS.displayName=qm.displayName;const Ft=v.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(dB,{children:[n.jsx(rS,{}),n.jsxs(Wm,{ref:s,className:Fe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,n.jsxs(iv,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[n.jsx(sr,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ft.displayName=Wm.displayName;const xr=({className:e,...t})=>n.jsx("div",{className:Fe("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});xr.displayName="DialogHeader";const $u=({className:e,...t})=>n.jsx("div",{className:Fe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});$u.displayName="DialogFooter";const vr=v.forwardRef(({className:e,...t},r)=>n.jsx(sv,{ref:r,className:Fe("text-lg font-semibold leading-none tracking-tight",e),...t}));vr.displayName=sv.displayName;const os=v.forwardRef(({className:e,...t},r)=>n.jsx(av,{ref:r,className:Fe("text-sm text-muted-foreground",e),...t}));os.displayName=av.displayName;const we=v.forwardRef(({className:e,type:t,...r},s)=>n.jsx("input",{type:t,className:Fe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...r}));we.displayName="Input";var uB=v.createContext(void 0);function pl(e){const t=v.useContext(uB);return e||t||"ltr"}function vu(e,[t,r]){return Math.min(r,Math.max(t,e))}function hB(e,t){return v.useReducer((r,s)=>t[r][s]??r,e)}var ov="ScrollArea",[nS]=Mr(ov),[fB,Bs]=nS(ov),sS=v.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:s="hover",dir:a,scrollHideDelay:o=600,...c}=e,[u,f]=v.useState(null),[p,x]=v.useState(null),[w,b]=v.useState(null),[j,N]=v.useState(null),[C,T]=v.useState(null),[S,E]=v.useState(0),[_,k]=v.useState(0),[D,L]=v.useState(!1),[R,M]=v.useState(!1),P=tt(t,Y=>f(Y)),F=pl(a);return n.jsx(fB,{scope:r,type:s,dir:F,scrollHideDelay:o,scrollArea:u,viewport:p,onViewportChange:x,content:w,onContentChange:b,scrollbarX:j,onScrollbarXChange:N,scrollbarXEnabled:D,onScrollbarXEnabledChange:L,scrollbarY:C,onScrollbarYChange:T,scrollbarYEnabled:R,onScrollbarYEnabledChange:M,onCornerWidthChange:E,onCornerHeightChange:k,children:n.jsx(Ve.div,{dir:F,...c,ref:P,style:{position:"relative","--radix-scroll-area-corner-width":S+"px","--radix-scroll-area-corner-height":_+"px",...e.style}})})});sS.displayName=ov;var aS="ScrollAreaViewport",iS=v.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:s,nonce:a,...o}=e,c=Bs(aS,r),u=v.useRef(null),f=tt(t,u,c.onViewportChange);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),n.jsx(Ve.div,{"data-radix-scroll-area-viewport":"",...o,ref:f,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...e.style},children:n.jsx("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});iS.displayName=aS;var Pa="ScrollAreaScrollbar",lv=v.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=Bs(Pa,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:c}=a,u=e.orientation==="horizontal";return v.useEffect(()=>(u?o(!0):c(!0),()=>{u?o(!1):c(!1)}),[u,o,c]),a.type==="hover"?n.jsx(mB,{...s,ref:t,forceMount:r}):a.type==="scroll"?n.jsx(pB,{...s,ref:t,forceMount:r}):a.type==="auto"?n.jsx(oS,{...s,ref:t,forceMount:r}):a.type==="always"?n.jsx(cv,{...s,ref:t}):null});lv.displayName=Pa;var mB=v.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=Bs(Pa,e.__scopeScrollArea),[o,c]=v.useState(!1);return v.useEffect(()=>{const u=a.scrollArea;let f=0;if(u){const p=()=>{window.clearTimeout(f),c(!0)},x=()=>{f=window.setTimeout(()=>c(!1),a.scrollHideDelay)};return u.addEventListener("pointerenter",p),u.addEventListener("pointerleave",x),()=>{window.clearTimeout(f),u.removeEventListener("pointerenter",p),u.removeEventListener("pointerleave",x)}}},[a.scrollArea,a.scrollHideDelay]),n.jsx(Hr,{present:r||o,children:n.jsx(oS,{"data-state":o?"visible":"hidden",...s,ref:t})})}),pB=v.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=Bs(Pa,e.__scopeScrollArea),o=e.orientation==="horizontal",c=Gm(()=>f("SCROLL_END"),100),[u,f]=hB("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return v.useEffect(()=>{if(u==="idle"){const p=window.setTimeout(()=>f("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(p)}},[u,a.scrollHideDelay,f]),v.useEffect(()=>{const p=a.viewport,x=o?"scrollLeft":"scrollTop";if(p){let w=p[x];const b=()=>{const j=p[x];w!==j&&(f("SCROLL"),c()),w=j};return p.addEventListener("scroll",b),()=>p.removeEventListener("scroll",b)}},[a.viewport,o,f,c]),n.jsx(Hr,{present:r||u!=="hidden",children:n.jsx(cv,{"data-state":u==="hidden"?"hidden":"visible",...s,ref:t,onPointerEnter:Re(e.onPointerEnter,()=>f("POINTER_ENTER")),onPointerLeave:Re(e.onPointerLeave,()=>f("POINTER_LEAVE"))})})}),oS=v.forwardRef((e,t)=>{const r=Bs(Pa,e.__scopeScrollArea),{forceMount:s,...a}=e,[o,c]=v.useState(!1),u=e.orientation==="horizontal",f=Gm(()=>{if(r.viewport){const p=r.viewport.offsetWidth<r.viewport.scrollWidth,x=r.viewport.offsetHeight<r.viewport.scrollHeight;c(u?p:x)}},10);return Pc(r.viewport,f),Pc(r.content,f),n.jsx(Hr,{present:s||o,children:n.jsx(cv,{"data-state":o?"visible":"hidden",...a,ref:t})})}),cv=v.forwardRef((e,t)=>{const{orientation:r="vertical",...s}=e,a=Bs(Pa,e.__scopeScrollArea),o=v.useRef(null),c=v.useRef(0),[u,f]=v.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),p=hS(u.viewport,u.content),x={...s,sizes:u,onSizesChange:f,hasThumb:p>0&&p<1,onThumbChange:b=>o.current=b,onThumbPointerUp:()=>c.current=0,onThumbPointerDown:b=>c.current=b};function w(b,j){return bB(b,c.current,u,j)}return r==="horizontal"?n.jsx(gB,{...x,ref:t,onThumbPositionChange:()=>{if(a.viewport&&o.current){const b=a.viewport.scrollLeft,j=Fb(b,u,a.dir);o.current.style.transform=`translate3d(${j}px, 0, 0)`}},onWheelScroll:b=>{a.viewport&&(a.viewport.scrollLeft=b)},onDragScroll:b=>{a.viewport&&(a.viewport.scrollLeft=w(b,a.dir))}}):r==="vertical"?n.jsx(xB,{...x,ref:t,onThumbPositionChange:()=>{if(a.viewport&&o.current){const b=a.viewport.scrollTop,j=Fb(b,u);o.current.style.transform=`translate3d(0, ${j}px, 0)`}},onWheelScroll:b=>{a.viewport&&(a.viewport.scrollTop=b)},onDragScroll:b=>{a.viewport&&(a.viewport.scrollTop=w(b))}}):null}),gB=v.forwardRef((e,t)=>{const{sizes:r,onSizesChange:s,...a}=e,o=Bs(Pa,e.__scopeScrollArea),[c,u]=v.useState(),f=v.useRef(null),p=tt(t,f,o.onScrollbarXChange);return v.useEffect(()=>{f.current&&u(getComputedStyle(f.current))},[f]),n.jsx(cS,{"data-orientation":"horizontal",...a,ref:p,sizes:r,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Hm(r)+"px",...e.style},onThumbPointerDown:x=>e.onThumbPointerDown(x.x),onDragScroll:x=>e.onDragScroll(x.x),onWheelScroll:(x,w)=>{if(o.viewport){const b=o.viewport.scrollLeft+x.deltaX;e.onWheelScroll(b),mS(b,w)&&x.preventDefault()}},onResize:()=>{f.current&&o.viewport&&c&&s({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:f.current.clientWidth,paddingStart:Gf(c.paddingLeft),paddingEnd:Gf(c.paddingRight)}})}})}),xB=v.forwardRef((e,t)=>{const{sizes:r,onSizesChange:s,...a}=e,o=Bs(Pa,e.__scopeScrollArea),[c,u]=v.useState(),f=v.useRef(null),p=tt(t,f,o.onScrollbarYChange);return v.useEffect(()=>{f.current&&u(getComputedStyle(f.current))},[f]),n.jsx(cS,{"data-orientation":"vertical",...a,ref:p,sizes:r,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Hm(r)+"px",...e.style},onThumbPointerDown:x=>e.onThumbPointerDown(x.y),onDragScroll:x=>e.onDragScroll(x.y),onWheelScroll:(x,w)=>{if(o.viewport){const b=o.viewport.scrollTop+x.deltaY;e.onWheelScroll(b),mS(b,w)&&x.preventDefault()}},onResize:()=>{f.current&&o.viewport&&c&&s({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:f.current.clientHeight,paddingStart:Gf(c.paddingTop),paddingEnd:Gf(c.paddingBottom)}})}})}),[vB,lS]=nS(Pa),cS=v.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:s,hasThumb:a,onThumbChange:o,onThumbPointerUp:c,onThumbPointerDown:u,onThumbPositionChange:f,onDragScroll:p,onWheelScroll:x,onResize:w,...b}=e,j=Bs(Pa,r),[N,C]=v.useState(null),T=tt(t,P=>C(P)),S=v.useRef(null),E=v.useRef(""),_=j.viewport,k=s.content-s.viewport,D=Er(x),L=Er(f),R=Gm(w,10);function M(P){if(S.current){const F=P.clientX-S.current.left,Y=P.clientY-S.current.top;p({x:F,y:Y})}}return v.useEffect(()=>{const P=F=>{const Y=F.target;(N==null?void 0:N.contains(Y))&&D(F,k)};return document.addEventListener("wheel",P,{passive:!1}),()=>document.removeEventListener("wheel",P,{passive:!1})},[_,N,k,D]),v.useEffect(L,[s,L]),Pc(N,R),Pc(j.content,R),n.jsx(vB,{scope:r,scrollbar:N,hasThumb:a,onThumbChange:Er(o),onThumbPointerUp:Er(c),onThumbPositionChange:L,onThumbPointerDown:Er(u),children:n.jsx(Ve.div,{...b,ref:T,style:{position:"absolute",...b.style},onPointerDown:Re(e.onPointerDown,P=>{P.button===0&&(P.target.setPointerCapture(P.pointerId),S.current=N.getBoundingClientRect(),E.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",j.viewport&&(j.viewport.style.scrollBehavior="auto"),M(P))}),onPointerMove:Re(e.onPointerMove,M),onPointerUp:Re(e.onPointerUp,P=>{const F=P.target;F.hasPointerCapture(P.pointerId)&&F.releasePointerCapture(P.pointerId),document.body.style.webkitUserSelect=E.current,j.viewport&&(j.viewport.style.scrollBehavior=""),S.current=null})})})}),Hf="ScrollAreaThumb",dS=v.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=lS(Hf,e.__scopeScrollArea);return n.jsx(Hr,{present:r||a.hasThumb,children:n.jsx(wB,{ref:t,...s})})}),wB=v.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:s,...a}=e,o=Bs(Hf,r),c=lS(Hf,r),{onThumbPositionChange:u}=c,f=tt(t,w=>c.onThumbChange(w)),p=v.useRef(void 0),x=Gm(()=>{p.current&&(p.current(),p.current=void 0)},100);return v.useEffect(()=>{const w=o.viewport;if(w){const b=()=>{if(x(),!p.current){const j=_B(w,u);p.current=j,u()}};return u(),w.addEventListener("scroll",b),()=>w.removeEventListener("scroll",b)}},[o.viewport,x,u]),n.jsx(Ve.div,{"data-state":c.hasThumb?"visible":"hidden",...a,ref:f,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:Re(e.onPointerDownCapture,w=>{const j=w.target.getBoundingClientRect(),N=w.clientX-j.left,C=w.clientY-j.top;c.onThumbPointerDown({x:N,y:C})}),onPointerUp:Re(e.onPointerUp,c.onThumbPointerUp)})});dS.displayName=Hf;var dv="ScrollAreaCorner",uS=v.forwardRef((e,t)=>{const r=Bs(dv,e.__scopeScrollArea),s=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&s?n.jsx(yB,{...e,ref:t}):null});uS.displayName=dv;var yB=v.forwardRef((e,t)=>{const{__scopeScrollArea:r,...s}=e,a=Bs(dv,r),[o,c]=v.useState(0),[u,f]=v.useState(0),p=!!(o&&u);return Pc(a.scrollbarX,()=>{var w;const x=((w=a.scrollbarX)==null?void 0:w.offsetHeight)||0;a.onCornerHeightChange(x),f(x)}),Pc(a.scrollbarY,()=>{var w;const x=((w=a.scrollbarY)==null?void 0:w.offsetWidth)||0;a.onCornerWidthChange(x),c(x)}),p?n.jsx(Ve.div,{...s,ref:t,style:{width:o,height:u,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Gf(e){return e?parseInt(e,10):0}function hS(e,t){const r=e/t;return isNaN(r)?0:r}function Hm(e){const t=hS(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-r)*t;return Math.max(s,18)}function bB(e,t,r,s="ltr"){const a=Hm(r),o=a/2,c=t||o,u=a-c,f=r.scrollbar.paddingStart+c,p=r.scrollbar.size-r.scrollbar.paddingEnd-u,x=r.content-r.viewport,w=s==="ltr"?[0,x]:[x*-1,0];return fS([f,p],w)(e)}function Fb(e,t,r="ltr"){const s=Hm(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-a,c=t.content-t.viewport,u=o-s,f=r==="ltr"?[0,c]:[c*-1,0],p=vu(e,f);return fS([0,c],[0,u])(p)}function fS(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(r-e[0])}}function mS(e,t){return e>0&&e<t}var _B=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},s=0;return function a(){const o={left:e.scrollLeft,top:e.scrollTop},c=r.left!==o.left,u=r.top!==o.top;(c||u)&&t(),r=o,s=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(s)};function Gm(e,t){const r=Er(e),s=v.useRef(0);return v.useEffect(()=>()=>window.clearTimeout(s.current),[]),v.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(r,t)},[r,t])}function Pc(e,t){const r=Er(t);Rr(()=>{let s=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(s),a.unobserve(e)}}},[e,r])}var pS=sS,NB=iS,jB=uS;const Jo=v.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(pS,{ref:s,className:Fe("relative overflow-hidden",e),...r,children:[n.jsx(NB,{className:"h-full w-full rounded-[inherit]",children:t}),n.jsx(gS,{}),n.jsx(jB,{})]}));Jo.displayName=pS.displayName;const gS=v.forwardRef(({className:e,orientation:t="vertical",...r},s)=>n.jsx(lv,{ref:s,orientation:t,className:Fe("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:n.jsx(dS,{className:"relative flex-1 rounded-full bg-border"})}));gS.displayName=lv.displayName;function CB(){const{profile:e,refetch:t}=Bm(),[r,s]=v.useState(!1),[a,o]=v.useState([]),[c,u]=v.useState([]),[f,p]=v.useState(""),[x,w]=v.useState(!1),[b,j]=v.useState(null);v.useEffect(()=>{N()},[]),v.useEffect(()=>{e!=null&&e.city_id&&C()},[e==null?void 0:e.city_id]),v.useEffect(()=>{if(f.trim()==="")u(a);else{const k=f.toLowerCase(),D=a.filter(L=>L.name.toLowerCase().includes(k)||L.state.toLowerCase().includes(k));u(D)}},[f,a]);const N=async()=>{try{const{data:k,error:D}=await $.from("organizers").select("city_id").not("city_id","is",null);if(D)throw D;const{data:L,error:R}=await $.from("events").select("city_id").not("city_id","is",null);if(R)throw R;const M=new Set([...(k==null?void 0:k.map(Y=>Y.city_id))||[],...(L==null?void 0:L.map(Y=>Y.city_id))||[]]);if(M.size===0){o([]),u([]);return}const{data:P,error:F}=await $.from("cities").select("*").in("id",Array.from(M)).order("state").order("name");if(F)throw F;o(P||[]),u(P||[])}catch(k){console.error("Error loading cities:",k)}},C=async()=>{if(e!=null&&e.city_id)try{const{data:k,error:D}=await $.from("cities").select("*").eq("id",e.city_id).maybeSingle();if(D)throw D;j(k)}catch(k){console.error("Error loading current city:",k)}},T=async k=>{if(e){w(!0);try{const{error:D}=await $.from("profiles").update({city_id:k.id}).eq("user_id",e.user_id);if(D)throw D;j(k),await t(),G.success(`Localização alterada para ${k.name}, ${k.state}`),s(!1),p("")}catch(D){console.error("Error updating location:",D),G.error("Erro ao atualizar localização")}finally{w(!1)}}},S=async()=>{if(!navigator.geolocation){G.error("Geolocalização não suportada pelo navegador");return}w(!0),navigator.geolocation.getCurrentPosition(async k=>{const{latitude:D,longitude:L}=k.coords;try{const M=await(await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${D}&lon=${L}&format=json`)).json(),P=M.address.city||M.address.town||M.address.municipality;if(P){const F=a.find(Y=>Y.name.toLowerCase()===P.toLowerCase());F?await T(F):G.error("Cidade não encontrada no sistema")}else G.error("Não foi possível identificar sua cidade")}catch(R){console.error("Error fetching location:",R),G.error("Erro ao obter localização")}finally{w(!1)}},k=>{console.error("Geolocation error:",k),G.error("Erro ao acessar localização"),w(!1)})},E=async()=>{if(e){w(!0);try{const{error:k}=await $.from("profiles").update({city_id:null}).eq("user_id",e.user_id);if(k)throw k;j(null),await t(),G.success("Localização removida")}catch(k){console.error("Error clearing location:",k),G.error("Erro ao remover localização")}finally{w(!1)}}},_=c.reduce((k,D)=>(k[D.state]||(k[D.state]=[]),k[D.state].push(D),k),{});return n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>s(!0),className:"flex items-center gap-1.5 text-primary hover:text-primary/80 transition-colors",children:[n.jsx(Rt,{className:"h-4 w-4 flex-shrink-0"}),n.jsx("span",{className:"text-sm font-medium truncate max-w-[120px]",children:b?b.name:"Qualquer lugar"}),n.jsx(E1,{className:"h-3 w-3 flex-shrink-0"})]}),n.jsx(zt,{open:r,onOpenChange:s,children:n.jsxs(Ft,{className:"sm:max-w-[500px] max-h-[80vh] p-0",children:[n.jsx(xr,{className:"px-6 pt-6 pb-4 border-b",children:n.jsx(vr,{children:"Localização"})}),n.jsx("div",{className:"px-6 py-4",children:n.jsx(we,{type:"text",placeholder:"Onde?",value:f,onChange:k=>p(k.target.value),className:"w-full"})}),n.jsx(Jo,{className:"max-h-[400px] px-6",children:n.jsxs("div",{className:"space-y-2 pb-6",children:[n.jsxs("button",{onClick:S,disabled:x,className:"w-full flex items-start gap-3 p-3 hover:bg-accent rounded-lg transition-colors text-left group",children:[n.jsx(kj,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5 group-hover:scale-110 transition-transform"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-sm",children:"Usar minha localização atual"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Encontre eventos perto de você"})]})]}),n.jsxs("button",{onClick:()=>T({id:"",name:"Qualquer lugar",state:""}),disabled:x,className:"w-full flex items-center gap-3 p-3 hover:bg-accent rounded-lg transition-colors text-left",children:[n.jsx(Rt,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"}),n.jsx("span",{className:"text-sm font-medium",children:"Qualquer lugar"})]}),Object.entries(_).map(([k,D])=>n.jsxs("div",{className:"pt-4 first:pt-2",children:[n.jsx("h3",{className:"text-xs font-semibold text-muted-foreground mb-2 px-3",children:k}),n.jsx("div",{className:"space-y-1",children:D.map(L=>n.jsxs("button",{onClick:()=>T(L),disabled:x,className:`w-full flex items-center gap-3 p-3 hover:bg-accent rounded-lg transition-colors text-left ${(b==null?void 0:b.id)===L.id?"bg-accent":""}`,children:[n.jsx(Rt,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"}),n.jsx("span",{className:"text-sm",children:L.name})]},L.id))})]},k))]})}),b&&n.jsx("div",{className:"px-6 pb-6 pt-2 border-t",children:n.jsxs(K,{variant:"outline",onClick:E,disabled:x,className:"w-full",children:[n.jsx(sr,{className:"h-4 w-4 mr-2"}),"Remover localização"]})})]})})]})}function zs(){const{user:e}=bt(),[t,r]=v.useState(!1),[s,a]=v.useState(!0);return v.useEffect(()=>{(async()=>{if(!e){r(!1),a(!1);return}try{const{data:c,error:u}=await $.rpc("has_role",{_user_id:e.id,_role:"admin"});if(u)throw u;r(c||!1)}catch(c){console.error("Error checking admin role:",c),r(!1)}finally{a(!1)}})()},[e]),{isAdmin:t,loading:s}}function a0({title:e="Eventos",showLocation:t=!0,showNotifications:r=!0,userType:s}){const{user:a}=bt(),{isAdmin:o}=zs(),{theme:c,toggleTheme:u}=Y1(),f=_t(),p=Qn(),x=()=>{if(!a){const w=p.pathname;f(`/auth?redirect=${encodeURIComponent(w)}`),G.info("Faça login para ver suas notificações")}};return n.jsx("header",{className:"sticky top-0 z-40 bg-background/80 backdrop-blur-md border-b border-border",children:n.jsxs("div",{className:"flex items-center justify-between px-4 py-3 max-w-md mx-auto",children:[n.jsx("div",{className:"flex items-center gap-2",children:t&&n.jsx(CB,{})}),n.jsxs("div",{className:"flex items-center gap-2",children:[o&&n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>f("/admin"),className:"h-8 w-8",title:"Painel Admin",children:n.jsx(T1,{className:"h-4 w-4 text-primary"})}),n.jsx(K,{variant:"ghost",size:"icon",onClick:u,className:"h-8 w-8",children:c==="dark"?n.jsx(Tj,{className:"h-4 w-4"}):n.jsx(Aj,{className:"h-4 w-4"})}),r&&n.jsx(iF,{onUnauthorizedClick:x})]})]})})}function i0({title:e,image:t,organizerName:r,organizerAvatar:s,date:a,endDate:o,location:c,locationLink:u,estimatedAttendees:f,likes:p,comments:x,isLiked:w,isLive:b,price:j,onClick:N,onLike:C,onOrganizerClick:T,requiresRegistration:S=!1,userType:E="user",isOwnEvent:_=!1,onRegister:k,onManageRegistrations:D,showJoinButton:L=!1,ticketLink:R,isPlatformEvent:M=!1,hasPaidTickets:P=!1}){const F=u&&(u.includes("meet.google")||u.includes("zoom.us")||u.includes("youtube.com")||u.includes("twitch.tv")||u.includes("teams.microsoft")||u.includes("streamyard")||u.includes("jitsi")),Y=!!(t&&t.trim()!==""&&!t.includes("placeholder.svg"));return n.jsxs("div",{className:"event-card bg-card rounded-lg overflow-hidden shadow-card cursor-pointer",onClick:N,children:[n.jsx("div",{className:"p-4 pb-3",children:n.jsxs("div",{className:M?"flex items-center gap-3":"flex items-center gap-3 cursor-pointer hover:bg-accent/50 -mx-4 -my-2 px-4 py-2 rounded-lg transition-colors",onClick:U=>{!M&&T&&(U.stopPropagation(),console.log("Clicou no organizador!"),T())},children:[n.jsx("div",{className:"avatar-story",children:n.jsxs(Ut,{className:"h-8 w-8",children:[n.jsx(Kt,{src:s,alt:r}),n.jsx($t,{className:"bg-surface text-xs",children:r.charAt(0).toUpperCase()})]})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:`text-sm font-medium text-foreground ${M?"":"group-hover:text-primary transition-colors"}`,children:r}),n.jsxs("div",{className:"flex flex-col gap-0.5",children:[n.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[n.jsx(Et,{className:"h-3 w-3"}),n.jsx("span",{children:a}),b&&n.jsxs("span",{className:"flex items-center gap-1 text-destructive font-medium",children:[n.jsx("div",{className:"h-2 w-2 bg-destructive rounded-full animate-pulse"}),"ACONTECENDO AGORA"]})]}),o&&n.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground/80",children:[n.jsx(ef,{className:"h-3 w-3"}),n.jsxs("span",{children:["Encerra: ",o]})]})]})]})]})}),Y&&n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:t,alt:e,className:"w-full h-64 object-cover"}),typeof j<"u"&&Number(j)>0||R||P?n.jsx("div",{className:"absolute top-3 right-3 bg-destructive/90 backdrop-blur-sm px-2 py-1 rounded-md",children:n.jsx("span",{className:"text-xs font-medium text-white",children:"PAGO"})}):n.jsx("div",{className:"absolute top-3 right-3 bg-primary/90 backdrop-blur-sm px-2 py-1 rounded-md",children:n.jsx("span",{className:"text-xs font-medium text-primary-foreground",children:"GRÁTIS"})})]}),n.jsxs("div",{className:"p-4 pt-3",children:[!Y&&(typeof j<"u"&&Number(j)>0||R||P?n.jsx("div",{className:"mb-2 inline-flex px-2 py-1 rounded-md bg-destructive/90",children:n.jsx("span",{className:"text-xs font-medium text-white",children:"PAGO"})}):n.jsx("div",{className:"mb-2 inline-flex px-2 py-1 rounded-md bg-primary/90",children:n.jsx("span",{className:"text-xs font-medium text-primary-foreground",children:"GRÁTIS"})})),n.jsx("h3",{className:"font-semibold text-foreground mb-2 line-clamp-2",children:e}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-3",children:[n.jsx(Rt,{className:"h-4 w-4"}),n.jsx("span",{className:"line-clamp-1",children:c})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("button",{onClick:U=>{U.stopPropagation(),C==null||C()},className:"flex items-center gap-1 transition-smooth hover:scale-110",children:[n.jsx(Ja,{className:`h-5 w-5 ${w?"fill-destructive text-destructive":"text-muted-foreground"}`}),n.jsx("span",{className:"text-sm text-muted-foreground",children:p})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Ls,{className:"h-5 w-5 text-muted-foreground"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:x})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(er,{className:"h-5 w-5 text-muted-foreground"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:f})]})]}),L&&b&&F&&n.jsx(K,{variant:"live",size:"sm",onClick:U=>{U.stopPropagation(),window.open(u,"_blank")},children:"Entrar"})]}),S&&n.jsx("div",{className:"mt-2",children:n.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary/10 text-primary text-xs rounded-full",children:[n.jsx(er,{className:"h-3 w-3"}),"Requer cadastro"]})})]})]})}const o0=[{value:"festas",label:"🎉 Festas"},{value:"shows",label:"🎤 Shows"},{value:"fitness",label:"💪 Fitness"},{value:"igreja",label:"🙏 Igreja"},{value:"cursos",label:"📚 Cursos"},{value:"bares",label:"🍻 Bares"},{value:"boates",label:"🪩 Boates"},{value:"esportes",label:"⚽ Esportes"}],EB={festas:"festas",shows:"shows",fitness:"fitness",igreja:"igreja",cristao:"igreja",cursos:"cursos",educacao:"cursos",bares:"bares",boates:"boates",balada:"boates",night:"boates",eletronica:"shows",rock:"shows",pop:"shows",forro:"shows",sertanejo:"shows",funk:"shows",samba:"shows",jazz:"shows",musica:"shows",eventos:"festas",esportes:"esportes"};function xS(e,t,r,s){const[a,o]=v.useState([]),[c,u]=v.useState(!1),{user:f}=bt(),p=async()=>{try{u(!0);let w,b,j,N;if(e&&e!=="todos"){const k=await $.from("events").select(`
            *,
            organizer:organizers!inner(
              id,
              page_title,
              user_id,
              avatar_url
            )
          `).eq("status","upcoming").contains("category",[e]).order("event_date",{ascending:!0});w=k.data,j=k.error;const D=await $.from("platform_events").select("*").eq("status","upcoming").contains("category",[e]).order("event_date",{ascending:!0});b=D.data,N=D.error}else{const k=await $.from("events").select(`
            *,
            organizer:organizers!inner(
              id,
              page_title,
              user_id,
              avatar_url
            )
          `).eq("status","upcoming").order("event_date",{ascending:!0});w=k.data,j=k.error;const D=await $.from("platform_events").select("*").eq("status","upcoming").order("event_date",{ascending:!0});b=D.data,N=D.error}if(j)throw j;if(N)throw N;const C=await Promise.all((w||[]).map(async k=>{const{data:D}=await $.from("profiles").select("display_name, avatar_url").eq("user_id",k.organizer.user_id).maybeSingle(),{count:L}=await $.from("event_likes").select("*",{count:"exact",head:!0}).eq("event_id",k.id),{count:R}=await $.from("event_comments").select("*",{count:"exact",head:!0}).eq("event_id",k.id),{count:M}=await $.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",k.id),{count:P}=await $.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",k.id).eq("attendance_confirmed",!0),{data:F}=await $.from("event_registrations").select("user_id").eq("event_id",k.id),Y=new Set((F==null?void 0:F.map(W=>W.user_id))||[]).size,{data:U}=await $.from("ticket_types").select("price").eq("event_id",k.id).eq("is_active",!0),q=U&&U.length>0&&U.some(W=>Number(W.price)>0)||k.ticket_price&&Number(k.ticket_price)>0||!!k.ticket_link;let re=!1;if(f){const{data:W}=await $.from("event_likes").select("id").eq("event_id",k.id).eq("user_id",f.id).maybeSingle();re=!!W}return{...k,is_platform_event:!1,organizer:{...k.organizer,profile:{display_name:D==null?void 0:D.display_name,avatar_url:k.organizer.avatar_url||(D==null?void 0:D.avatar_url)}},likes_count:L||0,comments_count:R||0,is_liked:re,registrations_count:M||0,confirmed_attendees_count:P||0,unique_attendees_count:Y||0,has_paid_tickets:q}})),T=(b||[]).map(k=>({...k,is_platform_event:!0,organizer_id:"platform",organizer:{id:"platform",page_title:k.organizer_name,user_id:"platform",avatar_url:null,profile:{display_name:k.organizer_name,avatar_url:null}},current_attendees:0,is_live:!1,likes_count:0,comments_count:0,is_liked:!1,registrations_count:0,confirmed_attendees_count:0,unique_attendees_count:0,has_paid_tickets:k.ticket_price&&Number(k.ticket_price)>0||!!k.ticket_link}));let S=[...C,...T],E=[];if(f){const{data:k}=await $.from("followers").select("organizer_id").eq("user_id",f.id);E=(k||[]).map(D=>D.organizer_id)}if(r&&r.length>0){const k=new Set(r.map(D=>D.toLowerCase()));S=S.filter(D=>{const L=E.includes(D.organizer_id),M=(D.category||[]).map(P=>(EB[P]??P).toLowerCase()).some(P=>k.has(P));return L||M})}S.sort((k,D)=>k.has_paid_tickets&&!D.has_paid_tickets?-1:!k.has_paid_tickets&&D.has_paid_tickets?1:new Date(k.event_date).getTime()-new Date(D.event_date).getTime());let _=S;if(t&&t.trim()!==""){const k=t.toLowerCase().trim();_=S.filter(D=>{var U,q,re,W,ne,oe;const L=D.title.toLowerCase().includes(k),R=(U=D.description)==null?void 0:U.toLowerCase().includes(k),M=(q=D.organizer)==null?void 0:q.page_title.toLowerCase().includes(k),P=(ne=(W=(re=D.organizer)==null?void 0:re.profile)==null?void 0:W.display_name)==null?void 0:ne.toLowerCase().includes(k),F=D.location.toLowerCase().includes(k),Y=(oe=D.category)==null?void 0:oe.some(ae=>ae.toLowerCase().includes(k));return L||R||M||P||F||Y})}if(s){if(!s.showAllCities&&s.cities.length>0){const k=s.cities;_=_.filter(D=>(D.is_platform_event,!0))}if(s.categories.length>0&&(_=_.filter(k=>{const D=k.category||[];return s.categories.some(L=>D.some(R=>R.toLowerCase().includes(L.toLowerCase())||L.toLowerCase().includes(R.toLowerCase())))})),s.dateRange!=="all"){const k=new Date;_=_.filter(D=>{const L=new Date(D.event_date);switch(s.dateRange){case"today":return L.getDate()===k.getDate()&&L.getMonth()===k.getMonth()&&L.getFullYear()===k.getFullYear();case"week":{const R=new Date(k);return R.setDate(k.getDate()+7),L>=k&&L<=R}case"month":{const R=new Date(k);return R.setMonth(k.getMonth()+1),L>=k&&L<=R}default:return!0}})}}o(_)}catch(w){console.error("Error fetching events:",w)}finally{u(!1)}},x=async w=>{if(f)try{const{data:b}=await $.from("event_likes").select("id").eq("event_id",w).eq("user_id",f.id).maybeSingle();b?await $.from("event_likes").delete().eq("id",b.id):await $.from("event_likes").insert({event_id:w,user_id:f.id}),o(j=>j.map(N=>N.id===w?{...N,is_liked:!N.is_liked,likes_count:N.is_liked?(N.likes_count||0)-1:(N.likes_count||0)+1}:N))}catch(b){console.error("Error toggling like:",b)}};return v.useEffect(()=>{p()},[f,e,t,r,s]),v.useEffect(()=>{const w=$.channel("realtime-organizer-profile-events").on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles"},b=>{const j=b.new;o(N=>N.map(C=>{var T,S,E;return((T=C.organizer)==null?void 0:T.user_id)===j.user_id?{...C,organizer:{...C.organizer,profile:{...C.organizer.profile||{},display_name:j.display_name??((S=C.organizer.profile)==null?void 0:S.display_name),avatar_url:j.avatar_url??((E=C.organizer.profile)==null?void 0:E.avatar_url)}}}:C}))}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"organizers"},b=>{const j=b.new;o(N=>N.map(C=>{var T,S;return((T=C.organizer)==null?void 0:T.id)===j.id?{...C,organizer:{...C.organizer,page_title:j.page_title??C.organizer.page_title,avatar_url:j.avatar_url??C.organizer.avatar_url,profile:{...C.organizer.profile||{},avatar_url:j.avatar_url??((S=C.organizer.profile)==null?void 0:S.avatar_url)}}}:C}))}).subscribe();return()=>{$.removeChannel(w)}},[]),v.useEffect(()=>{const w=$.channel("realtime-event-registrations").on("postgres_changes",{event:"INSERT",schema:"public",table:"event_registrations"},async b=>{const N=b.new.event_id,{count:C}=await $.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",N),{count:T}=await $.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",N).eq("attendance_confirmed",!0),{data:S}=await $.from("event_registrations").select("user_id").eq("event_id",N),E=new Set((S==null?void 0:S.map(_=>_.user_id))||[]).size;o(_=>_.map(k=>k.id===N?{...k,registrations_count:C||0,confirmed_attendees_count:T||0,unique_attendees_count:E||0}:k))}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"event_registrations"},async b=>{const N=b.new.event_id,{count:C}=await $.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",N),{count:T}=await $.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",N).eq("attendance_confirmed",!0),{data:S}=await $.from("event_registrations").select("user_id").eq("event_id",N),E=new Set((S==null?void 0:S.map(_=>_.user_id))||[]).size;o(_=>_.map(k=>k.id===N?{...k,registrations_count:C||0,confirmed_attendees_count:T||0,unique_attendees_count:E||0}:k))}).subscribe();return()=>{$.removeChannel(w)}},[]),v.useEffect(()=>{const w=$.channel("realtime-new-events").on("postgres_changes",{event:"INSERT",schema:"public",table:"events"},()=>{p()}).subscribe();return()=>{$.removeChannel(w)}},[]),{events:a,loading:c,fetchEvents:p,toggleLike:x}}function St({className:e,...t}){return n.jsx("div",{className:Fe("animate-pulse rounded-md bg-muted",e),...t})}const Bb=e=>{const t=new Date(e),r=["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],s=["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],a=r[t.getDay()],o=t.getDate(),c=s[t.getMonth()],u=t.getHours().toString().padStart(2,"0"),f=t.getMinutes().toString().padStart(2,"0");return`${a}, ${o} ${c}, ${u}:${f}`},zb=e=>{if(!e)return;const t=new Date(e),r=["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],s=["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],a=r[t.getDay()],o=t.getDate(),c=s[t.getMonth()],u=t.getHours().toString().padStart(2,"0"),f=t.getMinutes().toString().padStart(2,"0");return`${a}, ${o} ${c}, ${u}:${f}`};function SB({onEventClick:e,onOrganizerClick:t,userType:r="user",categoryFilter:s,searchQuery:a,userInterests:o,filters:c}){const{events:u,loading:f,toggleLike:p}=xS(s,a,o,c),x=N=>{e(N)},w=()=>{const N=new Date,C=u.filter(S=>{const E=new Date(S.event_date),_=S.end_date?new Date(S.end_date):null,k=(S.status||"").toLowerCase()==="completed"||(S.status||"").toLowerCase()==="ended";return E<=N&&!k&&(!_||_>N)});return{upcoming:u.filter(S=>{const E=new Date(S.event_date),_=(S.status||"").toLowerCase()==="completed"||(S.status||"").toLowerCase()==="ended";return E>N&&!_}),live:C}},{upcoming:b,live:j}=w();return f?n.jsx("div",{className:"space-y-6",children:[1,2,3].map(N=>n.jsxs("div",{className:"space-y-3",children:[n.jsx(St,{className:"h-4 w-32"}),n.jsx(St,{className:"h-64 w-full rounded-lg"})]},N))}):n.jsxs("div",{className:"space-y-8",children:[j.length>0&&n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4 px-1",children:"🔴 Acontecendo Agora"}),n.jsx("div",{className:"space-y-6",children:j.map(N=>{var C,T,S,E,_;return n.jsx(i0,{id:N.id,title:N.title,image:N.image_url||"",organizerName:((T=(C=N.organizer)==null?void 0:C.profile)==null?void 0:T.display_name)||((S=N.organizer)==null?void 0:S.page_title)||"Organizador",organizerAvatar:(_=(E=N.organizer)==null?void 0:E.profile)==null?void 0:_.avatar_url,date:Bb(N.event_date),endDate:zb(N.end_date),location:N.location,locationLink:N.location_link||void 0,ticketLink:N.ticket_link||void 0,estimatedAttendees:N.unique_attendees_count||0,likes:N.likes_count||0,comments:N.comments_count||0,isLiked:N.is_liked||!1,isLive:(()=>{const k=new Date(N.event_date),D=N.end_date?new Date(N.end_date):null,L=new Date;return k<=L&&(!D||D>L)})(),price:N.ticket_price||0,hasPaidTickets:N.has_paid_tickets,onClick:()=>x(N.id),onLike:()=>p(N.id),onOrganizerClick:()=>{var k;console.log("Organizador clicado:",N.organizer),t(((k=N.organizer)==null?void 0:k.id)||"")},userType:r,onRegister:()=>e("register"),onManageRegistrations:()=>e("registrations"),isPlatformEvent:N.is_platform_event||!1},N.id)})})]}),b.length>0&&n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4 px-1",children:"📅 Próximos Eventos"}),n.jsx("div",{className:"space-y-6",children:b.map(N=>{var C,T,S,E,_;return n.jsx(i0,{id:N.id,title:N.title,image:N.image_url||"",organizerName:((T=(C=N.organizer)==null?void 0:C.profile)==null?void 0:T.display_name)||((S=N.organizer)==null?void 0:S.page_title)||"Organizador",organizerAvatar:(_=(E=N.organizer)==null?void 0:E.profile)==null?void 0:_.avatar_url,date:Bb(N.event_date),endDate:zb(N.end_date),location:N.location,locationLink:N.location_link||void 0,ticketLink:N.ticket_link||void 0,estimatedAttendees:N.unique_attendees_count||0,likes:N.likes_count||0,comments:N.comments_count||0,isLiked:N.is_liked||!1,isLive:!1,price:N.ticket_price||0,hasPaidTickets:N.has_paid_tickets,onClick:()=>x(N.id),onLike:()=>p(N.id),onOrganizerClick:()=>{var k;console.log("Organizador clicado:",N.organizer),t(((k=N.organizer)==null?void 0:k.id)||"")},userType:r,onRegister:()=>e("register"),onManageRegistrations:()=>e("registrations"),isPlatformEvent:N.is_platform_event||!1},N.id)})})]}),u.length===0&&n.jsx("div",{className:"text-center py-12",children:n.jsx("p",{className:"text-muted-foreground",children:"Nenhum evento encontrado"})})]})}function Oa(){const{user:e}=bt(),[t,r]=v.useState(null),[s,a]=v.useState([]),[o,c]=v.useState([]),[u,f]=v.useState(!0);v.useEffect(()=>{e&&p()},[e]);const p=async()=>{if(e)try{f(!0);const{data:S,error:E}=await $.from("organizers").select("*").eq("user_id",e.id).maybeSingle();if(E&&E.code!=="PGRST116")throw E;if(!S){f(!1);return}r(S);const{data:_,error:k}=await $.from("events").select(`
          *,
          ticket_types!left(id, price)
        `).eq("organizer_id",S.id).order("event_date",{ascending:!0});a((_==null?void 0:_.map(R=>({...R,status:R.status,form_fields:R.form_fields||[],has_paid_tickets:Array.isArray(R.ticket_types)&&R.ticket_types.length>0&&R.ticket_types.some(M=>M.price>0)})))||[]);const{data:D,error:L}=await $.from("custom_links").select("*").eq("organizer_id",S.id).order("sort_order",{ascending:!0});if(L)throw L;c(D||[])}catch(S){console.error("Error fetching organizer data:",S),G.error("Erro ao carregar dados do organizador")}finally{f(!1)}};return{organizerData:t,events:s,customLinks:o,loading:u,updateOrganizerProfile:async S=>{if(t)try{const{error:E}=await $.from("organizers").update(S).eq("id",t.id);if(E)throw E.code==="23505"&&E.message.includes("username")&&G.error("Este username já está em uso. Escolha outro."),E;r(_=>_?{..._,...S}:null),G.success("Perfil atualizado com sucesso!")}catch(E){throw console.error("Error updating organizer profile:",E),E.message.includes("username")||G.error("Erro ao atualizar perfil"),E}},createEvent:async S=>{if(t)try{const{data:E,error:_}=await $.from("events").insert([{...S,organizer_id:t.id,current_attendees:0}]).select().single();if(_)throw _;return a(k=>[...k,{...E,status:E.status,form_fields:E.form_fields||[]}]),G.success("Evento criado com sucesso!"),E}catch(E){console.error("Error creating event:",E),G.error("Erro ao criar evento")}},updateEvent:async(S,E)=>{try{const{error:_}=await $.from("events").update(E).eq("id",S);if(_)throw _;a(k=>k.map(D=>D.id===S?{...D,...E}:D)),G.success("Evento atualizado com sucesso!")}catch(_){console.error("Error updating event:",_),G.error("Erro ao atualizar evento")}},deleteEvent:async S=>{try{const{error:E}=await $.from("events").delete().eq("id",S);if(E)throw E;a(_=>_.filter(k=>k.id!==S)),G.success("Evento excluído com sucesso!")}catch(E){console.error("Error deleting event:",E),G.error("Erro ao excluir evento")}},addCustomLink:async S=>{if(t)try{const E=Math.max(...o.map(D=>D.sort_order),-1),{data:_,error:k}=await $.from("custom_links").insert({...S,organizer_id:t.id,sort_order:E+1}).select().single();if(k)throw k;return c(D=>[...D,_]),G.success("Link adicionado com sucesso!"),_}catch(E){console.error("Error adding custom link:",E),G.error("Erro ao adicionar link")}},updateCustomLink:async(S,E)=>{try{const{error:_}=await $.from("custom_links").update(E).eq("id",S);if(_)throw _;c(k=>k.map(D=>D.id===S?{...D,...E}:D)),G.success("Link atualizado com sucesso!")}catch(_){console.error("Error updating custom link:",_),G.error("Erro ao atualizar link")}},deleteCustomLink:async S=>{try{const{error:E}=await $.from("custom_links").delete().eq("id",S);if(E)throw E;c(_=>_.filter(k=>k.id!==S)),G.success("Link excluído com sucesso!")}catch(E){console.error("Error deleting custom link:",E),G.error("Erro ao excluir link")}},refetch:p}}function AB({organizersWithStories:e,onOrganizerClick:t,onCreateStory:r,uploadingStory:s=!1}){const{organizerData:a}=Oa(),{user:o}=bt(),c=!!a;return n.jsx("div",{className:"border-b border-border bg-background",children:n.jsx("div",{className:"max-w-md mx-auto px-4",children:n.jsxs("div",{className:"flex gap-4 overflow-x-auto py-3 scrollbar-hide",children:[c&&r&&n.jsxs("button",{onClick:s?void 0:r,className:"flex-shrink-0 flex flex-col items-center gap-2 group hover-scale",disabled:s,children:[n.jsxs("div",{className:"relative",children:[n.jsxs(Ut,{className:"h-16 w-16 ring-2 ring-background",children:[n.jsx(Kt,{src:a.avatar_url||void 0}),n.jsx($t,{className:"bg-primary text-primary-foreground",children:a.page_title.charAt(0).toUpperCase()})]}),s?n.jsx("div",{className:"absolute inset-0 bg-black/60 rounded-full flex items-center justify-center",children:n.jsx("div",{className:"h-8 w-8 border-2 border-white border-t-transparent rounded-full animate-spin"})}):n.jsx("div",{className:"absolute -bottom-1 -right-1 h-6 w-6 bg-primary rounded-full flex items-center justify-center ring-2 ring-background group-hover:scale-110 transition-transform",children:n.jsx($c,{className:"h-4 w-4 text-primary-foreground"})})]}),n.jsx("span",{className:"text-xs text-muted-foreground max-w-[64px] truncate story-link",children:s?"Enviando...":"Seu Story"})]}),e.map(u=>n.jsxs("button",{onClick:()=>t(u),className:"flex-shrink-0 flex flex-col items-center gap-2 group hover-scale",children:[n.jsx("div",{className:"relative",children:n.jsx("div",{className:`h-16 w-16 rounded-full p-[2px] ${u.has_unviewed?"bg-gradient-to-tr from-yellow-400 via-red-500 to-pink-500":"bg-muted"}`,children:n.jsxs(Ut,{className:"h-full w-full ring-2 ring-background",children:[n.jsx(Kt,{src:u.avatar_url||void 0}),n.jsx($t,{className:"bg-surface",children:u.page_title.charAt(0).toUpperCase()})]})})}),n.jsx("span",{className:"text-xs text-foreground max-w-[64px] truncate group-hover:text-primary transition-colors story-link",children:u.page_title})]},u.id)),e.length===0&&!c&&n.jsx("div",{className:"flex items-center justify-center w-full py-4",children:n.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhum story disponível no momento"})})]})})})}function uv({open:e,onClose:t,organizer:r,initialStoryIndex:s=0,onLike:a,onDelete:o,onMarkAsViewed:c}){const[u,f]=v.useState(s),[p,x]=v.useState(0),{organizerData:w}=Oa(),b=r.stories[u],j=!!w&&w.id===r.id,N=(b==null?void 0:b.media_type)==="video"?1e4:5e3;v.useEffect(()=>{f(s),x(0)},[s,e]),v.useEffect(()=>{if(!e||!b)return;c(b.id);const _=setInterval(()=>{x(k=>k>=100?u<r.stories.length-1?(f(D=>D+1),0):(t(),100):k+100/(N/100))},100);return()=>clearInterval(_)},[e,u,b,N]);const C=()=>{u>0&&(f(u-1),x(0))},T=()=>{u<r.stories.length-1?(f(u+1),x(0)):t()},S=()=>{a(b.id)},E=()=>{o&&window.confirm("Deseja excluir este story?")&&(o(b.id),u<r.stories.length-1?T():u>0?C():t())};return b?n.jsx(zt,{open:e,onOpenChange:t,children:n.jsx(Ft,{className:"max-w-md h-[90vh] p-0 bg-black border-none",children:n.jsxs("div",{className:"relative h-full flex flex-col",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 z-20 flex gap-1 p-2",children:r.stories.map((_,k)=>n.jsx("div",{className:"flex-1 h-1 bg-white/30 rounded-full overflow-hidden",children:n.jsx("div",{className:Fe("h-full bg-white transition-all duration-100",k<u&&"w-full",k===u&&`w-[${p}%]`,k>u&&"w-0"),style:k===u?{width:`${p}%`}:void 0})},k))}),n.jsxs("div",{className:"absolute top-4 left-0 right-0 z-20 flex items-center justify-between px-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(Ut,{className:"h-8 w-8 ring-2 ring-white",children:[n.jsx(Kt,{src:r.avatar_url||void 0}),n.jsx($t,{className:"bg-primary text-primary-foreground text-xs",children:r.page_title.charAt(0).toUpperCase()})]}),n.jsx("span",{className:"text-white font-medium text-sm",children:r.page_title}),n.jsx("span",{className:"text-white/70 text-xs",children:new Date(b.created_at).toLocaleDateString("pt-BR")})]}),n.jsx(K,{variant:"ghost",size:"icon",onClick:t,className:"text-white hover:bg-white/20",children:n.jsx(sr,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"flex-1 flex items-center justify-center relative",children:[n.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1/3 cursor-pointer z-10",onClick:C}),n.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1/3 cursor-pointer z-10",onClick:T}),b.media_type==="video"?n.jsx("video",{src:b.media_url,className:"w-full h-full object-contain",autoPlay:!0,playsInline:!0,loop:!1,controls:!1}):n.jsx("img",{src:b.media_url,alt:"Story",className:"w-full h-full object-contain"})]}),n.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-20 p-4 bg-gradient-to-t from-black/80 to-transparent",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-1 text-white",children:[n.jsx(Yo,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:b.views_count||0})]}),n.jsxs("div",{className:"flex items-center gap-1 text-white",children:[n.jsx(Ja,{className:Fe("h-4 w-4",b.is_liked&&"fill-red-500 text-red-500")}),n.jsx("span",{className:"text-sm",children:b.likes_count||0})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[!j&&n.jsx(K,{variant:"ghost",size:"icon",onClick:S,className:"text-white hover:bg-white/20",children:n.jsx(Ja,{className:Fe("h-5 w-5",b.is_liked&&"fill-red-500 text-red-500")})}),j&&n.jsx(K,{variant:"ghost",size:"icon",onClick:E,className:"text-white hover:bg-red-500/20",children:n.jsx(Kn,{className:"h-5 w-5"})})]})]}),n.jsxs("div",{className:"flex items-center justify-center gap-4 mt-2",children:[u>0&&n.jsxs(K,{variant:"ghost",size:"sm",onClick:C,className:"text-white/70 hover:text-white hover:bg-white/10",children:[n.jsx(S1,{className:"h-4 w-4 mr-1"}),"Anterior"]}),u<r.stories.length-1&&n.jsxs(K,{variant:"ghost",size:"sm",onClick:T,className:"text-white/70 hover:text-white hover:bg-white/10",children:["Próximo",n.jsx(Ru,{className:"h-4 w-4 ml-1"})]})]})]})]})})}):null}function kB({open:e,onClose:t,onUpload:r}){const[s,a]=v.useState(!1),[o,c]=v.useState(null),[u,f]=v.useState("user"),[p,x]=v.useState(null),[w,b]=v.useState("image"),[j,N]=v.useState(!1),C=v.useRef(null),T=v.useRef(null);v.useEffect(()=>{o&&C.current&&s&&(C.current.srcObject=o,C.current.play().catch(M=>{console.error("Error playing video:",M)}))},[o,s]),v.useEffect(()=>{e||(o&&(o.getTracks().forEach(M=>M.stop()),c(null)),a(!1),x(null))},[e,o]),v.useEffect(()=>()=>{o&&o.getTracks().forEach(M=>M.stop())},[o]);const S=async()=>{try{const M=await navigator.mediaDevices.getUserMedia({video:{facingMode:u},audio:!1});c(M),a(!0)}catch(M){console.error("Error accessing camera:",M),G.error("Erro ao acessar a câmera")}},E=async()=>{o&&o.getTracks().forEach(P=>P.stop());const M=u==="user"?"environment":"user";f(M);try{const P=await navigator.mediaDevices.getUserMedia({video:{facingMode:M},audio:!1});c(P)}catch(P){console.error("Error switching camera:",P),G.error("Erro ao trocar câmera")}},_=()=>{if(!C.current||!o)return;const M=document.createElement("canvas");M.width=C.current.videoWidth,M.height=C.current.videoHeight;const P=M.getContext("2d");if(P){P.drawImage(C.current,0,0);const F=M.toDataURL("image/jpeg",.9);x(F),b("image")}},k=async M=>{var Y;const P=(Y=M.target.files)==null?void 0:Y[0];if(!P)return;if(!P.type.startsWith("image/")&&!P.type.startsWith("video/")){G.error("Por favor, selecione uma imagem ou vídeo");return}if(P.size>50*1024*1024){G.error("Arquivo muito grande. Máximo 50MB");return}const F=new FileReader;F.onload=U=>{var q;x((q=U.target)==null?void 0:q.result),b(P.type.startsWith("video/")?"video":"image")},F.readAsDataURL(P)},D=()=>{if(p)try{fetch(p).then(M=>M.blob()).then(M=>{const P=new File([M],`story-${Date.now()}.${w==="video"?"mp4":"jpg"}`,{type:w==="video"?"video/mp4":"image/jpeg"});r(P),R()}).catch(M=>{console.error("Error preparing story:",M),G.error("Erro ao preparar story")})}catch(M){console.error("Error uploading story:",M),G.error("Erro ao publicar story")}},L=()=>{x(null),!s&&o&&a(!0)},R=()=>{o&&(o.getTracks().forEach(M=>M.stop()),c(null)),a(!1),x(null),t()};return n.jsx(zt,{open:e,onOpenChange:R,children:n.jsx(Ft,{className:"max-w-full sm:max-w-md w-full h-screen sm:h-[90vh] p-0 bg-black border-none overflow-hidden",children:s&&!p?n.jsxs("div",{className:"relative h-full w-full flex flex-col bg-black",children:[n.jsx("div",{className:"flex-1 relative overflow-hidden bg-black",children:n.jsx("video",{ref:C,autoPlay:!0,playsInline:!0,muted:!0,className:"absolute inset-0 w-full h-full object-cover"})}),n.jsxs("div",{className:"absolute top-safe top-4 left-0 right-0 flex justify-between items-center px-4 z-20",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:R,className:"bg-black/60 hover:bg-black/80 text-white rounded-full h-10 w-10",children:n.jsx(sr,{className:"h-5 w-5"})}),n.jsx(K,{variant:"ghost",size:"icon",onClick:E,className:"bg-black/60 hover:bg-black/80 text-white rounded-full h-10 w-10",children:n.jsx(Ij,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"absolute bottom-safe bottom-8 sm:bottom-12 left-0 right-0 flex justify-center items-center gap-6 sm:gap-8 px-4 z-20 pb-safe",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>{var M;return(M=T.current)==null?void 0:M.click()},className:"h-12 w-12 sm:h-14 sm:w-14 bg-white/20 hover:bg-white/30 text-white rounded-full flex-shrink-0",children:n.jsx(Hi,{className:"h-6 w-6"})}),n.jsx(K,{variant:"ghost",size:"icon",onClick:_,className:"h-16 w-16 sm:h-20 sm:w-20 bg-white hover:bg-white/90 rounded-full ring-4 ring-white/50 flex-shrink-0",children:n.jsx("div",{className:"h-14 w-14 sm:h-16 sm:w-16 rounded-full bg-transparent border-4 border-black"})}),n.jsx("div",{className:"h-12 w-12 sm:h-14 sm:w-14 flex-shrink-0"})]}),n.jsx("input",{ref:T,type:"file",accept:"image/*,video/*",className:"hidden",onChange:k})]}):p?n.jsxs("div",{className:"relative h-full w-full flex flex-col bg-black",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 flex justify-between items-center px-4 py-4 z-30 bg-gradient-to-b from-black/80 to-transparent",children:n.jsx(K,{variant:"ghost",size:"icon",onClick:R,className:"bg-black/60 hover:bg-black/80 text-white rounded-full h-10 w-10",children:n.jsx(sr,{className:"h-5 w-5"})})}),n.jsx("div",{className:"flex-1 flex items-center justify-center overflow-hidden pt-16 pb-32",children:w==="video"?n.jsx("video",{src:p,className:"max-h-full w-full object-contain",controls:!0,autoPlay:!0,loop:!0,playsInline:!0}):n.jsx("img",{src:p,alt:"Preview",className:"max-h-full w-full object-contain"})}),n.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-30 bg-gradient-to-t from-black via-black/90 to-transparent pt-8 pb-6 px-4",children:n.jsxs("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-3 max-w-md mx-auto",children:[n.jsxs(K,{variant:"ghost",size:"lg",onClick:L,disabled:j,className:"w-full sm:w-auto bg-white/20 hover:bg-white/30 text-white rounded-full px-8 h-14 min-w-[140px] font-semibold",children:[n.jsx(sr,{className:"h-5 w-5 mr-2"}),"Refazer"]}),n.jsxs(K,{variant:"default",size:"lg",onClick:D,disabled:j,className:"w-full sm:w-auto bg-primary hover:bg-primary/90 rounded-full px-8 h-14 min-w-[140px] font-semibold",children:[n.jsx(Yn,{className:"h-5 w-5 mr-2"}),j?"Publicando...":"Publicar"]})]})})]}):n.jsxs("div",{className:"h-full flex flex-col items-center justify-center gap-6 sm:gap-8 p-6 sm:p-8",children:[n.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white",children:"Criar Story"}),n.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4 w-full max-w-xs",children:[n.jsxs(K,{variant:"default",size:"lg",onClick:S,className:"w-full h-14 sm:h-16 text-base sm:text-lg rounded-xl",children:[n.jsx(En,{className:"h-5 w-5 sm:h-6 sm:w-6 mr-2 sm:mr-3"}),"Abrir Câmera"]}),n.jsxs(K,{variant:"outline",size:"lg",onClick:()=>{var M;return(M=T.current)==null?void 0:M.click()},className:"w-full h-14 sm:h-16 text-base sm:text-lg rounded-xl bg-surface border-border hover:bg-surface/80",children:[n.jsx(Hi,{className:"h-5 w-5 sm:h-6 sm:w-6 mr-2 sm:mr-3"}),"Upload"]})]}),n.jsx("input",{ref:T,type:"file",accept:"image/*,video/*",className:"hidden",onChange:k})]})})})}function hv(){const[e,t]=v.useState([]),[r,s]=v.useState(!1),[a,o]=v.useState(!1),{user:c}=bt(),u=async()=>{try{s(!0);const{data:b,error:j}=await $.from("organizer_stories").select(`
          *,
          organizer:organizers(
            id,
            page_title,
            avatar_url
          )
        `).gt("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});if(j)throw j;if(!b||b.length===0){t([]);return}let N=[],C=[];if(c){const{data:E}=await $.from("organizer_story_views").select("story_id").eq("viewer_id",c.id);N=(E==null?void 0:E.map(k=>k.story_id))||[];const{data:_}=await $.from("organizer_story_likes").select("story_id").eq("user_id",c.id);C=(_==null?void 0:_.map(k=>k.story_id))||[]}const T=await Promise.all(b.map(async E=>{const{count:_}=await $.from("organizer_story_views").select("*",{count:"exact",head:!0}).eq("story_id",E.id),{count:k}=await $.from("organizer_story_likes").select("*",{count:"exact",head:!0}).eq("story_id",E.id);return{...E,views_count:_||0,likes_count:k||0,is_viewed:N.includes(E.id),is_liked:C.includes(E.id)}})),S=new Map;T.forEach(E=>{const _=E.organizer.id;S.has(_)||S.set(_,{id:_,page_title:E.organizer.page_title,avatar_url:E.organizer.avatar_url,stories:[],has_unviewed:!1});const k=S.get(_);k.stories.push(E),E.is_viewed||(k.has_unviewed=!0)}),t(Array.from(S.values()))}catch(b){console.error("Error fetching organizer stories:",b),G.error("Erro ao carregar stories")}finally{s(!1)}},f=async(b,j)=>{if(!c)return G.error("Faça login para criar stories"),null;o(!0);try{const N=j.name.split(".").pop(),C=`organizer-stories/${b}/${Date.now()}.${N}`,{error:T}=await $.storage.from("user-uploads").upload(C,j);if(T)throw T;const{data:{publicUrl:S}}=$.storage.from("user-uploads").getPublicUrl(C),E=j.type.startsWith("video/")?"video":"image",{data:_,error:k}=await $.from("organizer_stories").insert({organizer_id:b,media_url:S,media_type:E}).select().single();if(k)throw k;return G.success("Story publicado com sucesso!"),await u(),_}catch(N){return console.error("Error creating story:",N),G.error("Erro ao criar story"),null}finally{o(!1)}},p=async b=>{if(c)try{const{error:j}=await $.from("organizer_stories").delete().eq("id",b);if(j)throw j;G.success("Story excluído com sucesso!"),await u()}catch(j){console.error("Error deleting story:",j),G.error("Erro ao excluir story")}},x=async b=>{if(c)try{const{error:j}=await $.from("organizer_story_views").insert({story_id:b,viewer_id:c.id});if(j&&!j.message.includes("duplicate"))throw j;t(N=>N.map(C=>({...C,stories:C.stories.map(T=>T.id===b?{...T,is_viewed:!0}:T),has_unviewed:C.stories.some(T=>T.id!==b&&!T.is_viewed)})))}catch(j){console.error("Error marking story as viewed:",j)}},w=async b=>{if(!c){G.error("Faça login para curtir stories");return}try{const j=e.flatMap(N=>N.stories).find(N=>N.id===b);if(!j)return;if(j.is_liked){const{error:N}=await $.from("organizer_story_likes").delete().eq("story_id",b).eq("user_id",c.id);if(N)throw N}else{const{error:N}=await $.from("organizer_story_likes").insert({story_id:b,user_id:c.id});if(N)throw N}t(N=>N.map(C=>({...C,stories:C.stories.map(T=>T.id===b?{...T,is_liked:!T.is_liked,likes_count:T.is_liked?(T.likes_count||0)-1:(T.likes_count||0)+1}:T)})))}catch(j){console.error("Error toggling like:",j),G.error("Erro ao curtir story")}};return v.useEffect(()=>{u();const b=setInterval(u,6e4);return()=>clearInterval(b)},[c]),v.useEffect(()=>{const b=$.channel("organizer-stories-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"organizer_stories"},()=>{u()}).on("postgres_changes",{event:"DELETE",schema:"public",table:"organizer_stories"},()=>{u()}).subscribe();return()=>{$.removeChannel(b)}},[]),{organizersWithStories:e,loading:r,uploadingStory:a,createStory:f,deleteStory:p,markAsViewed:x,toggleLike:w,fetchOrganizerStories:u}}function Ub({onEventClick:e,onFindFriends:t,onOrganizerClick:r,onShowOrganizers:s,onStoryClick:a,userType:o}){const{profile:c}=Bm(),[u]=v.useState(!0),[f,p]=v.useState(""),[x,w]=v.useState("todos"),[b,j]=v.useState([]),{organizersWithStories:N,uploadingStory:C,createStory:T,deleteStory:S,markAsViewed:E,toggleLike:_}=hv(),{organizerData:k}=Oa(),[D,L]=v.useState(null),[R,M]=v.useState(!1),[P,F]=v.useState(!1),Y=W=>{L(W),M(!0)},U=()=>{F(!0)},q=W=>{k&&T(k.id,W)};v.useEffect(()=>{if(Array.isArray(c==null?void 0:c.interests)&&c.interests.length>0){j(c.interests);return}if(c!=null&&c.notes&&c.notes.includes("Interesses:")){const W=c.notes.match(/Interesses:\s*(.+)/);if(W){const ne=W[1].split(",").map(oe=>oe.trim());j(ne)}}},[c]);const re=[{id:"todos",label:"Todos"},{id:"festas",label:"🎉 Festas"},{id:"shows",label:"🎤 Shows"},{id:"fitness",label:"💪 Fitness"},{id:"igreja",label:"🙏 Igreja"},{id:"cursos",label:"📚 Cursos"},{id:"bares",label:"🍻 Bares"},{id:"boates",label:"🪩 Boates"},{id:"esportes",label:"⚽ Esportes"}];return n.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[n.jsx(a0,{title:"Eventos",userType:o,showNotifications:!0,showLocation:!0}),n.jsx(AB,{organizersWithStories:N,onOrganizerClick:Y,onCreateStory:k?U:void 0,uploadingStory:C}),n.jsxs("main",{className:"px-4 py-4 max-w-md mx-auto",children:[n.jsx("div",{className:"mb-4",children:n.jsxs("div",{className:"relative",children:[n.jsx(iu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(we,{type:"text",placeholder:"Buscar eventos...",value:f,onChange:W=>p(W.target.value),className:"pl-10"})]})}),n.jsx("div",{className:"mb-6",children:n.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:re.map(W=>n.jsx("button",{onClick:()=>w(W.id),className:`flex-shrink-0 px-4 py-2 rounded-full border transition-all ${x===W.id?"bg-primary text-primary-foreground border-primary":"bg-surface border-border text-muted-foreground hover:text-foreground hover:border-primary/50"}`,children:n.jsx("span",{className:"text-sm font-medium",children:W.label})},W.id))})}),s&&n.jsx("div",{className:"mb-4",children:n.jsxs(K,{onClick:s,variant:"outline",className:"w-full justify-start gap-2 h-12",children:[n.jsx(P8,{className:"h-5 w-5 text-primary"}),n.jsxs("div",{className:"text-left",children:[n.jsx("p",{className:"text-sm font-medium",children:"Ver Organizadores"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Descubra os melhores da cidade"})]})]})}),u&&n.jsx("div",{className:"mb-6 p-4 bg-surface rounded-lg border border-primary/20 glow-purple cursor-pointer transition-all hover:bg-surface/80",onClick:()=>e("live-events"),children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-3 w-3 bg-destructive rounded-full animate-pulse"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:"Evento acontecendo agora!"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Clique aqui e saiba todos eventos que estão rolando na cidade"})]})]})}),b.length>0&&x==="todos",n.jsx(SB,{onEventClick:e,onOrganizerClick:r,userType:o,categoryFilter:x,searchQuery:f,userInterests:x==="todos"?b:void 0})]}),D&&n.jsx(uv,{open:R,onClose:()=>M(!1),organizer:D,onLike:_,onDelete:(k==null?void 0:k.id)===D.id?S:void 0,onMarkAsViewed:E}),k&&n.jsx(kB,{open:P,onClose:()=>F(!1),onUpload:q})]})}const kn=v.forwardRef(({className:e,...t},r)=>n.jsx("textarea",{className:Fe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));kn.displayName="Textarea";var TB="Label",vS=v.forwardRef((e,t)=>n.jsx(Ve.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));vS.displayName=TB;var wS=vS;const IB=Iu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),de=v.forwardRef(({className:e,...t},r)=>n.jsx(wS,{ref:r,className:Fe(IB(),e),...t}));de.displayName=wS.displayName;var Ag="rovingFocusGroup.onEntryFocus",RB={bubbles:!1,cancelable:!0},Vu="RovingFocusGroup",[l0,yS,PB]=ku(Vu),[OB,Yc]=Mr(Vu,[PB]),[DB,MB]=OB(Vu),bS=v.forwardRef((e,t)=>n.jsx(l0.Provider,{scope:e.__scopeRovingFocusGroup,children:n.jsx(l0.Slot,{scope:e.__scopeRovingFocusGroup,children:n.jsx(LB,{...e,ref:t})})}));bS.displayName=Vu;var LB=v.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:s,loop:a=!1,dir:o,currentTabStopId:c,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:f,onEntryFocus:p,preventScrollOnEntryFocus:x=!1,...w}=e,b=v.useRef(null),j=tt(t,b),N=pl(o),[C,T]=Ms({prop:c,defaultProp:u??null,onChange:f,caller:Vu}),[S,E]=v.useState(!1),_=Er(p),k=yS(r),D=v.useRef(!1),[L,R]=v.useState(0);return v.useEffect(()=>{const M=b.current;if(M)return M.addEventListener(Ag,_),()=>M.removeEventListener(Ag,_)},[_]),n.jsx(DB,{scope:r,orientation:s,dir:N,loop:a,currentTabStopId:C,onItemFocus:v.useCallback(M=>T(M),[T]),onItemShiftTab:v.useCallback(()=>E(!0),[]),onFocusableItemAdd:v.useCallback(()=>R(M=>M+1),[]),onFocusableItemRemove:v.useCallback(()=>R(M=>M-1),[]),children:n.jsx(Ve.div,{tabIndex:S||L===0?-1:0,"data-orientation":s,...w,ref:j,style:{outline:"none",...e.style},onMouseDown:Re(e.onMouseDown,()=>{D.current=!0}),onFocus:Re(e.onFocus,M=>{const P=!D.current;if(M.target===M.currentTarget&&P&&!S){const F=new CustomEvent(Ag,RB);if(M.currentTarget.dispatchEvent(F),!F.defaultPrevented){const Y=k().filter(ne=>ne.focusable),U=Y.find(ne=>ne.active),q=Y.find(ne=>ne.id===C),W=[U,q,...Y].filter(Boolean).map(ne=>ne.ref.current);jS(W,x)}}D.current=!1}),onBlur:Re(e.onBlur,()=>E(!1))})})}),_S="RovingFocusGroupItem",NS=v.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:s=!0,active:a=!1,tabStopId:o,children:c,...u}=e,f=hn(),p=o||f,x=MB(_S,r),w=x.currentTabStopId===p,b=yS(r),{onFocusableItemAdd:j,onFocusableItemRemove:N,currentTabStopId:C}=x;return v.useEffect(()=>{if(s)return j(),()=>N()},[s,j,N]),n.jsx(l0.ItemSlot,{scope:r,id:p,focusable:s,active:a,children:n.jsx(Ve.span,{tabIndex:w?0:-1,"data-orientation":x.orientation,...u,ref:t,onMouseDown:Re(e.onMouseDown,T=>{s?x.onItemFocus(p):T.preventDefault()}),onFocus:Re(e.onFocus,()=>x.onItemFocus(p)),onKeyDown:Re(e.onKeyDown,T=>{if(T.key==="Tab"&&T.shiftKey){x.onItemShiftTab();return}if(T.target!==T.currentTarget)return;const S=zB(T,x.orientation,x.dir);if(S!==void 0){if(T.metaKey||T.ctrlKey||T.altKey||T.shiftKey)return;T.preventDefault();let _=b().filter(k=>k.focusable).map(k=>k.ref.current);if(S==="last")_.reverse();else if(S==="prev"||S==="next"){S==="prev"&&_.reverse();const k=_.indexOf(T.currentTarget);_=x.loop?UB(_,k+1):_.slice(k+1)}setTimeout(()=>jS(_))}}),children:typeof c=="function"?c({isCurrentTabStop:w,hasTabStop:C!=null}):c})})});NS.displayName=_S;var FB={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function BB(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function zB(e,t,r){const s=BB(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return FB[s]}function jS(e,t=!1){const r=document.activeElement;for(const s of e)if(s===r||(s.focus({preventScroll:t}),document.activeElement!==r))return}function UB(e,t){return e.map((r,s)=>e[(t+s)%e.length])}var fv=bS,mv=NS,Xm="Tabs",[$B]=Mr(Xm,[Yc]),CS=Yc(),[VB,pv]=$B(Xm),ES=v.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,onValueChange:a,defaultValue:o,orientation:c="horizontal",dir:u,activationMode:f="automatic",...p}=e,x=pl(u),[w,b]=Ms({prop:s,onChange:a,defaultProp:o??"",caller:Xm});return n.jsx(VB,{scope:r,baseId:hn(),value:w,onValueChange:b,orientation:c,dir:x,activationMode:f,children:n.jsx(Ve.div,{dir:x,"data-orientation":c,...p,ref:t})})});ES.displayName=Xm;var SS="TabsList",AS=v.forwardRef((e,t)=>{const{__scopeTabs:r,loop:s=!0,...a}=e,o=pv(SS,r),c=CS(r);return n.jsx(fv,{asChild:!0,...c,orientation:o.orientation,dir:o.dir,loop:s,children:n.jsx(Ve.div,{role:"tablist","aria-orientation":o.orientation,...a,ref:t})})});AS.displayName=SS;var kS="TabsTrigger",TS=v.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,disabled:a=!1,...o}=e,c=pv(kS,r),u=CS(r),f=PS(c.baseId,s),p=OS(c.baseId,s),x=s===c.value;return n.jsx(mv,{asChild:!0,...u,focusable:!a,active:x,children:n.jsx(Ve.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":p,"data-state":x?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:f,...o,ref:t,onMouseDown:Re(e.onMouseDown,w=>{!a&&w.button===0&&w.ctrlKey===!1?c.onValueChange(s):w.preventDefault()}),onKeyDown:Re(e.onKeyDown,w=>{[" ","Enter"].includes(w.key)&&c.onValueChange(s)}),onFocus:Re(e.onFocus,()=>{const w=c.activationMode!=="manual";!x&&!a&&w&&c.onValueChange(s)})})})});TS.displayName=kS;var IS="TabsContent",RS=v.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,forceMount:a,children:o,...c}=e,u=pv(IS,r),f=PS(u.baseId,s),p=OS(u.baseId,s),x=s===u.value,w=v.useRef(x);return v.useEffect(()=>{const b=requestAnimationFrame(()=>w.current=!1);return()=>cancelAnimationFrame(b)},[]),n.jsx(Hr,{present:a||x,children:({present:b})=>n.jsx(Ve.div,{"data-state":x?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":f,hidden:!b,id:p,tabIndex:0,...c,ref:t,style:{...e.style,animationDuration:w.current?"0s":void 0},children:b&&o})})});RS.displayName=IS;function PS(e,t){return`${e}-trigger-${t}`}function OS(e,t){return`${e}-content-${t}`}var qB=ES,DS=AS,MS=TS,LS=RS;const Km=qB,qu=v.forwardRef(({className:e,...t},r)=>n.jsx(DS,{ref:r,className:Fe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));qu.displayName=DS.displayName;const ls=v.forwardRef(({className:e,...t},r)=>n.jsx(MS,{ref:r,className:Fe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));ls.displayName=MS.displayName;const cs=v.forwardRef(({className:e,...t},r)=>n.jsx(LS,{ref:r,className:Fe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));cs.displayName=LS.displayName;function Wu({open:e,onOpenChange:t,actionDescription:r,onSuccess:s}){const[a,o]=v.useState(!1),[c,u]=v.useState(!1),[f,p]=v.useState(""),[x,w]=v.useState(""),[b,j]=v.useState("user"),[N,C]=v.useState(0),[T,S]=v.useState(""),[E,_]=v.useState(""),[k,D]=v.useState(""),[L,R]=v.useState(""),[M,P]=v.useState(null),[F,Y]=v.useState(""),[U,q]=v.useState(""),[re,W]=v.useState(""),[ne,oe]=v.useState(""),ae=[{id:"balada",label:"Balada"},{id:"lives",label:"Lives"},{id:"encontros",label:"Encontros"},{id:"shows",label:"Shows"},{id:"festas",label:"Festas"},{id:"networking",label:"Networking"}],[J,he]=v.useState([]),ye=async te=>{te.preventDefault(),u(!0);try{const{error:se}=await $.auth.signInWithPassword({email:f,password:x});if(se)throw se;G.success("Login realizado com sucesso!"),t(!1),s&&s()}catch(se){console.error("Login error:",se),G.error(se.message||"Erro ao fazer login")}finally{u(!1)}},H=te=>{var ce;const se=(ce=te.target.files)==null?void 0:ce[0];if(se){P(se);const ge=new FileReader;ge.onloadend=()=>Y(ge.result),ge.readAsDataURL(se)}},ee=te=>{he(se=>se.includes(te)?se.filter(ce=>ce!==te):[...se,te])},X=async te=>{if(te.preventDefault(),N<3){C(se=>se+1);return}u(!0);try{const se=`${window.location.origin}/`,{data:ce,error:ge}=await $.auth.signUp({email:E,password:L,options:{emailRedirectTo:se,data:{display_name:T,role:b}}});if(ge)throw ge;if(!ce.session){const{error:Se}=await $.auth.signInWithPassword({email:E,password:L});if(Se)throw Se}let Te=null;const be=(await $.auth.getUser()).data.user;if(be&&M){const Se=M.name.split(".").pop(),Me=`${be.id}/avatar.${Se}`,{error:ue}=await $.storage.from("user-uploads").upload(Me,M,{upsert:!0});if(!ue){const{data:We}=$.storage.from("user-uploads").getPublicUrl(Me);Te=We.publicUrl}}be&&await $.from("profiles").update({display_name:T,username:k||null,avatar_url:Te,bio:U||null,instagram_url:re||null,phone:ne||null,notes:J.length?`Interesses: ${J.join(", ")}`:null}).eq("user_id",be.id),G.success("Conta criada com sucesso!"),t(!1),s==null||s()}catch(se){console.error("Signup error:",se),G.error(se.message||"Erro ao criar conta")}finally{u(!1)}};return n.jsx(zt,{open:e,onOpenChange:t,children:n.jsxs(Ft,{className:"sm:max-w-md",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Bem-vindo!"}),n.jsx(os,{children:r||"Faça login ou crie uma conta para continuar"})]}),n.jsxs(Km,{defaultValue:"login",className:"w-full",children:[n.jsxs(qu,{className:"grid w-full grid-cols-2",children:[n.jsx(ls,{value:"login",children:"Entrar"}),n.jsx(ls,{value:"signup",children:"Criar Conta"})]}),n.jsx(cs,{value:"login",children:n.jsxs("form",{onSubmit:ye,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"login-email",children:"Email"}),n.jsx(we,{id:"login-email",type:"email",placeholder:"seu@email.com",value:f,onChange:te=>p(te.target.value),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"login-password",children:"Senha"}),n.jsxs("div",{className:"relative",children:[n.jsx(we,{id:"login-password",type:a?"text":"password",placeholder:"••••••••",value:x,onChange:te=>w(te.target.value),required:!0}),n.jsx(K,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3",onClick:()=>o(!a),children:a?n.jsx(Ix,{className:"h-4 w-4"}):n.jsx(Yo,{className:"h-4 w-4"})})]})]}),n.jsx(K,{type:"submit",className:"w-full",disabled:c,children:c?"Entrando...":"Entrar"})]})}),n.jsx(cs,{value:"signup",children:n.jsxs("form",{onSubmit:X,className:"space-y-4",children:[N===0&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"signup-name",children:"Nome"}),n.jsx(we,{id:"signup-name",type:"text",placeholder:"Seu nome",value:T,onChange:te=>S(te.target.value),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"signup-email",children:"Email"}),n.jsx(we,{id:"signup-email",type:"email",placeholder:"seu@email.com",value:E,onChange:te=>_(te.target.value),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Tipo de conta"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(K,{type:"button",variant:b==="user"?"default":"outline",className:"flex-1",onClick:()=>j("user"),children:"Participante"}),n.jsx(K,{type:"button",variant:b==="organizer"?"default":"outline",className:"flex-1",onClick:()=>j("organizer"),children:"Organizador"})]})]})]}),N===1&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"signup-username",children:"Username"}),n.jsx(we,{id:"signup-username",type:"text",placeholder:"seu_username",value:k,onChange:te=>D(te.target.value.toLowerCase())}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Use letras minúsculas, números e _"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Foto de perfil (opcional)"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ut,{className:"h-16 w-16",children:F?n.jsx(Kt,{src:F}):n.jsx($t,{children:"U"})}),n.jsxs("div",{children:[n.jsx("input",{id:"avatar-input",type:"file",accept:"image/*",className:"hidden",onChange:H}),n.jsx(de,{htmlFor:"avatar-input",children:n.jsx(K,{type:"button",variant:"outline",size:"sm",asChild:!0,children:n.jsxs("span",{className:"cursor-pointer",children:[n.jsx(Fs,{className:"h-4 w-4 mr-2"}),"Selecionar foto"]})})})]})]})]})]}),N===2&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"signup-bio",children:"Bio (opcional)"}),n.jsx(kn,{id:"signup-bio",placeholder:"Fale um pouco sobre você",value:U,onChange:te=>q(te.target.value)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"signup-insta",children:"Instagram (opcional)"}),n.jsx(we,{id:"signup-insta",placeholder:"https://instagram.com/usuario",value:re,onChange:te=>W(te.target.value)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"signup-whats",children:"WhatsApp (opcional)"}),n.jsx(we,{id:"signup-whats",placeholder:"https://wa.me/5511999999999",value:ne,onChange:te=>oe(te.target.value)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Interesses (opcional)"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:ae.map(te=>n.jsx(ct,{variant:J.includes(te.id)?"default":"outline",className:"cursor-pointer",onClick:()=>ee(te.id),children:te.label},te.id))})]})]}),N===3&&n.jsx(n.Fragment,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"signup-password",children:"Senha"}),n.jsxs("div",{className:"relative",children:[n.jsx(we,{id:"signup-password",type:a?"text":"password",placeholder:"••••••••",value:L,onChange:te=>R(te.target.value),required:!0,minLength:6}),n.jsx(K,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3",onClick:()=>o(!a),children:a?n.jsx(Ix,{className:"h-4 w-4"}):n.jsx(Yo,{className:"h-4 w-4"})})]})]})}),n.jsxs("div",{className:"flex gap-2",children:[N>0&&n.jsx(K,{type:"button",variant:"outline",onClick:()=>C(te=>te-1),children:"Voltar"}),n.jsx(K,{type:"submit",className:"flex-1",disabled:c,children:c?"Carregando...":N<3?"Próximo":"Finalizar Cadastro"})]})]})})]})]})})}var WB="Separator",$b="horizontal",HB=["horizontal","vertical"],FS=v.forwardRef((e,t)=>{const{decorative:r,orientation:s=$b,...a}=e,o=GB(s)?s:$b,u=r?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return n.jsx(Ve.div,{"data-orientation":o,...u,...a,ref:t})});FS.displayName=WB;function GB(e){return HB.includes(e)}var BS=FS;const la=v.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...s},a)=>n.jsx(BS,{ref:a,decorative:r,orientation:t,className:Fe("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...s}));la.displayName=BS.displayName;function XB({open:e,onOpenChange:t,ticketTypes:r,ticketSettings:s,eventId:a,eventTitle:o}){const[c,u]=v.useState({}),[f,p]=v.useState(!1),x=(N,C)=>{const T=r.find(D=>D.id===N);if(!T)return;const S=c[N]||0,E=T.max_quantity_per_purchase||10,_=Math.max(0,Math.min(E,S+C)),k=T.quantity-(T.quantity_sold||0);if(_>k){G.error(`Apenas ${k} ingressos disponíveis`);return}u(D=>({...D,[N]:_}))},w=()=>{let N=0,C=0;Object.entries(c).forEach(([_,k])=>{const D=r.find(L=>L.id===_);D&&k>0&&(N+=D.price*k,C+=k)});const T=N*(s.platform_fee_percentage/100),S=N*(s.payment_processing_fee_percentage/100)+s.payment_processing_fee_fixed*C,E=s.fee_payer==="buyer"?N+T+S:N;return{subtotal:N,platformFee:T,processingFee:S,total:E,totalQuantity:C}},b=async()=>{try{p(!0);const N=Object.keys(c).filter(_=>c[_]>0);if(N.length===0){G.error("Selecione pelo menos um ingresso");return}const C=N[0],T=c[C],{data:S,error:E}=await $.functions.invoke("create-ticket-checkout",{body:{ticketTypeId:C,quantity:T,eventId:a}});if(E)throw E;if(S!=null&&S.url)window.open(S.url,"_blank"),t(!1),G.success("Redirecionando para o checkout...");else throw new Error("URL de checkout não recebida")}catch(N){console.error("Erro ao criar checkout:",N),G.error("Erro ao processar compra. Tente novamente.")}finally{p(!1)}},j=w();return n.jsx(zt,{open:e,onOpenChange:t,children:n.jsxs(Ft,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(xr,{children:[n.jsx(vr,{className:"text-2xl",children:"Comprar Ingressos"}),n.jsx("p",{className:"text-muted-foreground",children:o})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"space-y-4",children:r.map(N=>{const C=N.quantity-(N.quantity_sold||0),T=c[N.id]||0;return n.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-lg",children:N.name}),N.description&&n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:N.description}),n.jsxs(ct,{variant:"secondary",className:"mt-2",children:[C," disponíveis"]})]}),n.jsx("div",{className:"text-right",children:n.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["R$ ",N.price.toFixed(2)]})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(K,{variant:"outline",size:"icon",onClick:()=>x(N.id,-1),disabled:T===0||f,children:n.jsx(L8,{className:"h-4 w-4"})}),n.jsx("span",{className:"text-lg font-medium w-12 text-center",children:T}),n.jsx(K,{variant:"outline",size:"icon",onClick:()=>x(N.id,1),disabled:T>=C||f,children:n.jsx($c,{className:"h-4 w-4"})})]}),T>0&&n.jsxs("p",{className:"text-lg font-semibold",children:["R$ ",(N.price*T).toFixed(2)]})]})]},N.id)})}),j.totalQuantity>0&&n.jsxs(n.Fragment,{children:[n.jsx(la,{}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{className:"text-muted-foreground",children:["Subtotal (",j.totalQuantity," ingresso",j.totalQuantity>1?"s":"",")"]}),n.jsxs("span",{children:["R$ ",j.subtotal.toFixed(2)]})]}),s.fee_payer==="buyer"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsxs("span",{className:"text-muted-foreground",children:["Taxa da plataforma (",s.platform_fee_percentage,"%)"]}),n.jsxs("span",{children:["R$ ",j.platformFee.toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Taxa de processamento"}),n.jsxs("span",{children:["R$ ",j.processingFee.toFixed(2)]})]})]}),n.jsx(la,{}),n.jsxs("div",{className:"flex justify-between text-xl font-bold",children:[n.jsx("span",{children:"Total"}),n.jsxs("span",{className:"text-green-600",children:["R$ ",j.total.toFixed(2)]})]}),s.fee_payer==="organizer"&&n.jsx("p",{className:"text-xs text-muted-foreground",children:"*As taxas serão deduzidas do valor repassado ao organizador"})]}),n.jsxs(K,{className:"w-full bg-green-600 hover:bg-green-700 text-white",size:"lg",onClick:b,disabled:f,children:[n.jsx(q8,{className:"h-5 w-5 mr-2"}),f?"Processando...":"Finalizar Compra"]})]})]})]})})}function KB(e){var b,j;const[t,r]=v.useState(null),[s,a]=v.useState(!1),[o,c]=v.useState([]),{user:u}=bt(),f=async()=>{if(e)try{a(!0);let N=null,C=!1,T=!1,S=null;const{data:E,error:_}=await $.from("events").select(`
          *,
          organizer:organizers!inner(
            id,
            page_title,
            user_id,
            avatar_url
          )
        `).eq("id",e).maybeSingle();if(E)N=E;else{const{data:q,error:re}=await $.from("platform_events").select("*").eq("id",e).maybeSingle();if(q)if(q.claimed_by_organizer_id){const{data:W}=await $.from("events").select(`
                *,
                organizer:organizers!inner(
                  id,
                  page_title,
                  user_id,
                  avatar_url
                )
              `).eq("organizer_id",q.claimed_by_organizer_id).eq("title",q.title).eq("event_date",q.event_date).maybeSingle();W?(N=W,C=!1):(N={...q,is_platform_event:!0,organizer_id:"platform",organizer:{id:"platform",page_title:q.organizer_name,user_id:"platform",avatar_url:null,profile:{display_name:q.organizer_name,avatar_url:null}},current_attendees:0,is_live:!1},C=!0)}else N={...q,is_platform_event:!0,organizer_id:"platform",organizer:{id:"platform",page_title:q.organizer_name,user_id:"platform",avatar_url:null,profile:{display_name:q.organizer_name,avatar_url:null}},current_attendees:0,is_live:!1},C=!0}if(!N)return;let k=null;if(!C){const{data:q}=await $.from("profiles").select("display_name, avatar_url, notes").eq("user_id",N.organizer.user_id).maybeSingle();k=q}let D=0;if(!C){const{count:q}=await $.from("event_likes").select("*",{count:"exact",head:!0}).eq("event_id",e);D=q||0}let L=0;if(!C){const{count:q}=await $.from("event_comments").select("*",{count:"exact",head:!0}).eq("event_id",e);L=q||0}let R=0,M=0,P=0;if(!C){const{count:q}=await $.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",e),{count:re}=await $.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",e).eq("attendance_confirmed",!0),{data:W}=await $.from("event_registrations").select("user_id").eq("event_id",e);R=q||0,M=re||0,P=new Set((W==null?void 0:W.map(ne=>ne.user_id))||[]).size}let F=!1;if(!C&&u){const{data:q}=await $.from("event_likes").select("id").eq("event_id",e).eq("user_id",u.id).maybeSingle();F=!!q}let Y=[],U=!1;if(!C&&(N!=null&&N.has_platform_tickets)){const{data:q}=await $.from("ticket_types").select("*").eq("event_id",e).eq("is_active",!0).order("sort_order",{ascending:!0});q&&q.length>0&&(Y=q,U=!0)}r({...N,is_platform_event:C,organizer:C?N.organizer:{...N.organizer,profile:{display_name:k==null?void 0:k.display_name,avatar_url:N.organizer.avatar_url||(k==null?void 0:k.avatar_url),notes:k==null?void 0:k.notes}},likes_count:D,comments_count:L,is_liked:F,registrations_count:R,confirmed_attendees_count:M,unique_attendees_count:P,has_platform_tickets:U,ticket_types:Y}),C||p()}catch(N){console.error("Error fetching event details:",N)}finally{a(!1)}},p=async()=>{if(e)try{const{data:N}=await $.from("event_comments").select(`
          id,
          content,
          created_at,
          user_id
        `).eq("event_id",e).order("created_at",{ascending:!1}).limit(10),C=await Promise.all((N||[]).map(async T=>{const{data:S}=await $.from("profiles").select("display_name, avatar_url").eq("user_id",T.user_id).maybeSingle();return{...T,user:S}}));c(C)}catch(N){console.error("Error fetching event details:",N)}finally{a(!1)}},x=async()=>{if(!(!u||!e))try{const{data:N}=await $.from("event_likes").select("id").eq("event_id",e).eq("user_id",u.id).maybeSingle();N?await $.from("event_likes").delete().eq("id",N.id):await $.from("event_likes").insert({event_id:e,user_id:u.id}),t&&r(C=>C?{...C,is_liked:!C.is_liked,likes_count:C.is_liked?(C.likes_count||0)-1:(C.likes_count||0)+1}:null)}catch(N){console.error("Error toggling like:",N)}},w=async N=>{if(!(!u||!e))try{const{data:C,error:T}=await $.from("event_comments").insert({event_id:e,user_id:u.id,content:N}).select().single();if(T)throw T;const{data:S}=await $.from("profiles").select("display_name, avatar_url").eq("user_id",u.id).maybeSingle(),E={...C,user:S};c(_=>[E,..._]),t&&r(_=>_?{..._,comments_count:(_.comments_count||0)+1}:null)}catch(C){console.error("Error adding comment:",C)}};return v.useEffect(()=>{f()},[e,u]),v.useEffect(()=>{var C,T;if(!t)return;const N=$.channel("realtime-organizer-profile-eventdetails").on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles",filter:`user_id=eq.${(C=t.organizer)==null?void 0:C.user_id}`},S=>{const E=S.new;r(_=>{var k,D,L,R,M,P,F;return _&&{..._,organizer:{..._.organizer,profile:{...((k=_.organizer)==null?void 0:k.profile)||{},display_name:E.display_name??((L=(D=_.organizer)==null?void 0:D.profile)==null?void 0:L.display_name),avatar_url:E.avatar_url??((M=(R=_.organizer)==null?void 0:R.profile)==null?void 0:M.avatar_url),notes:(F=(P=_.organizer)==null?void 0:P.profile)==null?void 0:F.notes}}}})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"organizers",filter:`id=eq.${(T=t.organizer)==null?void 0:T.id}`},S=>{const E=S.new;r(_=>{var k,D,L,R,M;return _&&{..._,organizer:{..._.organizer,page_title:E.page_title??((k=_.organizer)==null?void 0:k.page_title),avatar_url:E.avatar_url??((D=_.organizer)==null?void 0:D.avatar_url),profile:{...((L=_.organizer)==null?void 0:L.profile)||{},avatar_url:E.avatar_url??((M=(R=_.organizer)==null?void 0:R.profile)==null?void 0:M.avatar_url)}}}})}).subscribe();return()=>{$.removeChannel(N)}},[(b=t==null?void 0:t.organizer)==null?void 0:b.user_id,(j=t==null?void 0:t.organizer)==null?void 0:j.id]),v.useEffect(()=>{if(!e)return;const N=$.channel("realtime-event-registrations-details").on("postgres_changes",{event:"INSERT",schema:"public",table:"event_registrations",filter:`event_id=eq.${e}`},async()=>{const{count:C}=await $.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",e),{count:T}=await $.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",e).eq("attendance_confirmed",!0),{data:S}=await $.from("event_registrations").select("user_id").eq("event_id",e),E=new Set((S==null?void 0:S.map(_=>_.user_id))||[]).size;r(_=>_&&{..._,registrations_count:C||0,confirmed_attendees_count:T||0,unique_attendees_count:E||0})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"event_registrations",filter:`event_id=eq.${e}`},async()=>{const{count:C}=await $.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",e),{count:T}=await $.from("event_registrations").select("*",{count:"exact",head:!0}).eq("event_id",e).eq("attendance_confirmed",!0),{data:S}=await $.from("event_registrations").select("user_id").eq("event_id",e),E=new Set((S==null?void 0:S.map(_=>_.user_id))||[]).size;r(_=>_&&{..._,registrations_count:C||0,confirmed_attendees_count:T||0,unique_attendees_count:E||0})}).subscribe();return()=>{$.removeChannel(N)}},[e]),{event:t,loading:s,comments:o,toggleLike:x,addComment:w,fetchEventDetails:f}}function zS(e){const[t,r]=v.useState([]),[s,a]=v.useState(!1);v.useEffect(()=>{e&&o()},[e]);const o=async()=>{try{const{data:N,error:C}=await $.from("event_pixels").select("*").eq("event_id",e).eq("is_active",!0);if(C)throw C;N&&N.length>0&&(r(N),c(N)),a(!0)}catch(N){console.error("Error loading pixels:",N),a(!0)}},c=N=>{N.forEach(C=>{switch(C.platform){case"facebook":u(C.pixel_id);break;case"google_ads":f(C.pixel_id);break;case"tiktok":p(C.pixel_id);break;case"linkedin":x(C.pixel_id);break;case"twitter":w(C.pixel_id);break;case"custom":b(C.pixel_id);break}})},u=N=>{if(typeof window>"u")return;const C=document.createElement("script");C.innerHTML=`
      !function(f,b,e,v,n,t,s)
      {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};
      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
      n.queue=[];t=b.createElement(e);t.async=!0;
      t.src=v;s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s)}(window, document,'script',
      'https://connect.facebook.net/en_US/fbevents.js');
      fbq('init', '${N}');
      fbq('track', 'PageView');
    `,document.head.appendChild(C);const T=document.createElement("noscript");T.innerHTML=`<img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=${N}&ev=PageView&noscript=1"/>`,document.body.appendChild(T)},f=N=>{if(typeof window>"u")return;const C=document.createElement("script");C.async=!0,C.src=`https://www.googletagmanager.com/gtag/js?id=${N}`,document.head.appendChild(C);const T=document.createElement("script");T.innerHTML=`
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', '${N}');
    `,document.head.appendChild(T)},p=N=>{if(typeof window>"u")return;const C=document.createElement("script");C.innerHTML=`
      !function (w, d, t) {
        w.TiktokAnalyticsObject=t;var ttq=w[t]=w[t]||[];ttq.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"],ttq.setAndDefer=function(t,e){t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}};for(var i=0;i<ttq.methods.length;i++)ttq.setAndDefer(ttq,ttq.methods[i]);ttq.instance=function(t){for(var e=ttq._i[t]||[],n=0;n<ttq.methods.length;n++)ttq.setAndDefer(e,ttq.methods[n]);return e},ttq.load=function(e,n){var i="https://analytics.tiktok.com/i18n/pixel/events.js";ttq._i=ttq._i||{},ttq._i[e]=[],ttq._i[e]._u=i,ttq._t=ttq._t||{},ttq._t[e]=+new Date,ttq._o=ttq._o||{},ttq._o[e]=n||{};var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=i+"?sdkid="+e+"&lib="+t;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(o,a)};
        ttq.load('${N}');
        ttq.page();
      }(window, document, 'ttq');
    `,document.head.appendChild(C)},x=N=>{if(typeof window>"u")return;const C=document.createElement("script");C.innerHTML=`
      _linkedin_partner_id = "${N}";
      window._linkedin_data_partner_ids = window._linkedin_data_partner_ids || [];
      window._linkedin_data_partner_ids.push(_linkedin_partner_id);
    `,document.head.appendChild(C);const T=document.createElement("script");T.src="https://snap.licdn.com/li.lms-analytics/insight.min.js",T.async=!0,document.head.appendChild(T)},w=N=>{if(typeof window>"u")return;const C=document.createElement("script");C.innerHTML=`
      !function(e,t,n,s,u,a){e.twq||(s=e.twq=function(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments);
      },s.version='1.1',s.queue=[],u=t.createElement(n),u.async=!0,u.src='https://static.ads-twitter.com/uwt.js',
      a=t.getElementsByTagName(n)[0],a.parentNode.insertBefore(u,a))}(window,document,'script');
      twq('config','${N}');
    `,document.head.appendChild(C)},b=N=>{if(typeof window>"u")return;const C=document.createElement("script");C.innerHTML=N,document.head.appendChild(C)};return{pixels:t,loaded:s,trackEvent:(N,C)=>{!s||t.length===0||t.forEach(T=>{switch(T.platform){case"facebook":window.fbq&&window.fbq("track",N,C);break;case"google_ads":window.gtag&&window.gtag("event",N,C);break;case"tiktok":window.ttq&&window.ttq.track(N,C);break;case"twitter":window.twq&&window.twq("track",N,C);break}})}}}const Vb="https://meetlines.com.br";function Ym(){return Vb.trim().length>0?Vb:typeof window<"u"?window.location.origin:""}function US({onBack:e,eventId:t,onRegister:r,onFindFriends:s,onEdit:a,onManageRegistrations:o,onViewAttendances:c}){var ze,Ge,Vt,pe,Ze,it,ot,ar,Nt,Sr,At;const{event:u,loading:f,comments:p,toggleLike:x,addComment:w}=KB(t),{user:b,userRole:j}=bt(),{trackEvent:N}=zS(t),C=_t();Qn();const[T,S]=v.useState(""),[E,_]=v.useState(!1),[k,D]=v.useState(!0),[L,R]=v.useState(!1),[M,P]=v.useState(!1),[F,Y]=v.useState(""),[U,q]=v.useState(!1),[re,W]=v.useState(null),[ne,oe]=v.useState(!1),[ae,J]=v.useState(!1),[he,ye]=v.useState(null),H=b&&((ze=u==null?void 0:u.organizer)==null?void 0:ze.user_id)===b.id,ee=(u==null?void 0:u.location_link)&&(u.location_link.includes("meet.google")||u.location_link.includes("zoom.us")||u.location_link.includes("youtube.com")||u.location_link.includes("twitch.tv")||u.location_link.includes("teams.microsoft")||u.location_link.includes("streamyard")||u.location_link.includes("jitsi"));v.useEffect(()=>{(async()=>{if(!b){q(!1);return}try{const{data:Ae,error:st}=await $.from("organizers").select("id").eq("user_id",b.id).maybeSingle();!st&&Ae&&(q(!0),W(Ae.id))}catch(Ae){console.error("Error checking organizer:",Ae)}})()},[b]),v.useEffect(()=>{(async()=>{if(!b||!t){D(!1);return}try{const{data:Ae,error:st}=await $.from("event_registrations").select("attendance_confirmed").eq("event_id",t).eq("user_id",b.id).maybeSingle();!st&&Ae&&_(Ae.attendance_confirmed||!1)}catch(Ae){console.error("Error checking attendance:",Ae)}finally{D(!1)}})()},[b,t]),v.useEffect(()=>{(async()=>{if(!(!(u!=null&&u.has_platform_tickets)||!t))try{const{data:Ae,error:st}=await $.from("event_ticket_settings").select("*").eq("event_id",t).maybeSingle();!st&&Ae&&ye(Ae)}catch(Ae){console.error("Error loading ticket settings:",Ae)}})()},[u==null?void 0:u.has_platform_tickets,t]);const X=($e,Ae)=>{if(!b){Y(`para ${Ae}`),P(!0);return}$e()},te=$e=>{const Ae=new Date($e),dt=["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"][Ae.getDay()],ft=Ae.getHours().toString().padStart(2,"0"),Ie=Ae.getMinutes().toString().padStart(2,"0");return`${dt}, ${ft}:${Ie}`},se=$e=>{const Ae=new Date,st=new Date($e),dt=Ae.getTime()-st.getTime(),ft=Math.floor(dt/(1e3*60*60)),Ie=Math.floor(ft/24);return Ie>0?`${Ie}d`:ft>0?`${ft}h`:"agora"},ce=async()=>{T.trim()&&X(async()=>{await w(T),S("")},"comentar")},ge=()=>{X(()=>{x()},"curtir este evento")},Te=async()=>{X(async()=>{var $e;if(!(!b||!t)){R(!0);try{const{data:Ae,error:st}=await $.from("event_registrations").select("id, attendance_confirmed").eq("event_id",t).eq("user_id",b.id).maybeSingle();if(st){console.error("Error checking registration:",st),G.error("Erro ao verificar registro");return}if(Ae){const{error:dt}=await $.from("event_registrations").update({attendance_confirmed:!0,attendance_confirmed_at:new Date().toISOString()}).eq("id",Ae.id);if(dt){console.error("Error updating attendance:",dt),G.error("Erro ao confirmar presença");return}}else{const{data:dt}=await $.from("profiles").select("display_name").eq("user_id",b.id).single(),{error:ft}=await $.from("event_registrations").insert({event_id:t,user_id:b.id,user_name:(dt==null?void 0:dt.display_name)||(($e=b.email)==null?void 0:$e.split("@")[0])||"Usuário",user_email:b.email||"",attendance_confirmed:!0,attendance_confirmed_at:new Date().toISOString()});if(ft){console.error("Error creating registration:",ft),G.error("Erro ao confirmar presença");return}}_(!0),G.success("Presença confirmada com sucesso!"),N("CompleteRegistration",{event_name:u==null?void 0:u.title,event_id:t,value:0,currency:"BRL"})}catch(Ae){console.error("Error:",Ae),G.error("Erro ao confirmar presença")}finally{R(!1)}}},"confirmar presença")},be=async()=>{X(async()=>{if(!(!b||!t)){R(!0);try{const{error:$e}=await $.from("event_registrations").update({attendance_confirmed:!1,attendance_confirmed_at:null}).eq("event_id",t).eq("user_id",b.id);if($e){console.error("Error canceling attendance:",$e),G.error("Erro ao cancelar presença");return}_(!1),G.success("Confirmação de presença cancelada")}catch($e){console.error("Error:",$e),G.error("Erro ao cancelar presença")}finally{R(!1)}}},"cancelar presença")},Se=async()=>{if(t)try{const{error:$e}=await $.from("events").update({is_live:!1,status:"completed"}).eq("id",t);if($e){console.error("Error ending event:",$e),G.error("Erro ao encerrar evento");return}G.success("Evento encerrado com sucesso!"),window.location.reload()}catch($e){console.error("Error:",$e),G.error("Erro ao encerrar evento")}},Me=()=>{X(()=>{s&&s()},"encontrar amigos")},ue=async()=>{if(!t||!u){G.error("Evento não encontrado");return}const $e=`${Ym()}/e/${t}`;try{if(typeof navigator<"u"&&navigator.share){await navigator.share({title:u.title,text:`Confira este evento: ${u.title}`,url:$e}),G.success("Evento compartilhado!");return}}catch{}try{if(navigator.clipboard&&window.isSecureContext){await navigator.clipboard.writeText($e),G.success("Link copiado para a área de transferência!");return}}catch{}try{const Ae=document.createElement("textarea");Ae.value=$e,Ae.setAttribute("readonly",""),Ae.style.position="fixed",Ae.style.opacity="0",document.body.appendChild(Ae),Ae.select();const st=document.execCommand("copy");if(document.body.removeChild(Ae),st){G.success("Link copiado!");return}}catch{}try{window.prompt("Copie o link do evento:",$e),G.info("Link exibido para copiar.")}catch{G.error("Não foi possível gerar o link automaticamente.")}},[We,Ee]=v.useState({claimed:!1,alreadyCreated:!1});v.useEffect(()=>{(async()=>{if(!(!t||!re||!(u!=null&&u.is_platform_event)))try{const{data:Ae}=await $.from("events").select("id").eq("organizer_id",re).eq("title",u.title).maybeSingle();if(Ae){Ee({claimed:!0,alreadyCreated:!0});return}const{data:st}=await $.from("event_claim_requests").select("id, status").eq("platform_event_id",t).eq("organizer_id",re).maybeSingle();(st==null?void 0:st.status)==="approved"&&Ee({claimed:!0,alreadyCreated:!1})}catch(Ae){console.error("Error checking claim status:",Ae)}})()},[t,re,u==null?void 0:u.is_platform_event,u==null?void 0:u.title]);const Je=async()=>{if(!b||!re||!t){G.error("Você precisa ser um organizador para solicitar associação");return}oe(!0);try{const{data:$e}=await $.from("event_claim_requests").select("id, status").eq("platform_event_id",t).eq("organizer_id",re).maybeSingle();if($e){$e.status==="pending"?G.info("Você já tem uma solicitação pendente para este evento"):$e.status==="approved"?(G.info("Este evento já foi aprovado para você"),Ee({claimed:!0,alreadyCreated:!1})):$e.status==="rejected"&&G.error("Sua solicitação anterior foi rejeitada");return}const{error:Ae}=await $.from("event_claim_requests").insert({platform_event_id:t,organizer_id:re,message:"Solicitação de associação ao evento"});if(Ae)throw Ae;G.success("Solicitação enviada! Aguarde aprovação do administrador.")}catch($e){console.error("Error claiming event:",$e),G.error("Erro ao solicitar associação: "+$e.message)}finally{oe(!1)}};if(f)return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"relative",children:n.jsx(St,{className:"w-full h-80"})}),n.jsxs("div",{className:"px-4 py-6 max-w-md mx-auto space-y-4",children:[n.jsx(St,{className:"h-8 w-3/4"}),n.jsx(St,{className:"h-4 w-1/2"}),n.jsx(St,{className:"h-20 w-full"})]})]});if(!u)return n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-muted-foreground",children:"Evento não encontrado"}),n.jsx(K,{variant:"outline",onClick:e,className:"mt-4",children:"Voltar"})]})});const _e=!!(u.image_url&&u.image_url.trim()!==""&&!u.image_url.includes("placeholder.svg"));return n.jsxs("div",{className:"min-h-screen bg-background pb-24",children:[n.jsxs("header",{className:"relative",children:[_e&&n.jsxs(n.Fragment,{children:[n.jsx("img",{src:u.image_url,alt:u.title,className:"w-full h-80 object-cover"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/60 to-transparent"})]}),n.jsx(K,{variant:"ghost",size:"icon",className:"absolute top-4 left-4 bg-surface/80 backdrop-blur-sm hover:bg-surface",onClick:e,children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[H&&n.jsxs(n.Fragment,{children:[u.is_live&&n.jsxs(K,{variant:"destructive",size:"sm",className:"bg-destructive/90 backdrop-blur-sm hover:bg-destructive",onClick:Se,children:[n.jsx(Co,{className:"h-4 w-4 mr-1"}),"Encerrar"]}),a&&n.jsx(K,{variant:"ghost",size:"icon",className:"bg-surface/80 backdrop-blur-sm hover:bg-surface",onClick:()=>a(t),children:n.jsx(ss,{className:"h-5 w-5"})})]}),n.jsx(K,{variant:"ghost",size:"icon",className:"bg-surface/80 backdrop-blur-sm hover:bg-surface",onClick:ue,children:n.jsx(Is,{className:"h-5 w-5"})})]}),u.is_live&&_e&&n.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-destructive/90 backdrop-blur-sm px-3 py-1 rounded-full",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"h-2 w-2 bg-white rounded-full animate-pulse"}),n.jsx("span",{className:"text-sm font-medium text-white",children:"AO VIVO"})]})})]}),n.jsxs("div",{className:"px-4 py-6 max-w-md mx-auto",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:u.title}),n.jsxs("div",{className:`flex items-center gap-3 mb-4 ${u.is_platform_event?"":"cursor-pointer hover:bg-accent/50 -mx-2 px-2 py-2 rounded-lg transition-colors"}`,onClick:()=>{var $e;!u.is_platform_event&&(($e=u.organizer)!=null&&$e.username)&&C(`/${u.organizer.username}`)},children:[n.jsx(Ut,{className:"h-10 w-10",children:(Vt=(Ge=u.organizer)==null?void 0:Ge.profile)!=null&&Vt.avatar_url?n.jsx(Kt,{src:u.organizer.profile.avatar_url}):n.jsx($t,{className:"bg-surface",children:(((Ze=(pe=u.organizer)==null?void 0:pe.profile)==null?void 0:Ze.display_name)||((it=u.organizer)==null?void 0:it.page_title)||"O").charAt(0)})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:((ar=(ot=u.organizer)==null?void 0:ot.profile)==null?void 0:ar.display_name)||((Nt=u.organizer)==null?void 0:Nt.page_title)||"Organizador"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Organizador"})]})]}),u.is_platform_event&&U&&!We.claimed&&n.jsxs("div",{className:"mb-4",children:[n.jsxs(K,{onClick:Je,disabled:ne,variant:"outline",className:"w-full",children:[n.jsx(Ej,{className:"h-4 w-4 mr-2"}),ne?"Enviando...":"Solicitar Associação"]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"Você pode solicitar para vincular este evento ao seu perfil de organizador"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Et,{className:"h-5 w-5 text-primary"}),n.jsx("span",{className:"text-foreground",children:te(u.event_date)})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Rt,{className:"h-5 w-5 text-primary"}),n.jsx("div",{children:n.jsx("p",{className:"text-foreground",children:u.location})})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(er,{className:"h-5 w-5 text-primary"}),n.jsxs("span",{className:"text-foreground",children:[u.unique_attendees_count||0," ",u.is_live?"pessoas no evento":"pessoas interessadas"]})]})]})]}),u.interests&&u.interests.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"font-semibold text-foreground mb-3",children:"Meus Interesses"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:u.interests.map($e=>n.jsx(ct,{variant:"default",className:"bg-primary/10 text-primary border-primary/20 hover:bg-primary/20",children:$e},$e))})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"Sobre o evento"}),n.jsx("p",{className:"text-muted-foreground leading-relaxed",children:u.description||"Sem descrição disponível"})]}),((At=(Sr=u.organizer)==null?void 0:Sr.profile)==null?void 0:At.notes)&&n.jsxs("div",{className:"mb-6 p-4 bg-muted/50 rounded-lg border border-border",children:[n.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"Notas do Organizador"}),n.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed",children:u.organizer.profile.notes})]}),n.jsxs("div",{className:"space-y-3 mb-6",children:[!H&&u.ticket_link&&n.jsx(K,{variant:"default",className:"w-full bg-green-600 hover:bg-green-700 text-white",size:"lg",onClick:()=>window.open(u.ticket_link,"_blank"),children:"💳 Comprar Ingresso"}),!H&&u.has_platform_tickets&&u.ticket_types&&u.ticket_types.length>0&&n.jsxs(K,{variant:"default",className:"w-full bg-green-600 hover:bg-green-700 text-white",size:"lg",onClick:()=>{X(()=>{J(!0),N("InitiateCheckout",{event_name:u==null?void 0:u.title,event_id:t,value:Math.min(...u.ticket_types.map($e=>$e.price)),currency:"BRL"})},"comprar ingressos")},children:["💳 Comprar Ingresso - A partir de R$ ",Math.min(...u.ticket_types.map($e=>$e.price)).toFixed(2)]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(K,{variant:E?"outline":"glow",className:"flex-1",size:"lg",onClick:H&&c?c:E?be:Te,disabled:L||k,children:H?"Ver Presenças Confirmadas":E?"Cancelar Presença":L?"Confirmando...":"Confirmar Presença"}),u.location_link&&n.jsx(K,{variant:"outline",size:"lg",onClick:()=>window.open(u.location_link,"_blank"),children:ee?n.jsxs(n.Fragment,{children:[n.jsx(H8,{className:"h-4 w-4"}),"Entrar"]}):n.jsxs(n.Fragment,{children:[n.jsx(Rt,{className:"h-4 w-4"}),"Mapa"]})})]}),u.requires_registration&&n.jsxs(K,{variant:"secondary",className:"w-full",size:"lg",onClick:H&&o?o:r,children:[n.jsx(er,{className:"h-4 w-4 mr-2"}),H?"Ver Cadastros no Evento":"Fazer Cadastro no Evento"]}),u.is_live&&!H&&j==="user"&&n.jsxs(K,{variant:"live",className:"w-full",size:"lg",onClick:Me,children:[n.jsx(er,{className:"h-4 w-4 mr-2"}),"Encontrar Amigos no Evento"]}),u.is_live&&H&&n.jsxs(K,{variant:"destructive",className:"w-full",size:"lg",onClick:Se,children:[n.jsx(Co,{className:"h-4 w-4 mr-2"}),"Encerrar Evento"]})]}),n.jsx("div",{className:"flex items-center justify-between py-4 border-t border-border",children:n.jsxs("div",{className:"flex items-center gap-6",children:[n.jsxs("button",{className:"flex items-center gap-2 transition-smooth hover:scale-110",onClick:ge,children:[n.jsx(Ja,{className:`h-5 w-5 ${u.is_liked?"text-destructive fill-current":"text-muted-foreground"}`}),n.jsx("span",{className:"text-sm text-muted-foreground",children:u.likes_count||0})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ls,{className:"h-5 w-5 text-muted-foreground"}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:[u.comments_count||0," comentários"]})]})]})}),n.jsxs("div",{className:"space-y-4 pb-6",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:"Comentários"}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(Ut,{className:"h-8 w-8",children:n.jsx($t,{className:"bg-surface text-xs",children:"U"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx(kn,{placeholder:"Adicione um comentário...",className:"min-h-[80px] resize-none",value:T,onChange:$e=>S($e.target.value)}),n.jsx(K,{variant:"glow",size:"sm",className:"mt-2",onClick:ce,disabled:!T.trim(),children:"Comentar"})]})]}),n.jsxs("div",{className:"space-y-4",children:[p.map($e=>{var Ae,st,dt;return n.jsxs("div",{className:"flex gap-3",children:[n.jsx(Ut,{className:"h-8 w-8",children:(Ae=$e.user)!=null&&Ae.avatar_url?n.jsx(Kt,{src:$e.user.avatar_url}):n.jsx($t,{className:"bg-surface text-xs",children:(((st=$e.user)==null?void 0:st.display_name)||"U").charAt(0)})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium text-foreground text-sm",children:((dt=$e.user)==null?void 0:dt.display_name)||"Usuário"}),n.jsx("span",{className:"text-xs text-muted-foreground",children:se($e.created_at)})]}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:$e.content})]})]},$e.id)}),p.length===0&&n.jsx("p",{className:"text-center text-muted-foreground py-4",children:"Seja o primeiro a comentar!"})]})]})]}),n.jsx(Wu,{open:M,onOpenChange:P,actionDescription:F}),(u==null?void 0:u.has_platform_tickets)&&u.ticket_types&&he&&n.jsx(XB,{open:ae,onOpenChange:J,ticketTypes:u.ticket_types,ticketSettings:he,eventId:t,eventTitle:u.title})]})}function YB({open:e,onOpenChange:t,recipientId:r,recipientName:s,recipientAvatar:a}){const[o,c]=v.useState([]),[u,f]=v.useState(""),[p,x]=v.useState(!1),[w,b]=v.useState(!1),{user:j}=bt(),N=v.useRef(null);v.useEffect(()=>{if(!e||!j)return;(async()=>{x(!0);try{const{data:_,error:k}=await $.from("user_messages").select("*").or(`and(from_user_id.eq.${j.id},to_user_id.eq.${r}),and(from_user_id.eq.${r},to_user_id.eq.${j.id})`).order("created_at",{ascending:!0});if(k)throw k;c(_||[]),await $.from("user_messages").update({read:!0}).eq("to_user_id",j.id).eq("from_user_id",r).eq("read",!1)}catch(_){console.error("Error loading messages:",_),G.error("Erro ao carregar mensagens")}finally{x(!1)}})();const E=$.channel(`chat-messages-${j.id}-${r}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"user_messages"},_=>{const k=_.new;(k.from_user_id===j.id&&k.to_user_id===r||k.from_user_id===r&&k.to_user_id===j.id)&&(console.log("Nova mensagem recebida:",k),c(D=>D.some(L=>L.id===k.id)?D:[...D,k]),k.from_user_id===r&&k.to_user_id===j.id&&$.from("user_messages").update({read:!0}).eq("id",k.id))}).subscribe(_=>{console.log("Status da inscrição do chat:",_)});return()=>{console.log("Removendo canal do chat"),$.removeChannel(E)}},[e,j,r]),v.useEffect(()=>{N.current&&(N.current.scrollTop=N.current.scrollHeight)},[o]);const C=async()=>{if(!(!u.trim()||!j)){b(!0);try{const{data:S,error:E}=await $.from("user_messages").insert({from_user_id:j.id,to_user_id:r,content:u.trim()}).select("*").single();if(E)throw E;S&&c(_=>_.some(k=>k.id===S.id)?_:[..._,S]),f("")}catch(S){console.error("Error sending message:",S),G.error("Erro ao enviar mensagem")}finally{b(!1)}}},T=S=>{S.key==="Enter"&&!S.shiftKey&&(S.preventDefault(),C())};return n.jsx(zt,{open:e,onOpenChange:t,children:n.jsxs(Ft,{className:"sm:max-w-md h-[600px] flex flex-col p-0",children:[n.jsx(xr,{className:"px-6 py-4 border-b",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs(Ut,{className:"h-10 w-10",children:[n.jsx(Kt,{src:a,alt:s}),n.jsx($t,{children:s.charAt(0)})]}),n.jsx(vr,{children:s})]})}),n.jsx(Jo,{className:"flex-1 px-6 py-4",ref:N,children:p?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Carregando mensagens..."}):o.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Nenhuma mensagem ainda. Seja o primeiro a enviar!"}):n.jsx("div",{className:"space-y-4",children:o.map(S=>{const E=S.from_user_id===(j==null?void 0:j.id);let _=!1,k=null;try{const D=JSON.parse(S.content);D.type==="story_reply"&&(_=!0,k=D)}catch{}return n.jsx("div",{className:`flex ${E?"justify-end":"justify-start"}`,children:n.jsx("div",{className:`max-w-[70%] rounded-lg overflow-hidden ${E?"bg-primary text-primary-foreground":"bg-muted"}`,children:_&&k?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"px-3 py-2 text-xs opacity-70 border-b border-border/50",children:"Respondeu seu story"}),n.jsx("div",{className:"p-2",children:n.jsx("img",{src:k.story_image,alt:"Story",className:"w-full h-32 object-cover rounded"})}),n.jsxs("div",{className:"px-4 py-2",children:[n.jsx("p",{className:"text-sm",children:k.reply}),n.jsx("p",{className:"text-xs opacity-70 mt-1",children:xu(new Date(S.created_at),{addSuffix:!0,locale:Ir})})]})]}):n.jsxs("div",{className:"px-4 py-2",children:[n.jsx("p",{className:"text-sm",children:S.content}),n.jsx("p",{className:"text-xs opacity-70 mt-1",children:xu(new Date(S.created_at),{addSuffix:!0,locale:Ir})})]})})},S.id)})})}),n.jsx("div",{className:"px-6 py-4 border-t",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx(we,{value:u,onChange:S=>f(S.target.value),onKeyPress:T,placeholder:"Digite sua mensagem...",disabled:w}),n.jsx(K,{onClick:C,disabled:!u.trim()||w,size:"icon",children:n.jsx(k1,{className:"h-4 w-4"})})]})})]})})}function QB(e){const[t,r]=v.useState("none"),[s,a]=v.useState(!0),{user:o}=bt();v.useEffect(()=>{if(!o||!e){a(!1);return}c()},[o,e]);const c=async()=>{if(!(!o||!e))try{const{data:p,error:x}=await $.from("friendships").select("status").or(`and(user_id.eq.${o.id},friend_id.eq.${e}),and(user_id.eq.${e},friend_id.eq.${o.id})`).maybeSingle();x&&x.code!=="PGRST116"&&console.error("Error checking friendship status:",x),r((p==null?void 0:p.status)||"none")}catch(p){console.error("Error:",p)}finally{a(!1)}};return{friendshipStatus:t,loading:s,addFriend:async()=>{if(!o)return G.error("Faça login para adicionar amigos"),!1;if(!e)return G.error("ID do usuário não encontrado"),!1;a(!0);try{const{error:p}=await $.from("friendships").insert({user_id:o.id,friend_id:e,status:"pending"});if(p)throw p;return r("pending"),G.success("Solicitação de amizade enviada!"),!0}catch(p){return console.error("Error adding friend:",p),G.error("Erro ao adicionar amigo"),!1}finally{a(!1)}},removeFriend:async()=>{if(!o||!e)return!1;a(!0);try{const{error:p}=await $.from("friendships").delete().or(`and(user_id.eq.${o.id},friend_id.eq.${e}),and(user_id.eq.${e},friend_id.eq.${o.id})`);if(p)throw p;return r("none"),G.success("Amigo removido"),!0}catch(p){return console.error("Error removing friend:",p),G.error("Erro ao remover amigo"),!1}finally{a(!1)}}}}var c0=["Enter"," "],ZB=["ArrowDown","PageUp","Home"],$S=["ArrowUp","PageDown","End"],JB=[...ZB,...$S],ez={ltr:[...c0,"ArrowRight"],rtl:[...c0,"ArrowLeft"]},tz={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Hu="Menu",[wu,rz,nz]=ku(Hu),[gl,VS]=Mr(Hu,[nz,ao,Yc]),Qm=ao(),qS=Yc(),[sz,xl]=gl(Hu),[az,Gu]=gl(Hu),WS=e=>{const{__scopeMenu:t,open:r=!1,children:s,dir:a,onOpenChange:o,modal:c=!0}=e,u=Qm(t),[f,p]=v.useState(null),x=v.useRef(!1),w=Er(o),b=pl(a);return v.useEffect(()=>{const j=()=>{x.current=!0,document.addEventListener("pointerdown",N,{capture:!0,once:!0}),document.addEventListener("pointermove",N,{capture:!0,once:!0})},N=()=>x.current=!1;return document.addEventListener("keydown",j,{capture:!0}),()=>{document.removeEventListener("keydown",j,{capture:!0}),document.removeEventListener("pointerdown",N,{capture:!0}),document.removeEventListener("pointermove",N,{capture:!0})}},[]),n.jsx(z1,{...u,children:n.jsx(sz,{scope:t,open:r,onOpenChange:w,content:f,onContentChange:p,children:n.jsx(az,{scope:t,onClose:v.useCallback(()=>w(!1),[w]),isUsingKeyboardRef:x,dir:b,modal:c,children:s})})})};WS.displayName=Hu;var iz="MenuAnchor",gv=v.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e,a=Qm(r);return n.jsx(Mu,{...a,...s,ref:t})});gv.displayName=iz;var xv="MenuPortal",[oz,HS]=gl(xv,{forceMount:void 0}),GS=e=>{const{__scopeMenu:t,forceMount:r,children:s,container:a}=e,o=xl(xv,t);return n.jsx(oz,{scope:t,forceMount:r,children:n.jsx(Hr,{present:r||o.open,children:n.jsx(zc,{asChild:!0,container:a,children:s})})})};GS.displayName=xv;var Ps="MenuContent",[lz,vv]=gl(Ps),XS=v.forwardRef((e,t)=>{const r=HS(Ps,e.__scopeMenu),{forceMount:s=r.forceMount,...a}=e,o=xl(Ps,e.__scopeMenu),c=Gu(Ps,e.__scopeMenu);return n.jsx(wu.Provider,{scope:e.__scopeMenu,children:n.jsx(Hr,{present:s||o.open,children:n.jsx(wu.Slot,{scope:e.__scopeMenu,children:c.modal?n.jsx(cz,{...a,ref:t}):n.jsx(dz,{...a,ref:t})})})})}),cz=v.forwardRef((e,t)=>{const r=xl(Ps,e.__scopeMenu),s=v.useRef(null),a=tt(t,s);return v.useEffect(()=>{const o=s.current;if(o)return $m(o)},[]),n.jsx(wv,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:Re(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),dz=v.forwardRef((e,t)=>{const r=xl(Ps,e.__scopeMenu);return n.jsx(wv,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),uz=Wi("MenuContent.ScrollLock"),wv=v.forwardRef((e,t)=>{const{__scopeMenu:r,loop:s=!1,trapFocus:a,onOpenAutoFocus:o,onCloseAutoFocus:c,disableOutsidePointerEvents:u,onEntryFocus:f,onEscapeKeyDown:p,onPointerDownOutside:x,onFocusOutside:w,onInteractOutside:b,onDismiss:j,disableOutsideScroll:N,...C}=e,T=xl(Ps,r),S=Gu(Ps,r),E=Qm(r),_=qS(r),k=rz(r),[D,L]=v.useState(null),R=v.useRef(null),M=tt(t,R,T.onContentChange),P=v.useRef(0),F=v.useRef(""),Y=v.useRef(0),U=v.useRef(null),q=v.useRef("right"),re=v.useRef(0),W=N?Uu:v.Fragment,ne=N?{as:uz,allowPinchZoom:!0}:void 0,oe=J=>{var ce,ge;const he=F.current+J,ye=k().filter(Te=>!Te.disabled),H=document.activeElement,ee=(ce=ye.find(Te=>Te.ref.current===H))==null?void 0:ce.textValue,X=ye.map(Te=>Te.textValue),te=Nz(X,he,ee),se=(ge=ye.find(Te=>Te.textValue===te))==null?void 0:ge.ref.current;(function Te(be){F.current=be,window.clearTimeout(P.current),be!==""&&(P.current=window.setTimeout(()=>Te(""),1e3))})(he),se&&setTimeout(()=>se.focus())};v.useEffect(()=>()=>window.clearTimeout(P.current),[]),zm();const ae=v.useCallback(J=>{var ye,H;return q.current===((ye=U.current)==null?void 0:ye.side)&&Cz(J,(H=U.current)==null?void 0:H.area)},[]);return n.jsx(lz,{scope:r,searchRef:F,onItemEnter:v.useCallback(J=>{ae(J)&&J.preventDefault()},[ae]),onItemLeave:v.useCallback(J=>{var he;ae(J)||((he=R.current)==null||he.focus(),L(null))},[ae]),onTriggerLeave:v.useCallback(J=>{ae(J)&&J.preventDefault()},[ae]),pointerGraceTimerRef:Y,onPointerGraceIntentChange:v.useCallback(J=>{U.current=J},[]),children:n.jsx(W,{...ne,children:n.jsx(zu,{asChild:!0,trapped:a,onMountAutoFocus:Re(o,J=>{var he;J.preventDefault(),(he=R.current)==null||he.focus({preventScroll:!0})}),onUnmountAutoFocus:c,children:n.jsx(ul,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:p,onPointerDownOutside:x,onFocusOutside:w,onInteractOutside:b,onDismiss:j,children:n.jsx(fv,{asChild:!0,..._,dir:S.dir,orientation:"vertical",loop:s,currentTabStopId:D,onCurrentTabStopIdChange:L,onEntryFocus:Re(f,J=>{S.isUsingKeyboardRef.current||J.preventDefault()}),preventScrollOnEntryFocus:!0,children:n.jsx(Cm,{role:"menu","aria-orientation":"vertical","data-state":d4(T.open),"data-radix-menu-content":"",dir:S.dir,...E,...C,ref:M,style:{outline:"none",...C.style},onKeyDown:Re(C.onKeyDown,J=>{const ye=J.target.closest("[data-radix-menu-content]")===J.currentTarget,H=J.ctrlKey||J.altKey||J.metaKey,ee=J.key.length===1;ye&&(J.key==="Tab"&&J.preventDefault(),!H&&ee&&oe(J.key));const X=R.current;if(J.target!==X||!JB.includes(J.key))return;J.preventDefault();const se=k().filter(ce=>!ce.disabled).map(ce=>ce.ref.current);$S.includes(J.key)&&se.reverse(),bz(se)}),onBlur:Re(e.onBlur,J=>{J.currentTarget.contains(J.target)||(window.clearTimeout(P.current),F.current="")}),onPointerMove:Re(e.onPointerMove,yu(J=>{const he=J.target,ye=re.current!==J.clientX;if(J.currentTarget.contains(he)&&ye){const H=J.clientX>re.current?"right":"left";q.current=H,re.current=J.clientX}}))})})})})})})});XS.displayName=Ps;var hz="MenuGroup",yv=v.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e;return n.jsx(Ve.div,{role:"group",...s,ref:t})});yv.displayName=hz;var fz="MenuLabel",KS=v.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e;return n.jsx(Ve.div,{...s,ref:t})});KS.displayName=fz;var Xf="MenuItem",qb="menu.itemSelect",Zm=v.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:s,...a}=e,o=v.useRef(null),c=Gu(Xf,e.__scopeMenu),u=vv(Xf,e.__scopeMenu),f=tt(t,o),p=v.useRef(!1),x=()=>{const w=o.current;if(!r&&w){const b=new CustomEvent(qb,{bubbles:!0,cancelable:!0});w.addEventListener(qb,j=>s==null?void 0:s(j),{once:!0}),b1(w,b),b.defaultPrevented?p.current=!1:c.onClose()}};return n.jsx(YS,{...a,ref:f,disabled:r,onClick:Re(e.onClick,x),onPointerDown:w=>{var b;(b=e.onPointerDown)==null||b.call(e,w),p.current=!0},onPointerUp:Re(e.onPointerUp,w=>{var b;p.current||(b=w.currentTarget)==null||b.click()}),onKeyDown:Re(e.onKeyDown,w=>{const b=u.searchRef.current!=="";r||b&&w.key===" "||c0.includes(w.key)&&(w.currentTarget.click(),w.preventDefault())})})});Zm.displayName=Xf;var YS=v.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:s=!1,textValue:a,...o}=e,c=vv(Xf,r),u=qS(r),f=v.useRef(null),p=tt(t,f),[x,w]=v.useState(!1),[b,j]=v.useState("");return v.useEffect(()=>{const N=f.current;N&&j((N.textContent??"").trim())},[o.children]),n.jsx(wu.ItemSlot,{scope:r,disabled:s,textValue:a??b,children:n.jsx(mv,{asChild:!0,...u,focusable:!s,children:n.jsx(Ve.div,{role:"menuitem","data-highlighted":x?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...o,ref:p,onPointerMove:Re(e.onPointerMove,yu(N=>{s?c.onItemLeave(N):(c.onItemEnter(N),N.defaultPrevented||N.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Re(e.onPointerLeave,yu(N=>c.onItemLeave(N))),onFocus:Re(e.onFocus,()=>w(!0)),onBlur:Re(e.onBlur,()=>w(!1))})})})}),mz="MenuCheckboxItem",QS=v.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:s,...a}=e;return n.jsx(r4,{scope:e.__scopeMenu,checked:r,children:n.jsx(Zm,{role:"menuitemcheckbox","aria-checked":Kf(r)?"mixed":r,...a,ref:t,"data-state":_v(r),onSelect:Re(a.onSelect,()=>s==null?void 0:s(Kf(r)?!0:!r),{checkForDefaultPrevented:!1})})})});QS.displayName=mz;var ZS="MenuRadioGroup",[pz,gz]=gl(ZS,{value:void 0,onValueChange:()=>{}}),JS=v.forwardRef((e,t)=>{const{value:r,onValueChange:s,...a}=e,o=Er(s);return n.jsx(pz,{scope:e.__scopeMenu,value:r,onValueChange:o,children:n.jsx(yv,{...a,ref:t})})});JS.displayName=ZS;var e4="MenuRadioItem",t4=v.forwardRef((e,t)=>{const{value:r,...s}=e,a=gz(e4,e.__scopeMenu),o=r===a.value;return n.jsx(r4,{scope:e.__scopeMenu,checked:o,children:n.jsx(Zm,{role:"menuitemradio","aria-checked":o,...s,ref:t,"data-state":_v(o),onSelect:Re(s.onSelect,()=>{var c;return(c=a.onValueChange)==null?void 0:c.call(a,r)},{checkForDefaultPrevented:!1})})})});t4.displayName=e4;var bv="MenuItemIndicator",[r4,xz]=gl(bv,{checked:!1}),n4=v.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:s,...a}=e,o=xz(bv,r);return n.jsx(Hr,{present:s||Kf(o.checked)||o.checked===!0,children:n.jsx(Ve.span,{...a,ref:t,"data-state":_v(o.checked)})})});n4.displayName=bv;var vz="MenuSeparator",s4=v.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e;return n.jsx(Ve.div,{role:"separator","aria-orientation":"horizontal",...s,ref:t})});s4.displayName=vz;var wz="MenuArrow",a4=v.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e,a=Qm(r);return n.jsx(Em,{...a,...s,ref:t})});a4.displayName=wz;var yz="MenuSub",[eH,i4]=gl(yz),Cd="MenuSubTrigger",o4=v.forwardRef((e,t)=>{const r=xl(Cd,e.__scopeMenu),s=Gu(Cd,e.__scopeMenu),a=i4(Cd,e.__scopeMenu),o=vv(Cd,e.__scopeMenu),c=v.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:f}=o,p={__scopeMenu:e.__scopeMenu},x=v.useCallback(()=>{c.current&&window.clearTimeout(c.current),c.current=null},[]);return v.useEffect(()=>x,[x]),v.useEffect(()=>{const w=u.current;return()=>{window.clearTimeout(w),f(null)}},[u,f]),n.jsx(gv,{asChild:!0,...p,children:n.jsx(YS,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":d4(r.open),...e,ref:Za(t,a.onTriggerChange),onClick:w=>{var b;(b=e.onClick)==null||b.call(e,w),!(e.disabled||w.defaultPrevented)&&(w.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:Re(e.onPointerMove,yu(w=>{o.onItemEnter(w),!w.defaultPrevented&&!e.disabled&&!r.open&&!c.current&&(o.onPointerGraceIntentChange(null),c.current=window.setTimeout(()=>{r.onOpenChange(!0),x()},100))})),onPointerLeave:Re(e.onPointerLeave,yu(w=>{var j,N;x();const b=(j=r.content)==null?void 0:j.getBoundingClientRect();if(b){const C=(N=r.content)==null?void 0:N.dataset.side,T=C==="right",S=T?-5:5,E=b[T?"left":"right"],_=b[T?"right":"left"];o.onPointerGraceIntentChange({area:[{x:w.clientX+S,y:w.clientY},{x:E,y:b.top},{x:_,y:b.top},{x:_,y:b.bottom},{x:E,y:b.bottom}],side:C}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(w),w.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:Re(e.onKeyDown,w=>{var j;const b=o.searchRef.current!=="";e.disabled||b&&w.key===" "||ez[s.dir].includes(w.key)&&(r.onOpenChange(!0),(j=r.content)==null||j.focus(),w.preventDefault())})})})});o4.displayName=Cd;var l4="MenuSubContent",c4=v.forwardRef((e,t)=>{const r=HS(Ps,e.__scopeMenu),{forceMount:s=r.forceMount,...a}=e,o=xl(Ps,e.__scopeMenu),c=Gu(Ps,e.__scopeMenu),u=i4(l4,e.__scopeMenu),f=v.useRef(null),p=tt(t,f);return n.jsx(wu.Provider,{scope:e.__scopeMenu,children:n.jsx(Hr,{present:s||o.open,children:n.jsx(wu.Slot,{scope:e.__scopeMenu,children:n.jsx(wv,{id:u.contentId,"aria-labelledby":u.triggerId,...a,ref:p,align:"start",side:c.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:x=>{var w;c.isUsingKeyboardRef.current&&((w=f.current)==null||w.focus()),x.preventDefault()},onCloseAutoFocus:x=>x.preventDefault(),onFocusOutside:Re(e.onFocusOutside,x=>{x.target!==u.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:Re(e.onEscapeKeyDown,x=>{c.onClose(),x.preventDefault()}),onKeyDown:Re(e.onKeyDown,x=>{var j;const w=x.currentTarget.contains(x.target),b=tz[c.dir].includes(x.key);w&&b&&(o.onOpenChange(!1),(j=u.trigger)==null||j.focus(),x.preventDefault())})})})})})});c4.displayName=l4;function d4(e){return e?"open":"closed"}function Kf(e){return e==="indeterminate"}function _v(e){return Kf(e)?"indeterminate":e?"checked":"unchecked"}function bz(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function _z(e,t){return e.map((r,s)=>e[(t+s)%e.length])}function Nz(e,t,r){const a=t.length>1&&Array.from(t).every(p=>p===t[0])?t[0]:t,o=r?e.indexOf(r):-1;let c=_z(e,Math.max(o,0));a.length===1&&(c=c.filter(p=>p!==r));const f=c.find(p=>p.toLowerCase().startsWith(a.toLowerCase()));return f!==r?f:void 0}function jz(e,t){const{x:r,y:s}=e;let a=!1;for(let o=0,c=t.length-1;o<t.length;c=o++){const u=t[o],f=t[c],p=u.x,x=u.y,w=f.x,b=f.y;x>s!=b>s&&r<(w-p)*(s-x)/(b-x)+p&&(a=!a)}return a}function Cz(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return jz(r,t)}function yu(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Ez=WS,Sz=gv,Az=GS,kz=XS,Tz=yv,Iz=KS,Rz=Zm,Pz=QS,Oz=JS,Dz=t4,Mz=n4,Lz=s4,Fz=a4,Bz=o4,zz=c4,Jm="DropdownMenu",[Uz]=Mr(Jm,[VS]),Rn=VS(),[$z,u4]=Uz(Jm),h4=e=>{const{__scopeDropdownMenu:t,children:r,dir:s,open:a,defaultOpen:o,onOpenChange:c,modal:u=!0}=e,f=Rn(t),p=v.useRef(null),[x,w]=Ms({prop:a,defaultProp:o??!1,onChange:c,caller:Jm});return n.jsx($z,{scope:t,triggerId:hn(),triggerRef:p,contentId:hn(),open:x,onOpenChange:w,onOpenToggle:v.useCallback(()=>w(b=>!b),[w]),modal:u,children:n.jsx(Ez,{...f,open:x,onOpenChange:w,dir:s,modal:u,children:r})})};h4.displayName=Jm;var f4="DropdownMenuTrigger",m4=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:s=!1,...a}=e,o=u4(f4,r),c=Rn(r);return n.jsx(Sz,{asChild:!0,...c,children:n.jsx(Ve.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...a,ref:Za(t,o.triggerRef),onPointerDown:Re(e.onPointerDown,u=>{!s&&u.button===0&&u.ctrlKey===!1&&(o.onOpenToggle(),o.open||u.preventDefault())}),onKeyDown:Re(e.onKeyDown,u=>{s||(["Enter"," "].includes(u.key)&&o.onOpenToggle(),u.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})})});m4.displayName=f4;var Vz="DropdownMenuPortal",p4=e=>{const{__scopeDropdownMenu:t,...r}=e,s=Rn(t);return n.jsx(Az,{...s,...r})};p4.displayName=Vz;var g4="DropdownMenuContent",x4=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=u4(g4,r),o=Rn(r),c=v.useRef(!1);return n.jsx(kz,{id:a.contentId,"aria-labelledby":a.triggerId,...o,...s,ref:t,onCloseAutoFocus:Re(e.onCloseAutoFocus,u=>{var f;c.current||(f=a.triggerRef.current)==null||f.focus(),c.current=!1,u.preventDefault()}),onInteractOutside:Re(e.onInteractOutside,u=>{const f=u.detail.originalEvent,p=f.button===0&&f.ctrlKey===!0,x=f.button===2||p;(!a.modal||x)&&(c.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});x4.displayName=g4;var qz="DropdownMenuGroup",Wz=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=Rn(r);return n.jsx(Tz,{...a,...s,ref:t})});Wz.displayName=qz;var Hz="DropdownMenuLabel",v4=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=Rn(r);return n.jsx(Iz,{...a,...s,ref:t})});v4.displayName=Hz;var Gz="DropdownMenuItem",w4=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=Rn(r);return n.jsx(Rz,{...a,...s,ref:t})});w4.displayName=Gz;var Xz="DropdownMenuCheckboxItem",y4=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=Rn(r);return n.jsx(Pz,{...a,...s,ref:t})});y4.displayName=Xz;var Kz="DropdownMenuRadioGroup",Yz=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=Rn(r);return n.jsx(Oz,{...a,...s,ref:t})});Yz.displayName=Kz;var Qz="DropdownMenuRadioItem",b4=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=Rn(r);return n.jsx(Dz,{...a,...s,ref:t})});b4.displayName=Qz;var Zz="DropdownMenuItemIndicator",_4=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=Rn(r);return n.jsx(Mz,{...a,...s,ref:t})});_4.displayName=Zz;var Jz="DropdownMenuSeparator",N4=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=Rn(r);return n.jsx(Lz,{...a,...s,ref:t})});N4.displayName=Jz;var eU="DropdownMenuArrow",tU=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=Rn(r);return n.jsx(Fz,{...a,...s,ref:t})});tU.displayName=eU;var rU="DropdownMenuSubTrigger",j4=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=Rn(r);return n.jsx(Bz,{...a,...s,ref:t})});j4.displayName=rU;var nU="DropdownMenuSubContent",C4=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=Rn(r);return n.jsx(zz,{...a,...s,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});C4.displayName=nU;var sU=h4,aU=m4,iU=p4,E4=x4,S4=v4,A4=w4,k4=y4,T4=b4,I4=_4,R4=N4,P4=j4,O4=C4;const of=sU,lf=aU,oU=v.forwardRef(({className:e,inset:t,children:r,...s},a)=>n.jsxs(P4,{ref:a,className:Fe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",e),...s,children:[r,n.jsx(Ru,{className:"ml-auto h-4 w-4"})]}));oU.displayName=P4.displayName;const lU=v.forwardRef(({className:e,...t},r)=>n.jsx(O4,{ref:r,className:Fe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));lU.displayName=O4.displayName;const zd=v.forwardRef(({className:e,sideOffset:t=4,...r},s)=>n.jsx(iU,{children:n.jsx(E4,{ref:s,sideOffset:t,className:Fe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));zd.displayName=E4.displayName;const zn=v.forwardRef(({className:e,inset:t,...r},s)=>n.jsx(A4,{ref:s,className:Fe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",e),...r}));zn.displayName=A4.displayName;const cU=v.forwardRef(({className:e,children:t,checked:r,...s},a)=>n.jsxs(k4,{ref:a,className:Fe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),checked:r,...s,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(I4,{children:n.jsx(Yn,{className:"h-4 w-4"})})}),t]}));cU.displayName=k4.displayName;const dU=v.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(T4,{ref:s,className:Fe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(I4,{children:n.jsx(jj,{className:"h-2 w-2 fill-current"})})}),t]}));dU.displayName=T4.displayName;const uU=v.forwardRef(({className:e,inset:t,...r},s)=>n.jsx(S4,{ref:s,className:Fe("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));uU.displayName=S4.displayName;const hU=v.forwardRef(({className:e,...t},r)=>n.jsx(R4,{ref:r,className:Fe("-mx-1 my-1 h-px bg-muted",e),...t}));hU.displayName=R4.displayName;var D4="AlertDialog",[fU]=Mr(D4,[FE]),ni=FE(),M4=e=>{const{__scopeAlertDialog:t,...r}=e,s=ni(t);return n.jsx(rv,{...s,...r,modal:!0})};M4.displayName=D4;var mU="AlertDialogTrigger",L4=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=ni(r);return n.jsx(eS,{...a,...s,ref:t})});L4.displayName=mU;var pU="AlertDialogPortal",F4=e=>{const{__scopeAlertDialog:t,...r}=e,s=ni(t);return n.jsx(nv,{...s,...r})};F4.displayName=pU;var gU="AlertDialogOverlay",B4=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=ni(r);return n.jsx(qm,{...a,...s,ref:t})});B4.displayName=gU;var uc="AlertDialogContent",[xU,vU]=fU(uc),wU=QN("AlertDialogContent"),z4=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:s,...a}=e,o=ni(r),c=v.useRef(null),u=tt(t,c),f=v.useRef(null);return n.jsx(iB,{contentName:uc,titleName:U4,docsSlug:"alert-dialog",children:n.jsx(xU,{scope:r,cancelRef:f,children:n.jsxs(Wm,{role:"alertdialog",...o,...a,ref:u,onOpenAutoFocus:Re(a.onOpenAutoFocus,p=>{var x;p.preventDefault(),(x=f.current)==null||x.focus({preventScroll:!0})}),onPointerDownOutside:p=>p.preventDefault(),onInteractOutside:p=>p.preventDefault(),children:[n.jsx(wU,{children:s}),n.jsx(bU,{contentRef:c})]})})})});z4.displayName=uc;var U4="AlertDialogTitle",$4=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=ni(r);return n.jsx(sv,{...a,...s,ref:t})});$4.displayName=U4;var V4="AlertDialogDescription",q4=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=ni(r);return n.jsx(av,{...a,...s,ref:t})});q4.displayName=V4;var yU="AlertDialogAction",W4=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=ni(r);return n.jsx(iv,{...a,...s,ref:t})});W4.displayName=yU;var H4="AlertDialogCancel",G4=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,{cancelRef:a}=vU(H4,r),o=ni(r),c=tt(t,a);return n.jsx(iv,{...o,...s,ref:c})});G4.displayName=H4;var bU=({contentRef:e})=>{const t=`\`${uc}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${uc}\` by passing a \`${V4}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${uc}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return v.useEffect(()=>{var s;document.getElementById((s=e.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},_U=M4,NU=L4,jU=F4,X4=B4,K4=z4,Y4=W4,Q4=G4,Z4=$4,J4=q4;const el=_U,Yf=NU,CU=jU,e3=v.forwardRef(({className:e,...t},r)=>n.jsx(X4,{className:Fe("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));e3.displayName=X4.displayName;const Qi=v.forwardRef(({className:e,...t},r)=>n.jsxs(CU,{children:[n.jsx(e3,{}),n.jsx(K4,{ref:r,className:Fe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Qi.displayName=K4.displayName;const tl=({className:e,...t})=>n.jsx("div",{className:Fe("flex flex-col space-y-2 text-center sm:text-left",e),...t});tl.displayName="AlertDialogHeader";const Zi=({className:e,...t})=>n.jsx("div",{className:Fe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Zi.displayName="AlertDialogFooter";const rl=v.forwardRef(({className:e,...t},r)=>n.jsx(Z4,{ref:r,className:Fe("text-lg font-semibold",e),...t}));rl.displayName=Z4.displayName;const nl=v.forwardRef(({className:e,...t},r)=>n.jsx(J4,{ref:r,className:Fe("text-sm text-muted-foreground",e),...t}));nl.displayName=J4.displayName;const Ji=v.forwardRef(({className:e,...t},r)=>n.jsx(Y4,{ref:r,className:Fe(Q1(),e),...t}));Ji.displayName=Y4.displayName;const eo=v.forwardRef(({className:e,...t},r)=>n.jsx(Q4,{ref:r,className:Fe(Q1({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));eo.displayName=Q4.displayName;function EU({stories:e,initialIndex:t,open:r,onOpenChange:s,onStoryDeleted:a}){const[o,c]=v.useState(t),[u,f]=v.useState(!1),[p,x]=v.useState(0),[w,b]=v.useState([]),[j,N]=v.useState([]),[C,T]=v.useState(""),[S,E]=v.useState(!1),[_,k]=v.useState(!1),[D,L]=v.useState(!1),[R,M]=v.useState(0),[P,F]=v.useState(0),{user:Y}=bt(),U=e[o],q=(U==null?void 0:U.user_id)===(Y==null?void 0:Y.id);v.useEffect(()=>{if(!U||!Y)return;(async()=>{const{data:X}=await $.from("story_likes").select("user_id").eq("story_id",U.id);if(x((X==null?void 0:X.length)||0),q&&X&&X.length>0){const te=X.map(ce=>ce.user_id),{data:se}=await $.from("profiles").select("user_id, display_name, avatar_url").in("user_id",te);se&&b(se.map(ce=>({user_name:ce.display_name||"Usuário",user_avatar:ce.avatar_url||""})))}else{const{data:te}=await $.from("story_likes").select("*").eq("story_id",U.id).eq("user_id",Y.id).single();f(!!te)}})(),(async()=>{await $.from("story_views").insert({story_id:U.id,viewer_id:Y.id}).select().single()})()},[U,Y,q]),v.useEffect(()=>{if(!U)return;(async()=>{const{data:ee}=await $.from("story_comments").select(`
          id,
          user_id,
          comment,
          created_at
        `).eq("story_id",U.id).order("created_at",{ascending:!0});if(ee){const X=[...new Set(ee.map(ge=>ge.user_id))],{data:te}=await $.from("profiles").select("user_id, display_name, avatar_url").in("user_id",X),se=new Map((te==null?void 0:te.map(ge=>[ge.user_id,ge]))||[]),ce=ee.map(ge=>{var Te,be;return{...ge,user_name:((Te=se.get(ge.user_id))==null?void 0:Te.display_name)||"Usuário",user_avatar:((be=se.get(ge.user_id))==null?void 0:be.avatar_url)||""}});N(ce)}})()},[U]);const re=async()=>{!Y||!U||(u?(await $.from("story_likes").delete().eq("story_id",U.id).eq("user_id",Y.id),f(!1),x(H=>H-1)):(await $.from("story_likes").insert({story_id:U.id,user_id:Y.id}),f(!0),x(H=>H+1)))},W=async()=>{if(!Y||!U||!C.trim())return;const{error:H}=await $.from("story_comments").insert({story_id:U.id,user_id:Y.id,comment:C});if(H){G.error("Erro ao comentar");return}if(U.user_id!==Y.id){const X=JSON.stringify({type:"story_reply",story_image:U.image_url,reply:C});await $.from("user_messages").insert({from_user_id:Y.id,to_user_id:U.user_id,content:X})}T(""),G.success("Comentário enviado!");const{data:ee}=await $.from("story_comments").select(`
        id,
        user_id,
        comment,
        created_at
      `).eq("story_id",U.id).order("created_at",{ascending:!0});if(ee){const X=[...new Set(ee.map(ge=>ge.user_id))],{data:te}=await $.from("profiles").select("user_id, display_name, avatar_url").in("user_id",X),se=new Map((te==null?void 0:te.map(ge=>[ge.user_id,ge]))||[]),ce=ee.map(ge=>{var Te,be;return{...ge,user_name:((Te=se.get(ge.user_id))==null?void 0:Te.display_name)||"Usuário",user_avatar:((be=se.get(ge.user_id))==null?void 0:be.avatar_url)||""}});N(ce)}},ne=()=>{o<e.length-1?(c(o+1),E(!1)):s(!1)},oe=()=>{o>0&&(c(o-1),E(!1))},ae=H=>{M(H.targetTouches[0].clientX)},J=H=>{F(H.targetTouches[0].clientX)},he=()=>{if(!R||!P)return;const H=R-P,ee=H>50,X=H<-50;ee?ne():X&&oe(),M(0),F(0)},ye=async()=>{if(!(!Y||!U))try{const{error:H}=await $.from("stories").delete().eq("id",U.id);if(H)throw H;const ee=U.image_url.split("/").slice(-3).join("/");await $.storage.from("user-uploads").remove([ee]),G.success("Story excluído!"),a==null||a(e.length<=1),k(!1),s(!1)}catch(H){console.error("Error deleting story:",H),G.error("Erro ao excluir story")}};return U?n.jsxs(zt,{open:r,onOpenChange:s,children:[n.jsx(Ft,{className:"max-w-lg p-0 bg-black border-0 h-[90vh]",children:n.jsxs("div",{className:"relative w-full h-full flex flex-col",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 z-10 p-4 bg-gradient-to-b from-black/70 to-transparent",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(Ut,{className:"h-10 w-10 border-2 border-white",children:[n.jsx(Kt,{src:U.user_avatar}),n.jsx($t,{children:U.user_name.charAt(0)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-white font-semibold text-sm",children:U.user_name}),n.jsx("p",{className:"text-white/70 text-xs",children:new Date(U.created_at).toLocaleDateString("pt-BR")})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[U.user_id===(Y==null?void 0:Y.id)&&n.jsxs(of,{children:[n.jsx(lf,{asChild:!0,children:n.jsx(K,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",children:n.jsx(O8,{className:"h-5 w-5"})})}),n.jsx(zd,{align:"end",className:"bg-surface border-border",children:n.jsxs(zn,{onClick:()=>k(!0),className:"text-red-500 focus:text-red-500 cursor-pointer",children:[n.jsx(Kn,{className:"h-4 w-4 mr-2"}),"Excluir story"]})})]}),n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>s(!1),className:"text-white hover:bg-white/20",children:n.jsx(sr,{className:"h-5 w-5"})})]})]})}),n.jsx("div",{className:"flex-1 bg-center bg-cover bg-no-repeat cursor-pointer select-none",style:{backgroundImage:`url(${U.image_url})`},onClick:H=>{const ee=H.currentTarget.getBoundingClientRect();H.clientX-ee.left<ee.width/2?oe():ne()},onTouchStart:ae,onTouchMove:J,onTouchEnd:he}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/70 to-transparent",children:q?n.jsxs("div",{className:"mb-3",children:[n.jsxs(K,{variant:"ghost",size:"sm",onClick:()=>L(!D),className:"text-white hover:bg-white/20 gap-2",children:[n.jsx(Ja,{className:"h-5 w-5"}),n.jsxs("span",{children:[p," ",p===1?"curtida":"curtidas"]})]}),D&&p>0&&n.jsx("div",{className:"mt-2 bg-black/50 rounded-lg p-3 max-h-40",children:n.jsx(Jo,{className:"h-32",children:n.jsx("div",{className:"space-y-2",children:w.map((H,ee)=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(Ut,{className:"h-8 w-8",children:[n.jsx(Kt,{src:H.user_avatar}),n.jsx($t,{children:H.user_name.charAt(0)})]}),n.jsx("span",{className:"text-white text-sm",children:H.user_name})]},ee))})})})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[n.jsxs(K,{variant:"ghost",size:"sm",onClick:re,className:"text-white hover:bg-white/20 gap-2",children:[n.jsx(Ja,{className:`h-5 w-5 ${u?"fill-red-500 text-red-500":""}`}),n.jsx("span",{children:p})]}),n.jsxs(K,{variant:"ghost",size:"sm",onClick:()=>E(!S),className:"text-white hover:bg-white/20 gap-2",children:[n.jsx(Ls,{className:"h-5 w-5"}),n.jsx("span",{children:j.length})]})]}),S&&n.jsx("div",{className:"bg-black/50 rounded-lg p-3 mb-3 max-h-40",children:n.jsx(Jo,{className:"h-32",children:j.length===0?n.jsx("p",{className:"text-white/70 text-sm text-center",children:"Nenhum comentário ainda"}):n.jsx("div",{className:"space-y-2",children:j.map(H=>n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Ut,{className:"h-6 w-6",children:[n.jsx(Kt,{src:H.user_avatar}),n.jsx($t,{children:H.user_name.charAt(0)})]}),n.jsx("div",{children:n.jsxs("p",{className:"text-white text-sm",children:[n.jsx("span",{className:"font-semibold",children:H.user_name})," ",H.comment]})})]},H.id))})})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(we,{placeholder:"Enviar mensagem...",value:C,onChange:H=>T(H.target.value),onKeyPress:H=>H.key==="Enter"&&W(),className:"bg-white/10 border-white/20 text-white placeholder:text-white/50"}),n.jsx(K,{onClick:W,disabled:!C.trim(),className:"bg-primary hover:bg-primary-glow",children:n.jsx(k1,{className:"h-4 w-4"})})]})]})})]})}),n.jsx(el,{open:_,onOpenChange:k,children:n.jsxs(Qi,{className:"bg-surface border-border",children:[n.jsxs(tl,{children:[n.jsx(rl,{children:"Excluir story?"}),n.jsx(nl,{children:"Esta ação não pode ser desfeita. Seu story será excluído permanentemente."})]}),n.jsxs(Zi,{children:[n.jsx(eo,{children:"Cancelar"}),n.jsx(Ji,{onClick:ye,className:"bg-red-500 hover:bg-red-600 text-white",children:"Excluir"})]})]})})]}):null}function Wb({mode:e}){var ye,H;const[t,r]=v.useState([]),[s,a]=v.useState(null),[o,c]=v.useState(!1),[u,f]=v.useState(!1),[p,x]=v.useState([]),[w,b]=v.useState(0),[j,N]=v.useState(!1),[C,T]=v.useState(!1),[S,E]=v.useState(null),[_,k]=v.useState(!1),[D,L]=v.useState("user"),[R,M]=v.useState(null),{user:P}=bt();v.useEffect(()=>{if(!P)return;F();const ee=$.channel("stories-changes").on("postgres_changes",{event:"*",schema:"public",table:"stories"},()=>{F()}).subscribe();return()=>{$.removeChannel(ee)}},[P]);const F=async()=>{if(!P)return;let ee=[P.id],X=[];if(e==="nearby"){const{data:ue}=await $.from("profiles").select("latitude, longitude").eq("user_id",P.id).single();if(!(ue!=null&&ue.latitude)||!(ue!=null&&ue.longitude)){r([]),a(null);return}const{data:We}=await $.from("profiles").select("user_id, display_name, avatar_url, latitude, longitude").not("latitude","is",null).not("longitude","is",null);if(!We){r([]),a(null);return}const Ee=We.filter(_e=>{if(_e.user_id===P.id)return!0;const ze=6371e3,Ge=ue.latitude*Math.PI/180,Vt=_e.latitude*Math.PI/180,pe=(_e.latitude-ue.latitude)*Math.PI/180,Ze=(_e.longitude-ue.longitude)*Math.PI/180,it=Math.sin(pe/2)*Math.sin(pe/2)+Math.cos(Ge)*Math.cos(Vt)*Math.sin(Ze/2)*Math.sin(Ze/2),ot=2*Math.atan2(Math.sqrt(it),Math.sqrt(1-it));return ze*ot<=100}).map(_e=>_e.user_id);ee=Ee;const{data:Je}=await $.from("profiles").select("user_id, story_visible_to").in("user_id",Ee);X=(Je==null?void 0:Je.filter(_e=>_e.story_visible_to==="both"||_e.story_visible_to==="nearby_only").map(_e=>_e.user_id))||[],X.includes(P.id)||X.push(P.id)}else if(e==="friends"){const{data:ue}=await $.from("friendships").select("user_id, friend_id").eq("status","accepted").or(`user_id.eq.${P.id},friend_id.eq.${P.id}`),We=(ue==null?void 0:ue.map(Je=>Je.user_id===P.id?Je.friend_id:Je.user_id))||[];ee=[P.id,...We];const{data:Ee}=await $.from("profiles").select("user_id, story_visible_to").in("user_id",ee);X=(Ee==null?void 0:Ee.filter(Je=>Je.story_visible_to==="both"||Je.story_visible_to==="friends_only").map(Je=>Je.user_id))||[],X.includes(P.id)||X.push(P.id)}if(ee.length===0||X.length===0){r([]),a(null);return}const{data:te}=await $.from("stories").select("*").in("user_id",X).gt("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});if(!te||te.length===0){r([]),a(null);return}const{data:se}=await $.from("story_views").select("story_id").eq("viewer_id",P.id),ce=new Set((se==null?void 0:se.map(ue=>ue.story_id))||[]),ge=new Map;te.forEach(ue=>{ge.has(ue.user_id)||ge.set(ue.user_id,[]),ge.get(ue.user_id).push(ue)});const{data:Te}=await $.from("profiles").select("user_id, display_name, avatar_url").in("user_id",Array.from(ge.keys())),be=new Map((Te==null?void 0:Te.map(ue=>[ue.user_id,ue]))||[]),Se=[];let Me=null;ge.forEach((ue,We)=>{const Ee=be.get(We),Je=ue.some(ze=>!ce.has(ze.id)),_e={user_id:We,user_name:(Ee==null?void 0:Ee.display_name)||"Usuário",user_avatar:(Ee==null?void 0:Ee.avatar_url)||"",stories:ue.map(ze=>({...ze,user_name:(Ee==null?void 0:Ee.display_name)||"Usuário",user_avatar:(Ee==null?void 0:Ee.avatar_url)||""})),hasUnviewed:Je};We===P.id?Me=_e:Se.push(_e)}),Se.sort((ue,We)=>ue.hasUnviewed&&!We.hasUnviewed?-1:!ue.hasUnviewed&&We.hasUnviewed?1:0),r(Se),a(Me)},Y=async ee=>{if(!P||!ee.target.files||ee.target.files.length===0)return;const X=ee.target.files[0];S&&(S.getTracks().forEach(te=>te.stop()),E(null)),T(!1),await J(X),ee.target.value=""},U=async()=>{try{const ee=await navigator.mediaDevices.getUserMedia({video:{facingMode:D},audio:!1});E(ee),T(!0),N(!1),k(!1)}catch(ee){console.error("Error accessing camera:",ee),G.error("Erro ao acessar a câmera")}},q=async()=>{S&&S.getTracks().forEach(X=>X.stop());const ee=D==="user"?"environment":"user";L(ee);try{const X=await navigator.mediaDevices.getUserMedia({video:{facingMode:ee},audio:!1});E(X)}catch(X){console.error("Error switching camera:",X),G.error("Erro ao trocar câmera")}},re=async()=>{if(S)try{const ee=document.getElementById("camera-preview");if(!ee)return;const X=document.createElement("canvas");X.width=ee.videoWidth,X.height=ee.videoHeight;const te=X.getContext("2d");D==="user"&&(te==null||te.translate(X.width,0),te==null||te.scale(-1,1)),te==null||te.drawImage(ee,0,0);const se=X.toDataURL("image/jpeg",.95);M(se)}catch(ee){console.error("Error capturing photo:",ee),G.error("Erro ao capturar foto")}},W=()=>{M(null)},ne=async()=>{if(R)try{const X=await(await fetch(R)).blob(),te=new File([X],`camera-${Date.now()}.jpg`,{type:"image/jpeg"});S&&(S.getTracks().forEach(se=>se.stop()),E(null)),T(!1),M(null),await J(te)}catch(ee){console.error("Error posting photo:",ee),G.error("Erro ao postar foto")}},oe=()=>{const ee=document.getElementById("story-upload");ee&&ee.click()},ae=()=>{S&&(S.getTracks().forEach(ee=>ee.stop()),E(null)),T(!1),M(null)};v.useEffect(()=>()=>{S&&S.getTracks().forEach(ee=>ee.stop())},[S]);const J=async ee=>{if(P){if(ee.size>5*1024*1024){G.error("A imagem deve ter no máximo 5MB");return}c(!0);try{const X=ee.name.split(".").pop(),te=`${Date.now()}.${X}`,se=`stories/${P.id}/${te}`,{error:ce}=await $.storage.from("user-uploads").upload(se,ee);if(ce)throw ce;const{data:{publicUrl:ge}}=$.storage.from("user-uploads").getPublicUrl(se),{data:Te,error:be}=await $.from("stories").insert({user_id:P.id,image_url:ge}).select().single();if(be)throw be;a(Se=>{var We,Ee;const Me=Se??{user_id:P.id,user_name:((We=P==null?void 0:P.user_metadata)==null?void 0:We.display_name)||"Você",user_avatar:((Ee=P==null?void 0:P.user_metadata)==null?void 0:Ee.avatar_url)||"",stories:[],hasUnviewed:!0},ue=[{id:(Te==null?void 0:Te.id)||`${Date.now()}`,user_id:P.id,image_url:ge,created_at:(Te==null?void 0:Te.created_at)||new Date().toISOString(),user_name:Me.user_name,user_avatar:Me.user_avatar},...Me.stories];return{...Me,stories:ue,hasUnviewed:!0}}),G.success("Story publicado!"),F()}catch(X){console.error("Error uploading story:",X),G.error("Erro ao publicar story")}finally{c(!1)}}},he=(ee,X=0)=>{x(ee),b(X),f(!0)};return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"bg-card rounded-lg p-4 shadow-card mb-4",children:n.jsx(Jo,{className:"w-full",children:n.jsxs("div",{className:"flex gap-3 pb-2",children:[n.jsxs("div",{className:"flex flex-col items-center gap-1 min-w-[70px]",children:[n.jsx("div",{className:"relative",children:s&&s.stories.length>0?n.jsx("div",{className:"rounded-full p-[3px] bg-green-500 cursor-pointer",onClick:()=>k(!0),children:n.jsx("div",{className:"bg-background rounded-full p-[2px]",children:n.jsxs(Ut,{className:"h-14 w-14",children:[n.jsx(Kt,{src:(ye=P==null?void 0:P.user_metadata)==null?void 0:ye.avatar_url}),n.jsx($t,{children:"Eu"})]})})}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-full p-[3px] bg-gray-600",children:n.jsx("div",{className:"bg-background rounded-full p-[2px]",children:n.jsx("div",{onClick:U,className:"cursor-pointer",children:n.jsxs(Ut,{className:"h-14 w-14",children:[n.jsx(Kt,{src:(H=P==null?void 0:P.user_metadata)==null?void 0:H.avatar_url}),n.jsx($t,{children:"Eu"})]})})})}),n.jsx("div",{className:"absolute bottom-0 right-0 bg-primary rounded-full p-1 z-10 cursor-pointer",onClick:U,children:o?n.jsx(us,{className:"h-3 w-3 text-white animate-spin"}):n.jsx($c,{className:"h-3 w-3 text-white"})})]})}),n.jsx("span",{className:"text-xs text-muted-foreground text-center line-clamp-1",children:"Seu story"})]}),n.jsx("input",{id:"story-upload",type:"file",accept:"image/jpeg,image/png,image/jpg,image/webp",className:"hidden",onChange:Y,disabled:o}),t.map(ee=>n.jsxs("div",{className:"flex flex-col items-center gap-1 min-w-[70px] cursor-pointer",onClick:()=>he(ee.stories,0),children:[n.jsx("div",{className:`rounded-full p-[3px] ${ee.hasUnviewed?"bg-gradient-to-tr from-yellow-400 to-pink-600":"bg-gray-600"}`,children:n.jsx("div",{className:"bg-background rounded-full p-[2px]",children:n.jsxs(Ut,{className:"h-14 w-14",children:[n.jsx(Kt,{src:ee.user_avatar}),n.jsx($t,{children:ee.user_name.charAt(0)})]})})}),n.jsx("span",{className:"text-xs text-muted-foreground text-center line-clamp-1 max-w-[70px]",children:ee.user_name})]},ee.user_id))]})})}),p.length>0&&n.jsx(EU,{stories:p,initialIndex:w,open:u,onOpenChange:f,onStoryDeleted:ee=>{ee&&a(null),x([]),F()}}),n.jsx(zt,{open:_,onOpenChange:k,children:n.jsxs(Ft,{className:"bg-surface border-border max-w-sm",children:[n.jsx(xr,{children:n.jsx(vr,{children:"Seu Story"})}),n.jsxs("div",{className:"space-y-3 py-4",children:[n.jsxs(K,{onClick:()=>{k(!1),s&&he(s.stories,0)},className:"w-full h-14 text-base",variant:"outline",children:[n.jsx(Yo,{className:"h-5 w-5 mr-3"}),"Ver Story"]}),n.jsxs(K,{onClick:()=>{k(!1),U()},className:"w-full h-14 text-base",variant:"outline",children:[n.jsx(En,{className:"h-5 w-5 mr-3"}),"Tirar Nova Foto"]})]})]})}),n.jsx(zt,{open:C,onOpenChange:ae,children:n.jsx(Ft,{className:"max-w-full w-full h-full p-0 m-0 overflow-hidden bg-black border-none",children:n.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[R?n.jsx("img",{src:R,alt:"Captured",className:"w-full h-full object-contain"}):n.jsx("video",{id:"camera-preview",autoPlay:!0,playsInline:!0,muted:!0,ref:ee=>{ee&&S&&(ee.srcObject=S)},className:"w-full h-full object-cover",style:{transform:D==="user"?"scaleX(-1)":"none"}}),n.jsxs("div",{className:"absolute top-0 left-0 right-0 flex justify-between items-center p-4 bg-gradient-to-b from-black/50 to-transparent",children:[n.jsx("button",{onClick:ae,className:"p-2 rounded-full hover:bg-white/10 transition-smooth",children:n.jsx(sr,{className:"h-6 w-6 text-white"})}),!R&&n.jsx("button",{onClick:q,className:"p-2 rounded-full hover:bg-white/10 transition-smooth",children:n.jsx(Ij,{className:"h-6 w-6 text-white"})})]}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 pb-8 bg-gradient-to-t from-black/70 to-transparent",children:R?n.jsxs("div",{className:"flex justify-center items-center gap-8 px-8",children:[n.jsx(K,{onClick:W,size:"lg",variant:"ghost",className:"rounded-full w-16 h-16 bg-white/10 hover:bg-white/20 border border-white/30",children:n.jsx(sr,{className:"h-6 w-6 text-white"})}),n.jsx(K,{onClick:ne,size:"lg",className:"rounded-full w-16 h-16 bg-primary hover:bg-primary-glow",disabled:o,children:o?n.jsx(us,{className:"h-6 w-6 animate-spin"}):n.jsx(Yn,{className:"h-6 w-6"})})]}):n.jsxs("div",{className:"flex justify-center items-center gap-8 px-8",children:[n.jsx("button",{onClick:oe,className:"w-12 h-12 rounded-lg border-2 border-white/50 bg-white/10 hover:bg-white/20 transition-smooth flex items-center justify-center",children:n.jsx(Hi,{className:"h-6 w-6 text-white"})}),n.jsx("button",{onClick:re,className:"w-20 h-20 rounded-full bg-white hover:bg-white/90 transition-smooth flex items-center justify-center",children:n.jsx("div",{className:"w-16 h-16 rounded-full border-4 border-black"})}),n.jsx("div",{className:"w-12 h-12"})," "]})})]})})})]})}function Xu(e){const t=v.useRef({value:e,previous:e});return v.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Nv="Radio",[SU,t3]=Mr(Nv),[AU,kU]=SU(Nv),r3=v.forwardRef((e,t)=>{const{__scopeRadio:r,name:s,checked:a=!1,required:o,disabled:c,value:u="on",onCheck:f,form:p,...x}=e,[w,b]=v.useState(null),j=tt(t,T=>b(T)),N=v.useRef(!1),C=w?p||!!w.closest("form"):!0;return n.jsxs(AU,{scope:r,checked:a,disabled:c,children:[n.jsx(Ve.button,{type:"button",role:"radio","aria-checked":a,"data-state":i3(a),"data-disabled":c?"":void 0,disabled:c,value:u,...x,ref:j,onClick:Re(e.onClick,T=>{a||f==null||f(),C&&(N.current=T.isPropagationStopped(),N.current||T.stopPropagation())})}),C&&n.jsx(a3,{control:w,bubbles:!N.current,name:s,value:u,checked:a,required:o,disabled:c,form:p,style:{transform:"translateX(-100%)"}})]})});r3.displayName=Nv;var n3="RadioIndicator",s3=v.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:s,...a}=e,o=kU(n3,r);return n.jsx(Hr,{present:s||o.checked,children:n.jsx(Ve.span,{"data-state":i3(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:t})})});s3.displayName=n3;var TU="RadioBubbleInput",a3=v.forwardRef(({__scopeRadio:e,control:t,checked:r,bubbles:s=!0,...a},o)=>{const c=v.useRef(null),u=tt(c,o),f=Xu(r),p=Du(t);return v.useEffect(()=>{const x=c.current;if(!x)return;const w=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(w,"checked").set;if(f!==r&&j){const N=new Event("click",{bubbles:s});j.call(x,r),x.dispatchEvent(N)}},[f,r,s]),n.jsx(Ve.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:u,style:{...a.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});a3.displayName=TU;function i3(e){return e?"checked":"unchecked"}var IU=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ep="RadioGroup",[RU]=Mr(ep,[Yc,t3]),o3=Yc(),l3=t3(),[PU,OU]=RU(ep),c3=v.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:s,defaultValue:a,value:o,required:c=!1,disabled:u=!1,orientation:f,dir:p,loop:x=!0,onValueChange:w,...b}=e,j=o3(r),N=pl(p),[C,T]=Ms({prop:o,defaultProp:a??null,onChange:w,caller:ep});return n.jsx(PU,{scope:r,name:s,required:c,disabled:u,value:C,onValueChange:T,children:n.jsx(fv,{asChild:!0,...j,orientation:f,dir:N,loop:x,children:n.jsx(Ve.div,{role:"radiogroup","aria-required":c,"aria-orientation":f,"data-disabled":u?"":void 0,dir:N,...b,ref:t})})})});c3.displayName=ep;var d3="RadioGroupItem",u3=v.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:s,...a}=e,o=OU(d3,r),c=o.disabled||s,u=o3(r),f=l3(r),p=v.useRef(null),x=tt(t,p),w=o.value===a.value,b=v.useRef(!1);return v.useEffect(()=>{const j=C=>{IU.includes(C.key)&&(b.current=!0)},N=()=>b.current=!1;return document.addEventListener("keydown",j),document.addEventListener("keyup",N),()=>{document.removeEventListener("keydown",j),document.removeEventListener("keyup",N)}},[]),n.jsx(mv,{asChild:!0,...u,focusable:!c,active:w,children:n.jsx(r3,{disabled:c,required:o.required,checked:w,...f,...a,name:o.name,ref:x,onCheck:()=>o.onValueChange(a.value),onKeyDown:Re(j=>{j.key==="Enter"&&j.preventDefault()}),onFocus:Re(a.onFocus,()=>{var j;b.current&&((j=p.current)==null||j.click())})})})});u3.displayName=d3;var DU="RadioGroupIndicator",h3=v.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...s}=e,a=l3(r);return n.jsx(s3,{...a,...s,ref:t})});h3.displayName=DU;var f3=c3,m3=u3,MU=h3;const Ui=v.forwardRef(({className:e,...t},r)=>n.jsx(f3,{className:Fe("grid gap-2",e),...t,ref:r}));Ui.displayName=f3.displayName;const on=v.forwardRef(({className:e,...t},r)=>n.jsx(m3,{ref:r,className:Fe("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:n.jsx(MU,{className:"flex items-center justify-center",children:n.jsx(jj,{className:"h-2.5 w-2.5 fill-current text-current"})})}));on.displayName=m3.displayName;function LU(){const[e,t]=v.useState(!1),[r,s]=v.useState("both"),[a,o]=v.useState(!1),{user:c}=bt();v.useEffect(()=>{e&&c&&u()},[e,c]);const u=async()=>{if(!c)return;const{data:p}=await $.from("profiles").select("story_visible_to").eq("user_id",c.id).single();p&&s(p.story_visible_to||"both")},f=async()=>{if(c){o(!0);try{const{error:p}=await $.from("profiles").update({story_visible_to:r}).eq("user_id",c.id);if(p)throw p;G.success("Configurações salvas!"),t(!1)}catch(p){console.error("Error saving settings:",p),G.error("Erro ao salvar configurações")}finally{o(!1)}}};return n.jsxs(zt,{open:e,onOpenChange:t,children:[n.jsx(tS,{asChild:!0,children:n.jsx(K,{variant:"ghost",size:"icon",children:n.jsx(zo,{className:"h-5 w-5"})})}),n.jsxs(Ft,{className:"bg-surface border-border",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Configurações de Stories"}),n.jsx(os,{children:"Escolha quem pode ver seus stories"})]}),n.jsx("div",{className:"space-y-4 py-4",children:n.jsxs(Ui,{value:r,onValueChange:s,children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(on,{value:"both",id:"both"}),n.jsx(de,{htmlFor:"both",className:"cursor-pointer",children:"Todos (amigos e pessoas próximas)"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(on,{value:"friends_only",id:"friends_only"}),n.jsx(de,{htmlFor:"friends_only",className:"cursor-pointer",children:"Apenas amigos"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(on,{value:"nearby_only",id:"nearby_only"}),n.jsx(de,{htmlFor:"nearby_only",className:"cursor-pointer",children:"Apenas pessoas próximas"})]})]})}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(K,{variant:"outline",onClick:()=>t(!1),children:"Cancelar"}),n.jsx(K,{onClick:f,disabled:a,children:a?"Salvando...":"Salvar"})]})]})]})}const FU=({person:e,handleLike:t,handleMessage:r,likedUsers:s,unreadMessages:a,onFriendshipChange:o})=>{const{friendshipStatus:c,loading:u,addFriend:f,removeFriend:p}=QB(e.user_id),[x,w]=v.useState(null),b=async()=>{c==="accepted"?await p():await f(),o()};return n.jsxs("div",{className:"bg-card rounded-lg p-4 shadow-card",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"avatar-story cursor-pointer",onClick:()=>w(e.avatar),children:n.jsxs(Ut,{className:"h-12 w-12",children:[n.jsx(Kt,{src:e.avatar,alt:e.name}),n.jsx($t,{className:"bg-surface",children:e.name.charAt(0)})]})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h3",{className:"font-medium text-foreground",children:e.name}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:["• ",e.distance]}),e.isFriend&&n.jsx(ct,{className:"bg-green-500/20 text-green-400 border-0 text-xs",children:"🤝 Amigo"})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[n.jsxs(ct,{className:`${e.interest==="curtição"?"bg-yellow-500/20 text-yellow-400":e.interest==="namoro"?"bg-red-500/20 text-red-400":e.interest==="amizade"?"bg-blue-500/20 text-blue-400":"bg-green-500/20 text-green-400"} border-0`,children:[n.jsx("span",{className:"mr-1",children:e.interest==="curtição"?"💛":e.interest==="namoro"?"💕":e.interest==="amizade"?"🤝":"💼"}),e.interest]}),n.jsxs(ct,{className:`${e.relationship_status==="solteiro"?"bg-green-500/20 text-green-400":e.relationship_status==="namorando"?"bg-pink-500/20 text-pink-400":e.relationship_status==="casado"?"bg-purple-500/20 text-purple-400":e.relationship_status==="relacionamento_aberto"?"bg-orange-500/20 text-orange-400":"bg-gray-500/20 text-gray-400"} border-0 text-xs`,children:[n.jsx("span",{className:"mr-1",children:e.relationship_status==="solteiro"?"😊":e.relationship_status==="namorando"?"💑":e.relationship_status==="casado"?"💍":e.relationship_status==="relacionamento_aberto"?"🌈":"🤐"}),e.relationship_status==="solteiro"?"Solteiro(a)":e.relationship_status==="namorando"?"Namorando":e.relationship_status==="casado"?"Casado(a)":e.relationship_status==="relacionamento_aberto"?"Relacionamento Aberto":"Não informado"]})]}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2 line-clamp-2",children:e.note}),n.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-muted-foreground",children:[n.jsx(Rt,{className:"h-3 w-3"}),n.jsx("span",{children:e.event_name})]}),n.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[e.instagram&&n.jsxs("a",{href:e.instagram,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm text-primary hover:text-primary-glow transition-smooth",children:[n.jsx(Gi,{className:"h-4 w-4"}),n.jsx("span",{children:"Instagram"})]}),e.phone&&n.jsxs("a",{href:`https://wa.me/${e.phone.replace(/\D/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm text-primary hover:text-primary-glow transition-smooth",children:[n.jsx(Uc,{className:"h-4 w-4"}),n.jsx("span",{children:"WhatsApp"})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx(K,{variant:c==="accepted"?"default":"outline",size:"sm",onClick:b,disabled:u,className:c==="accepted"?"text-green-400 bg-green-500/20 border-green-500":"",children:c==="accepted"?n.jsx(Pj,{className:"h-4 w-4"}):n.jsx(ym,{className:"h-4 w-4"})}),n.jsx(K,{variant:s.has(e.user_id)?"default":"outline",size:"sm",onClick:()=>t(e.user_id),children:n.jsx(Ja,{className:"h-4 w-4",fill:s.has(e.user_id)?"currentColor":"none"})}),n.jsxs(K,{variant:"outline",size:"sm",onClick:()=>r(e),className:"relative",children:[n.jsx(Ls,{className:"h-4 w-4"}),a.get(e.user_id)&&a.get(e.user_id)>0&&n.jsx(ct,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 p-0 flex items-center justify-center text-xs rounded-full",children:a.get(e.user_id)})]})]})]}),n.jsx(zt,{open:!!x,onOpenChange:()=>w(null),children:n.jsxs(Ft,{className:"max-w-2xl p-0 overflow-hidden bg-background/95 backdrop-blur-lg border border-border",children:[n.jsx("button",{onClick:()=>w(null),className:"absolute top-4 right-4 z-50 p-2 rounded-full bg-surface/80 hover:bg-surface transition-smooth",children:n.jsx(sr,{className:"h-5 w-5 text-foreground"})}),x&&n.jsx("img",{src:x,alt:"Profile",className:"w-full h-auto max-h-[80vh] object-contain"})]})})]})};function d0({onBack:e}){const[t,r]=v.useState("nearby"),[s,a]=v.useState(!1),[o,c]=v.useState([]),[u,f]=v.useState([]),[p,x]=v.useState(!0),[w,b]=v.useState(new Set),[j,N]=v.useState(!1),[C,T]=v.useState(null),[S,E]=v.useState(new Map),[_,k]=v.useState(null),[D,L]=v.useState(null),[R,M]=v.useState("curtição"),[P,F]=v.useState(""),[Y,U]=v.useState(!0),{user:q}=bt();_t(),v.useEffect(()=>{if(!q||!s)return;if(!navigator.geolocation){L("Geolocalização não suportada pelo navegador");return}const J=navigator.geolocation.watchPosition(async he=>{const{latitude:ye,longitude:H}=he.coords;k({lat:ye,lon:H}),L(null),await $.from("profiles").update({latitude:ye,longitude:H,location_updated_at:new Date().toISOString()}).eq("user_id",q.id)},he=>{console.error("Geolocation error:",he),L("Erro ao obter localização. Permita o acesso à localização.")},{enableHighAccuracy:!0,maximumAge:3e4,timeout:27e3});return()=>navigator.geolocation.clearWatch(J)},[q,s]),v.useEffect(()=>{(async()=>{if(!q)return;const{data:he,error:ye}=await $.from("profiles").select("find_friends_visible, interest, notes, notes_visible").eq("user_id",q.id).single();he&&!ye&&(a(he.find_friends_visible??!1),M(he.interest||"curtição"),F(he.notes||""),U(he.notes_visible??!0))})()},[q]);const re=async()=>{if(!q){G.error("Faça login para usar esta funcionalidade");return}const J=!s;a(J);const{error:he}=await $.from("profiles").update({find_friends_visible:J}).eq("user_id",q.id);he?(console.error("Error updating visibility:",he),G.error("Erro ao atualizar visibilidade"),a(!J)):G.success(J?"Você está visível para outros":"Você está invisível")};v.useEffect(()=>{(async()=>{if(!q)return;const{data:he,error:ye}=await $.from("user_likes").select("to_user_id").eq("from_user_id",q.id);he&&!ye&&b(new Set(he.map(H=>H.to_user_id)))})()},[q]),v.useEffect(()=>{(async()=>{if(q)try{const{data:he,error:ye}=await $.from("friendships").select("user_id, friend_id").eq("status","accepted").or(`user_id.eq.${q.id},friend_id.eq.${q.id}`);if(ye){console.error("Error fetching friendships:",ye);return}const H=(he==null?void 0:he.map(se=>se.user_id===q.id?se.friend_id:se.user_id))||[];if(H.length===0){f([]);return}const{data:ee,error:X}=await $.from("profiles").select("user_id, display_name, avatar_url, notes, instagram_url, phone, interest, relationship_status, latitude, longitude").in("user_id",H);if(X){console.error("Error fetching friend profiles:",X);return}const te=(ee||[]).map(se=>{let ce="Amigo";if(se.latitude&&se.longitude&&_){const Te=_.lat*Math.PI/180,be=se.latitude*Math.PI/180,Se=(se.latitude-_.lat)*Math.PI/180,Me=(se.longitude-_.lon)*Math.PI/180,ue=Math.sin(Se/2)*Math.sin(Se/2)+Math.cos(Te)*Math.cos(be)*Math.sin(Me/2)*Math.sin(Me/2),Ee=6371e3*(2*Math.atan2(Math.sqrt(ue),Math.sqrt(1-ue)));Ee<1e3?ce=`${Math.round(Ee)}m`:ce=`${(Ee/1e3).toFixed(1)}km`}return{id:se.user_id,user_id:se.user_id,name:se.display_name||"Usuário",avatar:se.avatar_url||"",interest:se.interest||"curtição",note:se.notes||"Seu amigo",distance:ce,instagram:se.instagram_url||"",phone:se.phone||null,event_name:"Amigo",relationship_status:se.relationship_status||"preferencia_nao_informar",isFriend:!0}});if(f(te),te.length>0){const{data:se}=await $.from("user_messages").select("from_user_id").eq("to_user_id",q.id).in("from_user_id",H).eq("read",!1);if(se){const ce=new Map;se.forEach(ge=>{ce.set(ge.from_user_id,(ce.get(ge.from_user_id)||0)+1)}),E(ge=>new Map([...ge,...ce]))}}}catch(he){console.error("Error fetching friends:",he)}})()},[q]),v.useEffect(()=>{let J=null;return(async()=>{if(!q){x(!1);return}if(!s){c([]),x(!1);return}if(!_){c([]),x(!1);return}try{const{data:ye,error:H}=await $.from("friendships").select("user_id, friend_id").eq("status","accepted").or(`user_id.eq.${q.id},friend_id.eq.${q.id}`);H&&console.error("Error fetching friendships:",H);const ee=(ye==null?void 0:ye.map(be=>be.user_id===q.id?be.friend_id:be.user_id))||[],X=new Date(Date.now()-2*60*60*1e3).toISOString(),{data:te,error:se}=await $.from("profiles").select("user_id, display_name, avatar_url, notes, notes_visible, find_friends_visible, instagram_url, phone, interest, relationship_status, latitude, longitude, location_updated_at").eq("find_friends_visible",!0).neq("user_id",q.id).not("latitude","is",null).not("longitude","is",null).gte("location_updated_at",X);if(se){console.error("Error fetching profiles:",se),x(!1);return}if(!te||te.length===0){c([]),x(!1);return}const ce=te.map(be=>{const Me=_.lat*Math.PI/180,ue=be.latitude*Math.PI/180,We=(be.latitude-_.lat)*Math.PI/180,Ee=(be.longitude-_.lon)*Math.PI/180,Je=Math.sin(We/2)*Math.sin(We/2)+Math.cos(Me)*Math.cos(ue)*Math.sin(Ee/2)*Math.sin(Ee/2),ze=6371e3*(2*Math.atan2(Math.sqrt(Je),Math.sqrt(1-Je)));return{profile:be,distance:ze}}).filter(({distance:be})=>be<=5e3).map(({profile:be,distance:Se})=>({id:be.user_id,user_id:be.user_id,name:be.display_name||"Usuário",avatar:be.avatar_url||"",interest:be.interest||"curtição",note:be.notes||"Está próximo de você",distance:`${Math.round(Se)}m`,instagram:be.instagram_url||"",phone:be.phone||null,event_name:"Próximo",relationship_status:be.relationship_status||"preferencia_nao_informar",isFriend:ee.includes(be.user_id)})).sort((be,Se)=>{const Me=parseFloat(be.distance),ue=parseFloat(Se.distance);return Me-ue});c(ce);const ge=ce.map(be=>be.user_id);if(ge.length>0){const{data:be}=await $.from("user_messages").select("from_user_id").eq("to_user_id",q.id).in("from_user_id",ge).eq("read",!1);if(be){const Se=new Map;be.forEach(Me=>{Se.set(Me.from_user_id,(Se.get(Me.from_user_id)||0)+1)}),E(Se)}}const Te=ce.map(be=>be.user_id);J=$.channel("profiles-and-messages-updates").on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles"},be=>{const Se=be.new;Te.includes(Se.user_id)&&c(Me=>Me.map(ue=>ue.user_id===Se.user_id?{...ue,note:Se.notes||ue.note,relationship_status:Se.relationship_status||ue.relationship_status,interest:Se.interest||ue.interest}:ue))}).on("postgres_changes",{event:"INSERT",schema:"public",table:"user_messages"},be=>{const Se=be.new;Se.to_user_id===q.id&&Te.includes(Se.from_user_id)&&E(Me=>{const ue=new Map(Me);return ue.set(Se.from_user_id,(ue.get(Se.from_user_id)||0)+1),ue})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"user_messages"},be=>{const Se=be.new;Se.read&&Se.to_user_id===q.id&&$.from("user_messages").select("id").eq("to_user_id",q.id).eq("from_user_id",Se.from_user_id).eq("read",!1).then(({data:Me})=>{E(ue=>{const We=new Map(ue);return Me&&Me.length>0?We.set(Se.from_user_id,Me.length):We.delete(Se.from_user_id),We})})}).subscribe()}catch(ye){console.error("Error:",ye)}finally{x(!1)}})(),()=>{J&&$.removeChannel(J)}},[q,s,_]);const W=async J=>{if(!q){G.error("Faça login para curtir perfis");return}try{if(w.has(J)){const{error:ye}=await $.from("user_likes").delete().eq("from_user_id",q.id).eq("to_user_id",J);if(ye)throw ye;b(H=>{const ee=new Set(H);return ee.delete(J),ee}),G.success("Curtida removida")}else{const{error:ye}=await $.from("user_likes").insert({from_user_id:q.id,to_user_id:J});if(ye)throw ye;b(H=>new Set(H).add(J)),G.success("Perfil curtido! A pessoa receberá uma notificação")}}catch(he){console.error("Error liking user:",he),G.error("Erro ao curtir perfil")}},ne=async J=>{T(J),N(!0),E(he=>{const ye=new Map(he);return ye.delete(J.user_id),ye})},oe=async()=>{if(!q)return;const{data:J,error:he}=await $.from("friendships").select("user_id, friend_id").eq("status","accepted").or(`user_id.eq.${q.id},friend_id.eq.${q.id}`);if(he){console.error("Error fetching friendships:",he);return}const ye=(J==null?void 0:J.map(te=>te.user_id===q.id?te.friend_id:te.user_id))||[];if(ye.length===0){f([]),c(te=>te.map(se=>({...se,isFriend:!1})));return}const{data:H,error:ee}=await $.from("profiles").select("user_id, display_name, avatar_url, notes, instagram_url, phone, interest, relationship_status, latitude, longitude").in("user_id",ye);if(ee){console.error("Error fetching friend profiles:",ee);return}const X=(H||[]).map(te=>{let se="Amigo";if(te.latitude&&te.longitude&&_){const ge=_.lat*Math.PI/180,Te=te.latitude*Math.PI/180,be=(te.latitude-_.lat)*Math.PI/180,Se=(te.longitude-_.lon)*Math.PI/180,Me=Math.sin(be/2)*Math.sin(be/2)+Math.cos(ge)*Math.cos(Te)*Math.sin(Se/2)*Math.sin(Se/2),We=6371e3*(2*Math.atan2(Math.sqrt(Me),Math.sqrt(1-Me)));We<1e3?se=`${Math.round(We)}m`:se=`${(We/1e3).toFixed(1)}km`}return{id:te.user_id,user_id:te.user_id,name:te.display_name||"Usuário",avatar:te.avatar_url||"",interest:te.interest||"curtição",note:te.notes||"Seu amigo",distance:se,instagram:te.instagram_url||"",phone:te.phone||null,event_name:"Amigo",relationship_status:te.relationship_status||"preferencia_nao_informar",isFriend:!0}});f(X),c(te=>te.map(se=>({...se,isFriend:ye.includes(se.user_id)})))},ae=t==="nearby"?o:u;return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsxs("header",{className:"sticky top-0 z-40 bg-background/80 backdrop-blur-md border-b border-border",children:[n.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 max-w-md mx-auto",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsx("div",{className:"flex-1",children:n.jsx("h1",{className:"font-bold text-foreground",children:"Conectar"})}),n.jsx(LU,{})]}),n.jsxs("div",{className:"flex gap-2 px-4 pb-3 max-w-md mx-auto",children:[n.jsxs(K,{variant:t==="nearby"?"default":"outline",className:"flex-1 rounded-full",onClick:()=>r("nearby"),children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Próximos"]}),n.jsxs(K,{variant:t==="friends"?"default":"outline",className:"flex-1 rounded-full",onClick:()=>r("friends"),children:[n.jsx(er,{className:"h-4 w-4 mr-2"}),"Amigos"]})]})]}),n.jsxs("div",{className:"px-4 py-6 pb-24 max-w-md mx-auto",children:[t==="nearby"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"mb-4",children:n.jsxs(K,{variant:s?"default":"outline",onClick:re,className:"w-full h-11",children:[n.jsx(Yo,{className:"h-4 w-4 mr-2"}),s?"Visível":"Ser Visto"]})}),s&&n.jsxs("div",{className:"mb-4 p-3 bg-card rounded-lg border border-border",children:[n.jsx("h3",{className:"font-medium text-sm text-foreground mb-2",children:"Como você quer aparecer"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{children:n.jsxs("select",{className:"w-full px-3 py-1.5 bg-surface border border-border rounded-lg text-sm text-foreground",value:R,onChange:async J=>{q&&(M(J.target.value),await $.from("profiles").update({interest:J.target.value}).eq("user_id",q.id),G.success("Interesse atualizado"))},children:[n.jsx("option",{value:"curtição",children:"💛 Curtição"}),n.jsx("option",{value:"namoro",children:"💕 Namoro"}),n.jsx("option",{value:"amizade",children:"🤝 Amizade"}),n.jsx("option",{value:"network",children:"💼 Network"})]})}),n.jsx("div",{children:n.jsx("textarea",{className:"w-full px-3 py-1.5 bg-surface border border-border rounded-lg text-sm text-foreground resize-none",rows:2,placeholder:"Escreva algo sobre você...",value:P,onChange:J=>F(J.target.value),onBlur:async J=>{q&&(await $.from("profiles").update({notes:J.target.value}).eq("user_id",q.id),G.success("Notas atualizadas"))}})})]})]}),n.jsxs("div",{className:"mb-6 p-4 bg-surface rounded-lg border border-primary/20",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Rt,{className:"h-5 w-5 text-primary"}),n.jsx("span",{className:"font-medium text-foreground",children:s?"Você está visível para outros":"Pessoas próximas"})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:s?D||(_?"Outras pessoas até 100m de você podem te encontrar.":"Aguardando sua localização para encontrar pessoas próximas..."):"Conecte-se com pessoas até 100 metros de você. Para aparecer para outros, ative 'Ser Visto'."})]}),s&&_&&n.jsx(Wb,{mode:"nearby"})]}),t==="friends"&&n.jsxs(n.Fragment,{children:[n.jsx(Wb,{mode:"friends"}),n.jsxs("div",{className:"mb-6 p-4 bg-surface rounded-lg border border-primary/20",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(er,{className:"h-5 w-5 text-primary"}),n.jsx("span",{className:"font-medium text-foreground",children:"Seus Amigos"})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:u.length===0?"Você ainda não tem amigos adicionados. Vá para 'Próximos' e adicione pessoas próximas!":`Você tem ${u.length} ${u.length===1?"amigo":"amigos"}. Seus amigos sempre aparecem aqui, não importa a distância.`})]})]}),p&&t==="nearby"?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Procurando pessoas..."})]}):ae.length>0?n.jsx("div",{className:"space-y-4 pb-4",children:ae.map(J=>n.jsx(FU,{person:J,handleLike:W,handleMessage:ne,likedUsers:w,unreadMessages:S,onFriendshipChange:oe},J.id))}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(er,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),t==="nearby"?n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-muted-foreground",children:s?D?"Erro ao acessar localização":_?"Nenhuma pessoa próxima":"Aguardando localização...":"Você precisa ser visível"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:s?D?"Permita o acesso à localização no seu navegador.":_?"Não há pessoas visíveis até 100m de você.":"Carregando sua localização...":"Ative 'Ser Visto' para se conectar."})]}):n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-muted-foreground",children:"Você ainda não tem amigos"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Vá para 'Próximos' e adicione pessoas próximas!"})]})]})]}),C&&n.jsx(YB,{open:j,onOpenChange:N,recipientId:C.user_id,recipientName:C.name,recipientAvatar:C.avatar})]})}var tp="Switch",[BU]=Mr(tp),[zU,UU]=BU(tp),p3=v.forwardRef((e,t)=>{const{__scopeSwitch:r,name:s,checked:a,defaultChecked:o,required:c,disabled:u,value:f="on",onCheckedChange:p,form:x,...w}=e,[b,j]=v.useState(null),N=tt(t,_=>j(_)),C=v.useRef(!1),T=b?x||!!b.closest("form"):!0,[S,E]=Ms({prop:a,defaultProp:o??!1,onChange:p,caller:tp});return n.jsxs(zU,{scope:r,checked:S,disabled:u,children:[n.jsx(Ve.button,{type:"button",role:"switch","aria-checked":S,"aria-required":c,"data-state":w3(S),"data-disabled":u?"":void 0,disabled:u,value:f,...w,ref:N,onClick:Re(e.onClick,_=>{E(k=>!k),T&&(C.current=_.isPropagationStopped(),C.current||_.stopPropagation())})}),T&&n.jsx(v3,{control:b,bubbles:!C.current,name:s,value:f,checked:S,required:c,disabled:u,form:x,style:{transform:"translateX(-100%)"}})]})});p3.displayName=tp;var g3="SwitchThumb",x3=v.forwardRef((e,t)=>{const{__scopeSwitch:r,...s}=e,a=UU(g3,r);return n.jsx(Ve.span,{"data-state":w3(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})});x3.displayName=g3;var $U="SwitchBubbleInput",v3=v.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:s=!0,...a},o)=>{const c=v.useRef(null),u=tt(c,o),f=Xu(r),p=Du(t);return v.useEffect(()=>{const x=c.current;if(!x)return;const w=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(w,"checked").set;if(f!==r&&j){const N=new Event("click",{bubbles:s});j.call(x,r),x.dispatchEvent(N)}},[f,r,s]),n.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:u,style:{...a.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});v3.displayName=$U;function w3(e){return e?"checked":"unchecked"}var y3=p3,VU=x3;const Tr=v.forwardRef(({className:e,...t},r)=>n.jsx(y3,{className:Fe("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...t,ref:r,children:n.jsx(VU,{className:Fe("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Tr.displayName=y3.displayName;var qU=[" ","Enter","ArrowUp","ArrowDown"],WU=[" ","Enter"],sl="Select",[rp,np,HU]=ku(sl),[Qc]=Mr(sl,[HU,ao]),sp=ao(),[GU,oo]=Qc(sl),[XU,KU]=Qc(sl),b3=e=>{const{__scopeSelect:t,children:r,open:s,defaultOpen:a,onOpenChange:o,value:c,defaultValue:u,onValueChange:f,dir:p,name:x,autoComplete:w,disabled:b,required:j,form:N}=e,C=sp(t),[T,S]=v.useState(null),[E,_]=v.useState(null),[k,D]=v.useState(!1),L=pl(p),[R,M]=Ms({prop:s,defaultProp:a??!1,onChange:o,caller:sl}),[P,F]=Ms({prop:c,defaultProp:u,onChange:f,caller:sl}),Y=v.useRef(null),U=T?N||!!T.closest("form"):!0,[q,re]=v.useState(new Set),W=Array.from(q).map(ne=>ne.props.value).join(";");return n.jsx(z1,{...C,children:n.jsxs(GU,{required:j,scope:t,trigger:T,onTriggerChange:S,valueNode:E,onValueNodeChange:_,valueNodeHasChildren:k,onValueNodeHasChildrenChange:D,contentId:hn(),value:P,onValueChange:F,open:R,onOpenChange:M,dir:L,triggerPointerDownPosRef:Y,disabled:b,children:[n.jsx(rp.Provider,{scope:t,children:n.jsx(XU,{scope:e.__scopeSelect,onNativeOptionAdd:v.useCallback(ne=>{re(oe=>new Set(oe).add(ne))},[]),onNativeOptionRemove:v.useCallback(ne=>{re(oe=>{const ae=new Set(oe);return ae.delete(ne),ae})},[]),children:r})}),U?n.jsxs(W3,{"aria-hidden":!0,required:j,tabIndex:-1,name:x,autoComplete:w,value:P,onChange:ne=>F(ne.target.value),disabled:b,form:N,children:[P===void 0?n.jsx("option",{value:""}):null,Array.from(q)]},W):null]})})};b3.displayName=sl;var _3="SelectTrigger",N3=v.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:s=!1,...a}=e,o=sp(r),c=oo(_3,r),u=c.disabled||s,f=tt(t,c.onTriggerChange),p=np(r),x=v.useRef("touch"),[w,b,j]=G3(C=>{const T=p().filter(_=>!_.disabled),S=T.find(_=>_.value===c.value),E=X3(T,C,S);E!==void 0&&c.onValueChange(E.value)}),N=C=>{u||(c.onOpenChange(!0),j()),C&&(c.triggerPointerDownPosRef.current={x:Math.round(C.pageX),y:Math.round(C.pageY)})};return n.jsx(Mu,{asChild:!0,...o,children:n.jsx(Ve.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":H3(c.value)?"":void 0,...a,ref:f,onClick:Re(a.onClick,C=>{C.currentTarget.focus(),x.current!=="mouse"&&N(C)}),onPointerDown:Re(a.onPointerDown,C=>{x.current=C.pointerType;const T=C.target;T.hasPointerCapture(C.pointerId)&&T.releasePointerCapture(C.pointerId),C.button===0&&C.ctrlKey===!1&&C.pointerType==="mouse"&&(N(C),C.preventDefault())}),onKeyDown:Re(a.onKeyDown,C=>{const T=w.current!=="";!(C.ctrlKey||C.altKey||C.metaKey)&&C.key.length===1&&b(C.key),!(T&&C.key===" ")&&qU.includes(C.key)&&(N(),C.preventDefault())})})})});N3.displayName=_3;var j3="SelectValue",C3=v.forwardRef((e,t)=>{const{__scopeSelect:r,className:s,style:a,children:o,placeholder:c="",...u}=e,f=oo(j3,r),{onValueNodeHasChildrenChange:p}=f,x=o!==void 0,w=tt(t,f.onValueNodeChange);return Rr(()=>{p(x)},[p,x]),n.jsx(Ve.span,{...u,ref:w,style:{pointerEvents:"none"},children:H3(f.value)?n.jsx(n.Fragment,{children:c}):o})});C3.displayName=j3;var YU="SelectIcon",E3=v.forwardRef((e,t)=>{const{__scopeSelect:r,children:s,...a}=e;return n.jsx(Ve.span,{"aria-hidden":!0,...a,ref:t,children:s||"▼"})});E3.displayName=YU;var QU="SelectPortal",S3=e=>n.jsx(zc,{asChild:!0,...e});S3.displayName=QU;var al="SelectContent",A3=v.forwardRef((e,t)=>{const r=oo(al,e.__scopeSelect),[s,a]=v.useState();if(Rr(()=>{a(new DocumentFragment)},[]),!r.open){const o=s;return o?dl.createPortal(n.jsx(k3,{scope:e.__scopeSelect,children:n.jsx(rp.Slot,{scope:e.__scopeSelect,children:n.jsx("div",{children:e.children})})}),o):null}return n.jsx(T3,{...e,ref:t})});A3.displayName=al;var Hs=10,[k3,lo]=Qc(al),ZU="SelectContentImpl",JU=Wi("SelectContent.RemoveScroll"),T3=v.forwardRef((e,t)=>{const{__scopeSelect:r,position:s="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:o,onPointerDownOutside:c,side:u,sideOffset:f,align:p,alignOffset:x,arrowPadding:w,collisionBoundary:b,collisionPadding:j,sticky:N,hideWhenDetached:C,avoidCollisions:T,...S}=e,E=oo(al,r),[_,k]=v.useState(null),[D,L]=v.useState(null),R=tt(t,ce=>k(ce)),[M,P]=v.useState(null),[F,Y]=v.useState(null),U=np(r),[q,re]=v.useState(!1),W=v.useRef(!1);v.useEffect(()=>{if(_)return $m(_)},[_]),zm();const ne=v.useCallback(ce=>{const[ge,...Te]=U().map(Me=>Me.ref.current),[be]=Te.slice(-1),Se=document.activeElement;for(const Me of ce)if(Me===Se||(Me==null||Me.scrollIntoView({block:"nearest"}),Me===ge&&D&&(D.scrollTop=0),Me===be&&D&&(D.scrollTop=D.scrollHeight),Me==null||Me.focus(),document.activeElement!==Se))return},[U,D]),oe=v.useCallback(()=>ne([M,_]),[ne,M,_]);v.useEffect(()=>{q&&oe()},[q,oe]);const{onOpenChange:ae,triggerPointerDownPosRef:J}=E;v.useEffect(()=>{if(_){let ce={x:0,y:0};const ge=be=>{var Se,Me;ce={x:Math.abs(Math.round(be.pageX)-(((Se=J.current)==null?void 0:Se.x)??0)),y:Math.abs(Math.round(be.pageY)-(((Me=J.current)==null?void 0:Me.y)??0))}},Te=be=>{ce.x<=10&&ce.y<=10?be.preventDefault():_.contains(be.target)||ae(!1),document.removeEventListener("pointermove",ge),J.current=null};return J.current!==null&&(document.addEventListener("pointermove",ge),document.addEventListener("pointerup",Te,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ge),document.removeEventListener("pointerup",Te,{capture:!0})}}},[_,ae,J]),v.useEffect(()=>{const ce=()=>ae(!1);return window.addEventListener("blur",ce),window.addEventListener("resize",ce),()=>{window.removeEventListener("blur",ce),window.removeEventListener("resize",ce)}},[ae]);const[he,ye]=G3(ce=>{const ge=U().filter(Se=>!Se.disabled),Te=ge.find(Se=>Se.ref.current===document.activeElement),be=X3(ge,ce,Te);be&&setTimeout(()=>be.ref.current.focus())}),H=v.useCallback((ce,ge,Te)=>{const be=!W.current&&!Te;(E.value!==void 0&&E.value===ge||be)&&(P(ce),be&&(W.current=!0))},[E.value]),ee=v.useCallback(()=>_==null?void 0:_.focus(),[_]),X=v.useCallback((ce,ge,Te)=>{const be=!W.current&&!Te;(E.value!==void 0&&E.value===ge||be)&&Y(ce)},[E.value]),te=s==="popper"?u0:I3,se=te===u0?{side:u,sideOffset:f,align:p,alignOffset:x,arrowPadding:w,collisionBoundary:b,collisionPadding:j,sticky:N,hideWhenDetached:C,avoidCollisions:T}:{};return n.jsx(k3,{scope:r,content:_,viewport:D,onViewportChange:L,itemRefCallback:H,selectedItem:M,onItemLeave:ee,itemTextRefCallback:X,focusSelectedItem:oe,selectedItemText:F,position:s,isPositioned:q,searchRef:he,children:n.jsx(Uu,{as:JU,allowPinchZoom:!0,children:n.jsx(zu,{asChild:!0,trapped:E.open,onMountAutoFocus:ce=>{ce.preventDefault()},onUnmountAutoFocus:Re(a,ce=>{var ge;(ge=E.trigger)==null||ge.focus({preventScroll:!0}),ce.preventDefault()}),children:n.jsx(ul,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:ce=>ce.preventDefault(),onDismiss:()=>E.onOpenChange(!1),children:n.jsx(te,{role:"listbox",id:E.contentId,"data-state":E.open?"open":"closed",dir:E.dir,onContextMenu:ce=>ce.preventDefault(),...S,...se,onPlaced:()=>re(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...S.style},onKeyDown:Re(S.onKeyDown,ce=>{const ge=ce.ctrlKey||ce.altKey||ce.metaKey;if(ce.key==="Tab"&&ce.preventDefault(),!ge&&ce.key.length===1&&ye(ce.key),["ArrowUp","ArrowDown","Home","End"].includes(ce.key)){let be=U().filter(Se=>!Se.disabled).map(Se=>Se.ref.current);if(["ArrowUp","End"].includes(ce.key)&&(be=be.slice().reverse()),["ArrowUp","ArrowDown"].includes(ce.key)){const Se=ce.target,Me=be.indexOf(Se);be=be.slice(Me+1)}setTimeout(()=>ne(be)),ce.preventDefault()}})})})})})})});T3.displayName=ZU;var e$="SelectItemAlignedPosition",I3=v.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:s,...a}=e,o=oo(al,r),c=lo(al,r),[u,f]=v.useState(null),[p,x]=v.useState(null),w=tt(t,R=>x(R)),b=np(r),j=v.useRef(!1),N=v.useRef(!0),{viewport:C,selectedItem:T,selectedItemText:S,focusSelectedItem:E}=c,_=v.useCallback(()=>{if(o.trigger&&o.valueNode&&u&&p&&C&&T&&S){const R=o.trigger.getBoundingClientRect(),M=p.getBoundingClientRect(),P=o.valueNode.getBoundingClientRect(),F=S.getBoundingClientRect();if(o.dir!=="rtl"){const Se=F.left-M.left,Me=P.left-Se,ue=R.left-Me,We=R.width+ue,Ee=Math.max(We,M.width),Je=window.innerWidth-Hs,_e=vu(Me,[Hs,Math.max(Hs,Je-Ee)]);u.style.minWidth=We+"px",u.style.left=_e+"px"}else{const Se=M.right-F.right,Me=window.innerWidth-P.right-Se,ue=window.innerWidth-R.right-Me,We=R.width+ue,Ee=Math.max(We,M.width),Je=window.innerWidth-Hs,_e=vu(Me,[Hs,Math.max(Hs,Je-Ee)]);u.style.minWidth=We+"px",u.style.right=_e+"px"}const Y=b(),U=window.innerHeight-Hs*2,q=C.scrollHeight,re=window.getComputedStyle(p),W=parseInt(re.borderTopWidth,10),ne=parseInt(re.paddingTop,10),oe=parseInt(re.borderBottomWidth,10),ae=parseInt(re.paddingBottom,10),J=W+ne+q+ae+oe,he=Math.min(T.offsetHeight*5,J),ye=window.getComputedStyle(C),H=parseInt(ye.paddingTop,10),ee=parseInt(ye.paddingBottom,10),X=R.top+R.height/2-Hs,te=U-X,se=T.offsetHeight/2,ce=T.offsetTop+se,ge=W+ne+ce,Te=J-ge;if(ge<=X){const Se=Y.length>0&&T===Y[Y.length-1].ref.current;u.style.bottom="0px";const Me=p.clientHeight-C.offsetTop-C.offsetHeight,ue=Math.max(te,se+(Se?ee:0)+Me+oe),We=ge+ue;u.style.height=We+"px"}else{const Se=Y.length>0&&T===Y[0].ref.current;u.style.top="0px";const ue=Math.max(X,W+C.offsetTop+(Se?H:0)+se)+Te;u.style.height=ue+"px",C.scrollTop=ge-X+C.offsetTop}u.style.margin=`${Hs}px 0`,u.style.minHeight=he+"px",u.style.maxHeight=U+"px",s==null||s(),requestAnimationFrame(()=>j.current=!0)}},[b,o.trigger,o.valueNode,u,p,C,T,S,o.dir,s]);Rr(()=>_(),[_]);const[k,D]=v.useState();Rr(()=>{p&&D(window.getComputedStyle(p).zIndex)},[p]);const L=v.useCallback(R=>{R&&N.current===!0&&(_(),E==null||E(),N.current=!1)},[_,E]);return n.jsx(r$,{scope:r,contentWrapper:u,shouldExpandOnScrollRef:j,onScrollButtonChange:L,children:n.jsx("div",{ref:f,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:n.jsx(Ve.div,{...a,ref:w,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});I3.displayName=e$;var t$="SelectPopperPosition",u0=v.forwardRef((e,t)=>{const{__scopeSelect:r,align:s="start",collisionPadding:a=Hs,...o}=e,c=sp(r);return n.jsx(Cm,{...c,...o,ref:t,align:s,collisionPadding:a,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});u0.displayName=t$;var[r$,jv]=Qc(al,{}),h0="SelectViewport",R3=v.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:s,...a}=e,o=lo(h0,r),c=jv(h0,r),u=tt(t,o.onViewportChange),f=v.useRef(0);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),n.jsx(rp.Slot,{scope:r,children:n.jsx(Ve.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Re(a.onScroll,p=>{const x=p.currentTarget,{contentWrapper:w,shouldExpandOnScrollRef:b}=c;if(b!=null&&b.current&&w){const j=Math.abs(f.current-x.scrollTop);if(j>0){const N=window.innerHeight-Hs*2,C=parseFloat(w.style.minHeight),T=parseFloat(w.style.height),S=Math.max(C,T);if(S<N){const E=S+j,_=Math.min(N,E),k=E-_;w.style.height=_+"px",w.style.bottom==="0px"&&(x.scrollTop=k>0?k:0,w.style.justifyContent="flex-end")}}}f.current=x.scrollTop})})})]})});R3.displayName=h0;var P3="SelectGroup",[n$,s$]=Qc(P3),a$=v.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,a=hn();return n.jsx(n$,{scope:r,id:a,children:n.jsx(Ve.div,{role:"group","aria-labelledby":a,...s,ref:t})})});a$.displayName=P3;var O3="SelectLabel",D3=v.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,a=s$(O3,r);return n.jsx(Ve.div,{id:a.id,...s,ref:t})});D3.displayName=O3;var Qf="SelectItem",[i$,M3]=Qc(Qf),L3=v.forwardRef((e,t)=>{const{__scopeSelect:r,value:s,disabled:a=!1,textValue:o,...c}=e,u=oo(Qf,r),f=lo(Qf,r),p=u.value===s,[x,w]=v.useState(o??""),[b,j]=v.useState(!1),N=tt(t,E=>{var _;return(_=f.itemRefCallback)==null?void 0:_.call(f,E,s,a)}),C=hn(),T=v.useRef("touch"),S=()=>{a||(u.onValueChange(s),u.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return n.jsx(i$,{scope:r,value:s,disabled:a,textId:C,isSelected:p,onItemTextChange:v.useCallback(E=>{w(_=>_||((E==null?void 0:E.textContent)??"").trim())},[]),children:n.jsx(rp.ItemSlot,{scope:r,value:s,disabled:a,textValue:x,children:n.jsx(Ve.div,{role:"option","aria-labelledby":C,"data-highlighted":b?"":void 0,"aria-selected":p&&b,"data-state":p?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...c,ref:N,onFocus:Re(c.onFocus,()=>j(!0)),onBlur:Re(c.onBlur,()=>j(!1)),onClick:Re(c.onClick,()=>{T.current!=="mouse"&&S()}),onPointerUp:Re(c.onPointerUp,()=>{T.current==="mouse"&&S()}),onPointerDown:Re(c.onPointerDown,E=>{T.current=E.pointerType}),onPointerMove:Re(c.onPointerMove,E=>{var _;T.current=E.pointerType,a?(_=f.onItemLeave)==null||_.call(f):T.current==="mouse"&&E.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Re(c.onPointerLeave,E=>{var _;E.currentTarget===document.activeElement&&((_=f.onItemLeave)==null||_.call(f))}),onKeyDown:Re(c.onKeyDown,E=>{var k;((k=f.searchRef)==null?void 0:k.current)!==""&&E.key===" "||(WU.includes(E.key)&&S(),E.key===" "&&E.preventDefault())})})})})});L3.displayName=Qf;var Ed="SelectItemText",F3=v.forwardRef((e,t)=>{const{__scopeSelect:r,className:s,style:a,...o}=e,c=oo(Ed,r),u=lo(Ed,r),f=M3(Ed,r),p=KU(Ed,r),[x,w]=v.useState(null),b=tt(t,S=>w(S),f.onItemTextChange,S=>{var E;return(E=u.itemTextRefCallback)==null?void 0:E.call(u,S,f.value,f.disabled)}),j=x==null?void 0:x.textContent,N=v.useMemo(()=>n.jsx("option",{value:f.value,disabled:f.disabled,children:j},f.value),[f.disabled,f.value,j]),{onNativeOptionAdd:C,onNativeOptionRemove:T}=p;return Rr(()=>(C(N),()=>T(N)),[C,T,N]),n.jsxs(n.Fragment,{children:[n.jsx(Ve.span,{id:f.textId,...o,ref:b}),f.isSelected&&c.valueNode&&!c.valueNodeHasChildren?dl.createPortal(o.children,c.valueNode):null]})});F3.displayName=Ed;var B3="SelectItemIndicator",z3=v.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e;return M3(B3,r).isSelected?n.jsx(Ve.span,{"aria-hidden":!0,...s,ref:t}):null});z3.displayName=B3;var f0="SelectScrollUpButton",U3=v.forwardRef((e,t)=>{const r=lo(f0,e.__scopeSelect),s=jv(f0,e.__scopeSelect),[a,o]=v.useState(!1),c=tt(t,s.onScrollButtonChange);return Rr(()=>{if(r.viewport&&r.isPositioned){let u=function(){const p=f.scrollTop>0;o(p)};const f=r.viewport;return u(),f.addEventListener("scroll",u),()=>f.removeEventListener("scroll",u)}},[r.viewport,r.isPositioned]),a?n.jsx(V3,{...e,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:f}=r;u&&f&&(u.scrollTop=u.scrollTop-f.offsetHeight)}}):null});U3.displayName=f0;var m0="SelectScrollDownButton",$3=v.forwardRef((e,t)=>{const r=lo(m0,e.__scopeSelect),s=jv(m0,e.__scopeSelect),[a,o]=v.useState(!1),c=tt(t,s.onScrollButtonChange);return Rr(()=>{if(r.viewport&&r.isPositioned){let u=function(){const p=f.scrollHeight-f.clientHeight,x=Math.ceil(f.scrollTop)<p;o(x)};const f=r.viewport;return u(),f.addEventListener("scroll",u),()=>f.removeEventListener("scroll",u)}},[r.viewport,r.isPositioned]),a?n.jsx(V3,{...e,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:f}=r;u&&f&&(u.scrollTop=u.scrollTop+f.offsetHeight)}}):null});$3.displayName=m0;var V3=v.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:s,...a}=e,o=lo("SelectScrollButton",r),c=v.useRef(null),u=np(r),f=v.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return v.useEffect(()=>()=>f(),[f]),Rr(()=>{var x;const p=u().find(w=>w.ref.current===document.activeElement);(x=p==null?void 0:p.ref.current)==null||x.scrollIntoView({block:"nearest"})},[u]),n.jsx(Ve.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Re(a.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(s,50))}),onPointerMove:Re(a.onPointerMove,()=>{var p;(p=o.onItemLeave)==null||p.call(o),c.current===null&&(c.current=window.setInterval(s,50))}),onPointerLeave:Re(a.onPointerLeave,()=>{f()})})}),o$="SelectSeparator",q3=v.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e;return n.jsx(Ve.div,{"aria-hidden":!0,...s,ref:t})});q3.displayName=o$;var p0="SelectArrow",l$=v.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,a=sp(r),o=oo(p0,r),c=lo(p0,r);return o.open&&c.position==="popper"?n.jsx(Em,{...a,...s,ref:t}):null});l$.displayName=p0;var c$="SelectBubbleInput",W3=v.forwardRef(({__scopeSelect:e,value:t,...r},s)=>{const a=v.useRef(null),o=tt(s,a),c=Xu(t);return v.useEffect(()=>{const u=a.current;if(!u)return;const f=window.HTMLSelectElement.prototype,x=Object.getOwnPropertyDescriptor(f,"value").set;if(c!==t&&x){const w=new Event("change",{bubbles:!0});x.call(u,t),u.dispatchEvent(w)}},[c,t]),n.jsx(Ve.select,{...r,style:{...tj,...r.style},ref:o,defaultValue:t})});W3.displayName=c$;function H3(e){return e===""||e===void 0}function G3(e){const t=Er(e),r=v.useRef(""),s=v.useRef(0),a=v.useCallback(c=>{const u=r.current+c;t(u),function f(p){r.current=p,window.clearTimeout(s.current),p!==""&&(s.current=window.setTimeout(()=>f(""),1e3))}(u)},[t]),o=v.useCallback(()=>{r.current="",window.clearTimeout(s.current)},[]);return v.useEffect(()=>()=>window.clearTimeout(s.current),[]),[r,a,o]}function X3(e,t,r){const a=t.length>1&&Array.from(t).every(p=>p===t[0])?t[0]:t,o=r?e.indexOf(r):-1;let c=d$(e,Math.max(o,0));a.length===1&&(c=c.filter(p=>p!==r));const f=c.find(p=>p.textValue.toLowerCase().startsWith(a.toLowerCase()));return f!==r?f:void 0}function d$(e,t){return e.map((r,s)=>e[(t+s)%e.length])}var u$=b3,K3=N3,h$=C3,f$=E3,m$=S3,Y3=A3,p$=R3,Q3=D3,Z3=L3,g$=F3,x$=z3,J3=U3,eA=$3,tA=q3;const ea=u$,ta=h$,As=v.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(K3,{ref:s,className:Fe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,n.jsx(f$,{asChild:!0,children:n.jsx(E1,{className:"h-4 w-4 opacity-50"})})]}));As.displayName=K3.displayName;const rA=v.forwardRef(({className:e,...t},r)=>n.jsx(J3,{ref:r,className:Fe("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(T8,{className:"h-4 w-4"})}));rA.displayName=J3.displayName;const nA=v.forwardRef(({className:e,...t},r)=>n.jsx(eA,{ref:r,className:Fe("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(E1,{className:"h-4 w-4"})}));nA.displayName=eA.displayName;const ks=v.forwardRef(({className:e,children:t,position:r="popper",...s},a)=>n.jsx(m$,{children:n.jsxs(Y3,{ref:a,className:Fe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...s,children:[n.jsx(rA,{}),n.jsx(p$,{className:Fe("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),n.jsx(nA,{})]})}));ks.displayName=Y3.displayName;const v$=v.forwardRef(({className:e,...t},r)=>n.jsx(Q3,{ref:r,className:Fe("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));v$.displayName=Q3.displayName;const Ht=v.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(Z3,{ref:s,className:Fe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(x$,{children:n.jsx(Yn,{className:"h-4 w-4"})})}),n.jsx(g$,{children:t})]}));Ht.displayName=Z3.displayName;const w$=v.forwardRef(({className:e,...t},r)=>n.jsx(tA,{ref:r,className:Fe("-mx-1 my-1 h-px bg-muted",e),...t}));w$.displayName=tA.displayName;function y$(){const{user:e}=bt(),[t,r]=v.useState([]),[s,a]=v.useState([]),[o,c]=v.useState(!0),[u,f]=v.useState(null);v.useEffect(()=>{e&&p()},[e]);const p=async()=>{if(e)try{c(!0);const{data:j,error:N}=await $.from("organizers").select("id").eq("user_id",e.id).single();if(N)throw N;if(!j)return;f(j.id);const{data:C,error:T}=await $.from("organizer_photos").select("*").eq("organizer_id",j.id).eq("is_active",!0).order("created_at",{ascending:!1});if(T)throw T;r(C||[]),await x(C||[])}catch(j){console.error("Error fetching photos:",j)}finally{c(!1)}},x=async j=>{const N={},C=[...new Set(j.map(S=>S.event_id).filter(Boolean))],T={};if(C.length>0){const{data:S}=await $.from("events").select("id, title").in("id",C);S&&S.forEach(E=>{T[E.id]=E.title})}j.forEach(S=>{const E=S.event_id||"no-event";N[E]||(N[E]={sessionName:S.session_name||"Sem sessão",eventName:S.event_id?T[S.event_id]||"Evento":"Sem evento",photos:[],date:new Date(S.created_at).toLocaleDateString("pt-BR"),eventId:S.event_id}),N[E].photos.push(S)}),a(Object.values(N))};return{photos:t,photoSessions:s,loading:o,uploadPhotos:async(j,N)=>{if(!u||!e)return G.error("Organizador não encontrado"),!1;try{for(let C=0;C<j.length;C++){const T=j[C],S=T.name.split(".").pop(),E=`${e.id}/photos/${Date.now()}_${C}.${S}`,{error:_}=await $.storage.from("user-uploads").upload(E,T,{upsert:!0});if(_){console.error("Error uploading file:",_),G.error(`Erro ao fazer upload da foto ${C+1}`);continue}const{data:{publicUrl:k}}=$.storage.from("user-uploads").getPublicUrl(E),{error:D}=await $.from("organizer_photos").insert({organizer_id:u,photo_url:k,caption:T.name,event_id:N});D&&(console.error("Error saving photo to database:",D),G.error(`Erro ao salvar foto ${C+1}`))}return G.success("Fotos enviadas com sucesso!"),await p(),!0}catch(C){return console.error("Error:",C),G.error("Erro ao fazer upload das fotos"),!1}},deletePhoto:async j=>{try{const{error:N}=await $.from("organizer_photos").update({is_active:!1}).eq("id",j);if(N)throw N;G.success("Foto removida com sucesso!"),await p()}catch(N){console.error("Error deleting photo:",N),G.error("Erro ao remover foto")}},refreshPhotos:p}}const Ne=v.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Fe("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Ne.displayName="Card";const qe=v.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Fe("flex flex-col space-y-1.5 p-6",e),...t}));qe.displayName="CardHeader";const He=v.forwardRef(({className:e,...t},r)=>n.jsx("h3",{ref:r,className:Fe("text-2xl font-semibold leading-none tracking-tight",e),...t}));He.displayName="CardTitle";const Jr=v.forwardRef(({className:e,...t},r)=>n.jsx("p",{ref:r,className:Fe("text-sm text-muted-foreground",e),...t}));Jr.displayName="CardDescription";const Ce=v.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Fe("p-6 pt-0",e),...t}));Ce.displayName="CardContent";const b$=v.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Fe("flex items-center p-6 pt-0",e),...t}));b$.displayName="CardFooter";/*! Capacitor: https://capacitorjs.com/ - MIT License */var Oc;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(Oc||(Oc={}));class kg extends Error{constructor(t,r,s){super(t),this.message=t,this.code=r,this.data=s}}const _$=e=>{var t,r;return e!=null&&e.androidBridge?"android":!((r=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||r===void 0)&&r.bridge?"ios":"web"},N$=e=>{const t=e.CapacitorCustomPlatform||null,r=e.Capacitor||{},s=r.Plugins=r.Plugins||{},a=()=>t!==null?t.name:_$(e),o=()=>a()!=="web",c=w=>{const b=p.get(w);return!!(b!=null&&b.platforms.has(a())||u(w))},u=w=>{var b;return(b=r.PluginHeaders)===null||b===void 0?void 0:b.find(j=>j.name===w)},f=w=>e.console.error(w),p=new Map,x=(w,b={})=>{const j=p.get(w);if(j)return console.warn(`Capacitor plugin "${w}" already registered. Cannot register plugins twice.`),j.proxy;const N=a(),C=u(w);let T;const S=async()=>(!T&&N in b?T=typeof b[N]=="function"?T=await b[N]():T=b[N]:t!==null&&!T&&"web"in b&&(T=typeof b.web=="function"?T=await b.web():T=b.web),T),E=(M,P)=>{var F,Y;if(C){const U=C==null?void 0:C.methods.find(q=>P===q.name);if(U)return U.rtype==="promise"?q=>r.nativePromise(w,P.toString(),q):(q,re)=>r.nativeCallback(w,P.toString(),q,re);if(M)return(F=M[P])===null||F===void 0?void 0:F.bind(M)}else{if(M)return(Y=M[P])===null||Y===void 0?void 0:Y.bind(M);throw new kg(`"${w}" plugin is not implemented on ${N}`,Oc.Unimplemented)}},_=M=>{let P;const F=(...Y)=>{const U=S().then(q=>{const re=E(q,M);if(re){const W=re(...Y);return P=W==null?void 0:W.remove,W}else throw new kg(`"${w}.${M}()" is not implemented on ${N}`,Oc.Unimplemented)});return M==="addListener"&&(U.remove=async()=>P()),U};return F.toString=()=>`${M.toString()}() { [capacitor code] }`,Object.defineProperty(F,"name",{value:M,writable:!1,configurable:!1}),F},k=_("addListener"),D=_("removeListener"),L=(M,P)=>{const F=k({eventName:M},P),Y=async()=>{const q=await F;D({eventName:M,callbackId:q},P)},U=new Promise(q=>F.then(()=>q({remove:Y})));return U.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await Y()},U},R=new Proxy({},{get(M,P){switch(P){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return C?L:k;case"removeListener":return D;default:return _(P)}}});return s[w]=R,p.set(w,{name:w,proxy:R,platforms:new Set([...Object.keys(b),...C?[N]:[]])}),R};return r.convertFileSrc||(r.convertFileSrc=w=>w),r.getPlatform=a,r.handleError=f,r.isNativePlatform=o,r.isPluginAvailable=c,r.registerPlugin=x,r.Exception=kg,r.DEBUG=!!r.DEBUG,r.isLoggingEnabled=!!r.isLoggingEnabled,r},j$=e=>e.Capacitor=N$(e),Dc=j$(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Cv=Dc.registerPlugin;class sA{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,r){let s=!1;this.listeners[t]||(this.listeners[t]=[],s=!0),this.listeners[t].push(r);const o=this.windowListeners[t];o&&!o.registered&&this.addWindowListener(o),s&&this.sendRetainedArgumentsForEvent(t);const c=async()=>this.removeListener(t,r);return Promise.resolve({remove:c})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,r,s){const a=this.listeners[t];if(!a){if(s){let o=this.retainedEventArguments[t];o||(o=[]),o.push(r),this.retainedEventArguments[t]=o}return}a.forEach(o=>o(r))}hasListeners(t){var r;return!!(!((r=this.listeners[t])===null||r===void 0)&&r.length)}registerWindowListener(t,r){this.windowListeners[r]={registered:!1,windowEventName:t,pluginEventName:r,handler:s=>{this.notifyListeners(r,s)}}}unimplemented(t="not implemented"){return new Dc.Exception(t,Oc.Unimplemented)}unavailable(t="not available"){return new Dc.Exception(t,Oc.Unavailable)}async removeListener(t,r){const s=this.listeners[t];if(!s)return;const a=s.indexOf(r);this.listeners[t].splice(a,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const r=this.retainedEventArguments[t];r&&(delete this.retainedEventArguments[t],r.forEach(s=>{this.notifyListeners(t,s)}))}}const Hb=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Gb=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class C$ extends sA{async getCookies(){const t=document.cookie,r={};return t.split(";").forEach(s=>{if(s.length<=0)return;let[a,o]=s.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=Gb(a).trim(),o=Gb(o).trim(),r[a]=o}),r}async setCookie(t){try{const r=Hb(t.key),s=Hb(t.value),a=`; expires=${(t.expires||"").replace("expires=","")}`,o=(t.path||"/").replace("path=",""),c=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${r}=${s||""}${a}; path=${o}; ${c};`}catch(r){return Promise.reject(r)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const r of t)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}Cv("CapacitorCookies",{web:()=>new C$});const E$=async e=>new Promise((t,r)=>{const s=new FileReader;s.onload=()=>{const a=s.result;t(a.indexOf(",")>=0?a.split(",")[1]:a)},s.onerror=a=>r(a),s.readAsDataURL(e)}),S$=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(a=>a.toLocaleLowerCase()).reduce((a,o,c)=>(a[o]=e[t[c]],a),{})},A$=(e,t=!0)=>e?Object.entries(e).reduce((s,a)=>{const[o,c]=a;let u,f;return Array.isArray(c)?(f="",c.forEach(p=>{u=t?encodeURIComponent(p):p,f+=`${o}=${u}&`}),f.slice(0,-1)):(u=t?encodeURIComponent(c):c,f=`${o}=${u}`),`${s}&${f}`},"").substr(1):null,k$=(e,t={})=>{const r=Object.assign({method:e.method||"GET",headers:e.headers},t),a=S$(e.headers)["content-type"]||"";if(typeof e.data=="string")r.body=e.data;else if(a.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[c,u]of Object.entries(e.data||{}))o.set(c,u);r.body=o.toString()}else if(a.includes("multipart/form-data")||e.data instanceof FormData){const o=new FormData;if(e.data instanceof FormData)e.data.forEach((u,f)=>{o.append(f,u)});else for(const u of Object.keys(e.data))o.append(u,e.data[u]);r.body=o;const c=new Headers(r.headers);c.delete("content-type"),r.headers=c}else(a.includes("application/json")||typeof e.data=="object")&&(r.body=JSON.stringify(e.data));return r};class T$ extends sA{async request(t){const r=k$(t,t.webFetchExtra),s=A$(t.params,t.shouldEncodeUrlParams),a=s?`${t.url}?${s}`:t.url,o=await fetch(a,r),c=o.headers.get("content-type")||"";let{responseType:u="text"}=o.ok?t:{};c.includes("application/json")&&(u="json");let f,p;switch(u){case"arraybuffer":case"blob":p=await o.blob(),f=await E$(p);break;case"json":f=await o.json();break;case"document":case"text":default:f=await o.text()}const x={};return o.headers.forEach((w,b)=>{x[b]=w}),{data:f,headers:x,status:o.status,url:o.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}Cv("CapacitorHttp",{web:()=>new T$});var Xb;(function(e){e.Aztec="AZTEC",e.Codabar="CODABAR",e.Code39="CODE_39",e.Code93="CODE_93",e.Code128="CODE_128",e.DataMatrix="DATA_MATRIX",e.Ean8="EAN_8",e.Ean13="EAN_13",e.Itf="ITF",e.Pdf417="PDF_417",e.QrCode="QR_CODE",e.UpcA="UPC_A",e.UpcE="UPC_E"})(Xb||(Xb={}));var Kb;(function(e){e.CalendarEvent="CALENDAR_EVENT",e.ContactInfo="CONTACT_INFO",e.DriversLicense="DRIVERS_LICENSE",e.Email="EMAIL",e.Geo="GEO",e.Isbn="ISBN",e.Phone="PHONE",e.Product="PRODUCT",e.Sms="SMS",e.Text="TEXT",e.Url="URL",e.Wifi="WIFI",e.Unknown="UNKNOWN"})(Kb||(Kb={}));var Yb;(function(e){e[e["640x480"]=0]="640x480",e[e["1280x720"]=1]="1280x720",e[e["1920x1080"]=2]="1920x1080",e[e["3840x2160"]=3]="3840x2160"})(Yb||(Yb={}));var Qb;(function(e){e.Front="FRONT",e.Back="BACK"})(Qb||(Qb={}));var Zb;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.PENDING=1]="PENDING",e[e.DOWNLOADING=2]="DOWNLOADING",e[e.CANCELED=3]="CANCELED",e[e.COMPLETED=4]="COMPLETED",e[e.FAILED=5]="FAILED",e[e.INSTALLING=6]="INSTALLING",e[e.DOWNLOAD_PAUSED=7]="DOWNLOAD_PAUSED"})(Zb||(Zb={}));var Jb;(function(e){e[e.HOME=0]="HOME",e[e.UNKNOWN=1]="UNKNOWN",e[e.WORK=2]="WORK"})(Jb||(Jb={}));var e2;(function(e){e[e.HOME=0]="HOME",e[e.UNKNOWN=1]="UNKNOWN",e[e.WORK=2]="WORK"})(e2||(e2={}));var t2;(function(e){e[e.FAX=0]="FAX",e[e.HOME=1]="HOME",e[e.MOBILE=2]="MOBILE",e[e.UNKNOWN=3]="UNKNOWN",e[e.WORK=4]="WORK"})(t2||(t2={}));var r2;(function(e){e[e.OPEN=1]="OPEN",e[e.WEP=2]="WEP",e[e.WPA=3]="WPA"})(r2||(r2={}));const n2=Cv("BarcodeScanner",{web:()=>Gc(()=>import("./web-CXL-FMV6.js"),[],import.meta.url).then(e=>new e.BarcodeScannerWeb)});var Ye;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ye||(Ye={}));var s2=new Map([[Ye.QR_CODE,"QR_CODE"],[Ye.AZTEC,"AZTEC"],[Ye.CODABAR,"CODABAR"],[Ye.CODE_39,"CODE_39"],[Ye.CODE_93,"CODE_93"],[Ye.CODE_128,"CODE_128"],[Ye.DATA_MATRIX,"DATA_MATRIX"],[Ye.MAXICODE,"MAXICODE"],[Ye.ITF,"ITF"],[Ye.EAN_13,"EAN_13"],[Ye.EAN_8,"EAN_8"],[Ye.PDF_417,"PDF_417"],[Ye.RSS_14,"RSS_14"],[Ye.RSS_EXPANDED,"RSS_EXPANDED"],[Ye.UPC_A,"UPC_A"],[Ye.UPC_E,"UPC_E"],[Ye.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),a2;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(a2||(a2={}));function I$(e){return Object.values(Ye).includes(e)}var Zf;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Zf||(Zf={}));var R$=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[Zf.SCAN_TYPE_CAMERA,Zf.SCAN_TYPE_FILE],e}(),aA=function(){function e(t,r){this.format=t,this.formatName=r}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!s2.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,s2.get(t))},e}(),i2=function(){function e(){}return e.createFromText=function(t){var r={text:t};return{decodedText:t,result:r}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),g0;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(g0||(g0={}));var P$=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:g0.UNKWOWN_ERROR}},e}(),O$=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,r){(this.verbose||r===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function Ba(e){return typeof e>"u"||e===null}var Jl=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),iA=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,r){if(typeof t!="object"){var s=typeof t;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(s,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],o=new Set(a),c=Object.keys(t),u=0,f=c;u<f.length;u++){var p=f[u];if(o.has(p))return r.logError("".concat(p," is not supported videoConstaints."),!0),!1}return!0},e}(),x0={exports:{}};(function(e,t){(function(r,s){s(t)})(cn,function(r){function s(B){return B==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,i){B.__proto__=i}||function(B,i){for(var l in i)i.hasOwnProperty(l)&&(B[l]=i[l])};function o(B,i){a(B,i);function l(){this.constructor=B}B.prototype=i===null?Object.create(i):(l.prototype=i.prototype,new l)}function c(B,i){var l=Object.setPrototypeOf;l?l(B,i):B.__proto__=i}function u(B,i){i===void 0&&(i=B.constructor);var l=Error.captureStackTrace;l&&l(B,i)}var f=function(B){o(i,B);function i(l){var d=this.constructor,h=B.call(this,l)||this;return Object.defineProperty(h,"name",{value:d.name,enumerable:!1}),c(h,d.prototype),u(h),h}return i}(Error);class p extends f{constructor(i=void 0){super(i),this.message=i}getKind(){return this.constructor.kind}}p.kind="Exception";class x extends p{}x.kind="ArgumentException";class w extends p{}w.kind="IllegalArgumentException";class b{constructor(i){if(this.binarizer=i,i===null)throw new w("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,l){return this.binarizer.getBlackRow(i,l)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,l,d,h){const m=this.binarizer.getLuminanceSource().crop(i,l,d,h);return new b(this.binarizer.createBinarizer(m))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new b(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new b(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class j extends p{static getChecksumInstance(){return new j}}j.kind="ChecksumException";class N{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class C{static arraycopy(i,l,d,h,m){for(;m--;)d[h++]=i[l++]}static currentTimeMillis(){return Date.now()}}class T extends p{}T.kind="IndexOutOfBoundsException";class S extends T{constructor(i=void 0,l=void 0){super(l),this.index=i,this.message=l}}S.kind="ArrayIndexOutOfBoundsException";class E{static fill(i,l){for(let d=0,h=i.length;d<h;d++)i[d]=l}static fillWithin(i,l,d,h){E.rangeCheck(i.length,l,d);for(let m=l;m<d;m++)i[m]=h}static rangeCheck(i,l,d){if(l>d)throw new w("fromIndex("+l+") > toIndex("+d+")");if(l<0)throw new S(l);if(d>i)throw new S(d)}static asList(...i){return i}static create(i,l,d){return Array.from({length:i}).map(m=>Array.from({length:l}).fill(d))}static createInt32Array(i,l,d){return Array.from({length:i}).map(m=>Int32Array.from({length:l}).fill(d))}static equals(i,l){if(!i||!l||!i.length||!l.length||i.length!==l.length)return!1;for(let d=0,h=i.length;d<h;d++)if(i[d]!==l[d])return!1;return!0}static hashCode(i){if(i===null)return 0;let l=1;for(const d of i)l=31*l+d;return l}static fillUint8Array(i,l){for(let d=0;d!==i.length;d++)i[d]=l}static copyOf(i,l){return i.slice(0,l)}static copyOfUint8Array(i,l){if(i.length<=l){const d=new Uint8Array(l);return d.set(i),d}return i.slice(0,l)}static copyOfRange(i,l,d){const h=d-l,m=new Int32Array(h);return C.arraycopy(i,l,m,0,h),m}static binarySearch(i,l,d){d===void 0&&(d=E.numberComparator);let h=0,m=i.length-1;for(;h<=m;){const g=m+h>>1,y=d(l,i[g]);if(y>0)h=g+1;else if(y<0)m=g-1;else return g}return-h-1}static numberComparator(i,l){return i-l}}class _{static numberOfTrailingZeros(i){let l;if(i===0)return 32;let d=31;return l=i<<16,l!==0&&(d-=16,i=l),l=i<<8,l!==0&&(d-=8,i=l),l=i<<4,l!==0&&(d-=4,i=l),l=i<<2,l!==0&&(d-=2,i=l),d-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let l=1;return i>>>16||(l+=16,i<<=16),i>>>24||(l+=8,i<<=8),i>>>28||(l+=4,i<<=4),i>>>30||(l+=2,i<<=2),l-=i>>>31,l}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,l){return Math.trunc(i/l)}static parseInt(i,l=void 0){return parseInt(i,l)}}_.MIN_VALUE_32_BITS=-2147483648,_.MAX_VALUE=Number.MAX_SAFE_INTEGER;class k{constructor(i,l){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,l==null?this.bits=k.makeArray(i):this.bits=l)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){const l=k.makeArray(i);C.arraycopy(this.bits,0,l,0,this.bits.length),this.bits=l}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){const l=this.size;if(i>=l)return l;const d=this.bits;let h=Math.floor(i/32),m=d[h];m&=~((1<<(i&31))-1);const g=d.length;for(;m===0;){if(++h===g)return l;m=d[h]}const y=h*32+_.numberOfTrailingZeros(m);return y>l?l:y}getNextUnset(i){const l=this.size;if(i>=l)return l;const d=this.bits;let h=Math.floor(i/32),m=~d[h];m&=~((1<<(i&31))-1);const g=d.length;for(;m===0;){if(++h===g)return l;m=~d[h]}const y=h*32+_.numberOfTrailingZeros(m);return y>l?l:y}setBulk(i,l){this.bits[Math.floor(i/32)]=l}setRange(i,l){if(l<i||i<0||l>this.size)throw new w;if(l===i)return;l--;const d=Math.floor(i/32),h=Math.floor(l/32),m=this.bits;for(let g=d;g<=h;g++){const y=g>d?0:i&31,I=(2<<(g<h?31:l&31))-(1<<y);m[g]|=I}}clear(){const i=this.bits.length,l=this.bits;for(let d=0;d<i;d++)l[d]=0}isRange(i,l,d){if(l<i||i<0||l>this.size)throw new w;if(l===i)return!0;l--;const h=Math.floor(i/32),m=Math.floor(l/32),g=this.bits;for(let y=h;y<=m;y++){const A=y>h?0:i&31,O=(2<<(y<m?31:l&31))-(1<<A)&4294967295;if((g[y]&O)!==(d?O:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,l){if(l<0||l>32)throw new w("Num bits must be between 0 and 32");this.ensureCapacity(this.size+l);for(let d=l;d>0;d--)this.appendBit((i>>d-1&1)===1)}appendBitArray(i){const l=i.size;this.ensureCapacity(this.size+l);for(let d=0;d<l;d++)this.appendBit(i.get(d))}xor(i){if(this.size!==i.size)throw new w("Sizes don't match");const l=this.bits;for(let d=0,h=l.length;d<h;d++)l[d]^=i.bits[d]}toBytes(i,l,d,h){for(let m=0;m<h;m++){let g=0;for(let y=0;y<8;y++)this.get(i)&&(g|=1<<7-y),i++;l[d+m]=g}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),l=Math.floor((this.size-1)/32),d=l+1,h=this.bits;for(let m=0;m<d;m++){let g=h[m];g=g>>1&1431655765|(g&1431655765)<<1,g=g>>2&858993459|(g&858993459)<<2,g=g>>4&252645135|(g&252645135)<<4,g=g>>8&16711935|(g&16711935)<<8,g=g>>16&65535|(g&65535)<<16,i[l-m]=g}if(this.size!==d*32){const m=d*32-this.size;let g=i[0]>>>m;for(let y=1;y<d;y++){const A=i[y];g|=A<<32-m,i[y-1]=g,g=A>>>m}i[d-1]=g}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof k))return!1;const l=i;return this.size===l.size&&E.equals(this.bits,l.bits)}hashCode(){return 31*this.size+E.hashCode(this.bits)}toString(){let i="";for(let l=0,d=this.size;l<d;l++)l&7||(i+=" "),i+=this.get(l)?"X":".";return i}clone(){return new k(this.size,this.bits.slice())}}var D;(function(B){B[B.OTHER=0]="OTHER",B[B.PURE_BARCODE=1]="PURE_BARCODE",B[B.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",B[B.TRY_HARDER=3]="TRY_HARDER",B[B.CHARACTER_SET=4]="CHARACTER_SET",B[B.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",B[B.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",B[B.ASSUME_GS1=7]="ASSUME_GS1",B[B.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",B[B.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",B[B.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(D||(D={}));var L=D;class R extends p{static getFormatInstance(){return new R}}R.kind="FormatException";var M;(function(B){B[B.Cp437=0]="Cp437",B[B.ISO8859_1=1]="ISO8859_1",B[B.ISO8859_2=2]="ISO8859_2",B[B.ISO8859_3=3]="ISO8859_3",B[B.ISO8859_4=4]="ISO8859_4",B[B.ISO8859_5=5]="ISO8859_5",B[B.ISO8859_6=6]="ISO8859_6",B[B.ISO8859_7=7]="ISO8859_7",B[B.ISO8859_8=8]="ISO8859_8",B[B.ISO8859_9=9]="ISO8859_9",B[B.ISO8859_10=10]="ISO8859_10",B[B.ISO8859_11=11]="ISO8859_11",B[B.ISO8859_13=12]="ISO8859_13",B[B.ISO8859_14=13]="ISO8859_14",B[B.ISO8859_15=14]="ISO8859_15",B[B.ISO8859_16=15]="ISO8859_16",B[B.SJIS=16]="SJIS",B[B.Cp1250=17]="Cp1250",B[B.Cp1251=18]="Cp1251",B[B.Cp1252=19]="Cp1252",B[B.Cp1256=20]="Cp1256",B[B.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",B[B.UTF8=22]="UTF8",B[B.ASCII=23]="ASCII",B[B.Big5=24]="Big5",B[B.GB18030=25]="GB18030",B[B.EUC_KR=26]="EUC_KR"})(M||(M={}));class P{constructor(i,l,d,...h){this.valueIdentifier=i,this.name=d,typeof l=="number"?this.values=Int32Array.from([l]):this.values=l,this.otherEncodingNames=h,P.VALUE_IDENTIFIER_TO_ECI.set(i,this),P.NAME_TO_ECI.set(d,this);const m=this.values;for(let g=0,y=m.length;g!==y;g++){const A=m[g];P.VALUES_TO_ECI.set(A,this)}for(const g of h)P.NAME_TO_ECI.set(g,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new R("incorect value");const l=P.VALUES_TO_ECI.get(i);if(l===void 0)throw new R("incorect value");return l}static getCharacterSetECIByName(i){const l=P.NAME_TO_ECI.get(i);if(l===void 0)throw new R("incorect value");return l}equals(i){if(!(i instanceof P))return!1;const l=i;return this.getName()===l.getName()}}P.VALUE_IDENTIFIER_TO_ECI=new Map,P.VALUES_TO_ECI=new Map,P.NAME_TO_ECI=new Map,P.Cp437=new P(M.Cp437,Int32Array.from([0,2]),"Cp437"),P.ISO8859_1=new P(M.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),P.ISO8859_2=new P(M.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),P.ISO8859_3=new P(M.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),P.ISO8859_4=new P(M.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),P.ISO8859_5=new P(M.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),P.ISO8859_6=new P(M.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),P.ISO8859_7=new P(M.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),P.ISO8859_8=new P(M.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),P.ISO8859_9=new P(M.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),P.ISO8859_10=new P(M.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),P.ISO8859_11=new P(M.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),P.ISO8859_13=new P(M.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),P.ISO8859_14=new P(M.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),P.ISO8859_15=new P(M.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),P.ISO8859_16=new P(M.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),P.SJIS=new P(M.SJIS,20,"SJIS","Shift_JIS"),P.Cp1250=new P(M.Cp1250,21,"Cp1250","windows-1250"),P.Cp1251=new P(M.Cp1251,22,"Cp1251","windows-1251"),P.Cp1252=new P(M.Cp1252,23,"Cp1252","windows-1252"),P.Cp1256=new P(M.Cp1256,24,"Cp1256","windows-1256"),P.UnicodeBigUnmarked=new P(M.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),P.UTF8=new P(M.UTF8,26,"UTF8","UTF-8"),P.ASCII=new P(M.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),P.Big5=new P(M.Big5,28,"Big5"),P.GB18030=new P(M.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),P.EUC_KR=new P(M.EUC_KR,30,"EUC_KR","EUC-KR");class F extends p{}F.kind="UnsupportedOperationException";class Y{static decode(i,l){const d=this.encodingName(l);return this.customDecoder?this.customDecoder(i,d):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(d)?this.decodeFallback(i,d):new TextDecoder(d).decode(i)}static shouldDecodeOnFallback(i){return!Y.isBrowser()&&i==="ISO-8859-1"}static encode(i,l){const d=this.encodingName(l);return this.customEncoder?this.customEncoder(i,d):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof P?i:P.getCharacterSetECIByName(i)}static decodeFallback(i,l){const d=this.encodingCharacterSet(l);if(Y.isDecodeFallbackSupported(d)){let h="";for(let m=0,g=i.length;m<g;m++){let y=i[m].toString(16);y.length<2&&(y="0"+y),h+="%"+y}return decodeURIComponent(h)}if(d.equals(P.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new F(`Encoding ${this.encodingName(l)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(P.UTF8)||i.equals(P.ISO8859_1)||i.equals(P.ASCII)}static encodeFallback(i){const d=btoa(unescape(encodeURIComponent(i))).split(""),h=[];for(let m=0;m<d.length;m++)h.push(d[m].charCodeAt(0));return new Uint8Array(h)}}class U{static castAsNonUtf8Char(i,l=null){const d=l?l.getName():this.ISO88591;return Y.decode(new Uint8Array([i]),d)}static guessEncoding(i,l){if(l!=null&&l.get(L.CHARACTER_SET)!==void 0)return l.get(L.CHARACTER_SET).toString();const d=i.length;let h=!0,m=!0,g=!0,y=0,A=0,I=0,O=0,z=0,V=0,Z=0,ie=0,le=0,fe=0,ve=0;const De=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let Le=0;Le<d&&(h||m||g);Le++){const Pe=i[Le]&255;g&&(y>0?Pe&128?y--:g=!1:Pe&128&&(Pe&64?(y++,Pe&32?(y++,Pe&16?(y++,Pe&8?g=!1:O++):I++):A++):g=!1)),h&&(Pe>127&&Pe<160?h=!1:Pe>159&&(Pe<192||Pe===215||Pe===247)&&ve++),m&&(z>0?Pe<64||Pe===127||Pe>252?m=!1:z--:Pe===128||Pe===160||Pe>239?m=!1:Pe>160&&Pe<224?(V++,ie=0,Z++,Z>le&&(le=Z)):Pe>127?(z++,Z=0,ie++,ie>fe&&(fe=ie)):(Z=0,ie=0))}return g&&y>0&&(g=!1),m&&z>0&&(m=!1),g&&(De||A+I+O>0)?U.UTF8:m&&(U.ASSUME_SHIFT_JIS||le>=3||fe>=3)?U.SHIFT_JIS:h&&m?le===2&&V===2||ve*10>=d?U.SHIFT_JIS:U.ISO88591:h?U.ISO88591:m?U.SHIFT_JIS:g?U.UTF8:U.PLATFORM_DEFAULT_ENCODING}static format(i,...l){let d=-1;function h(g,y,A,I,O,z){if(g==="%%")return"%";if(l[++d]===void 0)return;g=I?parseInt(I.substr(1)):void 0;let V=O?parseInt(O.substr(1)):void 0,Z;switch(z){case"s":Z=l[d];break;case"c":Z=l[d][0];break;case"f":Z=parseFloat(l[d]).toFixed(g);break;case"p":Z=parseFloat(l[d]).toPrecision(g);break;case"e":Z=parseFloat(l[d]).toExponential(g);break;case"x":Z=parseInt(l[d]).toString(V||16);break;case"d":Z=parseFloat(parseInt(l[d],V||10).toPrecision(g)).toFixed(0);break}Z=typeof Z=="object"?JSON.stringify(Z):(+Z).toString(V);let ie=parseInt(A),le=A&&A[0]+""=="0"?"0":" ";for(;Z.length<ie;)Z=y!==void 0?Z+le:le+Z;return Z}let m=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(m,h)}static getBytes(i,l){return Y.encode(i,l)}static getCharCode(i,l=0){return i.charCodeAt(l)}static getCharAt(i){return String.fromCharCode(i)}}U.SHIFT_JIS=P.SJIS.getName(),U.GB2312="GB2312",U.ISO88591=P.ISO8859_1.getName(),U.EUC_JP="EUC_JP",U.UTF8=P.UTF8.getName(),U.PLATFORM_DEFAULT_ENCODING=U.UTF8,U.ASSUME_SHIFT_JIS=!1;class q{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=U.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,l,d){for(let h=l;l<l+d;h++)this.append(i[h]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,l){this.value=this.value.substr(0,i)+l+this.value.substr(i+1)}substring(i,l){return this.value.substring(i,l)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,l){this.value=this.value.substr(0,i)+l+this.value.substr(i+l.length)}}class re{constructor(i,l,d,h){if(this.width=i,this.height=l,this.rowSize=d,this.bits=h,l==null&&(l=i),this.height=l,i<1||l<1)throw new w("Both dimensions must be greater than 0");d==null&&(d=Math.floor((i+31)/32)),this.rowSize=d,h==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const l=i.length,d=i[0].length,h=new re(d,l);for(let m=0;m<l;m++){const g=i[m];for(let y=0;y<d;y++)g[y]&&h.set(y,m)}return h}static parseFromString(i,l,d){if(i===null)throw new w("stringRepresentation cannot be null");const h=new Array(i.length);let m=0,g=0,y=-1,A=0,I=0;for(;I<i.length;)if(i.charAt(I)===`
`||i.charAt(I)==="\r"){if(m>g){if(y===-1)y=m-g;else if(m-g!==y)throw new w("row lengths do not match");g=m,A++}I++}else if(i.substring(I,I+l.length)===l)I+=l.length,h[m]=!0,m++;else if(i.substring(I,I+d.length)===d)I+=d.length,h[m]=!1,m++;else throw new w("illegal character encountered: "+i.substring(I));if(m>g){if(y===-1)y=m-g;else if(m-g!==y)throw new w("row lengths do not match");A++}const O=new re(y,A);for(let z=0;z<m;z++)h[z]&&O.set(Math.floor(z%y),Math.floor(z/y));return O}get(i,l){const d=l*this.rowSize+Math.floor(i/32);return(this.bits[d]>>>(i&31)&1)!==0}set(i,l){const d=l*this.rowSize+Math.floor(i/32);this.bits[d]|=1<<(i&31)&4294967295}unset(i,l){const d=l*this.rowSize+Math.floor(i/32);this.bits[d]&=~(1<<(i&31)&4294967295)}flip(i,l){const d=l*this.rowSize+Math.floor(i/32);this.bits[d]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new w("input matrix dimensions do not match");const l=new k(Math.floor(this.width/32)+1),d=this.rowSize,h=this.bits;for(let m=0,g=this.height;m<g;m++){const y=m*d,A=i.getRow(m,l).getBitArray();for(let I=0;I<d;I++)h[y+I]^=A[I]}}clear(){const i=this.bits,l=i.length;for(let d=0;d<l;d++)i[d]=0}setRegion(i,l,d,h){if(l<0||i<0)throw new w("Left and top must be nonnegative");if(h<1||d<1)throw new w("Height and width must be at least 1");const m=i+d,g=l+h;if(g>this.height||m>this.width)throw new w("The region must fit inside the matrix");const y=this.rowSize,A=this.bits;for(let I=l;I<g;I++){const O=I*y;for(let z=i;z<m;z++)A[O+Math.floor(z/32)]|=1<<(z&31)&4294967295}}getRow(i,l){l==null||l.getSize()<this.width?l=new k(this.width):l.clear();const d=this.rowSize,h=this.bits,m=i*d;for(let g=0;g<d;g++)l.setBulk(g*32,h[m+g]);return l}setRow(i,l){C.arraycopy(l.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),l=this.getHeight();let d=new k(i),h=new k(i);for(let m=0,g=Math.floor((l+1)/2);m<g;m++)d=this.getRow(m,d),h=this.getRow(l-1-m,h),d.reverse(),h.reverse(),this.setRow(m,h),this.setRow(l-1-m,d)}getEnclosingRectangle(){const i=this.width,l=this.height,d=this.rowSize,h=this.bits;let m=i,g=l,y=-1,A=-1;for(let I=0;I<l;I++)for(let O=0;O<d;O++){const z=h[I*d+O];if(z!==0){if(I<g&&(g=I),I>A&&(A=I),O*32<m){let V=0;for(;!(z<<31-V&4294967295);)V++;O*32+V<m&&(m=O*32+V)}if(O*32+31>y){let V=31;for(;!(z>>>V);)V--;O*32+V>y&&(y=O*32+V)}}}return y<m||A<g?null:Int32Array.from([m,g,y-m+1,A-g+1])}getTopLeftOnBit(){const i=this.rowSize,l=this.bits;let d=0;for(;d<l.length&&l[d]===0;)d++;if(d===l.length)return null;const h=d/i;let m=d%i*32;const g=l[d];let y=0;for(;!(g<<31-y&4294967295);)y++;return m+=y,Int32Array.from([m,h])}getBottomRightOnBit(){const i=this.rowSize,l=this.bits;let d=l.length-1;for(;d>=0&&l[d]===0;)d--;if(d<0)return null;const h=Math.floor(d/i);let m=Math.floor(d%i)*32;const g=l[d];let y=31;for(;!(g>>>y);)y--;return m+=y,Int32Array.from([m,h])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof re))return!1;const l=i;return this.width===l.width&&this.height===l.height&&this.rowSize===l.rowSize&&E.equals(this.bits,l.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+E.hashCode(this.bits),i}toString(i="X ",l="  ",d=`
`){return this.buildToString(i,l,d)}buildToString(i,l,d){let h=new q;for(let m=0,g=this.height;m<g;m++){for(let y=0,A=this.width;y<A;y++)h.append(this.get(y,m)?i:l);h.append(d)}return h.toString()}clone(){return new re(this.width,this.height,this.rowSize,this.bits.slice())}}class W extends p{static getNotFoundInstance(){return new W}}W.kind="NotFoundException";class ne extends N{constructor(i){super(i),this.luminances=ne.EMPTY,this.buckets=new Int32Array(ne.LUMINANCE_BUCKETS)}getBlackRow(i,l){const d=this.getLuminanceSource(),h=d.getWidth();l==null||l.getSize()<h?l=new k(h):l.clear(),this.initArrays(h);const m=d.getRow(i,this.luminances),g=this.buckets;for(let A=0;A<h;A++)g[(m[A]&255)>>ne.LUMINANCE_SHIFT]++;const y=ne.estimateBlackPoint(g);if(h<3)for(let A=0;A<h;A++)(m[A]&255)<y&&l.set(A);else{let A=m[0]&255,I=m[1]&255;for(let O=1;O<h-1;O++){const z=m[O+1]&255;(I*4-A-z)/2<y&&l.set(O),A=I,I=z}}return l}getBlackMatrix(){const i=this.getLuminanceSource(),l=i.getWidth(),d=i.getHeight(),h=new re(l,d);this.initArrays(l);const m=this.buckets;for(let A=1;A<5;A++){const I=Math.floor(d*A/5),O=i.getRow(I,this.luminances),z=Math.floor(l*4/5);for(let V=Math.floor(l/5);V<z;V++){const Z=O[V]&255;m[Z>>ne.LUMINANCE_SHIFT]++}}const g=ne.estimateBlackPoint(m),y=i.getMatrix();for(let A=0;A<d;A++){const I=A*l;for(let O=0;O<l;O++)(y[I+O]&255)<g&&h.set(O,A)}return h}createBinarizer(i){return new ne(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const l=this.buckets;for(let d=0;d<ne.LUMINANCE_BUCKETS;d++)l[d]=0}static estimateBlackPoint(i){const l=i.length;let d=0,h=0,m=0;for(let O=0;O<l;O++)i[O]>m&&(h=O,m=i[O]),i[O]>d&&(d=i[O]);let g=0,y=0;for(let O=0;O<l;O++){const z=O-h,V=i[O]*z*z;V>y&&(g=O,y=V)}if(h>g){const O=h;h=g,g=O}if(g-h<=l/16)throw new W;let A=g-1,I=-1;for(let O=g-1;O>h;O--){const z=O-h,V=z*z*(g-O)*(d-i[O]);V>I&&(A=O,I=V)}return A<<ne.LUMINANCE_SHIFT}}ne.LUMINANCE_BITS=5,ne.LUMINANCE_SHIFT=8-ne.LUMINANCE_BITS,ne.LUMINANCE_BUCKETS=1<<ne.LUMINANCE_BITS,ne.EMPTY=Uint8ClampedArray.from([0]);class oe extends ne{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const i=this.getLuminanceSource(),l=i.getWidth(),d=i.getHeight();if(l>=oe.MINIMUM_DIMENSION&&d>=oe.MINIMUM_DIMENSION){const h=i.getMatrix();let m=l>>oe.BLOCK_SIZE_POWER;l&oe.BLOCK_SIZE_MASK&&m++;let g=d>>oe.BLOCK_SIZE_POWER;d&oe.BLOCK_SIZE_MASK&&g++;const y=oe.calculateBlackPoints(h,m,g,l,d),A=new re(l,d);oe.calculateThresholdForBlock(h,m,g,l,d,y,A),this.matrix=A}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new oe(i)}static calculateThresholdForBlock(i,l,d,h,m,g,y){const A=m-oe.BLOCK_SIZE,I=h-oe.BLOCK_SIZE;for(let O=0;O<d;O++){let z=O<<oe.BLOCK_SIZE_POWER;z>A&&(z=A);const V=oe.cap(O,2,d-3);for(let Z=0;Z<l;Z++){let ie=Z<<oe.BLOCK_SIZE_POWER;ie>I&&(ie=I);const le=oe.cap(Z,2,l-3);let fe=0;for(let De=-2;De<=2;De++){const Le=g[V+De];fe+=Le[le-2]+Le[le-1]+Le[le]+Le[le+1]+Le[le+2]}const ve=fe/25;oe.thresholdBlock(i,ie,z,ve,h,y)}}}static cap(i,l,d){return i<l?l:i>d?d:i}static thresholdBlock(i,l,d,h,m,g){for(let y=0,A=d*m+l;y<oe.BLOCK_SIZE;y++,A+=m)for(let I=0;I<oe.BLOCK_SIZE;I++)(i[A+I]&255)<=h&&g.set(l+I,d+y)}static calculateBlackPoints(i,l,d,h,m){const g=m-oe.BLOCK_SIZE,y=h-oe.BLOCK_SIZE,A=new Array(d);for(let I=0;I<d;I++){A[I]=new Int32Array(l);let O=I<<oe.BLOCK_SIZE_POWER;O>g&&(O=g);for(let z=0;z<l;z++){let V=z<<oe.BLOCK_SIZE_POWER;V>y&&(V=y);let Z=0,ie=255,le=0;for(let ve=0,De=O*h+V;ve<oe.BLOCK_SIZE;ve++,De+=h){for(let Le=0;Le<oe.BLOCK_SIZE;Le++){const Pe=i[De+Le]&255;Z+=Pe,Pe<ie&&(ie=Pe),Pe>le&&(le=Pe)}if(le-ie>oe.MIN_DYNAMIC_RANGE)for(ve++,De+=h;ve<oe.BLOCK_SIZE;ve++,De+=h)for(let Le=0;Le<oe.BLOCK_SIZE;Le++)Z+=i[De+Le]&255}let fe=Z>>oe.BLOCK_SIZE_POWER*2;if(le-ie<=oe.MIN_DYNAMIC_RANGE&&(fe=ie/2,I>0&&z>0)){const ve=(A[I-1][z]+2*A[I][z-1]+A[I-1][z-1])/4;ie<ve&&(fe=ve)}A[I][z]=fe}}return A}}oe.BLOCK_SIZE_POWER=3,oe.BLOCK_SIZE=1<<oe.BLOCK_SIZE_POWER,oe.BLOCK_SIZE_MASK=oe.BLOCK_SIZE-1,oe.MINIMUM_DIMENSION=oe.BLOCK_SIZE*5,oe.MIN_DYNAMIC_RANGE=24;class ae{constructor(i,l){this.width=i,this.height=l}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,l,d,h){throw new F("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new F("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new F("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let l=new q;for(let d=0;d<this.height;d++){const h=this.getRow(d,i);for(let m=0;m<this.width;m++){const g=h[m]&255;let y;g<64?y="#":g<128?y="+":g<192?y=".":y=" ",l.append(y)}l.append(`
`)}return l.toString()}}class J extends ae{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,l){const d=this.delegate.getRow(i,l),h=this.getWidth();for(let m=0;m<h;m++)d[m]=255-(d[m]&255);return d}getMatrix(){const i=this.delegate.getMatrix(),l=this.getWidth()*this.getHeight(),d=new Uint8ClampedArray(l);for(let h=0;h<l;h++)d[h]=255-(i[h]&255);return d}isCropSupported(){return this.delegate.isCropSupported()}crop(i,l,d,h){return new J(this.delegate.crop(i,l,d,h))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new J(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new J(this.delegate.rotateCounterClockwise45())}}class he extends ae{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=he.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const l=i.getContext("2d").getImageData(0,0,i.width,i.height);return he.toGrayscaleBuffer(l.data,i.width,i.height)}static toGrayscaleBuffer(i,l,d){const h=new Uint8ClampedArray(l*d);for(let m=0,g=0,y=i.length;m<y;m+=4,g++){let A;if(i[m+3]===0)A=255;else{const O=i[m],z=i[m+1],V=i[m+2];A=306*O+601*z+117*V+512>>10}h[g]=A}return h}getRow(i,l){if(i<0||i>=this.getHeight())throw new w("Requested row is outside the image: "+i);const d=this.getWidth(),h=i*d;return l===null?l=this.buffer.slice(h,h+d):(l.length<d&&(l=new Uint8ClampedArray(d)),l.set(this.buffer.slice(h,h+d))),l}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,l,d,h){return super.crop(i,l,d,h),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const l=this.getTempCanvasElement(),d=l.getContext("2d"),h=i*he.DEGREE_TO_RADIANS,m=this.canvas.width,g=this.canvas.height,y=Math.ceil(Math.abs(Math.cos(h))*m+Math.abs(Math.sin(h))*g),A=Math.ceil(Math.abs(Math.sin(h))*m+Math.abs(Math.cos(h))*g);return l.width=y,l.height=A,d.translate(y/2,A/2),d.rotate(h),d.drawImage(this.canvas,m/-2,g/-2),this.buffer=he.makeBufferFromCanvasImageData(l),this}invert(){return new J(this)}}he.DEGREE_TO_RADIANS=Math.PI/180;class ye{constructor(i,l,d){this.deviceId=i,this.label=l,this.kind="videoinput",this.groupId=d||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var H=(globalThis||cn||self||window||void 0)&&(globalThis||cn||self||window||void 0).__awaiter||function(B,i,l,d){function h(m){return m instanceof l?m:new l(function(g){g(m)})}return new(l||(l=Promise))(function(m,g){function y(O){try{I(d.next(O))}catch(z){g(z)}}function A(O){try{I(d.throw(O))}catch(z){g(z)}}function I(O){O.done?m(O.value):h(O.value).then(y,A)}I((d=d.apply(B,i||[])).next())})};class ee{constructor(i,l=500,d){this.reader=i,this.timeBetweenScansMillis=l,this._hints=d,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return H(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),l=[];for(const d of i){const h=d.kind==="video"?"videoinput":d.kind;if(h!=="videoinput")continue;const m=d.deviceId||d.id,g=d.label||`Video device ${l.length+1}`,y=d.groupId,A={deviceId:m,label:g,kind:h,groupId:y};l.push(A)}return l})}getVideoInputDevices(){return H(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(l=>new ye(l.deviceId,l.label))})}findDeviceById(i){return H(this,void 0,void 0,function*(){const l=yield this.listVideoInputDevices();return l?l.find(d=>d.deviceId===i):null})}decodeFromInputVideoDevice(i,l){return H(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,l)})}decodeOnceFromVideoDevice(i,l){return H(this,void 0,void 0,function*(){this.reset();let d;i?d={deviceId:{exact:i}}:d={facingMode:"environment"};const h={video:d};return yield this.decodeOnceFromConstraints(h,l)})}decodeOnceFromConstraints(i,l){return H(this,void 0,void 0,function*(){const d=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(d,l)})}decodeOnceFromStream(i,l){return H(this,void 0,void 0,function*(){this.reset();const d=yield this.attachStreamToVideo(i,l);return yield this.decodeOnce(d)})}decodeFromInputVideoDeviceContinuously(i,l,d){return H(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,l,d)})}decodeFromVideoDevice(i,l,d){return H(this,void 0,void 0,function*(){let h;i?h={deviceId:{exact:i}}:h={facingMode:"environment"};const m={video:h};return yield this.decodeFromConstraints(m,l,d)})}decodeFromConstraints(i,l,d){return H(this,void 0,void 0,function*(){const h=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(h,l,d)})}decodeFromStream(i,l,d){return H(this,void 0,void 0,function*(){this.reset();const h=yield this.attachStreamToVideo(i,l);return yield this.decodeContinuously(h,d)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,l){return H(this,void 0,void 0,function*(){const d=this.prepareVideoElement(l);return this.addVideoSource(d,i),this.videoElement=d,this.stream=i,yield this.playVideoOnLoadAsync(d),d})}playVideoOnLoadAsync(i){return new Promise((l,d)=>this.playVideoOnLoad(i,()=>l()))}playVideoOnLoad(i,l){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",l),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return H(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,l){const d=document.getElementById(i);if(!d)throw new x(`element with id '${i}' not found`);if(d.nodeName.toLowerCase()!==l.toLowerCase())throw new x(`element with id '${i}' must be an ${l} element`);return d}decodeFromImage(i,l){if(!i&&!l)throw new x("either imageElement with a src set or an url must be provided");return l&&!i?this.decodeFromImageUrl(l):this.decodeFromImageElement(i)}decodeFromVideo(i,l){if(!i&&!l)throw new x("Either an element with a src set or an URL must be provided");return l&&!i?this.decodeFromVideoUrl(l):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,l,d){if(i===void 0&&l===void 0)throw new x("Either an element with a src set or an URL must be provided");return l&&!i?this.decodeFromVideoUrlContinuously(l,d):this.decodeFromVideoElementContinuously(i,d)}decodeFromImageElement(i){if(!i)throw new x("An image element must be provided.");this.reset();const l=this.prepareImageElement(i);this.imageElement=l;let d;return this.isImageLoaded(l)?d=this.decodeOnce(l,!1,!0):d=this._decodeOnLoadImage(l),d}decodeFromVideoElement(i){const l=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(l)}decodeFromVideoElementContinuously(i,l){const d=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(d,l)}_decodeFromVideoElementSetup(i){if(!i)throw new x("A video element must be provided.");this.reset();const l=this.prepareVideoElement(i);return this.videoElement=l,l}decodeFromImageUrl(i){if(!i)throw new x("An URL must be provided.");this.reset();const l=this.prepareImageElement();this.imageElement=l;const d=this._decodeOnLoadImage(l);return l.src=i,d}decodeFromVideoUrl(i){if(!i)throw new x("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),d=this.decodeFromVideoElement(l);return l.src=i,d}decodeFromVideoUrlContinuously(i,l){if(!i)throw new x("An URL must be provided.");this.reset();const d=this.prepareVideoElement(),h=this.decodeFromVideoElementContinuously(d,l);return d.src=i,h}_decodeOnLoadImage(i){return new Promise((l,d)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(l,d),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return H(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,l){return H(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,l)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let l;return typeof i>"u"&&(l=document.createElement("img"),l.width=200,l.height=200),typeof i=="string"&&(l=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(l=i),l}prepareVideoElement(i){let l;return!i&&typeof document<"u"&&(l=document.createElement("video"),l.width=200,l.height=200),typeof i=="string"&&(l=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(l=i),l.setAttribute("autoplay","true"),l.setAttribute("muted","true"),l.setAttribute("playsinline","true"),l}decodeOnce(i,l=!0,d=!0){this._stopAsyncDecode=!1;const h=(m,g)=>{if(this._stopAsyncDecode){g(new W("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const y=this.decode(i);m(y)}catch(y){const A=l&&y instanceof W,O=(y instanceof j||y instanceof R)&&d;if(A||O)return setTimeout(h,this._timeBetweenDecodingAttempts,m,g);g(y)}};return new Promise((m,g)=>h(m,g))}decodeContinuously(i,l){this._stopContinuousDecode=!1;const d=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const h=this.decode(i);l(h,null),setTimeout(d,this.timeBetweenScansMillis)}catch(h){l(null,h);const m=h instanceof j||h instanceof R,g=h instanceof W;(m||g)&&setTimeout(d,this._timeBetweenDecodingAttempts)}};d()}decode(i){const l=this.createBinaryBitmap(i);return this.decodeBitmap(l)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,l,d){l||(l={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),d||(d=this.captureCanvasContext),d.drawImage(i,l.sx,l.sy,l.sWidth,l.sHeight,l.dx,l.dy,l.dWidth,l.dHeight)}drawImageOnCanvas(i,l,d=this.captureCanvasContext){l||(l={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),d||(d=this.captureCanvasContext),d.drawImage(i,l.sx,l.sy,l.sWidth,l.sHeight,l.dx,l.dy,l.dWidth,l.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const l=this.getCaptureCanvas(i),d=new he(l),h=new oe(d);return new b(h)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const d=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=d}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const l=this.createCaptureCanvas(i);this.captureCanvas=l}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const l=document.createElement("canvas");let d,h;return typeof i<"u"&&(i instanceof HTMLVideoElement?(d=i.videoWidth,h=i.videoHeight):i instanceof HTMLImageElement&&(d=i.naturalWidth||i.width,h=i.naturalHeight||i.height)),l.style.width=d+"px",l.style.height=h+"px",l.width=d,l.height=h,l}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,l){try{i.srcObject=l}catch{i.src=URL.createObjectURL(l)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class X{constructor(i,l,d=l==null?0:8*l.length,h,m,g=C.currentTimeMillis()){this.text=i,this.rawBytes=l,this.numBits=d,this.resultPoints=h,this.format=m,this.timestamp=g,this.text=i,this.rawBytes=l,d==null?this.numBits=l==null?0:8*l.length:this.numBits=d,this.resultPoints=h,this.format=m,this.resultMetadata=null,g==null?this.timestamp=C.currentTimeMillis():this.timestamp=g}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,l){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,l)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){const l=this.resultPoints;if(l===null)this.resultPoints=i;else if(i!==null&&i.length>0){const d=new Array(l.length+i.length);C.arraycopy(l,0,d,0,l.length),C.arraycopy(i,0,d,l.length,i.length),this.resultPoints=d}}getTimestamp(){return this.timestamp}toString(){return this.text}}var te;(function(B){B[B.AZTEC=0]="AZTEC",B[B.CODABAR=1]="CODABAR",B[B.CODE_39=2]="CODE_39",B[B.CODE_93=3]="CODE_93",B[B.CODE_128=4]="CODE_128",B[B.DATA_MATRIX=5]="DATA_MATRIX",B[B.EAN_8=6]="EAN_8",B[B.EAN_13=7]="EAN_13",B[B.ITF=8]="ITF",B[B.MAXICODE=9]="MAXICODE",B[B.PDF_417=10]="PDF_417",B[B.QR_CODE=11]="QR_CODE",B[B.RSS_14=12]="RSS_14",B[B.RSS_EXPANDED=13]="RSS_EXPANDED",B[B.UPC_A=14]="UPC_A",B[B.UPC_E=15]="UPC_E",B[B.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(te||(te={}));var se=te,ce;(function(B){B[B.OTHER=0]="OTHER",B[B.ORIENTATION=1]="ORIENTATION",B[B.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",B[B.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",B[B.ISSUE_NUMBER=4]="ISSUE_NUMBER",B[B.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",B[B.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",B[B.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",B[B.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",B[B.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",B[B.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ce||(ce={}));var ge=ce;class Te{constructor(i,l,d,h,m=-1,g=-1){this.rawBytes=i,this.text=l,this.byteSegments=d,this.ecLevel=h,this.structuredAppendSequenceNumber=m,this.structuredAppendParity=g,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class be{exp(i){return this.expTable[i]}log(i){if(i===0)throw new w;return this.logTable[i]}static addOrSubtract(i,l){return i^l}}class Se{constructor(i,l){if(l.length===0)throw new w;this.field=i;const d=l.length;if(d>1&&l[0]===0){let h=1;for(;h<d&&l[h]===0;)h++;h===d?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(d-h),C.arraycopy(l,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=l}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);const l=this.coefficients;let d;if(i===1){d=0;for(let g=0,y=l.length;g!==y;g++){const A=l[g];d=be.addOrSubtract(d,A)}return d}d=l[0];const h=l.length,m=this.field;for(let g=1;g<h;g++)d=be.addOrSubtract(m.multiply(i,d),l[g]);return d}addOrSubtract(i){if(!this.field.equals(i.field))throw new w("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let l=this.coefficients,d=i.coefficients;if(l.length>d.length){const g=l;l=d,d=g}let h=new Int32Array(d.length);const m=d.length-l.length;C.arraycopy(d,0,h,0,m);for(let g=m;g<d.length;g++)h[g]=be.addOrSubtract(l[g-m],d[g]);return new Se(this.field,h)}multiply(i){if(!this.field.equals(i.field))throw new w("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const l=this.coefficients,d=l.length,h=i.coefficients,m=h.length,g=new Int32Array(d+m-1),y=this.field;for(let A=0;A<d;A++){const I=l[A];for(let O=0;O<m;O++)g[A+O]=be.addOrSubtract(g[A+O],y.multiply(I,h[O]))}return new Se(y,g)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;const l=this.coefficients.length,d=this.field,h=new Int32Array(l),m=this.coefficients;for(let g=0;g<l;g++)h[g]=d.multiply(m[g],i);return new Se(d,h)}multiplyByMonomial(i,l){if(i<0)throw new w;if(l===0)return this.field.getZero();const d=this.coefficients,h=d.length,m=new Int32Array(h+i),g=this.field;for(let y=0;y<h;y++)m[y]=g.multiply(d[y],l);return new Se(g,m)}divide(i){if(!this.field.equals(i.field))throw new w("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new w("Divide by 0");const l=this.field;let d=l.getZero(),h=this;const m=i.getCoefficient(i.getDegree()),g=l.inverse(m);for(;h.getDegree()>=i.getDegree()&&!h.isZero();){const y=h.getDegree()-i.getDegree(),A=l.multiply(h.getCoefficient(h.getDegree()),g),I=i.multiplyByMonomial(y,A),O=l.buildMonomial(y,A);d=d.addOrSubtract(O),h=h.addOrSubtract(I)}return[d,h]}toString(){let i="";for(let l=this.getDegree();l>=0;l--){let d=this.getCoefficient(l);if(d!==0){if(d<0?(i+=" - ",d=-d):i.length>0&&(i+=" + "),l===0||d!==1){const h=this.field.log(d);h===0?i+="1":h===1?i+="a":(i+="a^",i+=h)}l!==0&&(l===1?i+="x":(i+="x^",i+=l))}}return i}}class Me extends p{}Me.kind="ArithmeticException";class ue extends be{constructor(i,l,d){super(),this.primitive=i,this.size=l,this.generatorBase=d;const h=new Int32Array(l);let m=1;for(let y=0;y<l;y++)h[y]=m,m*=2,m>=l&&(m^=i,m&=l-1);this.expTable=h;const g=new Int32Array(l);for(let y=0;y<l-1;y++)g[h[y]]=y;this.logTable=g,this.zero=new Se(this,Int32Array.from([0])),this.one=new Se(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,l){if(i<0)throw new w;if(l===0)return this.zero;const d=new Int32Array(i+1);return d[0]=l,new Se(this,d)}inverse(i){if(i===0)throw new Me;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,l){return i===0||l===0?0:this.expTable[(this.logTable[i]+this.logTable[l])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+_.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}ue.AZTEC_DATA_12=new ue(4201,4096,1),ue.AZTEC_DATA_10=new ue(1033,1024,1),ue.AZTEC_DATA_6=new ue(67,64,1),ue.AZTEC_PARAM=new ue(19,16,1),ue.QR_CODE_FIELD_256=new ue(285,256,0),ue.DATA_MATRIX_FIELD_256=new ue(301,256,1),ue.AZTEC_DATA_8=ue.DATA_MATRIX_FIELD_256,ue.MAXICODE_FIELD_64=ue.AZTEC_DATA_6;class We extends p{}We.kind="ReedSolomonException";class Ee extends p{}Ee.kind="IllegalStateException";class Je{constructor(i){this.field=i}decode(i,l){const d=this.field,h=new Se(d,i),m=new Int32Array(l);let g=!0;for(let Z=0;Z<l;Z++){const ie=h.evaluateAt(d.exp(Z+d.getGeneratorBase()));m[m.length-1-Z]=ie,ie!==0&&(g=!1)}if(g)return;const y=new Se(d,m),A=this.runEuclideanAlgorithm(d.buildMonomial(l,1),y,l),I=A[0],O=A[1],z=this.findErrorLocations(I),V=this.findErrorMagnitudes(O,z);for(let Z=0;Z<z.length;Z++){const ie=i.length-1-d.log(z[Z]);if(ie<0)throw new We("Bad error location");i[ie]=ue.addOrSubtract(i[ie],V[Z])}}runEuclideanAlgorithm(i,l,d){if(i.getDegree()<l.getDegree()){const Z=i;i=l,l=Z}const h=this.field;let m=i,g=l,y=h.getZero(),A=h.getOne();for(;g.getDegree()>=(d/2|0);){let Z=m,ie=y;if(m=g,y=A,m.isZero())throw new We("r_{i-1} was zero");g=Z;let le=h.getZero();const fe=m.getCoefficient(m.getDegree()),ve=h.inverse(fe);for(;g.getDegree()>=m.getDegree()&&!g.isZero();){const De=g.getDegree()-m.getDegree(),Le=h.multiply(g.getCoefficient(g.getDegree()),ve);le=le.addOrSubtract(h.buildMonomial(De,Le)),g=g.addOrSubtract(m.multiplyByMonomial(De,Le))}if(A=le.multiply(y).addOrSubtract(ie),g.getDegree()>=m.getDegree())throw new Ee("Division algorithm failed to reduce polynomial?")}const I=A.getCoefficient(0);if(I===0)throw new We("sigmaTilde(0) was zero");const O=h.inverse(I),z=A.multiplyScalar(O),V=g.multiplyScalar(O);return[z,V]}findErrorLocations(i){const l=i.getDegree();if(l===1)return Int32Array.from([i.getCoefficient(1)]);const d=new Int32Array(l);let h=0;const m=this.field;for(let g=1;g<m.getSize()&&h<l;g++)i.evaluateAt(g)===0&&(d[h]=m.inverse(g),h++);if(h!==l)throw new We("Error locator degree does not match number of roots");return d}findErrorMagnitudes(i,l){const d=l.length,h=new Int32Array(d),m=this.field;for(let g=0;g<d;g++){const y=m.inverse(l[g]);let A=1;for(let I=0;I<d;I++)if(g!==I){const O=m.multiply(l[I],y),z=O&1?O&-2:O|1;A=m.multiply(A,z)}h[g]=m.multiply(i.evaluateAt(y),m.inverse(A)),m.getGeneratorBase()!==0&&(h[g]=m.multiply(h[g],y))}return h}}var _e;(function(B){B[B.UPPER=0]="UPPER",B[B.LOWER=1]="LOWER",B[B.MIXED=2]="MIXED",B[B.DIGIT=3]="DIGIT",B[B.PUNCT=4]="PUNCT",B[B.BINARY=5]="BINARY"})(_e||(_e={}));class ze{decode(i){this.ddata=i;let l=i.getBits(),d=this.extractBits(l),h=this.correctBits(d),m=ze.convertBoolArrayToByteArray(h),g=ze.getEncodedData(h),y=new Te(m,g,null,null);return y.setNumBits(h.length),y}static highLevelDecode(i){return this.getEncodedData(i)}static getEncodedData(i){let l=i.length,d=_e.UPPER,h=_e.UPPER,m="",g=0;for(;g<l;)if(h===_e.BINARY){if(l-g<5)break;let y=ze.readCode(i,g,5);if(g+=5,y===0){if(l-g<11)break;y=ze.readCode(i,g,11)+31,g+=11}for(let A=0;A<y;A++){if(l-g<8){g=l;break}const I=ze.readCode(i,g,8);m+=U.castAsNonUtf8Char(I),g+=8}h=d}else{let y=h===_e.DIGIT?4:5;if(l-g<y)break;let A=ze.readCode(i,g,y);g+=y;let I=ze.getCharacter(h,A);I.startsWith("CTRL_")?(d=h,h=ze.getTable(I.charAt(5)),I.charAt(6)==="L"&&(d=h)):(m+=I,h=d)}return m}static getTable(i){switch(i){case"L":return _e.LOWER;case"P":return _e.PUNCT;case"M":return _e.MIXED;case"D":return _e.DIGIT;case"B":return _e.BINARY;case"U":default:return _e.UPPER}}static getCharacter(i,l){switch(i){case _e.UPPER:return ze.UPPER_TABLE[l];case _e.LOWER:return ze.LOWER_TABLE[l];case _e.MIXED:return ze.MIXED_TABLE[l];case _e.PUNCT:return ze.PUNCT_TABLE[l];case _e.DIGIT:return ze.DIGIT_TABLE[l];default:throw new Ee("Bad table")}}correctBits(i){let l,d;this.ddata.getNbLayers()<=2?(d=6,l=ue.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(d=8,l=ue.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(d=10,l=ue.AZTEC_DATA_10):(d=12,l=ue.AZTEC_DATA_12);let h=this.ddata.getNbDatablocks(),m=i.length/d;if(m<h)throw new R;let g=i.length%d,y=new Int32Array(m);for(let V=0;V<m;V++,g+=d)y[V]=ze.readCode(i,g,d);try{new Je(l).decode(y,m-h)}catch(V){throw new R(V)}let A=(1<<d)-1,I=0;for(let V=0;V<h;V++){let Z=y[V];if(Z===0||Z===A)throw new R;(Z===1||Z===A-1)&&I++}let O=new Array(h*d-I),z=0;for(let V=0;V<h;V++){let Z=y[V];if(Z===1||Z===A-1)O.fill(Z>1,z,z+d-1),z+=d-1;else for(let ie=d-1;ie>=0;--ie)O[z++]=(Z&1<<ie)!==0}return O}extractBits(i){let l=this.ddata.isCompact(),d=this.ddata.getNbLayers(),h=(l?11:14)+d*4,m=new Int32Array(h),g=new Array(this.totalBitsInLayer(d,l));if(l)for(let y=0;y<m.length;y++)m[y]=y;else{let y=h+1+2*_.truncDivision(_.truncDivision(h,2)-1,15),A=h/2,I=_.truncDivision(y,2);for(let O=0;O<A;O++){let z=O+_.truncDivision(O,15);m[A-O-1]=I-z-1,m[A+O]=I+z+1}}for(let y=0,A=0;y<d;y++){let I=(d-y)*4+(l?9:12),O=y*2,z=h-1-O;for(let V=0;V<I;V++){let Z=V*2;for(let ie=0;ie<2;ie++)g[A+Z+ie]=i.get(m[O+ie],m[O+V]),g[A+2*I+Z+ie]=i.get(m[O+V],m[z-ie]),g[A+4*I+Z+ie]=i.get(m[z-ie],m[z-V]),g[A+6*I+Z+ie]=i.get(m[z-V],m[O+ie])}A+=I*8}return g}static readCode(i,l,d){let h=0;for(let m=l;m<l+d;m++)h<<=1,i[m]&&(h|=1);return h}static readByte(i,l){let d=i.length-l;return d>=8?ze.readCode(i,l,8):ze.readCode(i,l,d)<<8-d}static convertBoolArrayToByteArray(i){let l=new Uint8Array((i.length+7)/8);for(let d=0;d<l.length;d++)l[d]=ze.readByte(i,8*d);return l}totalBitsInLayer(i,l){return((l?88:112)+16*i)*i}}ze.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ze.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ze.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ze.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ze.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ge{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,l,d,h){const m=i-d,g=l-h;return Math.sqrt(m*m+g*g)}static sum(i){let l=0;for(let d=0,h=i.length;d!==h;d++){const m=i[d];l+=m}return l}}class Vt{static floatToIntBits(i){return i}}Vt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class pe{constructor(i,l){this.x=i,this.y=l}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof pe){const l=i;return this.x===l.x&&this.y===l.y}return!1}hashCode(){return 31*Vt.floatToIntBits(this.x)+Vt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const l=this.distance(i[0],i[1]),d=this.distance(i[1],i[2]),h=this.distance(i[0],i[2]);let m,g,y;if(d>=l&&d>=h?(g=i[0],m=i[1],y=i[2]):h>=d&&h>=l?(g=i[1],m=i[0],y=i[2]):(g=i[2],m=i[0],y=i[1]),this.crossProductZ(m,g,y)<0){const A=m;m=y,y=A}i[0]=m,i[1]=g,i[2]=y}static distance(i,l){return Ge.distance(i.x,i.y,l.x,l.y)}static crossProductZ(i,l,d){const h=l.x,m=l.y;return(d.x-h)*(i.y-m)-(d.y-m)*(i.x-h)}}class Ze{constructor(i,l){this.bits=i,this.points=l}getBits(){return this.bits}getPoints(){return this.points}}class it extends Ze{constructor(i,l,d,h,m){super(i,l),this.compact=d,this.nbDatablocks=h,this.nbLayers=m}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ot{constructor(i,l,d,h){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),l==null&&(l=ot.INIT_SIZE),d==null&&(d=i.getWidth()/2|0),h==null&&(h=i.getHeight()/2|0);const m=l/2|0;if(this.leftInit=d-m,this.rightInit=d+m,this.upInit=h-m,this.downInit=h+m,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new W}detect(){let i=this.leftInit,l=this.rightInit,d=this.upInit,h=this.downInit,m=!1,g=!0,y=!1,A=!1,I=!1,O=!1,z=!1;const V=this.width,Z=this.height;for(;g;){g=!1;let ie=!0;for(;(ie||!A)&&l<V;)ie=this.containsBlackPoint(d,h,l,!1),ie?(l++,g=!0,A=!0):A||l++;if(l>=V){m=!0;break}let le=!0;for(;(le||!I)&&h<Z;)le=this.containsBlackPoint(i,l,h,!0),le?(h++,g=!0,I=!0):I||h++;if(h>=Z){m=!0;break}let fe=!0;for(;(fe||!O)&&i>=0;)fe=this.containsBlackPoint(d,h,i,!1),fe?(i--,g=!0,O=!0):O||i--;if(i<0){m=!0;break}let ve=!0;for(;(ve||!z)&&d>=0;)ve=this.containsBlackPoint(i,l,d,!0),ve?(d--,g=!0,z=!0):z||d--;if(d<0){m=!0;break}g&&(y=!0)}if(!m&&y){const ie=l-i;let le=null;for(let Le=1;le===null&&Le<ie;Le++)le=this.getBlackPointOnSegment(i,h-Le,i+Le,h);if(le==null)throw new W;let fe=null;for(let Le=1;fe===null&&Le<ie;Le++)fe=this.getBlackPointOnSegment(i,d+Le,i+Le,d);if(fe==null)throw new W;let ve=null;for(let Le=1;ve===null&&Le<ie;Le++)ve=this.getBlackPointOnSegment(l,d+Le,l-Le,d);if(ve==null)throw new W;let De=null;for(let Le=1;De===null&&Le<ie;Le++)De=this.getBlackPointOnSegment(l,h-Le,l-Le,h);if(De==null)throw new W;return this.centerEdges(De,le,ve,fe)}else throw new W}getBlackPointOnSegment(i,l,d,h){const m=Ge.round(Ge.distance(i,l,d,h)),g=(d-i)/m,y=(h-l)/m,A=this.image;for(let I=0;I<m;I++){const O=Ge.round(i+I*g),z=Ge.round(l+I*y);if(A.get(O,z))return new pe(O,z)}return null}centerEdges(i,l,d,h){const m=i.getX(),g=i.getY(),y=l.getX(),A=l.getY(),I=d.getX(),O=d.getY(),z=h.getX(),V=h.getY(),Z=ot.CORR;return m<this.width/2?[new pe(z-Z,V+Z),new pe(y+Z,A+Z),new pe(I-Z,O-Z),new pe(m+Z,g-Z)]:[new pe(z+Z,V+Z),new pe(y+Z,A-Z),new pe(I-Z,O+Z),new pe(m-Z,g-Z)]}containsBlackPoint(i,l,d,h){const m=this.image;if(h){for(let g=i;g<=l;g++)if(m.get(g,d))return!0}else for(let g=i;g<=l;g++)if(m.get(d,g))return!0;return!1}}ot.INIT_SIZE=10,ot.CORR=1;class ar{static checkAndNudgePoints(i,l){const d=i.getWidth(),h=i.getHeight();let m=!0;for(let g=0;g<l.length&&m;g+=2){const y=Math.floor(l[g]),A=Math.floor(l[g+1]);if(y<-1||y>d||A<-1||A>h)throw new W;m=!1,y===-1?(l[g]=0,m=!0):y===d&&(l[g]=d-1,m=!0),A===-1?(l[g+1]=0,m=!0):A===h&&(l[g+1]=h-1,m=!0)}m=!0;for(let g=l.length-2;g>=0&&m;g-=2){const y=Math.floor(l[g]),A=Math.floor(l[g+1]);if(y<-1||y>d||A<-1||A>h)throw new W;m=!1,y===-1?(l[g]=0,m=!0):y===d&&(l[g]=d-1,m=!0),A===-1?(l[g+1]=0,m=!0):A===h&&(l[g+1]=h-1,m=!0)}}}class Nt{constructor(i,l,d,h,m,g,y,A,I){this.a11=i,this.a21=l,this.a31=d,this.a12=h,this.a22=m,this.a32=g,this.a13=y,this.a23=A,this.a33=I}static quadrilateralToQuadrilateral(i,l,d,h,m,g,y,A,I,O,z,V,Z,ie,le,fe){const ve=Nt.quadrilateralToSquare(i,l,d,h,m,g,y,A);return Nt.squareToQuadrilateral(I,O,z,V,Z,ie,le,fe).times(ve)}transformPoints(i){const l=i.length,d=this.a11,h=this.a12,m=this.a13,g=this.a21,y=this.a22,A=this.a23,I=this.a31,O=this.a32,z=this.a33;for(let V=0;V<l;V+=2){const Z=i[V],ie=i[V+1],le=m*Z+A*ie+z;i[V]=(d*Z+g*ie+I)/le,i[V+1]=(h*Z+y*ie+O)/le}}transformPointsWithValues(i,l){const d=this.a11,h=this.a12,m=this.a13,g=this.a21,y=this.a22,A=this.a23,I=this.a31,O=this.a32,z=this.a33,V=i.length;for(let Z=0;Z<V;Z++){const ie=i[Z],le=l[Z],fe=m*ie+A*le+z;i[Z]=(d*ie+g*le+I)/fe,l[Z]=(h*ie+y*le+O)/fe}}static squareToQuadrilateral(i,l,d,h,m,g,y,A){const I=i-d+m-y,O=l-h+g-A;if(I===0&&O===0)return new Nt(d-i,m-d,i,h-l,g-h,l,0,0,1);{const z=d-m,V=y-m,Z=h-g,ie=A-g,le=z*ie-V*Z,fe=(I*ie-V*O)/le,ve=(z*O-I*Z)/le;return new Nt(d-i+fe*d,y-i+ve*y,i,h-l+fe*h,A-l+ve*A,l,fe,ve,1)}}static quadrilateralToSquare(i,l,d,h,m,g,y,A){return Nt.squareToQuadrilateral(i,l,d,h,m,g,y,A).buildAdjoint()}buildAdjoint(){return new Nt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new Nt(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class Sr extends ar{sampleGrid(i,l,d,h,m,g,y,A,I,O,z,V,Z,ie,le,fe,ve,De,Le){const Pe=Nt.quadrilateralToQuadrilateral(h,m,g,y,A,I,O,z,V,Z,ie,le,fe,ve,De,Le);return this.sampleGridWithTransform(i,l,d,Pe)}sampleGridWithTransform(i,l,d,h){if(l<=0||d<=0)throw new W;const m=new re(l,d),g=new Float32Array(2*l);for(let y=0;y<d;y++){const A=g.length,I=y+.5;for(let O=0;O<A;O+=2)g[O]=O/2+.5,g[O+1]=I;h.transformPoints(g),ar.checkAndNudgePoints(i,g);try{for(let O=0;O<A;O+=2)i.get(Math.floor(g[O]),Math.floor(g[O+1]))&&m.set(O/2,y)}catch{throw new W}}return m}}class At{static setGridSampler(i){At.gridSampler=i}static getInstance(){return At.gridSampler}}At.gridSampler=new Sr;class $e{constructor(i,l){this.x=i,this.y=l}toResultPoint(){return new pe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Ae{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let l=this.getMatrixCenter(),d=this.getBullsEyeCorners(l);if(i){let g=d[0];d[0]=d[2],d[2]=g}this.extractParameters(d);let h=this.sampleGrid(this.image,d[this.shift%4],d[(this.shift+1)%4],d[(this.shift+2)%4],d[(this.shift+3)%4]),m=this.getMatrixCornerPoints(d);return new it(h,m,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new W;let l=2*this.nbCenterLayers,d=new Int32Array([this.sampleLine(i[0],i[1],l),this.sampleLine(i[1],i[2],l),this.sampleLine(i[2],i[3],l),this.sampleLine(i[3],i[0],l)]);this.shift=this.getRotation(d,l);let h=0;for(let g=0;g<4;g++){let y=d[(this.shift+g)%4];this.compact?(h<<=7,h+=y>>1&127):(h<<=10,h+=(y>>2&992)+(y>>1&31))}let m=this.getCorrectedParameterData(h,this.compact);this.compact?(this.nbLayers=(m>>6)+1,this.nbDataBlocks=(m&63)+1):(this.nbLayers=(m>>11)+1,this.nbDataBlocks=(m&2047)+1)}getRotation(i,l){let d=0;i.forEach((h,m,g)=>{let y=(h>>l-2<<1)+(h&1);d=(d<<3)+y}),d=((d&1)<<11)+(d>>1);for(let h=0;h<4;h++)if(_.bitCount(d^this.EXPECTED_CORNER_BITS[h])<=2)return h;throw new W}getCorrectedParameterData(i,l){let d,h;l?(d=7,h=2):(d=10,h=4);let m=d-h,g=new Int32Array(d);for(let A=d-1;A>=0;--A)g[A]=i&15,i>>=4;try{new Je(ue.AZTEC_PARAM).decode(g,m)}catch{throw new W}let y=0;for(let A=0;A<h;A++)y=(y<<4)+g[A];return y}getBullsEyeCorners(i){let l=i,d=i,h=i,m=i,g=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let z=this.getFirstDifferent(l,g,1,-1),V=this.getFirstDifferent(d,g,1,1),Z=this.getFirstDifferent(h,g,-1,1),ie=this.getFirstDifferent(m,g,-1,-1);if(this.nbCenterLayers>2){let le=this.distancePoint(ie,z)*this.nbCenterLayers/(this.distancePoint(m,l)*(this.nbCenterLayers+2));if(le<.75||le>1.25||!this.isWhiteOrBlackRectangle(z,V,Z,ie))break}l=z,d=V,h=Z,m=ie,g=!g}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new W;this.compact=this.nbCenterLayers===5;let y=new pe(l.getX()+.5,l.getY()-.5),A=new pe(d.getX()+.5,d.getY()+.5),I=new pe(h.getX()-.5,h.getY()+.5),O=new pe(m.getX()-.5,m.getY()-.5);return this.expandSquare([y,A,I,O],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,l,d,h;try{let y=new ot(this.image).detect();i=y[0],l=y[1],d=y[2],h=y[3]}catch{let A=this.image.getWidth()/2,I=this.image.getHeight()/2;i=this.getFirstDifferent(new $e(A+7,I-7),!1,1,-1).toResultPoint(),l=this.getFirstDifferent(new $e(A+7,I+7),!1,1,1).toResultPoint(),d=this.getFirstDifferent(new $e(A-7,I+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new $e(A-7,I-7),!1,-1,-1).toResultPoint()}let m=Ge.round((i.getX()+h.getX()+l.getX()+d.getX())/4),g=Ge.round((i.getY()+h.getY()+l.getY()+d.getY())/4);try{let y=new ot(this.image,15,m,g).detect();i=y[0],l=y[1],d=y[2],h=y[3]}catch{i=this.getFirstDifferent(new $e(m+7,g-7),!1,1,-1).toResultPoint(),l=this.getFirstDifferent(new $e(m+7,g+7),!1,1,1).toResultPoint(),d=this.getFirstDifferent(new $e(m-7,g+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new $e(m-7,g-7),!1,-1,-1).toResultPoint()}return m=Ge.round((i.getX()+h.getX()+l.getX()+d.getX())/4),g=Ge.round((i.getY()+h.getY()+l.getY()+d.getY())/4),new $e(m,g)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,l,d,h,m){let g=At.getInstance(),y=this.getDimension(),A=y/2-this.nbCenterLayers,I=y/2+this.nbCenterLayers;return g.sampleGrid(i,y,y,A,A,I,A,I,I,A,I,l.getX(),l.getY(),d.getX(),d.getY(),h.getX(),h.getY(),m.getX(),m.getY())}sampleLine(i,l,d){let h=0,m=this.distanceResultPoint(i,l),g=m/d,y=i.getX(),A=i.getY(),I=g*(l.getX()-i.getX())/m,O=g*(l.getY()-i.getY())/m;for(let z=0;z<d;z++)this.image.get(Ge.round(y+z*I),Ge.round(A+z*O))&&(h|=1<<d-z-1);return h}isWhiteOrBlackRectangle(i,l,d,h){let m=3;i=new $e(i.getX()-m,i.getY()+m),l=new $e(l.getX()-m,l.getY()-m),d=new $e(d.getX()+m,d.getY()-m),h=new $e(h.getX()+m,h.getY()+m);let g=this.getColor(h,i);if(g===0)return!1;let y=this.getColor(i,l);return y!==g||(y=this.getColor(l,d),y!==g)?!1:(y=this.getColor(d,h),y===g)}getColor(i,l){let d=this.distancePoint(i,l),h=(l.getX()-i.getX())/d,m=(l.getY()-i.getY())/d,g=0,y=i.getX(),A=i.getY(),I=this.image.get(i.getX(),i.getY()),O=Math.ceil(d);for(let V=0;V<O;V++)y+=h,A+=m,this.image.get(Ge.round(y),Ge.round(A))!==I&&g++;let z=g/d;return z>.1&&z<.9?0:z<=.1===I?1:-1}getFirstDifferent(i,l,d,h){let m=i.getX()+d,g=i.getY()+h;for(;this.isValid(m,g)&&this.image.get(m,g)===l;)m+=d,g+=h;for(m-=d,g-=h;this.isValid(m,g)&&this.image.get(m,g)===l;)m+=d;for(m-=d;this.isValid(m,g)&&this.image.get(m,g)===l;)g+=h;return g-=h,new $e(m,g)}expandSquare(i,l,d){let h=d/(2*l),m=i[0].getX()-i[2].getX(),g=i[0].getY()-i[2].getY(),y=(i[0].getX()+i[2].getX())/2,A=(i[0].getY()+i[2].getY())/2,I=new pe(y+h*m,A+h*g),O=new pe(y-h*m,A-h*g);m=i[1].getX()-i[3].getX(),g=i[1].getY()-i[3].getY(),y=(i[1].getX()+i[3].getX())/2,A=(i[1].getY()+i[3].getY())/2;let z=new pe(y+h*m,A+h*g),V=new pe(y-h*m,A-h*g);return[I,z,O,V]}isValid(i,l){return i>=0&&i<this.image.getWidth()&&l>0&&l<this.image.getHeight()}isValidPoint(i){let l=Ge.round(i.getX()),d=Ge.round(i.getY());return this.isValid(l,d)}distancePoint(i,l){return Ge.distance(i.getX(),i.getY(),l.getX(),l.getY())}distanceResultPoint(i,l){return Ge.distance(i.getX(),i.getY(),l.getX(),l.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(_.truncDivision(this.nbLayers-4,8)+1)+15}}class st{decode(i,l=null){let d=null,h=new Ae(i.getBlackMatrix()),m=null,g=null;try{let O=h.detectMirror(!1);m=O.getPoints(),this.reportFoundResultPoints(l,m),g=new ze().decode(O)}catch(O){d=O}if(g==null)try{let O=h.detectMirror(!0);m=O.getPoints(),this.reportFoundResultPoints(l,m),g=new ze().decode(O)}catch(O){throw d??O}let y=new X(g.getText(),g.getRawBytes(),g.getNumBits(),m,se.AZTEC,C.currentTimeMillis()),A=g.getByteSegments();A!=null&&y.putMetadata(ge.BYTE_SEGMENTS,A);let I=g.getECLevel();return I!=null&&y.putMetadata(ge.ERROR_CORRECTION_LEVEL,I),y}reportFoundResultPoints(i,l){if(i!=null){let d=i.get(L.NEED_RESULT_POINT_CALLBACK);d!=null&&l.forEach((h,m,g)=>{d.foundPossibleResultPoint(h)})}}reset(){}}class dt extends ee{constructor(i=500){super(new st,i)}}class ft{decode(i,l){try{return this.doDecode(i,l)}catch{if(l&&l.get(L.TRY_HARDER)===!0&&i.isRotateSupported()){const m=i.rotateCounterClockwise(),g=this.doDecode(m,l),y=g.getResultMetadata();let A=270;y!==null&&y.get(ge.ORIENTATION)===!0&&(A=A+y.get(ge.ORIENTATION)%360),g.putMetadata(ge.ORIENTATION,A);const I=g.getResultPoints();if(I!==null){const O=m.getHeight();for(let z=0;z<I.length;z++)I[z]=new pe(O-I[z].getY()-1,I[z].getX())}return g}else throw new W}}reset(){}doDecode(i,l){const d=i.getWidth(),h=i.getHeight();let m=new k(d);const g=l&&l.get(L.TRY_HARDER)===!0,y=Math.max(1,h>>(g?8:5));let A;g?A=h:A=15;const I=Math.trunc(h/2);for(let O=0;O<A;O++){const z=Math.trunc((O+1)/2),V=(O&1)===0,Z=I+y*(V?z:-z);if(Z<0||Z>=h)break;try{m=i.getBlackRow(Z,m)}catch{continue}for(let ie=0;ie<2;ie++){if(ie===1&&(m.reverse(),l&&l.get(L.NEED_RESULT_POINT_CALLBACK)===!0)){const le=new Map;l.forEach((fe,ve)=>le.set(ve,fe)),le.delete(L.NEED_RESULT_POINT_CALLBACK),l=le}try{const le=this.decodeRow(Z,m,l);if(ie===1){le.putMetadata(ge.ORIENTATION,180);const fe=le.getResultPoints();fe!==null&&(fe[0]=new pe(d-fe[0].getX()-1,fe[0].getY()),fe[1]=new pe(d-fe[1].getX()-1,fe[1].getY()))}return le}catch{}}}throw new W}static recordPattern(i,l,d){const h=d.length;for(let I=0;I<h;I++)d[I]=0;const m=i.getSize();if(l>=m)throw new W;let g=!i.get(l),y=0,A=l;for(;A<m;){if(i.get(A)!==g)d[y]++;else{if(++y===h)break;d[y]=1,g=!g}A++}if(!(y===h||y===h-1&&A===m))throw new W}static recordPatternInReverse(i,l,d){let h=d.length,m=i.get(l);for(;l>0&&h>=0;)i.get(--l)!==m&&(h--,m=!m);if(h>=0)throw new W;ft.recordPattern(i,l+1,d)}static patternMatchVariance(i,l,d){const h=i.length;let m=0,g=0;for(let I=0;I<h;I++)m+=i[I],g+=l[I];if(m<g)return Number.POSITIVE_INFINITY;const y=m/g;d*=y;let A=0;for(let I=0;I<h;I++){const O=i[I],z=l[I]*y,V=O>z?O-z:z-O;if(V>d)return Number.POSITIVE_INFINITY;A+=V}return A/m}}class Ie extends ft{static findStartPattern(i){const l=i.getSize(),d=i.getNextSet(0);let h=0,m=Int32Array.from([0,0,0,0,0,0]),g=d,y=!1;const A=6;for(let I=d;I<l;I++)if(i.get(I)!==y)m[h]++;else{if(h===A-1){let O=Ie.MAX_AVG_VARIANCE,z=-1;for(let V=Ie.CODE_START_A;V<=Ie.CODE_START_C;V++){const Z=ft.patternMatchVariance(m,Ie.CODE_PATTERNS[V],Ie.MAX_INDIVIDUAL_VARIANCE);Z<O&&(O=Z,z=V)}if(z>=0&&i.isRange(Math.max(0,g-(I-g)/2),g,!1))return Int32Array.from([g,I,z]);g+=m[0]+m[1],m=m.slice(2,m.length-1),m[h-1]=0,m[h]=0,h--}else h++;m[h]=1,y=!y}throw new W}static decodeCode(i,l,d){ft.recordPattern(i,d,l);let h=Ie.MAX_AVG_VARIANCE,m=-1;for(let g=0;g<Ie.CODE_PATTERNS.length;g++){const y=Ie.CODE_PATTERNS[g],A=this.patternMatchVariance(l,y,Ie.MAX_INDIVIDUAL_VARIANCE);A<h&&(h=A,m=g)}if(m>=0)return m;throw new W}decodeRow(i,l,d){const h=d&&d.get(L.ASSUME_GS1)===!0,m=Ie.findStartPattern(l),g=m[2];let y=0;const A=new Uint8Array(20);A[y++]=g;let I;switch(g){case Ie.CODE_START_A:I=Ie.CODE_CODE_A;break;case Ie.CODE_START_B:I=Ie.CODE_CODE_B;break;case Ie.CODE_START_C:I=Ie.CODE_CODE_C;break;default:throw new R}let O=!1,z=!1,V="",Z=m[0],ie=m[1];const le=Int32Array.from([0,0,0,0,0,0]);let fe=0,ve=0,De=g,Le=0,Pe=!0,Ct=!1,pt=!1;for(;!O;){const Cl=z;switch(z=!1,fe=ve,ve=Ie.decodeCode(l,le,ie),A[y++]=ve,ve!==Ie.CODE_STOP&&(Pe=!0),ve!==Ie.CODE_STOP&&(Le++,De+=Le*ve),Z=ie,ie+=le.reduce((sT,aT)=>sT+aT,0),ve){case Ie.CODE_START_A:case Ie.CODE_START_B:case Ie.CODE_START_C:throw new R}switch(I){case Ie.CODE_CODE_A:if(ve<64)pt===Ct?V+=String.fromCharCode(32+ve):V+=String.fromCharCode(32+ve+128),pt=!1;else if(ve<96)pt===Ct?V+=String.fromCharCode(ve-64):V+=String.fromCharCode(ve+64),pt=!1;else switch(ve!==Ie.CODE_STOP&&(Pe=!1),ve){case Ie.CODE_FNC_1:h&&(V.length===0?V+="]C1":V+="");break;case Ie.CODE_FNC_2:case Ie.CODE_FNC_3:break;case Ie.CODE_FNC_4_A:!Ct&&pt?(Ct=!0,pt=!1):Ct&&pt?(Ct=!1,pt=!1):pt=!0;break;case Ie.CODE_SHIFT:z=!0,I=Ie.CODE_CODE_B;break;case Ie.CODE_CODE_B:I=Ie.CODE_CODE_B;break;case Ie.CODE_CODE_C:I=Ie.CODE_CODE_C;break;case Ie.CODE_STOP:O=!0;break}break;case Ie.CODE_CODE_B:if(ve<96)pt===Ct?V+=String.fromCharCode(32+ve):V+=String.fromCharCode(32+ve+128),pt=!1;else switch(ve!==Ie.CODE_STOP&&(Pe=!1),ve){case Ie.CODE_FNC_1:h&&(V.length===0?V+="]C1":V+="");break;case Ie.CODE_FNC_2:case Ie.CODE_FNC_3:break;case Ie.CODE_FNC_4_B:!Ct&&pt?(Ct=!0,pt=!1):Ct&&pt?(Ct=!1,pt=!1):pt=!0;break;case Ie.CODE_SHIFT:z=!0,I=Ie.CODE_CODE_A;break;case Ie.CODE_CODE_A:I=Ie.CODE_CODE_A;break;case Ie.CODE_CODE_C:I=Ie.CODE_CODE_C;break;case Ie.CODE_STOP:O=!0;break}break;case Ie.CODE_CODE_C:if(ve<100)ve<10&&(V+="0"),V+=ve;else switch(ve!==Ie.CODE_STOP&&(Pe=!1),ve){case Ie.CODE_FNC_1:h&&(V.length===0?V+="]C1":V+="");break;case Ie.CODE_CODE_A:I=Ie.CODE_CODE_A;break;case Ie.CODE_CODE_B:I=Ie.CODE_CODE_B;break;case Ie.CODE_STOP:O=!0;break}break}Cl&&(I=I===Ie.CODE_CODE_A?Ie.CODE_CODE_B:Ie.CODE_CODE_A)}const Ln=ie-Z;if(ie=l.getNextUnset(ie),!l.isRange(ie,Math.min(l.getSize(),ie+(ie-Z)/2),!1))throw new W;if(De-=Le*fe,De%103!==fe)throw new j;const $s=V.length;if($s===0)throw new W;$s>0&&Pe&&(I===Ie.CODE_CODE_C?V=V.substring(0,$s-2):V=V.substring(0,$s-1));const Fn=(m[1]+m[0])/2,Zt=Z+Ln/2,nn=A.length,es=new Uint8Array(nn);for(let Cl=0;Cl<nn;Cl++)es[Cl]=A[Cl];const jl=[new pe(Fn,i),new pe(Zt,i)];return new X(V,es,0,jl,se.CODE_128,new Date().getTime())}}Ie.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Ie.MAX_AVG_VARIANCE=.25,Ie.MAX_INDIVIDUAL_VARIANCE=.7,Ie.CODE_SHIFT=98,Ie.CODE_CODE_C=99,Ie.CODE_CODE_B=100,Ie.CODE_CODE_A=101,Ie.CODE_FNC_1=102,Ie.CODE_FNC_2=97,Ie.CODE_FNC_3=96,Ie.CODE_FNC_4_A=101,Ie.CODE_FNC_4_B=100,Ie.CODE_START_A=103,Ie.CODE_START_B=104,Ie.CODE_START_C=105,Ie.CODE_STOP=106;class Dt extends ft{constructor(i=!1,l=!1){super(),this.usingCheckDigit=i,this.extendedMode=l,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(i,l,d){let h=this.counters;h.fill(0),this.decodeRowResult="";let m=Dt.findAsteriskPattern(l,h),g=l.getNextSet(m[1]),y=l.getSize(),A,I;do{Dt.recordPattern(l,g,h);let le=Dt.toNarrowWidePattern(h);if(le<0)throw new W;A=Dt.patternToChar(le),this.decodeRowResult+=A,I=g;for(let fe of h)g+=fe;g=l.getNextSet(g)}while(A!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let O=0;for(let le of h)O+=le;let z=g-I-O;if(g!==y&&z*2<O)throw new W;if(this.usingCheckDigit){let le=this.decodeRowResult.length-1,fe=0;for(let ve=0;ve<le;ve++)fe+=Dt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ve));if(this.decodeRowResult.charAt(le)!==Dt.ALPHABET_STRING.charAt(fe%43))throw new j;this.decodeRowResult=this.decodeRowResult.substring(0,le)}if(this.decodeRowResult.length===0)throw new W;let V;this.extendedMode?V=Dt.decodeExtended(this.decodeRowResult):V=this.decodeRowResult;let Z=(m[1]+m[0])/2,ie=I+O/2;return new X(V,null,0,[new pe(Z,i),new pe(ie,i)],se.CODE_39,new Date().getTime())}static findAsteriskPattern(i,l){let d=i.getSize(),h=i.getNextSet(0),m=0,g=h,y=!1,A=l.length;for(let I=h;I<d;I++)if(i.get(I)!==y)l[m]++;else{if(m===A-1){if(this.toNarrowWidePattern(l)===Dt.ASTERISK_ENCODING&&i.isRange(Math.max(0,g-Math.floor((I-g)/2)),g,!1))return[g,I];g+=l[0]+l[1],l.copyWithin(0,2,2+m-1),l[m-1]=0,l[m]=0,m--}else m++;l[m]=1,y=!y}throw new W}static toNarrowWidePattern(i){let l=i.length,d=0,h;do{let m=2147483647;for(let A of i)A<m&&A>d&&(m=A);d=m,h=0;let g=0,y=0;for(let A=0;A<l;A++){let I=i[A];I>d&&(y|=1<<l-1-A,h++,g+=I)}if(h===3){for(let A=0;A<l&&h>0;A++){let I=i[A];if(I>d&&(h--,I*2>=g))return-1}return y}}while(h>3);return-1}static patternToChar(i){for(let l=0;l<Dt.CHARACTER_ENCODINGS.length;l++)if(Dt.CHARACTER_ENCODINGS[l]===i)return Dt.ALPHABET_STRING.charAt(l);if(i===Dt.ASTERISK_ENCODING)return"*";throw new W}static decodeExtended(i){let l=i.length,d="";for(let h=0;h<l;h++){let m=i.charAt(h);if(m==="+"||m==="$"||m==="%"||m==="/"){let g=i.charAt(h+1),y="\0";switch(m){case"+":if(g>="A"&&g<="Z")y=String.fromCharCode(g.charCodeAt(0)+32);else throw new R;break;case"$":if(g>="A"&&g<="Z")y=String.fromCharCode(g.charCodeAt(0)-64);else throw new R;break;case"%":if(g>="A"&&g<="E")y=String.fromCharCode(g.charCodeAt(0)-38);else if(g>="F"&&g<="J")y=String.fromCharCode(g.charCodeAt(0)-11);else if(g>="K"&&g<="O")y=String.fromCharCode(g.charCodeAt(0)+16);else if(g>="P"&&g<="T")y=String.fromCharCode(g.charCodeAt(0)+43);else if(g==="U")y="\0";else if(g==="V")y="@";else if(g==="W")y="`";else if(g==="X"||g==="Y"||g==="Z")y="";else throw new R;break;case"/":if(g>="A"&&g<="O")y=String.fromCharCode(g.charCodeAt(0)-32);else if(g==="Z")y=":";else throw new R;break}d+=y,h++}else d+=m}return d}}Dt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Dt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Dt.ASTERISK_ENCODING=148;class mt extends ft{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,l,d){let h=this.decodeStart(l),m=this.decodeEnd(l),g=new q;mt.decodeMiddle(l,h[1],m[0],g);let y=g.toString(),A=null;d!=null&&(A=d.get(L.ALLOWED_LENGTHS)),A==null&&(A=mt.DEFAULT_ALLOWED_LENGTHS);let I=y.length,O=!1,z=0;for(let ie of A){if(I===ie){O=!0;break}ie>z&&(z=ie)}if(!O&&I>z&&(O=!0),!O)throw new R;const V=[new pe(h[1],i),new pe(m[0],i)];return new X(y,null,0,V,se.ITF,new Date().getTime())}static decodeMiddle(i,l,d,h){let m=new Int32Array(10),g=new Int32Array(5),y=new Int32Array(5);for(m.fill(0),g.fill(0),y.fill(0);l<d;){ft.recordPattern(i,l,m);for(let I=0;I<5;I++){let O=2*I;g[I]=m[O],y[I]=m[O+1]}let A=mt.decodeDigit(g);h.append(A.toString()),A=this.decodeDigit(y),h.append(A.toString()),m.forEach(function(I){l+=I})}}decodeStart(i){let l=mt.skipWhiteSpace(i),d=mt.findGuardPattern(i,l,mt.START_PATTERN);return this.narrowLineWidth=(d[1]-d[0])/4,this.validateQuietZone(i,d[0]),d}validateQuietZone(i,l){let d=this.narrowLineWidth*10;d=d<l?d:l;for(let h=l-1;d>0&&h>=0&&!i.get(h);h--)d--;if(d!==0)throw new W}static skipWhiteSpace(i){const l=i.getSize(),d=i.getNextSet(0);if(d===l)throw new W;return d}decodeEnd(i){i.reverse();try{let l=mt.skipWhiteSpace(i),d;try{d=mt.findGuardPattern(i,l,mt.END_PATTERN_REVERSED[0])}catch(m){m instanceof W&&(d=mt.findGuardPattern(i,l,mt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,d[0]);let h=d[0];return d[0]=i.getSize()-d[1],d[1]=i.getSize()-h,d}finally{i.reverse()}}static findGuardPattern(i,l,d){let h=d.length,m=new Int32Array(h),g=i.getSize(),y=!1,A=0,I=l;m.fill(0);for(let O=l;O<g;O++)if(i.get(O)!==y)m[A]++;else{if(A===h-1){if(ft.patternMatchVariance(m,d,mt.MAX_INDIVIDUAL_VARIANCE)<mt.MAX_AVG_VARIANCE)return[I,O];I+=m[0]+m[1],C.arraycopy(m,2,m,0,A-1),m[A-1]=0,m[A]=0,A--}else A++;m[A]=1,y=!y}throw new W}static decodeDigit(i){let l=mt.MAX_AVG_VARIANCE,d=-1,h=mt.PATTERNS.length;for(let m=0;m<h;m++){let g=mt.PATTERNS[m],y=ft.patternMatchVariance(i,g,mt.MAX_INDIVIDUAL_VARIANCE);y<l?(l=y,d=m):y===l&&(d=-1)}if(d>=0)return d%10;throw new W}}mt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],mt.MAX_AVG_VARIANCE=.38,mt.MAX_INDIVIDUAL_VARIANCE=.5,mt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],mt.START_PATTERN=Int32Array.from([1,1,1,1]),mt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Pt extends ft{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let l=!1,d,h=0,m=Int32Array.from([0,0,0]);for(;!l;){m=Int32Array.from([0,0,0]),d=Pt.findGuardPattern(i,h,!1,this.START_END_PATTERN,m);let g=d[0];h=d[1];let y=g-(h-g);y>=0&&(l=i.isRange(y,g,!1))}return d}static checkChecksum(i){return Pt.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let l=i.length;if(l===0)return!1;let d=parseInt(i.charAt(l-1),10);return Pt.getStandardUPCEANChecksum(i.substring(0,l-1))===d}static getStandardUPCEANChecksum(i){let l=i.length,d=0;for(let h=l-1;h>=0;h-=2){let m=i.charAt(h).charCodeAt(0)-48;if(m<0||m>9)throw new R;d+=m}d*=3;for(let h=l-2;h>=0;h-=2){let m=i.charAt(h).charCodeAt(0)-48;if(m<0||m>9)throw new R;d+=m}return(1e3-d)%10}static decodeEnd(i,l){return Pt.findGuardPattern(i,l,!1,Pt.START_END_PATTERN,new Int32Array(Pt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,l,d,h){return this.findGuardPattern(i,l,d,h,new Int32Array(h.length))}static findGuardPattern(i,l,d,h,m){let g=i.getSize();l=d?i.getNextUnset(l):i.getNextSet(l);let y=0,A=l,I=h.length,O=d;for(let z=l;z<g;z++)if(i.get(z)!==O)m[y]++;else{if(y===I-1){if(ft.patternMatchVariance(m,h,Pt.MAX_INDIVIDUAL_VARIANCE)<Pt.MAX_AVG_VARIANCE)return Int32Array.from([A,z]);A+=m[0]+m[1];let V=m.slice(2,m.length-1);for(let Z=0;Z<y-1;Z++)m[Z]=V[Z];m[y-1]=0,m[y]=0,y--}else y++;m[y]=1,O=!O}throw new W}static decodeDigit(i,l,d,h){this.recordPattern(i,d,l);let m=this.MAX_AVG_VARIANCE,g=-1,y=h.length;for(let A=0;A<y;A++){let I=h[A],O=ft.patternMatchVariance(l,I,Pt.MAX_INDIVIDUAL_VARIANCE);O<m&&(m=O,g=A)}if(g>=0)return g;throw new W}}Pt.MAX_AVG_VARIANCE=.48,Pt.MAX_INDIVIDUAL_VARIANCE=.7,Pt.START_END_PATTERN=Int32Array.from([1,1,1]),Pt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Pt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Pt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Pn{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,l,d){let h=this.decodeRowStringBuffer,m=this.decodeMiddle(l,d,h),g=h.toString(),y=Pn.parseExtensionString(g),A=[new pe((d[0]+d[1])/2,i),new pe(m,i)],I=new X(g,null,0,A,se.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&I.putAllMetadata(y),I}decodeMiddle(i,l,d){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let m=i.getSize(),g=l[1],y=0;for(let I=0;I<5&&g<m;I++){let O=Pt.decodeDigit(i,h,g,Pt.L_AND_G_PATTERNS);d+=String.fromCharCode(48+O%10);for(let z of h)g+=z;O>=10&&(y|=1<<4-I),I!==4&&(g=i.getNextSet(g),g=i.getNextUnset(g))}if(d.length!==5)throw new W;let A=this.determineCheckDigit(y);if(Pn.extensionChecksum(d.toString())!==A)throw new W;return g}static extensionChecksum(i){let l=i.length,d=0;for(let h=l-2;h>=0;h-=2)d+=i.charAt(h).charCodeAt(0)-48;d*=3;for(let h=l-1;h>=0;h-=2)d+=i.charAt(h).charCodeAt(0)-48;return d*=3,d%10}determineCheckDigit(i){for(let l=0;l<10;l++)if(i===this.CHECK_DIGIT_ENCODINGS[l])return l;throw new W}static parseExtensionString(i){if(i.length!==5)return null;let l=Pn.parseExtension5String(i);return l==null?null:new Map([[ge.SUGGESTED_PRICE,l]])}static parseExtension5String(i){let l;switch(i.charAt(0)){case"0":l="£";break;case"5":l="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}l="";break;default:l="";break}let d=parseInt(i.substring(1)),h=(d/100).toString(),m=d%100,g=m<10?"0"+m:m.toString();return l+h+"."+g}}class Us{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,l,d){let h=this.decodeRowStringBuffer,m=this.decodeMiddle(l,d,h),g=h.toString(),y=Us.parseExtensionString(g),A=[new pe((d[0]+d[1])/2,i),new pe(m,i)],I=new X(g,null,0,A,se.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&I.putAllMetadata(y),I}decodeMiddle(i,l,d){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let m=i.getSize(),g=l[1],y=0;for(let A=0;A<2&&g<m;A++){let I=Pt.decodeDigit(i,h,g,Pt.L_AND_G_PATTERNS);d+=String.fromCharCode(48+I%10);for(let O of h)g+=O;I>=10&&(y|=1<<1-A),A!==1&&(g=i.getNextSet(g),g=i.getNextUnset(g))}if(d.length!==2)throw new W;if(parseInt(d.toString())%4!==y)throw new W;return g}static parseExtensionString(i){return i.length!==2?null:new Map([[ge.ISSUE_NUMBER,parseInt(i)]])}}class ho{static decodeRow(i,l,d){let h=Pt.findGuardPattern(l,d,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Pn().decodeRow(i,l,h)}catch{return new Us().decodeRow(i,l,h)}}}ho.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class kt extends Pt{constructor(){super(),this.decodeRowStringBuffer="",kt.L_AND_G_PATTERNS=kt.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let l=kt.L_PATTERNS[i-10],d=new Int32Array(l.length);for(let h=0;h<l.length;h++)d[h]=l[l.length-h-1];kt.L_AND_G_PATTERNS[i]=d}}decodeRow(i,l,d){let h=kt.findStartGuardPattern(l),m=d==null?null:d.get(L.NEED_RESULT_POINT_CALLBACK);if(m!=null){const Pe=new pe((h[0]+h[1])/2,i);m.foundPossibleResultPoint(Pe)}let g=this.decodeMiddle(l,h,this.decodeRowStringBuffer),y=g.rowOffset,A=g.resultString;if(m!=null){const Pe=new pe(y,i);m.foundPossibleResultPoint(Pe)}let I=this.decodeEnd(l,y);if(m!=null){const Pe=new pe((I[0]+I[1])/2,i);m.foundPossibleResultPoint(Pe)}let O=I[1],z=O+(O-I[0]);if(z>=l.getSize()||!l.isRange(O,z,!1))throw new W;let V=A.toString();if(V.length<8)throw new R;if(!kt.checkChecksum(V))throw new j;let Z=(h[1]+h[0])/2,ie=(I[1]+I[0])/2,le=this.getBarcodeFormat(),fe=[new pe(Z,i),new pe(ie,i)],ve=new X(V,null,0,fe,le,new Date().getTime()),De=0;try{let Pe=ho.decodeRow(i,l,I[1]);ve.putMetadata(ge.UPC_EAN_EXTENSION,Pe.getText()),ve.putAllMetadata(Pe.getResultMetadata()),ve.addResultPoints(Pe.getResultPoints()),De=Pe.getText().length}catch{}let Le=d==null?null:d.get(L.ALLOWED_EAN_EXTENSIONS);if(Le!=null){let Pe=!1;for(let Ct in Le)if(De.toString()===Ct){Pe=!0;break}if(!Pe)throw new W}return ve}decodeEnd(i,l){return kt.findGuardPattern(i,l,!1,kt.START_END_PATTERN,new Int32Array(kt.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return kt.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let l=i.length;if(l===0)return!1;let d=parseInt(i.charAt(l-1),10);return kt.getStandardUPCEANChecksum(i.substring(0,l-1))===d}static getStandardUPCEANChecksum(i){let l=i.length,d=0;for(let h=l-1;h>=0;h-=2){let m=i.charAt(h).charCodeAt(0)-48;if(m<0||m>9)throw new R;d+=m}d*=3;for(let h=l-2;h>=0;h-=2){let m=i.charAt(h).charCodeAt(0)-48;if(m<0||m>9)throw new R;d+=m}return(1e3-d)%10}}class mn extends kt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,l,d){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let m=i.getSize(),g=l[1],y=0;for(let I=0;I<6&&g<m;I++){let O=kt.decodeDigit(i,h,g,kt.L_AND_G_PATTERNS);d+=String.fromCharCode(48+O%10);for(let z of h)g+=z;O>=10&&(y|=1<<5-I)}d=mn.determineFirstDigit(d,y),g=kt.findGuardPattern(i,g,!0,kt.MIDDLE_PATTERN,new Int32Array(kt.MIDDLE_PATTERN.length).fill(0))[1];for(let I=0;I<6&&g<m;I++){let O=kt.decodeDigit(i,h,g,kt.L_PATTERNS);d+=String.fromCharCode(48+O);for(let z of h)g+=z}return{rowOffset:g,resultString:d}}getBarcodeFormat(){return se.EAN_13}static determineFirstDigit(i,l){for(let d=0;d<10;d++)if(l===this.FIRST_DIGIT_ENCODINGS[d])return i=String.fromCharCode(48+d)+i,i;throw new W}}mn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Jn extends kt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,l,d){const h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let m=i.getSize(),g=l[1];for(let A=0;A<4&&g<m;A++){let I=kt.decodeDigit(i,h,g,kt.L_PATTERNS);d+=String.fromCharCode(48+I);for(let O of h)g+=O}g=kt.findGuardPattern(i,g,!0,kt.MIDDLE_PATTERN,new Int32Array(kt.MIDDLE_PATTERN.length).fill(0))[1];for(let A=0;A<4&&g<m;A++){let I=kt.decodeDigit(i,h,g,kt.L_PATTERNS);d+=String.fromCharCode(48+I);for(let O of h)g+=O}return{rowOffset:g,resultString:d}}getBarcodeFormat(){return se.EAN_8}}class fo extends kt{constructor(){super(...arguments),this.ean13Reader=new mn}getBarcodeFormat(){return se.UPC_A}decode(i,l){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,l,d){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,l,d))}decodeMiddle(i,l,d){return this.ean13Reader.decodeMiddle(i,l,d)}maybeReturnResult(i){let l=i.getText();if(l.charAt(0)==="0"){let d=new X(l.substring(1),null,null,i.getResultPoints(),se.UPC_A);return i.getResultMetadata()!=null&&d.putAllMetadata(i.getResultMetadata()),d}else throw new W}reset(){this.ean13Reader.reset()}}class Xe extends kt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,l,d){const h=this.decodeMiddleCounters.map(I=>I);h[0]=0,h[1]=0,h[2]=0,h[3]=0;const m=i.getSize();let g=l[1],y=0;for(let I=0;I<6&&g<m;I++){const O=Xe.decodeDigit(i,h,g,Xe.L_AND_G_PATTERNS);d+=String.fromCharCode(48+O%10);for(let z of h)g+=z;O>=10&&(y|=1<<5-I)}let A=Xe.determineNumSysAndCheckDigit(d,y);return{rowOffset:g,resultString:A}}decodeEnd(i,l){return Xe.findGuardPatternWithoutCounters(i,l,!0,Xe.MIDDLE_END_PATTERN)}checkChecksum(i){return kt.checkChecksum(Xe.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,l){for(let d=0;d<=1;d++)for(let h=0;h<10;h++)if(l===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[d][h]){let m=String.fromCharCode(48+d),g=String.fromCharCode(48+h);return m+i+g}throw W.getNotFoundInstance()}getBarcodeFormat(){return se.UPC_E}static convertUPCEtoUPCA(i){const l=i.slice(1,7).split("").map(m=>m.charCodeAt(0)),d=new q;d.append(i.charAt(0));let h=l[5];switch(h){case 0:case 1:case 2:d.appendChars(l,0,2),d.append(h),d.append("0000"),d.appendChars(l,2,3);break;case 3:d.appendChars(l,0,3),d.append("00000"),d.appendChars(l,3,2);break;case 4:d.appendChars(l,0,4),d.append("00000"),d.append(l[4]);break;default:d.appendChars(l,0,5),d.append("0000"),d.append(h);break}return i.length>=8&&d.append(i.charAt(7)),d.toString()}}Xe.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Xe.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ot extends ft{constructor(i){super();let l=i==null?null:i.get(L.POSSIBLE_FORMATS),d=[];s(l)?(d.push(new mn),d.push(new fo),d.push(new Jn),d.push(new Xe)):(l.indexOf(se.EAN_13)>-1&&d.push(new mn),l.indexOf(se.UPC_A)>-1&&d.push(new fo),l.indexOf(se.EAN_8)>-1&&d.push(new Jn),l.indexOf(se.UPC_E)>-1&&d.push(new Xe)),this.readers=d}decodeRow(i,l,d){for(let h of this.readers)try{const m=h.decodeRow(i,l,d),g=m.getBarcodeFormat()===se.EAN_13&&m.getText().charAt(0)==="0",y=d==null?null:d.get(L.POSSIBLE_FORMATS),A=y==null||y.includes(se.UPC_A);if(g&&A){const I=m.getRawBytes(),O=new X(m.getText().substring(1),I,I?I.length:null,m.getResultPoints(),se.UPC_A);return O.putAllMetadata(m.getResultMetadata()),O}return m}catch{}throw new W}reset(){for(let i of this.readers)i.reset()}}class xt extends ft{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(i,l){for(let d=0;d<l.length;d++)if(ft.patternMatchVariance(i,l[d],xt.MAX_INDIVIDUAL_VARIANCE)<xt.MAX_AVG_VARIANCE)return d;throw new W}static count(i){return Ge.sum(new Int32Array(i))}static increment(i,l){let d=0,h=l[0];for(let m=1;m<i.length;m++)l[m]>h&&(h=l[m],d=m);i[d]++}static decrement(i,l){let d=0,h=l[0];for(let m=1;m<i.length;m++)l[m]<h&&(h=l[m],d=m);i[d]--}static isFinderPattern(i){let l=i[0]+i[1],d=l+i[2]+i[3],h=l/d;if(h>=xt.MIN_FINDER_PATTERN_RATIO&&h<=xt.MAX_FINDER_PATTERN_RATIO){let m=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER;for(let y of i)y>g&&(g=y),y<m&&(m=y);return g<10*m}return!1}}xt.MAX_AVG_VARIANCE=.2,xt.MAX_INDIVIDUAL_VARIANCE=.45,xt.MIN_FINDER_PATTERN_RATIO=9.5/12,xt.MAX_FINDER_PATTERN_RATIO=12.5/14;class Gr{constructor(i,l){this.value=i,this.checksumPortion=l}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof Gr))return!1;const l=i;return this.value===l.value&&this.checksumPortion===l.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class pn{constructor(i,l,d,h,m){this.value=i,this.startEnd=l,this.value=i,this.startEnd=l,this.resultPoints=new Array,this.resultPoints.push(new pe(d,m)),this.resultPoints.push(new pe(h,m))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof pn))return!1;const l=i;return this.value===l.value}hashCode(){return this.value}}class Lr{constructor(){}static getRSSvalue(i,l,d){let h=0;for(let A of i)h+=A;let m=0,g=0,y=i.length;for(let A=0;A<y-1;A++){let I;for(I=1,g|=1<<A;I<i[A];I++,g&=~(1<<A)){let O=Lr.combins(h-I-1,y-A-2);if(d&&g===0&&h-I-(y-A-1)>=y-A-1&&(O-=Lr.combins(h-I-(y-A),y-A-2)),y-A-1>1){let z=0;for(let V=h-I-(y-A-2);V>l;V--)z+=Lr.combins(h-I-V-1,y-A-3);O-=z*(y-1-A)}else h-I>l&&O--;m+=O}h-=I}return m}static combins(i,l){let d,h;i-l>l?(h=l,d=i-l):(h=i-l,d=l);let m=1,g=1;for(let y=i;y>d;y--)m*=y,g<=h&&(m/=g,g++);for(;g<=h;)m/=g,g++;return m}}class Da{static buildBitArray(i){let l=i.length*2-1;i[i.length-1].getRightChar()==null&&(l-=1);let d=12*l,h=new k(d),m=0,y=i[0].getRightChar().getValue();for(let A=11;A>=0;--A)y&1<<A&&h.set(m),m++;for(let A=1;A<i.length;++A){let I=i[A],O=I.getLeftChar().getValue();for(let z=11;z>=0;--z)O&1<<z&&h.set(m),m++;if(I.getRightChar()!=null){let z=I.getRightChar().getValue();for(let V=11;V>=0;--V)z&1<<V&&h.set(m),m++}}return h}}class Fr{constructor(i,l){l?this.decodedInformation=null:(this.finished=i,this.decodedInformation=l)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class vs{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}class On extends vs{constructor(i,l){super(i),this.value=l}getValue(){return this.value}isFNC1(){return this.value===On.FNC1}}On.FNC1="$";class mo extends vs{constructor(i,l,d){super(i),d?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=l}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class ws extends vs{constructor(i,l,d){if(super(i),l<0||l>10||d<0||d>10)throw new R;this.firstDigit=l,this.secondDigit=d}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===ws.FNC1}isSecondDigitFNC1(){return this.secondDigit===ws.FNC1}isAnyFNC1(){return this.firstDigit===ws.FNC1||this.secondDigit===ws.FNC1}}ws.FNC1=10;class Ke{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new W;let l=i.substring(0,2);for(let m of Ke.TWO_DIGIT_DATA_LENGTH)if(m[0]===l)return m[1]===Ke.VARIABLE_LENGTH?Ke.processVariableAI(2,m[2],i):Ke.processFixedAI(2,m[1],i);if(i.length<3)throw new W;let d=i.substring(0,3);for(let m of Ke.THREE_DIGIT_DATA_LENGTH)if(m[0]===d)return m[1]===Ke.VARIABLE_LENGTH?Ke.processVariableAI(3,m[2],i):Ke.processFixedAI(3,m[1],i);for(let m of Ke.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(m[0]===d)return m[1]===Ke.VARIABLE_LENGTH?Ke.processVariableAI(4,m[2],i):Ke.processFixedAI(4,m[1],i);if(i.length<4)throw new W;let h=i.substring(0,4);for(let m of Ke.FOUR_DIGIT_DATA_LENGTH)if(m[0]===h)return m[1]===Ke.VARIABLE_LENGTH?Ke.processVariableAI(4,m[2],i):Ke.processFixedAI(4,m[1],i);throw new W}static processFixedAI(i,l,d){if(d.length<i)throw new W;let h=d.substring(0,i);if(d.length<i+l)throw new W;let m=d.substring(i,i+l),g=d.substring(i+l),y="("+h+")"+m,A=Ke.parseFieldsInGeneralPurpose(g);return A==null?y:y+A}static processVariableAI(i,l,d){let h=d.substring(0,i),m;d.length<i+l?m=d.length:m=i+l;let g=d.substring(i,m),y=d.substring(m),A="("+h+")"+g,I=Ke.parseFieldsInGeneralPurpose(y);return I==null?A:A+I}}Ke.VARIABLE_LENGTH=[],Ke.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ke.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ke.VARIABLE_LENGTH,20],["22",Ke.VARIABLE_LENGTH,29],["30",Ke.VARIABLE_LENGTH,8],["37",Ke.VARIABLE_LENGTH,8],["90",Ke.VARIABLE_LENGTH,30],["91",Ke.VARIABLE_LENGTH,30],["92",Ke.VARIABLE_LENGTH,30],["93",Ke.VARIABLE_LENGTH,30],["94",Ke.VARIABLE_LENGTH,30],["95",Ke.VARIABLE_LENGTH,30],["96",Ke.VARIABLE_LENGTH,30],["97",Ke.VARIABLE_LENGTH,3],["98",Ke.VARIABLE_LENGTH,30],["99",Ke.VARIABLE_LENGTH,30]],Ke.THREE_DIGIT_DATA_LENGTH=[["240",Ke.VARIABLE_LENGTH,30],["241",Ke.VARIABLE_LENGTH,30],["242",Ke.VARIABLE_LENGTH,6],["250",Ke.VARIABLE_LENGTH,30],["251",Ke.VARIABLE_LENGTH,30],["253",Ke.VARIABLE_LENGTH,17],["254",Ke.VARIABLE_LENGTH,20],["400",Ke.VARIABLE_LENGTH,30],["401",Ke.VARIABLE_LENGTH,30],["402",17],["403",Ke.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ke.VARIABLE_LENGTH,20],["421",Ke.VARIABLE_LENGTH,15],["422",3],["423",Ke.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ke.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ke.VARIABLE_LENGTH,15],["391",Ke.VARIABLE_LENGTH,18],["392",Ke.VARIABLE_LENGTH,15],["393",Ke.VARIABLE_LENGTH,18],["703",Ke.VARIABLE_LENGTH,30]],Ke.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ke.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ke.VARIABLE_LENGTH,20],["8003",Ke.VARIABLE_LENGTH,30],["8004",Ke.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ke.VARIABLE_LENGTH,30],["8008",Ke.VARIABLE_LENGTH,12],["8018",18],["8020",Ke.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ke.VARIABLE_LENGTH,70],["8200",Ke.VARIABLE_LENGTH,70]];class vl{constructor(i){this.buffer=new q,this.information=i}decodeAllCodes(i,l){let d=l,h=null;do{let m=this.decodeGeneralPurposeField(d,h),g=Ke.parseFieldsInGeneralPurpose(m.getNewString());if(g!=null&&i.append(g),m.isRemaining()?h=""+m.getRemainingValue():h=null,d===m.getNewPosition())break;d=m.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let l=i;l<i+3;++l)if(this.information.get(l))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let m=this.extractNumericValueFromBitArray(i,4);return m===0?new ws(this.information.getSize(),ws.FNC1,ws.FNC1):new ws(this.information.getSize(),m-1,ws.FNC1)}let l=this.extractNumericValueFromBitArray(i,7),d=(l-8)/11,h=(l-8)%11;return new ws(i+7,d,h)}extractNumericValueFromBitArray(i,l){return vl.extractNumericValueFromBitArray(this.information,i,l)}static extractNumericValueFromBitArray(i,l,d){let h=0;for(let m=0;m<d;++m)i.get(l+m)&&(h|=1<<d-m-1);return h}decodeGeneralPurposeField(i,l){this.buffer.setLengthToZero(),l!=null&&this.buffer.append(l),this.current.setPosition(i);let d=this.parseBlocks();return d!=null&&d.isRemaining()?new mo(this.current.getPosition(),this.buffer.toString(),d.getRemainingValue()):new mo(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,l;do{let d=this.current.getPosition();if(this.current.isAlpha()?(l=this.parseAlphaBlock(),i=l.isFinished()):this.current.isIsoIec646()?(l=this.parseIsoIec646Block(),i=l.isFinished()):(l=this.parseNumericBlock(),i=l.isFinished()),!(d!==this.current.getPosition())&&!i)break}while(!i);return l.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let l;return i.isSecondDigitFNC1()?l=new mo(this.current.getPosition(),this.buffer.toString()):l=new mo(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new Fr(!0,l)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let l=new mo(this.current.getPosition(),this.buffer.toString());return new Fr(!0,l)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Fr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let l=new mo(this.current.getPosition(),this.buffer.toString());return new Fr(!0,l)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Fr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let l=new mo(this.current.getPosition(),this.buffer.toString());return new Fr(!0,l)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Fr(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,5);if(l>=5&&l<16)return!0;if(i+7>this.information.getSize())return!1;let d=this.extractNumericValueFromBitArray(i,7);if(d>=64&&d<116)return!0;if(i+8>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(i,8);return h>=232&&h<253}decodeIsoIec646(i){let l=this.extractNumericValueFromBitArray(i,5);if(l===15)return new On(i+5,On.FNC1);if(l>=5&&l<15)return new On(i+5,"0"+(l-5));let d=this.extractNumericValueFromBitArray(i,7);if(d>=64&&d<90)return new On(i+7,""+(d+1));if(d>=90&&d<116)return new On(i+7,""+(d+7));let h=this.extractNumericValueFromBitArray(i,8),m;switch(h){case 232:m="!";break;case 233:m='"';break;case 234:m="%";break;case 235:m="&";break;case 236:m="'";break;case 237:m="(";break;case 238:m=")";break;case 239:m="*";break;case 240:m="+";break;case 241:m=",";break;case 242:m="-";break;case 243:m=".";break;case 244:m="/";break;case 245:m=":";break;case 246:m=";";break;case 247:m="<";break;case 248:m="=";break;case 249:m=">";break;case 250:m="?";break;case 251:m="_";break;case 252:m=" ";break;default:throw new R}return new On(i+8,m)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,5);if(l>=5&&l<16)return!0;if(i+6>this.information.getSize())return!1;let d=this.extractNumericValueFromBitArray(i,6);return d>=16&&d<63}decodeAlphanumeric(i){let l=this.extractNumericValueFromBitArray(i,5);if(l===15)return new On(i+5,On.FNC1);if(l>=5&&l<15)return new On(i+5,"0"+(l-5));let d=this.extractNumericValueFromBitArray(i,6);if(d>=32&&d<58)return new On(i+6,""+(d+33));let h;switch(d){case 58:h="*";break;case 59:h=",";break;case 60:h="-";break;case 61:h=".";break;case 62:h="/";break;default:throw new Ee("Decoding invalid alphanumeric value: "+d)}return new On(i+6,h)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let l=0;l<5&&l+i<this.information.getSize();++l)if(l===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+l))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let l=i;l<i+3;++l)if(this.information.get(l))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let l=0;l<4&&l+i<this.information.getSize();++l)if(this.information.get(i+l))return!1;return!0}}class pp{constructor(i){this.information=i,this.generalDecoder=new vl(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Dn extends pp{constructor(i){super(i)}encodeCompressedGtin(i,l){i.append("(01)");let d=i.length();i.append("9"),this.encodeCompressedGtinWithoutAI(i,l,d)}encodeCompressedGtinWithoutAI(i,l,d){for(let h=0;h<4;++h){let m=this.getGeneralDecoder().extractNumericValueFromBitArray(l+10*h,10);m/100===0&&i.append("0"),m/10===0&&i.append("0"),i.append(m)}Dn.appendCheckDigit(i,d)}static appendCheckDigit(i,l){let d=0;for(let h=0;h<13;h++){let m=i.charAt(h+l).charCodeAt(0)-48;d+=h&1?m:3*m}d=10-d%10,d===10&&(d=0),i.append(d)}}Dn.GTIN_SIZE=40;class wl extends Dn{constructor(i){super(i)}parseInformation(){let i=new q;i.append("(01)");let l=i.length(),d=this.getGeneralDecoder().extractNumericValueFromBitArray(wl.HEADER_SIZE,4);return i.append(d),this.encodeCompressedGtinWithoutAI(i,wl.HEADER_SIZE+4,l),this.getGeneralDecoder().decodeAllCodes(i,wl.HEADER_SIZE+44)}}wl.HEADER_SIZE=4;class Zu extends pp{constructor(i){super(i)}parseInformation(){let i=new q;return this.getGeneralDecoder().decodeAllCodes(i,Zu.HEADER_SIZE)}}Zu.HEADER_SIZE=5;class Ju extends Dn{constructor(i){super(i)}encodeCompressedWeight(i,l,d){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(l,d);this.addWeightCode(i,h);let m=this.checkWeight(h),g=1e5;for(let y=0;y<5;++y)m/g===0&&i.append("0"),g/=10;i.append(m)}}class da extends Ju{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()!=da.HEADER_SIZE+Ju.GTIN_SIZE+da.WEIGHT_SIZE)throw new W;let i=new q;return this.encodeCompressedGtin(i,da.HEADER_SIZE),this.encodeCompressedWeight(i,da.HEADER_SIZE+Ju.GTIN_SIZE,da.WEIGHT_SIZE),i.toString()}}da.HEADER_SIZE=5,da.WEIGHT_SIZE=15;class Ik extends da{constructor(i){super(i)}addWeightCode(i,l){i.append("(3103)")}checkWeight(i){return i}}class Rk extends da{constructor(i){super(i)}addWeightCode(i,l){l<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}class ua extends Dn{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<ua.HEADER_SIZE+Dn.GTIN_SIZE)throw new W;let i=new q;this.encodeCompressedGtin(i,ua.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(ua.HEADER_SIZE+Dn.GTIN_SIZE,ua.LAST_DIGIT_SIZE);i.append("(392"),i.append(l),i.append(")");let d=this.getGeneralDecoder().decodeGeneralPurposeField(ua.HEADER_SIZE+Dn.GTIN_SIZE+ua.LAST_DIGIT_SIZE,null);return i.append(d.getNewString()),i.toString()}}ua.HEADER_SIZE=8,ua.LAST_DIGIT_SIZE=2;class _n extends Dn{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<_n.HEADER_SIZE+Dn.GTIN_SIZE)throw new W;let i=new q;this.encodeCompressedGtin(i,_n.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(_n.HEADER_SIZE+Dn.GTIN_SIZE,_n.LAST_DIGIT_SIZE);i.append("(393"),i.append(l),i.append(")");let d=this.getGeneralDecoder().extractNumericValueFromBitArray(_n.HEADER_SIZE+Dn.GTIN_SIZE+_n.LAST_DIGIT_SIZE,_n.FIRST_THREE_DIGITS_SIZE);d/100==0&&i.append("0"),d/10==0&&i.append("0"),i.append(d);let h=this.getGeneralDecoder().decodeGeneralPurposeField(_n.HEADER_SIZE+Dn.GTIN_SIZE+_n.LAST_DIGIT_SIZE+_n.FIRST_THREE_DIGITS_SIZE,null);return i.append(h.getNewString()),i.toString()}}_n.HEADER_SIZE=8,_n.LAST_DIGIT_SIZE=2,_n.FIRST_THREE_DIGITS_SIZE=10;class ur extends Ju{constructor(i,l,d){super(i),this.dateCode=d,this.firstAIdigits=l}parseInformation(){if(this.getInformation().getSize()!=ur.HEADER_SIZE+ur.GTIN_SIZE+ur.WEIGHT_SIZE+ur.DATE_SIZE)throw new W;let i=new q;return this.encodeCompressedGtin(i,ur.HEADER_SIZE),this.encodeCompressedWeight(i,ur.HEADER_SIZE+ur.GTIN_SIZE,ur.WEIGHT_SIZE),this.encodeCompressedDate(i,ur.HEADER_SIZE+ur.GTIN_SIZE+ur.WEIGHT_SIZE),i.toString()}encodeCompressedDate(i,l){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(l,ur.DATE_SIZE);if(d==38400)return;i.append("("),i.append(this.dateCode),i.append(")");let h=d%32;d/=32;let m=d%12+1;d/=12;let g=d;g/10==0&&i.append("0"),i.append(g),m/10==0&&i.append("0"),i.append(m),h/10==0&&i.append("0"),i.append(h)}addWeightCode(i,l){i.append("("),i.append(this.firstAIdigits),i.append(l/1e5),i.append(")")}checkWeight(i){return i%1e5}}ur.HEADER_SIZE=8,ur.WEIGHT_SIZE=20,ur.DATE_SIZE=16;function zv(B){try{if(B.get(1))return new wl(B);if(!B.get(2))return new Zu(B);switch(vl.extractNumericValueFromBitArray(B,1,4)){case 4:return new Ik(B);case 5:return new Rk(B)}switch(vl.extractNumericValueFromBitArray(B,1,5)){case 12:return new ua(B);case 13:return new _n(B)}switch(vl.extractNumericValueFromBitArray(B,1,7)){case 56:return new ur(B,"310","11");case 57:return new ur(B,"320","11");case 58:return new ur(B,"310","13");case 59:return new ur(B,"320","13");case 60:return new ur(B,"310","15");case 61:return new ur(B,"320","15");case 62:return new ur(B,"310","17");case 63:return new ur(B,"320","17")}}catch(i){throw console.log(i),new Ee("unknown decoder: "+B)}}class si{constructor(i,l,d,h){this.leftchar=i,this.rightchar=l,this.finderpattern=d,this.maybeLast=h}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,l){return i instanceof si?si.equalsOrNull(i.leftchar,l.leftchar)&&si.equalsOrNull(i.rightchar,l.rightchar)&&si.equalsOrNull(i.finderpattern,l.finderpattern):!1}static equalsOrNull(i,l){return i===null?l===null:si.equals(i,l)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class gp{constructor(i,l,d){this.pairs=i,this.rowNumber=l,this.wasReversed=d}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,l){return i instanceof gp?this.checkEqualitity(i,l)&&i.wasReversed===l.wasReversed:!1}checkEqualitity(i,l){if(!i||!l)return;let d;return i.forEach((h,m)=>{l.forEach(g=>{h.getLeftChar().getValue()===g.getLeftChar().getValue()&&h.getRightChar().getValue()===g.getRightChar().getValue()&&h.getFinderPatter().getValue()===g.getFinderPatter().getValue()&&(d=!0)})}),d}}class ke extends xt{constructor(i){super(...arguments),this.pairs=new Array(ke.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,l,d){this.pairs.length=0,this.startFromEven=!1;try{return ke.constructResult(this.decodeRow2pairs(i,l))}catch(h){this.verbose&&console.log(h)}return this.pairs.length=0,this.startFromEven=!0,ke.constructResult(this.decodeRow2pairs(i,l))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,l){let d=!1;for(;!d;)try{this.pairs.push(this.retrieveNextPair(l,this.pairs,i))}catch(m){if(m instanceof W){if(!this.pairs.length)throw new W;d=!0}}if(this.checkChecksum())return this.pairs;let h;if(this.rows.length?h=!0:h=!1,this.storeRow(i,!1),h){let m=this.checkRowsBoolean(!1);if(m!=null||(m=this.checkRowsBoolean(!0),m!=null))return m}throw new W}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let l=null;try{l=this.checkRows(new Array,0)}catch(d){this.verbose&&console.log(d)}return i&&(this.rows=this.rows.reverse()),l}checkRows(i,l){for(let d=l;d<this.rows.length;d++){let h=this.rows[d];this.pairs.length=0;for(let g of i)this.pairs.push(g.getPairs());if(this.pairs.push(h.getPairs()),!ke.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let m=new Array(i);m.push(h);try{return this.checkRows(m,d+1)}catch(g){this.verbose&&console.log(g)}}throw new W}static isValidSequence(i){for(let l of ke.FINDER_PATTERN_SEQUENCES){if(i.length>l.length)continue;let d=!0;for(let h=0;h<i.length;h++)if(i[h].getFinderPattern().getValue()!=l[h]){d=!1;break}if(d)return!0}return!1}storeRow(i,l){let d=0,h=!1,m=!1;for(;d<this.rows.length;){let g=this.rows[d];if(g.getRowNumber()>i){m=g.isEquivalent(this.pairs);break}h=g.isEquivalent(this.pairs),d++}m||h||ke.isPartialRow(this.pairs,this.rows)||(this.rows.push(d,new gp(this.pairs,i,l)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,l){for(let d of l)if(d.getPairs().length!==i.length){for(let h of d.getPairs())for(let m of i)if(si.equals(h,m))break}}static isPartialRow(i,l){for(let d of l){let h=!0;for(let m of i){let g=!1;for(let y of d.getPairs())if(m.equals(y)){g=!0;break}if(!g){h=!1;break}}if(h)return!0}return!1}getRows(){return this.rows}static constructResult(i){let l=Da.buildBitArray(i),h=zv(l).parseInformation(),m=i[0].getFinderPattern().getResultPoints(),g=i[i.length-1].getFinderPattern().getResultPoints(),y=[m[0],m[1],g[0],g[1]];return new X(h,null,null,y,se.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),l=i.getLeftChar(),d=i.getRightChar();if(d==null)return!1;let h=d.getChecksumPortion(),m=2;for(let y=1;y<this.pairs.size();++y){let A=this.pairs.get(y);h+=A.getLeftChar().getChecksumPortion(),m++;let I=A.getRightChar();I!=null&&(h+=I.getChecksumPortion(),m++)}return h%=211,211*(m-4)+h==l.getValue()}static getNextSecondBar(i,l){let d;return i.get(l)?(d=i.getNextUnset(l),d=i.getNextSet(d)):(d=i.getNextSet(l),d=i.getNextUnset(d)),d}retrieveNextPair(i,l,d){let h=l.length%2==0;this.startFromEven&&(h=!h);let m,g=!0,y=-1;do this.findNextPair(i,l,y),m=this.parseFoundFinderPattern(i,d,h),m==null?y=ke.getNextSecondBar(i,this.startEnd[0]):g=!1;while(g);let A=this.decodeDataCharacter(i,m,h,!0);if(!this.isEmptyPair(l)&&l[l.length-1].mustBeLast())throw new W;let I;try{I=this.decodeDataCharacter(i,m,h,!1)}catch(O){I=null,this.verbose&&console.log(O)}return new si(A,I,m,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,l,d){let h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;let m=i.getSize(),g;d>=0?g=d:this.isEmptyPair(l)?g=0:g=l[l.length-1].getFinderPattern().getStartEnd()[1];let y=l.length%2!=0;this.startFromEven&&(y=!y);let A=!1;for(;g<m&&(A=!i.get(g),!!A);)g++;let I=0,O=g;for(let z=g;z<m;z++)if(i.get(z)!=A)h[I]++;else{if(I==3){if(y&&ke.reverseCounters(h),ke.isFinderPattern(h)){this.startEnd[0]=O,this.startEnd[1]=z;return}y&&ke.reverseCounters(h),O+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,I--}else I++;h[I]=1,A=!A}throw new W}static reverseCounters(i){let l=i.length;for(let d=0;d<l/2;++d){let h=i[d];i[d]=i[l-d-1],i[l-d-1]=h}}parseFoundFinderPattern(i,l,d){let h,m,g;if(d){let I=this.startEnd[0]-1;for(;I>=0&&!i.get(I);)I--;I++,h=this.startEnd[0]-I,m=I,g=this.startEnd[1]}else m=this.startEnd[0],g=i.getNextUnset(this.startEnd[1]+1),h=g-this.startEnd[1];let y=this.getDecodeFinderCounters();C.arraycopy(y,0,y,1,y.length-1),y[0]=h;let A;try{A=this.parseFinderValue(y,ke.FINDER_PATTERNS)}catch{return null}return new pn(A,[m,g],m,g,l)}decodeDataCharacter(i,l,d,h){let m=this.getDataCharacterCounters();for(let Zt=0;Zt<m.length;Zt++)m[Zt]=0;if(h)ke.recordPatternInReverse(i,l.getStartEnd()[0],m);else{ke.recordPattern(i,l.getStartEnd()[1],m);for(let Zt=0,nn=m.length-1;Zt<nn;Zt++,nn--){let es=m[Zt];m[Zt]=m[nn],m[nn]=es}}let g=17,y=Ge.sum(new Int32Array(m))/g,A=(l.getStartEnd()[1]-l.getStartEnd()[0])/15;if(Math.abs(y-A)/A>.3)throw new W;let I=this.getOddCounts(),O=this.getEvenCounts(),z=this.getOddRoundingErrors(),V=this.getEvenRoundingErrors();for(let Zt=0;Zt<m.length;Zt++){let nn=1*m[Zt]/y,es=nn+.5;if(es<1){if(nn<.3)throw new W;es=1}else if(es>8){if(nn>8.7)throw new W;es=8}let jl=Zt/2;Zt&1?(O[jl]=es,V[jl]=nn-es):(I[jl]=es,z[jl]=nn-es)}this.adjustOddEvenCounts(g);let Z=4*l.getValue()+(d?0:2)+(h?0:1)-1,ie=0,le=0;for(let Zt=I.length-1;Zt>=0;Zt--){if(ke.isNotA1left(l,d,h)){let nn=ke.WEIGHTS[Z][2*Zt];le+=I[Zt]*nn}ie+=I[Zt]}let fe=0;for(let Zt=O.length-1;Zt>=0;Zt--)if(ke.isNotA1left(l,d,h)){let nn=ke.WEIGHTS[Z][2*Zt+1];fe+=O[Zt]*nn}let ve=le+fe;if(ie&1||ie>13||ie<4)throw new W;let De=(13-ie)/2,Le=ke.SYMBOL_WIDEST[De],Pe=9-Le,Ct=Lr.getRSSvalue(I,Le,!0),pt=Lr.getRSSvalue(O,Pe,!1),Ln=ke.EVEN_TOTAL_SUBSET[De],$s=ke.GSUM[De],Fn=Ct*Ln+pt+$s;return new Gr(Fn,ve)}static isNotA1left(i,l,d){return!(i.getValue()==0&&l&&d)}adjustOddEvenCounts(i){let l=Ge.sum(new Int32Array(this.getOddCounts())),d=Ge.sum(new Int32Array(this.getEvenCounts())),h=!1,m=!1;l>13?m=!0:l<4&&(h=!0);let g=!1,y=!1;d>13?y=!0:d<4&&(g=!0);let A=l+d-i,I=(l&1)==1,O=(d&1)==0;if(A==1)if(I){if(O)throw new W;m=!0}else{if(!O)throw new W;y=!0}else if(A==-1)if(I){if(O)throw new W;h=!0}else{if(!O)throw new W;g=!0}else if(A==0){if(I){if(!O)throw new W;l<d?(h=!0,y=!0):(m=!0,g=!0)}else if(O)throw new W}else throw new W;if(h){if(m)throw new W;ke.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(m&&ke.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(y)throw new W;ke.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&ke.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ke.SYMBOL_WIDEST=[7,5,4,3,1],ke.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ke.GSUM=[0,348,1388,2948,3988],ke.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ke.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ke.FINDER_PAT_A=0,ke.FINDER_PAT_B=1,ke.FINDER_PAT_C=2,ke.FINDER_PAT_D=3,ke.FINDER_PAT_E=4,ke.FINDER_PAT_F=5,ke.FINDER_PATTERN_SEQUENCES=[[ke.FINDER_PAT_A,ke.FINDER_PAT_A],[ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B],[ke.FINDER_PAT_A,ke.FINDER_PAT_C,ke.FINDER_PAT_B,ke.FINDER_PAT_D],[ke.FINDER_PAT_A,ke.FINDER_PAT_E,ke.FINDER_PAT_B,ke.FINDER_PAT_D,ke.FINDER_PAT_C],[ke.FINDER_PAT_A,ke.FINDER_PAT_E,ke.FINDER_PAT_B,ke.FINDER_PAT_D,ke.FINDER_PAT_D,ke.FINDER_PAT_F],[ke.FINDER_PAT_A,ke.FINDER_PAT_E,ke.FINDER_PAT_B,ke.FINDER_PAT_D,ke.FINDER_PAT_E,ke.FINDER_PAT_F,ke.FINDER_PAT_F],[ke.FINDER_PAT_A,ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B,ke.FINDER_PAT_C,ke.FINDER_PAT_C,ke.FINDER_PAT_D,ke.FINDER_PAT_D],[ke.FINDER_PAT_A,ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B,ke.FINDER_PAT_C,ke.FINDER_PAT_C,ke.FINDER_PAT_D,ke.FINDER_PAT_E,ke.FINDER_PAT_E],[ke.FINDER_PAT_A,ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B,ke.FINDER_PAT_C,ke.FINDER_PAT_C,ke.FINDER_PAT_D,ke.FINDER_PAT_E,ke.FINDER_PAT_F,ke.FINDER_PAT_F],[ke.FINDER_PAT_A,ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B,ke.FINDER_PAT_C,ke.FINDER_PAT_D,ke.FINDER_PAT_D,ke.FINDER_PAT_E,ke.FINDER_PAT_E,ke.FINDER_PAT_F,ke.FINDER_PAT_F]],ke.MAX_PAIRS=11;class Pk extends Gr{constructor(i,l,d){super(i,l),this.count=0,this.finderPattern=d}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class br extends xt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,l,d){const h=this.decodePair(l,!1,i,d);br.addOrTally(this.possibleLeftPairs,h),l.reverse();let m=this.decodePair(l,!0,i,d);br.addOrTally(this.possibleRightPairs,m),l.reverse();for(let g of this.possibleLeftPairs)if(g.getCount()>1){for(let y of this.possibleRightPairs)if(y.getCount()>1&&br.checkChecksum(g,y))return br.constructResult(g,y)}throw new W}static addOrTally(i,l){if(l==null)return;let d=!1;for(let h of i)if(h.getValue()===l.getValue()){h.incrementCount(),d=!0;break}d||i.push(l)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,l){let d=4537077*i.getValue()+l.getValue(),h=new String(d).toString(),m=new q;for(let I=13-h.length;I>0;I--)m.append("0");m.append(h);let g=0;for(let I=0;I<13;I++){let O=m.charAt(I).charCodeAt(0)-48;g+=I&1?O:3*O}g=10-g%10,g===10&&(g=0),m.append(g.toString());let y=i.getFinderPattern().getResultPoints(),A=l.getFinderPattern().getResultPoints();return new X(m.toString(),null,0,[y[0],y[1],A[0],A[1]],se.RSS_14,new Date().getTime())}static checkChecksum(i,l){let d=(i.getChecksumPortion()+16*l.getChecksumPortion())%79,h=9*i.getFinderPattern().getValue()+l.getFinderPattern().getValue();return h>72&&h--,h>8&&h--,d===h}decodePair(i,l,d,h){try{let m=this.findFinderPattern(i,l),g=this.parseFoundFinderPattern(i,d,l,m),y=h==null?null:h.get(L.NEED_RESULT_POINT_CALLBACK);if(y!=null){let O=(m[0]+m[1])/2;l&&(O=i.getSize()-1-O),y.foundPossibleResultPoint(new pe(O,d))}let A=this.decodeDataCharacter(i,g,!0),I=this.decodeDataCharacter(i,g,!1);return new Pk(1597*A.getValue()+I.getValue(),A.getChecksumPortion()+4*I.getChecksumPortion(),g)}catch{return null}}decodeDataCharacter(i,l,d){let h=this.getDataCharacterCounters();for(let fe=0;fe<h.length;fe++)h[fe]=0;if(d)ft.recordPatternInReverse(i,l.getStartEnd()[0],h);else{ft.recordPattern(i,l.getStartEnd()[1]+1,h);for(let fe=0,ve=h.length-1;fe<ve;fe++,ve--){let De=h[fe];h[fe]=h[ve],h[ve]=De}}let m=d?16:15,g=Ge.sum(new Int32Array(h))/m,y=this.getOddCounts(),A=this.getEvenCounts(),I=this.getOddRoundingErrors(),O=this.getEvenRoundingErrors();for(let fe=0;fe<h.length;fe++){let ve=h[fe]/g,De=Math.floor(ve+.5);De<1?De=1:De>8&&(De=8);let Le=Math.floor(fe/2);fe&1?(A[Le]=De,O[Le]=ve-De):(y[Le]=De,I[Le]=ve-De)}this.adjustOddEvenCounts(d,m);let z=0,V=0;for(let fe=y.length-1;fe>=0;fe--)V*=9,V+=y[fe],z+=y[fe];let Z=0,ie=0;for(let fe=A.length-1;fe>=0;fe--)Z*=9,Z+=A[fe],ie+=A[fe];let le=V+3*Z;if(d){if(z&1||z>12||z<4)throw new W;let fe=(12-z)/2,ve=br.OUTSIDE_ODD_WIDEST[fe],De=9-ve,Le=Lr.getRSSvalue(y,ve,!1),Pe=Lr.getRSSvalue(A,De,!0),Ct=br.OUTSIDE_EVEN_TOTAL_SUBSET[fe],pt=br.OUTSIDE_GSUM[fe];return new Gr(Le*Ct+Pe+pt,le)}else{if(ie&1||ie>10||ie<4)throw new W;let fe=(10-ie)/2,ve=br.INSIDE_ODD_WIDEST[fe],De=9-ve,Le=Lr.getRSSvalue(y,ve,!0),Pe=Lr.getRSSvalue(A,De,!1),Ct=br.INSIDE_ODD_TOTAL_SUBSET[fe],pt=br.INSIDE_GSUM[fe];return new Gr(Pe*Ct+Le+pt,le)}}findFinderPattern(i,l){let d=this.getDecodeFinderCounters();d[0]=0,d[1]=0,d[2]=0,d[3]=0;let h=i.getSize(),m=!1,g=0;for(;g<h&&(m=!i.get(g),l!==m);)g++;let y=0,A=g;for(let I=g;I<h;I++)if(i.get(I)!==m)d[y]++;else{if(y===3){if(xt.isFinderPattern(d))return[A,I];A+=d[0]+d[1],d[0]=d[2],d[1]=d[3],d[2]=0,d[3]=0,y--}else y++;d[y]=1,m=!m}throw new W}parseFoundFinderPattern(i,l,d,h){let m=i.get(h[0]),g=h[0]-1;for(;g>=0&&m!==i.get(g);)g--;g++;const y=h[0]-g,A=this.getDecodeFinderCounters(),I=new Int32Array(A.length);C.arraycopy(A,0,I,1,A.length-1),I[0]=y;const O=this.parseFinderValue(I,br.FINDER_PATTERNS);let z=g,V=h[1];return d&&(z=i.getSize()-1-z,V=i.getSize()-1-V),new pn(O,[g,h[1]],z,V,l)}adjustOddEvenCounts(i,l){let d=Ge.sum(new Int32Array(this.getOddCounts())),h=Ge.sum(new Int32Array(this.getEvenCounts())),m=!1,g=!1,y=!1,A=!1;i?(d>12?g=!0:d<4&&(m=!0),h>12?A=!0:h<4&&(y=!0)):(d>11?g=!0:d<5&&(m=!0),h>10?A=!0:h<4&&(y=!0));let I=d+h-l,O=(d&1)===(i?1:0),z=(h&1)===1;if(I===1)if(O){if(z)throw new W;g=!0}else{if(!z)throw new W;A=!0}else if(I===-1)if(O){if(z)throw new W;m=!0}else{if(!z)throw new W;y=!0}else if(I===0){if(O){if(!z)throw new W;d<h?(m=!0,A=!0):(g=!0,y=!0)}else if(z)throw new W}else throw new W;if(m){if(g)throw new W;xt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&xt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(A)throw new W;xt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}A&&xt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}br.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],br.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],br.OUTSIDE_GSUM=[0,161,961,2015,2715],br.INSIDE_GSUM=[0,336,1036,1516],br.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],br.INSIDE_ODD_WIDEST=[2,4,6,8],br.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class yl extends ft{constructor(i,l){super(),this.readers=[],this.verbose=l===!0;const d=i?i.get(L.POSSIBLE_FORMATS):null,h=i&&i.get(L.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;d?((d.includes(se.EAN_13)||d.includes(se.UPC_A)||d.includes(se.EAN_8)||d.includes(se.UPC_E))&&this.readers.push(new Ot(i)),d.includes(se.CODE_39)&&this.readers.push(new Dt(h)),d.includes(se.CODE_128)&&this.readers.push(new Ie),d.includes(se.ITF)&&this.readers.push(new mt),d.includes(se.RSS_14)&&this.readers.push(new br),d.includes(se.RSS_EXPANDED)&&this.readers.push(new ke(this.verbose))):(this.readers.push(new Ot(i)),this.readers.push(new Dt),this.readers.push(new Ot(i)),this.readers.push(new Ie),this.readers.push(new mt),this.readers.push(new br),this.readers.push(new ke(this.verbose)))}decodeRow(i,l,d){for(let h=0;h<this.readers.length;h++)try{return this.readers[h].decodeRow(i,l,d)}catch{}throw new W}reset(){this.readers.forEach(i=>i.reset())}}class Ok extends ee{constructor(i=500,l){super(new yl(l),i,l)}}class qt{constructor(i,l,d){this.ecCodewords=i,this.ecBlocks=[l],d&&this.ecBlocks.push(d)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Bt{constructor(i,l){this.count=i,this.dataCodewords=l}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Tt{constructor(i,l,d,h,m,g){this.versionNumber=i,this.symbolSizeRows=l,this.symbolSizeColumns=d,this.dataRegionSizeRows=h,this.dataRegionSizeColumns=m,this.ecBlocks=g;let y=0;const A=g.getECCodewords(),I=g.getECBlocks();for(let O of I)y+=O.getCount()*(O.getDataCodewords()+A);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,l){if(i&1||l&1)throw new R;for(let d of Tt.VERSIONS)if(d.symbolSizeRows===i&&d.symbolSizeColumns===l)return d;throw new R}toString(){return""+this.versionNumber}static buildVersions(){return[new Tt(1,10,10,8,8,new qt(5,new Bt(1,3))),new Tt(2,12,12,10,10,new qt(7,new Bt(1,5))),new Tt(3,14,14,12,12,new qt(10,new Bt(1,8))),new Tt(4,16,16,14,14,new qt(12,new Bt(1,12))),new Tt(5,18,18,16,16,new qt(14,new Bt(1,18))),new Tt(6,20,20,18,18,new qt(18,new Bt(1,22))),new Tt(7,22,22,20,20,new qt(20,new Bt(1,30))),new Tt(8,24,24,22,22,new qt(24,new Bt(1,36))),new Tt(9,26,26,24,24,new qt(28,new Bt(1,44))),new Tt(10,32,32,14,14,new qt(36,new Bt(1,62))),new Tt(11,36,36,16,16,new qt(42,new Bt(1,86))),new Tt(12,40,40,18,18,new qt(48,new Bt(1,114))),new Tt(13,44,44,20,20,new qt(56,new Bt(1,144))),new Tt(14,48,48,22,22,new qt(68,new Bt(1,174))),new Tt(15,52,52,24,24,new qt(42,new Bt(2,102))),new Tt(16,64,64,14,14,new qt(56,new Bt(2,140))),new Tt(17,72,72,16,16,new qt(36,new Bt(4,92))),new Tt(18,80,80,18,18,new qt(48,new Bt(4,114))),new Tt(19,88,88,20,20,new qt(56,new Bt(4,144))),new Tt(20,96,96,22,22,new qt(68,new Bt(4,174))),new Tt(21,104,104,24,24,new qt(56,new Bt(6,136))),new Tt(22,120,120,18,18,new qt(68,new Bt(6,175))),new Tt(23,132,132,20,20,new qt(62,new Bt(8,163))),new Tt(24,144,144,22,22,new qt(62,new Bt(8,156),new Bt(2,155))),new Tt(25,8,18,6,16,new qt(7,new Bt(1,5))),new Tt(26,8,32,6,14,new qt(11,new Bt(1,10))),new Tt(27,12,26,10,24,new qt(14,new Bt(1,16))),new Tt(28,12,36,10,16,new qt(18,new Bt(1,22))),new Tt(29,16,36,14,16,new qt(24,new Bt(1,32))),new Tt(30,16,48,14,22,new qt(28,new Bt(1,49)))]}}Tt.VERSIONS=Tt.buildVersions();class xp{constructor(i){const l=i.getHeight();if(l<8||l>144||l&1)throw new R;this.version=xp.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new re(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const l=i.getHeight(),d=i.getWidth();return Tt.getVersionForDimensions(l,d)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let l=0,d=4,h=0;const m=this.mappingBitMatrix.getHeight(),g=this.mappingBitMatrix.getWidth();let y=!1,A=!1,I=!1,O=!1;do if(d===m&&h===0&&!y)i[l++]=this.readCorner1(m,g)&255,d-=2,h+=2,y=!0;else if(d===m-2&&h===0&&g&3&&!A)i[l++]=this.readCorner2(m,g)&255,d-=2,h+=2,A=!0;else if(d===m+4&&h===2&&!(g&7)&&!I)i[l++]=this.readCorner3(m,g)&255,d-=2,h+=2,I=!0;else if(d===m-2&&h===0&&(g&7)===4&&!O)i[l++]=this.readCorner4(m,g)&255,d-=2,h+=2,O=!0;else{do d<m&&h>=0&&!this.readMappingMatrix.get(h,d)&&(i[l++]=this.readUtah(d,h,m,g)&255),d-=2,h+=2;while(d>=0&&h<g);d+=1,h+=3;do d>=0&&h<g&&!this.readMappingMatrix.get(h,d)&&(i[l++]=this.readUtah(d,h,m,g)&255),d+=2,h-=2;while(d<m&&h>=0);d+=3,h+=1}while(d<m||h<g);if(l!==this.version.getTotalCodewords())throw new R;return i}readModule(i,l,d,h){return i<0&&(i+=d,l+=4-(d+4&7)),l<0&&(l+=h,i+=4-(h+4&7)),this.readMappingMatrix.set(l,i),this.mappingBitMatrix.get(l,i)}readUtah(i,l,d,h){let m=0;return this.readModule(i-2,l-2,d,h)&&(m|=1),m<<=1,this.readModule(i-2,l-1,d,h)&&(m|=1),m<<=1,this.readModule(i-1,l-2,d,h)&&(m|=1),m<<=1,this.readModule(i-1,l-1,d,h)&&(m|=1),m<<=1,this.readModule(i-1,l,d,h)&&(m|=1),m<<=1,this.readModule(i,l-2,d,h)&&(m|=1),m<<=1,this.readModule(i,l-1,d,h)&&(m|=1),m<<=1,this.readModule(i,l,d,h)&&(m|=1),m}readCorner1(i,l){let d=0;return this.readModule(i-1,0,i,l)&&(d|=1),d<<=1,this.readModule(i-1,1,i,l)&&(d|=1),d<<=1,this.readModule(i-1,2,i,l)&&(d|=1),d<<=1,this.readModule(0,l-2,i,l)&&(d|=1),d<<=1,this.readModule(0,l-1,i,l)&&(d|=1),d<<=1,this.readModule(1,l-1,i,l)&&(d|=1),d<<=1,this.readModule(2,l-1,i,l)&&(d|=1),d<<=1,this.readModule(3,l-1,i,l)&&(d|=1),d}readCorner2(i,l){let d=0;return this.readModule(i-3,0,i,l)&&(d|=1),d<<=1,this.readModule(i-2,0,i,l)&&(d|=1),d<<=1,this.readModule(i-1,0,i,l)&&(d|=1),d<<=1,this.readModule(0,l-4,i,l)&&(d|=1),d<<=1,this.readModule(0,l-3,i,l)&&(d|=1),d<<=1,this.readModule(0,l-2,i,l)&&(d|=1),d<<=1,this.readModule(0,l-1,i,l)&&(d|=1),d<<=1,this.readModule(1,l-1,i,l)&&(d|=1),d}readCorner3(i,l){let d=0;return this.readModule(i-1,0,i,l)&&(d|=1),d<<=1,this.readModule(i-1,l-1,i,l)&&(d|=1),d<<=1,this.readModule(0,l-3,i,l)&&(d|=1),d<<=1,this.readModule(0,l-2,i,l)&&(d|=1),d<<=1,this.readModule(0,l-1,i,l)&&(d|=1),d<<=1,this.readModule(1,l-3,i,l)&&(d|=1),d<<=1,this.readModule(1,l-2,i,l)&&(d|=1),d<<=1,this.readModule(1,l-1,i,l)&&(d|=1),d}readCorner4(i,l){let d=0;return this.readModule(i-3,0,i,l)&&(d|=1),d<<=1,this.readModule(i-2,0,i,l)&&(d|=1),d<<=1,this.readModule(i-1,0,i,l)&&(d|=1),d<<=1,this.readModule(0,l-2,i,l)&&(d|=1),d<<=1,this.readModule(0,l-1,i,l)&&(d|=1),d<<=1,this.readModule(1,l-1,i,l)&&(d|=1),d<<=1,this.readModule(2,l-1,i,l)&&(d|=1),d<<=1,this.readModule(3,l-1,i,l)&&(d|=1),d}extractDataRegion(i){const l=this.version.getSymbolSizeRows(),d=this.version.getSymbolSizeColumns();if(i.getHeight()!==l)throw new w("Dimension of bitMatrix must match the version size");const h=this.version.getDataRegionSizeRows(),m=this.version.getDataRegionSizeColumns(),g=l/h|0,y=d/m|0,A=g*h,I=y*m,O=new re(I,A);for(let z=0;z<g;++z){const V=z*h;for(let Z=0;Z<y;++Z){const ie=Z*m;for(let le=0;le<h;++le){const fe=z*(h+2)+1+le,ve=V+le;for(let De=0;De<m;++De){const Le=Z*(m+2)+1+De;if(i.get(Le,fe)){const Pe=ie+De;O.set(Pe,ve)}}}}}return O}}class vp{constructor(i,l){this.numDataCodewords=i,this.codewords=l}static getDataBlocks(i,l){const d=l.getECBlocks();let h=0;const m=d.getECBlocks();for(let le of m)h+=le.getCount();const g=new Array(h);let y=0;for(let le of m)for(let fe=0;fe<le.getCount();fe++){const ve=le.getDataCodewords(),De=d.getECCodewords()+ve;g[y++]=new vp(ve,new Uint8Array(De))}const I=g[0].codewords.length-d.getECCodewords(),O=I-1;let z=0;for(let le=0;le<O;le++)for(let fe=0;fe<y;fe++)g[fe].codewords[le]=i[z++];const V=l.getVersionNumber()===24,Z=V?8:y;for(let le=0;le<Z;le++)g[le].codewords[I-1]=i[z++];const ie=g[0].codewords.length;for(let le=I;le<ie;le++)for(let fe=0;fe<y;fe++){const ve=V?(fe+8)%y:fe,De=V&&ve>7?le-1:le;g[ve].codewords[De]=i[z++]}if(z!==i.length)throw new w;return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class wp{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new w(""+i);let l=0,d=this.bitOffset,h=this.byteOffset;const m=this.bytes;if(d>0){const g=8-d,y=i<g?i:g,A=g-y,I=255>>8-y<<A;l=(m[h]&I)>>A,i-=y,d+=y,d===8&&(d=0,h++)}if(i>0){for(;i>=8;)l=l<<8|m[h]&255,h++,i-=8;if(i>0){const g=8-i,y=255>>g<<g;l=l<<i|(m[h]&y)>>g,d+=i}}return this.bitOffset=d,this.byteOffset=h,l}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Br;(function(B){B[B.PAD_ENCODE=0]="PAD_ENCODE",B[B.ASCII_ENCODE=1]="ASCII_ENCODE",B[B.C40_ENCODE=2]="C40_ENCODE",B[B.TEXT_ENCODE=3]="TEXT_ENCODE",B[B.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",B[B.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",B[B.BASE256_ENCODE=6]="BASE256_ENCODE"})(Br||(Br={}));class ai{static decode(i){const l=new wp(i),d=new q,h=new q,m=new Array;let g=Br.ASCII_ENCODE;do if(g===Br.ASCII_ENCODE)g=this.decodeAsciiSegment(l,d,h);else{switch(g){case Br.C40_ENCODE:this.decodeC40Segment(l,d);break;case Br.TEXT_ENCODE:this.decodeTextSegment(l,d);break;case Br.ANSIX12_ENCODE:this.decodeAnsiX12Segment(l,d);break;case Br.EDIFACT_ENCODE:this.decodeEdifactSegment(l,d);break;case Br.BASE256_ENCODE:this.decodeBase256Segment(l,d,m);break;default:throw new R}g=Br.ASCII_ENCODE}while(g!==Br.PAD_ENCODE&&l.available()>0);return h.length()>0&&d.append(h.toString()),new Te(i,d.toString(),m.length===0?null:m,null)}static decodeAsciiSegment(i,l,d){let h=!1;do{let m=i.readBits(8);if(m===0)throw new R;if(m<=128)return h&&(m+=128),l.append(String.fromCharCode(m-1)),Br.ASCII_ENCODE;if(m===129)return Br.PAD_ENCODE;if(m<=229){const g=m-130;g<10&&l.append("0"),l.append(""+g)}else switch(m){case 230:return Br.C40_ENCODE;case 231:return Br.BASE256_ENCODE;case 232:l.append("");break;case 233:case 234:break;case 235:h=!0;break;case 236:l.append("[)>05"),d.insert(0,"");break;case 237:l.append("[)>06"),d.insert(0,"");break;case 238:return Br.ANSIX12_ENCODE;case 239:return Br.TEXT_ENCODE;case 240:return Br.EDIFACT_ENCODE;case 241:break;default:if(m!==254||i.available()!==0)throw new R;break}}while(i.available()>0);return Br.ASCII_ENCODE}static decodeC40Segment(i,l){let d=!1;const h=[];let m=0;do{if(i.available()===8)return;const g=i.readBits(8);if(g===254)return;this.parseTwoBytes(g,i.readBits(8),h);for(let y=0;y<3;y++){const A=h[y];switch(m){case 0:if(A<3)m=A+1;else if(A<this.C40_BASIC_SET_CHARS.length){const I=this.C40_BASIC_SET_CHARS[A];d?(l.append(String.fromCharCode(I.charCodeAt(0)+128)),d=!1):l.append(I)}else throw new R;break;case 1:d?(l.append(String.fromCharCode(A+128)),d=!1):l.append(String.fromCharCode(A)),m=0;break;case 2:if(A<this.C40_SHIFT2_SET_CHARS.length){const I=this.C40_SHIFT2_SET_CHARS[A];d?(l.append(String.fromCharCode(I.charCodeAt(0)+128)),d=!1):l.append(I)}else switch(A){case 27:l.append("");break;case 30:d=!0;break;default:throw new R}m=0;break;case 3:d?(l.append(String.fromCharCode(A+224)),d=!1):l.append(String.fromCharCode(A+96)),m=0;break;default:throw new R}}}while(i.available()>0)}static decodeTextSegment(i,l){let d=!1,h=[],m=0;do{if(i.available()===8)return;const g=i.readBits(8);if(g===254)return;this.parseTwoBytes(g,i.readBits(8),h);for(let y=0;y<3;y++){const A=h[y];switch(m){case 0:if(A<3)m=A+1;else if(A<this.TEXT_BASIC_SET_CHARS.length){const I=this.TEXT_BASIC_SET_CHARS[A];d?(l.append(String.fromCharCode(I.charCodeAt(0)+128)),d=!1):l.append(I)}else throw new R;break;case 1:d?(l.append(String.fromCharCode(A+128)),d=!1):l.append(String.fromCharCode(A)),m=0;break;case 2:if(A<this.TEXT_SHIFT2_SET_CHARS.length){const I=this.TEXT_SHIFT2_SET_CHARS[A];d?(l.append(String.fromCharCode(I.charCodeAt(0)+128)),d=!1):l.append(I)}else switch(A){case 27:l.append("");break;case 30:d=!0;break;default:throw new R}m=0;break;case 3:if(A<this.TEXT_SHIFT3_SET_CHARS.length){const I=this.TEXT_SHIFT3_SET_CHARS[A];d?(l.append(String.fromCharCode(I.charCodeAt(0)+128)),d=!1):l.append(I),m=0}else throw new R;break;default:throw new R}}}while(i.available()>0)}static decodeAnsiX12Segment(i,l){const d=[];do{if(i.available()===8)return;const h=i.readBits(8);if(h===254)return;this.parseTwoBytes(h,i.readBits(8),d);for(let m=0;m<3;m++){const g=d[m];switch(g){case 0:l.append("\r");break;case 1:l.append("*");break;case 2:l.append(">");break;case 3:l.append(" ");break;default:if(g<14)l.append(String.fromCharCode(g+44));else if(g<40)l.append(String.fromCharCode(g+51));else throw new R;break}}}while(i.available()>0)}static parseTwoBytes(i,l,d){let h=(i<<8)+l-1,m=Math.floor(h/1600);d[0]=m,h-=m*1600,m=Math.floor(h/40),d[1]=m,d[2]=h-m*40}static decodeEdifactSegment(i,l){do{if(i.available()<=16)return;for(let d=0;d<4;d++){let h=i.readBits(6);if(h===31){const m=8-i.getBitOffset();m!==8&&i.readBits(m);return}h&32||(h|=64),l.append(String.fromCharCode(h))}}while(i.available()>0)}static decodeBase256Segment(i,l,d){let h=1+i.getByteOffset();const m=this.unrandomize255State(i.readBits(8),h++);let g;if(m===0?g=i.available()/8|0:m<250?g=m:g=250*(m-249)+this.unrandomize255State(i.readBits(8),h++),g<0)throw new R;const y=new Uint8Array(g);for(let A=0;A<g;A++){if(i.available()<8)throw new R;y[A]=this.unrandomize255State(i.readBits(8),h++)}d.push(y);try{l.append(Y.decode(y,U.ISO88591))}catch(A){throw new Ee("Platform does not support required encoding: "+A.message)}}static unrandomize255State(i,l){const d=149*l%255+1,h=i-d;return h>=0?h:h+256}}ai.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ai.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ai.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ai.TEXT_SHIFT2_SET_CHARS=ai.C40_SHIFT2_SET_CHARS,ai.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Dk{constructor(){this.rsDecoder=new Je(ue.DATA_MATRIX_FIELD_256)}decode(i){const l=new xp(i),d=l.getVersion(),h=l.readCodewords(),m=vp.getDataBlocks(h,d);let g=0;for(let I of m)g+=I.getNumDataCodewords();const y=new Uint8Array(g),A=m.length;for(let I=0;I<A;I++){const O=m[I],z=O.getCodewords(),V=O.getNumDataCodewords();this.correctErrors(z,V);for(let Z=0;Z<V;Z++)y[Z*A+I]=z[Z]}return ai.decode(y)}correctErrors(i,l){const d=new Int32Array(i);try{this.rsDecoder.decode(d,i.length-l)}catch{throw new j}for(let h=0;h<l;h++)i[h]=d[h]}}class Ar{constructor(i){this.image=i,this.rectangleDetector=new ot(this.image)}detect(){const i=this.rectangleDetector.detect();let l=this.detectSolid1(i);if(l=this.detectSolid2(l),l[3]=this.correctTopRight(l),!l[3])throw new W;l=this.shiftToModuleCenter(l);const d=l[0],h=l[1],m=l[2],g=l[3];let y=this.transitionsBetween(d,g)+1,A=this.transitionsBetween(m,g)+1;(y&1)===1&&(y+=1),(A&1)===1&&(A+=1),4*y<7*A&&4*A<7*y&&(y=A=Math.max(y,A));let I=Ar.sampleGrid(this.image,d,h,m,g,y,A);return new Ze(I,[d,h,m,g])}static shiftPoint(i,l,d){let h=(l.getX()-i.getX())/(d+1),m=(l.getY()-i.getY())/(d+1);return new pe(i.getX()+h,i.getY()+m)}static moveAway(i,l,d){let h=i.getX(),m=i.getY();return h<l?h-=1:h+=1,m<d?m-=1:m+=1,new pe(h,m)}detectSolid1(i){let l=i[0],d=i[1],h=i[3],m=i[2],g=this.transitionsBetween(l,d),y=this.transitionsBetween(d,h),A=this.transitionsBetween(h,m),I=this.transitionsBetween(m,l),O=g,z=[m,l,d,h];return O>y&&(O=y,z[0]=l,z[1]=d,z[2]=h,z[3]=m),O>A&&(O=A,z[0]=d,z[1]=h,z[2]=m,z[3]=l),O>I&&(z[0]=h,z[1]=m,z[2]=l,z[3]=d),z}detectSolid2(i){let l=i[0],d=i[1],h=i[2],m=i[3],g=this.transitionsBetween(l,m),y=Ar.shiftPoint(d,h,(g+1)*4),A=Ar.shiftPoint(h,d,(g+1)*4),I=this.transitionsBetween(y,l),O=this.transitionsBetween(A,m);return I<O?(i[0]=l,i[1]=d,i[2]=h,i[3]=m):(i[0]=d,i[1]=h,i[2]=m,i[3]=l),i}correctTopRight(i){let l=i[0],d=i[1],h=i[2],m=i[3],g=this.transitionsBetween(l,m),y=this.transitionsBetween(d,m),A=Ar.shiftPoint(l,d,(y+1)*4),I=Ar.shiftPoint(h,d,(g+1)*4);g=this.transitionsBetween(A,m),y=this.transitionsBetween(I,m);let O=new pe(m.getX()+(h.getX()-d.getX())/(g+1),m.getY()+(h.getY()-d.getY())/(g+1)),z=new pe(m.getX()+(l.getX()-d.getX())/(y+1),m.getY()+(l.getY()-d.getY())/(y+1));if(!this.isValid(O))return this.isValid(z)?z:null;if(!this.isValid(z))return O;let V=this.transitionsBetween(A,O)+this.transitionsBetween(I,O),Z=this.transitionsBetween(A,z)+this.transitionsBetween(I,z);return V>Z?O:z}shiftToModuleCenter(i){let l=i[0],d=i[1],h=i[2],m=i[3],g=this.transitionsBetween(l,m)+1,y=this.transitionsBetween(h,m)+1,A=Ar.shiftPoint(l,d,y*4),I=Ar.shiftPoint(h,d,g*4);g=this.transitionsBetween(A,m)+1,y=this.transitionsBetween(I,m)+1,(g&1)===1&&(g+=1),(y&1)===1&&(y+=1);let O=(l.getX()+d.getX()+h.getX()+m.getX())/4,z=(l.getY()+d.getY()+h.getY()+m.getY())/4;l=Ar.moveAway(l,O,z),d=Ar.moveAway(d,O,z),h=Ar.moveAway(h,O,z),m=Ar.moveAway(m,O,z);let V,Z;return A=Ar.shiftPoint(l,d,y*4),A=Ar.shiftPoint(A,m,g*4),V=Ar.shiftPoint(d,l,y*4),V=Ar.shiftPoint(V,h,g*4),I=Ar.shiftPoint(h,m,y*4),I=Ar.shiftPoint(I,d,g*4),Z=Ar.shiftPoint(m,h,y*4),Z=Ar.shiftPoint(Z,l,g*4),[A,V,I,Z]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,l,d,h,m,g,y){return At.getInstance().sampleGrid(i,g,y,.5,.5,g-.5,.5,g-.5,y-.5,.5,y-.5,l.getX(),l.getY(),m.getX(),m.getY(),h.getX(),h.getY(),d.getX(),d.getY())}transitionsBetween(i,l){let d=Math.trunc(i.getX()),h=Math.trunc(i.getY()),m=Math.trunc(l.getX()),g=Math.trunc(l.getY()),y=Math.abs(g-h)>Math.abs(m-d);if(y){let le=d;d=h,h=le,le=m,m=g,g=le}let A=Math.abs(m-d),I=Math.abs(g-h),O=-A/2,z=h<g?1:-1,V=d<m?1:-1,Z=0,ie=this.image.get(y?h:d,y?d:h);for(let le=d,fe=h;le!==m;le+=V){let ve=this.image.get(y?fe:le,y?le:fe);if(ve!==ie&&(Z++,ie=ve),O+=I,O>0){if(fe===g)break;fe+=z,O-=A}}return Z}}class ii{constructor(){this.decoder=new Dk}decode(i,l=null){let d,h;if(l!=null&&l.has(L.PURE_BARCODE)){const I=ii.extractPureBits(i.getBlackMatrix());d=this.decoder.decode(I),h=ii.NO_POINTS}else{const I=new Ar(i.getBlackMatrix()).detect();d=this.decoder.decode(I.getBits()),h=I.getPoints()}const m=d.getRawBytes(),g=new X(d.getText(),m,8*m.length,h,se.DATA_MATRIX,C.currentTimeMillis()),y=d.getByteSegments();y!=null&&g.putMetadata(ge.BYTE_SEGMENTS,y);const A=d.getECLevel();return A!=null&&g.putMetadata(ge.ERROR_CORRECTION_LEVEL,A),g}reset(){}static extractPureBits(i){const l=i.getTopLeftOnBit(),d=i.getBottomRightOnBit();if(l==null||d==null)throw new W;const h=this.moduleSize(l,i);let m=l[1];const g=d[1];let y=l[0];const I=(d[0]-y+1)/h,O=(g-m+1)/h;if(I<=0||O<=0)throw new W;const z=h/2;m+=z,y+=z;const V=new re(I,O);for(let Z=0;Z<O;Z++){const ie=m+Z*h;for(let le=0;le<I;le++)i.get(y+le*h,ie)&&V.set(le,Z)}return V}static moduleSize(i,l){const d=l.getWidth();let h=i[0];const m=i[1];for(;h<d&&l.get(h,m);)h++;if(h===d)throw new W;const g=h-i[0];if(g===0)throw new W;return g}}ii.NO_POINTS=[];class Mk extends ee{constructor(i=500){super(new ii,i)}}var bl;(function(B){B[B.L=0]="L",B[B.M=1]="M",B[B.Q=2]="Q",B[B.H=3]="H"})(bl||(bl={}));class tr{constructor(i,l,d){this.value=i,this.stringValue=l,this.bits=d,tr.FOR_BITS.set(d,this),tr.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return tr.L;case"M":return tr.M;case"Q":return tr.Q;case"H":return tr.H;default:throw new x(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof tr))return!1;const l=i;return this.value===l.value}static forBits(i){if(i<0||i>=tr.FOR_BITS.size)throw new w;return tr.FOR_BITS.get(i)}}tr.FOR_BITS=new Map,tr.FOR_VALUE=new Map,tr.L=new tr(bl.L,"L",1),tr.M=new tr(bl.M,"M",0),tr.Q=new tr(bl.Q,"Q",3),tr.H=new tr(bl.H,"H",2);class gn{constructor(i){this.errorCorrectionLevel=tr.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,l){return _.bitCount(i^l)}static decodeFormatInformation(i,l){const d=gn.doDecodeFormatInformation(i,l);return d!==null?d:gn.doDecodeFormatInformation(i^gn.FORMAT_INFO_MASK_QR,l^gn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,l){let d=Number.MAX_SAFE_INTEGER,h=0;for(const m of gn.FORMAT_INFO_DECODE_LOOKUP){const g=m[0];if(g===i||g===l)return new gn(m[1]);let y=gn.numBitsDiffering(i,g);y<d&&(h=m[1],d=y),i!==l&&(y=gn.numBitsDiffering(l,g),y<d&&(h=m[1],d=y))}return d<=3?new gn(h):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof gn))return!1;const l=i;return this.errorCorrectionLevel===l.errorCorrectionLevel&&this.dataMask===l.dataMask}}gn.FORMAT_INFO_MASK_QR=21522,gn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class me{constructor(i,...l){this.ecCodewordsPerBlock=i,this.ecBlocks=l}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const l=this.ecBlocks;for(const d of l)i+=d.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Q{constructor(i,l){this.count=i,this.dataCodewords=l}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class et{constructor(i,l,...d){this.versionNumber=i,this.alignmentPatternCenters=l,this.ecBlocks=d;let h=0;const m=d[0].getECCodewordsPerBlock(),g=d[0].getECBlocks();for(const y of g)h+=y.getCount()*(y.getDataCodewords()+m);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new R;try{return this.getVersionForNumber((i-17)/4)}catch{throw new R}}static getVersionForNumber(i){if(i<1||i>40)throw new w;return et.VERSIONS[i-1]}static decodeVersionInformation(i){let l=Number.MAX_SAFE_INTEGER,d=0;for(let h=0;h<et.VERSION_DECODE_INFO.length;h++){const m=et.VERSION_DECODE_INFO[h];if(m===i)return et.getVersionForNumber(h+7);const g=gn.numBitsDiffering(i,m);g<l&&(d=h+7,l=g)}return l<=3?et.getVersionForNumber(d):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),l=new re(i);l.setRegion(0,0,9,9),l.setRegion(i-8,0,8,9),l.setRegion(0,i-8,9,8);const d=this.alignmentPatternCenters.length;for(let h=0;h<d;h++){const m=this.alignmentPatternCenters[h]-2;for(let g=0;g<d;g++)h===0&&(g===0||g===d-1)||h===d-1&&g===0||l.setRegion(this.alignmentPatternCenters[g]-2,m,5,5)}return l.setRegion(6,9,1,i-17),l.setRegion(9,6,i-17,1),this.versionNumber>6&&(l.setRegion(i-11,0,3,6),l.setRegion(0,i-11,6,3)),l}toString(){return""+this.versionNumber}}et.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),et.VERSIONS=[new et(1,new Int32Array(0),new me(7,new Q(1,19)),new me(10,new Q(1,16)),new me(13,new Q(1,13)),new me(17,new Q(1,9))),new et(2,Int32Array.from([6,18]),new me(10,new Q(1,34)),new me(16,new Q(1,28)),new me(22,new Q(1,22)),new me(28,new Q(1,16))),new et(3,Int32Array.from([6,22]),new me(15,new Q(1,55)),new me(26,new Q(1,44)),new me(18,new Q(2,17)),new me(22,new Q(2,13))),new et(4,Int32Array.from([6,26]),new me(20,new Q(1,80)),new me(18,new Q(2,32)),new me(26,new Q(2,24)),new me(16,new Q(4,9))),new et(5,Int32Array.from([6,30]),new me(26,new Q(1,108)),new me(24,new Q(2,43)),new me(18,new Q(2,15),new Q(2,16)),new me(22,new Q(2,11),new Q(2,12))),new et(6,Int32Array.from([6,34]),new me(18,new Q(2,68)),new me(16,new Q(4,27)),new me(24,new Q(4,19)),new me(28,new Q(4,15))),new et(7,Int32Array.from([6,22,38]),new me(20,new Q(2,78)),new me(18,new Q(4,31)),new me(18,new Q(2,14),new Q(4,15)),new me(26,new Q(4,13),new Q(1,14))),new et(8,Int32Array.from([6,24,42]),new me(24,new Q(2,97)),new me(22,new Q(2,38),new Q(2,39)),new me(22,new Q(4,18),new Q(2,19)),new me(26,new Q(4,14),new Q(2,15))),new et(9,Int32Array.from([6,26,46]),new me(30,new Q(2,116)),new me(22,new Q(3,36),new Q(2,37)),new me(20,new Q(4,16),new Q(4,17)),new me(24,new Q(4,12),new Q(4,13))),new et(10,Int32Array.from([6,28,50]),new me(18,new Q(2,68),new Q(2,69)),new me(26,new Q(4,43),new Q(1,44)),new me(24,new Q(6,19),new Q(2,20)),new me(28,new Q(6,15),new Q(2,16))),new et(11,Int32Array.from([6,30,54]),new me(20,new Q(4,81)),new me(30,new Q(1,50),new Q(4,51)),new me(28,new Q(4,22),new Q(4,23)),new me(24,new Q(3,12),new Q(8,13))),new et(12,Int32Array.from([6,32,58]),new me(24,new Q(2,92),new Q(2,93)),new me(22,new Q(6,36),new Q(2,37)),new me(26,new Q(4,20),new Q(6,21)),new me(28,new Q(7,14),new Q(4,15))),new et(13,Int32Array.from([6,34,62]),new me(26,new Q(4,107)),new me(22,new Q(8,37),new Q(1,38)),new me(24,new Q(8,20),new Q(4,21)),new me(22,new Q(12,11),new Q(4,12))),new et(14,Int32Array.from([6,26,46,66]),new me(30,new Q(3,115),new Q(1,116)),new me(24,new Q(4,40),new Q(5,41)),new me(20,new Q(11,16),new Q(5,17)),new me(24,new Q(11,12),new Q(5,13))),new et(15,Int32Array.from([6,26,48,70]),new me(22,new Q(5,87),new Q(1,88)),new me(24,new Q(5,41),new Q(5,42)),new me(30,new Q(5,24),new Q(7,25)),new me(24,new Q(11,12),new Q(7,13))),new et(16,Int32Array.from([6,26,50,74]),new me(24,new Q(5,98),new Q(1,99)),new me(28,new Q(7,45),new Q(3,46)),new me(24,new Q(15,19),new Q(2,20)),new me(30,new Q(3,15),new Q(13,16))),new et(17,Int32Array.from([6,30,54,78]),new me(28,new Q(1,107),new Q(5,108)),new me(28,new Q(10,46),new Q(1,47)),new me(28,new Q(1,22),new Q(15,23)),new me(28,new Q(2,14),new Q(17,15))),new et(18,Int32Array.from([6,30,56,82]),new me(30,new Q(5,120),new Q(1,121)),new me(26,new Q(9,43),new Q(4,44)),new me(28,new Q(17,22),new Q(1,23)),new me(28,new Q(2,14),new Q(19,15))),new et(19,Int32Array.from([6,30,58,86]),new me(28,new Q(3,113),new Q(4,114)),new me(26,new Q(3,44),new Q(11,45)),new me(26,new Q(17,21),new Q(4,22)),new me(26,new Q(9,13),new Q(16,14))),new et(20,Int32Array.from([6,34,62,90]),new me(28,new Q(3,107),new Q(5,108)),new me(26,new Q(3,41),new Q(13,42)),new me(30,new Q(15,24),new Q(5,25)),new me(28,new Q(15,15),new Q(10,16))),new et(21,Int32Array.from([6,28,50,72,94]),new me(28,new Q(4,116),new Q(4,117)),new me(26,new Q(17,42)),new me(28,new Q(17,22),new Q(6,23)),new me(30,new Q(19,16),new Q(6,17))),new et(22,Int32Array.from([6,26,50,74,98]),new me(28,new Q(2,111),new Q(7,112)),new me(28,new Q(17,46)),new me(30,new Q(7,24),new Q(16,25)),new me(24,new Q(34,13))),new et(23,Int32Array.from([6,30,54,78,102]),new me(30,new Q(4,121),new Q(5,122)),new me(28,new Q(4,47),new Q(14,48)),new me(30,new Q(11,24),new Q(14,25)),new me(30,new Q(16,15),new Q(14,16))),new et(24,Int32Array.from([6,28,54,80,106]),new me(30,new Q(6,117),new Q(4,118)),new me(28,new Q(6,45),new Q(14,46)),new me(30,new Q(11,24),new Q(16,25)),new me(30,new Q(30,16),new Q(2,17))),new et(25,Int32Array.from([6,32,58,84,110]),new me(26,new Q(8,106),new Q(4,107)),new me(28,new Q(8,47),new Q(13,48)),new me(30,new Q(7,24),new Q(22,25)),new me(30,new Q(22,15),new Q(13,16))),new et(26,Int32Array.from([6,30,58,86,114]),new me(28,new Q(10,114),new Q(2,115)),new me(28,new Q(19,46),new Q(4,47)),new me(28,new Q(28,22),new Q(6,23)),new me(30,new Q(33,16),new Q(4,17))),new et(27,Int32Array.from([6,34,62,90,118]),new me(30,new Q(8,122),new Q(4,123)),new me(28,new Q(22,45),new Q(3,46)),new me(30,new Q(8,23),new Q(26,24)),new me(30,new Q(12,15),new Q(28,16))),new et(28,Int32Array.from([6,26,50,74,98,122]),new me(30,new Q(3,117),new Q(10,118)),new me(28,new Q(3,45),new Q(23,46)),new me(30,new Q(4,24),new Q(31,25)),new me(30,new Q(11,15),new Q(31,16))),new et(29,Int32Array.from([6,30,54,78,102,126]),new me(30,new Q(7,116),new Q(7,117)),new me(28,new Q(21,45),new Q(7,46)),new me(30,new Q(1,23),new Q(37,24)),new me(30,new Q(19,15),new Q(26,16))),new et(30,Int32Array.from([6,26,52,78,104,130]),new me(30,new Q(5,115),new Q(10,116)),new me(28,new Q(19,47),new Q(10,48)),new me(30,new Q(15,24),new Q(25,25)),new me(30,new Q(23,15),new Q(25,16))),new et(31,Int32Array.from([6,30,56,82,108,134]),new me(30,new Q(13,115),new Q(3,116)),new me(28,new Q(2,46),new Q(29,47)),new me(30,new Q(42,24),new Q(1,25)),new me(30,new Q(23,15),new Q(28,16))),new et(32,Int32Array.from([6,34,60,86,112,138]),new me(30,new Q(17,115)),new me(28,new Q(10,46),new Q(23,47)),new me(30,new Q(10,24),new Q(35,25)),new me(30,new Q(19,15),new Q(35,16))),new et(33,Int32Array.from([6,30,58,86,114,142]),new me(30,new Q(17,115),new Q(1,116)),new me(28,new Q(14,46),new Q(21,47)),new me(30,new Q(29,24),new Q(19,25)),new me(30,new Q(11,15),new Q(46,16))),new et(34,Int32Array.from([6,34,62,90,118,146]),new me(30,new Q(13,115),new Q(6,116)),new me(28,new Q(14,46),new Q(23,47)),new me(30,new Q(44,24),new Q(7,25)),new me(30,new Q(59,16),new Q(1,17))),new et(35,Int32Array.from([6,30,54,78,102,126,150]),new me(30,new Q(12,121),new Q(7,122)),new me(28,new Q(12,47),new Q(26,48)),new me(30,new Q(39,24),new Q(14,25)),new me(30,new Q(22,15),new Q(41,16))),new et(36,Int32Array.from([6,24,50,76,102,128,154]),new me(30,new Q(6,121),new Q(14,122)),new me(28,new Q(6,47),new Q(34,48)),new me(30,new Q(46,24),new Q(10,25)),new me(30,new Q(2,15),new Q(64,16))),new et(37,Int32Array.from([6,28,54,80,106,132,158]),new me(30,new Q(17,122),new Q(4,123)),new me(28,new Q(29,46),new Q(14,47)),new me(30,new Q(49,24),new Q(10,25)),new me(30,new Q(24,15),new Q(46,16))),new et(38,Int32Array.from([6,32,58,84,110,136,162]),new me(30,new Q(4,122),new Q(18,123)),new me(28,new Q(13,46),new Q(32,47)),new me(30,new Q(48,24),new Q(14,25)),new me(30,new Q(42,15),new Q(32,16))),new et(39,Int32Array.from([6,26,54,82,110,138,166]),new me(30,new Q(20,117),new Q(4,118)),new me(28,new Q(40,47),new Q(7,48)),new me(30,new Q(43,24),new Q(22,25)),new me(30,new Q(10,15),new Q(67,16))),new et(40,Int32Array.from([6,30,58,86,114,142,170]),new me(30,new Q(19,118),new Q(6,119)),new me(28,new Q(18,47),new Q(31,48)),new me(30,new Q(34,24),new Q(34,25)),new me(30,new Q(20,15),new Q(61,16)))];var Xr;(function(B){B[B.DATA_MASK_000=0]="DATA_MASK_000",B[B.DATA_MASK_001=1]="DATA_MASK_001",B[B.DATA_MASK_010=2]="DATA_MASK_010",B[B.DATA_MASK_011=3]="DATA_MASK_011",B[B.DATA_MASK_100=4]="DATA_MASK_100",B[B.DATA_MASK_101=5]="DATA_MASK_101",B[B.DATA_MASK_110=6]="DATA_MASK_110",B[B.DATA_MASK_111=7]="DATA_MASK_111"})(Xr||(Xr={}));class ys{constructor(i,l){this.value=i,this.isMasked=l}unmaskBitMatrix(i,l){for(let d=0;d<l;d++)for(let h=0;h<l;h++)this.isMasked(d,h)&&i.flip(h,d)}}ys.values=new Map([[Xr.DATA_MASK_000,new ys(Xr.DATA_MASK_000,(B,i)=>(B+i&1)===0)],[Xr.DATA_MASK_001,new ys(Xr.DATA_MASK_001,(B,i)=>(B&1)===0)],[Xr.DATA_MASK_010,new ys(Xr.DATA_MASK_010,(B,i)=>i%3===0)],[Xr.DATA_MASK_011,new ys(Xr.DATA_MASK_011,(B,i)=>(B+i)%3===0)],[Xr.DATA_MASK_100,new ys(Xr.DATA_MASK_100,(B,i)=>(Math.floor(B/2)+Math.floor(i/3)&1)===0)],[Xr.DATA_MASK_101,new ys(Xr.DATA_MASK_101,(B,i)=>B*i%6===0)],[Xr.DATA_MASK_110,new ys(Xr.DATA_MASK_110,(B,i)=>B*i%6<3)],[Xr.DATA_MASK_111,new ys(Xr.DATA_MASK_111,(B,i)=>(B+i+B*i%3&1)===0)]]);class Lk{constructor(i){const l=i.getHeight();if(l<21||(l&3)!==1)throw new R;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let m=0;m<6;m++)i=this.copyBit(m,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let m=5;m>=0;m--)i=this.copyBit(8,m,i);const l=this.bitMatrix.getHeight();let d=0;const h=l-7;for(let m=l-1;m>=h;m--)d=this.copyBit(8,m,d);for(let m=l-8;m<l;m++)d=this.copyBit(m,8,d);if(this.parsedFormatInfo=gn.decodeFormatInformation(i,d),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new R}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const i=this.bitMatrix.getHeight(),l=Math.floor((i-17)/4);if(l<=6)return et.getVersionForNumber(l);let d=0;const h=i-11;for(let g=5;g>=0;g--)for(let y=i-9;y>=h;y--)d=this.copyBit(y,g,d);let m=et.decodeVersionInformation(d);if(m!==null&&m.getDimensionForVersion()===i)return this.parsedVersion=m,m;d=0;for(let g=5;g>=0;g--)for(let y=i-9;y>=h;y--)d=this.copyBit(g,y,d);if(m=et.decodeVersionInformation(d),m!==null&&m.getDimensionForVersion()===i)return this.parsedVersion=m,m;throw new R}copyBit(i,l,d){return(this.isMirror?this.bitMatrix.get(l,i):this.bitMatrix.get(i,l))?d<<1|1:d<<1}readCodewords(){const i=this.readFormatInformation(),l=this.readVersion(),d=ys.values.get(i.getDataMask()),h=this.bitMatrix.getHeight();d.unmaskBitMatrix(this.bitMatrix,h);const m=l.buildFunctionPattern();let g=!0;const y=new Uint8Array(l.getTotalCodewords());let A=0,I=0,O=0;for(let z=h-1;z>0;z-=2){z===6&&z--;for(let V=0;V<h;V++){const Z=g?h-1-V:V;for(let ie=0;ie<2;ie++)m.get(z-ie,Z)||(O++,I<<=1,this.bitMatrix.get(z-ie,Z)&&(I|=1),O===8&&(y[A++]=I,O=0,I=0))}g=!g}if(A!==l.getTotalCodewords())throw new R;return y}remask(){if(this.parsedFormatInfo===null)return;const i=ys.values[this.parsedFormatInfo.getDataMask()],l=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,l)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let l=0,d=i.getWidth();l<d;l++)for(let h=l+1,m=i.getHeight();h<m;h++)i.get(l,h)!==i.get(h,l)&&(i.flip(h,l),i.flip(l,h))}}class yp{constructor(i,l){this.numDataCodewords=i,this.codewords=l}static getDataBlocks(i,l,d){if(i.length!==l.getTotalCodewords())throw new w;const h=l.getECBlocksForLevel(d);let m=0;const g=h.getECBlocks();for(const ie of g)m+=ie.getCount();const y=new Array(m);let A=0;for(const ie of g)for(let le=0;le<ie.getCount();le++){const fe=ie.getDataCodewords(),ve=h.getECCodewordsPerBlock()+fe;y[A++]=new yp(fe,new Uint8Array(ve))}const I=y[0].codewords.length;let O=y.length-1;for(;O>=0&&y[O].codewords.length!==I;)O--;O++;const z=I-h.getECCodewordsPerBlock();let V=0;for(let ie=0;ie<z;ie++)for(let le=0;le<A;le++)y[le].codewords[ie]=i[V++];for(let ie=O;ie<A;ie++)y[ie].codewords[z]=i[V++];const Z=y[0].codewords.length;for(let ie=z;ie<Z;ie++)for(let le=0;le<A;le++){const fe=le<O?ie:ie+1;y[le].codewords[fe]=i[V++]}return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var bs;(function(B){B[B.TERMINATOR=0]="TERMINATOR",B[B.NUMERIC=1]="NUMERIC",B[B.ALPHANUMERIC=2]="ALPHANUMERIC",B[B.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",B[B.BYTE=4]="BYTE",B[B.ECI=5]="ECI",B[B.KANJI=6]="KANJI",B[B.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",B[B.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",B[B.HANZI=9]="HANZI"})(bs||(bs={}));class rt{constructor(i,l,d,h){this.value=i,this.stringValue=l,this.characterCountBitsForVersions=d,this.bits=h,rt.FOR_BITS.set(h,this),rt.FOR_VALUE.set(i,this)}static forBits(i){const l=rt.FOR_BITS.get(i);if(l===void 0)throw new w;return l}getCharacterCountBits(i){const l=i.getVersionNumber();let d;return l<=9?d=0:l<=26?d=1:d=2,this.characterCountBitsForVersions[d]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof rt))return!1;const l=i;return this.value===l.value}toString(){return this.stringValue}}rt.FOR_BITS=new Map,rt.FOR_VALUE=new Map,rt.TERMINATOR=new rt(bs.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),rt.NUMERIC=new rt(bs.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),rt.ALPHANUMERIC=new rt(bs.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),rt.STRUCTURED_APPEND=new rt(bs.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),rt.BYTE=new rt(bs.BYTE,"BYTE",Int32Array.from([8,16,16]),4),rt.ECI=new rt(bs.ECI,"ECI",Int32Array.from([0,0,0]),7),rt.KANJI=new rt(bs.KANJI,"KANJI",Int32Array.from([8,10,12]),8),rt.FNC1_FIRST_POSITION=new rt(bs.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),rt.FNC1_SECOND_POSITION=new rt(bs.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),rt.HANZI=new rt(bs.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class pr{static decode(i,l,d,h){const m=new wp(i);let g=new q;const y=new Array;let A=-1,I=-1;try{let O=null,z=!1,V;do{if(m.available()<4)V=rt.TERMINATOR;else{const Z=m.readBits(4);V=rt.forBits(Z)}switch(V){case rt.TERMINATOR:break;case rt.FNC1_FIRST_POSITION:case rt.FNC1_SECOND_POSITION:z=!0;break;case rt.STRUCTURED_APPEND:if(m.available()<16)throw new R;A=m.readBits(8),I=m.readBits(8);break;case rt.ECI:const Z=pr.parseECIValue(m);if(O=P.getCharacterSetECIByValue(Z),O===null)throw new R;break;case rt.HANZI:const ie=m.readBits(4),le=m.readBits(V.getCharacterCountBits(l));ie===pr.GB2312_SUBSET&&pr.decodeHanziSegment(m,g,le);break;default:const fe=m.readBits(V.getCharacterCountBits(l));switch(V){case rt.NUMERIC:pr.decodeNumericSegment(m,g,fe);break;case rt.ALPHANUMERIC:pr.decodeAlphanumericSegment(m,g,fe,z);break;case rt.BYTE:pr.decodeByteSegment(m,g,fe,O,y,h);break;case rt.KANJI:pr.decodeKanjiSegment(m,g,fe);break;default:throw new R}break}}while(V!==rt.TERMINATOR)}catch{throw new R}return new Te(i,g.toString(),y.length===0?null:y,d===null?null:d.toString(),A,I)}static decodeHanziSegment(i,l,d){if(d*13>i.available())throw new R;const h=new Uint8Array(2*d);let m=0;for(;d>0;){const g=i.readBits(13);let y=g/96<<8&4294967295|g%96;y<959?y+=41377:y+=42657,h[m]=y>>8&255,h[m+1]=y&255,m+=2,d--}try{l.append(Y.decode(h,U.GB2312))}catch(g){throw new R(g)}}static decodeKanjiSegment(i,l,d){if(d*13>i.available())throw new R;const h=new Uint8Array(2*d);let m=0;for(;d>0;){const g=i.readBits(13);let y=g/192<<8&4294967295|g%192;y<7936?y+=33088:y+=49472,h[m]=y>>8,h[m+1]=y,m+=2,d--}try{l.append(Y.decode(h,U.SHIFT_JIS))}catch(g){throw new R(g)}}static decodeByteSegment(i,l,d,h,m,g){if(8*d>i.available())throw new R;const y=new Uint8Array(d);for(let I=0;I<d;I++)y[I]=i.readBits(8);let A;h===null?A=U.guessEncoding(y,g):A=h.getName();try{l.append(Y.decode(y,A))}catch(I){throw new R(I)}m.push(y)}static toAlphaNumericChar(i){if(i>=pr.ALPHANUMERIC_CHARS.length)throw new R;return pr.ALPHANUMERIC_CHARS[i]}static decodeAlphanumericSegment(i,l,d,h){const m=l.length();for(;d>1;){if(i.available()<11)throw new R;const g=i.readBits(11);l.append(pr.toAlphaNumericChar(Math.floor(g/45))),l.append(pr.toAlphaNumericChar(g%45)),d-=2}if(d===1){if(i.available()<6)throw new R;l.append(pr.toAlphaNumericChar(i.readBits(6)))}if(h)for(let g=m;g<l.length();g++)l.charAt(g)==="%"&&(g<l.length()-1&&l.charAt(g+1)==="%"?l.deleteCharAt(g+1):l.setCharAt(g,""))}static decodeNumericSegment(i,l,d){for(;d>=3;){if(i.available()<10)throw new R;const h=i.readBits(10);if(h>=1e3)throw new R;l.append(pr.toAlphaNumericChar(Math.floor(h/100))),l.append(pr.toAlphaNumericChar(Math.floor(h/10)%10)),l.append(pr.toAlphaNumericChar(h%10)),d-=3}if(d===2){if(i.available()<7)throw new R;const h=i.readBits(7);if(h>=100)throw new R;l.append(pr.toAlphaNumericChar(Math.floor(h/10))),l.append(pr.toAlphaNumericChar(h%10))}else if(d===1){if(i.available()<4)throw new R;const h=i.readBits(4);if(h>=10)throw new R;l.append(pr.toAlphaNumericChar(h))}}static parseECIValue(i){const l=i.readBits(8);if(!(l&128))return l&127;if((l&192)===128){const d=i.readBits(8);return(l&63)<<8&4294967295|d}if((l&224)===192){const d=i.readBits(16);return(l&31)<<16&4294967295|d}throw new R}}pr.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",pr.GB2312_SUBSET=1;class Uv{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;const l=i[0];i[0]=i[2],i[2]=l}}class Fk{constructor(){this.rsDecoder=new Je(ue.QR_CODE_FIELD_256)}decodeBooleanArray(i,l){return this.decodeBitMatrix(re.parseFromBooleanArray(i),l)}decodeBitMatrix(i,l){const d=new Lk(i);let h=null;try{return this.decodeBitMatrixParser(d,l)}catch(m){h=m}try{d.remask(),d.setMirror(!0),d.readVersion(),d.readFormatInformation(),d.mirror();const m=this.decodeBitMatrixParser(d,l);return m.setOther(new Uv(!0)),m}catch(m){throw h!==null?h:m}}decodeBitMatrixParser(i,l){const d=i.readVersion(),h=i.readFormatInformation().getErrorCorrectionLevel(),m=i.readCodewords(),g=yp.getDataBlocks(m,d,h);let y=0;for(const O of g)y+=O.getNumDataCodewords();const A=new Uint8Array(y);let I=0;for(const O of g){const z=O.getCodewords(),V=O.getNumDataCodewords();this.correctErrors(z,V);for(let Z=0;Z<V;Z++)A[I++]=z[Z]}return pr.decode(A,d,h,l)}correctErrors(i,l){const d=new Int32Array(i);try{this.rsDecoder.decode(d,i.length-l)}catch{throw new j}for(let h=0;h<l;h++)i[h]=d[h]}}class bp extends pe{constructor(i,l,d){super(i,l),this.estimatedModuleSize=d}aboutEquals(i,l,d){if(Math.abs(l-this.getY())<=i&&Math.abs(d-this.getX())<=i){const h=Math.abs(i-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(i,l,d){const h=(this.getX()+l)/2,m=(this.getY()+i)/2,g=(this.estimatedModuleSize+d)/2;return new bp(h,m,g)}}class eh{constructor(i,l,d,h,m,g,y){this.image=i,this.startX=l,this.startY=d,this.width=h,this.height=m,this.moduleSize=g,this.resultPointCallback=y,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,l=this.height,d=this.width,h=i+d,m=this.startY+l/2,g=new Int32Array(3),y=this.image;for(let A=0;A<l;A++){const I=m+(A&1?-Math.floor((A+1)/2):Math.floor((A+1)/2));g[0]=0,g[1]=0,g[2]=0;let O=i;for(;O<h&&!y.get(O,I);)O++;let z=0;for(;O<h;){if(y.get(O,I))if(z===1)g[1]++;else if(z===2){if(this.foundPatternCross(g)){const V=this.handlePossibleCenter(g,I,O);if(V!==null)return V}g[0]=g[2],g[1]=1,g[2]=0,z=1}else g[++z]++;else z===1&&z++,g[z]++;O++}if(this.foundPatternCross(g)){const V=this.handlePossibleCenter(g,I,h);if(V!==null)return V}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new W}static centerFromEnd(i,l){return l-i[2]-i[1]/2}foundPatternCross(i){const l=this.moduleSize,d=l/2;for(let h=0;h<3;h++)if(Math.abs(l-i[h])>=d)return!1;return!0}crossCheckVertical(i,l,d,h){const m=this.image,g=m.getHeight(),y=this.crossCheckStateCount;y[0]=0,y[1]=0,y[2]=0;let A=i;for(;A>=0&&m.get(l,A)&&y[1]<=d;)y[1]++,A--;if(A<0||y[1]>d)return NaN;for(;A>=0&&!m.get(l,A)&&y[0]<=d;)y[0]++,A--;if(y[0]>d)return NaN;for(A=i+1;A<g&&m.get(l,A)&&y[1]<=d;)y[1]++,A++;if(A===g||y[1]>d)return NaN;for(;A<g&&!m.get(l,A)&&y[2]<=d;)y[2]++,A++;if(y[2]>d)return NaN;const I=y[0]+y[1]+y[2];return 5*Math.abs(I-h)>=2*h?NaN:this.foundPatternCross(y)?eh.centerFromEnd(y,A):NaN}handlePossibleCenter(i,l,d){const h=i[0]+i[1]+i[2],m=eh.centerFromEnd(i,d),g=this.crossCheckVertical(l,m,2*i[1],h);if(!isNaN(g)){const y=(i[0]+i[1]+i[2])/3;for(const I of this.possibleCenters)if(I.aboutEquals(y,g,m))return I.combineEstimate(g,m,y);const A=new bp(m,g,y);this.possibleCenters.push(A),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(A)}return null}}class _p extends pe{constructor(i,l,d,h){super(i,l),this.estimatedModuleSize=d,this.count=h,h===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,l,d){if(Math.abs(l-this.getY())<=i&&Math.abs(d-this.getX())<=i){const h=Math.abs(i-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(i,l,d){const h=this.count+1,m=(this.count*this.getX()+l)/h,g=(this.count*this.getY()+i)/h,y=(this.count*this.estimatedModuleSize+d)/h;return new _p(m,g,y,h)}}class Bk{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Kr{constructor(i,l){this.image=i,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=l}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(i){const l=i!=null&&i.get(L.TRY_HARDER)!==void 0,d=i!=null&&i.get(L.PURE_BARCODE)!==void 0,h=this.image,m=h.getHeight(),g=h.getWidth();let y=Math.floor(3*m/(4*Kr.MAX_MODULES));(y<Kr.MIN_SKIP||l)&&(y=Kr.MIN_SKIP);let A=!1;const I=new Int32Array(5);for(let z=y-1;z<m&&!A;z+=y){I[0]=0,I[1]=0,I[2]=0,I[3]=0,I[4]=0;let V=0;for(let Z=0;Z<g;Z++)if(h.get(Z,z))(V&1)===1&&V++,I[V]++;else if(V&1)I[V]++;else if(V===4)if(Kr.foundPatternCross(I)){if(this.handlePossibleCenter(I,z,Z,d)===!0)if(y=2,this.hasSkipped===!0)A=this.haveMultiplyConfirmedCenters();else{const le=this.findRowSkip();le>I[2]&&(z+=le-I[2]-y,Z=g-1)}else{I[0]=I[2],I[1]=I[3],I[2]=I[4],I[3]=1,I[4]=0,V=3;continue}V=0,I[0]=0,I[1]=0,I[2]=0,I[3]=0,I[4]=0}else I[0]=I[2],I[1]=I[3],I[2]=I[4],I[3]=1,I[4]=0,V=3;else I[++V]++;Kr.foundPatternCross(I)&&this.handlePossibleCenter(I,z,g,d)===!0&&(y=I[0],this.hasSkipped&&(A=this.haveMultiplyConfirmedCenters()))}const O=this.selectBestPatterns();return pe.orderBestPatterns(O),new Bk(O)}static centerFromEnd(i,l){return l-i[4]-i[3]-i[2]/2}static foundPatternCross(i){let l=0;for(let m=0;m<5;m++){const g=i[m];if(g===0)return!1;l+=g}if(l<7)return!1;const d=l/7,h=d/2;return Math.abs(d-i[0])<h&&Math.abs(d-i[1])<h&&Math.abs(3*d-i[2])<3*h&&Math.abs(d-i[3])<h&&Math.abs(d-i[4])<h}getCrossCheckStateCount(){const i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i}crossCheckDiagonal(i,l,d,h){const m=this.getCrossCheckStateCount();let g=0;const y=this.image;for(;i>=g&&l>=g&&y.get(l-g,i-g);)m[2]++,g++;if(i<g||l<g)return!1;for(;i>=g&&l>=g&&!y.get(l-g,i-g)&&m[1]<=d;)m[1]++,g++;if(i<g||l<g||m[1]>d)return!1;for(;i>=g&&l>=g&&y.get(l-g,i-g)&&m[0]<=d;)m[0]++,g++;if(m[0]>d)return!1;const A=y.getHeight(),I=y.getWidth();for(g=1;i+g<A&&l+g<I&&y.get(l+g,i+g);)m[2]++,g++;if(i+g>=A||l+g>=I)return!1;for(;i+g<A&&l+g<I&&!y.get(l+g,i+g)&&m[3]<d;)m[3]++,g++;if(i+g>=A||l+g>=I||m[3]>=d)return!1;for(;i+g<A&&l+g<I&&y.get(l+g,i+g)&&m[4]<d;)m[4]++,g++;if(m[4]>=d)return!1;const O=m[0]+m[1]+m[2]+m[3]+m[4];return Math.abs(O-h)<2*h&&Kr.foundPatternCross(m)}crossCheckVertical(i,l,d,h){const m=this.image,g=m.getHeight(),y=this.getCrossCheckStateCount();let A=i;for(;A>=0&&m.get(l,A);)y[2]++,A--;if(A<0)return NaN;for(;A>=0&&!m.get(l,A)&&y[1]<=d;)y[1]++,A--;if(A<0||y[1]>d)return NaN;for(;A>=0&&m.get(l,A)&&y[0]<=d;)y[0]++,A--;if(y[0]>d)return NaN;for(A=i+1;A<g&&m.get(l,A);)y[2]++,A++;if(A===g)return NaN;for(;A<g&&!m.get(l,A)&&y[3]<d;)y[3]++,A++;if(A===g||y[3]>=d)return NaN;for(;A<g&&m.get(l,A)&&y[4]<d;)y[4]++,A++;if(y[4]>=d)return NaN;const I=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(I-h)>=2*h?NaN:Kr.foundPatternCross(y)?Kr.centerFromEnd(y,A):NaN}crossCheckHorizontal(i,l,d,h){const m=this.image,g=m.getWidth(),y=this.getCrossCheckStateCount();let A=i;for(;A>=0&&m.get(A,l);)y[2]++,A--;if(A<0)return NaN;for(;A>=0&&!m.get(A,l)&&y[1]<=d;)y[1]++,A--;if(A<0||y[1]>d)return NaN;for(;A>=0&&m.get(A,l)&&y[0]<=d;)y[0]++,A--;if(y[0]>d)return NaN;for(A=i+1;A<g&&m.get(A,l);)y[2]++,A++;if(A===g)return NaN;for(;A<g&&!m.get(A,l)&&y[3]<d;)y[3]++,A++;if(A===g||y[3]>=d)return NaN;for(;A<g&&m.get(A,l)&&y[4]<d;)y[4]++,A++;if(y[4]>=d)return NaN;const I=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(I-h)>=h?NaN:Kr.foundPatternCross(y)?Kr.centerFromEnd(y,A):NaN}handlePossibleCenter(i,l,d,h){const m=i[0]+i[1]+i[2]+i[3]+i[4];let g=Kr.centerFromEnd(i,d),y=this.crossCheckVertical(l,Math.floor(g),i[2],m);if(!isNaN(y)&&(g=this.crossCheckHorizontal(Math.floor(g),Math.floor(y),i[2],m),!isNaN(g)&&(!h||this.crossCheckDiagonal(Math.floor(y),Math.floor(g),i[2],m)))){const A=m/7;let I=!1;const O=this.possibleCenters;for(let z=0,V=O.length;z<V;z++){const Z=O[z];if(Z.aboutEquals(A,y,g)){O[z]=Z.combineEstimate(y,g,A),I=!0;break}}if(!I){const z=new _p(g,y,A);O.push(z),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(z)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let l=null;for(const d of this.possibleCenters)if(d.getCount()>=Kr.CENTER_QUORUM)if(l==null)l=d;else return this.hasSkipped=!0,Math.floor((Math.abs(l.getX()-d.getX())-Math.abs(l.getY()-d.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let i=0,l=0;const d=this.possibleCenters.length;for(const g of this.possibleCenters)g.getCount()>=Kr.CENTER_QUORUM&&(i++,l+=g.getEstimatedModuleSize());if(i<3)return!1;const h=l/d;let m=0;for(const g of this.possibleCenters)m+=Math.abs(g.getEstimatedModuleSize()-h);return m<=.05*l}selectBestPatterns(){const i=this.possibleCenters.length;if(i<3)throw new W;const l=this.possibleCenters;let d;if(i>3){let h=0,m=0;for(const A of this.possibleCenters){const I=A.getEstimatedModuleSize();h+=I,m+=I*I}d=h/i;let g=Math.sqrt(m/i-d*d);l.sort((A,I)=>{const O=Math.abs(I.getEstimatedModuleSize()-d),z=Math.abs(A.getEstimatedModuleSize()-d);return O<z?-1:O>z?1:0});const y=Math.max(.2*d,g);for(let A=0;A<l.length&&l.length>3;A++){const I=l[A];Math.abs(I.getEstimatedModuleSize()-d)>y&&(l.splice(A,1),A--)}}if(l.length>3){let h=0;for(const m of l)h+=m.getEstimatedModuleSize();d=h/l.length,l.sort((m,g)=>{if(g.getCount()===m.getCount()){const y=Math.abs(g.getEstimatedModuleSize()-d),A=Math.abs(m.getEstimatedModuleSize()-d);return y<A?1:y>A?-1:0}else return g.getCount()-m.getCount()}),l.splice(3)}return[l[0],l[1],l[2]]}}Kr.CENTER_QUORUM=2,Kr.MIN_SKIP=3,Kr.MAX_MODULES=57;class Jc{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(L.NEED_RESULT_POINT_CALLBACK);const d=new Kr(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(d)}processFinderPatternInfo(i){const l=i.getTopLeft(),d=i.getTopRight(),h=i.getBottomLeft(),m=this.calculateModuleSize(l,d,h);if(m<1)throw new W("No pattern found in proccess finder.");const g=Jc.computeDimension(l,d,h,m),y=et.getProvisionalVersionForDimension(g),A=y.getDimensionForVersion()-7;let I=null;if(y.getAlignmentPatternCenters().length>0){const Z=d.getX()-l.getX()+h.getX(),ie=d.getY()-l.getY()+h.getY(),le=1-3/A,fe=Math.floor(l.getX()+le*(Z-l.getX())),ve=Math.floor(l.getY()+le*(ie-l.getY()));for(let De=4;De<=16;De<<=1)try{I=this.findAlignmentInRegion(m,fe,ve,De);break}catch(Le){if(!(Le instanceof W))throw Le}}const O=Jc.createTransform(l,d,h,I,g),z=Jc.sampleGrid(this.image,O,g);let V;return I===null?V=[h,l,d]:V=[h,l,d,I],new Ze(z,V)}static createTransform(i,l,d,h,m){const g=m-3.5;let y,A,I,O;return h!==null?(y=h.getX(),A=h.getY(),I=g-3,O=I):(y=l.getX()-i.getX()+d.getX(),A=l.getY()-i.getY()+d.getY(),I=g,O=g),Nt.quadrilateralToQuadrilateral(3.5,3.5,g,3.5,I,O,3.5,g,i.getX(),i.getY(),l.getX(),l.getY(),y,A,d.getX(),d.getY())}static sampleGrid(i,l,d){return At.getInstance().sampleGridWithTransform(i,d,d,l)}static computeDimension(i,l,d,h){const m=Ge.round(pe.distance(i,l)/h),g=Ge.round(pe.distance(i,d)/h);let y=Math.floor((m+g)/2)+7;switch(y&3){case 0:y++;break;case 2:y--;break;case 3:throw new W("Dimensions could be not found.")}return y}calculateModuleSize(i,l,d){return(this.calculateModuleSizeOneWay(i,l)+this.calculateModuleSizeOneWay(i,d))/2}calculateModuleSizeOneWay(i,l){const d=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(l.getX()),Math.floor(l.getY())),h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(l.getX()),Math.floor(l.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(d)?h/7:isNaN(h)?d/7:(d+h)/14}sizeOfBlackWhiteBlackRunBothWays(i,l,d,h){let m=this.sizeOfBlackWhiteBlackRun(i,l,d,h),g=1,y=i-(d-i);y<0?(g=i/(i-y),y=0):y>=this.image.getWidth()&&(g=(this.image.getWidth()-1-i)/(y-i),y=this.image.getWidth()-1);let A=Math.floor(l-(h-l)*g);return g=1,A<0?(g=l/(l-A),A=0):A>=this.image.getHeight()&&(g=(this.image.getHeight()-1-l)/(A-l),A=this.image.getHeight()-1),y=Math.floor(i+(y-i)*g),m+=this.sizeOfBlackWhiteBlackRun(i,l,y,A),m-1}sizeOfBlackWhiteBlackRun(i,l,d,h){const m=Math.abs(h-l)>Math.abs(d-i);if(m){let Z=i;i=l,l=Z,Z=d,d=h,h=Z}const g=Math.abs(d-i),y=Math.abs(h-l);let A=-g/2;const I=i<d?1:-1,O=l<h?1:-1;let z=0;const V=d+I;for(let Z=i,ie=l;Z!==V;Z+=I){const le=m?ie:Z,fe=m?Z:ie;if(z===1===this.image.get(le,fe)){if(z===2)return Ge.distance(Z,ie,i,l);z++}if(A+=y,A>0){if(ie===h)break;ie+=O,A-=g}}return z===2?Ge.distance(d+I,h,i,l):NaN}findAlignmentInRegion(i,l,d,h){const m=Math.floor(h*i),g=Math.max(0,l-m),y=Math.min(this.image.getWidth()-1,l+m);if(y-g<i*3)throw new W("Alignment top exceeds estimated module size.");const A=Math.max(0,d-m),I=Math.min(this.image.getHeight()-1,d+m);if(I-A<i*3)throw new W("Alignment bottom exceeds estimated module size.");return new eh(this.image,g,A,y-g,I-A,i,this.resultPointCallback).find()}}class oi{constructor(){this.decoder=new Fk}getDecoder(){return this.decoder}decode(i,l){let d,h;if(l!=null&&l.get(L.PURE_BARCODE)!==void 0){const A=oi.extractPureBits(i.getBlackMatrix());d=this.decoder.decodeBitMatrix(A,l),h=oi.NO_POINTS}else{const A=new Jc(i.getBlackMatrix()).detect(l);d=this.decoder.decodeBitMatrix(A.getBits(),l),h=A.getPoints()}d.getOther()instanceof Uv&&d.getOther().applyMirroredCorrection(h);const m=new X(d.getText(),d.getRawBytes(),void 0,h,se.QR_CODE,void 0),g=d.getByteSegments();g!==null&&m.putMetadata(ge.BYTE_SEGMENTS,g);const y=d.getECLevel();return y!==null&&m.putMetadata(ge.ERROR_CORRECTION_LEVEL,y),d.hasStructuredAppend()&&(m.putMetadata(ge.STRUCTURED_APPEND_SEQUENCE,d.getStructuredAppendSequenceNumber()),m.putMetadata(ge.STRUCTURED_APPEND_PARITY,d.getStructuredAppendParity())),m}reset(){}static extractPureBits(i){const l=i.getTopLeftOnBit(),d=i.getBottomRightOnBit();if(l===null||d===null)throw new W;const h=this.moduleSize(l,i);let m=l[1],g=d[1],y=l[0],A=d[0];if(y>=A||m>=g)throw new W;if(g-m!==A-y&&(A=y+(g-m),A>=i.getWidth()))throw new W;const I=Math.round((A-y+1)/h),O=Math.round((g-m+1)/h);if(I<=0||O<=0)throw new W;if(O!==I)throw new W;const z=Math.floor(h/2);m+=z,y+=z;const V=y+Math.floor((I-1)*h)-A;if(V>0){if(V>z)throw new W;y-=V}const Z=m+Math.floor((O-1)*h)-g;if(Z>0){if(Z>z)throw new W;m-=Z}const ie=new re(I,O);for(let le=0;le<O;le++){const fe=m+Math.floor(le*h);for(let ve=0;ve<I;ve++)i.get(y+Math.floor(ve*h),fe)&&ie.set(ve,le)}return ie}static moduleSize(i,l){const d=l.getHeight(),h=l.getWidth();let m=i[0],g=i[1],y=!0,A=0;for(;m<h&&g<d;){if(y!==l.get(m,g)){if(++A===5)break;y=!y}m++,g++}if(m===h||g===d)throw new W;return(m-i[0])/7}}oi.NO_POINTS=new Array;class lt{PDF417Common(){}static getBitCountSum(i){return Ge.sum(i)}static toIntArray(i){if(i==null||!i.length)return lt.EMPTY_INT_ARRAY;const l=new Int32Array(i.length);let d=0;for(const h of i)l[d++]=h;return l}static getCodeword(i){const l=E.binarySearch(lt.SYMBOL_TABLE,i&262143);return l<0?-1:(lt.CODEWORD_TABLE[l]-1)%lt.NUMBER_OF_CODEWORDS}}lt.NUMBER_OF_CODEWORDS=929,lt.MAX_CODEWORDS_IN_BARCODE=lt.NUMBER_OF_CODEWORDS-1,lt.MIN_ROWS_IN_BARCODE=3,lt.MAX_ROWS_IN_BARCODE=90,lt.MODULES_IN_CODEWORD=17,lt.MODULES_IN_STOP_PATTERN=18,lt.BARS_IN_MODULE=8,lt.EMPTY_INT_ARRAY=new Int32Array([]),lt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),lt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class zk{constructor(i,l){this.bits=i,this.points=l}getBits(){return this.bits}getPoints(){return this.points}}class wt{static detectMultiple(i,l,d){let h=i.getBlackMatrix(),m=wt.detect(d,h);return m.length||(h=h.clone(),h.rotate180(),m=wt.detect(d,h)),new zk(h,m)}static detect(i,l){const d=new Array;let h=0,m=0,g=!1;for(;h<l.getHeight();){const y=wt.findVertices(l,h,m);if(y[0]==null&&y[3]==null){if(!g)break;g=!1,m=0;for(const A of d)A[1]!=null&&(h=Math.trunc(Math.max(h,A[1].getY()))),A[3]!=null&&(h=Math.max(h,Math.trunc(A[3].getY())));h+=wt.ROW_STEP;continue}if(g=!0,d.push(y),!i)break;y[2]!=null?(m=Math.trunc(y[2].getX()),h=Math.trunc(y[2].getY())):(m=Math.trunc(y[4].getX()),h=Math.trunc(y[4].getY()))}return d}static findVertices(i,l,d){const h=i.getHeight(),m=i.getWidth(),g=new Array(8);return wt.copyToResult(g,wt.findRowsWithPattern(i,h,m,l,d,wt.START_PATTERN),wt.INDEXES_START_PATTERN),g[4]!=null&&(d=Math.trunc(g[4].getX()),l=Math.trunc(g[4].getY())),wt.copyToResult(g,wt.findRowsWithPattern(i,h,m,l,d,wt.STOP_PATTERN),wt.INDEXES_STOP_PATTERN),g}static copyToResult(i,l,d){for(let h=0;h<d.length;h++)i[d[h]]=l[h]}static findRowsWithPattern(i,l,d,h,m,g){const y=new Array(4);let A=!1;const I=new Int32Array(g.length);for(;h<l;h+=wt.ROW_STEP){let z=wt.findGuardPattern(i,m,h,d,!1,g,I);if(z!=null){for(;h>0;){const V=wt.findGuardPattern(i,m,--h,d,!1,g,I);if(V!=null)z=V;else{h++;break}}y[0]=new pe(z[0],h),y[1]=new pe(z[1],h),A=!0;break}}let O=h+1;if(A){let z=0,V=Int32Array.from([Math.trunc(y[0].getX()),Math.trunc(y[1].getX())]);for(;O<l;O++){const Z=wt.findGuardPattern(i,V[0],O,d,!1,g,I);if(Z!=null&&Math.abs(V[0]-Z[0])<wt.MAX_PATTERN_DRIFT&&Math.abs(V[1]-Z[1])<wt.MAX_PATTERN_DRIFT)V=Z,z=0;else{if(z>wt.SKIPPED_ROW_COUNT_MAX)break;z++}}O-=z+1,y[2]=new pe(V[0],O),y[3]=new pe(V[1],O)}return O-h<wt.BARCODE_MIN_HEIGHT&&E.fill(y,null),y}static findGuardPattern(i,l,d,h,m,g,y){E.fillWithin(y,0,y.length,0);let A=l,I=0;for(;i.get(A,d)&&A>0&&I++<wt.MAX_PIXEL_DRIFT;)A--;let O=A,z=0,V=g.length;for(let Z=m;O<h;O++)if(i.get(O,d)!==Z)y[z]++;else{if(z===V-1){if(wt.patternMatchVariance(y,g,wt.MAX_INDIVIDUAL_VARIANCE)<wt.MAX_AVG_VARIANCE)return new Int32Array([A,O]);A+=y[0]+y[1],C.arraycopy(y,2,y,0,z-1),y[z-1]=0,y[z]=0,z--}else z++;y[z]=1,Z=!Z}return z===V-1&&wt.patternMatchVariance(y,g,wt.MAX_INDIVIDUAL_VARIANCE)<wt.MAX_AVG_VARIANCE?new Int32Array([A,O-1]):null}static patternMatchVariance(i,l,d){let h=i.length,m=0,g=0;for(let I=0;I<h;I++)m+=i[I],g+=l[I];if(m<g)return 1/0;let y=m/g;d*=y;let A=0;for(let I=0;I<h;I++){let O=i[I],z=l[I]*y,V=O>z?O-z:z-O;if(V>d)return 1/0;A+=V}return A/m}}wt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),wt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),wt.MAX_AVG_VARIANCE=.42,wt.MAX_INDIVIDUAL_VARIANCE=.8,wt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),wt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),wt.MAX_PIXEL_DRIFT=3,wt.MAX_PATTERN_DRIFT=5,wt.SKIPPED_ROW_COUNT_MAX=25,wt.ROW_STEP=5,wt.BARCODE_MIN_HEIGHT=10;class tn{constructor(i,l){if(l.length===0)throw new w;this.field=i;let d=l.length;if(d>1&&l[0]===0){let h=1;for(;h<d&&l[h]===0;)h++;h===d?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(d-h),C.arraycopy(l,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=l}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let h=0;for(let m of this.coefficients)h=this.field.add(h,m);return h}let l=this.coefficients[0],d=this.coefficients.length;for(let h=1;h<d;h++)l=this.field.add(this.field.multiply(i,l),this.coefficients[h]);return l}add(i){if(!this.field.equals(i.field))throw new w("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let l=this.coefficients,d=i.coefficients;if(l.length>d.length){let g=l;l=d,d=g}let h=new Int32Array(d.length),m=d.length-l.length;C.arraycopy(d,0,h,0,m);for(let g=m;g<d.length;g++)h[g]=this.field.add(l[g-m],d[g]);return new tn(this.field,h)}subtract(i){if(!this.field.equals(i.field))throw new w("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof tn?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new w("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new tn(this.field,new Int32Array([0]));let l=this.coefficients,d=l.length,h=i.coefficients,m=h.length,g=new Int32Array(d+m-1);for(let y=0;y<d;y++){let A=l[y];for(let I=0;I<m;I++)g[y+I]=this.field.add(g[y+I],this.field.multiply(A,h[I]))}return new tn(this.field,g)}negative(){let i=this.coefficients.length,l=new Int32Array(i);for(let d=0;d<i;d++)l[d]=this.field.subtract(0,this.coefficients[d]);return new tn(this.field,l)}multiplyScalar(i){if(i===0)return new tn(this.field,new Int32Array([0]));if(i===1)return this;let l=this.coefficients.length,d=new Int32Array(l);for(let h=0;h<l;h++)d[h]=this.field.multiply(this.coefficients[h],i);return new tn(this.field,d)}multiplyByMonomial(i,l){if(i<0)throw new w;if(l===0)return new tn(this.field,new Int32Array([0]));let d=this.coefficients.length,h=new Int32Array(d+i);for(let m=0;m<d;m++)h[m]=this.field.multiply(this.coefficients[m],l);return new tn(this.field,h)}toString(){let i=new q;for(let l=this.getDegree();l>=0;l--){let d=this.getCoefficient(l);d!==0&&(d<0?(i.append(" - "),d=-d):i.length()>0&&i.append(" + "),(l===0||d!==1)&&i.append(d),l!==0&&(l===1?i.append("x"):(i.append("x^"),i.append(l))))}return i.toString()}}class Uk{add(i,l){return(i+l)%this.modulus}subtract(i,l){return(this.modulus+i-l)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new w;return this.logTable[i]}inverse(i){if(i===0)throw new Me;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,l){return i===0||l===0?0:this.expTable[(this.logTable[i]+this.logTable[l])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class Np extends Uk{constructor(i,l){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let d=1;for(let h=0;h<i;h++)this.expTable[h]=d,d=d*l%i;for(let h=0;h<i-1;h++)this.logTable[this.expTable[h]]=h;this.zero=new tn(this,new Int32Array([0])),this.one=new tn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,l){if(i<0)throw new w;if(l===0)return this.zero;let d=new Int32Array(i+1);return d[0]=l,new tn(this,d)}}Np.PDF417_GF=new Np(lt.NUMBER_OF_CODEWORDS,3);class $v{constructor(){this.field=Np.PDF417_GF}decode(i,l,d){let h=new tn(this.field,i),m=new Int32Array(l),g=!1;for(let ie=l;ie>0;ie--){let le=h.evaluateAt(this.field.exp(ie));m[l-ie]=le,le!==0&&(g=!0)}if(!g)return 0;let y=this.field.getOne();if(d!=null)for(const ie of d){let le=this.field.exp(i.length-1-ie),fe=new tn(this.field,new Int32Array([this.field.subtract(0,le),1]));y=y.multiply(fe)}let A=new tn(this.field,m),I=this.runEuclideanAlgorithm(this.field.buildMonomial(l,1),A,l),O=I[0],z=I[1],V=this.findErrorLocations(O),Z=this.findErrorMagnitudes(z,O,V);for(let ie=0;ie<V.length;ie++){let le=i.length-1-this.field.log(V[ie]);if(le<0)throw j.getChecksumInstance();i[le]=this.field.subtract(i[le],Z[ie])}return V.length}runEuclideanAlgorithm(i,l,d){if(i.getDegree()<l.getDegree()){let V=i;i=l,l=V}let h=i,m=l,g=this.field.getZero(),y=this.field.getOne();for(;m.getDegree()>=Math.round(d/2);){let V=h,Z=g;if(h=m,g=y,h.isZero())throw j.getChecksumInstance();m=V;let ie=this.field.getZero(),le=h.getCoefficient(h.getDegree()),fe=this.field.inverse(le);for(;m.getDegree()>=h.getDegree()&&!m.isZero();){let ve=m.getDegree()-h.getDegree(),De=this.field.multiply(m.getCoefficient(m.getDegree()),fe);ie=ie.add(this.field.buildMonomial(ve,De)),m=m.subtract(h.multiplyByMonomial(ve,De))}y=ie.multiply(g).subtract(Z).negative()}let A=y.getCoefficient(0);if(A===0)throw j.getChecksumInstance();let I=this.field.inverse(A),O=y.multiply(I),z=m.multiply(I);return[O,z]}findErrorLocations(i){let l=i.getDegree(),d=new Int32Array(l),h=0;for(let m=1;m<this.field.getSize()&&h<l;m++)i.evaluateAt(m)===0&&(d[h]=this.field.inverse(m),h++);if(h!==l)throw j.getChecksumInstance();return d}findErrorMagnitudes(i,l,d){let h=l.getDegree(),m=new Int32Array(h);for(let I=1;I<=h;I++)m[h-I]=this.field.multiply(I,l.getCoefficient(I));let g=new tn(this.field,m),y=d.length,A=new Int32Array(y);for(let I=0;I<y;I++){let O=this.field.inverse(d[I]),z=this.field.subtract(0,i.evaluateAt(O)),V=this.field.inverse(g.evaluateAt(O));A[I]=this.field.multiply(z,V)}return A}}class po{constructor(i,l,d,h,m){i instanceof po?this.constructor_2(i):this.constructor_1(i,l,d,h,m)}constructor_1(i,l,d,h,m){const g=l==null||d==null,y=h==null||m==null;if(g&&y)throw new W;g?(l=new pe(0,h.getY()),d=new pe(0,m.getY())):y&&(h=new pe(i.getWidth()-1,l.getY()),m=new pe(i.getWidth()-1,d.getY())),this.image=i,this.topLeft=l,this.bottomLeft=d,this.topRight=h,this.bottomRight=m,this.minX=Math.trunc(Math.min(l.getX(),d.getX())),this.maxX=Math.trunc(Math.max(h.getX(),m.getX())),this.minY=Math.trunc(Math.min(l.getY(),h.getY())),this.maxY=Math.trunc(Math.max(d.getY(),m.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,l){return i==null?l:l==null?i:new po(i.image,i.topLeft,i.bottomLeft,l.topRight,l.bottomRight)}addMissingRows(i,l,d){let h=this.topLeft,m=this.bottomLeft,g=this.topRight,y=this.bottomRight;if(i>0){let A=d?this.topLeft:this.topRight,I=Math.trunc(A.getY()-i);I<0&&(I=0);let O=new pe(A.getX(),I);d?h=O:g=O}if(l>0){let A=d?this.bottomLeft:this.bottomRight,I=Math.trunc(A.getY()+l);I>=this.image.getHeight()&&(I=this.image.getHeight()-1);let O=new pe(A.getX(),I);d?m=O:y=O}return new po(this.image,h,m,g,y)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class $k{constructor(i,l,d,h){this.columnCount=i,this.errorCorrectionLevel=h,this.rowCountUpperPart=l,this.rowCountLowerPart=d,this.rowCount=l+d}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ed{constructor(){this.buffer=""}static form(i,l){let d=-1;function h(g,y,A,I,O,z){if(g==="%%")return"%";if(l[++d]===void 0)return;g=I?parseInt(I.substr(1)):void 0;let V=O?parseInt(O.substr(1)):void 0,Z;switch(z){case"s":Z=l[d];break;case"c":Z=l[d][0];break;case"f":Z=parseFloat(l[d]).toFixed(g);break;case"p":Z=parseFloat(l[d]).toPrecision(g);break;case"e":Z=parseFloat(l[d]).toExponential(g);break;case"x":Z=parseInt(l[d]).toString(V||16);break;case"d":Z=parseFloat(parseInt(l[d],V||10).toPrecision(g)).toFixed(0);break}Z=typeof Z=="object"?JSON.stringify(Z):(+Z).toString(V);let ie=parseInt(A),le=A&&A[0]+""=="0"?"0":" ";for(;Z.length<ie;)Z=y!==void 0?Z+le:le+Z;return Z}let m=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(m,h)}format(i,...l){this.buffer+=ed.form(i,l)}toString(){return this.buffer}}class td{constructor(i){this.boundingBox=new po(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}getCodewordNearby(i){let l=this.getCodeword(i);if(l!=null)return l;for(let d=1;d<td.MAX_NEARBY_DISTANCE;d++){let h=this.imageRowToCodewordIndex(i)-d;if(h>=0&&(l=this.codewords[h],l!=null)||(h=this.imageRowToCodewordIndex(i)+d,h<this.codewords.length&&(l=this.codewords[h],l!=null)))return l}return null}imageRowToCodewordIndex(i){return i-this.boundingBox.getMinY()}setCodeword(i,l){this.codewords[this.imageRowToCodewordIndex(i)]=l}getCodeword(i){return this.codewords[this.imageRowToCodewordIndex(i)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const i=new ed;let l=0;for(const d of this.codewords){if(d==null){i.format("%3d:    |   %n",l++);continue}i.format("%3d: %3d|%3d%n",l++,d.getRowNumber(),d.getValue())}return i.toString()}}td.MAX_NEARBY_DISTANCE=5;class rd{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let l=this.values.get(i);l==null&&(l=0),l++,this.values.set(i,l)}getValue(){let i=-1,l=new Array;for(const[d,h]of this.values.entries()){const m={getKey:()=>d,getValue:()=>h};m.getValue()>i?(i=m.getValue(),l=[],l.push(m.getKey())):m.getValue()===i&&l.push(m.getKey())}return lt.toIntArray(l)}getConfidence(i){return this.values.get(i)}}class Vv extends td{constructor(i,l){super(i),this._isLeft=l}setRowNumbers(){for(let i of this.getCodewords())i!=null&&i.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let l=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(l,i);let d=this.getBoundingBox(),h=this._isLeft?d.getTopLeft():d.getTopRight(),m=this._isLeft?d.getBottomLeft():d.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(h.getY())),y=this.imageRowToCodewordIndex(Math.trunc(m.getY())),A=-1,I=1,O=0;for(let z=g;z<y;z++){if(l[z]==null)continue;let V=l[z],Z=V.getRowNumber()-A;if(Z===0)O++;else if(Z===1)I=Math.max(I,O),O=1,A=V.getRowNumber();else if(Z<0||V.getRowNumber()>=i.getRowCount()||Z>z)l[z]=null;else{let ie;I>2?ie=(I-2)*Z:ie=Z;let le=ie>=z;for(let fe=1;fe<=ie&&!le;fe++)le=l[z-fe]!=null;le?l[z]=null:(A=V.getRowNumber(),O=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let l=new Int32Array(i.getRowCount());for(let d of this.getCodewords())if(d!=null){let h=d.getRowNumber();if(h>=l.length)continue;l[h]++}return l}adjustIncompleteIndicatorColumnRowNumbers(i){let l=this.getBoundingBox(),d=this._isLeft?l.getTopLeft():l.getTopRight(),h=this._isLeft?l.getBottomLeft():l.getBottomRight(),m=this.imageRowToCodewordIndex(Math.trunc(d.getY())),g=this.imageRowToCodewordIndex(Math.trunc(h.getY())),y=this.getCodewords(),A=-1;for(let I=m;I<g;I++){if(y[I]==null)continue;let O=y[I];O.setRowNumberAsRowIndicatorColumn();let z=O.getRowNumber()-A;z===0||(z===1?A=O.getRowNumber():O.getRowNumber()>=i.getRowCount()?y[I]=null:A=O.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),l=new rd,d=new rd,h=new rd,m=new rd;for(let y of i){if(y==null)continue;y.setRowNumberAsRowIndicatorColumn();let A=y.getValue()%30,I=y.getRowNumber();switch(this._isLeft||(I+=2),I%3){case 0:d.setValue(A*3+1);break;case 1:m.setValue(A/3),h.setValue(A%3);break;case 2:l.setValue(A+1);break}}if(l.getValue().length===0||d.getValue().length===0||h.getValue().length===0||m.getValue().length===0||l.getValue()[0]<1||d.getValue()[0]+h.getValue()[0]<lt.MIN_ROWS_IN_BARCODE||d.getValue()[0]+h.getValue()[0]>lt.MAX_ROWS_IN_BARCODE)return null;let g=new $k(l.getValue()[0],d.getValue()[0],h.getValue()[0],m.getValue()[0]);return this.removeIncorrectCodewords(i,g),g}removeIncorrectCodewords(i,l){for(let d=0;d<i.length;d++){let h=i[d];if(i[d]==null)continue;let m=h.getValue()%30,g=h.getRowNumber();if(g>l.getRowCount()){i[d]=null;continue}switch(this._isLeft||(g+=2),g%3){case 0:m*3+1!==l.getRowCountUpperPart()&&(i[d]=null);break;case 1:(Math.trunc(m/3)!==l.getErrorCorrectionLevel()||m%3!==l.getRowCountLowerPart())&&(i[d]=null);break;case 2:m+1!==l.getColumnCount()&&(i[d]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class nd{constructor(i,l){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=l,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=lt.MAX_CODEWORDS_IN_BARCODE,l;do l=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<l);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i!=null&&i.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let l=1;l<this.barcodeColumnCount+1;l++){let d=this.detectionResultColumns[l].getCodewords();for(let h=0;h<d.length;h++)d[h]!=null&&(d[h].hasValidRowNumber()||this.adjustRowNumbers(l,h,d))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),l=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let d=0;d<i.length;d++)if(i[d]!=null&&l[d]!=null&&i[d].getRowNumber()===l[d].getRowNumber())for(let h=1;h<=this.barcodeColumnCount;h++){let m=this.detectionResultColumns[h].getCodewords()[d];m!=null&&(m.setRowNumber(i[d].getRowNumber()),m.hasValidRowNumber()||(this.detectionResultColumns[h].getCodewords()[d]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,l=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let d=0;d<l.length;d++){if(l[d]==null)continue;let h=l[d].getRowNumber(),m=0;for(let g=this.barcodeColumnCount+1;g>0&&m<this.ADJUST_ROW_NUMBER_SKIP;g--){let y=this.detectionResultColumns[g].getCodewords()[d];y!=null&&(m=nd.adjustRowNumberIfValid(h,m,y),y.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,l=this.detectionResultColumns[0].getCodewords();for(let d=0;d<l.length;d++){if(l[d]==null)continue;let h=l[d].getRowNumber(),m=0;for(let g=1;g<this.barcodeColumnCount+1&&m<this.ADJUST_ROW_NUMBER_SKIP;g++){let y=this.detectionResultColumns[g].getCodewords()[d];y!=null&&(m=nd.adjustRowNumberIfValid(h,m,y),y.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,l,d){return d==null||d.hasValidRowNumber()||(d.isValidRowNumber(i)?(d.setRowNumber(i),l=0):++l),l}adjustRowNumbers(i,l,d){if(!this.detectionResultColumns[i-1])return;let h=d[l],m=this.detectionResultColumns[i-1].getCodewords(),g=m;this.detectionResultColumns[i+1]!=null&&(g=this.detectionResultColumns[i+1].getCodewords());let y=new Array(14);y[2]=m[l],y[3]=g[l],l>0&&(y[0]=d[l-1],y[4]=m[l-1],y[5]=g[l-1]),l>1&&(y[8]=d[l-2],y[10]=m[l-2],y[11]=g[l-2]),l<d.length-1&&(y[1]=d[l+1],y[6]=m[l+1],y[7]=g[l+1]),l<d.length-2&&(y[9]=d[l+2],y[12]=m[l+2],y[13]=g[l+2]);for(let A of y)if(nd.adjustRowNumber(h,A))return}static adjustRowNumber(i,l){return l==null?!1:l.hasValidRowNumber()&&l.getBucket()===i.getBucket()?(i.setRowNumber(l.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,l){this.detectionResultColumns[i]=l}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let l=new ed;for(let d=0;d<i.getCodewords().length;d++){l.format("CW %3d:",d);for(let h=0;h<this.barcodeColumnCount+2;h++){if(this.detectionResultColumns[h]==null){l.format("    |   ");continue}let m=this.detectionResultColumns[h].getCodewords()[d];if(m==null){l.format("    |   ");continue}l.format(" %3d|%3d",m.getRowNumber(),m.getValue())}l.format("%n")}return l.toString()}}class sd{constructor(i,l,d,h){this.rowNumber=sd.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(l),this.bucket=Math.trunc(d),this.value=Math.trunc(h)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(i){return i!==sd.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(i){this.rowNumber=i}toString(){return this.rowNumber+"|"+this.value}}sd.BARCODE_ROW_UNKNOWN=-1;class Mn{static initialize(){for(let i=0;i<lt.SYMBOL_TABLE.length;i++){let l=lt.SYMBOL_TABLE[i],d=l&1;for(let h=0;h<lt.BARS_IN_MODULE;h++){let m=0;for(;(l&1)===d;)m+=1,l>>=1;d=l&1,Mn.RATIOS_TABLE[i]||(Mn.RATIOS_TABLE[i]=new Array(lt.BARS_IN_MODULE)),Mn.RATIOS_TABLE[i][lt.BARS_IN_MODULE-h-1]=Math.fround(m/lt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let l=Mn.getDecodedCodewordValue(Mn.sampleBitCounts(i));return l!==-1?l:Mn.getClosestDecodedValue(i)}static sampleBitCounts(i){let l=Ge.sum(i),d=new Int32Array(lt.BARS_IN_MODULE),h=0,m=0;for(let g=0;g<lt.MODULES_IN_CODEWORD;g++){let y=l/(2*lt.MODULES_IN_CODEWORD)+g*l/lt.MODULES_IN_CODEWORD;m+i[h]<=y&&(m+=i[h],h++),d[h]++}return d}static getDecodedCodewordValue(i){let l=Mn.getBitValue(i);return lt.getCodeword(l)===-1?-1:l}static getBitValue(i){let l=0;for(let d=0;d<i.length;d++)for(let h=0;h<i[d];h++)l=l<<1|(d%2===0?1:0);return Math.trunc(l)}static getClosestDecodedValue(i){let l=Ge.sum(i),d=new Array(lt.BARS_IN_MODULE);if(l>1)for(let g=0;g<d.length;g++)d[g]=Math.fround(i[g]/l);let h=Vt.MAX_VALUE,m=-1;this.bSymbolTableReady||Mn.initialize();for(let g=0;g<Mn.RATIOS_TABLE.length;g++){let y=0,A=Mn.RATIOS_TABLE[g];for(let I=0;I<lt.BARS_IN_MODULE;I++){let O=Math.fround(A[I]-d[I]);if(y+=Math.fround(O*O),y>=h)break}y<h&&(h=y,m=lt.SYMBOL_TABLE[g])}return m}}Mn.bSymbolTableReady=!1,Mn.RATIOS_TABLE=new Array(lt.SYMBOL_TABLE.length).map(B=>new Array(lt.BARS_IN_MODULE));class qv{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class Wv{static parseLong(i,l=void 0){return parseInt(i,l)}}class Hv extends p{}Hv.kind="NullPointerException";class Vk{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,l,d){if(i==null)throw new Hv;if(l<0||l>i.length||d<0||l+d>i.length||l+d<0)throw new T;if(d===0)return;for(let h=0;h<d;h++)this.write(i[l+h])}flush(){}close(){}}class qk extends p{}class Wk extends Vk{constructor(i=32){if(super(),this.count=0,i<0)throw new w("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let d=this.buf.length<<1;if(d-i<0&&(d=i),d<0){if(i<0)throw new qk;d=_.MAX_VALUE}this.buf=E.copyOfUint8Array(this.buf,d)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,l,d){if(l<0||l>i.length||d<0||l+d-i.length>0)throw new T;this.ensureCapacity(this.count+d),C.arraycopy(i,l,this.buf,this.count,d),this.count+=d}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return E.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var Yt;(function(B){B[B.ALPHA=0]="ALPHA",B[B.LOWER=1]="LOWER",B[B.MIXED=2]="MIXED",B[B.PUNCT=3]="PUNCT",B[B.ALPHA_SHIFT=4]="ALPHA_SHIFT",B[B.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Yt||(Yt={}));function Gv(){if(typeof window<"u")return window.BigInt||null;if(typeof cn<"u")return cn.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let th;function li(B){if(typeof th>"u"&&(th=Gv()),th===null)throw new Error("BigInt is not supported!");return th(B)}function Hk(){let B=[];B[0]=li(1);let i=li(900);B[1]=i;for(let l=2;l<16;l++)B[l]=B[l-1]*i;return B}class xe{static decode(i,l){let d=new q(""),h=P.ISO8859_1;d.enableDecoding(h);let m=1,g=i[m++],y=new qv;for(;m<i[0];){switch(g){case xe.TEXT_COMPACTION_MODE_LATCH:m=xe.textCompaction(i,m,d);break;case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:m=xe.byteCompaction(g,i,h,m,d);break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(i[m++]);break;case xe.NUMERIC_COMPACTION_MODE_LATCH:m=xe.numericCompaction(i,m,d);break;case xe.ECI_CHARSET:P.getCharacterSetECIByValue(i[m++]);break;case xe.ECI_GENERAL_PURPOSE:m+=2;break;case xe.ECI_USER_DEFINED:m++;break;case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:m=xe.decodeMacroBlock(i,m,y);break;case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:throw new R;default:m--,m=xe.textCompaction(i,m,d);break}if(m<i.length)g=i[m++];else throw R.getFormatInstance()}if(d.length()===0)throw R.getFormatInstance();let A=new Te(null,d.toString(),null,l);return A.setOther(y),A}static decodeMacroBlock(i,l,d){if(l+xe.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw R.getFormatInstance();let h=new Int32Array(xe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let y=0;y<xe.NUMBER_OF_SEQUENCE_CODEWORDS;y++,l++)h[y]=i[l];d.setSegmentIndex(_.parseInt(xe.decodeBase900toBase10(h,xe.NUMBER_OF_SEQUENCE_CODEWORDS)));let m=new q;l=xe.textCompaction(i,l,m),d.setFileId(m.toString());let g=-1;for(i[l]===xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(g=l+1);l<i[0];)switch(i[l]){case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(l++,i[l]){case xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let y=new q;l=xe.textCompaction(i,l+1,y),d.setFileName(y.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let A=new q;l=xe.textCompaction(i,l+1,A),d.setSender(A.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let I=new q;l=xe.textCompaction(i,l+1,I),d.setAddressee(I.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let O=new q;l=xe.numericCompaction(i,l+1,O),d.setSegmentCount(_.parseInt(O.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let z=new q;l=xe.numericCompaction(i,l+1,z),d.setTimestamp(Wv.parseLong(z.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let V=new q;l=xe.numericCompaction(i,l+1,V),d.setChecksum(_.parseInt(V.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Z=new q;l=xe.numericCompaction(i,l+1,Z),d.setFileSize(Wv.parseLong(Z.toString()));break;default:throw R.getFormatInstance()}break;case xe.MACRO_PDF417_TERMINATOR:l++,d.setLastSegment(!0);break;default:throw R.getFormatInstance()}if(g!==-1){let y=l-g;d.isLastSegment()&&y--,d.setOptionalData(E.copyOfRange(i,g,g+y))}return l}static textCompaction(i,l,d){let h=new Int32Array((i[0]-l)*2),m=new Int32Array((i[0]-l)*2),g=0,y=!1;for(;l<i[0]&&!y;){let A=i[l++];if(A<xe.TEXT_COMPACTION_MODE_LATCH)h[g]=A/30,h[g+1]=A%30,g+=2;else switch(A){case xe.TEXT_COMPACTION_MODE_LATCH:h[g++]=xe.TEXT_COMPACTION_MODE_LATCH;break;case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:l--,y=!0;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h[g]=xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,A=i[l++],m[g]=A,g++;break}}return xe.decodeTextCompaction(h,m,g,d),l}static decodeTextCompaction(i,l,d,h){let m=Yt.ALPHA,g=Yt.ALPHA,y=0;for(;y<d;){let A=i[y],I="";switch(m){case Yt.ALPHA:if(A<26)I=String.fromCharCode(65+A);else switch(A){case 26:I=" ";break;case xe.LL:m=Yt.LOWER;break;case xe.ML:m=Yt.MIXED;break;case xe.PS:g=m,m=Yt.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(l[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:m=Yt.ALPHA;break}break;case Yt.LOWER:if(A<26)I=String.fromCharCode(97+A);else switch(A){case 26:I=" ";break;case xe.AS:g=m,m=Yt.ALPHA_SHIFT;break;case xe.ML:m=Yt.MIXED;break;case xe.PS:g=m,m=Yt.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(l[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:m=Yt.ALPHA;break}break;case Yt.MIXED:if(A<xe.PL)I=xe.MIXED_CHARS[A];else switch(A){case xe.PL:m=Yt.PUNCT;break;case 26:I=" ";break;case xe.LL:m=Yt.LOWER;break;case xe.AL:m=Yt.ALPHA;break;case xe.PS:g=m,m=Yt.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(l[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:m=Yt.ALPHA;break}break;case Yt.PUNCT:if(A<xe.PAL)I=xe.PUNCT_CHARS[A];else switch(A){case xe.PAL:m=Yt.ALPHA;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(l[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:m=Yt.ALPHA;break}break;case Yt.ALPHA_SHIFT:if(m=g,A<26)I=String.fromCharCode(65+A);else switch(A){case 26:I=" ";break;case xe.TEXT_COMPACTION_MODE_LATCH:m=Yt.ALPHA;break}break;case Yt.PUNCT_SHIFT:if(m=g,A<xe.PAL)I=xe.PUNCT_CHARS[A];else switch(A){case xe.PAL:m=Yt.ALPHA;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(l[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:m=Yt.ALPHA;break}break}I!==""&&h.append(I),y++}}static byteCompaction(i,l,d,h,m){let g=new Wk,y=0,A=0,I=!1;switch(i){case xe.BYTE_COMPACTION_MODE_LATCH:let O=new Int32Array(6),z=l[h++];for(;h<l[0]&&!I;)switch(O[y++]=z,A=900*A+z,z=l[h++],z){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:h--,I=!0;break;default:if(y%5===0&&y>0){for(let V=0;V<6;++V)g.write(Number(li(A)>>li(8*(5-V))));A=0,y=0}break}h===l[0]&&z<xe.TEXT_COMPACTION_MODE_LATCH&&(O[y++]=z);for(let V=0;V<y;V++)g.write(O[V]);break;case xe.BYTE_COMPACTION_MODE_LATCH_6:for(;h<l[0]&&!I;){let V=l[h++];if(V<xe.TEXT_COMPACTION_MODE_LATCH)y++,A=900*A+V;else switch(V){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:h--,I=!0;break}if(y%5===0&&y>0){for(let Z=0;Z<6;++Z)g.write(Number(li(A)>>li(8*(5-Z))));A=0,y=0}}break}return m.append(Y.decode(g.toByteArray(),d)),h}static numericCompaction(i,l,d){let h=0,m=!1,g=new Int32Array(xe.MAX_NUMERIC_CODEWORDS);for(;l<i[0]&&!m;){let y=i[l++];if(l===i[0]&&(m=!0),y<xe.TEXT_COMPACTION_MODE_LATCH)g[h]=y,h++;else switch(y){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:l--,m=!0;break}(h%xe.MAX_NUMERIC_CODEWORDS===0||y===xe.NUMERIC_COMPACTION_MODE_LATCH||m)&&h>0&&(d.append(xe.decodeBase900toBase10(g,h)),h=0)}return l}static decodeBase900toBase10(i,l){let d=li(0);for(let m=0;m<l;m++)d+=xe.EXP900[l-m-1]*li(i[m]);let h=d.toString();if(h.charAt(0)!=="1")throw new R;return h.substring(1)}}xe.TEXT_COMPACTION_MODE_LATCH=900,xe.BYTE_COMPACTION_MODE_LATCH=901,xe.NUMERIC_COMPACTION_MODE_LATCH=902,xe.BYTE_COMPACTION_MODE_LATCH_6=924,xe.ECI_USER_DEFINED=925,xe.ECI_GENERAL_PURPOSE=926,xe.ECI_CHARSET=927,xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,xe.MACRO_PDF417_TERMINATOR=922,xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,xe.MAX_NUMERIC_CODEWORDS=15,xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,xe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,xe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,xe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,xe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,xe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,xe.PL=25,xe.LL=27,xe.AS=27,xe.ML=28,xe.AL=28,xe.PS=29,xe.PAL=29,xe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,xe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",xe.EXP900=Gv()?Hk():[],xe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class yt{constructor(){}static decode(i,l,d,h,m,g,y){let A=new po(i,l,d,h,m),I=null,O=null,z;for(let ie=!0;;ie=!1){if(l!=null&&(I=yt.getRowIndicatorColumn(i,A,l,!0,g,y)),h!=null&&(O=yt.getRowIndicatorColumn(i,A,h,!1,g,y)),z=yt.merge(I,O),z==null)throw W.getNotFoundInstance();let le=z.getBoundingBox();if(ie&&le!=null&&(le.getMinY()<A.getMinY()||le.getMaxY()>A.getMaxY()))A=le;else break}z.setBoundingBox(A);let V=z.getBarcodeColumnCount()+1;z.setDetectionResultColumn(0,I),z.setDetectionResultColumn(V,O);let Z=I!=null;for(let ie=1;ie<=V;ie++){let le=Z?ie:V-ie;if(z.getDetectionResultColumn(le)!==void 0)continue;let fe;le===0||le===V?fe=new Vv(A,le===0):fe=new td(A),z.setDetectionResultColumn(le,fe);let ve=-1,De=ve;for(let Le=A.getMinY();Le<=A.getMaxY();Le++){if(ve=yt.getStartColumn(z,le,Le,Z),ve<0||ve>A.getMaxX()){if(De===-1)continue;ve=De}let Pe=yt.detectCodeword(i,A.getMinX(),A.getMaxX(),Z,ve,Le,g,y);Pe!=null&&(fe.setCodeword(Le,Pe),De=ve,g=Math.min(g,Pe.getWidth()),y=Math.max(y,Pe.getWidth()))}}return yt.createDecoderResult(z)}static merge(i,l){if(i==null&&l==null)return null;let d=yt.getBarcodeMetadata(i,l);if(d==null)return null;let h=po.merge(yt.adjustBoundingBox(i),yt.adjustBoundingBox(l));return new nd(d,h)}static adjustBoundingBox(i){if(i==null)return null;let l=i.getRowHeights();if(l==null)return null;let d=yt.getMax(l),h=0;for(let y of l)if(h+=d-y,y>0)break;let m=i.getCodewords();for(let y=0;h>0&&m[y]==null;y++)h--;let g=0;for(let y=l.length-1;y>=0&&(g+=d-l[y],!(l[y]>0));y--);for(let y=m.length-1;g>0&&m[y]==null;y--)g--;return i.getBoundingBox().addMissingRows(h,g,i.isLeft())}static getMax(i){let l=-1;for(let d of i)l=Math.max(l,d);return l}static getBarcodeMetadata(i,l){let d;if(i==null||(d=i.getBarcodeMetadata())==null)return l==null?null:l.getBarcodeMetadata();let h;return l==null||(h=l.getBarcodeMetadata())==null?d:d.getColumnCount()!==h.getColumnCount()&&d.getErrorCorrectionLevel()!==h.getErrorCorrectionLevel()&&d.getRowCount()!==h.getRowCount()?null:d}static getRowIndicatorColumn(i,l,d,h,m,g){let y=new Vv(l,h);for(let A=0;A<2;A++){let I=A===0?1:-1,O=Math.trunc(Math.trunc(d.getX()));for(let z=Math.trunc(Math.trunc(d.getY()));z<=l.getMaxY()&&z>=l.getMinY();z+=I){let V=yt.detectCodeword(i,0,i.getWidth(),h,O,z,m,g);V!=null&&(y.setCodeword(z,V),h?O=V.getStartX():O=V.getEndX())}}return y}static adjustCodewordCount(i,l){let d=l[0][1],h=d.getValue(),m=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-yt.getNumberOfECCodeWords(i.getBarcodeECLevel());if(h.length===0){if(m<1||m>lt.MAX_CODEWORDS_IN_BARCODE)throw W.getNotFoundInstance();d.setValue(m)}else h[0]!==m&&d.setValue(m)}static createDecoderResult(i){let l=yt.createBarcodeMatrix(i);yt.adjustCodewordCount(i,l);let d=new Array,h=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),m=[],g=new Array;for(let A=0;A<i.getBarcodeRowCount();A++)for(let I=0;I<i.getBarcodeColumnCount();I++){let O=l[A][I+1].getValue(),z=A*i.getBarcodeColumnCount()+I;O.length===0?d.push(z):O.length===1?h[z]=O[0]:(g.push(z),m.push(O))}let y=new Array(m.length);for(let A=0;A<y.length;A++)y[A]=m[A];return yt.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),h,lt.toIntArray(d),lt.toIntArray(g),y)}static createDecoderResultFromAmbiguousValues(i,l,d,h,m){let g=new Int32Array(h.length),y=100;for(;y-- >0;){for(let A=0;A<g.length;A++)l[h[A]]=m[A][g[A]];try{return yt.decodeCodewords(l,i,d)}catch(A){if(!(A instanceof j))throw A}if(g.length===0)throw j.getChecksumInstance();for(let A=0;A<g.length;A++)if(g[A]<m[A].length-1){g[A]++;break}else if(g[A]=0,A===g.length-1)throw j.getChecksumInstance()}throw j.getChecksumInstance()}static createBarcodeMatrix(i){let l=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let h=0;h<l.length;h++)for(let m=0;m<l[h].length;m++)l[h][m]=new rd;let d=0;for(let h of i.getDetectionResultColumns()){if(h!=null){for(let m of h.getCodewords())if(m!=null){let g=m.getRowNumber();if(g>=0){if(g>=l.length)continue;l[g][d].setValue(m.getValue())}}}d++}return l}static isValidBarcodeColumn(i,l){return l>=0&&l<=i.getBarcodeColumnCount()+1}static getStartColumn(i,l,d,h){let m=h?1:-1,g=null;if(yt.isValidBarcodeColumn(i,l-m)&&(g=i.getDetectionResultColumn(l-m).getCodeword(d)),g!=null)return h?g.getEndX():g.getStartX();if(g=i.getDetectionResultColumn(l).getCodewordNearby(d),g!=null)return h?g.getStartX():g.getEndX();if(yt.isValidBarcodeColumn(i,l-m)&&(g=i.getDetectionResultColumn(l-m).getCodewordNearby(d)),g!=null)return h?g.getEndX():g.getStartX();let y=0;for(;yt.isValidBarcodeColumn(i,l-m);){l-=m;for(let A of i.getDetectionResultColumn(l).getCodewords())if(A!=null)return(h?A.getEndX():A.getStartX())+m*y*(A.getEndX()-A.getStartX());y++}return h?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,l,d,h,m,g,y,A){m=yt.adjustCodewordStartColumn(i,l,d,h,m,g);let I=yt.getModuleBitCount(i,l,d,h,m,g);if(I==null)return null;let O,z=Ge.sum(I);if(h)O=m+z;else{for(let ie=0;ie<I.length/2;ie++){let le=I[ie];I[ie]=I[I.length-1-ie],I[I.length-1-ie]=le}O=m,m=O-z}if(!yt.checkCodewordSkew(z,y,A))return null;let V=Mn.getDecodedValue(I),Z=lt.getCodeword(V);return Z===-1?null:new sd(m,O,yt.getCodewordBucketNumber(V),Z)}static getModuleBitCount(i,l,d,h,m,g){let y=m,A=new Int32Array(8),I=0,O=h?1:-1,z=h;for(;(h?y<d:y>=l)&&I<A.length;)i.get(y,g)===z?(A[I]++,y+=O):(I++,z=!z);return I===A.length||y===(h?d:l)&&I===A.length-1?A:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,l,d,h,m,g){let y=m,A=h?-1:1;for(let I=0;I<2;I++){for(;(h?y>=l:y<d)&&h===i.get(y,g);){if(Math.abs(m-y)>yt.CODEWORD_SKEW_SIZE)return m;y+=A}A=-A,h=!h}return y}static checkCodewordSkew(i,l,d){return l-yt.CODEWORD_SKEW_SIZE<=i&&i<=d+yt.CODEWORD_SKEW_SIZE}static decodeCodewords(i,l,d){if(i.length===0)throw R.getFormatInstance();let h=1<<l+1,m=yt.correctErrors(i,d,h);yt.verifyCodewordCount(i,h);let g=xe.decode(i,""+l);return g.setErrorsCorrected(m),g.setErasures(d.length),g}static correctErrors(i,l,d){if(l!=null&&l.length>d/2+yt.MAX_ERRORS||d<0||d>yt.MAX_EC_CODEWORDS)throw j.getChecksumInstance();return yt.errorCorrection.decode(i,d,l)}static verifyCodewordCount(i,l){if(i.length<4)throw R.getFormatInstance();let d=i[0];if(d>i.length)throw R.getFormatInstance();if(d===0)if(l<i.length)i[0]=i.length-l;else throw R.getFormatInstance()}static getBitCountForCodeword(i){let l=new Int32Array(8),d=0,h=l.length-1;for(;!((i&1)!==d&&(d=i&1,h--,h<0));)l[h]++,i>>=1;return l}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return yt.getCodewordBucketNumber(yt.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let l=new ed;for(let d=0;d<i.length;d++){l.format("Row %2d: ",d);for(let h=0;h<i[d].length;h++){let m=i[d][h];m.getValue().length===0?l.format("        ",null):l.format("%4d(%2d)",m.getValue()[0],m.getConfidence(m.getValue()[0]))}l.format("%n")}return l.toString()}}yt.CODEWORD_SKEW_SIZE=2,yt.MAX_ERRORS=3,yt.MAX_EC_CODEWORDS=512,yt.errorCorrection=new $v;class rn{decode(i,l=null){let d=rn.decode(i,l,!1);if(d==null||d.length===0||d[0]==null)throw W.getNotFoundInstance();return d[0]}decodeMultiple(i,l=null){try{return rn.decode(i,l,!0)}catch(d){throw d instanceof R||d instanceof j?W.getNotFoundInstance():d}}static decode(i,l,d){const h=new Array,m=wt.detectMultiple(i,l,d);for(const g of m.getPoints()){const y=yt.decode(m.getBits(),g[4],g[5],g[6],g[7],rn.getMinCodewordWidth(g),rn.getMaxCodewordWidth(g)),A=new X(y.getText(),y.getRawBytes(),void 0,g,se.PDF_417);A.putMetadata(ge.ERROR_CORRECTION_LEVEL,y.getECLevel());const I=y.getOther();I!=null&&A.putMetadata(ge.PDF417_EXTRA_METADATA,I),h.push(A)}return h.map(g=>g)}static getMaxWidth(i,l){return i==null||l==null?0:Math.trunc(Math.abs(i.getX()-l.getX()))}static getMinWidth(i,l){return i==null||l==null?_.MAX_VALUE:Math.trunc(Math.abs(i.getX()-l.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(rn.getMaxWidth(i[0],i[4]),rn.getMaxWidth(i[6],i[2])*lt.MODULES_IN_CODEWORD/lt.MODULES_IN_STOP_PATTERN),Math.max(rn.getMaxWidth(i[1],i[5]),rn.getMaxWidth(i[7],i[3])*lt.MODULES_IN_CODEWORD/lt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(rn.getMinWidth(i[0],i[4]),rn.getMinWidth(i[6],i[2])*lt.MODULES_IN_CODEWORD/lt.MODULES_IN_STOP_PATTERN),Math.min(rn.getMinWidth(i[1],i[5]),rn.getMinWidth(i[7],i[3])*lt.MODULES_IN_CODEWORD/lt.MODULES_IN_STOP_PATTERN)))}reset(){}}class rh extends p{}rh.kind="ReaderException";class Xv{constructor(i,l){this.verbose=i===!0,l&&this.setHints(l)}decode(i,l){return l&&this.setHints(l),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const l=!s(i)&&i.get(L.TRY_HARDER)===!0,d=s(i)?null:i.get(L.POSSIBLE_FORMATS),h=new Array;if(!s(d)){const m=d.some(g=>g===se.UPC_A||g===se.UPC_E||g===se.EAN_13||g===se.EAN_8||g===se.CODABAR||g===se.CODE_39||g===se.CODE_93||g===se.CODE_128||g===se.ITF||g===se.RSS_14||g===se.RSS_EXPANDED);m&&!l&&h.push(new yl(i,this.verbose)),d.includes(se.QR_CODE)&&h.push(new oi),d.includes(se.DATA_MATRIX)&&h.push(new ii),d.includes(se.AZTEC)&&h.push(new st),d.includes(se.PDF_417)&&h.push(new rn),m&&l&&h.push(new yl(i,this.verbose))}h.length===0&&(l||h.push(new yl(i,this.verbose)),h.push(new oi),h.push(new ii),h.push(new st),h.push(new rn),l&&h.push(new yl(i,this.verbose))),this.readers=h}reset(){if(this.readers!==null)for(const i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new rh("No readers where selected, nothing can be read.");for(const l of this.readers)try{return l.decode(i,this.hints)}catch(d){if(d instanceof rh)continue}throw new W("No MultiFormat Readers were able to detect the code.")}}class Gk extends ee{constructor(i=null,l=500){const d=new Xv;d.setHints(i),super(d,l)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class Xk extends ee{constructor(i=500){super(new rn,i)}}class Kk extends ee{constructor(i=500){super(new oi,i)}}var jp;(function(B){B[B.ERROR_CORRECTION=0]="ERROR_CORRECTION",B[B.CHARACTER_SET=1]="CHARACTER_SET",B[B.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",B[B.MIN_SIZE=3]="MIN_SIZE",B[B.MAX_SIZE=4]="MAX_SIZE",B[B.MARGIN=5]="MARGIN",B[B.PDF417_COMPACT=6]="PDF417_COMPACT",B[B.PDF417_COMPACTION=7]="PDF417_COMPACTION",B[B.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",B[B.AZTEC_LAYERS=9]="AZTEC_LAYERS",B[B.QR_VERSION=10]="QR_VERSION"})(jp||(jp={}));var zr=jp;class Cp{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new Se(i,Int32Array.from([1])))}buildGenerator(i){const l=this.cachedGenerators;if(i>=l.length){let d=l[l.length-1];const h=this.field;for(let m=l.length;m<=i;m++){const g=d.multiply(new Se(h,Int32Array.from([1,h.exp(m-1+h.getGeneratorBase())])));l.push(g),d=g}}return l[i]}encode(i,l){if(l===0)throw new w("No error correction bytes");const d=i.length-l;if(d<=0)throw new w("No data bytes provided");const h=this.buildGenerator(l),m=new Int32Array(d);C.arraycopy(i,0,m,0,d);let g=new Se(this.field,m);g=g.multiplyByMonomial(l,1);const A=g.divide(h)[1].getCoefficients(),I=l-A.length;for(let O=0;O<I;O++)i[d+O]=0;C.arraycopy(A,0,i,d+I,A.length)}}class _r{constructor(){}static applyMaskPenaltyRule1(i){return _r.applyMaskPenaltyRule1Internal(i,!0)+_r.applyMaskPenaltyRule1Internal(i,!1)}static applyMaskPenaltyRule2(i){let l=0;const d=i.getArray(),h=i.getWidth(),m=i.getHeight();for(let g=0;g<m-1;g++){const y=d[g];for(let A=0;A<h-1;A++){const I=y[A];I===y[A+1]&&I===d[g+1][A]&&I===d[g+1][A+1]&&l++}}return _r.N2*l}static applyMaskPenaltyRule3(i){let l=0;const d=i.getArray(),h=i.getWidth(),m=i.getHeight();for(let g=0;g<m;g++)for(let y=0;y<h;y++){const A=d[g];y+6<h&&A[y]===1&&A[y+1]===0&&A[y+2]===1&&A[y+3]===1&&A[y+4]===1&&A[y+5]===0&&A[y+6]===1&&(_r.isWhiteHorizontal(A,y-4,y)||_r.isWhiteHorizontal(A,y+7,y+11))&&l++,g+6<m&&d[g][y]===1&&d[g+1][y]===0&&d[g+2][y]===1&&d[g+3][y]===1&&d[g+4][y]===1&&d[g+5][y]===0&&d[g+6][y]===1&&(_r.isWhiteVertical(d,y,g-4,g)||_r.isWhiteVertical(d,y,g+7,g+11))&&l++}return l*_r.N3}static isWhiteHorizontal(i,l,d){l=Math.max(l,0),d=Math.min(d,i.length);for(let h=l;h<d;h++)if(i[h]===1)return!1;return!0}static isWhiteVertical(i,l,d,h){d=Math.max(d,0),h=Math.min(h,i.length);for(let m=d;m<h;m++)if(i[m][l]===1)return!1;return!0}static applyMaskPenaltyRule4(i){let l=0;const d=i.getArray(),h=i.getWidth(),m=i.getHeight();for(let A=0;A<m;A++){const I=d[A];for(let O=0;O<h;O++)I[O]===1&&l++}const g=i.getHeight()*i.getWidth();return Math.floor(Math.abs(l*2-g)*10/g)*_r.N4}static getDataMaskBit(i,l,d){let h,m;switch(i){case 0:h=d+l&1;break;case 1:h=d&1;break;case 2:h=l%3;break;case 3:h=(d+l)%3;break;case 4:h=Math.floor(d/2)+Math.floor(l/3)&1;break;case 5:m=d*l,h=(m&1)+m%3;break;case 6:m=d*l,h=(m&1)+m%3&1;break;case 7:m=d*l,h=m%3+(d+l&1)&1;break;default:throw new w("Invalid mask pattern: "+i)}return h===0}static applyMaskPenaltyRule1Internal(i,l){let d=0;const h=l?i.getHeight():i.getWidth(),m=l?i.getWidth():i.getHeight(),g=i.getArray();for(let y=0;y<h;y++){let A=0,I=-1;for(let O=0;O<m;O++){const z=l?g[y][O]:g[O][y];z===I?A++:(A>=5&&(d+=_r.N1+(A-5)),A=1,I=z)}A>=5&&(d+=_r.N1+(A-5))}return d}}_r.N1=3,_r.N2=3,_r.N3=40,_r.N4=10;class nh{constructor(i,l){this.width=i,this.height=l;const d=new Array(l);for(let h=0;h!==l;h++)d[h]=new Uint8Array(i);this.bytes=d}getHeight(){return this.height}getWidth(){return this.width}get(i,l){return this.bytes[l][i]}getArray(){return this.bytes}setNumber(i,l,d){this.bytes[l][i]=d}setBoolean(i,l,d){this.bytes[l][i]=d?1:0}clear(i){for(const l of this.bytes)E.fill(l,i)}equals(i){if(!(i instanceof nh))return!1;const l=i;if(this.width!==l.width||this.height!==l.height)return!1;for(let d=0,h=this.height;d<h;++d){const m=this.bytes[d],g=l.bytes[d];for(let y=0,A=this.width;y<A;++y)if(m[y]!==g[y])return!1}return!0}toString(){const i=new q;for(let l=0,d=this.height;l<d;++l){const h=this.bytes[l];for(let m=0,g=this.width;m<g;++m)switch(h[m]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()}}class go{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const i=new q;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()}setMode(i){this.mode=i}setECLevel(i){this.ecLevel=i}setVersion(i){this.version=i}setMaskPattern(i){this.maskPattern=i}setMatrix(i){this.matrix=i}static isValidMaskPattern(i){return i>=0&&i<go.NUM_MASK_PATTERNS}}go.NUM_MASK_PATTERNS=8;class Qt extends p{}Qt.kind="WriterException";class at{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,l,d,h,m){at.clearMatrix(m),at.embedBasicPatterns(d,m),at.embedTypeInfo(l,h,m),at.maybeEmbedVersionInfo(d,m),at.embedDataBits(i,h,m)}static embedBasicPatterns(i,l){at.embedPositionDetectionPatternsAndSeparators(l),at.embedDarkDotAtLeftBottomCorner(l),at.maybeEmbedPositionAdjustmentPatterns(i,l),at.embedTimingPatterns(l)}static embedTypeInfo(i,l,d){const h=new k;at.makeTypeInfoBits(i,l,h);for(let m=0,g=h.getSize();m<g;++m){const y=h.get(h.getSize()-1-m),A=at.TYPE_INFO_COORDINATES[m],I=A[0],O=A[1];if(d.setBoolean(I,O,y),m<8){const z=d.getWidth()-m-1;d.setBoolean(z,8,y)}else{const V=d.getHeight()-7+(m-8);d.setBoolean(8,V,y)}}}static maybeEmbedVersionInfo(i,l){if(i.getVersionNumber()<7)return;const d=new k;at.makeVersionInfoBits(i,d);let h=6*3-1;for(let m=0;m<6;++m)for(let g=0;g<3;++g){const y=d.get(h);h--,l.setBoolean(m,l.getHeight()-11+g,y),l.setBoolean(l.getHeight()-11+g,m,y)}}static embedDataBits(i,l,d){let h=0,m=-1,g=d.getWidth()-1,y=d.getHeight()-1;for(;g>0;){for(g===6&&(g-=1);y>=0&&y<d.getHeight();){for(let A=0;A<2;++A){const I=g-A;if(!at.isEmpty(d.get(I,y)))continue;let O;h<i.getSize()?(O=i.get(h),++h):O=!1,l!==255&&_r.getDataMaskBit(l,I,y)&&(O=!O),d.setBoolean(I,y,O)}y+=m}m=-m,y+=m,g-=2}if(h!==i.getSize())throw new Qt("Not all bits consumed: "+h+"/"+i.getSize())}static findMSBSet(i){return 32-_.numberOfLeadingZeros(i)}static calculateBCHCode(i,l){if(l===0)throw new w("0 polynomial");const d=at.findMSBSet(l);for(i<<=d-1;at.findMSBSet(i)>=d;)i^=l<<at.findMSBSet(i)-d;return i}static makeTypeInfoBits(i,l,d){if(!go.isValidMaskPattern(l))throw new Qt("Invalid mask pattern");const h=i.getBits()<<3|l;d.appendBits(h,5);const m=at.calculateBCHCode(h,at.TYPE_INFO_POLY);d.appendBits(m,10);const g=new k;if(g.appendBits(at.TYPE_INFO_MASK_PATTERN,15),d.xor(g),d.getSize()!==15)throw new Qt("should not happen but we got: "+d.getSize())}static makeVersionInfoBits(i,l){l.appendBits(i.getVersionNumber(),6);const d=at.calculateBCHCode(i.getVersionNumber(),at.VERSION_INFO_POLY);if(l.appendBits(d,12),l.getSize()!==18)throw new Qt("should not happen but we got: "+l.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let l=8;l<i.getWidth()-8;++l){const d=(l+1)%2;at.isEmpty(i.get(l,6))&&i.setNumber(l,6,d),at.isEmpty(i.get(6,l))&&i.setNumber(6,l,d)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new Qt;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,l,d){for(let h=0;h<8;++h){if(!at.isEmpty(d.get(i+h,l)))throw new Qt;d.setNumber(i+h,l,0)}}static embedVerticalSeparationPattern(i,l,d){for(let h=0;h<7;++h){if(!at.isEmpty(d.get(i,l+h)))throw new Qt;d.setNumber(i,l+h,0)}}static embedPositionAdjustmentPattern(i,l,d){for(let h=0;h<5;++h){const m=at.POSITION_ADJUSTMENT_PATTERN[h];for(let g=0;g<5;++g)d.setNumber(i+g,l+h,m[g])}}static embedPositionDetectionPattern(i,l,d){for(let h=0;h<7;++h){const m=at.POSITION_DETECTION_PATTERN[h];for(let g=0;g<7;++g)d.setNumber(i+g,l+h,m[g])}}static embedPositionDetectionPatternsAndSeparators(i){const l=at.POSITION_DETECTION_PATTERN[0].length;at.embedPositionDetectionPattern(0,0,i),at.embedPositionDetectionPattern(i.getWidth()-l,0,i),at.embedPositionDetectionPattern(0,i.getWidth()-l,i);const d=8;at.embedHorizontalSeparationPattern(0,d-1,i),at.embedHorizontalSeparationPattern(i.getWidth()-d,d-1,i),at.embedHorizontalSeparationPattern(0,i.getWidth()-d,i);const h=7;at.embedVerticalSeparationPattern(h,0,i),at.embedVerticalSeparationPattern(i.getHeight()-h-1,0,i),at.embedVerticalSeparationPattern(h,i.getHeight()-h,i)}static maybeEmbedPositionAdjustmentPatterns(i,l){if(i.getVersionNumber()<2)return;const d=i.getVersionNumber()-1,h=at.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[d];for(let m=0,g=h.length;m!==g;m++){const y=h[m];if(y>=0)for(let A=0;A!==g;A++){const I=h[A];I>=0&&at.isEmpty(l.get(I,y))&&at.embedPositionAdjustmentPattern(I-2,y-2,l)}}}}at.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),at.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),at.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),at.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),at.VERSION_INFO_POLY=7973,at.TYPE_INFO_POLY=1335,at.TYPE_INFO_MASK_PATTERN=21522;class Yk{constructor(i,l){this.dataBytes=i,this.errorCorrectionBytes=l}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class ir{constructor(){}static calculateMaskPenalty(i){return _r.applyMaskPenaltyRule1(i)+_r.applyMaskPenaltyRule2(i)+_r.applyMaskPenaltyRule3(i)+_r.applyMaskPenaltyRule4(i)}static encode(i,l,d=null){let h=ir.DEFAULT_BYTE_MODE_ENCODING;const m=d!==null&&d.get(zr.CHARACTER_SET)!==void 0;m&&(h=d.get(zr.CHARACTER_SET).toString());const g=this.chooseMode(i,h),y=new k;if(g===rt.BYTE&&(m||ir.DEFAULT_BYTE_MODE_ENCODING!==h)){const Le=P.getCharacterSetECIByName(h);Le!==void 0&&this.appendECI(Le,y)}this.appendModeInfo(g,y);const A=new k;this.appendBytes(i,g,A,h);let I;if(d!==null&&d.get(zr.QR_VERSION)!==void 0){const Le=Number.parseInt(d.get(zr.QR_VERSION).toString(),10);I=et.getVersionForNumber(Le);const Pe=this.calculateBitsNeeded(g,y,A,I);if(!this.willFit(Pe,I,l))throw new Qt("Data too big for requested version")}else I=this.recommendVersion(l,g,y,A);const O=new k;O.appendBitArray(y);const z=g===rt.BYTE?A.getSizeInBytes():i.length;this.appendLengthInfo(z,I,g,O),O.appendBitArray(A);const V=I.getECBlocksForLevel(l),Z=I.getTotalCodewords()-V.getTotalECCodewords();this.terminateBits(Z,O);const ie=this.interleaveWithECBytes(O,I.getTotalCodewords(),Z,V.getNumBlocks()),le=new go;le.setECLevel(l),le.setMode(g),le.setVersion(I);const fe=I.getDimensionForVersion(),ve=new nh(fe,fe),De=this.chooseMaskPattern(ie,l,I,ve);return le.setMaskPattern(De),at.buildMatrix(ie,l,I,De,ve),le.setMatrix(ve),le}static recommendVersion(i,l,d,h){const m=this.calculateBitsNeeded(l,d,h,et.getVersionForNumber(1)),g=this.chooseVersion(m,i),y=this.calculateBitsNeeded(l,d,h,g);return this.chooseVersion(y,i)}static calculateBitsNeeded(i,l,d,h){return l.getSize()+i.getCharacterCountBits(h)+d.getSize()}static getAlphanumericCode(i){return i<ir.ALPHANUMERIC_TABLE.length?ir.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,l=null){if(P.SJIS.getName()===l&&this.isOnlyDoubleByteKanji(i))return rt.KANJI;let d=!1,h=!1;for(let m=0,g=i.length;m<g;++m){const y=i.charAt(m);if(ir.isDigit(y))d=!0;else if(this.getAlphanumericCode(y.charCodeAt(0))!==-1)h=!0;else return rt.BYTE}return h?rt.ALPHANUMERIC:d?rt.NUMERIC:rt.BYTE}static isOnlyDoubleByteKanji(i){let l;try{l=Y.encode(i,P.SJIS)}catch{return!1}const d=l.length;if(d%2!==0)return!1;for(let h=0;h<d;h+=2){const m=l[h]&255;if((m<129||m>159)&&(m<224||m>235))return!1}return!0}static chooseMaskPattern(i,l,d,h){let m=Number.MAX_SAFE_INTEGER,g=-1;for(let y=0;y<go.NUM_MASK_PATTERNS;y++){at.buildMatrix(i,l,d,y,h);let A=this.calculateMaskPenalty(h);A<m&&(m=A,g=y)}return g}static chooseVersion(i,l){for(let d=1;d<=40;d++){const h=et.getVersionForNumber(d);if(ir.willFit(i,h,l))return h}throw new Qt("Data too big")}static willFit(i,l,d){const h=l.getTotalCodewords(),g=l.getECBlocksForLevel(d).getTotalECCodewords(),y=h-g,A=(i+7)/8;return y>=A}static terminateBits(i,l){const d=i*8;if(l.getSize()>d)throw new Qt("data bits cannot fit in the QR Code"+l.getSize()+" > "+d);for(let g=0;g<4&&l.getSize()<d;++g)l.appendBit(!1);const h=l.getSize()&7;if(h>0)for(let g=h;g<8;g++)l.appendBit(!1);const m=i-l.getSizeInBytes();for(let g=0;g<m;++g)l.appendBits(g&1?17:236,8);if(l.getSize()!==d)throw new Qt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,l,d,h,m,g){if(h>=d)throw new Qt("Block ID too large");const y=i%d,A=d-y,I=Math.floor(i/d),O=I+1,z=Math.floor(l/d),V=z+1,Z=I-z,ie=O-V;if(Z!==ie)throw new Qt("EC bytes mismatch");if(d!==A+y)throw new Qt("RS blocks mismatch");if(i!==(z+Z)*A+(V+ie)*y)throw new Qt("Total bytes mismatch");h<A?(m[0]=z,g[0]=Z):(m[0]=V,g[0]=ie)}static interleaveWithECBytes(i,l,d,h){if(i.getSizeInBytes()!==d)throw new Qt("Number of bits and data bytes does not match");let m=0,g=0,y=0;const A=new Array;for(let O=0;O<h;++O){const z=new Int32Array(1),V=new Int32Array(1);ir.getNumDataBytesAndNumECBytesForBlockID(l,d,h,O,z,V);const Z=z[0],ie=new Uint8Array(Z);i.toBytes(8*m,ie,0,Z);const le=ir.generateECBytes(ie,V[0]);A.push(new Yk(ie,le)),g=Math.max(g,Z),y=Math.max(y,le.length),m+=z[0]}if(d!==m)throw new Qt("Data bytes does not match offset");const I=new k;for(let O=0;O<g;++O)for(const z of A){const V=z.getDataBytes();O<V.length&&I.appendBits(V[O],8)}for(let O=0;O<y;++O)for(const z of A){const V=z.getErrorCorrectionBytes();O<V.length&&I.appendBits(V[O],8)}if(l!==I.getSizeInBytes())throw new Qt("Interleaving error: "+l+" and "+I.getSizeInBytes()+" differ.");return I}static generateECBytes(i,l){const d=i.length,h=new Int32Array(d+l);for(let g=0;g<d;g++)h[g]=i[g]&255;new Cp(ue.QR_CODE_FIELD_256).encode(h,l);const m=new Uint8Array(l);for(let g=0;g<l;g++)m[g]=h[d+g];return m}static appendModeInfo(i,l){l.appendBits(i.getBits(),4)}static appendLengthInfo(i,l,d,h){const m=d.getCharacterCountBits(l);if(i>=1<<m)throw new Qt(i+" is bigger than "+((1<<m)-1));h.appendBits(i,m)}static appendBytes(i,l,d,h){switch(l){case rt.NUMERIC:ir.appendNumericBytes(i,d);break;case rt.ALPHANUMERIC:ir.appendAlphanumericBytes(i,d);break;case rt.BYTE:ir.append8BitBytes(i,d,h);break;case rt.KANJI:ir.appendKanjiBytes(i,d);break;default:throw new Qt("Invalid mode: "+l)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const l=ir.getDigit(i);return l>=0&&l<=9}static appendNumericBytes(i,l){const d=i.length;let h=0;for(;h<d;){const m=ir.getDigit(i.charAt(h));if(h+2<d){const g=ir.getDigit(i.charAt(h+1)),y=ir.getDigit(i.charAt(h+2));l.appendBits(m*100+g*10+y,10),h+=3}else if(h+1<d){const g=ir.getDigit(i.charAt(h+1));l.appendBits(m*10+g,7),h+=2}else l.appendBits(m,4),h++}}static appendAlphanumericBytes(i,l){const d=i.length;let h=0;for(;h<d;){const m=ir.getAlphanumericCode(i.charCodeAt(h));if(m===-1)throw new Qt;if(h+1<d){const g=ir.getAlphanumericCode(i.charCodeAt(h+1));if(g===-1)throw new Qt;l.appendBits(m*45+g,11),h+=2}else l.appendBits(m,6),h++}}static append8BitBytes(i,l,d){let h;try{h=Y.encode(i,d)}catch(m){throw new Qt(m)}for(let m=0,g=h.length;m!==g;m++){const y=h[m];l.appendBits(y,8)}}static appendKanjiBytes(i,l){let d;try{d=Y.encode(i,P.SJIS)}catch(m){throw new Qt(m)}const h=d.length;for(let m=0;m<h;m+=2){const g=d[m]&255,y=d[m+1]&255,A=g<<8&4294967295|y;let I=-1;if(A>=33088&&A<=40956?I=A-33088:A>=57408&&A<=60351&&(I=A-49472),I===-1)throw new Qt("Invalid byte sequence");const O=(I>>8)*192+(I&255);l.appendBits(O,13)}}static appendECI(i,l){l.appendBits(rt.ECI.getBits(),4),l.appendBits(i.getValue(),8)}}ir.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),ir.DEFAULT_BYTE_MODE_ENCODING=P.UTF8.getName();class xo{write(i,l,d,h=null){if(i.length===0)throw new w("Found empty contents");if(l<0||d<0)throw new w("Requested dimensions are too small: "+l+"x"+d);let m=tr.L,g=xo.QUIET_ZONE_SIZE;h!==null&&(h.get(zr.ERROR_CORRECTION)!==void 0&&(m=tr.fromString(h.get(zr.ERROR_CORRECTION).toString())),h.get(zr.MARGIN)!==void 0&&(g=Number.parseInt(h.get(zr.MARGIN).toString(),10)));const y=ir.encode(i,m,h);return this.renderResult(y,l,d,g)}writeToDom(i,l,d,h,m=null){typeof i=="string"&&(i=document.querySelector(i));const g=this.write(l,d,h,m);i&&i.appendChild(g)}renderResult(i,l,d,h){const m=i.getMatrix();if(m===null)throw new Ee;const g=m.getWidth(),y=m.getHeight(),A=g+h*2,I=y+h*2,O=Math.max(l,A),z=Math.max(d,I),V=Math.min(Math.floor(O/A),Math.floor(z/I)),Z=Math.floor((O-g*V)/2),ie=Math.floor((z-y*V)/2),le=this.createSVGElement(O,z);for(let fe=0,ve=ie;fe<y;fe++,ve+=V)for(let De=0,Le=Z;De<g;De++,Le+=V)if(m.get(De,fe)===1){const Pe=this.createSvgRectElement(Le,ve,V,V);le.appendChild(Pe)}return le}createSVGElement(i,l){const d=document.createElementNS(xo.SVG_NS,"svg");return d.setAttributeNS(null,"height",i.toString()),d.setAttributeNS(null,"width",l.toString()),d}createSvgRectElement(i,l,d,h){const m=document.createElementNS(xo.SVG_NS,"rect");return m.setAttributeNS(null,"x",i.toString()),m.setAttributeNS(null,"y",l.toString()),m.setAttributeNS(null,"height",d.toString()),m.setAttributeNS(null,"width",h.toString()),m.setAttributeNS(null,"fill","#000000"),m}}xo.QUIET_ZONE_SIZE=4,xo.SVG_NS="http://www.w3.org/2000/svg";class _l{encode(i,l,d,h,m){if(i.length===0)throw new w("Found empty contents");if(l!==se.QR_CODE)throw new w("Can only encode QR_CODE, but got "+l);if(d<0||h<0)throw new w(`Requested dimensions are too small: ${d}x${h}`);let g=tr.L,y=_l.QUIET_ZONE_SIZE;m!==null&&(m.get(zr.ERROR_CORRECTION)!==void 0&&(g=tr.fromString(m.get(zr.ERROR_CORRECTION).toString())),m.get(zr.MARGIN)!==void 0&&(y=Number.parseInt(m.get(zr.MARGIN).toString(),10)));const A=ir.encode(i,g,m);return _l.renderResult(A,d,h,y)}static renderResult(i,l,d,h){const m=i.getMatrix();if(m===null)throw new Ee;const g=m.getWidth(),y=m.getHeight(),A=g+h*2,I=y+h*2,O=Math.max(l,A),z=Math.max(d,I),V=Math.min(Math.floor(O/A),Math.floor(z/I)),Z=Math.floor((O-g*V)/2),ie=Math.floor((z-y*V)/2),le=new re(O,z);for(let fe=0,ve=ie;fe<y;fe++,ve+=V)for(let De=0,Le=Z;De<g;De++,Le+=V)m.get(De,fe)===1&&le.setRegion(Le,ve,V,V);return le}}_l.QUIET_ZONE_SIZE=4;class Qk{encode(i,l,d,h,m){let g;switch(l){case se.QR_CODE:g=new _l;break;default:throw new w("No encoder available for format "+l)}return g.encode(i,l,d,h,m)}}class ha extends ae{constructor(i,l,d,h,m,g,y,A){if(super(g,y),this.yuvData=i,this.dataWidth=l,this.dataHeight=d,this.left=h,this.top=m,h+g>l||m+y>d)throw new w("Crop rectangle does not fit within image data.");A&&this.reverseHorizontal(g,y)}getRow(i,l){if(i<0||i>=this.getHeight())throw new w("Requested row is outside the image: "+i);const d=this.getWidth();(l==null||l.length<d)&&(l=new Uint8ClampedArray(d));const h=(i+this.top)*this.dataWidth+this.left;return C.arraycopy(this.yuvData,h,l,0,d),l}getMatrix(){const i=this.getWidth(),l=this.getHeight();if(i===this.dataWidth&&l===this.dataHeight)return this.yuvData;const d=i*l,h=new Uint8ClampedArray(d);let m=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return C.arraycopy(this.yuvData,m,h,0,d),h;for(let g=0;g<l;g++){const y=g*i;C.arraycopy(this.yuvData,m,h,y,i),m+=this.dataWidth}return h}isCropSupported(){return!0}crop(i,l,d,h){return new ha(this.yuvData,this.dataWidth,this.dataHeight,this.left+i,this.top+l,d,h,!1)}renderThumbnail(){const i=this.getWidth()/ha.THUMBNAIL_SCALE_FACTOR,l=this.getHeight()/ha.THUMBNAIL_SCALE_FACTOR,d=new Int32Array(i*l),h=this.yuvData;let m=this.top*this.dataWidth+this.left;for(let g=0;g<l;g++){const y=g*i;for(let A=0;A<i;A++){const I=h[m+A*ha.THUMBNAIL_SCALE_FACTOR]&255;d[y+A]=4278190080|I*65793}m+=this.dataWidth*ha.THUMBNAIL_SCALE_FACTOR}return d}getThumbnailWidth(){return this.getWidth()/ha.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/ha.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(i,l){const d=this.yuvData;for(let h=0,m=this.top*this.dataWidth+this.left;h<l;h++,m+=this.dataWidth){const g=m+i/2;for(let y=m,A=m+i-1;y<g;y++,A--){const I=d[y];d[y]=d[A],d[A]=I}}}invert(){return new J(this)}}ha.THUMBNAIL_SCALE_FACTOR=2;class Ep extends ae{constructor(i,l,d,h,m,g,y){if(super(l,d),this.dataWidth=h,this.dataHeight=m,this.left=g,this.top=y,i.BYTES_PER_ELEMENT===4){const A=l*d,I=new Uint8ClampedArray(A);for(let O=0;O<A;O++){const z=i[O],V=z>>16&255,Z=z>>7&510,ie=z&255;I[O]=(V+Z+ie)/4&255}this.luminances=I}else this.luminances=i;if(h===void 0&&(this.dataWidth=l),m===void 0&&(this.dataHeight=d),g===void 0&&(this.left=0),y===void 0&&(this.top=0),this.left+l>this.dataWidth||this.top+d>this.dataHeight)throw new w("Crop rectangle does not fit within image data.")}getRow(i,l){if(i<0||i>=this.getHeight())throw new w("Requested row is outside the image: "+i);const d=this.getWidth();(l==null||l.length<d)&&(l=new Uint8ClampedArray(d));const h=(i+this.top)*this.dataWidth+this.left;return C.arraycopy(this.luminances,h,l,0,d),l}getMatrix(){const i=this.getWidth(),l=this.getHeight();if(i===this.dataWidth&&l===this.dataHeight)return this.luminances;const d=i*l,h=new Uint8ClampedArray(d);let m=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return C.arraycopy(this.luminances,m,h,0,d),h;for(let g=0;g<l;g++){const y=g*i;C.arraycopy(this.luminances,m,h,y,i),m+=this.dataWidth}return h}isCropSupported(){return!0}crop(i,l,d,h){return new Ep(this.luminances,d,h,this.dataWidth,this.dataHeight,this.left+i,this.top+l)}invert(){return new J(this)}}class Kv extends P{static forName(i){return this.getCharacterSetECIByName(i)}}class Sp{}Sp.ISO_8859_1=P.ISO8859_1;class Yv{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class Qv{static singletonList(i){return[i]}static min(i,l){return i.sort(l)[0]}}class Zk{constructor(i){this.previous=i}getPrevious(){return this.previous}}class Nl extends Zk{constructor(i,l,d){super(i),this.value=l,this.bitCount=d}appendTo(i,l){i.appendBits(this.value,this.bitCount)}add(i,l){return new Nl(this,i,l)}addBinaryShift(i,l){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Nl(this,i,l)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+_.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class Ap extends Nl{constructor(i,l,d){super(i,0,0),this.binaryShiftStart=l,this.binaryShiftByteCount=d}appendTo(i,l){for(let d=0;d<this.binaryShiftByteCount;d++)(d===0||d===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):d===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(l[this.binaryShiftStart+d],8)}addBinaryShift(i,l){return new Ap(this,i,l)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Jk(B,i,l){return new Ap(B,i,l)}function ad(B,i,l){return new Nl(B,i,l)}const eT=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ci=0,sh=1,_s=2,Zv=3,fa=4,tT=new Nl(null,0,0),kp=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function rT(B){for(let i of B)E.fill(i,-1);return B[ci][fa]=0,B[sh][fa]=0,B[sh][ci]=28,B[Zv][fa]=0,B[_s][fa]=0,B[_s][ci]=15,B}const Jv=rT(E.createInt32Array(6,6));class ma{constructor(i,l,d,h){this.token=i,this.mode=l,this.binaryShiftByteCount=d,this.bitCount=h}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,l){let d=this.bitCount,h=this.token;if(i!==this.mode){let g=kp[this.mode][i];h=ad(h,g&65535,g>>16),d+=g>>16}let m=i===_s?4:5;return h=ad(h,l,m),new ma(h,i,0,d+m)}shiftAndAppend(i,l){let d=this.token,h=this.mode===_s?4:5;return d=ad(d,Jv[this.mode][i],h),d=ad(d,l,5),new ma(d,this.mode,0,this.bitCount+h+5)}addBinaryShiftChar(i){let l=this.token,d=this.mode,h=this.bitCount;if(this.mode===fa||this.mode===_s){let y=kp[d][ci];l=ad(l,y&65535,y>>16),h+=y>>16,d=ci}let m=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,g=new ma(l,d,this.binaryShiftByteCount+1,h+m);return g.binaryShiftByteCount===2078&&(g=g.endBinaryShift(i+1)),g}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let l=this.token;return l=Jk(l,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new ma(l,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let l=this.bitCount+(kp[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?l+=ma.calculateBinaryShiftCost(i)-ma.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(l+=10),l<=i.bitCount}toBitArray(i){let l=[];for(let h=this.endBinaryShift(i.length).token;h!==null;h=h.getPrevious())l.unshift(h);let d=new k;for(const h of l)h.appendTo(d,i);return d}toString(){return U.format("%s bits=%d bytes=%d",eT[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}ma.INITIAL_STATE=new ma(tT,ci,0,0);function nT(B){const i=U.getCharCode(" "),l=U.getCharCode("."),d=U.getCharCode(",");B[ci][i]=1;const h=U.getCharCode("Z"),m=U.getCharCode("A");for(let V=m;V<=h;V++)B[ci][V]=V-m+2;B[sh][i]=1;const g=U.getCharCode("z"),y=U.getCharCode("a");for(let V=y;V<=g;V++)B[sh][V]=V-y+2;B[_s][i]=1;const A=U.getCharCode("9"),I=U.getCharCode("0");for(let V=I;V<=A;V++)B[_s][V]=V-I+2;B[_s][d]=12,B[_s][l]=13;const O=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let V=0;V<O.length;V++)B[Zv][U.getCharCode(O[V])]=V;const z=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let V=0;V<z.length;V++)U.getCharCode(z[V])>0&&(B[fa][U.getCharCode(z[V])]=V);return B}const Tp=nT(E.createInt32Array(5,256));class id{constructor(i){this.text=i}encode(){const i=U.getCharCode(" "),l=U.getCharCode(`
`);let d=Qv.singletonList(ma.INITIAL_STATE);for(let m=0;m<this.text.length;m++){let g,y=m+1<this.text.length?this.text[m+1]:0;switch(this.text[m]){case U.getCharCode("\r"):g=y===l?2:0;break;case U.getCharCode("."):g=y===i?3:0;break;case U.getCharCode(","):g=y===i?4:0;break;case U.getCharCode(":"):g=y===i?5:0;break;default:g=0}g>0?(d=id.updateStateListForPair(d,m,g),m++):d=this.updateStateListForChar(d,m)}return Qv.min(d,(m,g)=>m.getBitCount()-g.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,l){const d=[];for(let h of i)this.updateStateForChar(h,l,d);return id.simplifyStates(d)}updateStateForChar(i,l,d){let h=this.text[l]&255,m=Tp[i.getMode()][h]>0,g=null;for(let y=0;y<=fa;y++){let A=Tp[y][h];if(A>0){if(g==null&&(g=i.endBinaryShift(l)),!m||y===i.getMode()||y===_s){const I=g.latchAndAppend(y,A);d.push(I)}if(!m&&Jv[i.getMode()][y]>=0){const I=g.shiftAndAppend(y,A);d.push(I)}}}if(i.getBinaryShiftByteCount()>0||Tp[i.getMode()][h]===0){let y=i.addBinaryShiftChar(l);d.push(y)}}static updateStateListForPair(i,l,d){const h=[];for(let m of i)this.updateStateForPair(m,l,d,h);return this.simplifyStates(h)}static updateStateForPair(i,l,d,h){let m=i.endBinaryShift(l);if(h.push(m.latchAndAppend(fa,d)),i.getMode()!==fa&&h.push(m.shiftAndAppend(fa,d)),d===3||d===4){let g=m.latchAndAppend(_s,16-d).latchAndAppend(_s,1);h.push(g)}if(i.getBinaryShiftByteCount()>0){let g=i.addBinaryShiftChar(l).addBinaryShiftChar(l+1);h.push(g)}}static simplifyStates(i){let l=[];for(const d of i){let h=!0;for(const m of l){if(m.isBetterThanOrEqualTo(d)){h=!1;break}d.isBetterThanOrEqualTo(m)&&(l=l.filter(g=>g!==m))}h&&l.push(d)}return l}}class Mt{constructor(){}static encodeBytes(i){return Mt.encode(i,Mt.DEFAULT_EC_PERCENT,Mt.DEFAULT_AZTEC_LAYERS)}static encode(i,l,d){let h=new id(i).encode(),m=_.truncDivision(h.getSize()*l,100)+11,g=h.getSize()+m,y,A,I,O,z;if(d!==Mt.DEFAULT_AZTEC_LAYERS){if(y=d<0,A=Math.abs(d),A>(y?Mt.MAX_NB_BITS_COMPACT:Mt.MAX_NB_BITS))throw new w(U.format("Illegal value %s for layers",d));I=Mt.totalBitsInLayer(A,y),O=Mt.WORD_SIZE[A];let Pe=I-I%O;if(z=Mt.stuffBits(h,O),z.getSize()+m>Pe)throw new w("Data to large for user specified layer");if(y&&z.getSize()>O*64)throw new w("Data to large for user specified layer")}else{O=0,z=null;for(let Pe=0;;Pe++){if(Pe>Mt.MAX_NB_BITS)throw new w("Data too large for an Aztec code");if(y=Pe<=3,A=y?Pe+1:Pe,I=Mt.totalBitsInLayer(A,y),g>I)continue;(z==null||O!==Mt.WORD_SIZE[A])&&(O=Mt.WORD_SIZE[A],z=Mt.stuffBits(h,O));let Ct=I-I%O;if(!(y&&z.getSize()>O*64)&&z.getSize()+m<=Ct)break}}let V=Mt.generateCheckWords(z,I,O),Z=z.getSize()/O,ie=Mt.generateModeMessage(y,A,Z),le=(y?11:14)+A*4,fe=new Int32Array(le),ve;if(y){ve=le;for(let Pe=0;Pe<fe.length;Pe++)fe[Pe]=Pe}else{ve=le+1+2*_.truncDivision(_.truncDivision(le,2)-1,15);let Pe=_.truncDivision(le,2),Ct=_.truncDivision(ve,2);for(let pt=0;pt<Pe;pt++){let Ln=pt+_.truncDivision(pt,15);fe[Pe-pt-1]=Ct-Ln-1,fe[Pe+pt]=Ct+Ln+1}}let De=new re(ve);for(let Pe=0,Ct=0;Pe<A;Pe++){let pt=(A-Pe)*4+(y?9:12);for(let Ln=0;Ln<pt;Ln++){let $s=Ln*2;for(let Fn=0;Fn<2;Fn++)V.get(Ct+$s+Fn)&&De.set(fe[Pe*2+Fn],fe[Pe*2+Ln]),V.get(Ct+pt*2+$s+Fn)&&De.set(fe[Pe*2+Ln],fe[le-1-Pe*2-Fn]),V.get(Ct+pt*4+$s+Fn)&&De.set(fe[le-1-Pe*2-Fn],fe[le-1-Pe*2-Ln]),V.get(Ct+pt*6+$s+Fn)&&De.set(fe[le-1-Pe*2-Ln],fe[Pe*2+Fn])}Ct+=pt*8}if(Mt.drawModeMessage(De,y,ve,ie),y)Mt.drawBullsEye(De,_.truncDivision(ve,2),5);else{Mt.drawBullsEye(De,_.truncDivision(ve,2),7);for(let Pe=0,Ct=0;Pe<_.truncDivision(le,2)-1;Pe+=15,Ct+=16)for(let pt=_.truncDivision(ve,2)&1;pt<ve;pt+=2)De.set(_.truncDivision(ve,2)-Ct,pt),De.set(_.truncDivision(ve,2)+Ct,pt),De.set(pt,_.truncDivision(ve,2)-Ct),De.set(pt,_.truncDivision(ve,2)+Ct)}let Le=new Yv;return Le.setCompact(y),Le.setSize(ve),Le.setLayers(A),Le.setCodeWords(Z),Le.setMatrix(De),Le}static drawBullsEye(i,l,d){for(let h=0;h<d;h+=2)for(let m=l-h;m<=l+h;m++)i.set(m,l-h),i.set(m,l+h),i.set(l-h,m),i.set(l+h,m);i.set(l-d,l-d),i.set(l-d+1,l-d),i.set(l-d,l-d+1),i.set(l+d,l-d),i.set(l+d,l-d+1),i.set(l+d,l+d-1)}static generateModeMessage(i,l,d){let h=new k;return i?(h.appendBits(l-1,2),h.appendBits(d-1,6),h=Mt.generateCheckWords(h,28,4)):(h.appendBits(l-1,5),h.appendBits(d-1,11),h=Mt.generateCheckWords(h,40,4)),h}static drawModeMessage(i,l,d,h){let m=_.truncDivision(d,2);if(l)for(let g=0;g<7;g++){let y=m-3+g;h.get(g)&&i.set(y,m-5),h.get(g+7)&&i.set(m+5,y),h.get(20-g)&&i.set(y,m+5),h.get(27-g)&&i.set(m-5,y)}else for(let g=0;g<10;g++){let y=m-5+g+_.truncDivision(g,5);h.get(g)&&i.set(y,m-7),h.get(g+10)&&i.set(m+7,y),h.get(29-g)&&i.set(y,m+7),h.get(39-g)&&i.set(m-7,y)}}static generateCheckWords(i,l,d){let h=i.getSize()/d,m=new Cp(Mt.getGF(d)),g=_.truncDivision(l,d),y=Mt.bitsToWords(i,d,g);m.encode(y,g-h);let A=l%d,I=new k;I.appendBits(0,A);for(const O of Array.from(y))I.appendBits(O,d);return I}static bitsToWords(i,l,d){let h=new Int32Array(d),m,g;for(m=0,g=i.getSize()/l;m<g;m++){let y=0;for(let A=0;A<l;A++)y|=i.get(m*l+A)?1<<l-A-1:0;h[m]=y}return h}static getGF(i){switch(i){case 4:return ue.AZTEC_PARAM;case 6:return ue.AZTEC_DATA_6;case 8:return ue.AZTEC_DATA_8;case 10:return ue.AZTEC_DATA_10;case 12:return ue.AZTEC_DATA_12;default:throw new w("Unsupported word size "+i)}}static stuffBits(i,l){let d=new k,h=i.getSize(),m=(1<<l)-2;for(let g=0;g<h;g+=l){let y=0;for(let A=0;A<l;A++)(g+A>=h||i.get(g+A))&&(y|=1<<l-1-A);(y&m)===m?(d.appendBits(y&m,l),g--):y&m?d.appendBits(y,l):(d.appendBits(y|1,l),g--)}return d}static totalBitsInLayer(i,l){return((l?88:112)+16*i)*i}}Mt.DEFAULT_EC_PERCENT=33,Mt.DEFAULT_AZTEC_LAYERS=0,Mt.MAX_NB_BITS=32,Mt.MAX_NB_BITS_COMPACT=4,Mt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ah{encode(i,l,d,h){return this.encodeWithHints(i,l,d,h,null)}encodeWithHints(i,l,d,h,m){let g=Sp.ISO_8859_1,y=Mt.DEFAULT_EC_PERCENT,A=Mt.DEFAULT_AZTEC_LAYERS;return m!=null&&(m.has(zr.CHARACTER_SET)&&(g=Kv.forName(m.get(zr.CHARACTER_SET).toString())),m.has(zr.ERROR_CORRECTION)&&(y=_.parseInt(m.get(zr.ERROR_CORRECTION).toString())),m.has(zr.AZTEC_LAYERS)&&(A=_.parseInt(m.get(zr.AZTEC_LAYERS).toString()))),ah.encodeLayers(i,l,d,h,g,y,A)}static encodeLayers(i,l,d,h,m,g,y){if(l!==se.AZTEC)throw new w("Can only encode AZTEC, but got "+l);let A=Mt.encode(U.getBytes(i,m),g,y);return ah.renderResult(A,d,h)}static renderResult(i,l,d){let h=i.getMatrix();if(h==null)throw new Ee;let m=h.getWidth(),g=h.getHeight(),y=Math.max(l,m),A=Math.max(d,g),I=Math.min(y/m,A/g),O=(y-m*I)/2,z=(A-g*I)/2,V=new re(y,A);for(let Z=0,ie=z;Z<g;Z++,ie+=I)for(let le=0,fe=O;le<m;le++,fe+=I)h.get(le,Z)&&V.setRegion(fe,ie,I,I);return V}}r.AbstractExpandedDecoder=pp,r.ArgumentException=x,r.ArithmeticException=Me,r.AztecCode=Yv,r.AztecCodeReader=st,r.AztecCodeWriter=ah,r.AztecDecoder=ze,r.AztecDetector=Ae,r.AztecDetectorResult=it,r.AztecEncoder=Mt,r.AztecHighLevelEncoder=id,r.AztecPoint=$e,r.BarcodeFormat=se,r.Binarizer=N,r.BinaryBitmap=b,r.BitArray=k,r.BitMatrix=re,r.BitSource=wp,r.BrowserAztecCodeReader=dt,r.BrowserBarcodeReader=Ok,r.BrowserCodeReader=ee,r.BrowserDatamatrixCodeReader=Mk,r.BrowserMultiFormatReader=Gk,r.BrowserPDF417Reader=Xk,r.BrowserQRCodeReader=Kk,r.BrowserQRCodeSvgWriter=xo,r.CharacterSetECI=P,r.ChecksumException=j,r.Code128Reader=Ie,r.Code39Reader=Dt,r.DataMatrixDecodedBitStreamParser=ai,r.DataMatrixReader=ii,r.DecodeHintType=L,r.DecoderResult=Te,r.DefaultGridSampler=Sr,r.DetectorResult=Ze,r.EAN13Reader=mn,r.EncodeHintType=zr,r.Exception=p,r.FormatException=R,r.GenericGF=ue,r.GenericGFPoly=Se,r.GlobalHistogramBinarizer=ne,r.GridSampler=ar,r.GridSamplerInstance=At,r.HTMLCanvasElementLuminanceSource=he,r.HybridBinarizer=oe,r.ITFReader=mt,r.IllegalArgumentException=w,r.IllegalStateException=Ee,r.InvertedLuminanceSource=J,r.LuminanceSource=ae,r.MathUtils=Ge,r.MultiFormatOneDReader=yl,r.MultiFormatReader=Xv,r.MultiFormatWriter=Qk,r.NotFoundException=W,r.OneDReader=ft,r.PDF417DecodedBitStreamParser=xe,r.PDF417DecoderErrorCorrection=$v,r.PDF417Reader=rn,r.PDF417ResultMetadata=qv,r.PerspectiveTransform=Nt,r.PlanarYUVLuminanceSource=ha,r.QRCodeByteMatrix=nh,r.QRCodeDataMask=ys,r.QRCodeDecodedBitStreamParser=pr,r.QRCodeDecoderErrorCorrectionLevel=tr,r.QRCodeDecoderFormatInformation=gn,r.QRCodeEncoder=ir,r.QRCodeEncoderQRCode=go,r.QRCodeMaskUtil=_r,r.QRCodeMatrixUtil=at,r.QRCodeMode=rt,r.QRCodeReader=oi,r.QRCodeVersion=et,r.QRCodeWriter=_l,r.RGBLuminanceSource=Ep,r.RSS14Reader=br,r.RSSExpandedReader=ke,r.ReaderException=rh,r.ReedSolomonDecoder=Je,r.ReedSolomonEncoder=Cp,r.ReedSolomonException=We,r.Result=X,r.ResultMetadataType=ge,r.ResultPoint=pe,r.StringUtils=U,r.UnsupportedOperationException=F,r.VideoInputDevice=ye,r.WhiteRectangleDetector=ot,r.WriterException=Qt,r.ZXingArrays=E,r.ZXingCharset=Kv,r.ZXingInteger=_,r.ZXingStandardCharsets=Sp,r.ZXingStringBuilder=q,r.ZXingStringEncoding=Y,r.ZXingSystem=C,r.createAbstractExpandedDecoder=zv,Object.defineProperty(r,"__esModule",{value:!0})})})(x0,x0.exports);var cr=x0.exports;const D$=C0(cr),M$=O2({__proto__:null,default:D$},[cr]);var o2=function(){function e(t,r,s){if(this.formatMap=new Map([[Ye.QR_CODE,cr.BarcodeFormat.QR_CODE],[Ye.AZTEC,cr.BarcodeFormat.AZTEC],[Ye.CODABAR,cr.BarcodeFormat.CODABAR],[Ye.CODE_39,cr.BarcodeFormat.CODE_39],[Ye.CODE_93,cr.BarcodeFormat.CODE_93],[Ye.CODE_128,cr.BarcodeFormat.CODE_128],[Ye.DATA_MATRIX,cr.BarcodeFormat.DATA_MATRIX],[Ye.MAXICODE,cr.BarcodeFormat.MAXICODE],[Ye.ITF,cr.BarcodeFormat.ITF],[Ye.EAN_13,cr.BarcodeFormat.EAN_13],[Ye.EAN_8,cr.BarcodeFormat.EAN_8],[Ye.PDF_417,cr.BarcodeFormat.PDF_417],[Ye.RSS_14,cr.BarcodeFormat.RSS_14],[Ye.RSS_EXPANDED,cr.BarcodeFormat.RSS_EXPANDED],[Ye.UPC_A,cr.BarcodeFormat.UPC_A],[Ye.UPC_E,cr.BarcodeFormat.UPC_E],[Ye.UPC_EAN_EXTENSION,cr.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!M$)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=s;var a=this.createZXingFormats(t),o=new Map;o.set(cr.DecodeHintType.POSSIBLE_FORMATS,a),o.set(cr.DecodeHintType.TRY_HARDER,!1),this.hints=o}return e.prototype.decodeAsync=function(t){var r=this;return new Promise(function(s,a){try{s(r.decode(t))}catch(o){a(o)}})},e.prototype.decode=function(t){var r=new cr.MultiFormatReader(this.verbose,this.hints),s=new cr.HTMLCanvasElementLuminanceSource(t),a=new cr.BinaryBitmap(new cr.HybridBinarizer(s)),o=r.decode(a);return{text:o.text,format:aA.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,s,a){t.set(r,s)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var r=[],s=0,a=t;s<a.length;s++){var o=a[s];this.formatMap.has(o)?r.push(this.formatMap.get(o)):this.logger.logError("".concat(o," is not supported by")+"ZXingHtml5QrcodeShim")}return r},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),L$=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{p(s.next(x))}catch(w){c(w)}}function f(x){try{p(s.throw(x))}catch(w){c(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})},F$=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},s,a,o,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(p){return function(x){return f([p,x])}}function f(p){if(s)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(r=0)),r;)try{if(s=1,a&&(o=p[0]&2?a.return:p[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,p[1])).done)return o;switch(a=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,a=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){r.label=p[1];break}if(p[0]===6&&r.label<o[1]){r.label=o[1],o=p;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(p);break}o[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(x){p=[6,x],a=0}finally{s=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},l2=function(){function e(t,r,s){if(this.formatMap=new Map([[Ye.QR_CODE,"qr_code"],[Ye.AZTEC,"aztec"],[Ye.CODABAR,"codabar"],[Ye.CODE_39,"code_39"],[Ye.CODE_93,"code_93"],[Ye.CODE_128,"code_128"],[Ye.DATA_MATRIX,"data_matrix"],[Ye.ITF,"itf"],[Ye.EAN_13,"ean_13"],[Ye.EAN_8,"ean_8"],[Ye.PDF_417,"pdf417"],[Ye.UPC_A,"upc_a"],[Ye.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=s;var a=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return L$(this,void 0,void 0,function(){var r,s;return F$(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(t)];case 1:if(r=a.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return s=this.selectLargestBarcode(r),[2,{text:s.rawValue,format:aA.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var r=null,s=0,a=0,o=t;a<o.length;a++){var c=o[a],u=c.boundingBox.width*c.boundingBox.height;u>s&&(s=u,r=c)}if(!r)throw"No largest barcode found";return r},e.prototype.createBarcodeDetectorFormats=function(t){for(var r=[],s=0,a=t;s<a.length;s++){var o=a[s];this.formatMap.has(o)?r.push(this.formatMap.get(o)):this.logger.warn("".concat(o," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,s,a){t.set(r,s)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),c2=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{p(s.next(x))}catch(w){c(w)}}function f(x){try{p(s.throw(x))}catch(w){c(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})},d2=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},s,a,o,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(p){return function(x){return f([p,x])}}function f(p){if(s)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(r=0)),r;)try{if(s=1,a&&(o=p[0]&2?a.return:p[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,p[1])).done)return o;switch(a=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,a=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){r.label=p[1];break}if(p[0]===6&&r.label<o[1]){r.label=o[1],o=p;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(p);break}o[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(x){p=[6,x],a=0}finally{s=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},B$=function(){function e(t,r,s,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=s,r&&l2.isSupported()?(this.primaryDecoder=new l2(t,s,a),this.secondaryDecoder=new o2(t,s,a)):this.primaryDecoder=new o2(t,s,a)}return e.prototype.decodeAsync=function(t){return c2(this,void 0,void 0,function(){var r;return d2(this,function(s){switch(s.label){case 0:r=performance.now(),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,s.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return c2(this,void 0,void 0,function(){var r,s;return d2(this,function(a){switch(a.label){case 0:r=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,a.sent()];case 3:if(s=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw s;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var r=performance.now()-t;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,r=0,s=this.executionResults;r<s.length;r++){var a=s[r];t+=a}var o=t/this.executionResults.length;console.log("".concat(o," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),Ev=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(s[o]=a[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),Jf=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{p(s.next(x))}catch(w){c(w)}}function f(x){try{p(s.throw(x))}catch(w){c(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})},em=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},s,a,o,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(p){return function(x){return f([p,x])}}function f(p){if(s)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(r=0)),r;)try{if(s=1,a&&(o=p[0]&2?a.return:p[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,p[1])).done)return o;switch(a=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,a=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){r.label=p[1];break}if(p[0]===6&&r.label<o[1]){r.label=o[1],o=p;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(p);break}o[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(x){p=[6,x],a=0}finally{s=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},oA=function(){function e(t,r){this.name=t,this.track=r}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var r={};r[this.name]=t;var s={advanced:[r]};return this.track.applyConstraints(s)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var r=t[this.name];return r}return null},e}(),z$=function(e){Ev(t,e);function t(r,s){return e.call(this,r,s)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(r){var s={};s[this.name]=r;var a={advanced:[s]};return this.track.applyConstraints(a)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),s=r[this.name];return{min:s.min,max:s.max,step:s.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(oA),U$=function(e){Ev(t,e);function t(r){return e.call(this,"zoom",r)||this}return t}(z$),$$=function(e){Ev(t,e);function t(r){return e.call(this,"torch",r)||this}return t}(oA),V$=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new U$(this.track)},e.prototype.torchFeature=function(){return new $$(this.track)},e}(),q$=function(){function e(t,r,s){this.isClosed=!1,this.parentElement=t,this.mediaStream=r,this.callbacks=s,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var r=document.createElement("video");return r.style.width="".concat(t,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var s=t.surface.clientWidth,a=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(s,a),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,r,s,a){return Jf(this,void 0,void 0,function(){var o,c;return em(this,function(u){switch(u.label){case 0:return o=new e(t,r,a),s.aspectRatio?(c={aspectRatio:s.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(c)]):[3,2];case 1:u.sent(),u.label=2;case 2:return o.setupSurface(),[2,o]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var r=this,s=function(){setTimeout(t,200),r.surface.removeEventListener("playing",s)};this.surface.addEventListener("playing",s),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return Jf(this,void 0,void 0,function(){return em(this,function(r){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(r,s){var a=t.mediaStream.getVideoTracks(),o=a.length,c=0;t.mediaStream.getVideoTracks().forEach(function(u){t.mediaStream.removeTrack(u),u.stop(),++c,c>=o&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),r())})})},e.prototype.getCapabilities=function(){return new V$(this.getFirstTrackOrFail())},e}(),W$=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,r,s){return Jf(this,void 0,void 0,function(){return em(this,function(a){return[2,q$.create(t,this.mediaStream,r,s)]})})},e.create=function(t){return Jf(this,void 0,void 0,function(){var r,s;return em(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return s=a.sent(),[2,new e(s)]}})})},e}(),u2=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{p(s.next(x))}catch(w){c(w)}}function f(x){try{p(s.throw(x))}catch(w){c(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})},h2=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},s,a,o,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(p){return function(x){return f([p,x])}}function f(p){if(s)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(r=0)),r;)try{if(s=1,a&&(o=p[0]&2?a.return:p[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,p[1])).done)return o;switch(a=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,a=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){r.label=p[1];break}if(p[0]===6&&r.label<o[1]){r.label=o[1],o=p;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(p);break}o[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(x){p=[6,x],a=0}finally{s=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},H$=function(){function e(){}return e.failIfNotSupported=function(){return u2(this,void 0,void 0,function(){return h2(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return u2(this,void 0,void 0,function(){return h2(this,function(r){return[2,W$.create(t)]})})},e}(),G$=function(e,t,r,s){function a(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(x){try{p(s.next(x))}catch(w){c(w)}}function f(x){try{p(s.throw(x))}catch(w){c(w)}}function p(x){x.done?o(x.value):a(x.value).then(u,f)}p((s=s.apply(e,t||[])).next())})},X$=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},s,a,o,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(p){return function(x){return f([p,x])}}function f(p){if(s)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(r=0)),r;)try{if(s=1,a&&(o=p[0]&2?a.return:p[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,p[1])).done)return o;switch(a=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,a=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){r.label=p[1];break}if(p[0]===6&&r.label<o[1]){r.label=o[1],o=p;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(p);break}o[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(x){p=[6,x],a=0}finally{s=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},K$=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Jl.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Jl.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return G$(this,void 0,void 0,function(){var t,r,s,a,o,c,u;return X$(this,function(f){switch(f.label){case 0:return t=function(p){for(var x=p.getVideoTracks(),w=0,b=x;w<b.length;w++){var j=b[w];j.enabled=!1,j.stop(),p.removeTrack(j)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=f.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(s=f.sent(),a=[],o=0,c=s;o<c.length;o++)u=c[o],u.kind==="videoinput"&&a.push({id:u.deviceId,label:u.label});return t(r),[2,a]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,r){var s=function(o){for(var c=[],u=0,f=o;u<f.length;u++){var p=f[u];p.kind==="video"&&c.push({id:p.id,label:p.label})}t(c)},a=MediaStreamTrack;a.getSources(s)})},e}(),jr;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(jr||(jr={}));var Y$=function(){function e(){this.state=jr.NOT_STARTED,this.onGoingTransactionNewState=jr.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===jr.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=jr.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===jr.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=jr.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==jr.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case jr.UNKNOWN:throw"Transition from unknown is not allowed";case jr.NOT_STARTED:this.failIfNewStateIs(t,[jr.PAUSED]);break;case jr.SCANNING:break;case jr.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,r){for(var s=0,a=r;s<a.length;s++){var o=a[s];if(t===o)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),Q$=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===jr.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==jr.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===jr.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===jr.PAUSED},e}(),Z$=function(){function e(){}return e.create=function(){return new Q$(new Y$)},e}(),J$=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(s[o]=a[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),rs=function(e){J$(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(R$),eV=function(){function e(t,r){this.logger=r,this.fps=rs.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=rs.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?iA.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Ba(this.qrbox)},e.create=function(t,r){return new e(t,r)},e}(),tV=function(){function e(t,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var s;typeof r=="boolean"?this.verbose=r===!0:r&&(s=r,this.verbose=s.verbose===!0,s.experimentalFeatures),this.logger=new O$(this.verbose),this.qrcode=new B$(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(s),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Z$.create()}return e.prototype.start=function(t,r,s,a){var o=this;if(!t)throw"cameraIdOrConfig is required";if(!s||typeof s!="function")throw"qrCodeSuccessCallback is required and should be a function.";var c;a?c=a:c=this.verbose?this.logger.log:function(){};var u=eV.create(r,this.logger);this.clearElement();var f=!1;u.videoConstraints&&(u.isMediaStreamConstraintsValid()?f=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var p=f,x=document.getElementById(this.elementId);x.clientWidth?x.clientWidth:rs.DEFAULT_WIDTH,x.style.position="relative",this.shouldScan=!0,this.element=x;var w=this,b=this.stateManagerProxy.startTransition(jr.SCANNING);return new Promise(function(j,N){var C=p?u.videoConstraints:w.createVideoConstraints(t);if(!C){b.cancel(),N("videoConstraints should be defined");return}var T={};(!p||u.aspectRatio)&&(T.aspectRatio=u.aspectRatio);var S={onRenderSurfaceReady:function(E,_){w.setupUi(E,_,u),w.isScanning=!0,w.foreverScan(u,s,c)}};H$.failIfNotSupported().then(function(E){E.create(C).then(function(_){return _.render(o.element,T,S).then(function(k){w.renderedCamera=k,b.execute(),j(null)}).catch(function(k){b.cancel(),N(k)})}).catch(function(_){b.cancel(),N(Jl.errorGettingUserMedia(_))})}).catch(function(E){b.cancel(),N(Jl.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(jr.PAUSED),this.showPausedState(),(Ba(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,r=function(){t.stateManagerProxy.directTransition(jr.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(jr.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var s=function(){if(t.element){var o=document.getElementById(rs.SHADED_REGION_ELEMENT_ID);o&&t.element.removeChild(o)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),s(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),r.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,r){return this.scanFileV2(t,r).then(function(s){return s.decodedText})},e.prototype.scanFileV2=function(t,r){var s=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Ba(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,o){s.possiblyCloseLastScanImageFile(),s.clearElement(),s.lastScanImageFile=URL.createObjectURL(t);var c=new Image;c.onload=function(){var u=c.width,f=c.height,p=document.getElementById(s.elementId),x=p.clientWidth?p.clientWidth:rs.DEFAULT_WIDTH,w=Math.max(p.clientHeight?p.clientHeight:f,rs.FILE_SCAN_MIN_HEIGHT),b=s.computeCanvasDrawConfig(u,f,x,w);if(r){var j=s.createCanvasElement(x,w,"qr-canvas-visible");j.style.display="inline-block",p.appendChild(j);var N=j.getContext("2d");if(!N)throw"Unable to get 2d context from canvas";N.canvas.width=x,N.canvas.height=w,N.drawImage(c,0,0,u,f,b.x,b.y,b.width,b.height)}var C=rs.FILE_SCAN_HIDDEN_CANVAS_PADDING,T=Math.max(c.width,b.width),S=Math.max(c.height,b.height),E=T+2*C,_=S+2*C,k=s.createCanvasElement(E,_);p.appendChild(k);var D=k.getContext("2d");if(!D)throw"Unable to get 2d context from canvas";D.canvas.width=E,D.canvas.height=_,D.drawImage(c,0,0,u,f,C,C,T,S);try{s.qrcode.decodeRobustlyAsync(k).then(function(L){a(i2.createFromQrcodeResult(L))}).catch(o)}catch(L){o("QR code parse error, error = ".concat(L))}},c.onerror=o,c.onabort=o,c.onstalled=o,c.onsuspend=o,c.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return K$.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!iA.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var r=[Ye.QR_CODE,Ye.AZTEC,Ye.CODABAR,Ye.CODE_39,Ye.CODE_93,Ye.CODE_128,Ye.DATA_MATRIX,Ye.MAXICODE,Ye.ITF,Ye.EAN_13,Ye.EAN_8,Ye.PDF_417,Ye.RSS_14,Ye.RSS_EXPANDED,Ye.UPC_A,Ye.UPC_E,Ye.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return r;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var s=[],a=0,o=t.formatsToSupport;a<o.length;a++){var c=o[a];I$(c)?s.push(c):this.logger.warn("Invalid format: ".concat(c," passed in config, ignoring."))}if(s.length===0)throw"None of formatsToSupport match supported values.";return s},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(Ba(t))return!0;if(!Ba(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(Ba(t.experimentalFeatures))return!0;var r=t.experimentalFeatures;return Ba(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,r,s){var a=this,o=s.qrbox;this.validateQrboxConfig(o);var c=this.toQrdimensions(t,r,o),u=function(p){if(p<rs.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(rs.MIN_QR_BOX_SIZE,"px.")},f=function(p){return p>t&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),p=t),p};u(c.width),u(c.height),c.width=f(c.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,r,s){if(typeof s=="number")return{width:s,height:s};if(typeof s=="function")try{return s(t,r)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return s},e.prototype.setupUi=function(t,r,s){s.isShadedBoxEnabled()&&this.validateQrboxSize(t,r,s);var a=Ba(s.qrbox)?{width:t,height:r}:s.qrbox;this.validateQrboxConfig(a);var o=this.toQrdimensions(t,r,a);o.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var c=s.isShadedBoxEnabled()&&o.height<=r,u={x:0,y:0,width:t,height:r},f=c?this.getShadedRegionBounds(t,r,o):u,p=this.createCanvasElement(f.width,f.height),x={willReadFrequently:!0},w=p.getContext("2d",x);w.canvas.width=f.width,w.canvas.height=f.height,this.element.append(p),c&&this.possiblyInsertShadingElement(this.element,t,r,o),this.createScannerPausedUiElement(this.element),this.qrRegion=f,this.context=w,this.canvasElement=p},e.prototype.createScannerPausedUiElement=function(t){var r=document.createElement("div");r.innerText=Jl.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",t.appendChild(r),this.scannerPausedUiElement=r},e.prototype.scanContext=function(t,r){var s=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return t(a.text,i2.createFromQrcodeResult(a)),s.possiblyUpdateShaders(!0),!0}).catch(function(a){s.possiblyUpdateShaders(!1);var o=Jl.codeParseError(a);return r(o,P$.createFrom(o)),!1})},e.prototype.foreverScan=function(t,r,s){var a=this;if(this.shouldScan&&this.renderedCamera){var o=this.renderedCamera.getSurface(),c=o.videoWidth/o.clientWidth,u=o.videoHeight/o.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var f=this.qrRegion.width*c,p=this.qrRegion.height*u,x=this.qrRegion.x*c,w=this.qrRegion.y*u;this.context.drawImage(o,x,w,f,p,0,0,this.qrRegion.width,this.qrRegion.height);var b=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(t,r,s)},a.getTimeoutFps(t.fps))};this.scanContext(r,s).then(function(j){!j&&t.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(r,s).finally(function(){b()})):b()}).catch(function(j){a.logger.logError("Error happend while scanning context",j),b()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var r="facingMode",s="deviceId",a={user:!0,environment:!0},o="exact",c=function(N){if(N in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(N,"'")},u=Object.keys(t);if(u.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(u.length," keys");var f=Object.keys(t)[0];if(f!==r&&f!==s)throw"Only '".concat(r,"' and '").concat(s,"' ")+" are supported for 'cameraIdOrConfig'";if(f===r){var p=t.facingMode;if(typeof p=="string"){if(c(p))return{facingMode:p}}else if(typeof p=="object")if(o in p){if(c(p["".concat(o)]))return{facingMode:{exact:p["".concat(o)]}}}else throw"'facingMode' should be string or object with"+" ".concat(o," as key.");else{var x=typeof p;throw"Invalid type of 'facingMode' = ".concat(x)}}else{var w=t.deviceId;if(typeof w=="string")return{deviceId:w};if(typeof w=="object"){if(o in w)return{deviceId:{exact:w["".concat(o)]}};throw"'deviceId' should be string or object with"+" ".concat(o," as key.")}else{var b=typeof w;throw"Invalid type of 'deviceId' = ".concat(b)}}}var j=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(j)},e.prototype.computeCanvasDrawConfig=function(t,r,s,a){if(t<=s&&r<=a){var o=(s-t)/2,c=(a-r)/2;return{x:o,y:c,width:t,height:r}}else{var u=t,f=r;return t>s&&(r=s/t*r,t=s),r>a&&(t=a/r*t,r=a),this.logger.log("Image downsampled from "+"".concat(u,"X").concat(f)+" to ".concat(t,"X").concat(r,".")),this.computeCanvasDrawConfig(t,r,s,a)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=t?rs.BORDER_SHADER_MATCH_COLOR:rs.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,r,s){var a=t,o=r,c=document.createElement("canvas");return c.style.width="".concat(a,"px"),c.style.height="".concat(o,"px"),c.style.display="none",c.id=Ba(s)?"qr-canvas":s,c},e.prototype.getShadedRegionBounds=function(t,r,s){if(s.width>t||s.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-s.width)/2,y:(r-s.height)/2,width:s.width,height:s.height}},e.prototype.possiblyInsertShadingElement=function(t,r,s,a){if(!(r-a.width<1||s-a.height<1)){var o=document.createElement("div");o.style.position="absolute";var c=(r-a.width)/2,u=(s-a.height)/2;if(o.style.borderLeft="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderRight="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderTop="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderBottom="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),o.style.boxSizing="border-box",o.style.top="0px",o.style.bottom="0px",o.style.left="0px",o.style.right="0px",o.id="".concat(rs.SHADED_REGION_ELEMENT_ID),r-a.width<11||s-a.height<11)this.hasBorderShaders=!1;else{var f=5,p=40;this.insertShaderBorders(o,p,f,-f,null,0,!0),this.insertShaderBorders(o,p,f,-f,null,0,!1),this.insertShaderBorders(o,p,f,null,-f,0,!0),this.insertShaderBorders(o,p,f,null,-f,0,!1),this.insertShaderBorders(o,f,p+f,-f,null,-f,!0),this.insertShaderBorders(o,f,p+f,null,-f,-f,!0),this.insertShaderBorders(o,f,p+f,-f,null,-f,!1),this.insertShaderBorders(o,f,p+f,null,-f,-f,!1),this.hasBorderShaders=!0}t.append(o)}},e.prototype.insertShaderBorders=function(t,r,s,a,o,c,u){var f=document.createElement("div");f.style.position="absolute",f.style.backgroundColor=rs.BORDER_SHADER_DEFAULT_COLOR,f.style.width="".concat(r,"px"),f.style.height="".concat(s,"px"),a!==null&&(f.style.top="".concat(a,"px")),o!==null&&(f.style.bottom="".concat(o,"px")),u?f.style.left="".concat(c,"px"):f.style.right="".concat(c,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(f),t.appendChild(f)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),f2;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(f2||(f2={}));function m2({eventId:e}){var R,M,P,F;const{user:t}=bt(),[r,s]=v.useState(!1),[a,o]=v.useState(null),[c,u]=v.useState(!1),[f,p]=v.useState(!1),[x,w]=v.useState(!1),[b,j]=v.useState(""),[N,C]=v.useState(!1),T=v.useRef(null),S=Dc.isNativePlatform();v.useEffect(()=>()=>{T.current&&T.current.stop().catch(()=>{})},[]),v.useEffect(()=>{if(!r||S&&!N)return;let Y=!1;return(async()=>{try{for(let re=0;re<20&&!document.getElementById("qr-reader");re++)await new Promise(W=>setTimeout(W,50));if(Y)return;const q=new tV("qr-reader");T.current=q,await q.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},async re=>{try{await q.stop().catch(()=>{})}finally{s(!1)}await L(re)},()=>{})}catch(q){console.error("Error starting web scanner:",q),G.error("Erro ao acessar câmera. Use o código manual."),s(!1),w(!0)}})(),()=>{Y=!0}},[r,S]);const E=async()=>{S?await _():s(!0)},_=async()=>{try{if((await n2.requestPermissions()).camera!=="granted"){G.error("Permissão de câmera negada");return}s(!0);const U=await n2.scan();if(U.barcodes&&U.barcodes.length>0){const q=U.barcodes[0].rawValue;await L(q)}s(!1)}catch(Y){console.error("Error scanning QR code:",Y),G.error("Erro ao escanear QR Code"),C(!0),s(!0)}},k=async()=>{var Y,U;if(T.current)try{await T.current.stop(),(U=(Y=T.current).clear)==null||U.call(Y)}catch(q){console.error("Error stopping scanner:",q)}C(!1),s(!1)},D=async()=>{if(!b.trim()){G.error("Digite o código do ingresso");return}await L(b.trim()),j(""),w(!1)},L=async Y=>{try{const{data:U,error:q}=await $.from("ticket_sales").select(`
          *,
          event:events!inner(id, title),
          ticket_type:ticket_types(name)
        `).eq("id",Y).eq("event_id",e).eq("payment_status","completed").maybeSingle();if(q)throw q;if(!U){G.error("Ingresso não encontrado ou inválido");return}let re=null;if(U.user_id){const{data:ne}=await $.from("profiles").select("avatar_url, display_name").eq("user_id",U.user_id).maybeSingle();re=ne}if(U.validated_at){o({...U,user:re}),u(!0),G.warning("Ingresso já foi validado anteriormente");return}const{error:W}=await $.from("ticket_sales").update({validated_at:new Date().toISOString(),validated_by:t==null?void 0:t.id}).eq("id",Y);if(W)throw W;o({...U,validated_at:new Date().toISOString(),user:re}),u(!0),G.success("Ingresso validado com sucesso!")}catch(U){console.error("Error validating ticket:",U),G.error("Erro ao validar ingresso")}};return n.jsxs(n.Fragment,{children:[n.jsxs(K,{onClick:()=>p(!0),disabled:r,size:"sm",variant:"outline",children:[n.jsx(En,{className:"h-4 w-4 mr-2"}),"Validar"]}),n.jsx(zt,{open:f,onOpenChange:p,children:n.jsxs(Ft,{className:"sm:max-w-md",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Validar Ingresso"}),n.jsx(os,{children:"Escolha como deseja validar o ingresso"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs(K,{className:"w-full h-20 flex flex-col gap-2",onClick:()=>{p(!1),C(!1),E()},children:[n.jsx(En,{className:"h-6 w-6"}),n.jsx("span",{children:"Escanear QR Code"})]}),n.jsxs(K,{variant:"outline",className:"w-full h-20 flex flex-col gap-2",onClick:()=>{p(!1),w(!0)},children:[n.jsx(M8,{className:"h-6 w-6"}),n.jsx("span",{children:"Digitar Código"})]})]})]})}),n.jsx(zt,{open:r&&(!S||N),onOpenChange:Y=>!Y&&k(),children:n.jsxs(Ft,{className:"sm:max-w-md",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Escanear QR Code"}),n.jsx(os,{children:"Posicione o QR Code do ingresso na câmera"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{id:"qr-reader",className:"w-full"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(K,{variant:"outline",className:"flex-1",onClick:()=>{k(),w(!0)},children:"Código Manual"}),n.jsx(K,{variant:"outline",onClick:k,children:n.jsx(sr,{className:"h-4 w-4"})})]})]})]})}),n.jsx(zt,{open:x,onOpenChange:w,children:n.jsxs(Ft,{className:"sm:max-w-md",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Código Manual"}),n.jsx(os,{children:"Digite o código do ingresso manualmente"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"manual-code",children:"Código do Ingresso"}),n.jsx(we,{id:"manual-code",placeholder:"Cole o código aqui",value:b,onChange:Y=>j(Y.target.value),onKeyPress:Y=>Y.key==="Enter"&&D()})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(K,{variant:"outline",className:"flex-1",onClick:()=>w(!1),children:"Cancelar"}),n.jsx(K,{className:"flex-1",onClick:D,children:"Validar"})]})]})]})}),n.jsx(zt,{open:c,onOpenChange:u,children:n.jsxs(Ft,{children:[n.jsxs(xr,{children:[n.jsx(vr,{children:a!=null&&a.validated_at&&new Date(a.validated_at).getTime()<Date.now()-1e3?"Ingresso Já Validado":"Ingresso Validado!"}),n.jsx(os,{children:"Informações do ingresso"})]}),a&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-4 p-4 bg-muted rounded-lg",children:[n.jsxs(Ut,{className:"h-16 w-16",children:[n.jsx(Kt,{src:(R=a.user)==null?void 0:R.avatar_url}),n.jsx($t,{children:((M=a.buyer_name)==null?void 0:M.charAt(0).toUpperCase())||"?"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-lg",children:a.buyer_name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:((P=a.user)==null?void 0:P.display_name)||a.buyer_email})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Email"}),n.jsx("p",{className:"text-sm",children:a.buyer_email})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Tipo de Ingresso"}),n.jsx("p",{className:"text-sm",children:(F=a.ticket_type)==null?void 0:F.name})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Quantidade"}),n.jsxs("p",{className:"text-sm",children:[a.quantity,"x"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Valor"}),n.jsxs("p",{className:"text-sm",children:["R$ ",a.total_amount.toFixed(2)]})]}),a.validated_at&&n.jsxs("div",{className:"pt-2 border-t",children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Validado em"}),n.jsx("p",{className:"text-sm",children:new Date(a.validated_at).toLocaleString("pt-BR")})]})]})]})]})})]})}function rV({onCreateEvent:e,onManageRegistrations:t,onViewAttendances:r}){const s=_t(),{events:a,loading:o,updateEvent:c,deleteEvent:u}=Oa(),[f,p]=v.useState(null),[x,w]=v.useState(null),[b,j]=v.useState(null),[N,C]=v.useState({title:"",description:"",location:"",event_date:"",max_attendees:0}),T=a.filter(P=>P.status==="upcoming"),S=a.filter(P=>P.status==="completed"),E=a.reduce((P,F)=>P+F.current_attendees,0),_={upcoming:T.length,registrations:E,completed:S.length},k=P=>{j(null),setTimeout(()=>{p(P),C({title:P.title,description:P.description||"",location:P.location,event_date:new Date(P.event_date).toISOString().slice(0,16),max_attendees:P.max_attendees||0})},100)},D=async()=>{f&&(await c(f.id,{...N,event_date:new Date(N.event_date).toISOString()}),p(null))},L=async()=>{x&&(await u(x),w(null))},R=P=>{j(null),setTimeout(()=>{w(P)},100)},M=async P=>{await c(P,{is_live:!1,status:"completed"})};return o?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Meus Eventos"}),n.jsx(K,{size:"sm",onClick:e,children:"+ Criar Evento"})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsx(Ne,{children:n.jsxs(Ce,{className:"p-4 text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-primary",children:_.upcoming}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Próximos"})]})}),n.jsx(Ne,{children:n.jsxs(Ce,{className:"p-4 text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-emerald-500",children:_.registrations}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Cadastros"})]})}),n.jsx(Ne,{children:n.jsxs(Ce,{className:"p-4 text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-orange-500",children:_.completed}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Realizados"})]})})]}),n.jsxs(Km,{defaultValue:"upcoming",className:"space-y-4",children:[n.jsxs(qu,{className:"grid w-full grid-cols-3",children:[n.jsx(ls,{value:"upcoming",children:"Próximos"}),n.jsx(ls,{value:"completed",children:"Realizados"}),n.jsx(ls,{value:"all",children:"Todos"})]}),n.jsx(cs,{value:"upcoming",className:"space-y-4",children:T.length>0?n.jsx(n.Fragment,{children:T.map(P=>n.jsx(Ne,{className:"overflow-hidden",children:n.jsxs(Ce,{className:"p-4",children:[n.jsxs("div",{className:"flex gap-3",children:[P.image_url&&n.jsx("img",{src:P.image_url,alt:P.title,className:"w-16 h-16 rounded-lg object-cover flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-medium text-foreground line-clamp-1",children:P.title}),n.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground mt-1",children:[n.jsx(Et,{className:"h-3 w-3"}),n.jsx("span",{children:new Date(P.event_date).toLocaleDateString("pt-BR")})]}),n.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[n.jsx(Rt,{className:"h-3 w-3"}),n.jsx("span",{className:"line-clamp-1",children:P.location})]})]}),n.jsxs("div",{className:"flex flex-col gap-1 items-end",children:[P.is_live&&n.jsxs(ct,{variant:"destructive",className:"mb-1",children:[n.jsx("div",{className:"h-2 w-2 bg-white rounded-full animate-pulse mr-1"}),"AO VIVO"]}),n.jsx(ct,{variant:"secondary",className:"bg-primary/10 text-primary",children:P.status==="upcoming"?"Próximo":P.status})]})]}),n.jsxs("div",{className:"flex items-center gap-1 text-sm text-emerald-600 mt-2",children:[n.jsx(er,{className:"h-3 w-3"}),n.jsxs("span",{children:[P.current_attendees,"/",P.max_attendees||"∞"," participantes"]})]})]})]}),n.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t border-border",children:[P.is_live&&n.jsxs(K,{variant:"destructive",size:"sm",onClick:()=>M(P.id),children:[n.jsx(Co,{className:"h-4 w-4 mr-1"}),"Encerrar Evento"]}),n.jsxs(K,{variant:"outline",size:"sm",className:"flex-1",disabled:!P.requires_registration,onClick:()=>t==null?void 0:t(P.id),children:[n.jsx(og,{className:"h-4 w-4 mr-1"}),"Cadastros"]}),P.has_paid_tickets&&n.jsxs(n.Fragment,{children:[n.jsxs(K,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>s(`/event/${P.id}/sales`),children:[n.jsx(An,{className:"h-4 w-4 mr-1"}),"Vendas"]}),n.jsx(m2,{eventId:P.id})]}),n.jsxs(of,{open:b===P.id,onOpenChange:F=>j(F?P.id:null),children:[n.jsx(lf,{asChild:!0,children:n.jsx(K,{variant:"ghost",size:"sm",children:n.jsx(zo,{className:"h-4 w-4"})})}),n.jsxs(zd,{align:"end",children:[n.jsxs(zn,{onClick:()=>k(P),children:[n.jsx(ss,{className:"h-4 w-4 mr-2"}),"Editar"]}),n.jsxs(zn,{onClick:()=>{j(null),M(P.id)},className:"text-orange-600",children:[n.jsx(Co,{className:"h-4 w-4 mr-2"}),"Encerrar Evento"]}),n.jsxs(zn,{onClick:()=>R(P.id),className:"text-destructive",children:[n.jsx(Kn,{className:"h-4 w-4 mr-2"}),"Excluir"]})]})]})]})]})},P.id))}):n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(Et,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{className:"mb-4",children:"Nenhum evento próximo"}),n.jsx(K,{onClick:e,children:"Criar Primeiro Evento"})]})}),n.jsx(cs,{value:"completed",className:"space-y-4",children:S.length>0?S.map(P=>n.jsx(Ne,{className:"overflow-hidden",children:n.jsxs(Ce,{className:"p-4",children:[n.jsxs("div",{className:"flex gap-3",children:[P.image_url&&n.jsx("img",{src:P.image_url,alt:P.title,className:"w-16 h-16 rounded-lg object-cover flex-shrink-0"}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-medium text-foreground line-clamp-1",children:P.title}),n.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground mt-1",children:[n.jsx(Et,{className:"h-3 w-3"}),n.jsx("span",{children:new Date(P.event_date).toLocaleDateString("pt-BR")})]}),n.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[n.jsx(Rt,{className:"h-3 w-3"}),n.jsx("span",{className:"line-clamp-1",children:P.location})]})]}),n.jsx(ct,{variant:"secondary",className:"bg-emerald-500/10 text-emerald-600",children:"Realizado"})]})})]}),n.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t border-border",children:[P.requires_registration&&n.jsxs(K,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>t==null?void 0:t(P.id),children:[n.jsx(og,{className:"h-4 w-4 mr-1"}),"Cadastros"]}),P.has_paid_tickets&&n.jsxs(n.Fragment,{children:[n.jsxs(K,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>s(`/event/${P.id}/sales`),children:[n.jsx(An,{className:"h-4 w-4 mr-1"}),"Vendas"]}),n.jsx(m2,{eventId:P.id})]}),n.jsxs(K,{variant:"outline",size:"sm",onClick:()=>r==null?void 0:r(P.id),children:[n.jsx(er,{className:"h-4 w-4 mr-1"}),"Confirmações"]}),n.jsxs(of,{open:b===P.id,onOpenChange:F=>j(F?P.id:null),children:[n.jsx(lf,{asChild:!0,children:n.jsx(K,{variant:"ghost",size:"sm",children:n.jsx(zo,{className:"h-4 w-4"})})}),n.jsxs(zd,{align:"end",children:[n.jsxs(zn,{onClick:()=>k(P),children:[n.jsx(ss,{className:"h-4 w-4 mr-2"}),"Editar"]}),n.jsxs(zn,{onClick:()=>{j(null),M(P.id)},className:"text-orange-600",children:[n.jsx(Co,{className:"h-4 w-4 mr-2"}),"Encerrar Evento"]}),n.jsxs(zn,{onClick:()=>R(P.id),className:"text-destructive",children:[n.jsx(Kn,{className:"h-4 w-4 mr-2"}),"Excluir"]})]})]})]})]})},P.id)):n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(Et,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"Nenhum evento realizado ainda"})]})}),n.jsx(cs,{value:"all",className:"space-y-4",children:a.length>0?a.map(P=>n.jsx(Ne,{className:"overflow-hidden",children:n.jsxs(Ce,{className:"p-4",children:[n.jsxs("div",{className:"flex gap-3",children:[P.image_url&&n.jsx("img",{src:P.image_url,alt:P.title,className:"w-16 h-16 rounded-lg object-cover flex-shrink-0"}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-medium text-foreground line-clamp-1",children:P.title}),n.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground mt-1",children:[n.jsx(Et,{className:"h-3 w-3"}),n.jsx("span",{children:new Date(P.event_date).toLocaleDateString("pt-BR")})]}),n.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[n.jsx(Rt,{className:"h-3 w-3"}),n.jsx("span",{className:"line-clamp-1",children:P.location})]})]}),n.jsxs("div",{className:"flex flex-col gap-1 items-end",children:[P.is_live&&n.jsxs(ct,{variant:"destructive",className:"mb-1",children:[n.jsx("div",{className:"h-2 w-2 bg-white rounded-full animate-pulse mr-1"}),"AO VIVO"]}),n.jsx(ct,{variant:"secondary",className:P.status==="completed"?"bg-emerald-500/10 text-emerald-600":"bg-primary/10 text-primary",children:P.status==="upcoming"?"Próximo":P.status==="completed"?"Realizado":P.status})]})]})})]}),n.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t border-border",children:[P.is_live&&n.jsxs(K,{variant:"destructive",size:"sm",onClick:()=>M(P.id),children:[n.jsx(Co,{className:"h-4 w-4 mr-1"}),"Encerrar Evento"]}),n.jsxs(of,{open:b===P.id,onOpenChange:F=>j(F?P.id:null),children:[n.jsx(lf,{asChild:!0,children:n.jsxs(K,{variant:"outline",size:"sm",className:"flex-1",children:[n.jsx(zo,{className:"h-4 w-4 mr-2"}),"Gerenciar"]})}),n.jsxs(zd,{align:"end",children:[n.jsxs(zn,{onClick:()=>t==null?void 0:t(P.id),children:[n.jsx(og,{className:"h-4 w-4 mr-2"}),"Ver Cadastros"]}),P.has_paid_tickets&&n.jsxs(zn,{onClick:()=>s(`/event/${P.id}/sales`),children:[n.jsx(An,{className:"h-4 w-4 mr-2"}),"Ver Vendas"]}),n.jsxs(zn,{onClick:()=>r==null?void 0:r(P.id),children:[n.jsx(er,{className:"h-4 w-4 mr-2"}),"Ver Confirmações"]}),n.jsxs(zn,{onClick:()=>k(P),children:[n.jsx(ss,{className:"h-4 w-4 mr-2"}),"Editar"]}),n.jsxs(zn,{onClick:()=>{j(null),M(P.id)},className:"text-orange-600",children:[n.jsx(Co,{className:"h-4 w-4 mr-2"}),"Encerrar Evento"]}),n.jsxs(zn,{onClick:()=>R(P.id),className:"text-destructive",children:[n.jsx(Kn,{className:"h-4 w-4 mr-2"}),"Excluir"]})]})]})]})]})},P.id)):n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(Et,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{className:"mb-4",children:"Nenhum evento criado ainda"}),n.jsx(K,{onClick:e,children:"Criar Primeiro Evento"})]})})]}),n.jsx(zt,{open:!!f,onOpenChange:P=>!P&&p(null),children:n.jsxs(Ft,{children:[n.jsx(xr,{children:n.jsx(vr,{children:"Editar Evento"})}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"title",children:"Título"}),n.jsx(we,{id:"title",value:N.title,onChange:P=>C({...N,title:P.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"description",children:"Descrição"}),n.jsx(kn,{id:"description",value:N.description,onChange:P=>C({...N,description:P.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"location",children:"Local"}),n.jsx(we,{id:"location",value:N.location,onChange:P=>C({...N,location:P.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"event_date",children:"Data e Hora"}),n.jsx(we,{id:"event_date",type:"datetime-local",value:N.event_date,onChange:P=>C({...N,event_date:P.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"max_attendees",children:"Máximo de Participantes"}),n.jsx(we,{id:"max_attendees",type:"number",value:N.max_attendees,onChange:P=>C({...N,max_attendees:parseInt(P.target.value)})})]})]}),n.jsxs("div",{className:"flex gap-2 justify-end",children:[n.jsx(K,{variant:"outline",onClick:()=>p(null),children:"Cancelar"}),n.jsx(K,{onClick:D,children:"Salvar Alterações"})]})]})}),n.jsx(el,{open:!!x,onOpenChange:P=>!P&&w(null),children:n.jsxs(Qi,{children:[n.jsxs(tl,{children:[n.jsx(rl,{children:"Confirmar Exclusão"}),n.jsx(nl,{children:"Tem certeza que deseja excluir este evento? Esta ação não pode ser desfeita."})]}),n.jsxs(Zi,{children:[n.jsx(eo,{children:"Cancelar"}),n.jsx(Ji,{onClick:L,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Excluir"})]})]})})]})}function nV(){const{organizerData:e,refetchOrganizer:t}=Oa(),[r,s]=v.useState(!1),[a,o]=v.useState(!1),[c,u]=v.useState(null);v.useEffect(()=>{f()},[e==null?void 0:e.stripe_account_id]);const f=async()=>{if(!(e!=null&&e.stripe_account_id)){u({connected:!1,onboarding_complete:!1,charges_enabled:!1,payouts_enabled:!1});return}try{o(!0);const{data:w,error:b}=await $.functions.invoke("check-stripe-connect-status");if(b)throw b;u(w),await t()}catch(w){console.error("Error checking Stripe status:",w)}finally{o(!1)}},p=async()=>{try{s(!0);const{data:w,error:b}=await $.functions.invoke("create-stripe-connect-account");if(b)throw b;if(w!=null&&w.url)window.location.href=w.url;else throw new Error("URL de onboarding não recebida")}catch(w){console.error("Error creating Stripe Connect account:",w),G.error("Erro ao conectar com Stripe. Tente novamente."),s(!1)}},x=(c==null?void 0:c.connected)&&(c==null?void 0:c.onboarding_complete)&&(c==null?void 0:c.charges_enabled);return n.jsxs(Ne,{children:[n.jsxs(qe,{children:[n.jsxs(He,{className:"flex items-center gap-2",children:[n.jsx(Tx,{className:"h-5 w-5"}),"Pagamentos via Stripe"]}),n.jsx(Jr,{children:"Configure sua conta Stripe para receber pagamentos de ingressos diretamente"})]}),n.jsx(Ce,{className:"space-y-4",children:a?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(us,{className:"h-8 w-8 animate-spin text-primary"})}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium",children:"Status da Conexão"}),x?n.jsxs(ct,{variant:"default",className:"bg-green-500",children:[n.jsx(Zr,{className:"h-3 w-3 mr-1"}),"Ativo"]}):c!=null&&c.connected?n.jsxs(ct,{variant:"secondary",children:[n.jsx(qn,{className:"h-3 w-3 mr-1"}),"Configuração Pendente"]}):n.jsx(ct,{variant:"outline",children:"Não Conectado"})]}),(c==null?void 0:c.connected)&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Onboarding Completo"}),c.onboarding_complete?n.jsx(Zr,{className:"h-4 w-4 text-green-500"}):n.jsx(qn,{className:"h-4 w-4 text-yellow-500"})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Pode Receber Pagamentos"}),c.charges_enabled?n.jsx(Zr,{className:"h-4 w-4 text-green-500"}):n.jsx(qn,{className:"h-4 w-4 text-yellow-500"})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Pode Receber Transferências"}),c.payouts_enabled?n.jsx(Zr,{className:"h-4 w-4 text-green-500"}):n.jsx(qn,{className:"h-4 w-4 text-yellow-500"})]})]})]}),!x&&n.jsx("div",{className:"bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx(qn,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:c!=null&&c.connected?"Complete sua configuração no Stripe":"Configure pagamentos para seus eventos"}),n.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:c!=null&&c.connected?"Você precisa completar o processo de verificação no Stripe para começar a receber pagamentos.":"Conecte sua conta Stripe para vender ingressos e receber pagamentos diretamente na sua conta bancária."})]})]})}),x&&n.jsx("div",{className:"bg-green-50 dark:bg-green-950 border border-green-200 dark:border-green-800 rounded-lg p-4",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx(Zr,{className:"h-5 w-5 text-green-600 dark:text-green-400 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-green-900 dark:text-green-100",children:"Conta conectada com sucesso!"}),n.jsx("p",{className:"text-sm text-green-700 dark:text-green-300 mt-1",children:"Você já pode vender ingressos e receber pagamentos. Os fundos serão transferidos automaticamente para sua conta bancária."})]})]})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(K,{onClick:p,disabled:r,className:"w-full",size:"lg",children:r?n.jsxs(n.Fragment,{children:[n.jsx(us,{className:"h-4 w-4 mr-2 animate-spin"}),"Processando..."]}):c!=null&&c.connected?n.jsxs(n.Fragment,{children:[n.jsx(Vr,{className:"h-4 w-4 mr-2"}),x?"Gerenciar Conta Stripe":"Continuar Configuração"]}):n.jsxs(n.Fragment,{children:[n.jsx(Tx,{className:"h-4 w-4 mr-2"}),"Conectar com Stripe"]})}),(c==null?void 0:c.connected)&&n.jsx(K,{onClick:f,variant:"outline",className:"w-full",disabled:a,children:a?n.jsxs(n.Fragment,{children:[n.jsx(us,{className:"h-4 w-4 mr-2 animate-spin"}),"Verificando..."]}):"Atualizar Status"})]}),n.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[n.jsx("p",{children:"• A plataforma cobra uma taxa de serviço por transação"}),n.jsx("p",{children:"• Você recebe os pagamentos diretamente na sua conta bancária"}),n.jsx("p",{children:"• Processo de verificação seguro pelo Stripe"})]})]})})]})}function sV(){const e=_t(),{signOut:t}=bt(),{organizerData:r,updateOrganizerProfile:s}=Oa(),[a,o]=v.useState(!1),[c,u]=v.useState({whatsapp_url:"",instagram_url:"",playlist_url:"",location_url:"",website_url:"",show_whatsapp:!1,show_instagram:!1,show_playlist:!1,show_location:!1,show_website:!1}),[f,p]=v.useState({notify_new_registrations:!0,notify_event_reminders:!0,public_page_visible:!0,show_statistics:!0}),[x,w]=v.useState(!1),[b,j]=v.useState(""),[N,C]=v.useState("");v.useEffect(()=>{r&&(u({whatsapp_url:r.whatsapp_url||"",instagram_url:r.instagram_url||"",playlist_url:r.playlist_url||"",location_url:r.location_url||"",website_url:r.website_url||"",show_whatsapp:r.show_whatsapp||!1,show_instagram:r.show_instagram||!1,show_playlist:r.show_playlist||!1,show_location:r.show_location||!1,show_website:r.show_website||!1}),p({notify_new_registrations:r.notify_new_registrations??!0,notify_event_reminders:r.notify_event_reminders??!0,public_page_visible:r.public_page_visible??!0,show_statistics:r.show_statistics??!0}))},[r]);const T=async()=>{await t()},S=async()=>{try{const{data:{session:k}}=await $.auth.getSession();if(!k){G.error("Você precisa estar logado para deletar sua conta");return}const{error:D}=await $.functions.invoke("delete-user",{headers:{Authorization:`Bearer ${k.access_token}`}});if(D){console.error("Error deleting account:",D),G.error("Erro ao deletar conta. Tente novamente.");return}G.success("Conta deletada com sucesso!"),await $.auth.signOut(),window.location.href="/auth"}catch(k){console.error("Error:",k),G.error("Erro ao deletar conta. Tente novamente.")}},E=async(k,D)=>{const L={...f,[k]:D};p(L);try{await s({[k]:D}),G.success("Configuração atualizada!")}catch(R){console.error("Error updating setting:",R),G.error("Erro ao atualizar configuração"),p(f)}},_=async()=>{if(b!==N){G.error("As senhas não coincidem");return}if(b.length<6){G.error("A senha deve ter pelo menos 6 caracteres");return}try{const{error:k}=await $.auth.updateUser({password:b});if(k)throw k;G.success("Senha alterada com sucesso!"),w(!1),j(""),C("")}catch(k){console.error("Error changing password:",k),G.error("Erro ao alterar senha")}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(T1,{className:"h-5 w-5 text-primary"}),n.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Configurações"})]}),n.jsx(nV,{}),n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsxs(He,{className:"flex items-center gap-2",children:[n.jsx(ms,{className:"h-4 w-4"}),"Conta"]})}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-foreground",children:"Editar Perfil"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Alterar informações pessoais"})]}),n.jsx(K,{variant:"outline",size:"sm",onClick:()=>e("/organizer-profile"),children:"Editar"})]}),n.jsx(la,{}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-foreground",children:"Alterar Senha"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Atualizar sua senha de acesso"})]}),n.jsxs(zt,{open:x,onOpenChange:w,children:[n.jsx(tS,{asChild:!0,children:n.jsxs(K,{variant:"outline",size:"sm",children:[n.jsx(Rx,{className:"h-4 w-4 mr-1"}),"Alterar"]})}),n.jsxs(Ft,{children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Alterar Senha"}),n.jsx(os,{children:"Digite sua nova senha. Ela deve ter pelo menos 6 caracteres."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"new-password",children:"Nova Senha"}),n.jsx(we,{id:"new-password",type:"password",value:b,onChange:k=>j(k.target.value),placeholder:"Digite a nova senha"})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"confirm-password",children:"Confirmar Senha"}),n.jsx(we,{id:"confirm-password",type:"password",value:N,onChange:k=>C(k.target.value),placeholder:"Confirme a nova senha"})]})]}),n.jsxs($u,{children:[n.jsx(K,{variant:"outline",onClick:()=>w(!1),children:"Cancelar"}),n.jsx(K,{onClick:_,children:"Salvar Nova Senha"})]})]})]})]})]})]}),n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsxs(He,{className:"flex items-center gap-2",children:[n.jsx(Ha,{className:"h-4 w-4"}),"Notificações"]})}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-foreground",children:"Novos Cadastros"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Receber quando alguém se cadastrar"})]}),n.jsx(Tr,{checked:f.notify_new_registrations,onCheckedChange:k=>E("notify_new_registrations",k)})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-foreground",children:"Lembrete de Eventos"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Notificar 1 hora antes do evento"})]}),n.jsx(Tr,{checked:f.notify_event_reminders,onCheckedChange:k=>E("notify_event_reminders",k)})]})]})]}),n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsxs(He,{className:"flex items-center gap-2",children:[n.jsx(Rx,{className:"h-4 w-4"}),"Privacidade"]})}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-foreground",children:"Página Pública"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Permitir que outros vejam sua página"})]}),n.jsx(Tr,{checked:f.public_page_visible,onCheckedChange:k=>E("public_page_visible",k)})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-foreground",children:"Mostrar Estatísticas"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Exibir número de seguidores e eventos"})]}),n.jsx(Tr,{checked:f.show_statistics,onCheckedChange:k=>E("show_statistics",k)})]})]})]}),n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsxs(He,{className:"flex items-center gap-2",children:[n.jsx(xy,{className:"h-4 w-4"}),"Ajuda e Suporte"]})}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs(K,{variant:"outline",className:"w-full justify-start",children:[n.jsx(xy,{className:"h-4 w-4 mr-2"}),"Central de Ajuda"]}),n.jsxs(K,{variant:"outline",className:"w-full justify-start",children:[n.jsx(Ha,{className:"h-4 w-4 mr-2"}),"Reportar Problema"]})]})]}),n.jsx(Ne,{children:n.jsx(Ce,{className:"p-6",children:n.jsxs(el,{children:[n.jsx(Yf,{asChild:!0,children:n.jsxs(K,{variant:"outline",className:"w-full text-orange-600 hover:text-orange-700 hover:bg-orange-50",children:[n.jsx(Sj,{className:"h-4 w-4 mr-2"}),"Sair da Conta"]})}),n.jsxs(Qi,{children:[n.jsxs(tl,{children:[n.jsx(rl,{children:"Confirmar Logout"}),n.jsx(nl,{children:"Tem certeza que deseja sair da sua conta? Você precisará fazer login novamente para acessar."})]}),n.jsxs(Zi,{children:[n.jsx(eo,{children:"Cancelar"}),n.jsx(Ji,{onClick:T,children:"Sair"})]})]})]})})}),n.jsxs(Ne,{className:"border-destructive/20",children:[n.jsx(qe,{children:n.jsxs(He,{className:"flex items-center gap-2 text-destructive",children:[n.jsx(Kn,{className:"h-4 w-4"}),"Zona de Perigo"]})}),n.jsx(Ce,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsx(He,{children:"Ações Rápidas"})}),n.jsxs(Ce,{className:"space-y-3",children:[n.jsxs(K,{variant:"outline",className:"w-full justify-start",onClick:()=>window.open("/registrations","_blank"),children:[n.jsx(er,{className:"h-4 w-4 mr-2"}),"Ver Todos os Cadastros"]}),n.jsxs(K,{variant:"outline",className:"w-full justify-start",children:[n.jsx(Ko,{className:"h-4 w-4 mr-2"}),"Exportar Dados"]})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-foreground",children:"Excluir Conta"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Esta ação não pode ser desfeita. Todos os seus dados serão permanentemente removidos."})]}),n.jsxs(el,{children:[n.jsx(Yf,{asChild:!0,children:n.jsxs(K,{variant:"destructive",size:"sm",children:[n.jsx(Kn,{className:"h-4 w-4 mr-2"}),"Excluir Conta"]})}),n.jsxs(Qi,{children:[n.jsxs(tl,{children:[n.jsx(rl,{children:"Excluir Conta Permanentemente"}),n.jsx(nl,{children:"Esta ação é irreversível. Todos os seus eventos, cadastros e dados serão permanentemente excluídos. Você poderá criar uma nova conta a qualquer momento com o mesmo email."})]}),n.jsxs(Zi,{children:[n.jsx(eo,{children:"Cancelar"}),n.jsx(Ji,{onClick:S,className:"bg-destructive hover:bg-destructive/90",children:"Excluir Definitivamente"})]})]})]})]})})]})]})}const aV={text:tf,email:Pu,phone:Uc,date:Et,select:A1,checkbox:Rj,photo:Hi,file:Sc};function iV({fields:e,onChange:t}){const[r,s]=v.useState(null),a=()=>{const f={id:`field_${Date.now()}`,type:"text",label:"Novo Campo",required:!1};t([...e,f]),s(f.id)},o=f=>{t(e.filter(p=>p.id!==f))},c=(f,p)=>{t(e.map(x=>x.id===f?{...x,...p}:x))},u=(f,p)=>{const x=[...e],w=p==="up"?f-1:f+1;w<0||w>=x.length||([x[f],x[w]]=[x[w],x[f]],t(x))};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure os campos que deseja coletar dos participantes"}),n.jsxs(K,{onClick:a,size:"sm",variant:"outline",children:[n.jsx($c,{className:"h-4 w-4 mr-1"}),"Adicionar Campo"]})]}),e.length===0?n.jsx(Ne,{children:n.jsxs(Ce,{className:"py-8 text-center text-muted-foreground",children:[n.jsx(tf,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),n.jsx("p",{className:"text-sm",children:"Nenhum campo personalizado ainda"}),n.jsx("p",{className:"text-xs mt-1",children:'Clique em "Adicionar Campo" para começar'})]})}):n.jsx("div",{className:"space-y-2",children:e.map((f,p)=>{const x=aV[f.type],w=r===f.id;return n.jsx(Ne,{className:"overflow-hidden",children:n.jsx(Ce,{className:"p-4",children:w?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(de,{className:"text-xs",children:"Tipo do Campo"}),n.jsxs(ea,{value:f.type,onValueChange:b=>c(f.id,{type:b}),children:[n.jsx(As,{className:"h-9",children:n.jsx(ta,{})}),n.jsxs(ks,{children:[n.jsx(Ht,{value:"text",children:"Texto"}),n.jsx(Ht,{value:"email",children:"Email"}),n.jsx(Ht,{value:"phone",children:"Telefone"}),n.jsx(Ht,{value:"date",children:"Data"}),n.jsx(Ht,{value:"select",children:"Seleção Única"}),n.jsx(Ht,{value:"checkbox",children:"Múltipla Escolha"}),n.jsx(Ht,{value:"photo",children:"Upload de Foto"}),n.jsx(Ht,{value:"file",children:"Upload de Arquivo"})]})]})]}),n.jsxs("div",{children:[n.jsx(de,{className:"text-xs",children:"Nome do Campo"}),n.jsx(we,{value:f.label,onChange:b=>c(f.id,{label:b.target.value}),placeholder:"Ex: Nome completo",className:"h-9"})]})]}),(f.type==="select"||f.type==="checkbox")&&n.jsxs("div",{children:[n.jsx(de,{className:"text-xs",children:f.type==="select"?"Opções (pressione Enter para nova linha)":"Opções para selecionar (pressione Enter para nova linha)"}),n.jsx("textarea",{value:(f.options||[]).join(`
`),onChange:b=>c(f.id,{options:b.target.value.split(`
`).filter(j=>j.trim())}),onKeyDown:b=>{if(b.key==="Enter"){b.preventDefault(),b.stopPropagation();const j=b.currentTarget,N=j.selectionStart??j.value.length,C=j.selectionEnd??j.value.length,T=j.value.slice(0,N)+`
`+j.value.slice(C);c(f.id,{options:T.split(`
`).filter(S=>S.trim())}),setTimeout(()=>{try{j.setSelectionRange(N+1,N+1)}catch{}},0)}},placeholder:`Digite uma opção e pressione Enter
Segunda opção
Terceira opção`,className:"w-full min-h-[100px] px-3 py-2 text-sm rounded-md border border-input bg-background resize-y",rows:4}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:f.type==="checkbox"?"Participante poderá selecionar múltiplas opções":"Participante poderá selecionar apenas uma opção"})]}),f.type==="photo"&&n.jsx("div",{className:"rounded-lg border border-border bg-surface/30 p-3",children:n.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.jsx(Hi,{className:"h-3 w-3 inline mr-1"}),"Participante poderá enviar uma foto (JPG, PNG, até 5MB)"]})}),f.type==="file"&&n.jsx("div",{className:"rounded-lg border border-border bg-surface/30 p-3",children:n.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.jsx(Sc,{className:"h-3 w-3 inline mr-1"}),"Participante poderá enviar um arquivo (PDF, DOC, até 10MB)"]})}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Tr,{checked:f.required,onCheckedChange:b=>c(f.id,{required:b})}),n.jsx(de,{className:"text-xs",children:"Campo obrigatório"})]}),n.jsx(K,{onClick:()=>s(null),size:"sm",variant:"outline",children:"Concluir"})]})]}):n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx(K,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>u(p,"up"),disabled:p===0,children:n.jsx(wy,{className:"h-3 w-3"})}),n.jsx(K,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>u(p,"down"),disabled:p===e.length-1,children:n.jsx(wy,{className:"h-3 w-3"})})]}),n.jsx(x,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium",children:f.label}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[f.type==="text"&&"Texto",f.type==="email"&&"Email",f.type==="phone"&&"Telefone",f.type==="date"&&"Data",f.type==="select"&&"Seleção Única",f.type==="checkbox"&&"Múltipla Escolha",f.type==="photo"&&"Upload de Foto",f.type==="file"&&"Upload de Arquivo",f.required&&" • Obrigatório",f.options&&f.options.length>0&&` • ${f.options.length} opções`]})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(K,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>s(f.id),children:n.jsx(tf,{className:"h-3 w-3"})}),n.jsx(K,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:()=>o(f.id),children:n.jsx(Kn,{className:"h-3 w-3"})})]})]})})},f.id)})}),n.jsxs("div",{className:"rounded-lg border border-border bg-surface/50 p-4 space-y-2",children:[n.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.jsx("strong",{children:"Dica:"}),' Os campos "Nome", "Email" e "Telefone" já são coletados por padrão. Use campos personalizados para informações adicionais específicas do seu evento.']}),n.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[n.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[n.jsx(tf,{className:"h-3 w-3"})," Texto livre"]}),n.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[n.jsx(A1,{className:"h-3 w-3"})," Escolha única"]}),n.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[n.jsx(Rj,{className:"h-3 w-3"})," Múltiplas opções"]}),n.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[n.jsx(Hi,{className:"h-3 w-3"})," Fotos"]}),n.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[n.jsx(Sc,{className:"h-3 w-3"})," Arquivos"]})]})]})]})}function lA({open:e,onOpenChange:t,fields:r,onSave:s}){const[a,o]=v.useState(r),c=()=>{s(a),t(!1)};return n.jsx(zt,{open:e,onOpenChange:t,children:n.jsxs(Ft,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[n.jsxs(xr,{children:[n.jsxs(vr,{className:"flex items-center gap-2",children:[n.jsx(Sc,{className:"h-5 w-5"}),"Configurar Formulário de Cadastro"]}),n.jsx(os,{children:"Personalize os campos que serão coletados dos participantes do evento. Nome, email e telefone já são campos padrão."})]}),n.jsx("div",{className:"py-4",children:n.jsx(iV,{fields:a,onChange:o})}),n.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[n.jsx(K,{variant:"outline",onClick:()=>t(!1),children:"Cancelar"}),n.jsx(K,{onClick:c,children:"Salvar Formulário"})]})]})})}const oV=Iu("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),$o=v.forwardRef(({className:e,variant:t,...r},s)=>n.jsx("div",{ref:s,role:"alert",className:Fe(oV({variant:t}),e),...r}));$o.displayName="Alert";const cA=v.forwardRef(({className:e,...t},r)=>n.jsx("h5",{ref:r,className:Fe("mb-1 font-medium leading-none tracking-tight",e),...t}));cA.displayName="AlertTitle";const Vo=v.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Fe("text-sm [&_p]:leading-relaxed",e),...t}));Vo.displayName="AlertDescription";const p2=[{value:"facebook",label:"Meta Pixel (Facebook/Instagram)",icon:"📘"},{value:"google_ads",label:"Google Ads",icon:"🔍"},{value:"tiktok",label:"TikTok Pixel",icon:"🎵"},{value:"linkedin",label:"LinkedIn Insight Tag",icon:"💼"},{value:"twitter",label:"Twitter Pixel",icon:"🐦"},{value:"custom",label:"Pixel Personalizado",icon:"⚙️"}];function lV({eventId:e}){const[t,r]=v.useState([]),[s,a]=v.useState(!0),[o,c]=v.useState(!1),[u,f]=v.useState(null),[p,x]=v.useState({platform:"",pixel_id:"",is_active:!0});v.useEffect(()=>{w()},[e]);const w=async()=>{try{a(!0);const{data:S,error:E}=await $.from("event_pixels").select("*").eq("event_id",e).order("created_at",{ascending:!1});if(E)throw E;r(S||[])}catch(S){console.error("Error loading pixels:",S),G.error("Erro ao carregar pixels")}finally{a(!1)}},b=S=>{S?(f(S),x({platform:S.platform,pixel_id:S.pixel_id,is_active:S.is_active})):(f(null),x({platform:"",pixel_id:"",is_active:!0})),c(!0)},j=async()=>{try{if(!p.platform||!p.pixel_id){G.error("Preencha todos os campos obrigatórios");return}if(u){const{error:S}=await $.from("event_pixels").update({platform:p.platform,pixel_id:p.pixel_id,is_active:p.is_active}).eq("id",u.id);if(S)throw S;G.success("Pixel atualizado com sucesso")}else{const{error:S}=await $.from("event_pixels").insert({event_id:e,platform:p.platform,pixel_id:p.pixel_id,is_active:p.is_active});if(S)throw S;G.success("Pixel adicionado com sucesso")}c(!1),w()}catch(S){console.error("Error saving pixel:",S),G.error(S.message||"Erro ao salvar pixel")}},N=async S=>{if(confirm("Tem certeza que deseja remover este pixel?"))try{const{error:E}=await $.from("event_pixels").delete().eq("id",S);if(E)throw E;G.success("Pixel removido com sucesso"),w()}catch(E){console.error("Error deleting pixel:",E),G.error("Erro ao remover pixel")}},C=async S=>{try{const{error:E}=await $.from("event_pixels").update({is_active:!S.is_active}).eq("id",S.id);if(E)throw E;G.success(S.is_active?"Pixel desativado":"Pixel ativado"),w()}catch(E){console.error("Error toggling pixel:",E),G.error("Erro ao alterar status do pixel")}},T=S=>p2.find(E=>E.value===S)||{label:S,icon:"📊"};return s?n.jsx(Ne,{children:n.jsx(Ce,{className:"p-6",children:n.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando pixels..."})})}):n.jsxs(n.Fragment,{children:[n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(He,{children:"Integrações de Pixels"}),n.jsx(Jr,{children:"Adicione pixels de rastreamento para monitorar conversões e criar audiências"})]}),n.jsxs(K,{onClick:()=>b(),size:"sm",children:[n.jsx($c,{className:"h-4 w-4 mr-2"}),"Adicionar Pixel"]})]})}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs($o,{children:[n.jsx(qn,{className:"h-4 w-4"}),n.jsx(Vo,{children:"Os pixels serão disparados quando usuários visualizarem o evento, se registrarem e comprarem ingressos."})]}),t.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(_y,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),n.jsx("p",{className:"text-sm",children:"Nenhum pixel configurado ainda"}),n.jsx("p",{className:"text-xs mt-1",children:"Adicione pixels para rastrear suas conversões"})]}):n.jsx("div",{className:"space-y-3",children:t.map(S=>{const E=T(S.platform);return n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[n.jsx("span",{className:"text-2xl",children:E.icon}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium",children:E.label}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["ID: ",S.pixel_id]})]}),n.jsx(Tr,{checked:S.is_active,onCheckedChange:()=>C(S)})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>b(S),children:n.jsx(_y,{className:"h-4 w-4"})}),n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>N(S.id),children:n.jsx(Kn,{className:"h-4 w-4"})})]})]},S.id)})})]})]}),n.jsx(zt,{open:o,onOpenChange:c,children:n.jsxs(Ft,{children:[n.jsxs(xr,{children:[n.jsx(vr,{children:u?"Editar Pixel":"Adicionar Pixel"}),n.jsx(os,{children:"Configure o pixel de rastreamento para este evento"})]}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"platform",children:"Plataforma"}),n.jsxs(ea,{value:p.platform,onValueChange:S=>x({...p,platform:S}),children:[n.jsx(As,{id:"platform",children:n.jsx(ta,{placeholder:"Selecione a plataforma"})}),n.jsx(ks,{children:p2.map(S=>n.jsxs(Ht,{value:S.value,children:[S.icon," ",S.label]},S.value))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"pixel_id",children:"ID do Pixel"}),n.jsx(we,{id:"pixel_id",placeholder:"Ex: 1234567890",value:p.pixel_id,onChange:S=>x({...p,pixel_id:S.target.value})}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Cole o ID do pixel fornecido pela plataforma"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Tr,{id:"active",checked:p.is_active,onCheckedChange:S=>x({...p,is_active:S})}),n.jsx(de,{htmlFor:"active",children:"Pixel ativo"})]})]}),n.jsxs($u,{children:[n.jsx(K,{variant:"outline",onClick:()=>c(!1),children:"Cancelar"}),n.jsx(K,{onClick:j,children:u?"Atualizar":"Adicionar"})]})]})})]})}function cV({ticketTypes:e,ticketSettings:t,onTicketTypesChange:r,onTicketSettingsChange:s,termsAccepted:a,onTermsAccepted:o,organizerId:c,eventId:u}){const[f,p]=v.useState(null),[x,w]=v.useState(!1),[b,j]=v.useState(!1),[N,C]=v.useState(null),[T,S]=v.useState(null),E=_t();v.useEffect(()=>{_(),k()},[c]);const _=async()=>{try{const{data:F,error:Y}=await $.from("organizer_financial_data").select("id, is_verified").eq("organizer_id",c).maybeSingle();if(Y)throw Y;C(!!F)}catch(F){console.error("Error checking financial data:",F),C(!1)}},k=async()=>{try{const{data:F,error:Y}=await $.from("organizers").select("stripe_account_id, stripe_charges_enabled").eq("id",c).maybeSingle();if(Y)throw Y;S(!!(F!=null&&F.stripe_account_id&&(F!=null&&F.stripe_charges_enabled)))}catch(F){console.error("Error checking Stripe connection:",F),S(!1)}},D=()=>{const F={id:Date.now().toString(),name:"",description:"",price:0,quantity:100,minQuantity:1,maxQuantity:10};p(F),w(!0)},L=F=>{p({...F}),w(!0)},R=()=>{if(!f)return;const F=e.findIndex(Y=>Y.id===f.id);if(F>=0){const Y=[...e];Y[F]=f,r(Y)}else r([...e,f]);w(!1),p(null)},M=F=>{r(e.filter(Y=>Y.id!==F))},P=F=>{const Y=F*t.platformFeePercentage/100,U=F*t.paymentProcessingFeePercentage/100+t.paymentProcessingFeeFixed,q=Y+U;return t.feePayer==="buyer"?{subtotal:F,fees:q,total:F+q,organizerReceives:F}:{subtotal:F,fees:q,total:F,organizerReceives:F-q}};return n.jsxs("div",{className:"space-y-6",children:[T===!1&&n.jsxs($o,{variant:"destructive",children:[n.jsx(qn,{className:"h-4 w-4"}),n.jsxs(Vo,{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Você precisa conectar sua conta Stripe antes de vender ingressos pela plataforma."}),n.jsx(K,{variant:"outline",size:"sm",onClick:()=>E("/organizer-profile"),className:"ml-4",children:"Conectar Stripe"})]})]}),N===!1&&n.jsxs($o,{variant:"destructive",children:[n.jsx(qn,{className:"h-4 w-4"}),n.jsxs(Vo,{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Você precisa cadastrar seus dados financeiros antes de vender ingressos."}),n.jsx(K,{variant:"outline",size:"sm",onClick:()=>E("/organizer-profile"),className:"ml-4",children:"Cadastrar Agora"})]})]}),n.jsxs(Ne,{children:[n.jsxs(qe,{children:[n.jsx(He,{className:"text-sm",children:"Configurações de Taxas"}),n.jsx(Jr,{children:"Defina quem paga as taxas da plataforma e processamento"})]}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(de,{className:"mb-2 block",children:"Quem paga as taxas?"}),n.jsxs(Ui,{value:t.feePayer,onValueChange:F=>s({...t,feePayer:F}),children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(on,{value:"buyer",id:"buyer"}),n.jsx(de,{htmlFor:"buyer",className:"cursor-pointer font-normal",children:"Comprador (taxa adicionada ao valor do ingresso)"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(on,{value:"organizer",id:"organizer"}),n.jsx(de,{htmlFor:"organizer",className:"cursor-pointer font-normal",children:"Organizador (taxa descontada do valor recebido)"})]})]})]}),n.jsxs($o,{children:[n.jsx(D8,{className:"h-4 w-4"}),n.jsx(Vo,{className:"text-xs",children:n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Taxa da Plataforma:"})," ",t.platformFeePercentage,"% por ingresso"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Taxa de Processamento:"})," ",t.paymentProcessingFeePercentage,"% + R$ ",t.paymentProcessingFeeFixed.toFixed(2)]})]})})]}),e.length>0&&n.jsxs("div",{className:"bg-muted p-3 rounded-lg text-xs space-y-1",children:[n.jsxs("p",{className:"font-semibold mb-2",children:["Exemplo com ingresso de R$ ",e[0].price.toFixed(2),":"]}),(()=>{const F=P(e[0].price);return n.jsxs(n.Fragment,{children:[n.jsxs("p",{children:["Valor do ingresso: R$ ",F.subtotal.toFixed(2)]}),n.jsxs("p",{children:["Taxas totais: R$ ",F.fees.toFixed(2)]}),n.jsx("p",{className:"font-semibold text-primary",children:t.feePayer==="buyer"?`Comprador paga: R$ ${F.total.toFixed(2)}`:`Organizador recebe: R$ ${F.organizerReceives.toFixed(2)}`})]})})()]})]})]}),n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsx(He,{className:"text-sm",children:"Formas de Pagamento"})}),n.jsxs(Ce,{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(de,{htmlFor:"pix",children:"PIX"}),n.jsx(Tr,{id:"pix",checked:t.acceptsPix,onCheckedChange:F=>s({...t,acceptsPix:F})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(de,{htmlFor:"credit",children:"Cartão de Crédito"}),n.jsx(Tr,{id:"credit",checked:t.acceptsCreditCard,onCheckedChange:F=>s({...t,acceptsCreditCard:F})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(de,{htmlFor:"debit",children:"Cartão de Débito"}),n.jsx(Tr,{id:"debit",checked:t.acceptsDebitCard,onCheckedChange:F=>s({...t,acceptsDebitCard:F})})]}),t.acceptsCreditCard&&n.jsxs("div",{children:[n.jsx(de,{htmlFor:"installments",children:"Máximo de Parcelas"}),n.jsxs(ea,{value:t.maxInstallments.toString(),onValueChange:F=>s({...t,maxInstallments:parseInt(F)}),children:[n.jsx(As,{children:n.jsx(ta,{})}),n.jsx(ks,{children:[1,2,3,4,5,6,7,8,9,10,11,12].map(F=>n.jsxs(Ht,{value:F.toString(),children:[F,"x"]},F))})]})]})]})]}),n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsx(He,{className:"text-sm",children:"Política de Cancelamento"})}),n.jsx(Ce,{children:n.jsx(kn,{placeholder:"Exemplo: Cancelamento com reembolso total até 7 dias antes do evento. Após esse período, não haverá reembolso.",value:t.cancellationPolicy,onChange:F=>s({...t,cancellationPolicy:F.target.value}),rows:3})})]}),n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(He,{className:"text-sm",children:"Tipos de Ingressos / Lotes"}),n.jsx(Jr,{children:"Configure os diferentes tipos e lotes de ingressos"})]}),n.jsxs(K,{size:"sm",onClick:D,children:[n.jsx($c,{className:"h-4 w-4 mr-1"}),"Adicionar"]})]})}),n.jsx(Ce,{children:e.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx("p",{className:"mb-2",children:"Nenhum tipo de ingresso configurado"}),n.jsx(K,{variant:"outline",size:"sm",onClick:D,children:"Criar Primeiro Lote"})]}):n.jsx("div",{className:"space-y-3",children:e.map(F=>n.jsx(Ne,{children:n.jsx(Ce,{className:"p-4",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-semibold",children:F.name}),F.description&&n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:F.description}),n.jsxs("div",{className:"flex gap-4 mt-2 text-sm",children:[n.jsxs("span",{className:"text-primary font-semibold",children:["R$ ",F.price.toFixed(2)]}),n.jsxs("span",{className:"text-muted-foreground",children:[F.quantity," ingressos"]}),n.jsxs("span",{className:"text-muted-foreground",children:["Min: ",F.minQuantity," / Máx: ",F.maxQuantity]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>L(F),children:n.jsx(z8,{className:"h-4 w-4"})}),n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>M(F.id),children:n.jsx(Kn,{className:"h-4 w-4"})})]})]})})},F.id))})})]}),u&&e.length>0&&n.jsx(lV,{eventId:u}),n.jsx(Ne,{children:n.jsx(Ce,{className:"pt-6",children:n.jsxs("div",{className:"flex items-start space-x-2",children:[n.jsx(Tr,{id:"terms",checked:a,onCheckedChange:o}),n.jsxs("div",{className:"flex-1",children:[n.jsxs(de,{htmlFor:"terms",className:"cursor-pointer",children:["Aceito os"," ",n.jsx("button",{type:"button",onClick:()=>j(!0),className:"text-primary underline",children:"termos e condições"})," ","para venda de ingressos na plataforma"]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Ao aceitar, você concorda com as taxas de serviço e políticas da plataforma"})]})]})})}),n.jsx(zt,{open:x,onOpenChange:w,children:n.jsxs(Ft,{className:"max-w-md max-h-[90vh] overflow-y-auto",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:f&&e.find(F=>F.id===f.id)?"Editar Ingresso":"Novo Ingresso"}),n.jsx(os,{children:"Configure as informações do tipo de ingresso ou lote"})]}),f&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"ticket-name",children:"Nome do Lote *"}),n.jsx(we,{id:"ticket-name",placeholder:"Ex: 1º Lote, VIP, Pista...",value:f.name,onChange:F=>p({...f,name:F.target.value})})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"ticket-description",children:"Descrição"}),n.jsx(kn,{id:"ticket-description",placeholder:"Descreva o que inclui neste ingresso...",value:f.description,onChange:F=>p({...f,description:F.target.value}),rows:2})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"ticket-price",children:"Preço (R$) *"}),n.jsx(we,{id:"ticket-price",type:"number",step:"0.01",min:"0",value:f.price,onChange:F=>p({...f,price:parseFloat(F.target.value)||0})})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"ticket-quantity",children:"Quantidade *"}),n.jsx(we,{id:"ticket-quantity",type:"number",min:"1",value:f.quantity,onChange:F=>p({...f,quantity:parseInt(F.target.value)||1})})]})]}),n.jsx(la,{}),n.jsxs("div",{children:[n.jsx(de,{className:"mb-2 block",children:"Período de Vendas (Opcional)"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"sales-start",className:"text-xs text-muted-foreground",children:"Início das Vendas"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx(we,{id:"sales-start",type:"date",value:f.salesStartDate||"",onChange:F=>p({...f,salesStartDate:F.target.value})}),n.jsx(we,{type:"time",value:f.salesStartTime||"",onChange:F=>p({...f,salesStartTime:F.target.value})})]})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"sales-end",className:"text-xs text-muted-foreground",children:"Fim das Vendas"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx(we,{id:"sales-end",type:"date",value:f.salesEndDate||"",onChange:F=>p({...f,salesEndDate:F.target.value})}),n.jsx(we,{type:"time",value:f.salesEndTime||"",onChange:F=>p({...f,salesEndTime:F.target.value})})]})]})]})]}),n.jsx(la,{}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"min-qty",children:"Mín. por Compra"}),n.jsx(we,{id:"min-qty",type:"number",min:"1",value:f.minQuantity,onChange:F=>p({...f,minQuantity:parseInt(F.target.value)||1})})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"max-qty",children:"Máx. por Compra"}),n.jsx(we,{id:"max-qty",type:"number",min:"1",value:f.maxQuantity,onChange:F=>p({...f,maxQuantity:parseInt(F.target.value)||1})})]})]}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsx(K,{type:"button",variant:"outline",className:"flex-1",onClick:()=>w(!1),children:"Cancelar"}),n.jsx(K,{type:"button",className:"flex-1",onClick:R,disabled:!f.name||f.price<=0,children:"Salvar"})]})]})]})}),n.jsx(zt,{open:b,onOpenChange:j,children:n.jsxs(Ft,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[n.jsx(xr,{children:n.jsx(vr,{children:"Termos e Condições - Venda de Ingressos"})}),n.jsxs("div",{className:"space-y-4 text-sm",children:[n.jsxs("section",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"1. Taxas e Repasses"}),n.jsxs("p",{className:"text-muted-foreground",children:["A plataforma cobra uma taxa de serviço de ",t.platformFeePercentage,"% sobre cada ingresso vendido, além da taxa de processamento de pagamento de ",t.paymentProcessingFeePercentage,"% + R$ ",t.paymentProcessingFeeFixed.toFixed(2)," por transação."]})]}),n.jsxs("section",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"2. Repasse de Valores"}),n.jsx("p",{className:"text-muted-foreground",children:"Os valores das vendas serão repassados ao organizador em até 30 dias após a realização do evento, descontadas as taxas aplicáveis (se o organizador for o pagador das taxas)."})]}),n.jsxs("section",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"3. Responsabilidades do Organizador"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground",children:[n.jsx("li",{children:"Garantir a realização do evento conforme anunciado"}),n.jsx("li",{children:"Respeitar a política de cancelamento estabelecida"}),n.jsx("li",{children:"Fornecer suporte aos participantes"}),n.jsx("li",{children:"Manter dados fiscais atualizados para emissão de notas fiscais"})]})]}),n.jsxs("section",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"4. Cancelamentos e Reembolsos"}),n.jsx("p",{className:"text-muted-foreground",children:"Em caso de cancelamento do evento, o organizador deve solicitar o cancelamento na plataforma e os valores serão reembolsados aos participantes de acordo com a política estabelecida. As taxas da plataforma não são reembolsáveis."})]}),n.jsxs("section",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"5. Integração com Stripe"}),n.jsxs("p",{className:"text-muted-foreground",children:["Os pagamentos são processados através do Stripe. Ao aceitar estes termos, você também concorda com os"," ",n.jsx("a",{href:"https://stripe.com/br/legal/connect-account",target:"_blank",rel:"noopener noreferrer",className:"text-primary underline",children:"Termos de Serviço do Stripe Connect"}),"."]})]}),n.jsxs("section",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"6. Compliance e Documentação"}),n.jsx("p",{className:"text-muted-foreground",children:"O organizador é responsável por fornecer todos os documentos necessários para validação da conta, incluindo CPF/CNPJ, dados bancários e comprovante de endereço."})]})]}),n.jsx("div",{className:"flex justify-end gap-2 pt-4",children:n.jsx(K,{variant:"outline",onClick:()=>j(!1),children:"Fechar"})})]})})]})}function dV({open:e,onOpenChange:t,eventId:r,eventTitle:s,shareUrl:a,onViewEvent:o}){const[c,u]=v.useState(!1),f=async()=>{try{await navigator.clipboard.writeText(a),u(!0),G.success("Link copiado!"),setTimeout(()=>u(!1),2e3)}catch{G.error("Erro ao copiar link")}},p=async()=>{if(navigator.share)try{await navigator.share({title:s,text:`Confira este evento: ${s}`,url:a})}catch{console.log("Compartilhamento cancelado")}else f(),G.info("Use o botão 'Copiar Link' para compartilhar")};return n.jsx(zt,{open:e,onOpenChange:t,children:n.jsxs(Ft,{className:"max-w-sm mx-auto",children:[n.jsx(xr,{children:n.jsx(vr,{className:"text-center text-xl",children:"🎉 Evento Criado com Sucesso!"})}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsx("p",{className:"text-center text-muted-foreground",children:"Seu evento está pronto! Compartilhe com seus participantes."}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs(K,{onClick:f,variant:"outline",className:"w-full justify-start gap-2",children:[n.jsx(Cj,{className:"h-4 w-4"}),c?"Link Copiado!":"Copiar Link"]}),n.jsxs(K,{onClick:p,variant:"outline",className:"w-full justify-start gap-2",children:[n.jsx(Is,{className:"h-4 w-4"}),"Compartilhar Evento"]}),n.jsxs(K,{onClick:o,className:"w-full justify-start gap-2 btn-glow",children:[n.jsx(Yo,{className:"h-4 w-4"}),"Ver Evento"]})]}),n.jsx(K,{onClick:()=>t(!1),variant:"ghost",className:"w-full",children:"Fechar"})]})]})})}var ap="Popover",[dA]=Mr(ap,[ao]),Ku=ao(),[uV,co]=dA(ap),uA=e=>{const{__scopePopover:t,children:r,open:s,defaultOpen:a,onOpenChange:o,modal:c=!1}=e,u=Ku(t),f=v.useRef(null),[p,x]=v.useState(!1),[w,b]=Ms({prop:s,defaultProp:a??!1,onChange:o,caller:ap});return n.jsx(z1,{...u,children:n.jsx(uV,{scope:t,contentId:hn(),triggerRef:f,open:w,onOpenChange:b,onOpenToggle:v.useCallback(()=>b(j=>!j),[b]),hasCustomAnchor:p,onCustomAnchorAdd:v.useCallback(()=>x(!0),[]),onCustomAnchorRemove:v.useCallback(()=>x(!1),[]),modal:c,children:r})})};uA.displayName=ap;var hA="PopoverAnchor",hV=v.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=co(hA,r),o=Ku(r),{onCustomAnchorAdd:c,onCustomAnchorRemove:u}=a;return v.useEffect(()=>(c(),()=>u()),[c,u]),n.jsx(Mu,{...o,...s,ref:t})});hV.displayName=hA;var fA="PopoverTrigger",mA=v.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=co(fA,r),o=Ku(r),c=tt(t,a.triggerRef),u=n.jsx(Ve.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":wA(a.open),...s,ref:c,onClick:Re(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?u:n.jsx(Mu,{asChild:!0,...o,children:u})});mA.displayName=fA;var Sv="PopoverPortal",[fV,mV]=dA(Sv,{forceMount:void 0}),pA=e=>{const{__scopePopover:t,forceMount:r,children:s,container:a}=e,o=co(Sv,t);return n.jsx(fV,{scope:t,forceMount:r,children:n.jsx(Hr,{present:r||o.open,children:n.jsx(zc,{asChild:!0,container:a,children:s})})})};pA.displayName=Sv;var Mc="PopoverContent",gA=v.forwardRef((e,t)=>{const r=mV(Mc,e.__scopePopover),{forceMount:s=r.forceMount,...a}=e,o=co(Mc,e.__scopePopover);return n.jsx(Hr,{present:s||o.open,children:o.modal?n.jsx(gV,{...a,ref:t}):n.jsx(xV,{...a,ref:t})})});gA.displayName=Mc;var pV=Wi("PopoverContent.RemoveScroll"),gV=v.forwardRef((e,t)=>{const r=co(Mc,e.__scopePopover),s=v.useRef(null),a=tt(t,s),o=v.useRef(!1);return v.useEffect(()=>{const c=s.current;if(c)return $m(c)},[]),n.jsx(Uu,{as:pV,allowPinchZoom:!0,children:n.jsx(xA,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Re(e.onCloseAutoFocus,c=>{var u;c.preventDefault(),o.current||(u=r.triggerRef.current)==null||u.focus()}),onPointerDownOutside:Re(e.onPointerDownOutside,c=>{const u=c.detail.originalEvent,f=u.button===0&&u.ctrlKey===!0,p=u.button===2||f;o.current=p},{checkForDefaultPrevented:!1}),onFocusOutside:Re(e.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1})})})}),xV=v.forwardRef((e,t)=>{const r=co(Mc,e.__scopePopover),s=v.useRef(!1),a=v.useRef(!1);return n.jsx(xA,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var c,u;(c=e.onCloseAutoFocus)==null||c.call(e,o),o.defaultPrevented||(s.current||(u=r.triggerRef.current)==null||u.focus(),o.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:o=>{var f,p;(f=e.onInteractOutside)==null||f.call(e,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const c=o.target;((p=r.triggerRef.current)==null?void 0:p.contains(c))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),xA=v.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:c,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:p,onInteractOutside:x,...w}=e,b=co(Mc,r),j=Ku(r);return zm(),n.jsx(zu,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:o,children:n.jsx(ul,{asChild:!0,disableOutsidePointerEvents:c,onInteractOutside:x,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:p,onDismiss:()=>b.onOpenChange(!1),children:n.jsx(Cm,{"data-state":wA(b.open),role:"dialog",id:b.contentId,...j,...w,ref:t,style:{...w.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),vA="PopoverClose",vV=v.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=co(vA,r);return n.jsx(Ve.button,{type:"button",...s,ref:t,onClick:Re(e.onClick,()=>a.onOpenChange(!1))})});vV.displayName=vA;var wV="PopoverArrow",yV=v.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=Ku(r);return n.jsx(Em,{...a,...s,ref:t})});yV.displayName=wV;function wA(e){return e?"open":"closed"}var bV=uA,_V=mA,NV=pA,yA=gA;const jV=bV,CV=_V,bA=v.forwardRef(({className:e,align:t="center",sideOffset:r=4,...s},a)=>n.jsx(NV,{children:n.jsx(yA,{ref:a,align:t,sideOffset:r,className:Fe("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));bA.displayName=yA.displayName;var g2=1,EV=.9,SV=.8,AV=.17,Tg=.1,Ig=.999,kV=.9999,TV=.99,IV=/[\\\/_+.#"@\[\(\{&]/,RV=/[\\\/_+.#"@\[\(\{&]/g,PV=/[\s-]/,_A=/[\s-]/g;function v0(e,t,r,s,a,o,c){if(o===t.length)return a===e.length?g2:TV;var u=`${a},${o}`;if(c[u]!==void 0)return c[u];for(var f=s.charAt(o),p=r.indexOf(f,a),x=0,w,b,j,N;p>=0;)w=v0(e,t,r,s,p+1,o+1,c),w>x&&(p===a?w*=g2:IV.test(e.charAt(p-1))?(w*=SV,j=e.slice(a,p-1).match(RV),j&&a>0&&(w*=Math.pow(Ig,j.length))):PV.test(e.charAt(p-1))?(w*=EV,N=e.slice(a,p-1).match(_A),N&&a>0&&(w*=Math.pow(Ig,N.length))):(w*=AV,a>0&&(w*=Math.pow(Ig,p-a))),e.charAt(p)!==t.charAt(o)&&(w*=kV)),(w<Tg&&r.charAt(p-1)===s.charAt(o+1)||s.charAt(o+1)===s.charAt(o)&&r.charAt(p-1)!==s.charAt(o))&&(b=v0(e,t,r,s,p+1,o+2,c),b*Tg>w&&(w=b*Tg)),w>x&&(x=w),p=r.indexOf(f,p+1);return c[u]=x,x}function x2(e){return e.toLowerCase().replace(_A," ")}function OV(e,t,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,v0(e,t,x2(e),x2(t),0,0,{})}var wd='[cmdk-group=""]',Rg='[cmdk-group-items=""]',DV='[cmdk-group-heading=""]',NA='[cmdk-item=""]',v2=`${NA}:not([aria-disabled="true"])`,w0="cmdk-item-select",Bl="data-value",MV=(e,t,r)=>OV(e,t,r),jA=v.createContext(void 0),Yu=()=>v.useContext(jA),CA=v.createContext(void 0),Av=()=>v.useContext(CA),EA=v.createContext(void 0),SA=v.forwardRef((e,t)=>{let r=zl(()=>{var H,ee;return{search:"",value:(ee=(H=e.value)!=null?H:e.defaultValue)!=null?ee:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),s=zl(()=>new Set),a=zl(()=>new Map),o=zl(()=>new Map),c=zl(()=>new Set),u=AA(e),{label:f,children:p,value:x,onValueChange:w,filter:b,shouldFilter:j,loop:N,disablePointerSelection:C=!1,vimBindings:T=!0,...S}=e,E=hn(),_=hn(),k=hn(),D=v.useRef(null),L=GV();il(()=>{if(x!==void 0){let H=x.trim();r.current.value=H,R.emit()}},[x]),il(()=>{L(6,q)},[]);let R=v.useMemo(()=>({subscribe:H=>(c.current.add(H),()=>c.current.delete(H)),snapshot:()=>r.current,setState:(H,ee,X)=>{var te,se,ce,ge;if(!Object.is(r.current[H],ee)){if(r.current[H]=ee,H==="search")U(),F(),L(1,Y);else if(H==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let Te=document.getElementById(k);Te?Te.focus():(te=document.getElementById(E))==null||te.focus()}if(L(7,()=>{var Te;r.current.selectedItemId=(Te=re())==null?void 0:Te.id,R.emit()}),X||L(5,q),((se=u.current)==null?void 0:se.value)!==void 0){let Te=ee??"";(ge=(ce=u.current).onValueChange)==null||ge.call(ce,Te);return}}R.emit()}},emit:()=>{c.current.forEach(H=>H())}}),[]),M=v.useMemo(()=>({value:(H,ee,X)=>{var te;ee!==((te=o.current.get(H))==null?void 0:te.value)&&(o.current.set(H,{value:ee,keywords:X}),r.current.filtered.items.set(H,P(ee,X)),L(2,()=>{F(),R.emit()}))},item:(H,ee)=>(s.current.add(H),ee&&(a.current.has(ee)?a.current.get(ee).add(H):a.current.set(ee,new Set([H]))),L(3,()=>{U(),F(),r.current.value||Y(),R.emit()}),()=>{o.current.delete(H),s.current.delete(H),r.current.filtered.items.delete(H);let X=re();L(4,()=>{U(),(X==null?void 0:X.getAttribute("id"))===H&&Y(),R.emit()})}),group:H=>(a.current.has(H)||a.current.set(H,new Set),()=>{o.current.delete(H),a.current.delete(H)}),filter:()=>u.current.shouldFilter,label:f||e["aria-label"],getDisablePointerSelection:()=>u.current.disablePointerSelection,listId:E,inputId:k,labelId:_,listInnerRef:D}),[]);function P(H,ee){var X,te;let se=(te=(X=u.current)==null?void 0:X.filter)!=null?te:MV;return H?se(H,r.current.search,ee):0}function F(){if(!r.current.search||u.current.shouldFilter===!1)return;let H=r.current.filtered.items,ee=[];r.current.filtered.groups.forEach(te=>{let se=a.current.get(te),ce=0;se.forEach(ge=>{let Te=H.get(ge);ce=Math.max(Te,ce)}),ee.push([te,ce])});let X=D.current;W().sort((te,se)=>{var ce,ge;let Te=te.getAttribute("id"),be=se.getAttribute("id");return((ce=H.get(be))!=null?ce:0)-((ge=H.get(Te))!=null?ge:0)}).forEach(te=>{let se=te.closest(Rg);se?se.appendChild(te.parentElement===se?te:te.closest(`${Rg} > *`)):X.appendChild(te.parentElement===X?te:te.closest(`${Rg} > *`))}),ee.sort((te,se)=>se[1]-te[1]).forEach(te=>{var se;let ce=(se=D.current)==null?void 0:se.querySelector(`${wd}[${Bl}="${encodeURIComponent(te[0])}"]`);ce==null||ce.parentElement.appendChild(ce)})}function Y(){let H=W().find(X=>X.getAttribute("aria-disabled")!=="true"),ee=H==null?void 0:H.getAttribute(Bl);R.setState("value",ee||void 0)}function U(){var H,ee,X,te;if(!r.current.search||u.current.shouldFilter===!1){r.current.filtered.count=s.current.size;return}r.current.filtered.groups=new Set;let se=0;for(let ce of s.current){let ge=(ee=(H=o.current.get(ce))==null?void 0:H.value)!=null?ee:"",Te=(te=(X=o.current.get(ce))==null?void 0:X.keywords)!=null?te:[],be=P(ge,Te);r.current.filtered.items.set(ce,be),be>0&&se++}for(let[ce,ge]of a.current)for(let Te of ge)if(r.current.filtered.items.get(Te)>0){r.current.filtered.groups.add(ce);break}r.current.filtered.count=se}function q(){var H,ee,X;let te=re();te&&(((H=te.parentElement)==null?void 0:H.firstChild)===te&&((X=(ee=te.closest(wd))==null?void 0:ee.querySelector(DV))==null||X.scrollIntoView({block:"nearest"})),te.scrollIntoView({block:"nearest"}))}function re(){var H;return(H=D.current)==null?void 0:H.querySelector(`${NA}[aria-selected="true"]`)}function W(){var H;return Array.from(((H=D.current)==null?void 0:H.querySelectorAll(v2))||[])}function ne(H){let ee=W()[H];ee&&R.setState("value",ee.getAttribute(Bl))}function oe(H){var ee;let X=re(),te=W(),se=te.findIndex(ge=>ge===X),ce=te[se+H];(ee=u.current)!=null&&ee.loop&&(ce=se+H<0?te[te.length-1]:se+H===te.length?te[0]:te[se+H]),ce&&R.setState("value",ce.getAttribute(Bl))}function ae(H){let ee=re(),X=ee==null?void 0:ee.closest(wd),te;for(;X&&!te;)X=H>0?WV(X,wd):HV(X,wd),te=X==null?void 0:X.querySelector(v2);te?R.setState("value",te.getAttribute(Bl)):oe(H)}let J=()=>ne(W().length-1),he=H=>{H.preventDefault(),H.metaKey?J():H.altKey?ae(1):oe(1)},ye=H=>{H.preventDefault(),H.metaKey?ne(0):H.altKey?ae(-1):oe(-1)};return v.createElement(Ve.div,{ref:t,tabIndex:-1,...S,"cmdk-root":"",onKeyDown:H=>{var ee;(ee=S.onKeyDown)==null||ee.call(S,H);let X=H.nativeEvent.isComposing||H.keyCode===229;if(!(H.defaultPrevented||X))switch(H.key){case"n":case"j":{T&&H.ctrlKey&&he(H);break}case"ArrowDown":{he(H);break}case"p":case"k":{T&&H.ctrlKey&&ye(H);break}case"ArrowUp":{ye(H);break}case"Home":{H.preventDefault(),ne(0);break}case"End":{H.preventDefault(),J();break}case"Enter":{H.preventDefault();let te=re();if(te){let se=new Event(w0);te.dispatchEvent(se)}}}}},v.createElement("label",{"cmdk-label":"",htmlFor:M.inputId,id:M.labelId,style:KV},f),ip(e,H=>v.createElement(CA.Provider,{value:R},v.createElement(jA.Provider,{value:M},H))))}),LV=v.forwardRef((e,t)=>{var r,s;let a=hn(),o=v.useRef(null),c=v.useContext(EA),u=Yu(),f=AA(e),p=(s=(r=f.current)==null?void 0:r.forceMount)!=null?s:c==null?void 0:c.forceMount;il(()=>{if(!p)return u.item(a,c==null?void 0:c.id)},[p]);let x=kA(a,o,[e.value,e.children,o],e.keywords),w=Av(),b=to(L=>L.value&&L.value===x.current),j=to(L=>p||u.filter()===!1?!0:L.search?L.filtered.items.get(a)>0:!0);v.useEffect(()=>{let L=o.current;if(!(!L||e.disabled))return L.addEventListener(w0,N),()=>L.removeEventListener(w0,N)},[j,e.onSelect,e.disabled]);function N(){var L,R;C(),(R=(L=f.current).onSelect)==null||R.call(L,x.current)}function C(){w.setState("value",x.current,!0)}if(!j)return null;let{disabled:T,value:S,onSelect:E,forceMount:_,keywords:k,...D}=e;return v.createElement(Ve.div,{ref:Za(o,t),...D,id:a,"cmdk-item":"",role:"option","aria-disabled":!!T,"aria-selected":!!b,"data-disabled":!!T,"data-selected":!!b,onPointerMove:T||u.getDisablePointerSelection()?void 0:C,onClick:T?void 0:N},e.children)}),FV=v.forwardRef((e,t)=>{let{heading:r,children:s,forceMount:a,...o}=e,c=hn(),u=v.useRef(null),f=v.useRef(null),p=hn(),x=Yu(),w=to(j=>a||x.filter()===!1?!0:j.search?j.filtered.groups.has(c):!0);il(()=>x.group(c),[]),kA(c,u,[e.value,e.heading,f]);let b=v.useMemo(()=>({id:c,forceMount:a}),[a]);return v.createElement(Ve.div,{ref:Za(u,t),...o,"cmdk-group":"",role:"presentation",hidden:w?void 0:!0},r&&v.createElement("div",{ref:f,"cmdk-group-heading":"","aria-hidden":!0,id:p},r),ip(e,j=>v.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?p:void 0},v.createElement(EA.Provider,{value:b},j))))}),BV=v.forwardRef((e,t)=>{let{alwaysRender:r,...s}=e,a=v.useRef(null),o=to(c=>!c.search);return!r&&!o?null:v.createElement(Ve.div,{ref:Za(a,t),...s,"cmdk-separator":"",role:"separator"})}),zV=v.forwardRef((e,t)=>{let{onValueChange:r,...s}=e,a=e.value!=null,o=Av(),c=to(p=>p.search),u=to(p=>p.selectedItemId),f=Yu();return v.useEffect(()=>{e.value!=null&&o.setState("search",e.value)},[e.value]),v.createElement(Ve.input,{ref:t,...s,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":f.listId,"aria-labelledby":f.labelId,"aria-activedescendant":u,id:f.inputId,type:"text",value:a?e.value:c,onChange:p=>{a||o.setState("search",p.target.value),r==null||r(p.target.value)}})}),UV=v.forwardRef((e,t)=>{let{children:r,label:s="Suggestions",...a}=e,o=v.useRef(null),c=v.useRef(null),u=to(p=>p.selectedItemId),f=Yu();return v.useEffect(()=>{if(c.current&&o.current){let p=c.current,x=o.current,w,b=new ResizeObserver(()=>{w=requestAnimationFrame(()=>{let j=p.offsetHeight;x.style.setProperty("--cmdk-list-height",j.toFixed(1)+"px")})});return b.observe(p),()=>{cancelAnimationFrame(w),b.unobserve(p)}}},[]),v.createElement(Ve.div,{ref:Za(o,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":u,"aria-label":s,id:f.listId},ip(e,p=>v.createElement("div",{ref:Za(c,f.listInnerRef),"cmdk-list-sizer":""},p)))}),$V=v.forwardRef((e,t)=>{let{open:r,onOpenChange:s,overlayClassName:a,contentClassName:o,container:c,...u}=e;return v.createElement(rv,{open:r,onOpenChange:s},v.createElement(nv,{container:c},v.createElement(qm,{"cmdk-overlay":"",className:a}),v.createElement(Wm,{"aria-label":e.label,"cmdk-dialog":"",className:o},v.createElement(SA,{ref:t,...u}))))}),VV=v.forwardRef((e,t)=>to(r=>r.filtered.count===0)?v.createElement(Ve.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),qV=v.forwardRef((e,t)=>{let{progress:r,children:s,label:a="Loading...",...o}=e;return v.createElement(Ve.div,{ref:t,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},ip(e,c=>v.createElement("div",{"aria-hidden":!0},c)))}),Zn=Object.assign(SA,{List:UV,Item:LV,Input:zV,Group:FV,Separator:BV,Dialog:$V,Empty:VV,Loading:qV});function WV(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function HV(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function AA(e){let t=v.useRef(e);return il(()=>{t.current=e}),t}var il=typeof window>"u"?v.useEffect:v.useLayoutEffect;function zl(e){let t=v.useRef();return t.current===void 0&&(t.current=e()),t}function to(e){let t=Av(),r=()=>e(t.snapshot());return v.useSyncExternalStore(t.subscribe,r,r)}function kA(e,t,r,s=[]){let a=v.useRef(),o=Yu();return il(()=>{var c;let u=(()=>{var p;for(let x of r){if(typeof x=="string")return x.trim();if(typeof x=="object"&&"current"in x)return x.current?(p=x.current.textContent)==null?void 0:p.trim():a.current}})(),f=s.map(p=>p.trim());o.value(e,u,f),(c=t.current)==null||c.setAttribute(Bl,u),a.current=u}),a}var GV=()=>{let[e,t]=v.useState(),r=zl(()=>new Map);return il(()=>{r.current.forEach(s=>s()),r.current=new Map},[e]),(s,a)=>{r.current.set(s,a),t({})}};function XV(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function ip({asChild:e,children:t},r){return e&&v.isValidElement(t)?v.cloneElement(XV(t),{ref:t.ref},r(t.props.children)):r(t)}var KV={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const TA=v.forwardRef(({className:e,...t},r)=>n.jsx(Zn,{ref:r,className:Fe("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));TA.displayName=Zn.displayName;const IA=v.forwardRef(({className:e,...t},r)=>n.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[n.jsx(iu,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),n.jsx(Zn.Input,{ref:r,className:Fe("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));IA.displayName=Zn.Input.displayName;const YV=v.forwardRef(({className:e,...t},r)=>n.jsx(Zn.List,{ref:r,className:Fe("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));YV.displayName=Zn.List.displayName;const RA=v.forwardRef((e,t)=>n.jsx(Zn.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));RA.displayName=Zn.Empty.displayName;const PA=v.forwardRef(({className:e,...t},r)=>n.jsx(Zn.Group,{ref:r,className:Fe("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));PA.displayName=Zn.Group.displayName;const QV=v.forwardRef(({className:e,...t},r)=>n.jsx(Zn.Separator,{ref:r,className:Fe("-mx-1 h-px bg-border",e),...t}));QV.displayName=Zn.Separator.displayName;const OA=v.forwardRef(({className:e,...t},r)=>n.jsx(Zn.Item,{ref:r,className:Fe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));OA.displayName=Zn.Item.displayName;function op({value:e,onChange:t,placeholder:r="Selecione categorias..."}){const s=e||[],a=c=>{s.includes(c)?t(s.filter(u=>u!==c)):t([...s,c])},o=c=>{t(s.filter(u=>u!==c))};return n.jsxs("div",{className:"space-y-2",children:[n.jsxs(jV,{children:[n.jsx(CV,{asChild:!0,children:n.jsxs(K,{variant:"outline",role:"combobox",className:"w-full justify-between",children:[s.length>0?n.jsxs("span",{children:[s.length," categoria",s.length>1?"s":""," selecionada",s.length>1?"s":""]}):n.jsx("span",{className:"text-muted-foreground",children:r}),n.jsx(I8,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),n.jsx(bA,{className:"w-full p-0",align:"start",children:n.jsxs(TA,{children:[n.jsx(IA,{placeholder:"Buscar categoria..."}),n.jsx(RA,{children:"Nenhuma categoria encontrada."}),n.jsx(PA,{className:"max-h-64 overflow-auto",children:o0.map(c=>n.jsxs(OA,{onSelect:()=>a(c.value),children:[n.jsx(Yn,{className:Fe("mr-2 h-4 w-4",s.includes(c.value)?"opacity-100":"opacity-0")}),c.label]},c.value))})]})})]}),s.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(c=>{const u=o0.find(f=>f.value===c);return u?n.jsxs(ct,{variant:"secondary",className:"gap-1",children:[u.label,n.jsx("button",{type:"button",onClick:()=>o(c),className:"ml-1 hover:bg-muted rounded-full",children:n.jsx(sr,{className:"h-3 w-3"})})]},c):null})})]})}function DA(){const[e,t]=v.useState({isNativeApp:!1,isWebBrowser:!0,isMobileWeb:!1,platform:"web"});return v.useEffect(()=>{const r=Dc.isNativePlatform(),s=Dc.getPlatform(),a=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);t({isNativeApp:r,isWebBrowser:!r,isMobileWeb:!r&&a,platform:s})},[]),e}function ZV({featureName:e="venda de ingressos pela plataforma",description:t="Esta funcionalidade está disponível apenas através do navegador web. Para continuar, acesse pelo computador ou abra este link no navegador do seu celular."}){const r=()=>{const a=window.location.href;navigator.clipboard.writeText(a).then(()=>{G.success("Link copiado! Cole no navegador para continuar.")}).catch(()=>{G.error("Erro ao copiar link")})},s=()=>{const a=window.location.href;window.open(a,"_blank")};return n.jsxs($o,{className:"border-amber-500/50 bg-amber-500/10",children:[n.jsx(qn,{className:"h-4 w-4 text-amber-500"}),n.jsx(cA,{className:"text-amber-500 font-semibold",children:"Recurso disponível apenas no navegador"}),n.jsxs(Vo,{className:"space-y-3 mt-2",children:[n.jsxs("p",{className:"text-sm text-foreground/80",children:["A funcionalidade de ",n.jsx("strong",{children:e})," requer acesso através do navegador web."]}),n.jsx("p",{className:"text-sm text-foreground/80",children:t}),n.jsxs("div",{className:"flex flex-col gap-2 mt-4",children:[n.jsxs(K,{variant:"outline",size:"sm",onClick:r,className:"w-full justify-start gap-2",children:[n.jsx(Cj,{className:"h-4 w-4"}),"Copiar link desta página"]}),n.jsxs(K,{variant:"outline",size:"sm",onClick:s,className:"w-full justify-start gap-2",children:[n.jsx(Vr,{className:"h-4 w-4"}),"Abrir no navegador"]})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"💡 Dica: Você pode criar eventos gratuitos normalmente pelo app. A restrição aplica-se apenas à venda de ingressos."})]})]})}function y0({onBack:e,eventId:t}){const{createEvent:r,organizerData:s}=Oa(),{profile:a,updateProfile:o}=Bm(),{isAdmin:c}=zs(),{isNativeApp:u}=DA(),[f,p]=v.useState(!1),[x,w]=v.useState({title:"",description:"",date:"",time:"",endDate:"",endTime:"",location:"",address:"",locationLink:"",maxAttendees:"",ticketPrice:"",ticketLink:""}),[b,j]=v.useState([]),[N,C]=v.useState(null),[T,S]=v.useState(null),[E,_]=v.useState(!1),[k,D]=v.useState([]),[L,R]=v.useState(!1),[M,P]=v.useState(!1),[F,Y]=v.useState(!1),[U,q]=v.useState(null),re=_t(),[W,ne]=v.useState(""),[oe,ae]=v.useState((a==null?void 0:a.notes)||""),[J,he]=v.useState(!0),[ye,H]=v.useState("presencial"),[ee,X]=v.useState("free"),[te,se]=v.useState([]),[ce,ge]=v.useState({feePayer:"buyer",platformFeePercentage:5,paymentProcessingFeePercentage:3.99,paymentProcessingFeeFixed:.39,cancellationPolicy:"",acceptsPix:!0,acceptsCreditCard:!0,acceptsDebitCard:!0,maxInstallments:12}),[Te,be]=v.useState(!1),[Se,Me]=v.useState(!1),[ue,We]=v.useState(""),[Ee,Je]=v.useState(""),[_e,ze]=v.useState("corrente"),[Ge,Vt]=v.useState(""),[pe,Ze]=v.useState(""),[it,ot]=v.useState(""),[ar,Nt]=v.useState("");v.useEffect(()=>{(async()=>{var st;if(t){p(!0);try{const{data:dt,error:ft}=await $.from("events").select("*").eq("id",t).single();if(ft)throw ft;if(dt){const Ie=new Date(dt.event_date),Dt=Ie.toISOString().split("T")[0],mt=Ie.toTimeString().slice(0,5);let Pt="",Pn="";if(dt.end_date){const Us=new Date(dt.end_date);Pt=Us.toISOString().split("T")[0],Pn=Us.toTimeString().slice(0,5)}w({title:dt.title||"",description:dt.description||"",date:Dt,time:mt,endDate:Pt,endTime:Pn,location:dt.location||"",address:dt.is_live?"":dt.location||"",locationLink:dt.location_link||"",maxAttendees:((st=dt.max_attendees)==null?void 0:st.toString())||"",ticketPrice:"",ticketLink:""}),j(dt.category||[]),C(dt.image_url||null),H(dt.is_live?"live":"presencial"),_(dt.requires_registration||!1),dt.interests&&dt.interests.length>0&&ne(dt.interests[0])}}catch(dt){console.error("Error loading event:",dt),G.error("Erro ao carregar evento")}}})()},[t]);const Sr=Ae=>{var dt;const st=(dt=Ae.target.files)==null?void 0:dt[0];if(st){S(st);const ft=new FileReader;ft.onload=Ie=>{var Dt;C((Dt=Ie.target)==null?void 0:Dt.result)},ft.readAsDataURL(st)}},At=(Ae,st)=>{w(dt=>({...dt,[Ae]:st}))},$e=async Ae=>{if(Ae.preventDefault(),!x.title||!x.date||!x.time||!x.endDate||!x.endTime){G.error("Preencha todos os campos obrigatórios");return}if(ye==="presencial"&&!x.address){G.error("Preencha o endereço do evento");return}if(ye==="live"&&!x.locationLink){G.error("Preencha o link da transmissão");return}if(ee==="platform"){if(u){G.error("Venda pela plataforma disponível apenas no navegador"),Me(!0);return}if(s!=null&&s.id){const{data:st}=await $.from("organizers").select("stripe_account_id, stripe_charges_enabled").eq("id",s.id).maybeSingle();if(!(st!=null&&st.stripe_account_id)||!(st!=null&&st.stripe_charges_enabled)){G.error("Conecte sua conta Stripe antes de vender ingressos pela plataforma");return}}if(te.length===0){G.error("Configure pelo menos um tipo de ingresso");return}if(!Te){G.error("Você precisa aceitar os termos e condições");return}if(!ue&&(!Ee||!Ge||!pe||!it||!ar)){G.error("Preencha sua chave PIX ou dados bancários completos para receber os pagamentos");return}}if(ee==="external"&&!x.ticketLink){G.error("Preencha o link de compra do ingresso");return}try{P(!0);let st=null;if(T){const Ie=T.name.split(".").pop(),Dt=`events/${Date.now()}.${Ie}`,{error:mt}=await $.storage.from("user-uploads").upload(Dt,T);if(mt)throw mt;const{data:{publicUrl:Pt}}=$.storage.from("user-uploads").getPublicUrl(Dt);st=Pt}const dt=new Date(`${x.date}T${x.time}`),ft=new Date(`${x.endDate}T${x.endTime}`);if(oe!==(a==null?void 0:a.notes)&&await o({notes:oe}),f&&t){const{error:Ie}=await $.from("events").update({title:x.title,description:x.description,event_date:dt.toISOString(),end_date:ft.toISOString(),location:ye==="live"?"Online":x.address,location_link:x.locationLink||null,image_url:st||N,max_attendees:x.maxAttendees?parseInt(x.maxAttendees):null,interests:W?[W]:[],is_live:ye==="live",requires_registration:E,category:b.length>0?b:null,ticket_price:x.ticketPrice?parseFloat(x.ticketPrice):0,ticket_link:x.ticketLink||null,updated_at:new Date().toISOString()}).eq("id",t);if(Ie)throw Ie;G.success("Evento atualizado com sucesso!")}else{const Ie={title:x.title,description:x.description,event_date:dt.toISOString(),end_date:ft.toISOString(),location:ye==="live"?"Online":x.address,location_link:x.locationLink||null,image_url:st,max_attendees:x.maxAttendees?parseInt(x.maxAttendees):null,interests:W?[W]:[],is_live:ye==="live",status:"upcoming",requires_registration:E,category:b.length>0?b:null,form_fields:E?k:[],ticket_price:ee==="external"&&x.ticketPrice?parseFloat(x.ticketPrice):0,ticket_link:ee==="external"&&x.ticketLink||null,has_platform_tickets:ee==="platform",...ee==="platform"&&{pix_key:ue||null,bank_name:Ee||null,bank_account_type:_e||null,bank_agency:Ge||null,bank_account:pe||null,bank_account_holder:it||null,bank_document:ar||null}};await r(Ie);const{data:{user:Dt}}=await $.auth.getUser();if(!Dt)throw new Error("User not authenticated");const{data:mt}=await $.from("organizers").select("id").eq("user_id",Dt.id).single();if(!mt)throw new Error("Organizer not found");const{data:Pt}=await $.from("events").select("id").eq("organizer_id",mt.id).eq("title",x.title).order("created_at",{ascending:!1}).limit(1).single(),Pn=mn=>mn.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),Us=(s==null?void 0:s.username)||(s!=null&&s.page_title?Pn(s.page_title):"")||(a!=null&&a.display_name?Pn(a.display_name):"organizador"),ho=Pn(x.title),kt=`${window.location.origin}/${Us}/${ho}`;if(q({id:Pt.id,title:x.title,shareUrl:kt}),Y(!0),ee==="platform"&&Pt){const{error:mn}=await $.from("event_ticket_settings").insert({event_id:Pt.id,accepts_platform_payment:!0,fee_payer:ce.feePayer,platform_fee_percentage:ce.platformFeePercentage,payment_processing_fee_percentage:ce.paymentProcessingFeePercentage,payment_processing_fee_fixed:ce.paymentProcessingFeeFixed,cancellation_policy:ce.cancellationPolicy,accepts_pix:ce.acceptsPix,accepts_credit_card:ce.acceptsCreditCard,accepts_debit_card:ce.acceptsDebitCard,max_installments:ce.maxInstallments,terms_accepted:Te,terms_accepted_at:new Date().toISOString()});if(mn)throw mn;const Jn=te.map((Xe,Ot)=>({event_id:Pt.id,name:Xe.name,description:Xe.description,price:Xe.price,quantity:Xe.quantity,sales_start_date:Xe.salesStartDate&&Xe.salesStartTime?new Date(`${Xe.salesStartDate}T${Xe.salesStartTime}`).toISOString():null,sales_end_date:Xe.salesEndDate&&Xe.salesEndTime?new Date(`${Xe.salesEndDate}T${Xe.salesEndTime}`).toISOString():null,min_quantity_per_purchase:Xe.minQuantity,max_quantity_per_purchase:Xe.maxQuantity,sort_order:Ot})),{error:fo}=await $.from("ticket_types").insert(Jn);if(fo)throw fo}}f&&e()}catch(st){console.error("Error saving event:",st),G.error(f?"Erro ao atualizar evento":"Erro ao criar evento")}finally{P(!1)}};return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b border-border",children:n.jsxs("div",{className:"flex items-center justify-between p-4 max-w-md mx-auto",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:f?"Editar Evento":"Criar Evento"}),n.jsx("div",{className:"w-10"})]})}),n.jsx("div",{className:"p-4 max-w-md mx-auto pb-20",children:n.jsxs("form",{onSubmit:$e,className:"space-y-6",children:[n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsx(He,{className:"text-sm",children:"Arte do Evento"})}),n.jsx(Ce,{children:n.jsx("div",{className:"relative",children:N?n.jsxs("div",{className:"relative h-48 rounded-lg overflow-hidden",children:[n.jsx("img",{src:N,alt:"Preview do evento",className:"w-full h-full object-cover"}),n.jsx(K,{type:"button",variant:"secondary",size:"sm",className:"absolute top-2 right-2",onClick:()=>C(null),children:"Remover"})]}):n.jsxs("label",{className:"flex flex-col items-center justify-center h-48 border-2 border-dashed border-border rounded-lg cursor-pointer hover:border-primary/50 transition-colors",children:[n.jsx(Fs,{className:"h-8 w-8 text-muted-foreground mb-2"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"Clique para adicionar uma imagem"}),n.jsx("input",{type:"file",accept:"image/*",onChange:Sr,className:"hidden"})]})})})]}),n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsx(He,{className:"text-sm",children:"Informações Básicas"})}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"title",children:"Nome do Evento"}),n.jsx(we,{id:"title",placeholder:"Digite o nome do evento",value:x.title,onChange:Ae=>At("title",Ae.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"description",children:"Descrição"}),n.jsx(kn,{id:"description",placeholder:"Descreva seu evento...",value:x.description,onChange:Ae=>At("description",Ae.target.value),rows:3})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"category",children:"Categorias"}),n.jsx(op,{value:b,onChange:j,placeholder:"Selecione uma ou mais categorias"})]})]})]}),n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsx(He,{className:"text-sm",children:"Tipo de Evento"})}),n.jsx(Ce,{children:n.jsxs(Ui,{value:ye,onValueChange:Ae=>H(Ae),children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(on,{value:"presencial",id:"presencial"}),n.jsx(de,{htmlFor:"presencial",className:"cursor-pointer",children:"📍 Evento Presencial"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(on,{value:"live",id:"live"}),n.jsx(de,{htmlFor:"live",className:"cursor-pointer",children:"🔴 Evento Live (Online)"})]})]})})]}),n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsxs(He,{className:"text-sm flex items-center gap-2",children:[n.jsx(Et,{className:"h-4 w-4"}),"Data e Hora"]})}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(de,{className:"text-sm font-medium mb-2 block",children:"Início do Evento"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"date",className:"text-xs text-muted-foreground",children:"Data"}),n.jsx(we,{id:"date",type:"date",value:x.date,onChange:Ae=>At("date",Ae.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"time",className:"text-xs text-muted-foreground",children:"Horário"}),n.jsx(we,{id:"time",type:"time",value:x.time,onChange:Ae=>At("time",Ae.target.value),required:!0})]})]})]}),n.jsxs("div",{className:"pt-2 border-t",children:[n.jsx(de,{className:"text-sm font-medium mb-2 block",children:"Encerramento do Evento *"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"endDate",className:"text-xs text-muted-foreground",children:"Data"}),n.jsx(we,{id:"endDate",type:"date",value:x.endDate,onChange:Ae=>At("endDate",Ae.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"endTime",className:"text-xs text-muted-foreground",children:"Horário"}),n.jsx(we,{id:"endTime",type:"time",value:x.endTime,onChange:Ae=>At("endTime",Ae.target.value),required:!0})]})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Data e hora em que o evento será encerrado automaticamente"})]})]})]}),n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsxs(He,{className:"text-sm flex items-center gap-2",children:[n.jsx(Rt,{className:"h-4 w-4"}),ye==="live"?"Link da Transmissão":"Localização"]})}),n.jsx(Ce,{className:"space-y-4",children:ye==="presencial"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"address",children:"Endereço Completo"}),n.jsx(we,{id:"address",placeholder:"Rua, número, bairro, cidade...",value:x.address,onChange:Ae=>At("address",Ae.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"locationLink",children:"Link do Endereço"}),n.jsx(we,{id:"locationLink",type:"url",placeholder:"https://maps.google.com/...",value:x.locationLink,onChange:Ae=>At("locationLink",Ae.target.value)}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Cole o link do Google Maps ou Waze"})]})]}):n.jsxs("div",{children:[n.jsx(de,{htmlFor:"locationLink",children:"Link da Live"}),n.jsx(we,{id:"locationLink",type:"url",placeholder:"https://youtube.com/live/... ou https://twitch.tv/...",value:x.locationLink,onChange:Ae=>At("locationLink",Ae.target.value),required:!0}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Cole o link da transmissão (YouTube, Twitch, etc)"})]})})]}),n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsx(He,{className:"text-sm",children:"Capacidade e Ingressos"})}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs(de,{htmlFor:"maxAttendees",className:"flex items-center gap-1",children:[n.jsx(er,{className:"h-3 w-3"}),"Capacidade Máxima"]}),n.jsx(we,{id:"maxAttendees",type:"number",placeholder:"300",value:x.maxAttendees,onChange:Ae=>At("maxAttendees",Ae.target.value)})]}),n.jsx(la,{}),n.jsxs("div",{children:[n.jsx(de,{className:"mb-2 block",children:"Tipo de Ingresso"}),n.jsxs(Ui,{value:ee,onValueChange:Ae=>{if(Ae==="platform"&&u){Me(!0),G.info("Esta opção está disponível apenas no navegador");return}X(Ae),Me(!1)},children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(on,{value:"free",id:"free"}),n.jsx(de,{htmlFor:"free",className:"cursor-pointer",children:"🎫 Evento Gratuito"})]}),c&&n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(on,{value:"external",id:"external"}),n.jsx(de,{htmlFor:"external",className:"cursor-pointer",children:"🔗 Link Externo (Sympla, Eventbrite, etc)"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(on,{value:"platform",id:"platform",disabled:u}),n.jsxs(de,{htmlFor:"platform",className:u?"cursor-not-allowed opacity-50":"cursor-pointer",children:["💳 Vender pela plataforma ",u&&"🔒"]})]})]}),u&&n.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"💡 A venda pela plataforma está disponível apenas no navegador web"})]}),Se&&u&&n.jsx("div",{className:"pt-4",children:n.jsx(ZV,{})}),ee==="external"&&c&&n.jsxs("div",{className:"pt-2 border-t",children:[n.jsx(de,{htmlFor:"ticketLink",children:"Link de Compra do Ingresso"}),n.jsx(we,{id:"ticketLink",type:"url",placeholder:"https://www.sympla.com.br/...",value:x.ticketLink,onChange:Ae=>At("ticketLink",Ae.target.value)}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Cole o link onde os participantes podem comprar o ingresso"})]})]})]}),ee==="platform"&&n.jsxs(Ne,{children:[n.jsxs(qe,{children:[n.jsx(He,{className:"text-sm",children:"Dados para Recebimento"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Informe seus dados para receber os valores das vendas"})]}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsx("div",{className:"p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:n.jsx("p",{className:"text-xs text-blue-400 font-medium",children:"💰 Os valores serão transferidos em até 3 dias úteis após a finalização do evento"})}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"pixKey",children:"Chave PIX"}),n.jsx(we,{id:"pixKey",placeholder:"Digite sua chave PIX (CPF, CNPJ, email, telefone ou chave aleatória)",value:ue,onChange:Ae=>We(Ae.target.value)}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Recomendado: mais rápido e prático"})]}),n.jsx(la,{}),n.jsx("p",{className:"text-sm font-medium",children:"Ou informe seus dados bancários"}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"bankName",children:"Banco"}),n.jsx(we,{id:"bankName",placeholder:"Ex: Banco do Brasil, Nubank, Itaú...",value:Ee,onChange:Ae=>Je(Ae.target.value)})]}),n.jsxs("div",{children:[n.jsx(de,{children:"Tipo de Conta"}),n.jsxs(Ui,{value:_e,onValueChange:Ae=>ze(Ae),children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(on,{value:"corrente",id:"corrente"}),n.jsx(de,{htmlFor:"corrente",className:"cursor-pointer",children:"Conta Corrente"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(on,{value:"poupanca",id:"poupanca"}),n.jsx(de,{htmlFor:"poupanca",className:"cursor-pointer",children:"Conta Poupança"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"bankAgency",children:"Agência"}),n.jsx(we,{id:"bankAgency",placeholder:"0001",value:Ge,onChange:Ae=>Vt(Ae.target.value)})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"bankAccount",children:"Conta"}),n.jsx(we,{id:"bankAccount",placeholder:"12345-6",value:pe,onChange:Ae=>Ze(Ae.target.value)})]})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"bankAccountHolder",children:"Titular da Conta"}),n.jsx(we,{id:"bankAccountHolder",placeholder:"Nome completo do titular",value:it,onChange:Ae=>ot(Ae.target.value)})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"bankDocument",children:"CPF/CNPJ do Titular"}),n.jsx(we,{id:"bankDocument",placeholder:"000.000.000-00",value:ar,onChange:Ae=>Nt(Ae.target.value)})]})]})]}),ee==="platform"&&n.jsxs(Ne,{children:[n.jsxs(qe,{children:[n.jsx(He,{className:"text-sm",children:"Configuração de Venda"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Configure os tipos de ingressos, preços e formas de pagamento"})]}),n.jsx(Ce,{children:n.jsx(cV,{ticketTypes:te,ticketSettings:ce,onTicketTypesChange:se,onTicketSettingsChange:ge,termsAccepted:Te,onTermsAccepted:be,organizerId:(s==null?void 0:s.id)||"",eventId:t})})]}),n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsxs(He,{className:"text-sm flex items-center gap-2",children:[n.jsx(Sc,{className:"h-4 w-4"}),"Formulário de Cadastro"]})}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(de,{children:"Exigir cadastro para participar"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Participantes precisarão se cadastrar antes do evento"})]}),n.jsx(Tr,{checked:E,onCheckedChange:_})]}),E&&n.jsxs(K,{type:"button",variant:"outline",className:"w-full",onClick:()=>R(!0),children:[n.jsx(zo,{className:"h-4 w-4 mr-2"}),"Configurar Campos do Formulário ",k.length>0&&`(${k.length} campos)`]})]})]}),n.jsx(lA,{open:L,onOpenChange:R,fields:k,onSave:D}),U&&n.jsx(dV,{open:F,onOpenChange:Y,eventId:U.id,eventTitle:U.title,shareUrl:U.shareUrl,onViewEvent:()=>{Y(!1),re(`/e/${U.id}`)}}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(K,{type:"submit",className:"w-full btn-glow",disabled:M,children:M?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Criando Evento..."]}):"Criar Evento"}),n.jsx(K,{type:"button",variant:"outline",className:"w-full",onClick:e,children:"Cancelar"})]})]})})]})}function kv({onBack:e,eventId:t}){const[r,s]=v.useState([]),[a,o]=v.useState(!0),[c,u]=v.useState(""),[f,p]=v.useState(null),[x,w]=v.useState(null),{user:b}=bt();v.useEffect(()=>{(async()=>{if(b)try{o(!0);let E=$.from("event_registrations").select(`
            id,
            user_id,
            user_name,
            user_email,
            user_phone,
            status,
            created_at,
            registration_data,
            event:events!inner(
              id,
              title,
              event_date,
              location,
              form_fields,
              organizer:organizers!inner(
                user_id
              )
            )
          `).eq("event.organizer.user_id",b.id);t&&(E=E.eq("event_id",t));const{data:_,error:k}=await E.order("created_at",{ascending:!1});if(k){console.error("Error fetching registrations:",k),G.error("Erro ao carregar cadastros");return}const D=(_==null?void 0:_.map(M=>M.user_id))||[],{data:L}=await $.from("profiles").select("user_id, avatar_url").in("user_id",D),R=new Map((L==null?void 0:L.map(M=>[M.user_id,M.avatar_url]))||[]);s((_==null?void 0:_.map(M=>({...M,user_avatar:R.get(M.user_id),registration_data:M.registration_data||{},event:{...M.event,form_fields:M.event.form_fields||[]}})))||[])}catch(E){console.error("Error:",E),G.error("Erro ao carregar cadastros")}finally{o(!1)}})()},[b,t]);const j=r.filter(S=>S.user_name.toLowerCase().includes(c.toLowerCase())||S.user_email.toLowerCase().includes(c.toLowerCase())||S.event.title.toLowerCase().includes(c.toLowerCase())),N=S=>{const E={confirmed:"bg-green-500/20 text-green-400",pending:"bg-yellow-500/20 text-yellow-400",cancelled:"bg-red-500/20 text-red-400"};return E[S]||E.confirmed},C=(S,E)=>{if(typeof E=="string"&&E.startsWith("data:")){const _=document.createElement("a");_.href=E,_.download=`${S}.${E.split(";")[0].split("/")[1]}`,document.body.appendChild(_),_.click(),document.body.removeChild(_),G.success("Download iniciado")}else G.error("Arquivo não disponível para download")},T=async S=>{try{const{error:E}=await $.from("event_registrations").delete().eq("id",S);if(E){console.error("Error deleting registration:",E),G.error("Erro ao excluir cadastro");return}s(_=>_.filter(k=>k.id!==S)),p(null),w(null),G.success("Cadastro excluído com sucesso. O usuário pode se cadastrar novamente.")}catch(E){console.error("Error:",E),G.error("Erro ao excluir cadastro")}};return a?n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsxs("div",{className:"flex items-center gap-4 p-4 border-b border-border bg-surface/50 backdrop-blur-sm sticky top-0 z-10",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Cadastros dos Eventos"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando..."})]})]}),n.jsx("div",{className:"flex items-center justify-center p-8",children:n.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})})]}):n.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[n.jsxs("div",{className:"flex items-center gap-4 p-4 border-b border-border bg-surface/50 backdrop-blur-sm sticky top-0 z-10",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Cadastros dos Eventos"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[j.length," cadastro(s) encontrado(s)"]})]})]}),n.jsxs("div",{className:"p-4 max-w-md mx-auto",children:[n.jsxs("div",{className:"relative mb-4",children:[n.jsx(iu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(we,{placeholder:"Buscar por nome, email ou evento...",value:c,onChange:S=>u(S.target.value),className:"pl-10"})]}),j.length>0?n.jsx("div",{className:"space-y-2",children:j.map(S=>n.jsx(Ne,{className:"cursor-pointer hover:bg-accent/50 transition-colors",onClick:()=>p(S),children:n.jsx(Ce,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs(Ut,{className:"h-12 w-12",children:[n.jsx(Kt,{src:S.user_avatar}),n.jsx($t,{children:S.user_name.charAt(0).toUpperCase()})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium text-foreground truncate",children:S.user_name}),n.jsx("p",{className:"text-sm text-muted-foreground truncate",children:S.event.title})]}),n.jsx(Ru,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"})]})})},S.id))}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(er,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:c?"Nenhum cadastro encontrado":"Nenhum cadastro ainda"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:c?"Tente buscar por outro termo":"Os cadastros dos seus eventos aparecerão aqui"})]})]}),n.jsx(zt,{open:!!f,onOpenChange:S=>!S&&p(null),children:n.jsx(Ft,{className:"max-w-md max-h-[80vh] overflow-y-auto",children:f&&n.jsxs(n.Fragment,{children:[n.jsx(xr,{children:n.jsx(vr,{children:"Detalhes do Cadastro"})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b",children:[n.jsxs(Ut,{className:"h-16 w-16",children:[n.jsx(Kt,{src:f.user_avatar}),n.jsx($t,{className:"text-lg",children:f.user_name.charAt(0).toUpperCase()})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-lg",children:f.user_name}),n.jsx(ct,{className:N(f.status),children:f.status==="confirmed"?"Confirmado":f.status==="pending"?"Pendente":"Cancelado"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Pu,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{children:f.user_email})]}),f.user_phone&&n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Uc,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{children:f.user_phone})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Et,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("span",{children:["Evento: ",new Date(f.event.event_date).toLocaleDateString("pt-BR")]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Rt,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{children:f.event.location})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(er,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("span",{children:["Cadastrado em: ",new Date(f.created_at).toLocaleDateString("pt-BR")]})]})]}),f.registration_data&&Object.keys(f.registration_data).length>0&&n.jsxs("div",{className:"pt-4 border-t space-y-3",children:[n.jsx("h4",{className:"font-semibold text-sm",children:"Dados Personalizados"}),Object.entries(f.registration_data).map(([S,E])=>{const _=typeof E=="string"&&E.startsWith("data:image/"),k=typeof E=="string"&&E.startsWith("data:");return n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm font-medium",children:S}),_?n.jsxs("div",{className:"space-y-2",children:[n.jsx("img",{src:E,alt:S,className:"w-full h-auto rounded border max-h-64 object-contain"}),n.jsxs(K,{variant:"outline",size:"sm",onClick:()=>C(S,E),className:"w-full",children:[n.jsx(Ko,{className:"h-4 w-4 mr-2"}),"Baixar Imagem"]})]}):k?n.jsxs(K,{variant:"outline",size:"sm",onClick:()=>C(S,E),className:"w-full",children:[n.jsx(Ko,{className:"h-4 w-4 mr-2"}),"Baixar Arquivo"]}):Array.isArray(E)?n.jsx("p",{className:"text-sm text-muted-foreground",children:E.join(", ")}):n.jsx("p",{className:"text-sm text-muted-foreground",children:String(E)})]},S)})]}),n.jsxs("div",{className:"pt-4 border-t",children:[n.jsxs(K,{variant:"destructive",className:"w-full",onClick:()=>w(f.id),children:[n.jsx(Kn,{className:"h-4 w-4 mr-2"}),"Excluir Cadastro"]}),n.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:"Ao excluir, o usuário poderá se cadastrar novamente"})]})]})]})})}),n.jsx(el,{open:!!x,onOpenChange:S=>!S&&w(null),children:n.jsxs(Qi,{children:[n.jsxs(tl,{children:[n.jsx(rl,{children:"Excluir Cadastro?"}),n.jsx(nl,{children:"Esta ação não pode ser desfeita. O cadastro será permanentemente excluído e o usuário poderá se cadastrar novamente no evento."})]}),n.jsxs(Zi,{children:[n.jsx(eo,{children:"Cancelar"}),n.jsx(Ji,{onClick:()=>x&&T(x),className:"bg-destructive hover:bg-destructive/90",children:"Excluir"})]})]})})]})}function Tv({onBack:e,eventId:t}){const[r,s]=v.useState([]),[a,o]=v.useState(!0),{user:c}=bt();return v.useEffect(()=>{(async()=>{if(c)try{o(!0);let f=$.from("event_registrations").select("id, user_name, user_email, created_at, event:events!inner(id, organizer:organizers!inner(user_id))").eq("status","confirmed").eq("event.organizer.user_id",c.id);t&&(f=f.eq("event_id",t));const{data:p,error:x}=await f.order("created_at",{ascending:!1});if(x){console.error("Error fetching attendances:",x),G.error("Erro ao carregar presenças");return}const w=(p||[]).map(b=>({id:b.id,user_name:b.user_name,user_email:b.user_email,created_at:b.created_at}));s(w)}catch(f){console.error(f),G.error("Erro ao carregar presenças")}finally{o(!1)}})()},[c,t]),a?n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsxs("div",{className:"flex items-center gap-4 p-4 border-b border-border bg-surface/50 backdrop-blur-sm sticky top-0 z-10",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Presenças Confirmadas"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando..."})]})]}),n.jsx("div",{className:"flex items-center justify-center p-8",children:n.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})})]}):n.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[n.jsxs("div",{className:"flex items-center gap-4 p-4 border-b border-border bg-surface/50 backdrop-blur-sm sticky top-0 z-10",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Presenças Confirmadas"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.length," presença(s) confirmada(s)"]})]})]}),n.jsx("div",{className:"p-4 max-w-md mx-auto",children:r.length>0?n.jsx("div",{className:"space-y-4",children:r.map(u=>n.jsxs(Ne,{children:[n.jsx(qe,{className:"pb-2",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs(He,{className:"text-base flex items-center gap-2",children:[n.jsx(ms,{className:"h-4 w-4"}),u.user_name]}),n.jsx(ct,{className:"bg-primary/10 text-primary border-primary/20",children:"Confirmado"})]})}),n.jsx(Ce,{children:n.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[n.jsx("div",{children:u.user_email}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"h-3 w-3"}),"Confirmado em: ",new Date(u.created_at).toLocaleDateString("pt-BR")]})]})})]},u.id))}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(er,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Nenhuma presença confirmada ainda"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Assim que alguém confirmar presença, aparecerá aqui."})]})})]})}function JV(){const e=_t(),[t,r]=v.useState("profile"),[s,a]=v.useState(!1),[o,c]=v.useState(!1),[u,f]=v.useState(!1),[p,x]=v.useState(null),[w,b]=v.useState(null),[j,N]=v.useState(!1),[C,T]=v.useState(!1),[S,E]=v.useState(!1),[_,k]=v.useState(!1),[D,L]=v.useState(""),[R,M]=v.useState({followers_count:0,events_count:0,page_views:0}),P=v.useRef(null),F=v.useRef(null),[Y,U]=v.useState({bio:"",instagram:"",website:""}),[q,re]=v.useState({title:"",subtitle:"",description:"",primaryColor:"#8B5CF6",showStats:!0,showEvents:!0,showContact:!0}),[W,ne]=v.useState({title:"",description:"",username:""}),[oe,ae]=v.useState(null),[J,he]=v.useState(!1),[ye,H]=v.useState({instagram:{url:"",visible:!1},whatsapp:{url:"",visible:!1},location:{url:"",visible:!1},playlist:{url:"",visible:!1},website:{url:"",visible:!1}}),{user:ee}=bt(),{organizerData:X,events:te,loading:se,updateOrganizerProfile:ce}=Oa(),{photoSessions:ge,loading:Te,uploadPhotos:be,deletePhoto:Se}=y$();if(v.useEffect(()=>{X&&((async()=>{const{data:ze}=await $.from("organizer_stats").select("*").eq("organizer_id",X.id).maybeSingle();M(ze?{followers_count:ze.followers_count||0,events_count:te.length,page_views:0}:{followers_count:0,events_count:te.length,page_views:0})})(),re({title:X.page_title||"",subtitle:X.page_subtitle||"",description:X.page_description||"",primaryColor:X.primary_color||"#8B5CF6",showStats:X.show_statistics,showEvents:X.show_events,showContact:X.show_contact}),ne({title:X.page_title||"",description:X.page_description||"",username:X.username||""}))},[X,te]),se)return n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Carregando..."})]})});const Me={name:(X==null?void 0:X.page_title)||"Meu Perfil",bio:(X==null?void 0:X.page_description)||"Organizador de eventos",followers:R.followers_count,events:R.events_count,pageViews:R.page_views},ue=async _e=>{var Ge;const ze=(Ge=_e.target.files)==null?void 0:Ge[0];if(!(!ze||!X||!ee))try{T(!0);const Vt=ze.name.split(".").pop(),pe=`${ee.id}/cover.${Vt}`,{error:Ze}=await $.storage.from("user-uploads").upload(pe,ze,{upsert:!0});if(Ze)throw Ze;const{data:{publicUrl:it}}=$.storage.from("user-uploads").getPublicUrl(pe);await ce({cover_image_url:it}),G.success("Imagem de capa atualizada!")}catch(Vt){console.error("Error uploading cover:",Vt),G.error("Erro ao fazer upload da imagem")}finally{T(!1)}},We=async _e=>{var Ge;const ze=(Ge=_e.target.files)==null?void 0:Ge[0];if(!(!ze||!X||!ee))try{E(!0);const Vt=ze.name.split(".").pop(),pe=`${ee.id}/avatar.${Vt}`,{error:Ze}=await $.storage.from("user-uploads").upload(pe,ze,{upsert:!0});if(Ze)throw Ze;const{data:{publicUrl:it}}=$.storage.from("user-uploads").getPublicUrl(pe);await ce({avatar_url:it}),await $.from("profiles").update({avatar_url:it}).eq("user_id",ee.id),G.success("Foto de perfil atualizada em todos os lugares!")}catch(Vt){console.error("Error uploading avatar:",Vt),G.error("Erro ao fazer upload da foto")}finally{E(!1)}},Ee=()=>{const _e=`${window.location.origin}/${X==null?void 0:X.username}`;navigator.clipboard.writeText(_e),G.success("Link copiado para a área de transferência!")},Je=async _e=>{const ze=_e.target.files;if(!ze||ze.length===0)return;if(!D){G.error("Selecione um evento para associar as fotos");return}await be(ze,D)&&(N(!1),L(""),P.current&&(P.current.value=""))};return s?n.jsx(y0,{onBack:()=>a(!1)}):o?n.jsx(kv,{onBack:()=>c(!1),eventId:p||void 0}):u?n.jsx(Tv,{onBack:()=>f(!1),eventId:w||void 0}):n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsxs("div",{className:"max-w-md mx-auto bg-background",children:[n.jsxs(Km,{value:t,onValueChange:r,className:"w-full",children:[n.jsxs(qu,{className:"grid w-full grid-cols-4",children:[n.jsxs(ls,{value:"profile",className:"flex items-center gap-2",children:[n.jsx(ms,{className:"h-4 w-4"}),"Perfil"]}),n.jsxs(ls,{value:"events",className:"flex items-center gap-2",children:[n.jsx(A1,{className:"h-4 w-4"}),"Eventos"]}),n.jsxs(ls,{value:"photos",className:"flex items-center gap-2",children:[n.jsx(Hi,{className:"h-4 w-4"}),"Fotos"]}),n.jsxs(ls,{value:"settings",className:"flex items-center gap-2",children:[n.jsx(zo,{className:"h-4 w-4"}),"Config"]})]}),n.jsx(cs,{value:"profile",className:"space-y-6",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("header",{className:`relative h-64 bg-gradient-to-b from-surface to-background rounded-lg overflow-hidden ${_?"group cursor-pointer":""}`,children:[_&&n.jsxs(n.Fragment,{children:[n.jsx("input",{type:"file",accept:"image/*",onChange:ue,className:"hidden",id:"cover-upload"}),n.jsxs("label",{htmlFor:"cover-upload",className:"absolute inset-0 cursor-pointer",children:[X!=null&&X.cover_image_url?n.jsx("img",{src:X==null?void 0:X.cover_image_url,alt:"Cover",className:"w-full h-full object-cover opacity-30"}):n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-primary/20 to-secondary/20"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-background"}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity",children:C?n.jsx("div",{className:"w-8 h-8 border-4 border-white border-t-transparent rounded-full animate-spin"}):n.jsxs("div",{className:"text-white text-center",children:[n.jsx(En,{className:"h-12 w-12 mx-auto mb-2"}),n.jsx("p",{className:"text-sm font-medium",children:"Clique para alterar a capa"})]})})]})]}),!_&&n.jsxs(n.Fragment,{children:[X!=null&&X.cover_image_url?n.jsx("img",{src:X==null?void 0:X.cover_image_url,alt:"Cover",className:"w-full h-full object-cover opacity-30"}):n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-primary/20 to-secondary/20"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-background"})]}),n.jsx("div",{className:"absolute top-4 right-4 flex gap-2 z-10",children:n.jsx(K,{variant:"ghost",size:"icon",className:"bg-surface/80 backdrop-blur-sm",onClick:Ee,children:n.jsx(Is,{className:"h-5 w-5"})})})]}),n.jsxs("div",{className:"-mt-16 relative z-10",children:[n.jsxs("div",{className:"flex items-end gap-4 mb-4",children:[n.jsxs("div",{className:"avatar-story relative group",children:[n.jsx(Ut,{className:"h-20 w-20 border-4 border-background",children:X!=null&&X.avatar_url?n.jsx("img",{src:X.avatar_url,alt:"Avatar",className:"w-full h-full object-cover"}):n.jsx($t,{className:"bg-surface text-lg font-bold",children:W.title.charAt(0)||"O"})}),_&&n.jsxs(n.Fragment,{children:[n.jsx("input",{type:"file",accept:"image/*",ref:F,onChange:We,className:"hidden",id:"avatar-upload"}),n.jsx("label",{htmlFor:"avatar-upload",className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:S?n.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):n.jsx(Fs,{className:"h-5 w-5 text-white"})})]})]}),n.jsx("div",{className:"flex-1 pb-2 space-y-2",children:_?n.jsxs(n.Fragment,{children:[n.jsx(we,{value:W.title,onChange:_e=>ne(ze=>({...ze,title:_e.target.value})),className:"text-xl font-bold bg-transparent border-border",placeholder:"Nome do perfil"}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"@"}),n.jsx(we,{value:W.username,onChange:async _e=>{const ze=_e.target.value.toLowerCase().replace(/[^a-z0-9._]/g,"");if(ne(Ge=>({...Ge,username:ze})),ze.length>=3&&ze!==(X==null?void 0:X.username)){he(!0),ae(null);const{data:Ge,error:Vt}=await $.rpc("check_username_available",{username_to_check:ze,current_organizer_id:X==null?void 0:X.id});he(!1),Vt?ae("Erro ao verificar username"):Ge||ae("Username já está em uso")}},className:"text-sm bg-transparent border-border pl-7",placeholder:"username"})]}),J&&n.jsx("p",{className:"text-xs text-muted-foreground",children:"Verificando disponibilidade..."}),oe&&n.jsx("p",{className:"text-xs text-destructive",children:oe}),!oe&&!J&&W.username&&W.username!==(X==null?void 0:X.username)&&n.jsx("p",{className:"text-xs text-green-600",children:"Username disponível!"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Mínimo 3 caracteres. Apenas letras minúsculas, números, ponto e underline."})]}),n.jsx(kn,{value:W.description,onChange:_e=>ne(ze=>({...ze,description:_e.target.value})),className:"text-sm bg-transparent border-border min-h-[60px]",placeholder:"Descrição"})]}):n.jsxs(n.Fragment,{children:[n.jsx("h1",{className:"text-xl font-bold text-foreground",children:W.title||"Seu Nome"}),(X==null?void 0:X.username)&&n.jsxs("p",{className:"text-sm text-muted-foreground",children:["@",X.username]})]})}),(X==null?void 0:X.username)&&!_&&n.jsxs(K,{variant:"outline",size:"sm",onClick:()=>window.open(`${Ym()}/${X.username}`,"_blank"),className:"mb-2",children:[n.jsx(Vr,{className:"h-4 w-4 mr-2"}),"Ver Página"]})]}),_?n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx(K,{variant:"default",size:"sm",disabled:!!oe||J||W.username.length<3,onClick:async()=>{try{if(W.username!==(X==null?void 0:X.username)){const{data:_e,error:ze}=await $.rpc("check_username_available",{username_to_check:W.username,current_organizer_id:X==null?void 0:X.id});if(ze||!_e){G.error("Username já está em uso");return}}await ce({page_title:W.title,page_description:W.description,username:W.username}),ee&&await $.from("profiles").update({display_name:W.title,bio:W.description}).eq("user_id",ee.id),k(!1),ae(null)}catch(_e){console.error("Error updating profile:",_e)}},children:"Salvar"}),n.jsx(K,{variant:"outline",size:"sm",onClick:()=>{ne({title:(X==null?void 0:X.page_title)||"",description:(X==null?void 0:X.page_description)||"",username:(X==null?void 0:X.username)||""}),ae(null),k(!1)},children:"Cancelar"})]}):n.jsxs(K,{variant:"outline",size:"sm",onClick:()=>k(!0),children:[n.jsx(B8,{className:"h-4 w-4"}),"Editar"]})]}),q.showStats&&n.jsxs("div",{className:"flex items-center justify-around py-4 mb-6 bg-card rounded-lg",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-lg font-bold text-foreground",children:Me.followers}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Seguidores"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-lg font-bold text-foreground",children:Me.events}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Eventos"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-lg font-bold text-foreground",children:Me.pageViews}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Visualizações"})]})]}),n.jsxs("div",{className:"space-y-4 bg-card rounded-lg p-4",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:"Links Sociais"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(de,{htmlFor:"whatsapp",className:"flex items-center gap-2",children:[n.jsx(Uc,{className:"h-4 w-4"}),"WhatsApp"]}),n.jsx(Tr,{checked:X==null?void 0:X.show_whatsapp,onCheckedChange:async _e=>{await ce({show_whatsapp:_e})}})]}),n.jsx(we,{id:"whatsapp",placeholder:"https://wa.me/...",value:(X==null?void 0:X.whatsapp_url)||"",onChange:_e=>ce({whatsapp_url:_e.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(de,{htmlFor:"instagram",className:"flex items-center gap-2",children:[n.jsx(Gi,{className:"h-4 w-4"}),"Instagram"]}),n.jsx(Tr,{checked:X==null?void 0:X.show_instagram,onCheckedChange:async _e=>{await ce({show_instagram:_e})}})]}),n.jsx(we,{id:"instagram",placeholder:"https://instagram.com/...",value:(X==null?void 0:X.instagram_url)||"",onChange:_e=>ce({instagram_url:_e.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(de,{htmlFor:"playlist",className:"flex items-center gap-2",children:[n.jsx(au,{className:"h-4 w-4"}),"Playlist"]}),n.jsx(Tr,{checked:X==null?void 0:X.show_playlist,onCheckedChange:async _e=>{await ce({show_playlist:_e})}})]}),n.jsx(we,{id:"playlist",placeholder:"https://open.spotify.com/...",value:(X==null?void 0:X.playlist_url)||"",onChange:_e=>ce({playlist_url:_e.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(de,{htmlFor:"location",className:"flex items-center gap-2",children:[n.jsx(Rt,{className:"h-4 w-4"}),"Localização"]}),n.jsx(Tr,{checked:X==null?void 0:X.show_location,onCheckedChange:async _e=>{await ce({show_location:_e})}})]}),n.jsx(we,{id:"location",placeholder:"https://maps.google.com/...",value:(X==null?void 0:X.location_url)||"",onChange:_e=>ce({location_url:_e.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(de,{htmlFor:"website",className:"flex items-center gap-2",children:[n.jsx(su,{className:"h-4 w-4"}),"Website"]}),n.jsx(Tr,{checked:X==null?void 0:X.show_website,onCheckedChange:async _e=>{await ce({show_website:_e})}})]}),n.jsx(we,{id:"website",placeholder:"https://seusite.com",value:(X==null?void 0:X.website_url)||"",onChange:_e=>ce({website_url:_e.target.value})})]})]})]}),n.jsxs("div",{className:"space-y-4 bg-card rounded-lg p-4",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:"Categoria do Perfil"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"category",children:"Categoria"}),n.jsxs(ea,{value:(X==null?void 0:X.category)||"",onValueChange:_e=>ce({category:_e}),children:[n.jsx(As,{children:n.jsx(ta,{placeholder:"Selecione uma categoria"})}),n.jsxs(ks,{children:[n.jsx(Ht,{value:"festas",children:"Festas"}),n.jsx(Ht,{value:"eventos",children:"Eventos"}),n.jsx(Ht,{value:"encontros",children:"Encontros"}),n.jsx(Ht,{value:"lives",children:"Lives"}),n.jsx(Ht,{value:"geek",children:"Geek"}),n.jsx(Ht,{value:"esporte",children:"Esporte"}),n.jsx(Ht,{value:"saúde",children:"Saúde"}),n.jsx(Ht,{value:"igreja",children:"Igreja"}),n.jsx(Ht,{value:"outro",children:"Outro"})]})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"A categoria ajuda os usuários a encontrar seu perfil"})]})]})]})}),n.jsxs(cs,{value:"events",className:"space-y-6",children:[n.jsx("div",{className:"p-4 md:p-6 space-y-6",children:n.jsx("div",{className:"bg-gradient-to-r from-green-500/10 via-emerald-500/10 to-blue-500/10 border border-green-500/20 rounded-xl p-5 md:p-6 shadow-sm hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2.5",children:[n.jsx("div",{className:"p-2 bg-green-500/10 rounded-lg",children:n.jsx(An,{className:"h-5 w-5 md:h-6 md:w-6 text-green-600"})}),n.jsx("h3",{className:"text-lg md:text-xl font-bold text-foreground",children:"Gestão Financeira"})]}),n.jsx("p",{className:"text-sm md:text-base text-muted-foreground leading-relaxed",children:"Visão consolidada de todos os seus eventos, vendas de ingressos e repasses"})]}),n.jsxs(K,{variant:"default",size:"default",className:"w-full md:w-auto md:min-w-[120px] bg-green-600 hover:bg-green-700",onClick:()=>{window.innerWidth<768?window.open(window.location.origin+"/organizer-financial","_blank"):e("/organizer-financial")},children:[n.jsx(An,{className:"h-4 w-4 mr-2"}),"Acessar"]})]})})}),n.jsx(rV,{onCreateEvent:()=>a(!0),onManageRegistrations:_e=>{x(_e),c(!0)},onViewAttendances:_e=>{b(_e),f(!0)}})]}),n.jsx(cs,{value:"photos",className:"space-y-6 p-4",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Minhas Fotos"}),n.jsxs(K,{variant:"outline",size:"sm",onClick:()=>N(!0),children:[n.jsx(En,{className:"h-4 w-4 mr-2"}),"Adicionar"]})]}),Te?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Carregando fotos..."})]}):ge.length>0?n.jsx("div",{className:"space-y-6",children:ge.map((_e,ze)=>n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-foreground",children:_e.eventName||"Sem evento"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[_e.photos.length," foto",_e.photos.length!==1?"s":""," • ",_e.date]})]})}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[_e.photos.slice(0,3).map(Ge=>n.jsxs("div",{className:"aspect-square bg-surface rounded-lg overflow-hidden relative group",children:[n.jsx("img",{src:Ge.photo_url,alt:Ge.caption||"Foto do evento",className:"w-full h-full object-cover hover:scale-105 transition-transform cursor-pointer"}),n.jsx(K,{variant:"destructive",size:"icon",className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity h-8 w-8",onClick:()=>Se(Ge.id),children:n.jsx(Kn,{className:"h-4 w-4"})})]},Ge.id)),_e.photos.length>3&&n.jsxs("div",{className:"aspect-square bg-surface rounded-lg overflow-hidden relative",children:[n.jsx("img",{src:_e.photos[3].photo_url,alt:"Mais fotos",className:"w-full h-full object-cover"}),n.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:n.jsxs("span",{className:"text-white font-semibold text-lg",children:["+",_e.photos.length-3]})})]})]})]},ze))}):n.jsxs("div",{className:"text-center py-12 space-y-4",children:[n.jsx("div",{className:"w-16 h-16 mx-auto bg-surface rounded-full flex items-center justify-center",children:n.jsx(En,{className:"h-8 w-8 text-muted-foreground"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"Nenhuma foto ainda"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Adicione fotos dos seus eventos para mostrar seu trabalho"}),n.jsxs(K,{variant:"outline",onClick:()=>N(!0),children:[n.jsx(En,{className:"h-4 w-4 mr-2"}),"Adicionar Primeira Foto"]})]})]})]})}),n.jsx(cs,{value:"settings",className:"space-y-6",children:n.jsx(sV,{})})]}),n.jsx(zt,{open:j,onOpenChange:N,children:n.jsxs(Ft,{children:[n.jsx(xr,{children:n.jsx(vr,{children:"Adicionar Fotos do Evento"})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"event-select",children:"Evento *"}),n.jsxs(ea,{value:D,onValueChange:L,children:[n.jsx(As,{children:n.jsx(ta,{placeholder:"Selecione um evento"})}),n.jsx(ks,{children:te.length===0?n.jsx(Ht,{value:"none",disabled:!0,children:"Nenhum evento cadastrado"}):te.map(_e=>n.jsx(Ht,{value:_e.id,children:_e.title},_e.id))})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"As fotos serão associadas a este evento"})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"photos-upload",children:"Selecionar Fotos *"}),n.jsx(we,{ref:P,id:"photos-upload",type:"file",accept:"image/*",multiple:!0,onChange:Je}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Você pode selecionar várias fotos de uma vez"})]}),n.jsx("div",{className:"flex gap-2",children:n.jsx(K,{variant:"outline",onClick:()=>{N(!1),L("")},className:"flex-1",children:"Cancelar"})})]})]})})]}),n.jsx("footer",{className:"mt-8 pb-6 text-center border-t border-border pt-6",children:n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Esse site foi desenvolvido pela ",n.jsx("a",{href:"https://flatgrowth.com.br/",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Flat Company"})]})})]})}var MA=["PageUp","PageDown"],LA=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],FA={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Zc="Slider",[b0,eq,tq]=ku(Zc),[BA]=Mr(Zc,[tq]),[rq,lp]=BA(Zc),zA=v.forwardRef((e,t)=>{const{name:r,min:s=0,max:a=100,step:o=1,orientation:c="horizontal",disabled:u=!1,minStepsBetweenThumbs:f=0,defaultValue:p=[s],value:x,onValueChange:w=()=>{},onValueCommit:b=()=>{},inverted:j=!1,form:N,...C}=e,T=v.useRef(new Set),S=v.useRef(0),_=c==="horizontal"?nq:sq,[k=[],D]=Ms({prop:x,defaultProp:p,onChange:Y=>{var q;(q=[...T.current][S.current])==null||q.focus(),w(Y)}}),L=v.useRef(k);function R(Y){const U=cq(k,Y);F(Y,U)}function M(Y){F(Y,S.current)}function P(){const Y=L.current[S.current];k[S.current]!==Y&&b(k)}function F(Y,U,{commit:q}={commit:!1}){const re=fq(o),W=mq(Math.round((Y-s)/o)*o+s,re),ne=vu(W,[s,a]);D((oe=[])=>{const ae=oq(oe,ne,U);if(hq(ae,f*o)){S.current=ae.indexOf(ne);const J=String(ae)!==String(oe);return J&&q&&b(ae),J?ae:oe}else return oe})}return n.jsx(rq,{scope:e.__scopeSlider,name:r,disabled:u,min:s,max:a,valueIndexToChangeRef:S,thumbs:T.current,values:k,orientation:c,form:N,children:n.jsx(b0.Provider,{scope:e.__scopeSlider,children:n.jsx(b0.Slot,{scope:e.__scopeSlider,children:n.jsx(_,{"aria-disabled":u,"data-disabled":u?"":void 0,...C,ref:t,onPointerDown:Re(C.onPointerDown,()=>{u||(L.current=k)}),min:s,max:a,inverted:j,onSlideStart:u?void 0:R,onSlideMove:u?void 0:M,onSlideEnd:u?void 0:P,onHomeKeyDown:()=>!u&&F(s,0,{commit:!0}),onEndKeyDown:()=>!u&&F(a,k.length-1,{commit:!0}),onStepKeyDown:({event:Y,direction:U})=>{if(!u){const W=MA.includes(Y.key)||Y.shiftKey&&LA.includes(Y.key)?10:1,ne=S.current,oe=k[ne],ae=o*W*U;F(oe+ae,ne,{commit:!0})}}})})})})});zA.displayName=Zc;var[UA,$A]=BA(Zc,{startEdge:"left",endEdge:"right",size:"width",direction:1}),nq=v.forwardRef((e,t)=>{const{min:r,max:s,dir:a,inverted:o,onSlideStart:c,onSlideMove:u,onSlideEnd:f,onStepKeyDown:p,...x}=e,[w,b]=v.useState(null),j=tt(t,_=>b(_)),N=v.useRef(void 0),C=pl(a),T=C==="ltr",S=T&&!o||!T&&o;function E(_){const k=N.current||w.getBoundingClientRect(),D=[0,k.width],R=Iv(D,S?[r,s]:[s,r]);return N.current=k,R(_-k.left)}return n.jsx(UA,{scope:e.__scopeSlider,startEdge:S?"left":"right",endEdge:S?"right":"left",direction:S?1:-1,size:"width",children:n.jsx(VA,{dir:C,"data-orientation":"horizontal",...x,ref:j,style:{...x.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:_=>{const k=E(_.clientX);c==null||c(k)},onSlideMove:_=>{const k=E(_.clientX);u==null||u(k)},onSlideEnd:()=>{N.current=void 0,f==null||f()},onStepKeyDown:_=>{const D=FA[S?"from-left":"from-right"].includes(_.key);p==null||p({event:_,direction:D?-1:1})}})})}),sq=v.forwardRef((e,t)=>{const{min:r,max:s,inverted:a,onSlideStart:o,onSlideMove:c,onSlideEnd:u,onStepKeyDown:f,...p}=e,x=v.useRef(null),w=tt(t,x),b=v.useRef(void 0),j=!a;function N(C){const T=b.current||x.current.getBoundingClientRect(),S=[0,T.height],_=Iv(S,j?[s,r]:[r,s]);return b.current=T,_(C-T.top)}return n.jsx(UA,{scope:e.__scopeSlider,startEdge:j?"bottom":"top",endEdge:j?"top":"bottom",size:"height",direction:j?1:-1,children:n.jsx(VA,{"data-orientation":"vertical",...p,ref:w,style:{...p.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:C=>{const T=N(C.clientY);o==null||o(T)},onSlideMove:C=>{const T=N(C.clientY);c==null||c(T)},onSlideEnd:()=>{b.current=void 0,u==null||u()},onStepKeyDown:C=>{const S=FA[j?"from-bottom":"from-top"].includes(C.key);f==null||f({event:C,direction:S?-1:1})}})})}),VA=v.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:s,onSlideMove:a,onSlideEnd:o,onHomeKeyDown:c,onEndKeyDown:u,onStepKeyDown:f,...p}=e,x=lp(Zc,r);return n.jsx(Ve.span,{...p,ref:t,onKeyDown:Re(e.onKeyDown,w=>{w.key==="Home"?(c(w),w.preventDefault()):w.key==="End"?(u(w),w.preventDefault()):MA.concat(LA).includes(w.key)&&(f(w),w.preventDefault())}),onPointerDown:Re(e.onPointerDown,w=>{const b=w.target;b.setPointerCapture(w.pointerId),w.preventDefault(),x.thumbs.has(b)?b.focus():s(w)}),onPointerMove:Re(e.onPointerMove,w=>{w.target.hasPointerCapture(w.pointerId)&&a(w)}),onPointerUp:Re(e.onPointerUp,w=>{const b=w.target;b.hasPointerCapture(w.pointerId)&&(b.releasePointerCapture(w.pointerId),o(w))})})}),qA="SliderTrack",WA=v.forwardRef((e,t)=>{const{__scopeSlider:r,...s}=e,a=lp(qA,r);return n.jsx(Ve.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...s,ref:t})});WA.displayName=qA;var _0="SliderRange",HA=v.forwardRef((e,t)=>{const{__scopeSlider:r,...s}=e,a=lp(_0,r),o=$A(_0,r),c=v.useRef(null),u=tt(t,c),f=a.values.length,p=a.values.map(b=>KA(b,a.min,a.max)),x=f>1?Math.min(...p):0,w=100-Math.max(...p);return n.jsx(Ve.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...s,ref:u,style:{...e.style,[o.startEdge]:x+"%",[o.endEdge]:w+"%"}})});HA.displayName=_0;var N0="SliderThumb",GA=v.forwardRef((e,t)=>{const r=eq(e.__scopeSlider),[s,a]=v.useState(null),o=tt(t,u=>a(u)),c=v.useMemo(()=>s?r().findIndex(u=>u.ref.current===s):-1,[r,s]);return n.jsx(aq,{...e,ref:o,index:c})}),aq=v.forwardRef((e,t)=>{const{__scopeSlider:r,index:s,name:a,...o}=e,c=lp(N0,r),u=$A(N0,r),[f,p]=v.useState(null),x=tt(t,E=>p(E)),w=f?c.form||!!f.closest("form"):!0,b=Du(f),j=c.values[s],N=j===void 0?0:KA(j,c.min,c.max),C=lq(s,c.values.length),T=b==null?void 0:b[u.size],S=T?dq(T,N,u.direction):0;return v.useEffect(()=>{if(f)return c.thumbs.add(f),()=>{c.thumbs.delete(f)}},[f,c.thumbs]),n.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[u.startEdge]:`calc(${N}% + ${S}px)`},children:[n.jsx(b0.ItemSlot,{scope:e.__scopeSlider,children:n.jsx(Ve.span,{role:"slider","aria-label":e["aria-label"]||C,"aria-valuemin":c.min,"aria-valuenow":j,"aria-valuemax":c.max,"aria-orientation":c.orientation,"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,tabIndex:c.disabled?void 0:0,...o,ref:x,style:j===void 0?{display:"none"}:e.style,onFocus:Re(e.onFocus,()=>{c.valueIndexToChangeRef.current=s})})}),w&&n.jsx(XA,{name:a??(c.name?c.name+(c.values.length>1?"[]":""):void 0),form:c.form,value:j},s)]})});GA.displayName=N0;var iq="RadioBubbleInput",XA=v.forwardRef(({__scopeSlider:e,value:t,...r},s)=>{const a=v.useRef(null),o=tt(a,s),c=Xu(t);return v.useEffect(()=>{const u=a.current;if(!u)return;const f=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(f,"value").set;if(c!==t&&x){const w=new Event("input",{bubbles:!0});x.call(u,t),u.dispatchEvent(w)}},[c,t]),n.jsx(Ve.input,{style:{display:"none"},...r,ref:o,defaultValue:t})});XA.displayName=iq;function oq(e=[],t,r){const s=[...e];return s[r]=t,s.sort((a,o)=>a-o)}function KA(e,t,r){const o=100/(r-t)*(e-t);return vu(o,[0,100])}function lq(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function cq(e,t){if(e.length===1)return 0;const r=e.map(a=>Math.abs(a-t)),s=Math.min(...r);return r.indexOf(s)}function dq(e,t,r){const s=e/2,o=Iv([0,50],[0,s]);return(s-o(t)*r)*r}function uq(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function hq(e,t){if(t>0){const r=uq(e);return Math.min(...r)>=t}return!0}function Iv(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(r-e[0])}}function fq(e){return(String(e).split(".")[1]||"").length}function mq(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var YA=zA,pq=WA,gq=HA,xq=GA;const QA=v.forwardRef(({className:e,...t},r)=>n.jsxs(YA,{ref:r,className:Fe("relative flex w-full touch-none select-none items-center",e),...t,children:[n.jsx(pq,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:n.jsx(gq,{className:"absolute h-full bg-primary"})}),n.jsx(xq,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));QA.displayName=YA.displayName;function Rv({open:e,onOpenChange:t,imageSrc:r,onCropComplete:s,aspectRatio:a=1}){const[o,c]=v.useState(1),[u,f]=v.useState(0),[p,x]=v.useState({x:0,y:0}),[w,b]=v.useState(!1),[j,N]=v.useState({x:0,y:0}),C=v.useRef(null),T=v.useRef(null),S=v.useRef(null);v.useEffect(()=>{if(r&&e){const Y=new Image;Y.src=r,Y.onload=()=>{T.current=Y,E()}}},[r,e]),v.useEffect(()=>{E()},[o,u,p]);const E=()=>{var Te,be;const Y=C.current,U=T.current;if(!Y||!U)return;const q=Y.getContext("2d");if(!q)return;const re=((Te=S.current)==null?void 0:Te.clientWidth)||400,W=((be=S.current)==null?void 0:be.clientHeight)||400;Y.width=re,Y.height=W,q.fillStyle="#000",q.fillRect(0,0,Y.width,Y.height),q.save();const ne=Y.width/2,oe=Y.height/2;q.translate(ne+p.x,oe+p.y),q.rotate(u*Math.PI/180),q.scale(o,o);const ae=U.width,J=U.height,he=Math.max(Y.width/ae,Y.height/J),ye=ae*he,H=J*he;q.drawImage(U,-ye/2,-H/2,ye,H),q.restore();let ee=Math.min(Y.width,Y.height)*.9,X=(Y.width-ee)/2,te=(Y.height-ee)/2,se=ee,ce=ee;a!==1&&(se=Math.min(Y.width*.9,Y.height*.9*a),ce=se/a,X=(Y.width-se)/2,te=(Y.height-ce)/2),q.fillStyle="rgba(0, 0, 0, 0.6)",q.fillRect(0,0,Y.width,te),q.fillRect(0,te+ce,Y.width,Y.height-te-ce),q.fillRect(0,te,X,ce),q.fillRect(X+se,te,Y.width-X-se,ce),q.strokeStyle="rgba(255, 255, 255, 0.9)",q.lineWidth=3,q.setLineDash([]),q.strokeRect(X,te,se,ce);const ge=20;q.fillStyle="rgba(255, 255, 255, 0.9)",q.fillRect(X-2,te-2,ge,4),q.fillRect(X-2,te-2,4,ge),q.fillRect(X+se-ge+2,te-2,ge,4),q.fillRect(X+se-2,te-2,4,ge),q.fillRect(X-2,te+ce-2,ge,4),q.fillRect(X-2,te+ce-ge+2,4,ge),q.fillRect(X+se-ge+2,te+ce-2,ge,4),q.fillRect(X+se-2,te+ce-ge+2,4,ge)},_=Y=>{b(!0),N({x:Y.clientX-p.x,y:Y.clientY-p.y})},k=Y=>{w&&x({x:Y.clientX-j.x,y:Y.clientY-j.y})},D=()=>{b(!1)},L=Y=>{const U=Y.touches[0];b(!0),N({x:U.clientX-p.x,y:U.clientY-p.y})},R=Y=>{if(!w)return;const U=Y.touches[0];x({x:U.clientX-j.x,y:U.clientY-j.y})},M=v.useCallback(async()=>{const Y=C.current,U=T.current;if(!Y||!U)return null;const q=document.createElement("canvas"),re=q.getContext("2d");if(!re)return null;const W=800;q.width=W,q.height=a===1?W:W/a;const ne=Y.width,oe=Y.height;let ae=Math.min(ne,oe)*.9,J=ae,he=ae;a!==1&&(J=Math.min(ne*.9,oe*.9*a),he=J/a),re.save(),re.translate(q.width/2,q.height/2),re.rotate(u*Math.PI/180),re.scale(o,o);const ye=U.width,H=U.height,ee=Math.max(ne/ye,oe/H),X=ye*ee,te=H*ee,se=X/2-J/2*(X/ne)-p.x*X/ne,ce=te/2-he/2*(te/oe)-p.y*te/oe,ge=J*(X/ne),Te=he*(te/oe);return re.drawImage(U,se,ce,ge,Te,-q.width/2,-q.height/2,q.width,q.height),re.restore(),new Promise(be=>{q.toBlob(Se=>{if(Se){const Me=new File([Se],"cropped-image.jpg",{type:"image/jpeg"});be(Me)}},"image/jpeg",.95)})},[o,u,p,a]),P=async()=>{const Y=await M();Y&&(s(Y),t(!1))},F=()=>{f(Y=>(Y+90)%360)};return n.jsx(zt,{open:e,onOpenChange:t,children:n.jsxs(Ft,{className:"max-w-3xl p-0 gap-0",children:[n.jsxs(xr,{className:"px-6 pt-6 pb-4 space-y-1",children:[n.jsx(vr,{className:"text-xl",children:"Ajustar Foto"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Arraste para posicionar, use o zoom e gire a imagem conforme necessário"})]}),n.jsxs("div",{className:"px-6 pb-6 space-y-6",children:[n.jsx("div",{ref:S,className:"relative w-full h-[500px] bg-black rounded-lg overflow-hidden cursor-move select-none touch-none",onMouseDown:_,onMouseMove:k,onMouseUp:D,onMouseLeave:D,onTouchStart:L,onTouchMove:R,onTouchEnd:D,children:n.jsx("canvas",{ref:C,className:"w-full h-full"})}),n.jsxs("div",{className:"space-y-6 bg-muted/50 p-4 rounded-lg",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("label",{className:"text-sm font-semibold flex items-center gap-2",children:[n.jsx(G8,{className:"h-4 w-4"}),"Zoom"]}),n.jsxs("span",{className:"text-sm font-medium tabular-nums",children:[Math.round(o*100),"%"]})]}),n.jsx(QA,{value:[o],onValueChange:([Y])=>c(Y),min:.5,max:3,step:.05,className:"w-full"})]}),n.jsx("div",{className:"flex items-center justify-center pt-2",children:n.jsxs(K,{variant:"outline",onClick:F,className:"gap-2 h-11",children:[n.jsx($8,{className:"h-5 w-5"}),"Girar 90°"]})})]})]}),n.jsxs($u,{className:"px-6 pb-6 pt-0 gap-3",children:[n.jsx(K,{variant:"outline",onClick:()=>t(!1),className:"flex-1",children:"Cancelar"}),n.jsx(K,{onClick:P,className:"flex-1",children:"Salvar Foto"})]})]})})}const w2=[{id:"instagram",label:"Instagram",icon:Gi,color:"text-pink-500",placeholder:"https://instagram.com/seuperfil",field:"instagram_url"},{id:"whatsapp",label:"WhatsApp",icon:Ls,color:"text-green-500",placeholder:"https://wa.me/5511999999999",field:"phone"}];function vq({userType:e}){const t=_t(),[r,s]=v.useState("profile"),[a,o]=v.useState(!1),[c,u]=v.useState(null),[f,p]=v.useState(!1),[x,w]=v.useState(!1),[b,j]=v.useState(""),[N,C]=v.useState({display_name:"",bio:"",location:"",age:"",notes:"",notes_visible:!0,phone:"",website:"",interest:"curtição",relationship_status:"preferencia_nao_informar"}),{user:T,signOut:S}=bt(),{profile:E,loading:_,saving:k,updateProfile:D,uploadAvatar:L}=Bm(),R=v.useRef(null),M=async()=>{try{const{data:{session:ne}}=await $.auth.getSession();if(!ne){G.error("Você precisa estar logado para deletar sua conta");return}const{error:oe}=await $.functions.invoke("delete-user",{headers:{Authorization:`Bearer ${ne.access_token}`}});if(oe){console.error("Error deleting account:",oe),G.error("Erro ao deletar conta. Tente novamente.");return}G.success("Conta deletada com sucesso!"),await $.auth.signOut(),window.location.href="/auth"}catch(ne){console.error("Error:",ne),G.error("Erro ao deletar conta. Tente novamente.")}},P=E!=null&&E.birth_date?oF(E.birth_date):null;v.useEffect(()=>{E&&(C({display_name:E.display_name||"",bio:E.bio||"",location:E.location||"",age:(P==null?void 0:P.toString())||"",notes:E.notes||"",notes_visible:E.notes_visible??!0,phone:E.phone||"",website:E.website||"",interest:E.interest||"curtição",relationship_status:E.relationship_status||"preferencia_nao_informar"}),p(!1))},[E,P]);const F=async ne=>{const oe=N[ne],ae={[ne]:oe||null};ne==="age"&&(ae.age=oe?parseInt(oe):null);const J=await D(ae);return J&&u(null),J},Y=async(ne,oe)=>{const ae=w2.find(J=>J.id===ne);ae&&await D({[ae.field]:oe||null})},U=async ne=>{var J;const oe=(J=ne.target.files)==null?void 0:J[0];if(!oe)return;if(!oe.type.startsWith("image/")){G.error("Por favor, selecione apenas arquivos de imagem");return}if(oe.size>5*1024*1024){G.error("A imagem deve ter no máximo 5MB");return}const ae=new FileReader;ae.onload=()=>{j(ae.result),w(!0)},ae.readAsDataURL(oe)},q=async ne=>{await L(ne),w(!1)};if(_)return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx(a0,{title:"Meu Perfil"}),n.jsx("div",{className:"flex items-center justify-center p-8",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Carregando perfil..."})]})})]});const re=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsx(Ne,{children:n.jsx(Ce,{className:"p-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"h-20 w-20 rounded-full bg-primary/20 flex items-center justify-center overflow-hidden",children:E!=null&&E.avatar_url?n.jsx("img",{src:E.avatar_url,alt:"Avatar",className:"w-full h-full object-cover"}):n.jsx(ms,{className:"h-8 w-8 text-primary"})}),n.jsx(K,{size:"icon",variant:"outline",className:"absolute -bottom-1 -right-1 h-7 w-7 rounded-full",onClick:()=>{var ne;return(ne=R.current)==null?void 0:ne.click()},disabled:k,children:n.jsx(En,{className:"h-3 w-3"})}),n.jsx("input",{ref:R,type:"file",accept:"image/*",onChange:U,className:"hidden"})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"flex items-center gap-2 mb-1",children:c==="display_name"?n.jsxs("div",{className:"flex gap-2 flex-1",children:[n.jsx(we,{value:N.display_name,onChange:ne=>C(oe=>({...oe,display_name:ne.target.value})),className:"text-xl font-semibold",placeholder:"Seu nome"}),n.jsx(K,{size:"sm",onClick:()=>F("display_name"),disabled:k,children:"Salvar"}),n.jsx(K,{size:"sm",variant:"outline",onClick:()=>u(null),children:"Cancelar"})]}):n.jsxs(n.Fragment,{children:[n.jsx("h2",{className:"text-xl font-semibold",children:(E==null?void 0:E.display_name)||"Seu Nome"}),n.jsx(K,{size:"sm",variant:"ghost",onClick:()=>u("display_name"),children:n.jsx(ss,{className:"h-4 w-4"})})]})}),n.jsx("div",{className:"mb-2",children:c==="location"?n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"flex gap-2",children:n.jsx(we,{value:N.location,onChange:ne=>C(oe=>({...oe,location:ne.target.value})),placeholder:"Localização",className:"text-sm"})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(K,{size:"sm",onClick:()=>{F("location")},disabled:k,children:"Salvar"}),n.jsx(K,{size:"sm",variant:"outline",onClick:()=>u(null),children:"Cancelar"})]})]}):n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.jsx(Rt,{className:"h-3 w-3 inline mr-1"}),(E==null?void 0:E.location)||"Localização"," • ",P?`${P} anos`:"Idade não informada"]}),n.jsx(K,{size:"sm",variant:"ghost",onClick:()=>u("location"),className:"h-6 w-6 p-0",children:n.jsx(ss,{className:"h-3 w-3"})})]})}),c==="bio"?n.jsxs("div",{className:"space-y-2",children:[n.jsx(kn,{value:N.bio,onChange:ne=>C(oe=>({...oe,bio:ne.target.value})),placeholder:"Escreva sobre você...",className:"text-sm"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(K,{size:"sm",onClick:()=>F("bio"),disabled:k,children:"Salvar"}),n.jsx(K,{size:"sm",variant:"outline",onClick:()=>u(null),children:"Cancelar"})]})]}):n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx("p",{className:"text-sm flex-1",children:(E==null?void 0:E.bio)||"Clique para adicionar uma biografia"}),n.jsx(K,{size:"sm",variant:"ghost",onClick:()=>u("bio"),className:"h-6 w-6 p-0",children:n.jsx(ss,{className:"h-3 w-3"})})]})]})]})})}),n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsxs(He,{className:"flex items-center gap-2",children:[n.jsx(Vr,{className:"h-5 w-5"}),"Redes Sociais"]})}),n.jsx(Ce,{children:n.jsx("div",{className:"space-y-3",children:w2.map(ne=>{const oe=ne.icon,ae=(E==null?void 0:E[ne.field])||"",J=c===ne.field;return n.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[n.jsx(oe,{className:`h-5 w-5 ${ne.color}`}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-sm",children:ne.label}),J?n.jsx("div",{className:"flex gap-2 mt-2",children:n.jsx(we,{defaultValue:ae,placeholder:ne.placeholder,className:"text-xs",onBlur:he=>Y(ne.id,he.target.value),onKeyDown:he=>{he.key==="Enter"&&(Y(ne.id,he.currentTarget.value),u(null))},autoFocus:!0})}):n.jsx("p",{className:"text-xs text-muted-foreground truncate",children:ae||"Não configurado"})]}),n.jsx(K,{size:"sm",variant:"ghost",onClick:()=>u(J?null:ne.field),children:n.jsx(ss,{className:"h-4 w-4"})})]},ne.id)})})})]}),n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsxs(He,{className:"flex items-center gap-2",children:[n.jsx(er,{className:"h-5 w-5"}),"Status de Relacionamento"]})}),n.jsx(Ce,{children:n.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"solteiro",label:"Solteiro(a)",emoji:"😊"},{value:"namorando",label:"Namorando",emoji:"💑"},{value:"casado",label:"Casado(a)",emoji:"💍"},{value:"relacionamento_aberto",label:"Relacionamento Aberto",emoji:"🌈"},{value:"preferencia_nao_informar",label:"Não informar",emoji:"🤐"}].map(ne=>n.jsxs("button",{type:"button",onClick:()=>{const oe=ne.value;C(ae=>({...ae,relationship_status:oe})),D({relationship_status:oe})},className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${N.relationship_status===ne.value?"bg-primary text-primary-foreground shadow-md":"bg-secondary text-secondary-foreground hover:bg-secondary/80"}`,children:[n.jsx("span",{className:"mr-1",children:ne.emoji}),ne.label]},ne.value))})})]})]}),W=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsx(He,{children:"Informações Pessoais"})}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Email"}),n.jsx(we,{value:(T==null?void 0:T.email)||"",disabled:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Telefone"}),c==="phone"?n.jsxs("div",{className:"flex gap-2",children:[n.jsx(we,{value:N.phone,onChange:ne=>C(oe=>({...oe,phone:ne.target.value})),placeholder:"(11) 99999-9999"}),n.jsx(K,{size:"sm",onClick:()=>F("phone"),disabled:k,children:"Salvar"}),n.jsx(K,{size:"sm",variant:"outline",onClick:()=>u(null),children:"Cancelar"})]}):n.jsxs("div",{className:"flex gap-2",children:[n.jsx(we,{value:(E==null?void 0:E.phone)||"Não informado",disabled:!0}),n.jsx(K,{size:"sm",variant:"outline",onClick:()=>u("phone"),children:n.jsx(ss,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Website"}),c==="website"?n.jsxs("div",{className:"flex gap-2",children:[n.jsx(we,{value:N.website,onChange:ne=>C(oe=>({...oe,website:ne.target.value})),placeholder:"https://seusite.com"}),n.jsx(K,{size:"sm",onClick:()=>F("website"),disabled:k,children:"Salvar"}),n.jsx(K,{size:"sm",variant:"outline",onClick:()=>u(null),children:"Cancelar"})]}):n.jsxs("div",{className:"flex gap-2",children:[n.jsx(we,{value:(E==null?void 0:E.website)||"Não informado",disabled:!0}),n.jsx(K,{size:"sm",variant:"outline",onClick:()=>u("website"),children:n.jsx(ss,{className:"h-4 w-4"})})]})]})]})]}),n.jsx(Ne,{children:n.jsx(Ce,{className:"p-6",children:n.jsxs(el,{children:[n.jsx(Yf,{asChild:!0,children:n.jsxs(K,{variant:"outline",className:"w-full text-orange-600 hover:text-orange-700 hover:bg-orange-50",children:[n.jsx(Sj,{className:"h-4 w-4 mr-2"}),"Sair da Conta"]})}),n.jsx(Qi,{children:n.jsxs(Zi,{children:[n.jsx(eo,{children:"Cancelar"}),n.jsx(Ji,{onClick:S,children:"Sair"})]})})]})})}),n.jsxs(Ne,{className:"border-destructive/20",children:[n.jsx(qe,{children:n.jsxs(He,{className:"flex items-center gap-2 text-destructive",children:[n.jsx(Kn,{className:"h-4 w-4"}),"Zona de Perigo"]})}),n.jsx(Ce,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-foreground",children:"Excluir Conta"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Esta ação não pode ser desfeita. Todos os seus dados serão permanentemente removidos."})]}),n.jsxs(el,{children:[n.jsx(Yf,{asChild:!0,children:n.jsxs(K,{variant:"destructive",size:"sm",children:[n.jsx(Kn,{className:"h-4 w-4 mr-2"}),"Excluir Conta"]})}),n.jsxs(Qi,{children:[n.jsxs(tl,{children:[n.jsx(rl,{children:"Excluir Conta Permanentemente"}),n.jsx(nl,{children:"Esta ação é irreversível. Todos os seus dados serão permanentemente excluídos. Você poderá criar uma nova conta a qualquer momento com o mesmo email."})]}),n.jsxs(Zi,{children:[n.jsx(eo,{children:"Cancelar"}),n.jsx(Ji,{onClick:M,className:"bg-destructive hover:bg-destructive/90",children:"Excluir Definitivamente"})]})]})]})]})})]})]});return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx(a0,{title:"Meu Perfil"}),n.jsxs("div",{className:"p-4 pb-24",children:[n.jsxs("div",{className:"flex gap-2 mb-6 p-1 bg-muted rounded-lg",children:[n.jsxs("button",{onClick:()=>s("profile"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all ${r==="profile"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:[n.jsx(ms,{className:"h-4 w-4 inline mr-2"}),"Perfil"]}),n.jsxs("button",{onClick:()=>t("/my-events"),className:"flex-1 py-2 px-4 rounded-md text-sm font-medium text-muted-foreground hover:text-foreground transition-all",children:[n.jsx(Ac,{className:"h-4 w-4 inline mr-2"}),"Meus Eventos"]}),n.jsxs("button",{onClick:()=>s("settings"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all ${r==="settings"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:[n.jsx(zo,{className:"h-4 w-4 inline mr-2"}),"Configurações"]})]}),r==="profile"&&re(),r==="settings"&&W()]}),n.jsx(Rv,{open:x,onOpenChange:w,imageSrc:b,onCropComplete:q,aspectRatio:1})]})}function wq({onBack:e,onEventClick:t}){const{events:r,loading:s,toggleLike:a}=xS(),o=new Date,c=r.filter(u=>{const f=new Date(u.event_date),p=u.end_date?new Date(u.end_date):null,x=(u.status||"").toLowerCase()==="completed"||(u.status||"").toLowerCase()==="ended";return f<=o&&!x&&(!p||p>o)});return s?n.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[n.jsxs("div",{className:"flex items-center gap-4 p-4 border-b border-border bg-surface/50 backdrop-blur-sm sticky top-0 z-10",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Eventos ao Vivo"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando..."})]})]}),n.jsx("div",{className:"flex items-center justify-center p-8",children:n.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})})]}):n.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[n.jsxs("div",{className:"flex items-center gap-4 p-4 border-b border-border bg-surface/50 backdrop-blur-sm sticky top-0 z-10",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Eventos ao Vivo"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:c.length>0?"Acontecendo agora":"Nenhum evento ao vivo no momento"})]})]}),n.jsx("main",{className:"px-4 py-6 max-w-md mx-auto",children:c.length>0?n.jsx("div",{className:"space-y-6",children:c.map(u=>{var f,p,x;return n.jsx(i0,{id:u.id,title:u.title,image:u.image_url||"",organizerName:((f=u.organizer)==null?void 0:f.page_title)||"Organizador",organizerAvatar:((x=(p=u.organizer)==null?void 0:p.profile)==null?void 0:x.avatar_url)||"",date:new Date(u.event_date).toLocaleDateString("pt-BR"),location:u.location,locationLink:u.location_link||void 0,estimatedAttendees:u.current_attendees||0,likes:u.likes_count||0,comments:u.comments_count||0,isLiked:u.is_liked||!1,isLive:(()=>{const w=new Date(u.event_date),b=u.end_date?new Date(u.end_date):null;return w<=o&&(!b||b>o)})(),price:u.ticket_price||0,onClick:()=>t(u.id),onLike:()=>a(u.id),showJoinButton:!0,isPlatformEvent:u.is_platform_event||!1},u.id)})}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx("p",{className:"text-muted-foreground",children:"Nenhum evento ao vivo no momento"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Volte mais tarde para ver eventos acontecendo"})]})})]})}const y2=[{code:"001",name:"Banco do Brasil"},{code:"033",name:"Santander"},{code:"104",name:"Caixa Econômica Federal"},{code:"237",name:"Bradesco"},{code:"341",name:"Itaú"},{code:"077",name:"Banco Inter"},{code:"260",name:"Nu Pagamentos (Nubank)"},{code:"290",name:"PagSeguro"},{code:"323",name:"Mercado Pago"},{code:"212",name:"Banco Original"},{code:"756",name:"Bancoob (Sicoob)"},{code:"748",name:"Sicredi"},{code:"422",name:"Banco Safra"}],yq=["AC","AL","AP","AM","BA","CE","DF","ES","GO","MA","MT","MS","MG","PA","PB","PR","PE","PI","RJ","RN","RS","RO","RR","SC","SP","SE","TO"];function ZA({organizerId:e}){const{toast:t}=KN(),[r,s]=v.useState(!1),[a,o]=v.useState(!1),[c,u]=v.useState(!1),[f,p]=v.useState({document_type:"cpf",document_number:"",legal_name:"",trading_name:"",zip_code:"",street:"",number:"",complement:"",neighborhood:"",city:"",state:"SP",bank_code:"",bank_name:"",account_type:"corrente",agency:"",agency_digit:"",account_number:"",account_digit:"",phone:"",email:"",auto_transfer:!1,transfer_day:5,is_verified:!1});v.useEffect(()=>{x()},[e]);const x=async()=>{s(!0);try{const{data:_,error:k}=await $.from("organizer_financial_data").select("*").eq("organizer_id",e).maybeSingle();if(k)throw k;_&&(p(_),u(!0))}catch(_){console.error("Error loading financial data:",_),t({title:"Erro ao carregar dados",description:_.message,variant:"destructive"})}finally{s(!1)}},w=_=>{const k=y2.find(D=>D.code===_);p({...f,bank_code:_,bank_name:(k==null?void 0:k.name)||""})},b=_=>{const k=_.replace(/\D/g,"");return k.length<=11?k.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"):_},j=_=>{const k=_.replace(/\D/g,"");return k.length<=14?k.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,"$1.$2.$3/$4-$5"):_},N=_=>_.replace(/\D/g,"").replace(/(\d{5})(\d{3})/,"$1-$2"),C=_=>{const k=_.replace(/\D/g,"");return k.length<=10?k.replace(/(\d{2})(\d{4})(\d{4})/,"($1) $2-$3"):k.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3")},T=_=>{let k=_;f.document_type==="cpf"?k=b(_):k=j(_),p({...f,document_number:k})},S=async()=>{const _=f.zip_code.replace(/\D/g,"");if(_.length===8)try{const D=await(await fetch(`https://viacep.com.br/ws/${_}/json/`)).json();D.erro||p({...f,street:D.logradouro||"",neighborhood:D.bairro||"",city:D.localidade||"",state:D.uf||""})}catch(k){console.error("Error fetching zip code:",k)}},E=async _=>{_.preventDefault(),o(!0);try{const k={organizer_id:e,...f};if(c){const{error:D}=await $.from("organizer_financial_data").update(k).eq("organizer_id",e);if(D)throw D}else{const{error:D}=await $.from("organizer_financial_data").insert([k]);if(D)throw D;u(!0)}t({title:"Dados salvos com sucesso!",description:"Suas informações financeiras foram atualizadas."})}catch(k){console.error("Error saving financial data:",k),t({title:"Erro ao salvar dados",description:k.message,variant:"destructive"})}finally{o(!1)}};return r?n.jsx("div",{className:"flex justify-center p-8",children:"Carregando..."}):n.jsxs("form",{onSubmit:E,className:"space-y-6",children:[n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(He,{className:"flex items-center gap-2",children:[n.jsx(C1,{className:"h-5 w-5"}),"Dados Fiscais"]}),n.jsx(Jr,{children:"Informações do responsável legal pela conta"})]}),f.is_verified&&n.jsxs(ct,{variant:"default",className:"gap-1",children:[n.jsx(T1,{className:"h-3 w-3"}),"Verificado"]})]})}),n.jsxs(Ce,{className:"space-y-4",children:[!f.is_verified&&n.jsxs($o,{children:[n.jsx(qn,{className:"h-4 w-4"}),n.jsx(Vo,{children:"Seus dados serão verificados pela equipe antes de liberar os repasses"})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Tipo de Documento"}),n.jsxs(ea,{value:f.document_type,onValueChange:_=>p({...f,document_type:_,document_number:""}),children:[n.jsx(As,{children:n.jsx(ta,{})}),n.jsxs(ks,{children:[n.jsx(Ht,{value:"cpf",children:"CPF - Pessoa Física"}),n.jsx(Ht,{value:"cnpj",children:"CNPJ - Pessoa Jurídica"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:f.document_type==="cpf"?"CPF":"CNPJ"}),n.jsx(we,{value:f.document_number,onChange:_=>T(_.target.value),placeholder:f.document_type==="cpf"?"000.000.000-00":"00.000.000/0000-00",required:!0})]}),n.jsxs("div",{className:"space-y-2 md:col-span-2",children:[n.jsx(de,{children:"Razão Social / Nome Completo"}),n.jsx(we,{value:f.legal_name,onChange:_=>p({...f,legal_name:_.target.value}),placeholder:"Nome legal conforme documento",required:!0})]}),f.document_type==="cnpj"&&n.jsxs("div",{className:"space-y-2 md:col-span-2",children:[n.jsx(de,{children:"Nome Fantasia"}),n.jsx(we,{value:f.trading_name,onChange:_=>p({...f,trading_name:_.target.value}),placeholder:"Nome fantasia da empresa"})]})]})]})]}),n.jsxs(Ne,{children:[n.jsxs(qe,{children:[n.jsxs(He,{className:"flex items-center gap-2",children:[n.jsx(Rt,{className:"h-5 w-5"}),"Endereço Fiscal"]}),n.jsx(Jr,{children:"Endereço conforme documento fiscal"})]}),n.jsx(Ce,{className:"space-y-4",children:n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"CEP"}),n.jsx(we,{value:f.zip_code,onChange:_=>p({...f,zip_code:N(_.target.value)}),onBlur:S,placeholder:"00000-000",required:!0})]}),n.jsxs("div",{className:"space-y-2 md:col-span-2",children:[n.jsx(de,{children:"Logradouro"}),n.jsx(we,{value:f.street,onChange:_=>p({...f,street:_.target.value}),placeholder:"Rua, Avenida, etc",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Número"}),n.jsx(we,{value:f.number,onChange:_=>p({...f,number:_.target.value}),placeholder:"123",required:!0})]}),n.jsxs("div",{className:"space-y-2 md:col-span-2",children:[n.jsx(de,{children:"Complemento"}),n.jsx(we,{value:f.complement,onChange:_=>p({...f,complement:_.target.value}),placeholder:"Apartamento, sala, etc"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Bairro"}),n.jsx(we,{value:f.neighborhood,onChange:_=>p({...f,neighborhood:_.target.value}),placeholder:"Bairro",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Cidade"}),n.jsx(we,{value:f.city,onChange:_=>p({...f,city:_.target.value}),placeholder:"Cidade",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Estado"}),n.jsxs(ea,{value:f.state,onValueChange:_=>p({...f,state:_}),children:[n.jsx(As,{children:n.jsx(ta,{})}),n.jsx(ks,{children:yq.map(_=>n.jsx(Ht,{value:_,children:_},_))})]})]})]})})]}),n.jsxs(Ne,{children:[n.jsxs(qe,{children:[n.jsxs(He,{className:"flex items-center gap-2",children:[n.jsx(Tx,{className:"h-5 w-5"}),"Dados Bancários"]}),n.jsx(Jr,{children:"Conta para recebimento dos repasses"})]}),n.jsx(Ce,{className:"space-y-4",children:n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"space-y-2 md:col-span-2",children:[n.jsx(de,{children:"Banco"}),n.jsxs(ea,{value:f.bank_code,onValueChange:w,children:[n.jsx(As,{children:n.jsx(ta,{placeholder:"Selecione o banco"})}),n.jsx(ks,{children:y2.map(_=>n.jsxs(Ht,{value:_.code,children:[_.code," - ",_.name]},_.code))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Tipo de Conta"}),n.jsxs(ea,{value:f.account_type,onValueChange:_=>p({...f,account_type:_}),children:[n.jsx(As,{children:n.jsx(ta,{})}),n.jsxs(ks,{children:[n.jsx(Ht,{value:"corrente",children:"Conta Corrente"}),n.jsx(Ht,{value:"poupanca",children:"Conta Poupança"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Agência"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(we,{value:f.agency,onChange:_=>p({...f,agency:_.target.value.replace(/\D/g,"")}),placeholder:"0000",className:"flex-1",required:!0}),n.jsx(we,{value:f.agency_digit,onChange:_=>p({...f,agency_digit:_.target.value}),placeholder:"X",className:"w-16",maxLength:1})]})]}),n.jsxs("div",{className:"space-y-2 md:col-span-2",children:[n.jsx(de,{children:"Número da Conta"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(we,{value:f.account_number,onChange:_=>p({...f,account_number:_.target.value.replace(/\D/g,"")}),placeholder:"00000000",className:"flex-1",required:!0}),n.jsx(we,{value:f.account_digit,onChange:_=>p({...f,account_digit:_.target.value}),placeholder:"X",className:"w-16",maxLength:2,required:!0})]})]})]})})]}),n.jsxs(Ne,{children:[n.jsxs(qe,{children:[n.jsxs(He,{className:"flex items-center gap-2",children:[n.jsx(Uc,{className:"h-5 w-5"}),"Dados de Contato"]}),n.jsx(Jr,{children:"Informações para comunicação sobre repasses"})]}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Telefone"}),n.jsx(we,{value:f.phone,onChange:_=>p({...f,phone:C(_.target.value)}),placeholder:"(00) 00000-0000",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Email"}),n.jsx(we,{type:"email",value:f.email,onChange:_=>p({...f,email:_.target.value}),placeholder:"email@example.com",required:!0})]})]}),n.jsx(la,{}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(de,{children:"Repasse Automático"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Receba automaticamente sem precisar solicitar"})]}),n.jsx(Tr,{checked:f.auto_transfer,onCheckedChange:_=>p({...f,auto_transfer:_})})]}),f.auto_transfer&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Dia do Repasse"}),n.jsxs(ea,{value:f.transfer_day.toString(),onValueChange:_=>p({...f,transfer_day:parseInt(_)}),children:[n.jsx(As,{children:n.jsx(ta,{})}),n.jsx(ks,{children:Array.from({length:28},(_,k)=>k+1).map(_=>n.jsxs(Ht,{value:_.toString(),children:["Dia ",_," de cada mês"]},_))})]})]})]})]})]}),n.jsx("div",{className:"flex justify-end gap-4",children:n.jsx(K,{type:"submit",size:"lg",disabled:a,children:a?"Salvando...":c?"Atualizar Dados":"Salvar Dados"})})]})}function JA({organizerId:e}){const[t,r]=v.useState(!0),[s,a]=v.useState([]),[o,c]=v.useState({total_gross:0,total_fees:0,total_net:0,pending_amount:0,completed_amount:0,transaction_count:0});v.useEffect(()=>{u()},[e]);const u=async()=>{r(!0);try{const{data:w,error:b}=await $.from("ticket_sales_transactions").select(`
          *,
          events (
            title,
            slug
          )
        `).eq("organizer_id",e).order("created_at",{ascending:!1});if(b)throw b;a(w||[]);const j={total_gross:0,total_fees:0,total_net:0,pending_amount:0,completed_amount:0,transaction_count:(w==null?void 0:w.length)||0};w==null||w.forEach(N=>{j.total_gross+=Number(N.gross_amount),j.total_fees+=Number(N.platform_fee)+Number(N.payment_gateway_fee),j.total_net+=Number(N.net_amount),N.transaction_status==="completed"?j.completed_amount+=Number(N.net_amount):(N.transaction_status==="pending"||N.transaction_status==="processing")&&(j.pending_amount+=Number(N.net_amount))}),c(j)}catch(w){console.error("Error loading transactions:",w)}finally{r(!1)}},f=w=>{switch(w){case"completed":return n.jsxs(ct,{variant:"default",className:"gap-1",children:[n.jsx(Zr,{className:"h-3 w-3"}),"Recebido"]});case"processing":return n.jsxs(ct,{variant:"secondary",className:"gap-1",children:[n.jsx(ef,{className:"h-3 w-3"}),"Processando"]});case"pending":return n.jsxs(ct,{variant:"outline",className:"gap-1",children:[n.jsx(ef,{className:"h-3 w-3"}),"Pendente"]});case"failed":return n.jsxs(ct,{variant:"destructive",className:"gap-1",children:[n.jsx(qn,{className:"h-3 w-3"}),"Falhou"]});case"refunded":return n.jsx(ct,{variant:"secondary",children:"Reembolsado"});default:return n.jsx(ct,{variant:"outline",children:w})}},p=w=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(w),x=()=>{const w=[["Data","Evento","Valor Bruto","Taxas","Valor Líquido","Status","Data Pagamento","Data Repasse"].join(","),...s.map(N=>{var C;return[new Date(N.created_at).toLocaleDateString("pt-BR"),((C=N.events)==null?void 0:C.title)||"N/A",N.gross_amount,(Number(N.platform_fee)+Number(N.payment_gateway_fee)).toFixed(2),N.net_amount,N.transaction_status,N.payment_date?new Date(N.payment_date).toLocaleDateString("pt-BR"):"N/A",N.transfer_date?new Date(N.transfer_date).toLocaleDateString("pt-BR"):"N/A"].join(",")})].join(`
`),b=new Blob([w],{type:"text/csv;charset=utf-8;"}),j=document.createElement("a");j.href=URL.createObjectURL(b),j.download=`transacoes_${new Date().toISOString().split("T")[0]}.csv`,j.click()};return t?n.jsx("div",{className:"flex justify-center p-8",children:"Carregando vendas..."}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[n.jsxs(Ne,{children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(He,{className:"text-sm font-medium",children:"Vendas Brutas"}),n.jsx(An,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ce,{children:[n.jsx("div",{className:"text-2xl font-bold",children:p(o.total_gross)}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[o.transaction_count," transações"]})]})]}),n.jsxs(Ne,{children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(He,{className:"text-sm font-medium",children:"Total em Taxas"}),n.jsx(W8,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ce,{children:[n.jsx("div",{className:"text-2xl font-bold",children:p(o.total_fees)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Plataforma + Gateway"})]})]}),n.jsxs(Ne,{children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(He,{className:"text-sm font-medium",children:"A Receber"}),n.jsx(ef,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ce,{children:[n.jsx("div",{className:"text-2xl font-bold",children:p(o.pending_amount)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Aguardando repasse"})]})]}),n.jsxs(Ne,{children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(He,{className:"text-sm font-medium",children:"Recebido"}),n.jsx(Zr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ce,{children:[n.jsx("div",{className:"text-2xl font-bold",children:p(o.completed_amount)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Total transferido"})]})]})]}),n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(He,{children:"Histórico de Transações"}),n.jsx(Jr,{children:"Todas as vendas de ingressos e seus respectivos repasses"})]}),s.length>0&&n.jsxs(K,{variant:"outline",size:"sm",onClick:x,children:[n.jsx(Ko,{className:"h-4 w-4 mr-2"}),"Exportar CSV"]})]})}),n.jsx(Ce,{children:s.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Nenhuma transação encontrada"}):n.jsx("div",{className:"space-y-4",children:s.map(w=>{var b;return n.jsxs("div",{className:"border rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium",children:((b=w.events)==null?void 0:b.title)||"Evento"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:xu(new Date(w.created_at),{addSuffix:!0,locale:Ir})})]}),f(w.transaction_status)]}),n.jsx(la,{className:"my-2"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground",children:"Valor Bruto"}),n.jsx("div",{className:"font-medium",children:p(Number(w.gross_amount))})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground",children:"Taxas"}),n.jsxs("div",{className:"font-medium text-red-600",children:["-",p(Number(w.platform_fee)+Number(w.payment_gateway_fee))]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground",children:"Valor Líquido"}),n.jsx("div",{className:"font-medium text-green-600",children:p(Number(w.net_amount))})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground",children:w.transfer_date?"Recebido em":"Previsão"}),n.jsx("div",{className:"font-medium",children:w.transfer_date?new Date(w.transfer_date).toLocaleDateString("pt-BR"):w.transfer_scheduled_date?new Date(w.transfer_scheduled_date).toLocaleDateString("pt-BR"):"A definir"})]})]})]},w.id)})})})]})]})}function bq(e){const[t,r]=v.useState(null),[s,a]=v.useState([]),[o,c]=v.useState([]),[u,f]=v.useState(!1),p=async()=>{if(e)try{f(!0);const{data:x,error:w}=await $.from("organizers").select("*").eq("id",e).eq("is_page_active",!0).maybeSingle();if(w)throw w;if(!x)return;const{data:b}=await $.from("profiles").select("display_name, avatar_url, bio").eq("user_id",x.user_id).maybeSingle(),{data:j}=await $.from("organizer_stats").select("*").eq("organizer_id",e).maybeSingle(),N={...x,profile:b,stats:j||{followers_count:0,events_count:0,average_rating:0,total_ratings:0}};r(N);const{data:C,error:T}=await $.from("events").select("*").eq("organizer_id",e).order("event_date",{ascending:!1});if(T)throw T;const S=await Promise.all((C||[]).map(async k=>{const{count:D}=await $.from("event_likes").select("*",{count:"exact",head:!0}).eq("event_id",k.id),{count:L}=await $.from("event_comments").select("*",{count:"exact",head:!0}).eq("event_id",k.id);return{...k,likes_count:D||0,comments_count:L||0}}));a(S);const{data:E,error:_}=await $.from("custom_links").select("*").eq("organizer_id",e).eq("is_active",!0).order("sort_order",{ascending:!0});if(_)throw _;c(E||[])}catch(x){console.error("Error fetching organizer details:",x)}finally{f(!1)}};return v.useEffect(()=>{p()},[e]),v.useEffect(()=>{if(!t)return;const x=$.channel("realtime-organizer-profile-details").on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles",filter:`user_id=eq.${t.user_id}`},w=>{const b=w.new;r(j=>{var N,C,T;return j&&{...j,profile:{...j.profile||{},display_name:b.display_name??((N=j.profile)==null?void 0:N.display_name),avatar_url:b.avatar_url??((C=j.profile)==null?void 0:C.avatar_url),bio:b.bio??((T=j.profile)==null?void 0:T.bio)}}})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"organizers",filter:`id=eq.${t.id}`},w=>{const b=w.new;r(j=>j&&{...j,page_title:b.page_title??j.page_title,avatar_url:b.avatar_url??j.avatar_url,page_description:b.page_description??j.page_description,updated_at:b.updated_at??j.updated_at})}).subscribe();return()=>{$.removeChannel(x)}},[t==null?void 0:t.id,t==null?void 0:t.user_id]),{organizer:t,events:s,customLinks:o,loading:u,refetch:p}}function _q(e){const[t,r]=v.useState(!1),[s,a]=v.useState(!0),{user:o}=bt();v.useEffect(()=>{if(!o||!e){a(!1);return}c()},[o,e]);const c=async()=>{if(!(!o||!e))try{const{data:f,error:p}=await $.from("followers").select("id").eq("user_id",o.id).eq("organizer_id",e).maybeSingle();p&&p.code!=="PGRST116"&&console.error("Error checking follow status:",p),r(!!f)}catch(f){console.error("Error:",f)}finally{a(!1)}};return{isFollowing:t,loading:s,toggleFollow:async()=>{if(!o)return G.error("Faça login para seguir organizadores"),!1;if(!e)return G.error("ID do organizador não encontrado"),!1;a(!0);try{if(t){const{error:f}=await $.from("followers").delete().eq("user_id",o.id).eq("organizer_id",e);if(f)throw f;return r(!1),G.success("Você deixou de seguir este organizador"),!0}else{const{error:f}=await $.from("followers").insert({user_id:o.id,organizer_id:e});if(f)throw f;return r(!0),G.success("Agora você está seguindo este organizador!"),!0}}catch(f){return console.error("Error toggling follow:",f),G.error("Erro ao atualizar status de seguidor"),!1}finally{a(!1)}}}}function Nq({eventId:e,organizerId:t}){var P,F,Y;const[r,s]=v.useState([]),[a,o]=v.useState(!0),[c,u]=v.useState(!1),[f,p]=v.useState(!1),[x,w]=v.useState(0),[b,j]=v.useState(!1),[N,C]=v.useState(""),{user:T}=bt();if(_t(),Qn(),v.useEffect(()=>{(async()=>{try{const{data:q,error:re}=await $.from("organizer_photos").select("*").eq("organizer_id",t).eq("event_id",e).eq("is_active",!0).order("created_at",{ascending:!1});if(re)throw re;s(q||[])}catch(q){console.error("Error fetching event photos:",q)}finally{o(!1)}})()},[e,t]),a)return n.jsx("div",{className:"grid grid-cols-2 gap-2",children:[1,2,3,4].map(U=>n.jsx(St,{className:"aspect-square rounded-lg"},U))});if(r.length===0)return n.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Nenhuma foto deste evento ainda"});const S=U=>{if(!T){C("para ver as fotos ampliadas"),j(!0);return}w(U),p(!0)},E=()=>{if(!T){C("para ver todas as fotos"),j(!0);return}u(!0)},_=U=>{w(U),u(!1),p(!0)},k=async(U,q)=>{try{const W=await(await fetch(U)).blob(),ne=window.URL.createObjectURL(W),oe=document.createElement("a");oe.href=ne,oe.download=q||"foto-evento.jpg",document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),window.URL.revokeObjectURL(ne),G.success("Foto baixada com sucesso!")}catch(re){console.error("Error downloading photo:",re),G.error("Erro ao baixar a foto")}},D=()=>{w(U=>U>0?U-1:r.length-1)},L=()=>{w(U=>U<r.length-1?U+1:0)},R=r.slice(0,3),M=r.length-3;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[R.map((U,q)=>n.jsx("div",{className:"aspect-square bg-surface rounded-lg overflow-hidden relative group cursor-pointer",onClick:()=>S(q),children:n.jsx("img",{src:U.photo_url,alt:U.caption||"Foto do evento",className:"w-full h-full object-cover hover:scale-105 transition-transform"})},U.id)),M>0&&n.jsxs("div",{className:"aspect-square bg-surface rounded-lg overflow-hidden relative cursor-pointer",onClick:E,children:[n.jsx("img",{src:r[3].photo_url,alt:"Mais fotos",className:"w-full h-full object-cover"}),n.jsx("div",{className:"absolute inset-0 bg-black/60 hover:bg-black/70 transition-colors flex items-center justify-center",children:n.jsxs("span",{className:"text-white font-bold text-2xl",children:["+",M+1]})})]})]}),n.jsx(zt,{open:c,onOpenChange:u,children:n.jsx(Ft,{className:"max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-lg font-semibold",children:["Todas as fotos (",r.length,")"]}),n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>u(!1),children:n.jsx(sr,{className:"h-5 w-5"})})]}),n.jsx("div",{className:"grid grid-cols-3 gap-3",children:r.map((U,q)=>n.jsx("div",{className:"aspect-square bg-surface rounded-lg overflow-hidden cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>_(q),children:n.jsx("img",{src:U.photo_url,alt:U.caption||`Foto ${q+1}`,className:"w-full h-full object-cover"})},U.id))})]})})}),n.jsx(zt,{open:f,onOpenChange:p,children:n.jsx(Ft,{className:"max-w-4xl w-full h-[90vh] p-0 bg-black",children:n.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[n.jsx(K,{variant:"ghost",size:"icon",className:"absolute top-4 right-4 z-50 bg-black/50 hover:bg-black/70 text-white",onClick:()=>p(!1),children:n.jsx(sr,{className:"h-6 w-6"})}),n.jsx(K,{variant:"ghost",size:"icon",className:"absolute top-4 right-16 z-50 bg-black/50 hover:bg-black/70 text-white",onClick:()=>k(r[x].photo_url,r[x].caption),children:n.jsx(Ko,{className:"h-6 w-6"})}),r.length>1&&n.jsx(K,{variant:"ghost",size:"icon",className:"absolute left-4 z-50 bg-black/50 hover:bg-black/70 text-white",onClick:D,children:n.jsx(S1,{className:"h-8 w-8"})}),r.length>1&&n.jsx(K,{variant:"ghost",size:"icon",className:"absolute right-4 z-50 bg-black/50 hover:bg-black/70 text-white",onClick:L,children:n.jsx(Ru,{className:"h-8 w-8"})}),n.jsx("img",{src:(P=r[x])==null?void 0:P.photo_url,alt:((F=r[x])==null?void 0:F.caption)||"Foto do evento",className:"max-h-full max-w-full object-contain"}),n.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/50 text-white px-4 py-2 rounded-full text-sm",children:[x+1," / ",r.length]}),((Y=r[x])==null?void 0:Y.caption)&&n.jsx("div",{className:"absolute bottom-16 left-1/2 -translate-x-1/2 bg-black/50 text-white px-4 py-2 rounded-lg text-sm max-w-md text-center",children:r[x].caption})]})})}),n.jsx(Wu,{open:b,onOpenChange:j,actionDescription:N})]})}function jq({onBack:e,organizerId:t,onEventClick:r}){var se,ce,ge,Te,be,Se,Me;const[s,a]=v.useState("eventos"),[o,c]=v.useState([]),[u,f]=v.useState(!1),[p,x]=v.useState(!1),[w,b]=v.useState(!1),[j,N]=v.useState(""),[C,T]=v.useState(!1),[S,E]=v.useState(!1),[_,k]=v.useState(""),D=v.useRef(null),{organizersWithStories:L,toggleLike:R,markAsViewed:M,deleteStory:P}=hv(),{organizer:F,events:Y,customLinks:U,loading:q}=bq(t),{updateOrganizerProfile:re}=Oa(),{user:W}=bt();_t(),Qn();const{isFollowing:ne,loading:oe,toggleFollow:ae}=_q(t);v.useEffect(()=>{s==="fotos"&&(async()=>{if(!t)return;const{data:We}=await $.from("events").select("*").eq("organizer_id",t).order("event_date",{ascending:!1});c(We||[])})()},[t,s]);const J=()=>{if(!F)return;const ue=`${Ym()}/${F.username}`;navigator.clipboard.writeText(ue).then(()=>{G.success("Link copiado!",{description:"O link da página foi copiado para a área de transferência"})}).catch(()=>{G.error("Erro ao copiar link")})},he=async ue=>{var ze;const We=(ze=ue.target.files)==null?void 0:ze[0];if(!We||!W)return;const Ee=We.type.toLowerCase();if(!["image/jpeg","image/jpg","image/png","image/webp","image/gif"].includes(Ee)){G.error("Formato não suportado",{description:"Por favor, use imagens JPG, PNG ou WEBP. Se você está no iPhone, abra a foto no app Fotos e compartilhe > Salvar imagem para converter automaticamente para JPG."});return}if(We.size>5*1024*1024){G.error("Arquivo muito grande",{description:"A imagem deve ter no máximo 5MB"});return}const _e=new FileReader;_e.onload=()=>{k(_e.result),E(!0)},_e.readAsDataURL(We)},ye=async ue=>{var We;if(W)try{f(!0),E(!1);const Ee=(We=ue.name.split(".").pop())==null?void 0:We.toLowerCase(),Je=Date.now(),_e=`${W.id}/cover-${Je}.${Ee}`,{error:ze}=await $.storage.from("user-uploads").upload(_e,ue,{upsert:!0});if(ze)throw ze;const{data:{publicUrl:Ge}}=$.storage.from("user-uploads").getPublicUrl(_e);await re({cover_image_url:Ge}),G.success("Capa atualizada com sucesso!"),window.location.reload()}catch(Ee){console.error("Error uploading cover:",Ee),G.error("Erro ao atualizar capa")}finally{f(!1)}},H=async()=>{if(W)try{x(!0),await re({cover_image_url:null}),G.success("Capa removida com sucesso!"),window.location.reload()}catch(ue){console.error("Error removing cover:",ue),G.error("Erro ao remover capa")}finally{x(!1)}},ee=ue=>{const We=new Date(ue),Je=["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"][We.getDay()],_e=We.getHours().toString().padStart(2,"0"),ze=We.getMinutes().toString().padStart(2,"0");return`${Je}, ${_e}:${ze}`};if(q)return n.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[n.jsxs("div",{className:"flex items-center gap-4 p-4",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Organizador"})]}),n.jsxs("div",{className:"px-4 pb-6 text-center space-y-4",children:[n.jsx(St,{className:"h-24 w-24 rounded-full mx-auto"}),n.jsx(St,{className:"h-6 w-48 mx-auto"}),n.jsx(St,{className:"h-4 w-64 mx-auto"}),n.jsx("div",{className:"flex justify-center gap-6",children:[1,2,3].map(ue=>n.jsxs("div",{className:"text-center",children:[n.jsx(St,{className:"h-6 w-12 mx-auto mb-1"}),n.jsx(St,{className:"h-3 w-16 mx-auto"})]},ue))})]})]});if(!F)return n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-muted-foreground mb-4",children:"Organizador não encontrado"}),n.jsx(K,{variant:"outline",onClick:e,children:"Voltar"})]})});const X=W&&F.user_id===W.id,te=[{id:"eventos",label:"Eventos",icon:Et},{id:"links",label:"Links",icon:Vr},{id:"fotos",label:"Fotos",icon:En},...X?[{id:"financeiro",label:"Financeiro",icon:An}]:[]];return n.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[n.jsxs("div",{className:"relative h-[200px] overflow-hidden",style:{backgroundImage:F.cover_image_url?`url(${F.cover_image_url})`:"linear-gradient(135deg, hsl(var(--primary)) 0%, hsl(var(--primary) / 0.8) 25%, hsl(220 70% 50%) 50%, hsl(200 70% 50%) 75%, hsl(var(--primary) / 0.6) 100%)",backgroundSize:"cover",backgroundPosition:"center"},children:[n.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:"rgba(0, 0, 0, 0.5)",zIndex:0}}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 pointer-events-none",style:{height:"120px",background:"linear-gradient(to top, hsl(var(--background)) 0%, hsl(var(--background) / 0.95) 40%, transparent 100%)",zIndex:1}}),n.jsxs("div",{className:"flex items-center justify-between p-4 relative",style:{zIndex:10},children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:e,className:"bg-black/20 hover:bg-black/40 backdrop-blur-sm",children:n.jsx(gt,{className:"h-5 w-5 text-white"})}),n.jsx(K,{variant:"ghost",size:"icon",onClick:J,className:"bg-black/20 hover:bg-black/40 backdrop-blur-sm",children:n.jsx(Is,{className:"h-5 w-5 text-white"})})]}),W&&F.user_id===W.id&&n.jsxs(n.Fragment,{children:[n.jsx("input",{ref:D,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp,image/gif",onChange:he,className:"hidden"}),n.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",style:{zIndex:10},children:[F.cover_image_url&&n.jsx(K,{variant:"ghost",size:"icon",onClick:H,disabled:p,className:"bg-red-500/80 hover:bg-red-600/90 backdrop-blur-sm text-white",title:"Remover capa",children:p?n.jsx("div",{className:"h-5 w-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):n.jsx(En,{className:"h-5 w-5"})}),n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>{var ue;return(ue=D.current)==null?void 0:ue.click()},disabled:u,className:"bg-black/20 hover:bg-black/40 backdrop-blur-sm text-white",title:F.cover_image_url?"Alterar capa":"Adicionar capa",children:u?n.jsx("div",{className:"h-5 w-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):n.jsx(En,{className:"h-5 w-5"})})]})]})]}),n.jsxs("div",{className:"px-4 pb-6 text-center -mt-24 relative z-10",children:[n.jsx(Ut,{className:"h-24 w-24 mx-auto mb-4 border-4 border-background shadow-lg cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>{if(t){const ue=L.find(We=>We.id===t);ue&&ue.stories.length>0&&T(!0)}},children:F.avatar_url||(se=F.profile)!=null&&se.avatar_url?n.jsx(Kt,{src:F.avatar_url||((ce=F.profile)==null?void 0:ce.avatar_url),alt:F.page_title}):n.jsx($t,{className:"bg-primary text-primary-foreground text-2xl",children:F.page_title.charAt(0)})}),n.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:((ge=F.profile)==null?void 0:ge.display_name)||F.page_title}),n.jsx("p",{className:"text-muted-foreground max-w-sm mx-auto mb-4",children:((Te=F.profile)==null?void 0:Te.bio)||F.page_description||"Organizador de eventos"}),n.jsxs("div",{className:"flex justify-center gap-8 mb-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-lg font-semibold text-foreground",children:((Se=(be=F.stats)==null?void 0:be.followers_count)==null?void 0:Se.toLocaleString())||"0"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Seguidores"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-lg font-semibold text-foreground",children:((Me=F.stats)==null?void 0:Me.events_count)||Y.length}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Eventos"})]})]}),!W||F.user_id!==W.id?n.jsxs("div",{className:"flex justify-center gap-3",children:[n.jsx(K,{variant:"glow",size:"lg",className:"flex-1 max-w-[200px]",onClick:async()=>{W?await ae():(N("para seguir este organizador"),b(!0))},disabled:oe,children:oe?"Carregando...":ne?n.jsxs(n.Fragment,{children:[n.jsx(Pj,{className:"h-4 w-4 mr-2"}),"Seguindo"]}):n.jsxs(n.Fragment,{children:[n.jsx(ym,{className:"h-4 w-4 mr-2"}),"Seguir"]})}),n.jsxs(K,{variant:"outline",size:"lg",onClick:J,children:[n.jsx(Is,{className:"h-4 w-4 mr-2"}),"Compartilhar"]})]}):n.jsx("div",{className:"flex justify-center",children:n.jsxs(K,{variant:"outline",size:"lg",onClick:J,children:[n.jsx(Is,{className:"h-4 w-4 mr-2"}),"Compartilhar minha página"]})})]}),n.jsx("div",{className:"px-4 mb-6 -mt-4 relative",style:{zIndex:10},children:n.jsx("div",{className:"flex gap-2 justify-center",children:te.map(ue=>{const We=ue.icon;return n.jsxs("button",{onClick:()=>a(ue.id),className:`flex-shrink-0 flex items-center gap-2 px-4 py-2 rounded-full border transition-all ${s===ue.id?"bg-primary text-primary-foreground border-primary":"bg-surface border-border text-muted-foreground hover:text-foreground hover:border-primary/50"}`,children:[n.jsx(We,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm font-medium",children:ue.label})]},ue.id)})})}),n.jsxs("div",{className:"px-4 max-w-md mx-auto",children:[s==="eventos"&&n.jsx("div",{className:"space-y-4",children:Y.length>0?Y.map(ue=>n.jsxs(Ne,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>r==null?void 0:r(ue.id),children:[n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:ue.image_url||"/placeholder.svg",alt:ue.title,className:"w-full h-32 object-cover"}),ue.is_live&&n.jsxs(ct,{className:"absolute top-2 right-2 bg-destructive text-destructive-foreground",children:[n.jsx("div",{className:"h-2 w-2 bg-white rounded-full animate-pulse mr-1"}),"AO VIVO"]})]}),n.jsxs(Ce,{className:"p-4",children:[n.jsx("h3",{className:"font-semibold text-foreground mb-1",children:ue.title}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[n.jsx(Et,{className:"h-3 w-3"}),n.jsx("span",{children:ee(ue.event_date)})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(Rt,{className:"h-3 w-3"}),n.jsx("span",{children:ue.location}),n.jsx(er,{className:"h-3 w-3 ml-auto"}),n.jsx("span",{children:ue.current_attendees})]}),n.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Ja,{className:"h-3 w-3"}),n.jsx("span",{children:ue.likes_count||0})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Ls,{className:"h-3 w-3"}),n.jsx("span",{children:ue.comments_count||0})]})]})]})]},ue.id)):n.jsxs("div",{className:"text-center py-8",children:[n.jsx("p",{className:"text-muted-foreground",children:"Nenhum evento criado ainda."}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Os eventos aparecerão aqui assim que forem criados."})]})}),s==="links"&&n.jsxs("div",{className:"space-y-3",children:[F.show_whatsapp&&F.whatsapp_url&&n.jsx(Ne,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ce,{className:"p-4",children:n.jsxs("a",{href:F.whatsapp_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-green-500 text-white",children:n.jsx(Ls,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:"WhatsApp"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Entre em contato"})]}),n.jsx(Vr,{className:"h-4 w-4 text-muted-foreground"})]})})}),F.show_instagram&&F.instagram_url&&n.jsx(Ne,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ce,{className:"p-4",children:n.jsxs("a",{href:F.instagram_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-gradient-to-br from-purple-600 via-pink-600 to-orange-500 text-white",children:n.jsx(Gi,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:"Instagram"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Siga no Instagram"})]}),n.jsx(Vr,{className:"h-4 w-4 text-muted-foreground"})]})})}),F.show_playlist&&F.playlist_url&&n.jsx(Ne,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ce,{className:"p-4",children:n.jsxs("a",{href:F.playlist_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-purple-600 text-white",children:n.jsx(au,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:"Playlist"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Ouça nossa playlist"})]}),n.jsx(Vr,{className:"h-4 w-4 text-muted-foreground"})]})})}),F.show_location&&F.location_url&&n.jsx(Ne,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ce,{className:"p-4",children:n.jsxs("a",{href:F.location_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-red-500 text-white",children:n.jsx(Rt,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:"Localização"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Veja no mapa"})]}),n.jsx(Vr,{className:"h-4 w-4 text-muted-foreground"})]})})}),F.show_website&&F.website_url&&n.jsx(Ne,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ce,{className:"p-4",children:n.jsxs("a",{href:F.website_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-blue-600 text-white",children:n.jsx(su,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:"Site"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Visite nosso site"})]}),n.jsx(Vr,{className:"h-4 w-4 text-muted-foreground"})]})})}),U.length>0&&U.map(ue=>n.jsx(Ne,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ce,{className:"p-4",children:n.jsxs("a",{href:ue.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white text-sm font-bold",style:{backgroundColor:ue.color},children:ue.icon||ue.title.charAt(0)}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:ue.title}),n.jsx("p",{className:"text-sm text-muted-foreground truncate",children:ue.url})]}),n.jsx(Vr,{className:"h-4 w-4 text-muted-foreground"})]})})},ue.id)),!F.show_whatsapp&&!F.show_instagram&&!F.show_playlist&&!F.show_location&&!F.show_website&&U.length===0&&n.jsxs("div",{className:"text-center py-8",children:[n.jsx("p",{className:"text-muted-foreground",children:"Nenhum link adicionado ainda."}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Os links aparecerão aqui quando forem adicionados."})]})]}),s==="fotos"&&n.jsx("div",{className:"space-y-6",children:o.length===0?n.jsx("div",{className:"text-center py-8",children:n.jsxs("div",{className:"mb-4",children:[n.jsx(En,{className:"h-12 w-12 text-muted-foreground mx-auto mb-2"}),n.jsx("p",{className:"text-muted-foreground",children:"O organizador ainda não adicionou fotos."})]})}):o.map(ue=>n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-foreground",children:ue.title}),n.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(ue.event_date).toLocaleDateString("pt-BR")})]}),n.jsx(Nq,{eventId:ue.id,organizerId:F.id})]},ue.id))}),s==="financeiro"&&X&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Dados Financeiros"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Gerencie suas informações bancárias e fiscais para receber repasses"})]}),n.jsx(ZA,{organizerId:F.id})]}),n.jsx(Separator,{className:"my-8"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Vendas de Ingressos"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Acompanhe suas vendas e repasses"})]}),n.jsx(JA,{organizerId:F.id})]})]})]}),C&&t&&L.find(ue=>ue.id===t)&&n.jsx(uv,{open:C,onClose:()=>T(!1),organizer:L.find(ue=>ue.id===t),initialStoryIndex:0,onLike:R,onDelete:P,onMarkAsViewed:M}),n.jsx("footer",{className:"mt-8 pb-6 text-center border-t border-border pt-6",children:n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Esse site foi desenvolvido pela ",n.jsx("a",{href:"https://flatgrowth.com.br/",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Flat Company"})]})}),n.jsx(Wu,{open:w,onOpenChange:b,actionDescription:j}),n.jsx(Rv,{open:S,onOpenChange:E,imageSrc:_,onCropComplete:ye,aspectRatio:16/9})]})}function Cq(){const[e,t]=v.useState([]),[r,s]=v.useState(!1),a=async()=>{try{s(!0);const{data:o,error:c}=await $.from("organizers").select(`
          *,
          stats:organizer_stats(
            followers_count,
            events_count
          )
        `).eq("is_page_active",!0).order("created_at",{ascending:!1});if(c)throw c;const u=await Promise.all((o||[]).map(async f=>{const[p,x,w]=await Promise.all([$.from("profiles").select("display_name, avatar_url, bio").eq("user_id",f.user_id).maybeSingle(),$.from("followers").select("id",{count:"exact",head:!0}).eq("organizer_id",f.id),$.from("events").select("id",{count:"exact",head:!0}).eq("organizer_id",f.id)]),b=p.data,j=x.count??0,N=w.count??0;return{...f,profile:b,verified:Math.random()>.5,category:f.page_subtitle||"Entretenimento",stats:{followers_count:j,events_count:N}}}));t(u)}catch(o){console.error("Error fetching organizers:",o)}finally{s(!1)}};return v.useEffect(()=>{a()},[]),v.useEffect(()=>{const o=$.channel("realtime-organizer-list").on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles"},c=>{const u=c.new;t(f=>f.map(p=>{var x,w,b;return p.user_id===u.user_id?{...p,profile:{...p.profile||{},display_name:u.display_name??((x=p.profile)==null?void 0:x.display_name),avatar_url:u.avatar_url??((w=p.profile)==null?void 0:w.avatar_url),bio:u.bio??((b=p.profile)==null?void 0:b.bio)}}:p}))}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"organizers"},c=>{const u=c.new;t(f=>f.map(p=>p.id===u.id?{...p,page_title:u.page_title??p.page_title,avatar_url:u.avatar_url??p.avatar_url,page_description:u.page_description??p.page_description,updated_at:u.updated_at??p.updated_at}:p))}).on("postgres_changes",{event:"INSERT",schema:"public",table:"followers"},c=>{const u=c.new;t(f=>f.map(p=>{var x,w;if(p.id===u.organizer_id){const b=((x=p.stats)==null?void 0:x.followers_count)??0;return{...p,stats:{followers_count:b+1,events_count:((w=p.stats)==null?void 0:w.events_count)??0}}}return p}))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"followers"},c=>{const u=c.old;t(f=>f.map(p=>{var x,w;if(p.id===u.organizer_id){const b=((x=p.stats)==null?void 0:x.followers_count)??0;return{...p,stats:{followers_count:Math.max(0,b-1),events_count:((w=p.stats)==null?void 0:w.events_count)??0}}}return p}))}).on("postgres_changes",{event:"INSERT",schema:"public",table:"events"},c=>{const u=c.new;t(f=>f.map(p=>{var x,w;if(p.id===u.organizer_id){const b=((x=p.stats)==null?void 0:x.events_count)??0;return{...p,stats:{followers_count:((w=p.stats)==null?void 0:w.followers_count)??0,events_count:b+1}}}return p}))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"events"},c=>{const u=c.old;t(f=>f.map(p=>{var x,w;if(p.id===u.organizer_id){const b=((x=p.stats)==null?void 0:x.events_count)??0;return{...p,stats:{followers_count:((w=p.stats)==null?void 0:w.followers_count)??0,events_count:Math.max(0,b-1)}}}return p}))}).subscribe();return()=>{$.removeChannel(o)}},[]),{organizers:e,loading:r,fetchOrganizers:a}}function Eq({onBack:e,onOrganizerClick:t}){const[r,s]=v.useState(""),[a,o]=v.useState("todos"),{organizers:c,loading:u}=Cq(),f=[{id:"todos",label:"Todos"},{id:"festas",label:"🎉 Festas"},{id:"shows",label:"🎤 Shows"},{id:"fitness",label:"💪 Fitness"},{id:"igreja",label:"🙏 Igreja"},{id:"cursos",label:"📚 Cursos"},{id:"bares",label:"🍻 Bares"},{id:"boates",label:"🪩 Boates"},{id:"esportes",label:"⚽ Esportes"}],p=c.filter(x=>{var j;const w=x.page_title.toLowerCase().includes(r.toLowerCase())||(((j=x.profile)==null?void 0:j.bio)||"").toLowerCase().includes(r.toLowerCase()),b=a==="todos"||(x.category||"")===a;return w&&b});return u?n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b border-border",children:n.jsxs("div",{className:"flex items-center justify-between p-4 max-w-md mx-auto",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Organizadores"}),n.jsx("div",{className:"w-10"})]})}),n.jsx("div",{className:"p-4 max-w-md mx-auto pb-20 space-y-4",children:[1,2,3,4].map(x=>n.jsx("div",{className:"p-4 space-y-3",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(St,{className:"h-12 w-12 rounded-full"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx(St,{className:"h-4 w-32"}),n.jsx(St,{className:"h-4 w-full"}),n.jsx(St,{className:"h-4 w-24"})]})]})},x))})]}):n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b border-border",children:n.jsxs("div",{className:"flex items-center justify-between p-4 max-w-md mx-auto",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Organizadores"}),n.jsx("div",{className:"w-10"})]})}),n.jsxs("div",{className:"p-4 max-w-md mx-auto pb-20",children:[n.jsx("div",{className:"mb-4",children:n.jsxs("div",{className:"relative",children:[n.jsx(iu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(we,{type:"text",placeholder:"Buscar organizadores...",value:r,onChange:x=>s(x.target.value),className:"pl-10"})]})}),n.jsx("div",{className:"mb-6",children:n.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:f.map(x=>n.jsx("button",{onClick:()=>o(x.id),className:`flex-shrink-0 px-4 py-2 rounded-full border transition-all ${a===x.id?"bg-primary text-primary-foreground border-primary":"bg-surface border-border text-muted-foreground hover:text-foreground hover:border-primary/50"}`,children:n.jsx("span",{className:"text-sm font-medium",children:x.label})},x.id))})}),n.jsx("div",{className:"space-y-4",children:p.map(x=>{var w,b,j,N,C;return n.jsx("div",{onClick:()=>t(x.id),className:"p-4 bg-card rounded-lg border border-border hover:border-primary/30 transition-all cursor-pointer event-card",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"avatar-story",children:n.jsxs(Ut,{className:"h-12 w-12",children:[n.jsx(Kt,{src:((w=x.profile)==null?void 0:w.avatar_url)||x.avatar_url}),n.jsx($t,{className:"bg-surface text-lg font-bold",children:x.page_title.charAt(0)})]})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h3",{className:"font-semibold text-foreground line-clamp-1",children:((b=x.profile)==null?void 0:b.display_name)||x.page_title}),x.verified&&n.jsx(ct,{variant:"secondary",className:"text-xs",children:"✓ Verificado"})]}),n.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:((j=x.profile)==null?void 0:j.bio)||x.page_description||"Organizador de eventos"}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(er,{className:"h-3 w-3"}),n.jsxs("span",{children:[(((N=x.stats)==null?void 0:N.followers_count)||0).toLocaleString()," seguidores"]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Et,{className:"h-3 w-3"}),n.jsxs("span",{children:[((C=x.stats)==null?void 0:C.events_count)||0," eventos"]})]})]}),x.category&&n.jsx("div",{className:"mt-2",children:n.jsx(ct,{variant:"outline",className:"text-xs",children:x.category.charAt(0).toUpperCase()+x.category.slice(1)})})]})]})},x.id)})}),p.length===0&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx(iu,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"Nenhum organizador encontrado"}),n.jsx("p",{className:"text-muted-foreground",children:"Tente ajustar os filtros ou buscar por outros termos"})]})]})]})}var cp="Checkbox",[Sq]=Mr(cp),[Aq,Pv]=Sq(cp);function kq(e){const{__scopeCheckbox:t,checked:r,children:s,defaultChecked:a,disabled:o,form:c,name:u,onCheckedChange:f,required:p,value:x="on",internal_do_not_use_render:w}=e,[b,j]=Ms({prop:r,defaultProp:a??!1,onChange:f,caller:cp}),[N,C]=v.useState(null),[T,S]=v.useState(null),E=v.useRef(!1),_=N?!!c||!!N.closest("form"):!0,k={checked:b,disabled:o,setChecked:j,control:N,setControl:C,name:u,form:c,value:x,hasConsumerStoppedPropagationRef:E,required:p,defaultChecked:$i(a)?!1:a,isFormControl:_,bubbleInput:T,setBubbleInput:S};return n.jsx(Aq,{scope:t,...k,children:Tq(w)?w(k):s})}var ek="CheckboxTrigger",tk=v.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...s},a)=>{const{control:o,value:c,disabled:u,checked:f,required:p,setControl:x,setChecked:w,hasConsumerStoppedPropagationRef:b,isFormControl:j,bubbleInput:N}=Pv(ek,e),C=tt(a,x),T=v.useRef(f);return v.useEffect(()=>{const S=o==null?void 0:o.form;if(S){const E=()=>w(T.current);return S.addEventListener("reset",E),()=>S.removeEventListener("reset",E)}},[o,w]),n.jsx(Ve.button,{type:"button",role:"checkbox","aria-checked":$i(f)?"mixed":f,"aria-required":p,"data-state":ik(f),"data-disabled":u?"":void 0,disabled:u,value:c,...s,ref:C,onKeyDown:Re(t,S=>{S.key==="Enter"&&S.preventDefault()}),onClick:Re(r,S=>{w(E=>$i(E)?!0:!E),N&&j&&(b.current=S.isPropagationStopped(),b.current||S.stopPropagation())})})});tk.displayName=ek;var Ov=v.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:s,checked:a,defaultChecked:o,required:c,disabled:u,value:f,onCheckedChange:p,form:x,...w}=e;return n.jsx(kq,{__scopeCheckbox:r,checked:a,defaultChecked:o,disabled:u,required:c,onCheckedChange:p,name:s,form:x,value:f,internal_do_not_use_render:({isFormControl:b})=>n.jsxs(n.Fragment,{children:[n.jsx(tk,{...w,ref:t,__scopeCheckbox:r}),b&&n.jsx(ak,{__scopeCheckbox:r})]})})});Ov.displayName=cp;var rk="CheckboxIndicator",nk=v.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:s,...a}=e,o=Pv(rk,r);return n.jsx(Hr,{present:s||$i(o.checked)||o.checked===!0,children:n.jsx(Ve.span,{"data-state":ik(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});nk.displayName=rk;var sk="CheckboxBubbleInput",ak=v.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:s,hasConsumerStoppedPropagationRef:a,checked:o,defaultChecked:c,required:u,disabled:f,name:p,value:x,form:w,bubbleInput:b,setBubbleInput:j}=Pv(sk,e),N=tt(r,j),C=Xu(o),T=Du(s);v.useEffect(()=>{const E=b;if(!E)return;const _=window.HTMLInputElement.prototype,D=Object.getOwnPropertyDescriptor(_,"checked").set,L=!a.current;if(C!==o&&D){const R=new Event("click",{bubbles:L});E.indeterminate=$i(o),D.call(E,$i(o)?!1:o),E.dispatchEvent(R)}},[b,C,o,a]);const S=v.useRef($i(o)?!1:o);return n.jsx(Ve.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??S.current,required:u,disabled:f,name:p,value:x,form:w,...t,tabIndex:-1,ref:N,style:{...t.style,...T,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});ak.displayName=sk;function Tq(e){return typeof e=="function"}function $i(e){return e==="indeterminate"}function ik(e){return $i(e)?"indeterminate":e?"checked":"unchecked"}const ok=v.forwardRef(({className:e,...t},r)=>n.jsx(Ov,{ref:r,className:Fe("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:n.jsx(nk,{className:Fe("flex items-center justify-center text-current"),children:n.jsx(Yn,{className:"h-4 w-4"})})}));ok.displayName=Ov.displayName;function lk({onBack:e,eventId:t}){const{user:r}=bt(),[s,a]=v.useState(null),[o,c]=v.useState(!0),[u,f]=v.useState({name:"",email:(r==null?void 0:r.email)||"",phone:""}),[p,x]=v.useState({}),[w,b]=v.useState(!1),[j,N]=v.useState(!1);v.useEffect(()=>{t&&C()},[t]);const C=async()=>{try{c(!0);const{data:_,error:k}=await $.from("events").select("*").eq("id",t).single();if(k)throw k;a(_)}catch(_){console.error("Error fetching event:",_),G.error("Erro ao carregar evento")}finally{c(!1)}},T=(_,k)=>{f(D=>({...D,[_]:k}))},S=(_,k)=>{if(k){const D=new FileReader;D.onload=L=>{var M;const R=(M=L.target)==null?void 0:M.result;x(P=>({...P,[_]:R})),T(_,k.name)},D.readAsDataURL(k)}},E=async _=>{if(_.preventDefault(),!r||!t){G.error("Você precisa estar logado");return}try{N(!0);const k={};((s==null?void 0:s.form_fields)||[]).forEach(R=>{(R.type==="photo"||R.type==="file")&&p[R.id]?k[R.label]=p[R.id]:u[R.id]&&(k[R.label]=u[R.id])});const{error:L}=await $.from("event_registrations").insert({event_id:t,user_id:r.id,user_name:u.name,user_email:u.email,user_phone:u.phone||null,registration_data:k,status:"confirmed"});if(L)throw L;G.success("Cadastro realizado com sucesso!"),b(!0)}catch(k){console.error("Error submitting registration:",k),k.code==="23505"?G.error("Você já está cadastrado neste evento"):G.error("Erro ao realizar cadastro")}finally{N(!1)}};return o?n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:n.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})}):s?w?n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:n.jsx(Ne,{className:"w-full max-w-md mx-4",children:n.jsxs(Ce,{className:"p-6 text-center space-y-4",children:[n.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx(Yn,{className:"h-8 w-8 text-green-600"})}),n.jsx("h2",{className:"text-xl font-semibold",children:"Cadastro Realizado!"}),n.jsx("p",{className:"text-muted-foreground",children:"Seu cadastro foi enviado com sucesso. Você receberá um e-mail de confirmação em breve."}),n.jsx(K,{onClick:e,className:"w-full",children:"Voltar ao Evento"})]})})}):n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b border-border",children:n.jsxs("div",{className:"flex items-center justify-between p-4 max-w-md mx-auto",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:e,children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Cadastro no Evento"}),n.jsx("div",{className:"w-10"})]})}),n.jsxs("div",{className:"p-4 max-w-md mx-auto pb-20",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-bold mb-2",children:s.title}),n.jsx("p",{className:"text-muted-foreground text-sm",children:"Preencha os dados abaixo para confirmar sua presença no evento."})]}),n.jsxs("form",{onSubmit:E,className:"space-y-4",children:[n.jsx(Ne,{children:n.jsxs(Ce,{className:"p-4 space-y-4",children:[n.jsxs("div",{children:[n.jsxs(de,{children:["Nome Completo ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(we,{type:"text",value:u.name,onChange:_=>T("name",_.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsxs(de,{children:["Email ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(we,{type:"email",value:u.email,onChange:_=>T("email",_.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsx(de,{children:"Telefone"}),n.jsx(we,{type:"tel",placeholder:"(11) 99999-9999",value:u.phone,onChange:_=>T("phone",_.target.value)})]})]})}),s.form_fields&&Array.isArray(s.form_fields)&&s.form_fields.length>0&&n.jsx(n.Fragment,{children:s.form_fields.map(_=>{var k,D;return n.jsx(Ne,{children:n.jsx(Ce,{className:"p-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs(de,{className:"flex items-center gap-1",children:[_.label,_.required&&n.jsx("span",{className:"text-destructive",children:"*"})]}),_.type==="text"&&n.jsx(we,{type:"text",value:u[_.id]||"",onChange:L=>T(_.id,L.target.value),required:_.required}),_.type==="email"&&n.jsx(we,{type:"email",value:u[_.id]||"",onChange:L=>T(_.id,L.target.value),required:_.required}),_.type==="phone"&&n.jsx(we,{type:"tel",value:u[_.id]||"",onChange:L=>T(_.id,L.target.value),required:_.required}),_.type==="date"&&n.jsx(we,{type:"date",value:u[_.id]||"",onChange:L=>T(_.id,L.target.value),required:_.required}),_.type==="select"&&n.jsxs(ea,{value:u[_.id]||"",onValueChange:L=>T(_.id,L),children:[n.jsx(As,{children:n.jsx(ta,{placeholder:"Selecione uma opção"})}),n.jsx(ks,{children:(k=_.options)==null?void 0:k.map((L,R)=>n.jsx(Ht,{value:L,children:L},R))})]}),_.type==="checkbox"&&n.jsx("div",{className:"space-y-2",children:(D=_.options)==null?void 0:D.map((L,R)=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ok,{id:`${_.id}-${R}`,checked:(u[_.id]||[]).includes(L),onCheckedChange:M=>{const P=u[_.id]||[],F=M?[...P,L]:P.filter(Y=>Y!==L);T(_.id,F)}}),n.jsx(de,{htmlFor:`${_.id}-${R}`,className:"font-normal cursor-pointer",children:L})]},R))}),_.type==="photo"&&n.jsx("div",{className:"space-y-2",children:p[_.id]?n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:p[_.id],alt:"Foto enviada",className:"w-full h-32 object-cover rounded border"}),n.jsx(K,{type:"button",variant:"secondary",size:"sm",className:"absolute top-2 right-2",onClick:()=>{x(L=>({...L,[_.id]:""})),T(_.id,"")},children:"Remover"})]}):n.jsxs("label",{className:"flex flex-col items-center justify-center h-24 border-2 border-dashed border-border rounded cursor-pointer hover:border-primary/50 transition-colors",children:[n.jsx(Fs,{className:"h-6 w-6 text-muted-foreground mb-1"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"Enviar Foto"}),n.jsx("input",{type:"file",accept:"image/*",onChange:L=>{var M;const R=(M=L.target.files)==null?void 0:M[0];R&&S(_.id,R)},className:"hidden",required:_.required})]})}),_.type==="file"&&n.jsx("div",{className:"space-y-2",children:n.jsxs("label",{className:"flex flex-col items-center justify-center h-24 border-2 border-dashed border-border rounded cursor-pointer hover:border-primary/50 transition-colors",children:[n.jsx(Fs,{className:"h-6 w-6 text-muted-foreground mb-1"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:u[_.id]||"Enviar Arquivo"}),n.jsx("input",{type:"file",onChange:L=>{var M;const R=(M=L.target.files)==null?void 0:M[0];R&&T(_.id,R.name)},className:"hidden",required:_.required})]})})]})})},_.id)})}),n.jsx("div",{className:"pt-4",children:n.jsx(K,{type:"submit",className:"w-full btn-glow",disabled:j,children:j?"Enviando...":"Confirmar Cadastro"})})]})]})]}):n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:n.jsx(Ne,{className:"w-full max-w-md mx-4",children:n.jsxs(Ce,{className:"p-6 text-center",children:[n.jsx("p",{className:"text-muted-foreground",children:"Evento não encontrado"}),n.jsx(K,{onClick:e,className:"mt-4",children:"Voltar"})]})})})}function Iq(){const e=_t(),[t,r]=v.useState("home"),[s,a]=v.useState(null),[o,c]=v.useState(null),[u,f]=v.useState(null),[p,x]=v.useState("feed"),[w,b]=v.useState(null),{user:j,userRole:N,loading:C}=bt(),{setTheme:T}=Y1();v.useEffect(()=>{!C&&!j&&e("/auth",{replace:!0})},[j,C,e]),v.useEffect(()=>{(async()=>{if(!j||C||N!=="organizer")return;const{data:Y}=await $.from("organizers").select("preferred_theme").eq("user_id",j.id).maybeSingle();if(Y!=null&&Y.preferred_theme){const U=Y.preferred_theme;T(U)}})()},[j,N,C,T]),v.useEffect(()=>{(async()=>{if(!(!j||C||N===null||window.location.pathname.includes("onboarding")))try{const{data:U,error:q}=await $.from("profiles").select("username").eq("user_id",j.id).maybeSingle();if(q){console.error("Error fetching profile:",q);return}if(N==="organizer"){const{data:re}=await $.from("organizers").select("id, username").eq("user_id",j.id).maybeSingle();(!re||!re.username)&&e("/organizer-onboarding",{replace:!0})}else N==="user"&&(!U||!U.username)&&e("/user-onboarding",{replace:!0})}catch(U){console.error("Error checking onboarding:",U)}})()},[j,N,C,e]);const S=Qn();v.useEffect(()=>{const F=S.state||null;F!=null&&F.initialTab&&(r(F.initialTab),e(S.pathname,{replace:!0,state:{}}))},[S,e]);const E=F=>{F==="live-events"?x("liveEvents"):F==="register"?x("eventRegistration"):F==="registrations"?x("eventRegistrations"):(a(F),x("eventDetails"))},_=()=>{x("findFriends")},k=F=>{if(console.log("handleOrganizerClick chamado com ID:",F),!F){console.error("ID do organizador está vazio!");return}c(F),x("organizerProfile")},D=()=>{x("organizersList")},L=F=>{f(F)},R=F=>{b(F),x("editEvent")},M=()=>{x("feed"),a(null),c(null),b(null)};if(C)return n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Carregando..."})]})});const P=()=>{switch(t){case"home":switch(p){case"eventDetails":return n.jsx(US,{onBack:M,eventId:s,onRegister:()=>{x("eventRegistration")},onManageRegistrations:()=>{x("eventRegistrations")},onViewAttendances:()=>{x("eventAttendances")},onFindFriends:_,onEdit:R});case"editEvent":return n.jsx(y0,{onBack:M,eventId:w||void 0});case"findFriends":return n.jsx(d0,{onBack:M});case"liveEvents":return n.jsx(wq,{onBack:M,onEventClick:E});case"organizerProfile":return n.jsx(jq,{onBack:M,organizerId:o||void 0,onEventClick:E});case"organizersList":return n.jsx(Eq,{onBack:M,onOrganizerClick:k});case"eventRegistration":return n.jsx(lk,{onBack:M,eventId:s||void 0});case"eventRegistrations":return n.jsx(kv,{onBack:M,eventId:s||void 0});case"eventAttendances":return n.jsx(Tv,{onBack:M,eventId:s||void 0});default:return n.jsx(Ub,{onEventClick:E,onFindFriends:_,onOrganizerClick:k,onShowOrganizers:D,onStoryClick:L,userType:N||"user"})}case"create":return N==="organizer"?n.jsx(y0,{onBack:()=>r("home")}):(r("home"),null);case"friends":return N==="user"?n.jsx(d0,{onBack:()=>r("home")}):(r("home"),null);case"profile":return N==="organizer"?n.jsx(JV,{}):n.jsx(vq,{userType:N||"user"});default:return n.jsx(Ub,{onEventClick:E,onFindFriends:_,onOrganizerClick:k,onShowOrganizers:D,onStoryClick:L,userType:N||"user"})}};return n.jsxs("div",{className:"min-h-screen bg-background",children:[P(),n.jsx(rL,{activeTab:t,onTabChange:r,userType:N||"user"})]})}function Rq({eventId:e,organizerId:t}){var P,F,Y;const[r,s]=v.useState([]),[a,o]=v.useState(!0),[c,u]=v.useState(!1),[f,p]=v.useState(!1),[x,w]=v.useState(0),[b,j]=v.useState(!1),[N,C]=v.useState(""),{user:T}=bt();if(_t(),Qn(),v.useEffect(()=>{(async()=>{try{console.log("Buscando fotos para:",{eventId:e,organizerId:t});const{data:q,error:re}=await $.from("organizer_photos").select("*").eq("organizer_id",t).eq("event_id",e).eq("is_active",!0).order("created_at",{ascending:!1});if(console.log("Fotos encontradas:",q),re)throw console.error("Erro ao buscar fotos:",re),re;s(q||[])}catch(q){console.error("Error fetching event photos:",q)}finally{o(!1)}})()},[e,t]),a)return n.jsx("div",{className:"grid grid-cols-2 gap-2",children:[1,2,3,4].map(U=>n.jsx(St,{className:"aspect-square rounded-lg"},U))});if(r.length===0)return n.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Nenhuma foto deste evento ainda"});const S=U=>{if(!T){C("para ver as fotos ampliadas"),j(!0);return}w(U),p(!0)},E=()=>{if(!T){C("para ver todas as fotos"),j(!0);return}u(!0)},_=U=>{w(U),u(!1),p(!0)},k=async(U,q)=>{try{const W=await(await fetch(U)).blob(),ne=window.URL.createObjectURL(W),oe=document.createElement("a");oe.href=ne,oe.download=q||"foto-evento.jpg",document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),window.URL.revokeObjectURL(ne),G.success("Foto baixada com sucesso!")}catch(re){console.error("Error downloading photo:",re),G.error("Erro ao baixar a foto")}},D=()=>{w(U=>U>0?U-1:r.length-1)},L=()=>{w(U=>U<r.length-1?U+1:0)},R=r.slice(0,3),M=r.length-3;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[R.map((U,q)=>n.jsx("div",{className:"aspect-square bg-surface rounded-lg overflow-hidden relative group cursor-pointer",onClick:()=>S(q),children:n.jsx("img",{src:U.photo_url,alt:U.caption||"Foto do evento",className:"w-full h-full object-cover hover:scale-105 transition-transform"})},U.id)),M>0&&n.jsxs("div",{className:"aspect-square bg-surface rounded-lg overflow-hidden relative cursor-pointer",onClick:E,children:[n.jsx("img",{src:r[3].photo_url,alt:"Mais fotos",className:"w-full h-full object-cover"}),n.jsx("div",{className:"absolute inset-0 bg-black/60 hover:bg-black/70 transition-colors flex items-center justify-center",children:n.jsxs("span",{className:"text-white font-bold text-2xl",children:["+",M+1]})})]})]}),n.jsx(zt,{open:c,onOpenChange:u,children:n.jsx(Ft,{className:"max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-lg font-semibold",children:["Todas as fotos (",r.length,")"]}),n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>u(!1),children:n.jsx(sr,{className:"h-5 w-5"})})]}),n.jsx("div",{className:"grid grid-cols-3 gap-3",children:r.map((U,q)=>n.jsx("div",{className:"aspect-square bg-surface rounded-lg overflow-hidden cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>_(q),children:n.jsx("img",{src:U.photo_url,alt:U.caption||`Foto ${q+1}`,className:"w-full h-full object-cover"})},U.id))})]})})}),n.jsx(zt,{open:f,onOpenChange:p,children:n.jsx(Ft,{className:"max-w-4xl w-full h-[90vh] p-0 bg-black",children:n.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[n.jsx(K,{variant:"ghost",size:"icon",className:"absolute top-4 right-4 z-50 bg-black/50 hover:bg-black/70 text-white",onClick:()=>p(!1),children:n.jsx(sr,{className:"h-6 w-6"})}),n.jsx(K,{variant:"ghost",size:"icon",className:"absolute top-4 right-16 z-50 bg-black/50 hover:bg-black/70 text-white",onClick:()=>k(r[x].photo_url,r[x].caption),children:n.jsx(Ko,{className:"h-6 w-6"})}),r.length>1&&n.jsx(K,{variant:"ghost",size:"icon",className:"absolute left-4 z-50 bg-black/50 hover:bg-black/70 text-white",onClick:D,children:n.jsx(S1,{className:"h-8 w-8"})}),r.length>1&&n.jsx(K,{variant:"ghost",size:"icon",className:"absolute right-4 z-50 bg-black/50 hover:bg-black/70 text-white",onClick:L,children:n.jsx(Ru,{className:"h-8 w-8"})}),n.jsx("img",{src:(P=r[x])==null?void 0:P.photo_url,alt:((F=r[x])==null?void 0:F.caption)||"Foto do evento",className:"max-h-full max-w-full object-contain"}),n.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/50 text-white px-4 py-2 rounded-full text-sm",children:[x+1," / ",r.length]}),((Y=r[x])==null?void 0:Y.caption)&&n.jsx("div",{className:"absolute bottom-16 left-1/2 -translate-x-1/2 bg-black/50 text-white px-4 py-2 rounded-lg text-sm max-w-md text-center",children:r[x].caption})]})})}),n.jsx(Wu,{open:b,onOpenChange:j,actionDescription:N})]})}function Pq(){var oe,ae,J,he,ye;const{slug:e}=fl(),t=_t();Qn();const{user:r}=bt(),[s,a]=v.useState("eventos"),[o,c]=v.useState(null),[u,f]=v.useState([]),[p,x]=v.useState([]),[w,b]=v.useState([]),[j,N]=v.useState(!0),[C,T]=v.useState(!1),[S,E]=v.useState(!1),[_,k]=v.useState(!1),[D,L]=v.useState(""),[R,M]=v.useState(!1),{organizersWithStories:P,toggleLike:F,markAsViewed:Y,deleteStory:U}=hv();v.useEffect(()=>{s==="fotos"&&o&&(async()=>{if(!o)return;const{data:ee}=await $.from("events").select("*").eq("organizer_id",o.id).order("event_date",{ascending:!1});x(ee||[])})()},[s,o]),v.useEffect(()=>((async()=>{if(e)try{N(!0);const{data:ee,error:X}=await $.from("organizers").select("*").eq("username",e).eq("is_page_active",!0).maybeSingle();if(X)throw X;if(!ee){t("/404");return}const te=ee.preferred_theme||"dark",se=document.documentElement;if(se.classList.remove("dark","light"),se.classList.add(te),r&&ee.user_id===r.id?E(!0):E(!1),r){const{data:ue}=await $.from("followers").select("id").eq("user_id",r.id).eq("organizer_id",ee.id).maybeSingle();T(!!ue)}const{data:ce}=await $.from("profiles").select("display_name, avatar_url, bio").eq("user_id",ee.user_id).maybeSingle(),{data:ge}=await $.from("organizer_stats").select("*").eq("organizer_id",ee.id).maybeSingle(),Te={...ee,profile:ce||void 0,stats:ge||{followers_count:0,events_count:0,average_rating:0}};c(Te);const{data:be}=await $.from("events").select("*").eq("organizer_id",ee.id).eq("status","upcoming").order("event_date",{ascending:!0}),Se=await Promise.all((be||[]).map(async ue=>{const{count:We}=await $.from("event_likes").select("*",{count:"exact",head:!0}).eq("event_id",ue.id),{count:Ee}=await $.from("event_comments").select("*",{count:"exact",head:!0}).eq("event_id",ue.id);return{...ue,likes_count:We||0,comments_count:Ee||0}}));f(Se);const{data:Me}=await $.from("custom_links").select("*").eq("organizer_id",ee.id).eq("is_active",!0).order("sort_order",{ascending:!0});b(Me||[])}catch(ee){console.error("Error fetching organizer data:",ee)}finally{N(!1)}})(),()=>{const ee=localStorage.getItem("theme")||"dark",X=document.documentElement;X.classList.remove("dark","light"),X.classList.add(ee)}),[e,r,t]),v.useEffect(()=>{if(!o)return;const H=$.channel("realtime-public-organizer-profile").on("postgres_changes",{event:"UPDATE",schema:"public",table:"organizers",filter:`id=eq.${o.id}`},ee=>{const X=ee.new;c(te=>te&&{...te,...X})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles",filter:`user_id=eq.${o.user_id}`},ee=>{const X=ee.new;c(te=>te&&{...te,profile:{display_name:X.display_name,avatar_url:X.avatar_url,bio:X.bio}})}).subscribe();return()=>{$.removeChannel(H)}},[o==null?void 0:o.id,o==null?void 0:o.user_id]);const q=async()=>{if(!r){L("para seguir este organizador"),k(!0);return}if(o)try{if(C){const{error:H}=await $.from("followers").delete().eq("user_id",r.id).eq("organizer_id",o.id);if(H)throw H;T(!1),G.success("Você deixou de seguir este organizador")}else{const{error:H}=await $.from("followers").insert({user_id:r.id,organizer_id:o.id});if(H)throw H;T(!0),G.success("Você está seguindo este organizador!")}}catch(H){console.error("Error following/unfollowing:",H),G.error("Erro ao processar sua solicitação")}},re=()=>{if(!o)return;const H=`${Ym()}/${o.username}`;navigator.clipboard.writeText(H).then(()=>{G.success("Link copiado!",{description:"O link da página foi copiado para a área de transferência"})}).catch(()=>{G.error("Erro ao copiar link")})},W=H=>{const ee=new Date(H),te=["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"][ee.getDay()],se=ee.getHours().toString().padStart(2,"0"),ce=ee.getMinutes().toString().padStart(2,"0");return`${te}, ${se}:${ce}`},ne=[{id:"eventos",label:"Eventos",icon:Et},{id:"links",label:"Links",icon:Vr},{id:"fotos",label:"Fotos",icon:En}];return j?n.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[n.jsxs("div",{className:"flex items-center justify-between p-4",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>t("/"),children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Organizador"}),n.jsx("div",{className:"w-10"})]}),n.jsxs("div",{className:"px-4 pb-6 text-center space-y-4",children:[n.jsx(St,{className:"h-24 w-24 rounded-full mx-auto"}),n.jsx(St,{className:"h-6 w-48 mx-auto"}),n.jsx(St,{className:"h-4 w-64 mx-auto"})]})]}):o?n.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[n.jsxs("div",{className:"relative h-[200px] overflow-hidden",style:{backgroundImage:o.cover_image_url?`url(${o.cover_image_url})`:"linear-gradient(135deg, hsl(var(--primary)) 0%, hsl(var(--primary) / 0.8) 25%, hsl(220 70% 50%) 50%, hsl(200 70% 50%) 75%, hsl(var(--primary) / 0.6) 100%)",backgroundSize:"cover",backgroundPosition:"center"},children:[n.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:"rgba(0, 0, 0, 0.5)",zIndex:0}}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 pointer-events-none",style:{height:"120px",background:"linear-gradient(to top, hsl(var(--background)) 0%, hsl(var(--background) / 0.95) 40%, transparent 100%)",zIndex:1}}),n.jsxs("div",{className:"flex items-center justify-between p-4 relative",style:{zIndex:10},children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>t("/"),className:"bg-black/20 hover:bg-black/40 backdrop-blur-sm",children:n.jsx(gt,{className:"h-5 w-5 text-white"})}),n.jsx("h1",{className:"text-lg font-semibold text-white",children:"Organizador"}),n.jsx(K,{variant:"ghost",size:"icon",onClick:re,className:"bg-black/20 hover:bg-black/40 backdrop-blur-sm",children:n.jsx(Is,{className:"h-5 w-5 text-white"})})]})]}),n.jsxs("div",{className:"px-4 pb-6 text-center -mt-24 relative z-10",children:[(()=>{var X,te,se,ce;const H=P.find(ge=>ge.id===o.id),ee=H&&H.stories.length>0;return console.log("Debug Stories:",{organizerId:o.id,organizersWithStories:P,currentOrganizerStories:H,hasStories:ee}),ee?n.jsx("div",{className:"relative inline-block mb-4 p-1 rounded-full cursor-pointer hover:opacity-90 transition-opacity animate-pulse",style:{background:"linear-gradient(45deg, #a855f7, #d946ef, #ec4899, #a855f7)",backgroundSize:"300% 300%"},onClick:()=>M(!0),children:n.jsx("div",{className:"p-[3px] bg-background rounded-full",children:n.jsx(Ut,{className:"h-24 w-24 shadow-lg",children:o.avatar_url||(X=o.profile)!=null&&X.avatar_url?n.jsx(Kt,{src:o.avatar_url||((te=o.profile)==null?void 0:te.avatar_url),alt:o.page_title}):n.jsx($t,{className:"bg-primary text-primary-foreground text-2xl",children:o.page_title.charAt(0)})})})}):n.jsx("div",{className:"relative inline-block mb-4",children:n.jsx(Ut,{className:"h-24 w-24 mx-auto border-4 border-background shadow-lg",children:o.avatar_url||(se=o.profile)!=null&&se.avatar_url?n.jsx(Kt,{src:o.avatar_url||((ce=o.profile)==null?void 0:ce.avatar_url),alt:o.page_title}):n.jsx($t,{className:"bg-primary text-primary-foreground text-2xl",children:o.page_title.charAt(0)})})})})(),n.jsx("h2",{className:"text-2xl font-bold text-foreground mb-1",children:((oe=o.profile)==null?void 0:oe.display_name)||o.page_title}),o.username&&n.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["@",o.username]}),n.jsx("p",{className:"text-muted-foreground max-w-sm mx-auto mb-4",children:((ae=o.profile)==null?void 0:ae.bio)||o.page_description||"Organizador de eventos"}),o.show_statistics&&n.jsxs("div",{className:"flex justify-center gap-8 mb-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-lg font-semibold text-foreground",children:((he=(J=o.stats)==null?void 0:J.followers_count)==null?void 0:he.toLocaleString())||"0"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Seguidores"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-lg font-semibold text-foreground",children:((ye=o.stats)==null?void 0:ye.events_count)||u.length}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Eventos"})]})]}),!S&&n.jsxs("div",{className:"flex justify-center gap-3",children:[n.jsx(K,{variant:"glow",size:"lg",className:"flex-1 max-w-[200px]",onClick:q,children:C?"Seguindo":"Seguir"}),n.jsxs(K,{variant:"outline",size:"lg",onClick:re,children:[n.jsx(Is,{className:"h-4 w-4 mr-2"}),"Compartilhar"]})]}),S&&n.jsx("div",{className:"flex justify-center",children:n.jsxs(K,{variant:"outline",size:"lg",onClick:re,children:[n.jsx(Is,{className:"h-4 w-4 mr-2"}),"Compartilhar"]})}),S&&n.jsx("div",{className:"flex justify-center",children:n.jsxs(K,{variant:"outline",size:"lg",className:"bg-black/20 hover:bg-black/40 backdrop-blur-sm text-white border-white/20",onClick:re,children:[n.jsx(Is,{className:"h-4 w-4 mr-2"}),"Compartilhar minha página"]})})]}),n.jsx("div",{className:"px-4 mb-6",children:n.jsx("div",{className:"flex gap-2 justify-center",children:ne.map(H=>{const ee=H.icon;return n.jsxs("button",{onClick:()=>a(H.id),className:`flex-shrink-0 flex items-center gap-2 px-4 py-2 rounded-full border transition-all ${s===H.id?"bg-primary text-primary-foreground border-primary":"bg-surface border-border text-muted-foreground hover:text-foreground hover:border-primary/50"}`,children:[n.jsx(ee,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm font-medium",children:H.label})]},H.id)})})}),n.jsxs("div",{className:"px-4 max-w-md mx-auto",children:[s==="eventos"&&o.show_events&&n.jsx("div",{className:"space-y-4",children:u.length>0?u.map(H=>{const ee=ce=>ce.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),X=ee(o.username||o.page_title),te=ee(H.title),se=`/${X}/${te}`;return n.jsxs(Ne,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>t(se),children:[n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:H.image_url||"/placeholder.svg",alt:H.title,className:"w-full h-32 object-cover"}),H.is_live&&n.jsxs(ct,{className:"absolute top-2 right-2 bg-destructive text-destructive-foreground",children:[n.jsx("div",{className:"h-2 w-2 bg-white rounded-full animate-pulse mr-1"}),"AO VIVO"]})]}),n.jsxs(Ce,{className:"p-4",children:[n.jsx("h3",{className:"font-semibold text-foreground mb-1",children:H.title}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[n.jsx(Et,{className:"h-3 w-3"}),n.jsx("span",{children:W(H.event_date)})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(Rt,{className:"h-3 w-3"}),n.jsx("span",{children:H.location}),n.jsx(er,{className:"h-3 w-3 ml-auto"}),n.jsx("span",{children:H.current_attendees})]}),n.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Ja,{className:"h-3 w-3"}),n.jsx("span",{children:H.likes_count||0})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Ls,{className:"h-3 w-3"}),n.jsx("span",{children:H.comments_count||0})]})]})]})]},H.id)}):n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-muted-foreground",children:"Nenhum evento disponível no momento."})})}),s==="links"&&o.show_contact&&n.jsxs("div",{className:"space-y-3",children:[o.show_whatsapp&&o.whatsapp_url&&n.jsx(Ne,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ce,{className:"p-4",children:n.jsxs("a",{href:o.whatsapp_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-green-500 text-white",children:n.jsx(Ls,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:"WhatsApp"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Entre em contato"})]}),n.jsx(Vr,{className:"h-4 w-4 text-muted-foreground"})]})})}),o.show_instagram&&o.instagram_url&&n.jsx(Ne,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ce,{className:"p-4",children:n.jsxs("a",{href:o.instagram_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-gradient-to-br from-purple-600 via-pink-600 to-orange-500 text-white",children:n.jsx(Gi,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:"Instagram"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Siga no Instagram"})]}),n.jsx(Vr,{className:"h-4 w-4 text-muted-foreground"})]})})}),o.show_playlist&&o.playlist_url&&n.jsx(Ne,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ce,{className:"p-4",children:n.jsxs("a",{href:o.playlist_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-purple-600 text-white",children:n.jsx(au,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:"Playlist"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Ouça nossa playlist"})]}),n.jsx(Vr,{className:"h-4 w-4 text-muted-foreground"})]})})}),o.show_location&&o.location_url&&n.jsx(Ne,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ce,{className:"p-4",children:n.jsxs("a",{href:o.location_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-red-500 text-white",children:n.jsx(Rt,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:"Localização"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Veja no mapa"})]}),n.jsx(Vr,{className:"h-4 w-4 text-muted-foreground"})]})})}),o.show_website&&o.website_url&&n.jsx(Ne,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ce,{className:"p-4",children:n.jsxs("a",{href:o.website_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-blue-600 text-white",children:n.jsx(su,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:"Site"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Visite nosso site"})]}),n.jsx(Vr,{className:"h-4 w-4 text-muted-foreground"})]})})}),w.map(H=>n.jsx(Ne,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",children:n.jsx(Ce,{className:"p-4",children:n.jsxs("a",{href:H.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 w-full",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white text-sm font-bold",style:{backgroundColor:H.color},children:H.icon||H.title.charAt(0)}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:H.title}),n.jsx("p",{className:"text-sm text-muted-foreground truncate",children:H.url})]}),n.jsx(Vr,{className:"h-4 w-4 text-muted-foreground"})]})})},H.id)),!o.show_whatsapp&&!o.show_instagram&&!o.show_playlist&&!o.show_location&&!o.show_website&&w.length===0&&n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-muted-foreground",children:"Nenhum link disponível."})})]}),s==="fotos"&&n.jsx("div",{className:"space-y-6",children:p.length===0?n.jsx("div",{className:"text-center py-8",children:n.jsxs("div",{className:"mb-4",children:[n.jsx(En,{className:"h-12 w-12 text-muted-foreground mx-auto mb-2"}),n.jsx("p",{className:"text-muted-foreground",children:"Nenhuma foto adicionada ainda."}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"As fotos dos eventos aparecerão aqui quando forem adicionadas pelo organizador."})]})}):p.map(H=>n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-foreground",children:H.title}),n.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(H.event_date).toLocaleDateString("pt-BR")})]}),n.jsx(Rq,{eventId:H.id,organizerId:o.id})]},H.id))})]}),R&&P.find(H=>H.id===o.id)&&n.jsx(uv,{open:R,onClose:()=>M(!1),organizer:P.find(H=>H.id===o.id),initialStoryIndex:0,onLike:F,onDelete:U,onMarkAsViewed:Y}),n.jsx("footer",{className:"mt-8 pb-6 text-center border-t border-border pt-6",children:n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Esse site foi desenvolvido pela ",n.jsx("a",{href:"https://flatgrowth.com.br/",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Flat Company"})]})}),n.jsx(Wu,{open:_,onOpenChange:k,actionDescription:D})]}):null}const Pg=e=>e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();function b2(){const e=fl(),t=_t(),{user:r}=bt(),[s,a]=v.useState(null),[o,c]=v.useState(!0),[u,f]=v.useState(!1);return zS(s),v.useEffect(()=>((async()=>{var x;try{if(c(!0),e.eventId){if(console.log("Usando ID direto do evento:",e.eventId),a(e.eventId),r){const{data:R}=await $.from("events").select("organizer_id").eq("id",e.eventId).single();if(R){const{data:M}=await $.from("organizers").select("user_id, preferred_theme").eq("id",R.organizer_id).single();if(M){M.user_id===r.id&&f(!0);const P=document.documentElement;P.classList.remove("dark","light"),P.classList.add(M.preferred_theme||"dark")}}}c(!1);return}if(!e.organizerSlug||!e.eventSlug){console.log("Formato de URL inválido"),c(!1);return}const w=e.organizerSlug,b=e.eventSlug;console.log("Procurando evento:",{organizerSlug:w,eventSlug:b});let j=null,N="dark";const C=w.replace(/-/g," "),{data:T,error:S}=await $.from("organizers").select(`
            id,
            user_id,
            page_title,
            username,
            preferred_theme,
            profile:profiles!organizers_user_id_fkey(display_name)
          `);if(S)throw S;if(T&&T.length>0)for(const R of T){const M=((x=R.profile)==null?void 0:x.display_name)||"";if(R.username===w){j=R.id,N=R.preferred_theme||"dark",console.log("Match found by username:",R.username);break}if(Pg(M)===w){j=R.id,N=R.preferred_theme||"dark",console.log("Match found by display_name:",M);break}if(R.page_title&&Pg(R.page_title)===w){j=R.id,N=R.preferred_theme||"dark",console.log("Match found by page_title:",R.page_title);break}}if(!j){console.error("Nenhum organizador encontrado com slug:",w),console.log("Organizadores disponíveis:",T==null?void 0:T.map(R=>{var M;return{username:R.username,page_title:R.page_title,display_name:(M=R.profile)==null?void 0:M.display_name}})),c(!1),G.error("Organizador não encontrado");return}const E=document.documentElement;E.classList.remove("dark","light"),E.classList.add(N);const{data:_,error:k}=await $.from("events").select("id, title, organizer_id").eq("organizer_id",j);if(k)throw k;const D=b.toLowerCase(),L=(_||[]).find(R=>Pg(R.title)===D);if(!L){c(!1),G.error("Evento não encontrado");return}if(a(L.id),r){const{data:R}=await $.from("organizers").select("user_id").eq("id",L.organizer_id).single();R&&R.user_id===r.id&&f(!0)}}catch(w){console.error("Error resolving event by slug:",w),G.error("Erro ao carregar evento")}finally{c(!1)}})(),()=>{const x=localStorage.getItem("theme")||"dark",w=document.documentElement;w.classList.remove("dark","light"),w.classList.add(x)}),[e.organizerSlug,e.eventSlug,e.eventId,r]),o?n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"relative",children:n.jsx(St,{className:"w-full h-80"})}),n.jsxs("div",{className:"px-4 py-6 max-w-md mx-auto space-y-4",children:[n.jsx(St,{className:"h-8 w-3/4"}),n.jsx(St,{className:"h-4 w-1/2"}),n.jsx(St,{className:"h-20 w-full"})]})]}):s?n.jsx(US,{onBack:()=>t("/"),eventId:s,onRegister:()=>t(`/event/${s}/register`),onManageRegistrations:u?()=>t(`/event/${s}/registrations`):void 0,onViewAttendances:u?()=>t(`/event/${s}/attendances`):void 0,onEdit:u?p=>t(`/event/edit/${p}`):void 0,onFindFriends:()=>t(`/event/${s}/find-friends`)}):n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-muted-foreground",children:"Página não encontrada"}),n.jsx(K,{variant:"outline",onClick:()=>t("/"),className:"mt-4",children:"Voltar ao início"})]})})}function Oq({onLogin:e}){const t=_t(),[r]=W1(),[s,a]=v.useState(!0),[o,c]=v.useState(!1),[u,f]=v.useState("user"),[p,x]=v.useState(!1),[w,b]=v.useState({name:"",email:"",password:""}),{signUp:j,signIn:N,user:C}=bt(),{theme:T,toggleTheme:S}=Y1();v.useEffect(()=>{if(C){const M=r.get("redirect")||"/";t(M)}},[C,t,r]);const E=async M=>{if(M.preventDefault(),s){x(!0);try{const{error:P}=await N(w.email,w.password);if(!P){const F=r.get("redirect")||"/";t(F)}}finally{x(!1)}}else t("/user-onboarding",{state:{email:w.email,password:w.password,name:w.name}})},_=()=>{t("/organizer-onboarding")},k=(M,P)=>{b(F=>({...F,[M]:P}))},R=u==="user"?[{icon:er,text:"Conecte-se com pessoas de interesses em comum"},{icon:Et,text:"Encontre eventos na sua cidade"},{icon:vy,text:"Descubra eventos por categorias"},{icon:by,text:"Encontre pessoas num raio de 100 metros"},{icon:Is,text:"Rede social de interação"},{icon:Rt,text:"Veja quem está próximo em tempo real"}]:[{icon:Et,text:"Crie e gerencie seus eventos"},{icon:er,text:"Alcance seu público-alvo"},{icon:vy,text:"Organize eventos por categorias"},{icon:Rt,text:"Localize participantes próximos"},{icon:Is,text:"Divulgue seus eventos"},{icon:by,text:"Conecte-se com participantes interessados"}];return n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-4 py-8",children:n.jsx("div",{className:"w-full max-w-6xl",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12 items-center",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center lg:text-left space-y-4",children:[n.jsx("h1",{className:"font-bold gradient-primary bg-clip-text text-[#147dc7] text-4xl md:text-5xl",children:"MeetLines"}),n.jsx("p",{className:"text-lg text-muted-foreground",children:"Conecte-se com pessoas e descubra eventos incríveis"}),n.jsx("div",{className:"flex items-center justify-center lg:justify-start pt-2",children:n.jsxs("div",{className:"flex bg-surface rounded-lg p-1 border border-border",children:[n.jsx("button",{type:"button",onClick:()=>f("user"),className:`px-6 py-2 text-sm font-medium rounded-md transition-smooth ${u==="user"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground"}`,children:"👤 Usuário"}),n.jsx("button",{type:"button",onClick:()=>f("organizer"),className:`px-6 py-2 text-sm font-medium rounded-md transition-smooth ${u==="organizer"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground"}`,children:"🎯 Organizador"})]})})]}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:R.map((M,P)=>{const F=M.icon;return n.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg bg-card/50 border border-border/50 hover:border-primary/50 transition-colors",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:n.jsx(F,{className:"h-5 w-5 text-primary"})}),n.jsx("p",{className:"text-sm text-muted-foreground text-left",children:M.text})]},P)})})]}),n.jsxs("div",{className:"w-full max-w-md mx-auto lg:mx-0 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[s?n.jsxs("button",{type:"button",onClick:_,className:"text-xs text-muted-foreground hover:text-primary transition-smooth",children:["Quer criar eventos? ",n.jsx("span",{className:"text-primary font-medium",children:"Registrar como organizador"})]}):n.jsx("div",{className:"w-8"}),n.jsx(K,{variant:"ghost",size:"icon",onClick:S,className:"h-8 w-8",children:T==="dark"?n.jsx(Tj,{className:"h-4 w-4"}):n.jsx(Aj,{className:"h-4 w-4"})})]}),n.jsx("div",{className:"text-center space-y-2 bg-card/50 p-6 rounded-lg border border-border/50",children:n.jsx("p",{className:"text-lg font-semibold",children:s?"Entre na sua conta":"Crie sua conta"})}),n.jsx("div",{children:n.jsxs("form",{onSubmit:E,className:"space-y-4",children:[!s&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"name",children:"Nome completo"}),n.jsxs("div",{className:"relative",children:[n.jsx(ms,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(we,{id:"name",type:"text",placeholder:"Seu nome",value:w.name,onChange:M=>k("name",M.target.value),className:"pl-10",required:!s})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"email",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(Pu,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(we,{id:"email",type:"email",placeholder:"seu@email.com",value:w.email,onChange:M=>k("email",M.target.value),className:"pl-10",required:!0})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"password",children:"Senha"}),n.jsxs("div",{className:"relative",children:[n.jsx(Rx,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(we,{id:"password",type:o?"text":"password",placeholder:"Sua senha",value:w.password,onChange:M=>k("password",M.target.value),className:"pl-10 pr-10",required:!0}),n.jsx("button",{type:"button",onClick:()=>c(!o),className:"absolute right-3 top-3 text-muted-foreground hover:text-foreground",children:o?n.jsx(Ix,{className:"h-4 w-4"}):n.jsx(Yo,{className:"h-4 w-4"})})]})]}),n.jsx(K,{type:"submit",variant:"glow",size:"lg",className:"w-full",disabled:p,children:p?"Carregando...":s?"Entrar":"Continuar"})]})}),n.jsx("div",{className:"text-center",children:n.jsxs("button",{type:"button",onClick:()=>{a(!s)},className:"text-sm text-muted-foreground hover:text-primary transition-smooth",children:[s?"Não tem uma conta? ":"Já tem uma conta? ",n.jsx("span",{className:"text-primary font-medium",children:s?"Cadastre-se":"Entre"})]})}),n.jsx("div",{className:"text-center pt-6 pb-4",children:n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Esse site foi desenvolvido pela ",n.jsx("a",{href:"https://flatgrowth.com.br/",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Flat Company"})]})})]})]})})})}var Dv="Progress",Mv=100,[Dq]=Mr(Dv),[Mq,Lq]=Dq(Dv),ck=v.forwardRef((e,t)=>{const{__scopeProgress:r,value:s=null,max:a,getValueLabel:o=Fq,...c}=e;(a||a===0)&&!_2(a)&&console.error(Bq(`${a}`,"Progress"));const u=_2(a)?a:Mv;s!==null&&!N2(s,u)&&console.error(zq(`${s}`,"Progress"));const f=N2(s,u)?s:null,p=tm(f)?o(f,u):void 0;return n.jsx(Mq,{scope:r,value:f,max:u,children:n.jsx(Ve.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":tm(f)?f:void 0,"aria-valuetext":p,role:"progressbar","data-state":hk(f,u),"data-value":f??void 0,"data-max":u,...c,ref:t})})});ck.displayName=Dv;var dk="ProgressIndicator",uk=v.forwardRef((e,t)=>{const{__scopeProgress:r,...s}=e,a=Lq(dk,r);return n.jsx(Ve.div,{"data-state":hk(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...s,ref:t})});uk.displayName=dk;function Fq(e,t){return`${Math.round(e/t*100)}%`}function hk(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function tm(e){return typeof e=="number"}function _2(e){return tm(e)&&!isNaN(e)&&e>0}function N2(e,t){return tm(e)&&!isNaN(e)&&e<=t&&e>=0}function Bq(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Mv}\`.`}function zq(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Mv} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var fk=ck,Uq=uk;const Lv=v.forwardRef(({className:e,value:t,...r},s)=>n.jsx(fk,{ref:s,className:Fe("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:n.jsx(Uq,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Lv.displayName=fk.displayName;function mk({value:e,onChange:t,label:r="Cidade",placeholder:s="Buscar cidade...",required:a=!1,showUseLocation:o=!0}){const[c,u]=v.useState([]),[f,p]=v.useState([]),[x,w]=v.useState(""),[b,j]=v.useState(null),[N,C]=v.useState(!1);v.useEffect(()=>{T()},[]),v.useEffect(()=>{e&&S(e)},[e]),v.useEffect(()=>{if(x.trim()==="")p(c);else{const L=x.toLowerCase(),R=c.filter(M=>M.name.toLowerCase().includes(L)||M.state.toLowerCase().includes(L));p(R)}},[x,c]);const T=async()=>{try{const{data:L,error:R}=await $.from("cities").select("*").order("state").order("name");if(R)throw R;u(L||[]),p(L||[])}catch(L){console.error("Error loading cities:",L),G.error("Erro ao carregar cidades")}},S=async L=>{try{const{data:R,error:M}=await $.from("cities").select("*").eq("id",L).maybeSingle();if(M)throw M;j(R)}catch(R){console.error("Error loading selected city:",R)}},E=L=>{j(L),t(L.id,L.name),w("")},_=()=>{if(!navigator.geolocation){G.error("Geolocalização não suportada pelo navegador");return}C(!0),navigator.geolocation.getCurrentPosition(async L=>{const{latitude:R,longitude:M}=L.coords;try{const F=await(await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${R}&lon=${M}&format=json`)).json(),Y=F.address.city||F.address.town||F.address.municipality;if(Y){let U=c.find(q=>q.name.toLowerCase()===Y.toLowerCase());if(!U){const q=F.address.state,re=k(q),{data:W,error:ne}=await $.from("cities").insert({name:Y,state:re}).select().single();if(ne){console.error("Error creating city:",ne),G.error("Erro ao adicionar cidade"),C(!1);return}U=W,u([...c,W])}U&&(E(U),G.success(`Localização detectada: ${U.name}`))}else G.error("Não foi possível identificar sua cidade")}catch(P){console.error("Error fetching location:",P),G.error("Erro ao obter localização")}finally{C(!1)}},L=>{console.error("Geolocation error:",L),G.error("Erro ao acessar localização"),C(!1)})},k=L=>({Acre:"AC",Alagoas:"AL",Amapá:"AP",Amazonas:"AM",Bahia:"BA",Ceará:"CE","Distrito Federal":"DF","Espírito Santo":"ES",Goiás:"GO",Maranhão:"MA","Mato Grosso":"MT","Mato Grosso do Sul":"MS","Minas Gerais":"MG",Pará:"PA",Paraíba:"PB",Paraná:"PR",Pernambuco:"PE",Piauí:"PI","Rio de Janeiro":"RJ","Rio Grande do Norte":"RN","Rio Grande do Sul":"RS",Rondônia:"RO",Roraima:"RR","Santa Catarina":"SC","São Paulo":"SP",Sergipe:"SE",Tocantins:"TO"})[L]||"BR",D=f.reduce((L,R)=>(L[R.state]||(L[R.state]=[]),L[R.state].push(R),L),{});return n.jsxs("div",{className:"space-y-3",children:[n.jsxs(de,{htmlFor:"city",children:[r," ",a&&n.jsx("span",{className:"text-destructive",children:"*"})]}),o&&n.jsxs(K,{type:"button",variant:"outline",onClick:_,disabled:N,className:"w-full justify-start",children:[n.jsx(kj,{className:"h-4 w-4 mr-2 text-primary"}),N?"Detectando localização...":"Usar minha localização atual"]}),b&&n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-accent rounded-lg",children:[n.jsx(Rt,{className:"h-4 w-4 text-primary"}),n.jsxs("span",{className:"text-sm font-medium",children:[b.name,", ",b.state]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(we,{id:"city",type:"text",placeholder:s,value:x,onChange:L=>w(L.target.value)}),x&&n.jsx(Jo,{className:"h-[200px] w-full border rounded-md",children:n.jsx("div",{className:"p-2 space-y-1",children:Object.entries(D).length===0?n.jsx("p",{className:"text-sm text-muted-foreground p-2",children:"Nenhuma cidade encontrada"}):Object.entries(D).map(([L,R])=>n.jsxs("div",{className:"mb-3",children:[n.jsx("h3",{className:"text-xs font-semibold text-muted-foreground mb-1 px-2",children:L}),R.map(M=>n.jsx("button",{type:"button",onClick:()=>E(M),className:"w-full text-left px-2 py-2 text-sm hover:bg-accent rounded-md transition-colors",children:M.name},M.id))]},L))})})]}),a&&!b&&n.jsx("p",{className:"text-xs text-muted-foreground",children:"Selecione sua cidade para que os usuários possam encontrar seus eventos"})]})}function $q(){const e=_t(),t=Qn(),{email:r,password:s,name:a}=t.state||{},[o,c]=v.useState(r||""),[u,f]=v.useState(s||""),[p,x]=v.useState(a||""),[w,b]=v.useState(r&&s?1:0),[j,N]=v.useState(!1),[C,T]=v.useState(""),[S,E]=v.useState(a||""),[_,k]=v.useState(""),[D,L]=v.useState(null),R=v.useMemo(()=>D?URL.createObjectURL(D):"",[D]),[M,P]=v.useState(""),F=v.useRef(null),[Y,U]=v.useState(""),[q,re]=v.useState(""),[W,ne]=v.useState(""),[oe,ae]=v.useState(""),[J,he]=v.useState(""),[ye,H]=v.useState(null),[ee,X]=v.useState(""),[te,se]=v.useState("dark"),ce=5,ge=(w+1)/ce*100;v.useEffect(()=>{},[]);const Te=async Ee=>{if(k(""),!/^[a-z0-9._]+$/.test(Ee))return k("Use apenas letras minúsculas, números, pontos e underscores"),!1;if(Ee.length<3)return k("Username deve ter no mínimo 3 caracteres"),!1;if(Ee.length>30)return k("Username deve ter no máximo 30 caracteres"),!1;const{data:_e}=await $.from("organizers").select("id").eq("username",Ee).maybeSingle();return _e?(k("Este username já está em uso"),!1):!0},be=async()=>{if(!o||!u||!p){G.error("Preencha email, senha e nome");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)){G.error("Email inválido");return}if(u.length<6){G.error("Senha deve ter no mínimo 6 caracteres");return}E(p),b(1)},Se=async()=>{if(!C||!S){G.error("Preencha todos os campos");return}N(!0);const Ee=await Te(C);N(!1),Ee&&b(2)},Me=()=>{if(!M){G.error("Escreva uma bio para seu perfil");return}if(!ye){G.error("Selecione sua cidade");return}b(3)},ue=()=>{b(4)},We=async()=>{N(!0);try{const Ee=`${window.location.origin}/`,{data:Je,error:_e}=await $.auth.signUp({email:o,password:u,options:{emailRedirectTo:Ee,data:{display_name:S,role:"organizer"}}});if(_e)throw _e;Je.session||await $.auth.signInWithPassword({email:o,password:u});const{data:ze}=await $.auth.getUser(),Ge=ze.user;if(!Ge){G.success("Conta criada! Verifique seu email para confirmar o acesso."),e("/");return}await $.from("organizers").delete().eq("user_id",Ge.id),await $.from("profiles").delete().eq("user_id",Ge.id);let Vt;if(D){const it=D.name.split(".").pop(),ot=`${Ge.id}/avatar.${it}`,{error:ar}=await $.storage.from("user-uploads").upload(ot,D,{upsert:!0});if(ar)console.warn("Erro ao subir avatar, continuando sem avatar:",ar);else{const{data:Nt}=$.storage.from("user-uploads").getPublicUrl(ot);Vt=Nt.publicUrl}}await $.from("profiles").insert({user_id:Ge.id,display_name:S,avatar_url:Vt,bio:M,role:"organizer"});const{data:pe,error:Ze}=await $.from("organizers").insert({user_id:Ge.id,username:C,page_title:S,page_subtitle:"Organizador de Eventos",page_description:M,avatar_url:Vt,whatsapp_url:Y||null,instagram_url:q||null,playlist_url:W||null,location_url:oe||null,website_url:J||null,show_whatsapp:!!Y,show_instagram:!!q,show_playlist:!!W,show_location:!!oe,show_website:!!J,preferred_theme:te,city_id:ye}).select().maybeSingle();if(Ze)throw Ze;pe!=null&&pe.id&&await $.from("organizer_stats").insert({organizer_id:pe.id,followers_count:0,events_count:0,average_rating:0,total_ratings:0}),G.success("Perfil criado com sucesso! 🎉"),e("/")}catch(Ee){console.error("Error completing onboarding:",Ee),G.error((Ee==null?void 0:Ee.message)||"Erro ao criar perfil")}finally{N(!1)}};return n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:n.jsxs(Ne,{className:"w-full max-w-md",children:[n.jsxs(qe,{children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsxs(K,{variant:"ghost",size:"sm",onClick:()=>e("/auth"),className:"text-muted-foreground hover:text-foreground",children:[n.jsx(gt,{className:"h-4 w-4 mr-2"}),"Cancelar"]})}),n.jsx(He,{children:"Configure seu Perfil de Organizador"}),n.jsxs(Jr,{children:["Etapa ",w+1," de ",ce]}),n.jsx(Lv,{value:ge,className:"mt-2"})]}),n.jsxs(Ce,{children:[w===0&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx(Pu,{className:"h-12 w-12 mx-auto text-primary mb-2"}),n.jsx("h3",{className:"text-lg font-semibold",children:"Crie seu acesso"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Informe seu email, senha e nome"})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"email",children:"Email"}),n.jsx(we,{id:"email",type:"email",value:o,onChange:Ee=>c(Ee.target.value),placeholder:"voce@email.com"})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"password",children:"Senha"}),n.jsx(we,{id:"password",type:"password",value:u,onChange:Ee=>f(Ee.target.value),placeholder:"••••••••"})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"name",children:"Seu nome ou da marca"}),n.jsx(we,{id:"name",value:p,onChange:Ee=>x(Ee.target.value),placeholder:"Minha Marca"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(K,{variant:"outline",onClick:()=>e("/auth"),className:"flex-1",children:[n.jsx(gt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsx(K,{onClick:be,className:"flex-1",children:"Próximo"})]})]}),w===1&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx(ms,{className:"h-12 w-12 mx-auto text-primary mb-2"}),n.jsx("h3",{className:"text-lg font-semibold",children:"Escolha seu Username"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Seu username é único e não pode ser alterado depois"})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"username",children:"Username (como @instagram)"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"@"}),n.jsx(we,{id:"username",value:C,onChange:Ee=>{const Je=Ee.target.value.toLowerCase();T(Je),Je.length>=3&&Te(Je)},placeholder:"seuusername",className:"pl-8",maxLength:30})]}),_&&n.jsx("p",{className:"text-sm text-destructive mt-1",children:_}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Apenas letras minúsculas, números, . e _"})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"displayName",children:"Nome de Exibição"}),n.jsx(we,{id:"displayName",value:S,onChange:Ee=>E(Ee.target.value),placeholder:"Nome da sua empresa/marca",maxLength:50}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Este nome pode ser alterado depois"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(K,{variant:"outline",onClick:()=>b(0),className:"flex-1",disabled:j,children:[n.jsx(gt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsx(K,{onClick:Se,className:"flex-1",disabled:j||!C||!S||!!_,children:j?"Verificando...":"Próximo"})]})]}),w===2&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx(Fs,{className:"h-12 w-12 mx-auto text-primary mb-2"}),n.jsx("h3",{className:"text-lg font-semibold",children:"Foto e Biografia"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Ajude as pessoas a conhecerem você"})]}),n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsx(Ut,{className:"h-24 w-24",children:R?n.jsx(Kt,{src:R}):n.jsx($t,{className:"bg-surface text-2xl",children:S.charAt(0)||"U"})}),n.jsx("input",{ref:F,type:"file",accept:"image/*",onChange:Ee=>{var _e;const Je=((_e=Ee.target.files)==null?void 0:_e[0])||null;L(Je)},className:"hidden"}),n.jsxs(K,{variant:"outline",className:"w-full",type:"button",onClick:()=>{var Ee;return(Ee=F.current)==null?void 0:Ee.click()},children:[n.jsx(Fs,{className:"h-4 w-4 mr-2"}),R?"Trocar Foto":"Adicionar Foto"]}),n.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Foto de perfil (opcional)"})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"bio",children:"Biografia *"}),n.jsx(kn,{id:"bio",value:M,onChange:Ee=>P(Ee.target.value),placeholder:"Conte um pouco sobre você e seus eventos...",rows:4,maxLength:500}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[M.length,"/500 caracteres"]})]}),n.jsx(mk,{value:ye||void 0,onChange:(Ee,Je)=>{H(Ee),X(Je)},label:"Localização",placeholder:"Em qual cidade você organiza eventos?",required:!0,showUseLocation:!0}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(K,{variant:"outline",onClick:()=>b(1),className:"flex-1",children:[n.jsx(gt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsx(K,{onClick:Me,className:"flex-1",disabled:!M||!ye,children:"Próximo"})]})]}),w===3&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx(Ej,{className:"h-12 w-12 mx-auto text-primary mb-2"}),n.jsx("h3",{className:"text-lg font-semibold",children:"Links e Redes Sociais"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Selecione as redes que deseja adicionar (opcional)"})]}),n.jsxs("div",{className:"grid grid-cols-5 gap-4 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>{U(Y?"":"https://wa.me/")},className:`p-4 rounded-lg border-2 transition-all ${Y?"border-green-500 bg-green-500/10":"border-border hover:border-green-500/50"}`,children:n.jsx(Ls,{className:`h-6 w-6 mx-auto ${Y?"text-green-500":"text-muted-foreground"}`})}),n.jsx("button",{type:"button",onClick:()=>{re(q?"":"https://instagram.com/")},className:`p-4 rounded-lg border-2 transition-all ${q?"border-pink-500 bg-pink-500/10":"border-border hover:border-pink-500/50"}`,children:n.jsx(Gi,{className:`h-6 w-6 mx-auto ${q?"text-pink-500":"text-muted-foreground"}`})}),n.jsx("button",{type:"button",onClick:()=>{ne(W?"":"https://open.spotify.com/")},className:`p-4 rounded-lg border-2 transition-all ${W?"border-purple-500 bg-purple-500/10":"border-border hover:border-purple-500/50"}`,children:n.jsx(au,{className:`h-6 w-6 mx-auto ${W?"text-purple-500":"text-muted-foreground"}`})}),n.jsx("button",{type:"button",onClick:()=>{ae(oe?"":"https://maps.google.com/")},className:`p-4 rounded-lg border-2 transition-all ${oe?"border-red-500 bg-red-500/10":"border-border hover:border-red-500/50"}`,children:n.jsx(Rt,{className:`h-6 w-6 mx-auto ${oe?"text-red-500":"text-muted-foreground"}`})}),n.jsx("button",{type:"button",onClick:()=>{he(J?"":"https://")},className:`p-4 rounded-lg border-2 transition-all ${J?"border-blue-500 bg-blue-500/10":"border-border hover:border-blue-500/50"}`,children:n.jsx(su,{className:`h-6 w-6 mx-auto ${J?"text-blue-500":"text-muted-foreground"}`})})]}),Y&&n.jsxs("div",{children:[n.jsxs(de,{htmlFor:"whatsapp",className:"flex items-center gap-2",children:[n.jsx(Ls,{className:"h-4 w-4 text-green-500"}),"WhatsApp"]}),n.jsx(we,{id:"whatsapp",value:Y,onChange:Ee=>U(Ee.target.value),placeholder:"https://wa.me/5511999999999"})]}),q&&n.jsxs("div",{children:[n.jsxs(de,{htmlFor:"instagram",className:"flex items-center gap-2",children:[n.jsx(Gi,{className:"h-4 w-4 text-pink-500"}),"Instagram"]}),n.jsx(we,{id:"instagram",value:q,onChange:Ee=>re(Ee.target.value),placeholder:"https://instagram.com/seu_perfil"})]}),W&&n.jsxs("div",{children:[n.jsxs(de,{htmlFor:"playlist",className:"flex items-center gap-2",children:[n.jsx(au,{className:"h-4 w-4 text-purple-500"}),"Playlist"]}),n.jsx(we,{id:"playlist",value:W,onChange:Ee=>ne(Ee.target.value),placeholder:"https://open.spotify.com/playlist/..."})]}),oe&&n.jsxs("div",{children:[n.jsxs(de,{htmlFor:"location",className:"flex items-center gap-2",children:[n.jsx(Rt,{className:"h-4 w-4 text-red-500"}),"Localização"]}),n.jsx(we,{id:"location",value:oe,onChange:Ee=>ae(Ee.target.value),placeholder:"https://maps.google.com/..."})]}),J&&n.jsxs("div",{children:[n.jsxs(de,{htmlFor:"website",className:"flex items-center gap-2",children:[n.jsx(su,{className:"h-4 w-4 text-blue-500"}),"Site"]}),n.jsx(we,{id:"website",value:J,onChange:Ee=>he(Ee.target.value),placeholder:"https://seusite.com.br"})]}),n.jsxs("div",{className:"flex gap-2 mt-6",children:[n.jsxs(K,{variant:"outline",onClick:()=>b(2),className:"flex-1",children:[n.jsx(gt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsx(K,{onClick:ue,className:"flex-1",children:"Próximo"})]})]}),w===4&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx(F8,{className:"h-12 w-12 mx-auto text-primary mb-2"}),n.jsx("h3",{className:"text-lg font-semibold",children:"Escolha o Tema da Sua Página"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Selecione como seus visitantes verão sua página"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx("button",{type:"button",onClick:()=>se("dark"),className:`p-6 rounded-lg border-2 transition-all ${te==="dark"?"border-primary bg-primary/10":"border-border hover:border-primary/50"}`,children:n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"w-full h-24 bg-gradient-to-br from-gray-900 to-gray-800 rounded-md flex items-center justify-center",children:n.jsx("div",{className:"text-white text-xs font-medium",children:"Modo Escuro"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"font-medium text-sm",children:"Dark Mode"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Visual moderno e elegante"})]})]})}),n.jsx("button",{type:"button",onClick:()=>se("light"),className:`p-6 rounded-lg border-2 transition-all ${te==="light"?"border-primary bg-primary/10":"border-border hover:border-primary/50"}`,children:n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"w-full h-24 bg-gradient-to-br from-blue-400 via-pink-400 to-orange-400 rounded-md flex items-center justify-center",children:n.jsx("div",{className:"text-white text-xs font-medium",children:"Modo Claro"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"font-medium text-sm",children:"Light Mode"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Visual colorido e vibrante"})]})]})})]}),n.jsx("div",{className:"bg-muted/50 p-4 rounded-lg",children:n.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"💡 Seus visitantes sempre verão sua página no tema que você escolher aqui"})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(K,{variant:"outline",onClick:()=>b(3),className:"flex-1",disabled:j,children:[n.jsx(gt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsx(K,{onClick:We,className:"flex-1",disabled:j,children:j?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Criando..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Zr,{className:"h-4 w-4 mr-2"}),"Concluir"]})})]})]})]})]})})}const Vq=o0.map(e=>{var t;return{id:e.value,label:e.label.replace(/^.+\s/,""),icon:((t=e.label.match(/^(.+?)\s/))==null?void 0:t[1])||"✨"}});function qq(){const e=_t(),r=Qn().state,[s,a]=v.useState((r==null?void 0:r.email)||""),[o,c]=v.useState((r==null?void 0:r.password)||""),[u,f]=v.useState((r==null?void 0:r.name)||""),[p,x]=v.useState(""),[w,b]=v.useState(""),[j,N]=v.useState(null),[C,T]=v.useState(""),[S,E]=v.useState(""),[_,k]=v.useState(""),[D,L]=v.useState([]),[R,M]=v.useState([]),[P,F]=v.useState([]),[Y,U]=v.useState(""),[q,re]=v.useState(0),[W,ne]=v.useState(!1),[oe,ae]=v.useState(""),[J,he]=v.useState(!1),[ye,H]=v.useState(null),[ee,X]=v.useState(!1),[te,se]=v.useState(""),ce=["Dados Básicos","Localização","Foto de Perfil","Redes Sociais","Interesses","Sugestões"],ge=(q+1)/ce.length*100;v.useEffect(()=>{(async()=>{var it;const{data:{session:Ze}}=await $.auth.getSession();if(Ze!=null&&Ze.user){he(!0),H(Ze.user.id),a(Ze.user.email||"");const ot=(it=Ze.user.user_metadata)==null?void 0:it.display_name;ot&&f(ot),re(1)}})()},[]);const Te=async()=>{try{await $.auth.signOut(),G.info("Sessão encerrada. Você pode criar uma nova conta."),he(!1),H(null),re(0),a(""),c(""),f(""),b(""),e("/auth")}catch(pe){console.error("Error logging out:",pe),G.error("Erro ao sair. Tente novamente.")}},be=async pe=>{if(!pe)return ae("Username é obrigatório"),!1;if(!/^[a-z0-9_]{3,20}$/.test(pe))return ae("Use apenas letras minúsculas, números e _ (3-20 caracteres)"),!1;try{const{data:Ze,error:it}=await $.from("profiles").select("username").eq("username",pe).maybeSingle();return it&&it.code!=="PGRST116"?(console.error("Error checking username:",it),ae("Erro ao verificar username"),!1):Ze?(ae("Username já está em uso"),!1):(ae(""),!0)}catch(Ze){return console.error("Error:",Ze),ae("Erro ao verificar username"),!1}},Se=pe=>{var it;const Ze=(it=pe.target.files)==null?void 0:it[0];if(Ze){if(!Ze.type.startsWith("image/")){G.error("Por favor, selecione apenas arquivos de imagem");return}if(Ze.size>5*1024*1024){G.error("A imagem deve ter no máximo 5MB");return}const ot=new FileReader;ot.onloadend=()=>{se(ot.result),X(!0)},ot.readAsDataURL(Ze)}},Me=pe=>{N(pe);const Ze=new FileReader;Ze.onloadend=()=>{T(Ze.result)},Ze.readAsDataURL(pe),X(!1)},ue=pe=>{L(Ze=>Ze.includes(pe)?Ze.filter(it=>it!==pe):[...Ze,pe])},We=()=>{if(!s||!o||!u||!p){G.error("Preencha todos os campos");return}const pe=new Date,Ze=new Date(p),it=pe.getFullYear()-Ze.getFullYear(),ot=pe.getMonth()-Ze.getMonth();if((ot<0||ot===0&&pe.getDate()<Ze.getDate()?it-1:it)<13){G.error("Você precisa ter pelo menos 13 anos para se cadastrar");return}re(1)},Ee=async()=>{await be(w)&&re(3)},Je=()=>{re(4)},_e=async()=>{if(D.length===0){G.error("Selecione pelo menos um interesse");return}re(5)};v.useEffect(()=>{q===5&&D.length>0&&ze()},[q,D]);const ze=async()=>{try{ne(!0);const{data:pe,error:Ze}=await $.from("organizers").select(`
          id,
          page_title,
          avatar_url,
          category,
          user_id
        `).eq("is_page_active",!0).limit(10);if(Ze)throw Ze;const it=await Promise.all((pe||[]).map(async ot=>{const[ar,Nt]=await Promise.all([$.from("followers").select("id",{count:"exact",head:!0}).eq("organizer_id",ot.id),$.from("events").select("id",{count:"exact",head:!0}).eq("organizer_id",ot.id)]);return{...ot,followers_count:ar.count??0,events_count:Nt.count??0}}));it.sort((ot,ar)=>ar.followers_count+ar.events_count-(ot.followers_count+ot.events_count)),M(it.slice(0,6))}catch(pe){console.error("Error fetching suggested organizers:",pe)}finally{ne(!1)}},Ge=pe=>{F(Ze=>Ze.includes(pe)?Ze.filter(it=>it!==pe):[...Ze,pe])},Vt=async()=>{var pe,Ze,it;ne(!0);try{let ot;if(J&&ye)ot=ye;else{const{data:Sr,error:At}=await $.auth.signUp({email:s,password:o,options:{emailRedirectTo:`${window.location.origin}/`,data:{display_name:u,role:"user"}}});if(At)if((pe=At.message)!=null&&pe.includes("already registered")||(Ze=At.message)!=null&&Ze.includes("User already registered")){const{data:$e,error:Ae}=await $.auth.signInWithPassword({email:s,password:o});if(Ae){G.error("Email já cadastrado. Verifique sua senha e tente novamente."),re(0);return}if(!$e.user)throw new Error("Falha ao fazer login");ot=$e.user.id,G.info("Login realizado! Complete seu perfil."),await new Promise(st=>setTimeout(st,1e3))}else throw At;else{if(!Sr.user)throw new Error("Falha ao criar usuário");const{error:$e}=await $.auth.signInWithPassword({email:s,password:o});if($e){G.success("Conta criada! Verifique seu email para confirmar."),e("/auth");return}ot=Sr.user.id,await new Promise(Ae=>setTimeout(Ae,1500))}}let ar="";if(j){const Sr=j.name.split(".").pop(),At=`${ot}/avatar.${Sr}`,{error:$e}=await $.storage.from("user-uploads").upload(At,j,{upsert:!0});if($e)console.error("Error uploading avatar:",$e);else{const{data:{publicUrl:Ae}}=$.storage.from("user-uploads").getPublicUrl(At);ar=Ae}}const{error:Nt}=await $.from("profiles").update({display_name:u,username:w,avatar_url:ar||null,instagram_url:S||null,phone:_||null,interests:D,city_id:Y||null,birth_date:p||null,notes:`Interesses: ${D.join(", ")}`}).eq("user_id",ot);if(Nt)throw console.error("Profile update error:",Nt),new Error(`Erro ao atualizar perfil: ${Nt.message}`);if(P.length>0){const Sr=P.map(At=>$.from("followers").insert({user_id:ot,organizer_id:At}));await Promise.all(Sr)}G.success("Perfil criado com sucesso!"),e("/")}catch(ot){console.error("Error creating profile:",ot),(it=ot.message)!=null&&it.includes("Username cannot be changed")?G.error("Erro: Username já foi definido. Tente fazer login."):ot.message?G.error(ot.message):G.error("Erro ao criar perfil. Tente novamente.")}finally{ne(!1)}};return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary/10 via-background to-primary/5 flex items-center justify-center p-4",children:[n.jsx(Ne,{className:"w-full max-w-md",children:n.jsxs(Ce,{className:"p-6",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsxs(K,{variant:"ghost",size:"sm",onClick:()=>e("/auth"),className:"text-muted-foreground hover:text-foreground",children:[n.jsx(gt,{className:"h-4 w-4 mr-2"}),"Cancelar"]})}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary/10 mb-4",children:n.jsx(ms,{className:"h-8 w-8 text-primary"})}),n.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Complete seu Perfil"}),n.jsx("p",{className:"text-muted-foreground text-sm",children:ce[q]}),!J&&q===0&&n.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Já tem conta?"," ",n.jsx("button",{onClick:()=>e("/auth"),className:"text-primary hover:underline font-medium",children:"Fazer login"})]}),J&&n.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Conectado como ",s,"."," ",n.jsx("button",{onClick:Te,className:"text-destructive hover:underline font-medium",children:"Sair"})]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx(Lv,{value:ge,className:"h-2"}),n.jsxs("div",{className:"flex justify-between mt-2 text-xs text-muted-foreground",children:[n.jsxs("span",{children:["Passo ",q+1," de ",ce.length]}),n.jsxs("span",{children:[Math.round(ge),"%"]})]})]}),q===0&&n.jsx("div",{className:"space-y-4",children:!J&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"name",children:"Nome Completo"}),n.jsx(we,{id:"name",value:u,onChange:pe=>f(pe.target.value),placeholder:"Seu nome"})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"email",children:"Email"}),n.jsx(we,{id:"email",type:"email",value:s,onChange:pe=>a(pe.target.value),placeholder:"seu@email.com"})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"password",children:"Senha"}),n.jsx(we,{id:"password",type:"password",value:o,onChange:pe=>c(pe.target.value),placeholder:"Mínimo 6 caracteres"})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"birthDate",children:"Data de Nascimento"}),n.jsx(we,{id:"birthDate",type:"date",value:p,onChange:pe=>x(pe.target.value),max:new Date().toISOString().split("T")[0]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Sua idade será calculada automaticamente"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(K,{variant:"outline",onClick:()=>e("/auth"),className:"flex-1",children:[n.jsx(gt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsxs(K,{onClick:We,className:"flex-1",children:["Próximo ",n.jsx(pd,{className:"ml-2 h-4 w-4"})]})]})]})}),q===1&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary/10 mb-4",children:n.jsx(Rt,{className:"h-8 w-8 text-primary"})}),n.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Onde você está?"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Selecione sua cidade para ver eventos próximos"})]}),n.jsx(mk,{value:Y,onChange:U,label:"Sua Cidade",placeholder:"Selecione sua cidade"}),n.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"💡 Você verá eventos da sua cidade automaticamente. Para ver eventos de outras cidades, use a busca."}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(K,{variant:"outline",onClick:()=>J?e("/auth"):re(0),className:"flex-1",children:[n.jsx(gt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsxs(K,{onClick:()=>re(2),className:"flex-1",disabled:!Y,children:["Próximo ",n.jsx(pd,{className:"ml-2 h-4 w-4"})]})]})]}),q===2&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"username",children:"Username (ID único)"}),n.jsx(we,{id:"username",value:w,onChange:pe=>{b(pe.target.value.toLowerCase()),ae("")},onBlur:pe=>be(pe.target.value),placeholder:"seu_username",className:oe?"border-destructive":""}),oe&&n.jsx("p",{className:"text-sm text-destructive mt-1",children:oe}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Use letras minúsculas, números e _"})]}),n.jsxs("div",{children:[n.jsx(de,{children:"Foto de Perfil"}),n.jsxs("div",{className:"flex flex-col items-center gap-4 mt-2",children:[n.jsx(Ut,{className:"h-24 w-24",children:C?n.jsx(Kt,{src:C}):n.jsx($t,{children:n.jsx(ms,{className:"h-12 w-12"})})}),n.jsx("label",{htmlFor:"avatar-upload",children:n.jsx(K,{type:"button",variant:"outline",size:"sm",asChild:!0,children:n.jsxs("span",{className:"cursor-pointer",children:[n.jsx(Fs,{className:"mr-2 h-4 w-4"}),C?"Trocar Foto":"Escolher Foto"]})})}),n.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",onChange:Se,className:"hidden"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(K,{variant:"outline",onClick:()=>re(1),className:"flex-1",children:[n.jsx(gt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsxs(K,{onClick:Ee,className:"flex-1",children:["Próximo ",n.jsx(pd,{className:"ml-2 h-4 w-4"})]})]})]}),q===3&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"instagram",children:"Instagram (opcional)"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Gi,{className:"h-4 w-4 text-muted-foreground"}),n.jsx(we,{id:"instagram",value:S,onChange:pe=>E(pe.target.value),placeholder:"https://instagram.com/seu_username"})]})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"whatsapp",children:"WhatsApp (opcional)"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ls,{className:"h-4 w-4 text-muted-foreground"}),n.jsx(we,{id:"whatsapp",value:_,onChange:pe=>k(pe.target.value),placeholder:"https://wa.me/5511999999999"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(K,{variant:"outline",onClick:()=>re(1),className:"flex-1",children:[n.jsx(gt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsxs(K,{onClick:Je,className:"flex-1",children:["Próximo ",n.jsx(pd,{className:"ml-2 h-4 w-4"})]})]})]}),q===4&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs(de,{className:"flex items-center gap-2 mb-3",children:[n.jsx(ou,{className:"h-4 w-4"}),"Selecione seus interesses"]}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:Vq.map(pe=>n.jsxs(ct,{variant:D.includes(pe.id)?"default":"outline",className:"justify-center cursor-pointer py-3 text-sm transition-all hover:scale-105",onClick:()=>ue(pe.id),children:[n.jsx("span",{className:"mr-2",children:pe.icon}),pe.label,D.includes(pe.id)&&n.jsx(Yn,{className:"ml-2 h-3 w-3"})]},pe.id))}),n.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Selecione pelo menos um interesse"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(K,{variant:"outline",onClick:()=>re(3),className:"flex-1",children:[n.jsx(gt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsxs(K,{onClick:_e,disabled:D.length===0,className:"flex-1",children:["Próximo ",n.jsx(pd,{className:"ml-2 h-4 w-4"})]})]})]}),q===5&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs(de,{className:"flex items-center gap-2 mb-3",children:[n.jsx(er,{className:"h-4 w-4"}),"Siga organizadores que te interessam"]}),n.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Personalize sua experiência seguindo organizadores"}),W?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Carregando sugestões..."}):R.length>0?n.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:R.map(pe=>n.jsxs("div",{onClick:()=>Ge(pe.id),className:`flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all hover:bg-accent/50 ${P.includes(pe.id)?"border-primary bg-primary/5":"border-border"}`,children:[n.jsxs(Ut,{className:"h-12 w-12",children:[n.jsx(Kt,{src:pe.avatar_url}),n.jsx($t,{children:pe.page_title[0]})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium text-sm truncate",children:pe.page_title}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[pe.followers_count," seguidores • ",pe.events_count," eventos"]})]}),P.includes(pe.id)&&n.jsx(Yn,{className:"h-5 w-5 text-primary flex-shrink-0"})]},pe.id))}):n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Nenhum organizador encontrado"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(K,{variant:"outline",onClick:()=>re(4),className:"flex-1",children:[n.jsx(gt,{className:"mr-2 h-4 w-4"})," Voltar"]}),n.jsx(K,{onClick:Vt,disabled:W,className:"flex-1",children:W?"Criando...":"Concluir"})]})]})]})}),n.jsx(Rv,{open:ee,onOpenChange:X,imageSrc:te,onCropComplete:Me,aspectRatio:1})]})}const Wq=()=>{const e=Qn();return v.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),n.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"mb-4 text-4xl font-bold text-foreground",children:"404"}),n.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Página não encontrada"}),n.jsx("a",{href:"/",className:"text-primary underline hover:text-primary-glow transition-smooth",children:"Voltar ao Início"})]})})};function Hq(){const e=_t(),{isAdmin:t,loading:r}=zs(),[s,a]=v.useState({totalUsers:0,totalOrganizers:0,pendingClaims:0,unreadSupport:0}),[o,c]=v.useState(!0);return v.useEffect(()=>{!r&&!t&&e("/")},[t,r,e]),v.useEffect(()=>{t&&(async()=>{try{const[f,p,x,w]=await Promise.all([$.from("profiles").select("id",{count:"exact",head:!0}),$.from("organizers").select("id",{count:"exact",head:!0}),$.from("event_claim_requests").select("id",{count:"exact",head:!0}).eq("status","pending"),$.from("support_messages").select("id",{count:"exact",head:!0}).eq("read",!1).eq("is_admin_reply",!1)]);a({totalUsers:f.count||0,totalOrganizers:p.count||0,pendingClaims:x.count||0,unreadSupport:w.count||0})}catch(f){console.error("Error fetching stats:",f)}finally{c(!1)}})()},[t]),r||!t?null:n.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>e("/"),children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Painel Administrativo"}),n.jsx("p",{className:"text-muted-foreground",children:"Gerencie a plataforma"})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[n.jsxs(Ne,{children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(He,{className:"text-sm font-medium",children:"Total de Usuários"}),n.jsx(er,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(Ce,{children:o?n.jsx(St,{className:"h-8 w-20"}):n.jsx("div",{className:"text-2xl font-bold",children:s.totalUsers})})]}),n.jsxs(Ne,{children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(He,{className:"text-sm font-medium",children:"Organizadores"}),n.jsx(Et,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(Ce,{children:o?n.jsx(St,{className:"h-8 w-20"}):n.jsx("div",{className:"text-2xl font-bold",children:s.totalOrganizers})})]}),n.jsxs(Ne,{className:"cursor-pointer hover:bg-accent",onClick:()=>e("/admin/claims"),children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(He,{className:"text-sm font-medium",children:"Solicitações Pendentes"}),n.jsx(qn,{className:"h-4 w-4 text-yellow-500"})]}),n.jsx(Ce,{children:o?n.jsx(St,{className:"h-8 w-20"}):n.jsx("div",{className:"text-2xl font-bold",children:s.pendingClaims})})]}),n.jsxs(Ne,{className:"cursor-pointer hover:bg-accent",onClick:()=>e("/admin/support"),children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(He,{className:"text-sm font-medium",children:"Mensagens de Suporte"}),n.jsx(Px,{className:"h-4 w-4 text-blue-500"})]}),n.jsx(Ce,{children:o?n.jsx(St,{className:"h-8 w-20"}):n.jsx("div",{className:"text-2xl font-bold",children:s.unreadSupport})})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[n.jsxs(Ne,{children:[n.jsxs(qe,{children:[n.jsx(He,{children:"Repasses de Organizadores"}),n.jsx(Jr,{children:"Gerencie pagamentos e repasses para organizadores"})]}),n.jsx(Ce,{children:n.jsxs(K,{onClick:()=>e("/admin/organizer-payments"),className:"w-full",children:[n.jsx(An,{className:"h-4 w-4 mr-2"}),"Ver Repasses"]})})]}),n.jsxs(Ne,{children:[n.jsxs(qe,{children:[n.jsx(He,{children:"Eventos da Plataforma"}),n.jsx(Jr,{children:"Gerencie todos os eventos oficiais da plataforma"})]}),n.jsxs(Ce,{className:"space-y-2",children:[n.jsx(K,{onClick:()=>e("/admin/platform-events"),className:"w-full",variant:"outline",children:"Ver Todos os Eventos"}),n.jsx(K,{onClick:()=>e("/admin/create-platform-event"),className:"w-full",children:"Criar Novo Evento"})]})]}),n.jsxs(Ne,{children:[n.jsxs(qe,{children:[n.jsx(He,{children:"Geração Automática"}),n.jsx(Jr,{children:"Use IA para extrair eventos de APIs externas"})]}),n.jsxs(Ce,{className:"space-y-2",children:[n.jsx(K,{onClick:()=>e("/admin/auto-generate-events"),className:"w-full",children:"Gerar Eventos com IA"}),n.jsx(K,{onClick:()=>e("/admin/pending-events"),className:"w-full",variant:"outline",children:"Ver Eventos Pendentes"})]})]}),n.jsxs(Ne,{children:[n.jsxs(qe,{children:[n.jsx(He,{children:"Gerenciar Solicitações"}),n.jsx(Jr,{children:"Aprove ou rejeite pedidos de associação de eventos"})]}),n.jsx(Ce,{children:n.jsx(K,{onClick:()=>e("/admin/claims"),variant:"outline",className:"w-full",children:"Ver Solicitações"})})]})]})]})}function Gq(){const e=_t(),{user:t}=bt(),{isAdmin:r}=zs(),[s,a]=v.useState(!1),[o,c]=v.useState("presencial"),[u,f]=v.useState(!0),[p,x]=v.useState(!1),[w,b]=v.useState([]),[j,N]=v.useState(!1),[C,T]=v.useState(null),[S,E]=v.useState(null),[_,k]=v.useState({title:"",description:"",organizer_name:"",date:"",time:"",end_date:"",end_time:"",address:"",location_link:"",max_attendees:"",ticket_price:"",ticket_link:""}),[D,L]=v.useState([]);if(!r)return e("/"),null;const R=P=>{var Y;const F=(Y=P.target.files)==null?void 0:Y[0];if(F){E(F);const U=new FileReader;U.onload=q=>{var re;T((re=q.target)==null?void 0:re.result)},U.readAsDataURL(F)}},M=async P=>{if(P.preventDefault(),!!t){if(!_.title||!_.organizer_name||!_.date||!_.time||!_.end_date||!_.end_time){G.error("Preencha todos os campos obrigatórios");return}if(o==="presencial"&&!_.address){G.error("Preencha o endereço do evento");return}if(o==="live"&&!_.location_link){G.error("Preencha o link da transmissão");return}a(!0);try{let F=null;if(S){const re=S.name.split(".").pop(),W=`platform-events/${Date.now()}.${re}`,{error:ne}=await $.storage.from("user-uploads").upload(W,S);if(ne)throw ne;const{data:{publicUrl:oe}}=$.storage.from("user-uploads").getPublicUrl(W);F=oe}const Y=new Date(`${_.date}T${_.time}`),U=new Date(`${_.end_date}T${_.end_time}`),{error:q}=await $.from("platform_events").insert({title:_.title,description:_.description,organizer_name:_.organizer_name,event_date:Y.toISOString(),end_date:U.toISOString(),location:o==="live"?"Online":_.address,location_link:_.location_link||null,category:D.length>0?D:null,max_attendees:_.max_attendees?parseInt(_.max_attendees):null,image_url:F,created_by_admin_id:t.id});if(q)throw q;G.success("Evento da plataforma criado com sucesso!"),e("/admin")}catch(F){console.error("Error creating platform event:",F),G.error("Erro ao criar evento: "+F.message)}finally{a(!1)}}};return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b border-border",children:n.jsxs("div",{className:"flex items-center justify-between p-4 max-w-md mx-auto",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>e("/admin"),children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Criar Evento da Plataforma"}),n.jsx("div",{className:"w-10"})]})}),n.jsxs("div",{className:"p-4 max-w-md mx-auto pb-20",children:[n.jsx("div",{className:"mb-4 p-3 bg-primary/10 rounded-lg border border-primary/20",children:n.jsx("p",{className:"text-sm text-muted-foreground",children:"Eventos da plataforma não são associados a nenhum organizador específico. Organizadores poderão reivindicar esses eventos."})}),n.jsxs("form",{onSubmit:M,className:"space-y-6",children:[n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsx(He,{className:"text-sm",children:"Arte do Evento"})}),n.jsx(Ce,{children:n.jsx("div",{className:"relative",children:C?n.jsxs("div",{className:"relative h-48 rounded-lg overflow-hidden",children:[n.jsx("img",{src:C,alt:"Preview do evento",className:"w-full h-full object-cover"}),n.jsx(K,{type:"button",variant:"secondary",size:"sm",className:"absolute top-2 right-2",onClick:()=>{T(null),E(null)},children:"Remover"})]}):n.jsxs("label",{className:"flex flex-col items-center justify-center h-48 border-2 border-dashed border-border rounded-lg cursor-pointer hover:border-primary/50 transition-colors",children:[n.jsx(Fs,{className:"h-8 w-8 text-muted-foreground mb-2"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"Clique para adicionar uma imagem"}),n.jsx("input",{type:"file",accept:"image/*",onChange:R,className:"hidden"})]})})})]}),n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsx(He,{className:"text-sm",children:"Informações Básicas"})}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"title",children:"Nome do Evento *"}),n.jsx(we,{id:"title",placeholder:"Digite o nome do evento",value:_.title,onChange:P=>k({..._,title:P.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"organizer_name",children:"Nome do Organizador *"}),n.jsx(we,{id:"organizer_name",placeholder:"Nome que aparecerá como organizador",value:_.organizer_name,onChange:P=>k({..._,organizer_name:P.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"description",children:"Descrição"}),n.jsx(kn,{id:"description",placeholder:"Descreva o evento...",value:_.description,onChange:P=>k({..._,description:P.target.value}),rows:3})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"category",children:"Categorias"}),n.jsx(op,{value:D,onChange:L,placeholder:"Selecione uma ou mais categorias"})]})]})]}),n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsx(He,{className:"text-sm",children:"Tipo de Evento"})}),n.jsx(Ce,{children:n.jsxs(Ui,{value:o,onValueChange:P=>c(P),children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(on,{value:"presencial",id:"presencial"}),n.jsx(de,{htmlFor:"presencial",className:"cursor-pointer",children:"📍 Evento Presencial"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(on,{value:"live",id:"live"}),n.jsx(de,{htmlFor:"live",className:"cursor-pointer",children:"🔴 Evento Live (Online)"})]})]})})]}),n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsxs(He,{className:"text-sm flex items-center gap-2",children:[n.jsx(Et,{className:"h-4 w-4"}),"Data e Hora"]})}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(de,{className:"text-sm font-medium mb-2 block",children:"Início do Evento"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"date",className:"text-xs text-muted-foreground",children:"Data *"}),n.jsx(we,{id:"date",type:"date",value:_.date,onChange:P=>k({..._,date:P.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"time",className:"text-xs text-muted-foreground",children:"Horário *"}),n.jsx(we,{id:"time",type:"time",value:_.time,onChange:P=>k({..._,time:P.target.value}),required:!0})]})]})]}),n.jsxs("div",{className:"pt-2 border-t",children:[n.jsx(de,{className:"text-sm font-medium mb-2 block",children:"Encerramento do Evento *"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"end_date",className:"text-xs text-muted-foreground",children:"Data *"}),n.jsx(we,{id:"end_date",type:"date",value:_.end_date,onChange:P=>k({..._,end_date:P.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"end_time",className:"text-xs text-muted-foreground",children:"Horário *"}),n.jsx(we,{id:"end_time",type:"time",value:_.end_time,onChange:P=>k({..._,end_time:P.target.value}),required:!0})]})]})]})]})]}),n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsxs(He,{className:"text-sm flex items-center gap-2",children:[n.jsx(Rt,{className:"h-4 w-4"}),o==="live"?"Link da Transmissão":"Localização"]})}),n.jsx(Ce,{className:"space-y-4",children:o==="presencial"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"address",children:"Endereço Completo *"}),n.jsx(we,{id:"address",placeholder:"Rua, número, bairro, cidade...",value:_.address,onChange:P=>k({..._,address:P.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"location_link",children:"Link do Endereço"}),n.jsx(we,{id:"location_link",type:"url",placeholder:"https://maps.google.com/...",value:_.location_link,onChange:P=>k({..._,location_link:P.target.value})})]})]}):n.jsxs("div",{children:[n.jsx(de,{htmlFor:"location_link",children:"Link da Transmissão *"}),n.jsx(we,{id:"location_link",type:"url",placeholder:"https://youtube.com/... ou outro link",value:_.location_link,onChange:P=>k({..._,location_link:P.target.value}),required:!0})]})})]}),n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsxs(He,{className:"text-sm flex items-center gap-2",children:[n.jsx(er,{className:"h-4 w-4"}),"Capacidade e Ingresso"]})}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"max_attendees",children:"Número Máximo de Participantes"}),n.jsx(we,{id:"max_attendees",type:"number",placeholder:"Deixe em branco para ilimitado",value:_.max_attendees,onChange:P=>k({..._,max_attendees:P.target.value}),min:"1"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(de,{htmlFor:"is_free",children:"Evento Gratuito"}),n.jsx(Tr,{id:"is_free",checked:u,onCheckedChange:f})]}),!u&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsxs(de,{htmlFor:"ticket_price",className:"flex items-center gap-2",children:[n.jsx(An,{className:"h-4 w-4"}),"Valor do Ingresso"]}),n.jsx(we,{id:"ticket_price",placeholder:"Ex: R$ 50,00",value:_.ticket_price,onChange:P=>k({..._,ticket_price:P.target.value})})]}),n.jsxs("div",{children:[n.jsx(de,{htmlFor:"ticket_link",children:"Link para Compra"}),n.jsx(we,{id:"ticket_link",type:"url",placeholder:"https://...",value:_.ticket_link,onChange:P=>k({..._,ticket_link:P.target.value})})]})]})]})]}),n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsxs(He,{className:"text-sm flex items-center gap-2",children:[n.jsx(Sc,{className:"h-4 w-4"}),"Formulário de Cadastro"]})}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(de,{htmlFor:"requires_registration",children:"Requer Cadastro dos Participantes"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Nome, email e telefone sempre serão coletados"})]}),n.jsx(Tr,{id:"requires_registration",checked:p,onCheckedChange:x})]}),p&&n.jsxs(K,{type:"button",variant:"outline",onClick:()=>N(!0),className:"w-full",children:["Configurar Campos Personalizados",w.length>0&&n.jsx("span",{className:"ml-2 text-xs bg-primary text-primary-foreground px-2 py-0.5 rounded",children:w.length})]})]})]}),n.jsx(K,{type:"submit",className:"w-full",disabled:s,children:s?"Criando...":"Criar Evento"})]})]}),n.jsx(lA,{open:j,onOpenChange:N,fields:w,onSave:b})]})}function Xq(){const e=_t(),{user:t}=bt(),{isAdmin:r,loading:s}=zs(),[a,o]=v.useState([]),[c,u]=v.useState(!0);v.useEffect(()=>{if(!s&&!r){e("/");return}r&&f()},[r,s,e]);const f=async()=>{try{const{data:w,error:b}=await $.from("event_claim_requests").select(`
          *,
          platform_events (id, title, organizer_name, event_date, location, image_url, description),
          organizers (id, username, page_title, avatar_url, page_description, category)
        `).order("created_at",{ascending:!1});if(b)throw b;o(w||[])}catch(w){console.error("Error fetching requests:",w),G.error("Erro ao carregar solicitações")}finally{u(!1)}},p=async(w,b,j)=>{if(t)try{const{data:N,error:C}=await $.from("platform_events").select("*").eq("id",b).single();if(C)throw C;if(!N)throw new Error("Evento não encontrado");const{data:T}=await $.from("events").select("id").eq("organizer_id",j).eq("title",N.title).maybeSingle();if(T){G.error("Este evento já foi criado para este organizador");return}const{data:S,error:E}=await $.from("events").insert({organizer_id:j,title:N.title,description:N.description,event_date:N.event_date,end_date:N.end_date,location:N.location,location_link:N.location_link,image_url:N.image_url,category:N.category,max_attendees:N.max_attendees,ticket_price:N.ticket_price,ticket_link:N.ticket_link,status:N.status||"upcoming",current_attendees:0,is_live:!1}).select().single();if(E)throw E;const{error:_}=await $.from("platform_events").update({claimed_by_organizer_id:j,approval_status:"approved"}).eq("id",b);if(_)throw _;const{error:k}=await $.from("event_claim_requests").update({status:"approved",reviewed_at:new Date().toISOString(),reviewed_by_admin_id:t.id}).eq("id",w);if(k)throw k;G.success("Solicitação aprovada! Evento criado para o organizador e já está disponível no perfil dele."),f()}catch(N){console.error("Error approving request:",N),G.error("Erro ao aprovar: "+N.message)}},x=async w=>{if(t)try{const{error:b}=await $.from("event_claim_requests").update({status:"rejected",reviewed_at:new Date().toISOString(),reviewed_by_admin_id:t.id}).eq("id",w);if(b)throw b;G.success("Solicitação rejeitada"),f()}catch(b){console.error("Error rejecting request:",b),G.error("Erro ao rejeitar: "+b.message)}};return s||!r?null:n.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[n.jsxs(K,{variant:"ghost",onClick:()=>e("/admin"),className:"mb-4",children:[n.jsx(gt,{className:"mr-2 h-4 w-4"}),"Voltar"]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Solicitações de Associação"}),n.jsx("p",{className:"text-muted-foreground",children:"Gerencie pedidos de organizadores para eventos da plataforma"})]}),c?n.jsx("div",{className:"space-y-4",children:[1,2,3].map(w=>n.jsxs(Ne,{children:[n.jsxs(qe,{children:[n.jsx(St,{className:"h-6 w-3/4"}),n.jsx(St,{className:"h-4 w-1/2 mt-2"})]}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsx(St,{className:"h-20"}),n.jsx(St,{className:"h-20"})]}),n.jsx(St,{className:"h-24"})]})]},w))}):a.length===0?n.jsx(Ne,{className:"border-2 border-dashed",children:n.jsxs(Ce,{className:"py-16 text-center",children:[n.jsx(Px,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Nenhuma solicitação ainda"}),n.jsx("p",{className:"text-muted-foreground max-w-md mx-auto",children:"Quando organizadores solicitarem associação a eventos da plataforma, eles aparecerão aqui para você aprovar ou rejeitar."})]})}):n.jsx("div",{className:"space-y-6",children:a.map(w=>n.jsxs(Ne,{className:"overflow-hidden",children:[w.platform_events.image_url&&n.jsx("div",{className:"h-48 overflow-hidden",children:n.jsx("img",{src:w.platform_events.image_url,alt:w.platform_events.title,className:"w-full h-full object-cover"})}),n.jsx(qe,{children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"space-y-1 flex-1",children:[n.jsx(He,{className:"text-2xl",children:w.platform_events.title}),n.jsxs(Jr,{children:["Solicitado em ",dn(new Date(w.created_at),"d 'de' MMMM 'às' HH:mm",{locale:Ir})]})]}),n.jsx(ct,{variant:w.status==="pending"?"default":w.status==="approved"?"secondary":"destructive",className:"text-sm",children:w.status==="pending"?"⏳ Pendente":w.status==="approved"?"✓ Aprovado":"✗ Rejeitado"})]})}),n.jsxs(Ce,{className:"space-y-6",children:[n.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg space-y-3",children:[n.jsx("h3",{className:"font-semibold text-sm uppercase tracking-wide text-muted-foreground",children:"Detalhes do Evento"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Et,{className:"h-4 w-4 mt-0.5 text-muted-foreground"}),n.jsx("span",{className:"text-sm",children:dn(new Date(w.platform_events.event_date),"d 'de' MMMM 'de' yyyy 'às' HH:mm",{locale:Ir})})]}),n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Rt,{className:"h-4 w-4 mt-0.5 text-muted-foreground"}),n.jsx("span",{className:"text-sm",children:w.platform_events.location})]}),w.platform_events.description&&n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:w.platform_events.description})]})]}),n.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg space-y-3",children:[n.jsx("h3",{className:"font-semibold text-sm uppercase tracking-wide text-muted-foreground",children:"Organizador Solicitante"}),n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsxs(Ut,{className:"h-16 w-16",children:[n.jsx(Kt,{src:w.organizers.avatar_url||""}),n.jsx($t,{children:n.jsx(ms,{className:"h-8 w-8"})})]}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("p",{className:"font-semibold text-lg",children:w.organizers.page_title}),w.organizers.category&&n.jsx(ct,{variant:"outline",className:"text-xs",children:w.organizers.category})]}),n.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["@",w.organizers.username]}),w.organizers.page_description&&n.jsx("p",{className:"text-sm text-muted-foreground",children:w.organizers.page_description})]})]})]}),w.message&&n.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex gap-2 mb-2",children:[n.jsx(Px,{className:"h-4 w-4 text-blue-500 mt-0.5"}),n.jsx("p",{className:"text-sm font-medium text-blue-500",children:"Mensagem do Organizador"})]}),n.jsx("p",{className:"text-sm pl-6",children:w.message})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[n.jsxs(K,{variant:"outline",onClick:()=>e(`/${w.organizers.username}`),className:"flex-1 min-w-[200px]",children:[n.jsx(Vr,{className:"mr-2 h-4 w-4"}),"Ver Perfil Completo"]}),w.status==="pending"&&n.jsxs(n.Fragment,{children:[n.jsxs(K,{onClick:()=>p(w.id,w.platform_events.id,w.organizers.id),className:"flex-1 min-w-[150px]",children:[n.jsx(Zr,{className:"mr-2 h-4 w-4"}),"Aprovar"]}),n.jsxs(K,{variant:"destructive",onClick:()=>x(w.id),className:"flex-1 min-w-[150px]",children:[n.jsx(Jh,{className:"mr-2 h-4 w-4"}),"Rejeitar"]})]})]})]})]},w.id))})]})}function Kq(){const e=_t(),{isAdmin:t,loading:r}=zs(),[s,a]=v.useState([]),[o,c]=v.useState(!0);v.useEffect(()=>{!r&&!t&&e("/")},[t,r,e]),v.useEffect(()=>{t&&u()},[t]);const u=async()=>{try{const{data:N,error:C}=await $.from("platform_events").select("*").order("event_date",{ascending:!0});if(C)throw C;const T=new Date,S=(N||[]).filter(E=>new Date(E.end_date||E.event_date)<T&&E.status!=="ended");if(S.length>0){const E=S.map(D=>$.from("platform_events").update({status:"ended"}).eq("id",D.id));await Promise.all(E),console.log(`Auto-ended ${S.length} past events`);const{data:_,error:k}=await $.from("platform_events").select("*").order("event_date",{ascending:!0});if(k)throw k;a(_||[])}else a(N||[])}catch(N){console.error("Error fetching platform events:",N),G.error("Erro ao carregar eventos")}finally{c(!1)}},f=async N=>{try{const{error:C}=await $.from("platform_events").update({status:"ended"}).eq("id",N);if(C)throw C;G.success("Evento encerrado com sucesso"),u()}catch(C){console.error("Error ending event:",C),G.error("Erro ao encerrar evento")}},p=async N=>{if(confirm("Tem certeza que deseja excluir este evento? Esta ação não pode ser desfeita."))try{const{error:C}=await $.from("platform_events").delete().eq("id",N);if(C)throw C;G.success("Evento excluído com sucesso"),u()}catch(C){console.error("Error deleting event:",C),G.error("Erro ao excluir evento")}},x=()=>{const N=new Date,C=s.filter(E=>{const _=new Date(E.event_date);return E.end_date&&new Date(E.end_date),_>N&&E.status!=="ended"}),T=s.filter(E=>{const _=new Date(E.event_date),k=E.end_date?new Date(E.end_date):null;return _<=N&&(!k||k>N)&&E.status!=="ended"}),S=s.filter(E=>(E.end_date?new Date(E.end_date):new Date(E.event_date))<N||E.status==="ended");return{upcoming:C,live:T,ended:S}},{upcoming:w,live:b,ended:j}=x();return r||!t?null:n.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx(K,{variant:"ghost",onClick:()=>e("/admin"),children:"← Voltar"}),n.jsx("h1",{className:"text-3xl font-bold mt-2",children:"Eventos da Plataforma"}),n.jsx("p",{className:"text-muted-foreground",children:"Gerencie todos os eventos criados pela plataforma"})]}),n.jsx(K,{onClick:()=>e("/admin/create-platform-event"),children:"Criar Novo Evento"})]}),o?n.jsx("div",{className:"grid gap-4 md:grid-cols-3 lg:grid-cols-4",children:[1,2,3,4].map(N=>n.jsx(St,{className:"h-48"},N))}):s.length===0?n.jsx(Ne,{children:n.jsx(Ce,{className:"py-12 text-center",children:n.jsx("p",{className:"text-muted-foreground",children:"Nenhum evento da plataforma encontrado"})})}):n.jsxs("div",{className:"space-y-8",children:[b.length>0&&n.jsxs("div",{children:[n.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[n.jsx("div",{className:"h-3 w-3 bg-green-500 rounded-full animate-pulse"}),"Acontecendo Agora (",b.length,")"]}),n.jsx("div",{className:"grid gap-3 md:grid-cols-3 lg:grid-cols-4",children:b.map(N=>n.jsxs(Ne,{className:"overflow-hidden",children:[N.image_url&&n.jsx("div",{className:"h-32 overflow-hidden",children:n.jsx("img",{src:N.image_url,alt:N.title,className:"w-full h-full object-cover"})}),n.jsxs(qe,{className:"p-3",children:[n.jsx(He,{className:"text-sm line-clamp-2",children:N.title}),n.jsx("p",{className:"text-xs text-muted-foreground",children:N.organizer_name})]}),n.jsxs(Ce,{className:"p-3 pt-0 space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[n.jsx(Et,{className:"h-3 w-3"}),n.jsx("span",{className:"truncate",children:dn(new Date(N.event_date),"d/MM 'às' HH:mm",{locale:Ir})})]}),n.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[n.jsx(Rt,{className:"h-3 w-3"}),n.jsx("span",{className:"truncate",children:N.location})]}),n.jsxs("div",{className:"flex gap-1 pt-1",children:[n.jsx(K,{variant:"outline",size:"sm",onClick:()=>e(`/admin/platform-event/${N.id}/edit`),className:"flex-1 h-7 text-xs",children:n.jsx(ss,{className:"h-3 w-3"})}),n.jsx(K,{variant:"outline",size:"sm",onClick:()=>e(`/admin/platform-event/${N.id}/registrations`),className:"flex-1 h-7 text-xs",children:n.jsx(Zr,{className:"h-3 w-3"})}),n.jsx(K,{variant:"destructive",size:"sm",onClick:()=>f(N.id),className:"h-7 text-xs",children:n.jsx(Jh,{className:"h-3 w-3"})})]})]})]},N.id))})]}),w.length>0&&n.jsxs("div",{children:[n.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[n.jsx(Et,{className:"h-5 w-5 text-blue-500"}),"Próximos Eventos (",w.length,")"]}),n.jsx("div",{className:"grid gap-3 md:grid-cols-3 lg:grid-cols-4",children:w.map(N=>n.jsxs(Ne,{className:"overflow-hidden",children:[N.image_url&&n.jsx("div",{className:"h-32 overflow-hidden",children:n.jsx("img",{src:N.image_url,alt:N.title,className:"w-full h-full object-cover"})}),n.jsxs(qe,{className:"p-3",children:[n.jsx(He,{className:"text-sm line-clamp-2",children:N.title}),n.jsx("p",{className:"text-xs text-muted-foreground",children:N.organizer_name})]}),n.jsxs(Ce,{className:"p-3 pt-0 space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[n.jsx(Et,{className:"h-3 w-3"}),n.jsx("span",{className:"truncate",children:dn(new Date(N.event_date),"d/MM 'às' HH:mm",{locale:Ir})})]}),n.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[n.jsx(Rt,{className:"h-3 w-3"}),n.jsx("span",{className:"truncate",children:N.location})]}),n.jsxs("div",{className:"flex gap-1 pt-1",children:[n.jsx(K,{variant:"outline",size:"sm",onClick:()=>e(`/admin/platform-event/${N.id}/edit`),className:"flex-1 h-7 text-xs",children:n.jsx(ss,{className:"h-3 w-3"})}),n.jsx(K,{variant:"outline",size:"sm",onClick:()=>e(`/admin/platform-event/${N.id}/registrations`),className:"flex-1 h-7 text-xs",children:n.jsx(Zr,{className:"h-3 w-3"})}),n.jsx(K,{variant:"destructive",size:"sm",onClick:()=>f(N.id),className:"h-7 text-xs",children:n.jsx(Jh,{className:"h-3 w-3"})})]})]})]},N.id))})]}),j.length>0&&n.jsxs("div",{children:[n.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2 text-muted-foreground",children:[n.jsx(Zr,{className:"h-5 w-5"}),"Eventos Realizados (",j.length,")"]}),n.jsx("div",{className:"grid gap-3 md:grid-cols-3 lg:grid-cols-4",children:j.map(N=>n.jsxs(Ne,{className:"overflow-hidden opacity-75",children:[N.image_url&&n.jsx("div",{className:"h-32 overflow-hidden",children:n.jsx("img",{src:N.image_url,alt:N.title,className:"w-full h-full object-cover grayscale"})}),n.jsxs(qe,{className:"p-3",children:[n.jsx(He,{className:"text-sm line-clamp-2",children:N.title}),n.jsx("p",{className:"text-xs text-muted-foreground",children:N.organizer_name})]}),n.jsxs(Ce,{className:"p-3 pt-0 space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[n.jsx(Et,{className:"h-3 w-3"}),n.jsx("span",{className:"truncate",children:dn(new Date(N.event_date),"d/MM 'às' HH:mm",{locale:Ir})})]}),n.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[n.jsx(Rt,{className:"h-3 w-3"}),n.jsx("span",{className:"truncate",children:N.location})]}),n.jsxs("div",{className:"flex gap-1 pt-1",children:[n.jsx(K,{variant:"outline",size:"sm",onClick:()=>e(`/admin/platform-event/${N.id}/registrations`),className:"flex-1 h-7 text-xs",children:n.jsx(Zr,{className:"h-3 w-3"})}),n.jsx(K,{variant:"destructive",size:"sm",onClick:()=>p(N.id),className:"h-7 text-xs",children:n.jsx(Jh,{className:"h-3 w-3"})})]})]})]},N.id))})]})]})]})}function Yq(){const{eventId:e}=fl(),t=_t(),{isAdmin:r,loading:s}=zs(),[a,o]=v.useState(!0),[c,u]=v.useState(!1),[f,p]=v.useState(!1),[x,w]=v.useState({title:"",description:"",event_date:"",end_date:"",location:"",location_link:"",organizer_name:"",max_attendees:"",ticket_price:"",ticket_link:""}),[b,j]=v.useState([]),[N,C]=v.useState(null),[T,S]=v.useState(null),[E,_]=v.useState(!1);v.useEffect(()=>{!s&&!r&&t("/")},[r,s,t]),v.useEffect(()=>{r&&e&&k()},[r,e]);const k=async()=>{var M,P;try{const{data:F,error:Y}=await $.from("platform_events").select("*").eq("id",e).single();if(Y)throw Y;w({title:F.title,description:F.description||"",event_date:F.event_date,end_date:F.end_date||"",location:F.location,location_link:F.location_link||"",organizer_name:F.organizer_name,max_attendees:((M=F.max_attendees)==null?void 0:M.toString())||"",ticket_price:((P=F.ticket_price)==null?void 0:P.toString())||"",ticket_link:F.ticket_link||""}),j(F.category||[]),C(F.image_url||null);const U=F.ticket_price,q=F.ticket_link;_(!!(U&&U>0)||!!q)}catch(F){console.error("Error fetching event:",F),G.error("Erro ao carregar evento")}finally{o(!1)}},D=M=>{var F;const P=(F=M.target.files)==null?void 0:F[0];if(P){S(P);const Y=new FileReader;Y.onload=U=>{var q;C((q=U.target)==null?void 0:q.result)},Y.readAsDataURL(P)}},L=async M=>{M.preventDefault(),u(!0);try{let P=N;if(T){const Y=T.name.split(".").pop(),U=`platform-events/${Date.now()}.${Y}`,{error:q}=await $.storage.from("user-uploads").upload(U,T);if(q)throw q;const{data:{publicUrl:re}}=$.storage.from("user-uploads").getPublicUrl(U);P=re}const{error:F}=await $.from("platform_events").update({title:x.title,description:x.description,event_date:x.event_date,end_date:x.end_date||null,location:x.location,location_link:x.location_link||null,organizer_name:x.organizer_name,max_attendees:x.max_attendees?parseInt(x.max_attendees):null,category:b.length>0?b:null,image_url:P,ticket_price:E&&x.ticket_price?parseFloat(x.ticket_price):0,ticket_link:E&&x.ticket_link||null,updated_at:new Date().toISOString()}).eq("id",e);if(F)throw F;G.success("Evento atualizado com sucesso!"),t("/admin/platform-events")}catch(P){console.error("Error updating event:",P),G.error("Erro ao atualizar evento")}finally{u(!1)}},R=async()=>{if(!x.title||!x.organizer_name||!x.event_date||!x.location){G.error("Preencha os campos obrigatórios antes de gerar a descrição");return}p(!0);try{const{data:M,error:P}=await $.functions.invoke("generate-event-description",{body:{title:x.title,organizerName:x.organizer_name,eventDate:x.event_date,location:x.location,category:b,ticketPrice:E&&x.ticket_price?parseFloat(x.ticket_price):0}});if(P)throw P;if(M!=null&&M.description)w({...x,description:M.description}),G.success("Descrição gerada com sucesso!");else throw new Error("Nenhuma descrição foi gerada")}catch(M){console.error("Error generating description:",M),G.error("Erro ao gerar descrição. Tente novamente.")}finally{p(!1)}};return s||!r||a?null:n.jsxs("div",{className:"container mx-auto p-6 max-w-2xl",children:[n.jsx(K,{variant:"ghost",onClick:()=>t("/admin/platform-events"),className:"mb-4",children:"← Voltar"}),n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsx(He,{children:"Editar Evento da Plataforma"})}),n.jsx(Ce,{children:n.jsxs("form",{onSubmit:L,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(de,{children:"Banner do Evento"}),n.jsx("div",{className:"mt-2",children:N?n.jsxs("div",{className:"relative h-48 rounded-lg overflow-hidden",children:[n.jsx("img",{src:N,alt:"Preview do evento",className:"w-full h-full object-cover"}),n.jsx(K,{type:"button",variant:"secondary",size:"sm",className:"absolute top-2 right-2",onClick:()=>{C(null),S(null)},children:"Remover"})]}):n.jsxs("label",{className:"flex flex-col items-center justify-center h-48 border-2 border-dashed border-border rounded-lg cursor-pointer hover:border-primary/50 transition-colors",children:[n.jsx(Fs,{className:"h-8 w-8 text-muted-foreground mb-2"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"Clique para adicionar uma imagem"}),n.jsx("input",{type:"file",accept:"image/*",onChange:D,className:"hidden"})]})})]}),n.jsxs("div",{children:[n.jsx(de,{children:"Título do Evento"}),n.jsx(we,{value:x.title,onChange:M=>w({...x,title:M.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsx(de,{children:"Nome do Organizador"}),n.jsx(we,{value:x.organizer_name,onChange:M=>w({...x,organizer_name:M.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx(de,{children:"Descrição"}),n.jsxs(K,{type:"button",variant:"outline",size:"sm",onClick:R,disabled:f||!x.title,children:[n.jsx(ou,{className:"h-4 w-4 mr-2"}),f?"Gerando...":"Gerar com IA"]})]}),n.jsx(kn,{value:x.description,onChange:M=>w({...x,description:M.target.value}),rows:4,placeholder:"Clique em 'Gerar com IA' para criar uma descrição automática ou escreva manualmente"})]}),n.jsxs("div",{children:[n.jsx(de,{children:"Categorias"}),n.jsx(op,{value:b,onChange:j,placeholder:"Selecione uma ou mais categorias"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(de,{children:"Data/Hora Início *"}),n.jsx(we,{type:"datetime-local",value:x.event_date,onChange:M=>w({...x,event_date:M.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsx(de,{children:"Data/Hora Fim *"}),n.jsx(we,{type:"datetime-local",value:x.end_date,onChange:M=>w({...x,end_date:M.target.value}),required:!0})]})]}),n.jsxs("div",{children:[n.jsx(de,{children:"Local"}),n.jsx(we,{value:x.location,onChange:M=>w({...x,location:M.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsx(de,{children:"Link do Local"}),n.jsx(we,{type:"url",value:x.location_link,onChange:M=>w({...x,location_link:M.target.value}),placeholder:"https://maps.google.com/..."})]}),n.jsxs("div",{children:[n.jsx(de,{children:"Capacidade Máxima"}),n.jsx(we,{type:"number",value:x.max_attendees,onChange:M=>w({...x,max_attendees:M.target.value}),placeholder:"Deixe em branco para ilimitado"})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[n.jsx("h3",{className:"font-medium",children:"Informações de Pagamento"}),n.jsxs("div",{children:[n.jsx(de,{children:"Tipo de Evento"}),n.jsxs(Ui,{value:E?"paid":"free",onValueChange:M=>{_(M==="paid"),M==="free"&&w({...x,ticket_price:"",ticket_link:""})},className:"flex gap-4 mt-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(on,{value:"free",id:"free"}),n.jsx(de,{htmlFor:"free",className:"cursor-pointer font-normal",children:"💚 Gratuito"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(on,{value:"paid",id:"paid"}),n.jsx(de,{htmlFor:"paid",className:"cursor-pointer font-normal",children:"💰 Pago"})]})]})]}),E&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(de,{children:"Preço do Ingresso (R$)"}),n.jsx(we,{type:"number",step:"0.01",min:"0",value:x.ticket_price,onChange:M=>w({...x,ticket_price:M.target.value}),placeholder:"Ex: 50.00"})]}),n.jsxs("div",{children:[n.jsx(de,{children:"Link de Pagamento/Ingresso"}),n.jsx(we,{type:"url",value:x.ticket_link,onChange:M=>w({...x,ticket_link:M.target.value}),placeholder:"https://sympla.com.br/..."}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Link externo para compra de ingressos (Sympla, Eventbrite, etc)"})]})]})]}),n.jsxs(K,{type:"submit",className:"w-full",disabled:c,children:[c&&n.jsx(us,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvar Alterações"]})]})})]})]})}function Qq(){const{eventId:e}=fl(),t=_t(),{isAdmin:r,loading:s}=zs(),[a,o]=v.useState([]),[c,u]=v.useState(""),[f,p]=v.useState(!0);v.useEffect(()=>{!s&&!r&&t("/")},[r,s,t]),v.useEffect(()=>{r&&e&&x()},[r,e]);const x=async()=>{try{const{data:b,error:j}=await $.from("platform_events").select("title").eq("id",e).single();if(j)throw j;u(b.title);const{data:N,error:C}=await $.from("event_registrations").select("*").eq("event_id",e).order("created_at",{ascending:!1});if(C)throw C;o(N||[])}catch(b){console.error("Error fetching data:",b),G.error("Erro ao carregar dados")}finally{p(!1)}};if(s||!r)return null;const w=a.filter(b=>b.attendance_confirmed).length;return n.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx(K,{variant:"ghost",onClick:()=>t("/admin/platform-events"),children:"← Voltar"}),n.jsx("h1",{className:"text-3xl font-bold mt-2",children:c}),n.jsxs("p",{className:"text-muted-foreground",children:[a.length," cadastros | ",w," presenças confirmadas"]})]}),f?n.jsx("div",{className:"space-y-4",children:[1,2,3].map(b=>n.jsx(St,{className:"h-32"},b))}):a.length===0?n.jsx(Ne,{children:n.jsx(Ce,{className:"py-12 text-center",children:n.jsx("p",{className:"text-muted-foreground",children:"Nenhum cadastro encontrado"})})}):n.jsx("div",{className:"space-y-4",children:a.map(b=>n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs(He,{className:"text-lg flex items-center gap-2",children:[n.jsx(ms,{className:"h-5 w-5"}),b.user_name]}),b.attendance_confirmed&&n.jsxs("span",{className:"flex items-center gap-1 px-3 py-1 rounded-full bg-green-500/20 text-green-500 text-sm",children:[n.jsx(Zr,{className:"h-4 w-4"}),"Presença Confirmada"]})]})}),n.jsxs(Ce,{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Pu,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("a",{href:`mailto:${b.user_email}`,className:"hover:underline",children:b.user_email})]}),b.user_phone&&n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Uc,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("a",{href:`tel:${b.user_phone}`,className:"hover:underline",children:b.user_phone})]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Cadastrado em: ",dn(new Date(b.created_at),"d 'de' MMMM 'de' yyyy 'às' HH:mm",{locale:Ir})]}),b.registration_data&&n.jsxs("div",{className:"mt-4 p-3 bg-muted rounded-lg",children:[n.jsx("p",{className:"text-sm font-medium mb-2",children:"Dados adicionais:"}),n.jsx("pre",{className:"text-xs overflow-auto",children:JSON.stringify(b.registration_data,null,2)})]})]})]},b.id))})]})}function Zq(){var T;const e=_t(),{isAdmin:t}=zs(),[r,s]=v.useState({}),[a,o]=v.useState(null),[c,u]=v.useState(""),[f,p]=v.useState(!0),[x,w]=v.useState(!1);v.useEffect(()=>{if(!t){e("/");return}b();const S=$.channel("support-messages").on("postgres_changes",{event:"*",schema:"public",table:"support_messages"},()=>{b()}).subscribe();return()=>{$.removeChannel(S)}},[t,e]);const b=async()=>{try{const{data:S,error:E}=await $.from("support_messages").select("*").order("created_at",{ascending:!0});if(E)throw E;const _=[...new Set((S==null?void 0:S.map(M=>M.user_id))||[])],{data:k,error:D}=await $.from("profiles").select("user_id, display_name, avatar_url").in("user_id",_);if(D)throw D;const L=new Map((k==null?void 0:k.map(M=>[M.user_id,M]))||[]),R={};S==null||S.forEach(M=>{const P=L.get(M.user_id);R[M.user_id]||(R[M.user_id]={user:{display_name:(P==null?void 0:P.display_name)||"Usuário",avatar_url:(P==null?void 0:P.avatar_url)||""},messages:[]}),R[M.user_id].messages.push({...M,profiles:{display_name:(P==null?void 0:P.display_name)||"Usuário",avatar_url:(P==null?void 0:P.avatar_url)||""}})}),s(R)}catch(S){console.error("Error fetching messages:",S),G.error("Erro ao carregar mensagens")}finally{p(!1)}},j=async()=>{if(!(!a||!c.trim())){w(!0);try{const{error:S}=await $.from("support_messages").insert({user_id:a,message:c,is_admin_reply:!0});if(S)throw S;u(""),G.success("Resposta enviada!"),b()}catch(S){console.error("Error sending reply:",S),G.error("Erro ao enviar: "+S.message)}finally{w(!1)}}},N=async S=>{try{await $.from("support_messages").update({read:!0}).eq("user_id",S).eq("is_admin_reply",!1)}catch(E){console.error("Error marking as read:",E)}};if(!t)return null;const C=a?((T=r[a])==null?void 0:T.messages)||[]:[];return n.jsxs("div",{className:"container mx-auto p-6 max-w-6xl",children:[n.jsxs(K,{variant:"ghost",onClick:()=>e("/admin"),className:"mb-4",children:[n.jsx(gt,{className:"mr-2 h-4 w-4"}),"Voltar"]}),n.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Chat de Suporte"}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[n.jsx(Ne,{className:"md:col-span-1",children:n.jsxs(Ce,{className:"p-4 space-y-2",children:[n.jsx("h2",{className:"font-semibold mb-4",children:"Conversas"}),f?n.jsx("div",{children:"Carregando..."}):Object.keys(r).length===0?n.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhuma mensagem"}):Object.entries(r).map(([S,E])=>{const _=E.messages.filter(k=>!k.is_admin_reply&&!k.read).length;return n.jsx("div",{onClick:()=>{o(S),N(S)},className:`p-3 rounded cursor-pointer hover:bg-accent ${a===S?"bg-accent":""}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[E.user.avatar_url&&n.jsx("img",{src:E.user.avatar_url,alt:"",className:"w-8 h-8 rounded-full"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-sm",children:E.user.display_name}),_>0&&n.jsxs("span",{className:"text-xs text-primary",children:[_," nova(s)"]})]})]})},S)})]})}),n.jsx(Ne,{className:"md:col-span-2",children:n.jsx(Ce,{className:"p-4",children:a?n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"h-[400px] overflow-y-auto space-y-3 mb-4",children:C.map(S=>n.jsx("div",{className:`flex ${S.is_admin_reply?"justify-end":"justify-start"}`,children:n.jsxs("div",{className:`max-w-[70%] p-3 rounded-lg ${S.is_admin_reply?"bg-primary text-primary-foreground":"bg-muted"}`,children:[n.jsx("p",{className:"text-sm",children:S.message}),n.jsx("p",{className:"text-xs opacity-70 mt-1",children:dn(new Date(S.created_at),"HH:mm",{locale:Ir})})]})},S.id))}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(kn,{value:c,onChange:S=>u(S.target.value),placeholder:"Digite sua resposta...",rows:3}),n.jsx(K,{onClick:j,disabled:x||!c.trim(),children:n.jsx(k1,{className:"h-4 w-4"})})]})]}):n.jsx("div",{className:"h-[400px] flex items-center justify-center text-muted-foreground",children:"Selecione uma conversa"})})})]})]})}function Jq(){const e=_t(),{isAdmin:t,loading:r}=zs(),[s,a]=v.useState(""),[o,c]=v.useState(""),[u,f]=v.useState(!1),[p,x]=v.useState(null),[w,b]=v.useState(null);if(r)return null;if(!t)return e("/"),null;const j=T=>{var E;const S=(E=T.target.files)==null?void 0:E[0];if(S){x(S);const _=new FileReader;_.onloadend=()=>{b(_.result)},_.readAsDataURL(S)}},N=async()=>{if(!p){G.error("Por favor, selecione uma imagem");return}f(!0);try{const T=new FileReader;T.onloadend=async()=>{const S=T.result,{data:E,error:_}=await $.functions.invoke("extract-event-from-image",{body:{image:S}});if(_)throw _;if(E!=null&&E.success){const k=E.message||"Evento extraído da imagem com sucesso!";G.success(k+" Verifique e complete os campos necessários na revisão."),e("/admin/pending-events")}else throw new Error((E==null?void 0:E.error)||"Erro ao extrair evento da imagem")},T.readAsDataURL(p)}catch(T){console.error("Error extracting from image:",T);const S=T instanceof Error?T.message:"Erro ao processar imagem";G.error(S)}finally{f(!1)}},C=async()=>{if(!s.trim()){G.error("Por favor, insira um endpoint de API");return}f(!0);try{const{data:T,error:S}=await $.functions.invoke("extract-events",{body:{apiEndpoint:s.trim(),apiKey:o.trim()||void 0}});if(S)throw S;if(T!=null&&T.success)G.success(T.message||"Eventos extraídos com sucesso!"),e("/admin/pending-events");else throw new Error((T==null?void 0:T.error)||"Erro ao extrair eventos")}catch(T){console.error("Error extracting events:",T),G.error(T instanceof Error?T.message:"Erro ao processar dados")}finally{f(!1)}};return n.jsxs("div",{className:"container mx-auto p-6 space-y-6 max-w-2xl",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>e("/admin"),children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Gerar Eventos Automaticamente"}),n.jsx("p",{className:"text-muted-foreground",children:"Use IA para extrair eventos de APIs externas"})]})]}),n.jsxs(Ne,{children:[n.jsxs(qe,{children:[n.jsxs(He,{className:"flex items-center gap-2",children:[n.jsx(Hi,{className:"h-5 w-5"}),"Extrair de Imagem"]}),n.jsx(Jr,{children:'Faça upload de uma imagem de evento (flyer, cartaz, banner promocional) e nossa IA irá extrair todas as informações disponíveis automaticamente. Não precisa ter todos os dados - você pode completar manualmente os campos que faltarem. O evento será salvo como "pendente" para revisão e edição antes da publicação.'})]}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"image",children:"Upload de Imagem *"}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx(we,{id:"image",type:"file",accept:"image/*",onChange:j,disabled:u,className:"cursor-pointer"}),w&&n.jsx("div",{className:"relative w-full aspect-video rounded-lg overflow-hidden border",children:n.jsx("img",{src:w,alt:"Preview",className:"w-full h-full object-contain bg-muted"})})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Formatos aceitos: JPG, PNG, WEBP"})]}),n.jsx("div",{className:"pt-4",children:n.jsx(K,{onClick:N,disabled:u||!p,className:"w-full",size:"lg",children:u?n.jsxs(n.Fragment,{children:[n.jsx(us,{className:"mr-2 h-4 w-4 animate-spin"}),"Analisando imagem..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Fs,{className:"mr-2 h-4 w-4"}),"Extrair Evento da Imagem"]})})}),n.jsxs("div",{className:"pt-4 border-t space-y-2",children:[n.jsx("h3",{className:"font-semibold text-sm",children:"Como funciona:"}),n.jsxs("ol",{className:"text-sm text-muted-foreground space-y-1 list-decimal list-inside",children:[n.jsx("li",{children:"A IA analisa a imagem e identifica informações do evento"}),n.jsx("li",{children:"Extrai título, data, local, preço e outras informações disponíveis"}),n.jsx("li",{children:'Cria o evento como "pendente" mesmo com dados incompletos'}),n.jsx("li",{children:"Você completa os campos faltantes e aprova antes de publicar"})]})]})]})]}),n.jsxs(Ne,{children:[n.jsxs(qe,{children:[n.jsxs(He,{className:"flex items-center gap-2",children:[n.jsx(ou,{className:"h-5 w-5"}),"Extração de API Externa"]}),n.jsx(Jr,{children:'Forneça um endpoint de API que retorne dados de eventos. Nossa IA irá analisar os dados e extrair automaticamente as informações dos eventos. Os eventos serão salvos como "pendentes" para sua aprovação.'})]}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"endpoint",children:"Endpoint da API *"}),n.jsx(we,{id:"endpoint",type:"url",placeholder:"https://api.exemplo.com/eventos",value:s,onChange:T=>a(T.target.value),disabled:u}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"URL completa do endpoint que retorna dados de eventos (JSON ou HTML)"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"apiKey",children:"Chave API (opcional)"}),n.jsx(we,{id:"apiKey",type:"password",placeholder:"Bearer token ou API key",value:o,onChange:T=>c(T.target.value),disabled:u}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Se a API requer autenticação, insira a chave aqui"})]}),n.jsx("div",{className:"pt-4",children:n.jsx(K,{onClick:C,disabled:u||!s.trim(),className:"w-full",size:"lg",children:u?n.jsxs(n.Fragment,{children:[n.jsx(us,{className:"mr-2 h-4 w-4 animate-spin"}),"Processando..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ou,{className:"mr-2 h-4 w-4"}),"Extrair Eventos com IA"]})})}),n.jsxs("div",{className:"pt-4 border-t space-y-2",children:[n.jsx("h3",{className:"font-semibold text-sm",children:"Como funciona:"}),n.jsxs("ol",{className:"text-sm text-muted-foreground space-y-1 list-decimal list-inside",children:[n.jsx("li",{children:"A IA busca dados do endpoint fornecido"}),n.jsx("li",{children:"Analisa e extrai informações de eventos automaticamente"}),n.jsx("li",{children:'Cria eventos como "pendentes" para revisão'}),n.jsx("li",{children:"Você revisa e aprova os eventos antes de publicá-los"})]})]})]})]})]})}function eW(){const e=_t(),{isAdmin:t,loading:r}=zs(),[s,a]=v.useState([]),[o,c]=v.useState(!0);v.useEffect(()=>{!r&&!t&&e("/")},[t,r,e]),v.useEffect(()=>{t&&u()},[t]);const u=async()=>{try{const{data:x,error:w}=await $.from("platform_events").select("*").eq("auto_generated",!0).eq("approval_status","pending").order("created_at",{ascending:!1});if(w)throw w;a(x||[])}catch(x){console.error("Error fetching pending events:",x),G.error("Erro ao carregar eventos pendentes")}finally{c(!1)}},f=async x=>{try{const{error:w}=await $.from("platform_events").update({approval_status:"approved"}).eq("id",x);if(w)throw w;G.success("Evento aprovado com sucesso!"),u()}catch(w){console.error("Error approving event:",w),G.error("Erro ao aprovar evento")}},p=async x=>{try{const{error:w}=await $.from("platform_events").delete().eq("id",x);if(w)throw w;G.success("Evento rejeitado"),u()}catch(w){console.error("Error rejecting event:",w),G.error("Erro ao rejeitar evento")}};return r||!t?null:n.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>e("/admin"),children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Eventos Pendentes de Aprovação"}),n.jsx("p",{className:"text-muted-foreground",children:"Eventos gerados automaticamente aguardando revisão"})]})]}),o?n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:[1,2,3,4].map(x=>n.jsx(St,{className:"h-80"},x))}):s.length===0?n.jsx(Ne,{children:n.jsxs(Ce,{className:"py-12 text-center space-y-4",children:[n.jsx("p",{className:"text-muted-foreground",children:"Nenhum evento pendente de aprovação"}),n.jsx(K,{onClick:()=>e("/admin/auto-generate-events"),children:"Gerar Novos Eventos"})]})}):n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:s.map(x=>n.jsxs(Ne,{className:"overflow-hidden",children:[x.image_url&&x.image_url.trim()!==""&&n.jsx("div",{className:"h-48 overflow-hidden",children:n.jsx("img",{src:x.image_url,alt:x.title,className:"w-full h-full object-cover"})}),n.jsxs(qe,{children:[n.jsx(He,{className:"text-xl",children:x.title}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Por: ",x.organizer_name]})]}),n.jsxs(Ce,{className:"space-y-4",children:[x.description&&n.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:x.description}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{children:dn(new Date(x.event_date),"d 'de' MMMM 'às' HH:mm",{locale:Ir})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Rt,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{children:x.location})]}),x.category&&n.jsx("div",{className:"inline-block px-2 py-1 bg-primary/10 rounded-full text-xs",children:x.category})]}),n.jsxs("div",{className:"flex gap-2 pt-2",children:[n.jsxs(K,{onClick:()=>e(`/admin/pending-event/${x.id}/edit`),variant:"outline",className:"flex-1",children:[n.jsx(ss,{className:"h-4 w-4 mr-1"}),"Editar"]}),n.jsxs(K,{onClick:()=>f(x.id),className:"flex-1",children:[n.jsx(Yn,{className:"h-4 w-4 mr-1"}),"Aprovar"]}),n.jsxs(K,{onClick:()=>p(x.id),variant:"destructive",children:[n.jsx(sr,{className:"h-4 w-4 mr-1"}),"Rejeitar"]})]})]})]},x.id))})]})}function tW(){const e=_t(),{eventId:t}=fl(),{isAdmin:r,loading:s}=zs(),[a,o]=v.useState(!0),[c,u]=v.useState(!1),[f,p]=v.useState(!1),[x,w]=v.useState(null),[b,j]=v.useState(null),[N,C]=v.useState({title:"",description:"",organizer_name:"",event_date:"",end_date:"",location:"",location_link:"",ticket_price:0,ticket_link:"",max_attendees:null}),[T,S]=v.useState([]);v.useEffect(()=>{!s&&!r&&e("/")},[r,s,e]),v.useEffect(()=>{r&&t&&E()},[r,t]);const E=async()=>{try{const{data:R,error:M}=await $.from("platform_events").select("*").eq("id",t).eq("approval_status","pending").single();if(M)throw M;R&&(C({title:R.title||"",description:R.description||"",organizer_name:R.organizer_name||"",event_date:R.event_date||"",end_date:R.end_date||"",location:R.location||"",location_link:R.location_link||"",ticket_price:R.ticket_price||0,ticket_link:R.ticket_link||"",max_attendees:R.max_attendees}),S(R.category||[]),R.image_url&&w(R.image_url))}catch(R){console.error("Error fetching event:",R),G.error("Erro ao carregar evento"),e("/admin/pending-events")}finally{o(!1)}},_=R=>{var P;const M=(P=R.target.files)==null?void 0:P[0];if(M){j(M);const F=new FileReader;F.onloadend=()=>{w(F.result)},F.readAsDataURL(M)}},k=async()=>{if(!N.title||!N.organizer_name||!N.event_date||!N.location){G.error("Preencha todos os campos obrigatórios");return}u(!0);try{let R=x;if(b){const P=b.name.split(".").pop(),Y=`${`${Math.random().toString(36).substring(2)}.${P}`}`,{error:U}=await $.storage.from("user-uploads").upload(Y,b);if(U)throw U;const{data:{publicUrl:q}}=$.storage.from("user-uploads").getPublicUrl(Y);R=q}const{error:M}=await $.from("platform_events").update({title:N.title,description:N.description||null,organizer_name:N.organizer_name,event_date:N.event_date,end_date:N.end_date||N.event_date,location:N.location,location_link:N.location_link||null,image_url:R||null,category:T.length>0?T:null,ticket_price:N.ticket_price||0,ticket_link:N.ticket_link||null,max_attendees:N.max_attendees}).eq("id",t);if(M)throw M;G.success("Evento salvo com sucesso!")}catch(R){console.error("Error saving event:",R),G.error("Erro ao salvar evento")}finally{u(!1)}},D=async()=>{await k();try{const{error:R}=await $.from("platform_events").update({approval_status:"approved"}).eq("id",t);if(R)throw R;G.success("Evento aprovado e publicado!"),e("/admin/pending-events")}catch(R){console.error("Error approving event:",R),G.error("Erro ao publicar evento")}},L=async()=>{if(!N.title||!N.organizer_name||!N.event_date||!N.location){G.error("Preencha os campos obrigatórios antes de gerar a descrição");return}p(!0);try{const{data:R,error:M}=await $.functions.invoke("generate-event-description",{body:{title:N.title,organizerName:N.organizer_name,eventDate:N.event_date,location:N.location,category:T,ticketPrice:N.ticket_price}});if(M)throw M;if(R!=null&&R.description)C({...N,description:R.description}),G.success("Descrição gerada com sucesso!");else throw new Error("Nenhuma descrição foi gerada")}catch(R){console.error("Error generating description:",R),G.error("Erro ao gerar descrição. Tente novamente.")}finally{p(!1)}};return s||a||!r?null:n.jsxs("div",{className:"container mx-auto p-6 space-y-6 max-w-3xl",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>e("/admin/pending-events"),children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Editar Evento Pendente"}),n.jsx("p",{className:"text-muted-foreground",children:"Revise e ajuste os dados antes de publicar"})]})]}),n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsx(He,{children:"Informações do Evento"})}),n.jsxs(Ce,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{children:"Banner do Evento"}),x?n.jsxs("div",{className:"relative h-48 rounded-lg overflow-hidden",children:[n.jsx("img",{src:x,alt:"Preview do evento",className:"w-full h-full object-cover"}),n.jsx(K,{type:"button",variant:"secondary",size:"sm",className:"absolute top-2 right-2",onClick:()=>{w(null),j(null)},children:"Remover"})]}):n.jsxs("label",{className:"flex flex-col items-center justify-center h-48 border-2 border-dashed border-border rounded-lg cursor-pointer hover:border-primary/50 transition-colors",children:[n.jsx(Fs,{className:"h-8 w-8 text-muted-foreground mb-2"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"Clique para adicionar uma imagem"}),n.jsx("input",{type:"file",accept:"image/*",onChange:_,className:"hidden"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"title",children:"Título *"}),n.jsx(we,{id:"title",value:N.title,onChange:R=>C({...N,title:R.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx(de,{htmlFor:"description",children:"Descrição"}),n.jsxs(K,{type:"button",variant:"outline",size:"sm",onClick:L,disabled:f||!N.title,children:[n.jsx(ou,{className:"h-4 w-4 mr-2"}),f?"Gerando...":"Gerar com IA"]})]}),n.jsx(kn,{id:"description",value:N.description,onChange:R=>C({...N,description:R.target.value}),rows:4,placeholder:"Clique em 'Gerar com IA' para criar uma descrição automática ou escreva manualmente"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"organizer_name",children:"Nome do Organizador *"}),n.jsx(we,{id:"organizer_name",value:N.organizer_name,onChange:R=>C({...N,organizer_name:R.target.value})})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"event_date",children:"Data de Início *"}),n.jsx(we,{id:"event_date",type:"datetime-local",value:N.event_date,onChange:R=>C({...N,event_date:R.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"end_date",children:"Data de Término"}),n.jsx(we,{id:"end_date",type:"datetime-local",value:N.end_date,onChange:R=>C({...N,end_date:R.target.value})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"location",children:"Local *"}),n.jsx(we,{id:"location",value:N.location,onChange:R=>C({...N,location:R.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"location_link",children:"Link do Local (Google Maps)"}),n.jsx(we,{id:"location_link",type:"url",value:N.location_link,onChange:R=>C({...N,location_link:R.target.value})})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"category",children:"Categorias"}),n.jsx(op,{value:T,onChange:S,placeholder:"Selecione uma ou mais categorias"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"max_attendees",children:"Capacidade Máxima"}),n.jsx(we,{id:"max_attendees",type:"number",value:N.max_attendees||"",onChange:R=>C({...N,max_attendees:R.target.value?parseInt(R.target.value):null})})]})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"ticket_price",children:"Preço do Ingresso (R$)"}),n.jsx(we,{id:"ticket_price",type:"number",step:"0.01",value:N.ticket_price,onChange:R=>C({...N,ticket_price:parseFloat(R.target.value)||0})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(de,{htmlFor:"ticket_link",children:"Link de Compra"}),n.jsx(we,{id:"ticket_link",type:"url",value:N.ticket_link,onChange:R=>C({...N,ticket_link:R.target.value})})]})]}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsxs(K,{onClick:k,disabled:c,variant:"outline",className:"flex-1",children:[n.jsx(V8,{className:"h-4 w-4 mr-2"}),"Salvar Alterações"]}),n.jsxs(K,{onClick:D,disabled:c,className:"flex-1",children:[n.jsx(Yn,{className:"h-4 w-4 mr-2"}),"Salvar e Publicar"]})]})]})]})]})}function rW(){const{user:e}=bt(),t=_t(),{notifications:r,loading:s,markAsRead:a,markAllAsRead:o,deleteNotification:c}=yE(),{acceptFriendRequest:u,declineFriendRequest:f,loading:p}=bE(),[x,w]=v.useState({});v.useEffect(()=>{const _=async()=>{const k=r.filter(D=>D.type==="friend_request");if(k.length!==0)for(const D of k){const{data:L}=await $.from("friendships").select("user_id").eq("friend_id",e==null?void 0:e.id).eq("status","pending").order("created_at",{ascending:!1}).limit(1).maybeSingle();if(L){const{data:R}=await $.from("profiles").select("user_id, display_name, avatar_url, interest, relationship_status").eq("user_id",L.user_id).single();R&&w(M=>({...M,[D.id]:{...R,friendshipUserId:L.user_id}}))}}};e&&r.length>0&&_()},[r,e]);const b=_=>{switch(_){case"event_created":return Et;case"event_updated":return qn;case"event_cancelled":return sr;case"friend_request":return ym;default:return Ha}},j=_=>{try{return xu(new Date(_),{addSuffix:!0,locale:Ir})}catch{return"recentemente"}},N=async _=>{if(_.type==="friend_request"){await a(_.id);return}await a(_.id),_.type==="user_message"||_.type==="user_like"?t("/find-friends"):_.event_id&&t(`/e/${_.event_id}`)},C=async(_,k)=>{await u("",k)&&c(_)},T=async(_,k)=>{await f("",k)&&c(_)},S=_=>({solteiro:"Solteiro(a)",relacionamento:"Em relacionamento",casado:"Casado(a)",preferencia_nao_informar:"Prefiro não informar"})[_]||_,E=_=>({curtição:"Curtição",namoro:"Namoro",amizade:"Amizade"})[_]||_;return e?n.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[n.jsx("div",{className:"sticky top-0 z-10 bg-background border-b border-border",children:n.jsx("div",{className:"max-w-2xl mx-auto px-4 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>t(-1),children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Notificações"})]}),r.some(_=>!_.read)&&n.jsx(K,{variant:"ghost",size:"sm",onClick:o,children:"Marcar todas como lidas"})]})})}),n.jsx("div",{className:"max-w-2xl mx-auto",children:s?n.jsxs("div",{className:"p-12 text-center text-muted-foreground",children:[n.jsx(Ha,{className:"h-12 w-12 mx-auto mb-4 opacity-50 animate-pulse"}),n.jsx("p",{className:"text-lg",children:"Carregando..."})]}):r.length===0?n.jsxs("div",{className:"p-12 text-center text-muted-foreground",children:[n.jsx(Ha,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{className:"text-lg font-medium mb-2",children:"Nenhuma notificação"}),n.jsx("p",{className:"text-sm",children:"Você está em dia!"})]}):n.jsx("div",{className:"divide-y divide-border",children:r.map(_=>{var R,M;const k=b(_.type),D=_.type==="friend_request",L=D?x[_.id]:null;return n.jsx("div",{className:`p-4 ${D?"":"hover:bg-surface cursor-pointer"} transition-colors group ${_.read?"":"bg-primary/5 border-l-4 border-l-primary"}`,onClick:()=>N(_),children:D&&L?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsxs(Ut,{className:"h-14 w-14",children:[n.jsx(Kt,{src:L.avatar_url}),n.jsx($t,{children:(M=(R=L.display_name)==null?void 0:R[0])==null?void 0:M.toUpperCase()})]}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-base font-semibold text-foreground",children:L.display_name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:E(L.interest)}),n.jsx("p",{className:"text-sm text-muted-foreground",children:S(L.relationship_status)}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:j(_.created_at)})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[!_.read&&n.jsx(ct,{variant:"destructive",className:"h-2 w-2 p-0 rounded-full"}),n.jsx(K,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-destructive/10",onClick:P=>{P.stopPropagation(),c(_.id)},children:n.jsx(sr,{className:"h-4 w-4"})})]})]})})]}),n.jsxs("div",{className:"flex gap-3 ml-[72px]",children:[n.jsxs(K,{size:"default",className:"flex-1",onClick:()=>C(_.id,L.friendshipUserId),disabled:p,children:[n.jsx(Yn,{className:"h-4 w-4 mr-2"}),"Aceitar"]}),n.jsxs(K,{size:"default",variant:"outline",className:"flex-1",onClick:()=>T(_.id,L.friendshipUserId),disabled:p,children:[n.jsx(sr,{className:"h-4 w-4 mr-2"}),"Recusar"]})]})]}):n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:`p-2 rounded-full ${_.read?"bg-surface":"bg-primary/20"}`,children:n.jsx(k,{className:"h-5 w-5 text-primary"})}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-base font-medium text-foreground mb-1",children:_.title}),n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:_.message}),n.jsx("p",{className:"text-xs text-muted-foreground",children:j(_.created_at)})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[!_.read&&n.jsx(ct,{variant:"destructive",className:"h-2 w-2 p-0 rounded-full"}),n.jsx(K,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 group-hover:opacity-100 hover:bg-destructive/10",onClick:P=>{P.stopPropagation(),c(_.id)},children:n.jsx(sr,{className:"h-4 w-4"})})]})]})})]})},_.id)})})})]}):(t("/auth"),null)}var dp={},pk={exports:{}},nW="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",sW=nW,aW=sW;function gk(){}function xk(){}xk.resetWarningCache=gk;var iW=function(){function e(s,a,o,c,u,f){if(f!==aW){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:xk,resetWarningCache:gk};return r.PropTypes=r,r};pk.exports=iW();var vk=pk.exports,wk={L:1,M:0,Q:3,H:2},yk={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},oW=yk;function bk(e){this.mode=oW.MODE_8BIT_BYTE,this.data=e}bk.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}};var lW=bk,Lh=wk;function Ca(e,t){this.totalCount=e,this.dataCount=t}Ca.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];Ca.getRSBlocks=function(e,t){var r=Ca.getRsBlockTable(e,t);if(r==null)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var s=r.length/3,a=new Array,o=0;o<s;o++)for(var c=r[o*3+0],u=r[o*3+1],f=r[o*3+2],p=0;p<c;p++)a.push(new Ca(u,f));return a};Ca.getRsBlockTable=function(e,t){switch(t){case Lh.L:return Ca.RS_BLOCK_TABLE[(e-1)*4+0];case Lh.M:return Ca.RS_BLOCK_TABLE[(e-1)*4+1];case Lh.Q:return Ca.RS_BLOCK_TABLE[(e-1)*4+2];case Lh.H:return Ca.RS_BLOCK_TABLE[(e-1)*4+3];default:return}};var cW=Ca;function _k(){this.buffer=new Array,this.length=0}_k.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var r=0;r<t;r++)this.putBit((e>>>t-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var dW=_k,ra={glog:function(e){if(e<1)throw new Error("glog("+e+")");return ra.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return ra.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var ln=0;ln<8;ln++)ra.EXP_TABLE[ln]=1<<ln;for(var ln=8;ln<256;ln++)ra.EXP_TABLE[ln]=ra.EXP_TABLE[ln-4]^ra.EXP_TABLE[ln-5]^ra.EXP_TABLE[ln-6]^ra.EXP_TABLE[ln-8];for(var ln=0;ln<255;ln++)ra.LOG_TABLE[ra.EXP_TABLE[ln]]=ln;var Nk=ra,yo=Nk;function cf(e,t){if(e.length==null)throw new Error(e.length+"/"+t);for(var r=0;r<e.length&&e[r]==0;)r++;this.num=new Array(e.length-r+t);for(var s=0;s<e.length-r;s++)this.num[s]=e[s+r]}cf.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),r=0;r<this.getLength();r++)for(var s=0;s<e.getLength();s++)t[r+s]^=yo.gexp(yo.glog(this.get(r))+yo.glog(e.get(s)));return new cf(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=yo.glog(this.get(0))-yo.glog(e.get(0)),r=new Array(this.getLength()),s=0;s<this.getLength();s++)r[s]=this.get(s);for(var s=0;s<e.getLength();s++)r[s]^=yo.gexp(yo.glog(e.get(s))+t);return new cf(r,0).mod(e)}};var jk=cf,Ns=yk,j2=jk,uW=Nk,pi={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},sn={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;sn.getBCHDigit(t)-sn.getBCHDigit(sn.G15)>=0;)t^=sn.G15<<sn.getBCHDigit(t)-sn.getBCHDigit(sn.G15);return(e<<10|t)^sn.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;sn.getBCHDigit(t)-sn.getBCHDigit(sn.G18)>=0;)t^=sn.G18<<sn.getBCHDigit(t)-sn.getBCHDigit(sn.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;e!=0;)t++,e>>>=1;return t},getPatternPosition:function(e){return sn.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,r){switch(e){case pi.PATTERN000:return(t+r)%2==0;case pi.PATTERN001:return t%2==0;case pi.PATTERN010:return r%3==0;case pi.PATTERN011:return(t+r)%3==0;case pi.PATTERN100:return(Math.floor(t/2)+Math.floor(r/3))%2==0;case pi.PATTERN101:return t*r%2+t*r%3==0;case pi.PATTERN110:return(t*r%2+t*r%3)%2==0;case pi.PATTERN111:return(t*r%3+(t+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new j2([1],0),r=0;r<e;r++)t=t.multiply(new j2([1,uW.gexp(r)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case Ns.MODE_NUMBER:return 10;case Ns.MODE_ALPHA_NUM:return 9;case Ns.MODE_8BIT_BYTE:return 8;case Ns.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case Ns.MODE_NUMBER:return 12;case Ns.MODE_ALPHA_NUM:return 11;case Ns.MODE_8BIT_BYTE:return 16;case Ns.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else if(t<41)switch(e){case Ns.MODE_NUMBER:return 14;case Ns.MODE_ALPHA_NUM:return 13;case Ns.MODE_8BIT_BYTE:return 16;case Ns.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}else throw new Error("type:"+t)},getLostPoint:function(e){for(var t=e.getModuleCount(),r=0,s=0;s<t;s++)for(var a=0;a<t;a++){for(var o=0,c=e.isDark(s,a),u=-1;u<=1;u++)if(!(s+u<0||t<=s+u))for(var f=-1;f<=1;f++)a+f<0||t<=a+f||u==0&&f==0||c==e.isDark(s+u,a+f)&&o++;o>5&&(r+=3+o-5)}for(var s=0;s<t-1;s++)for(var a=0;a<t-1;a++){var p=0;e.isDark(s,a)&&p++,e.isDark(s+1,a)&&p++,e.isDark(s,a+1)&&p++,e.isDark(s+1,a+1)&&p++,(p==0||p==4)&&(r+=3)}for(var s=0;s<t;s++)for(var a=0;a<t-6;a++)e.isDark(s,a)&&!e.isDark(s,a+1)&&e.isDark(s,a+2)&&e.isDark(s,a+3)&&e.isDark(s,a+4)&&!e.isDark(s,a+5)&&e.isDark(s,a+6)&&(r+=40);for(var a=0;a<t;a++)for(var s=0;s<t-6;s++)e.isDark(s,a)&&!e.isDark(s+1,a)&&e.isDark(s+2,a)&&e.isDark(s+3,a)&&e.isDark(s+4,a)&&!e.isDark(s+5,a)&&e.isDark(s+6,a)&&(r+=40);for(var x=0,a=0;a<t;a++)for(var s=0;s<t;s++)e.isDark(s,a)&&x++;var w=Math.abs(100*x/t/t-50)/5;return r+=w*10,r}},hW=sn,fW=lW,Ck=cW,Ek=dW,uo=hW,mW=jk;function Sa(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var xs=Sa.prototype;xs.addData=function(e){var t=new fW(e);this.dataList.push(t),this.dataCache=null};xs.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]};xs.getModuleCount=function(){return this.moduleCount};xs.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=Ck.getRSBlocks(e,this.errorCorrectLevel),r=new Ek,s=0,a=0;a<t.length;a++)s+=t[a].dataCount;for(var a=0;a<this.dataList.length;a++){var o=this.dataList[a];r.put(o.mode,4),r.put(o.getLength(),uo.getLengthInBits(o.mode,e)),o.write(r)}if(r.getLengthInBits()<=s*8)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())};xs.makeImpl=function(e,t){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var s=0;s<this.moduleCount;s++)this.modules[r][s]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache==null&&(this.dataCache=Sa.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)};xs.setupPositionProbePattern=function(e,t){for(var r=-1;r<=7;r++)if(!(e+r<=-1||this.moduleCount<=e+r))for(var s=-1;s<=7;s++)t+s<=-1||this.moduleCount<=t+s||(0<=r&&r<=6&&(s==0||s==6)||0<=s&&s<=6&&(r==0||r==6)||2<=r&&r<=4&&2<=s&&s<=4?this.modules[e+r][t+s]=!0:this.modules[e+r][t+s]=!1)};xs.getBestMaskPattern=function(){for(var e=0,t=0,r=0;r<8;r++){this.makeImpl(!0,r);var s=uo.getLostPoint(this);(r==0||e>s)&&(e=s,t=r)}return t};xs.createMovieClip=function(e,t,r){var s=e.createEmptyMovieClip(t,r),a=1;this.make();for(var o=0;o<this.modules.length;o++)for(var c=o*a,u=0;u<this.modules[o].length;u++){var f=u*a,p=this.modules[o][u];p&&(s.beginFill(0,100),s.moveTo(f,c),s.lineTo(f+a,c),s.lineTo(f+a,c+a),s.lineTo(f,c+a),s.endFill())}return s};xs.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)this.modules[e][6]==null&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)};xs.setupPositionAdjustPattern=function(){for(var e=uo.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var r=0;r<e.length;r++){var s=e[t],a=e[r];if(this.modules[s][a]==null)for(var o=-2;o<=2;o++)for(var c=-2;c<=2;c++)o==-2||o==2||c==-2||c==2||o==0&&c==0?this.modules[s+o][a+c]=!0:this.modules[s+o][a+c]=!1}};xs.setupTypeNumber=function(e){for(var t=uo.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var s=!e&&(t>>r&1)==1;this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=s}for(var r=0;r<18;r++){var s=!e&&(t>>r&1)==1;this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=s}};xs.setupTypeInfo=function(e,t){for(var r=this.errorCorrectLevel<<3|t,s=uo.getBCHTypeInfo(r),a=0;a<15;a++){var o=!e&&(s>>a&1)==1;a<6?this.modules[a][8]=o:a<8?this.modules[a+1][8]=o:this.modules[this.moduleCount-15+a][8]=o}for(var a=0;a<15;a++){var o=!e&&(s>>a&1)==1;a<8?this.modules[8][this.moduleCount-a-1]=o:a<9?this.modules[8][15-a-1+1]=o:this.modules[8][15-a-1]=o}this.modules[this.moduleCount-8][8]=!e};xs.mapData=function(e,t){for(var r=-1,s=this.moduleCount-1,a=7,o=0,c=this.moduleCount-1;c>0;c-=2)for(c==6&&c--;;){for(var u=0;u<2;u++)if(this.modules[s][c-u]==null){var f=!1;o<e.length&&(f=(e[o]>>>a&1)==1);var p=uo.getMask(t,s,c-u);p&&(f=!f),this.modules[s][c-u]=f,a--,a==-1&&(o++,a=7)}if(s+=r,s<0||this.moduleCount<=s){s-=r,r=-r;break}}};Sa.PAD0=236;Sa.PAD1=17;Sa.createData=function(e,t,r){for(var s=Ck.getRSBlocks(e,t),a=new Ek,o=0;o<r.length;o++){var c=r[o];a.put(c.mode,4),a.put(c.getLength(),uo.getLengthInBits(c.mode,e)),c.write(a)}for(var u=0,o=0;o<s.length;o++)u+=s[o].dataCount;if(a.getLengthInBits()>u*8)throw new Error("code length overflow. ("+a.getLengthInBits()+">"+u*8+")");for(a.getLengthInBits()+4<=u*8&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(!1);for(;!(a.getLengthInBits()>=u*8||(a.put(Sa.PAD0,8),a.getLengthInBits()>=u*8));)a.put(Sa.PAD1,8);return Sa.createBytes(a,s)};Sa.createBytes=function(e,t){for(var r=0,s=0,a=0,o=new Array(t.length),c=new Array(t.length),u=0;u<t.length;u++){var f=t[u].dataCount,p=t[u].totalCount-f;s=Math.max(s,f),a=Math.max(a,p),o[u]=new Array(f);for(var x=0;x<o[u].length;x++)o[u][x]=255&e.buffer[x+r];r+=f;var w=uo.getErrorCorrectPolynomial(p),b=new mW(o[u],w.getLength()-1),j=b.mod(w);c[u]=new Array(w.getLength()-1);for(var x=0;x<c[u].length;x++){var N=x+j.getLength()-c[u].length;c[u][x]=N>=0?j.get(N):0}}for(var C=0,x=0;x<t.length;x++)C+=t[x].totalCount;for(var T=new Array(C),S=0,x=0;x<s;x++)for(var u=0;u<t.length;u++)x<o[u].length&&(T[S++]=o[u][x]);for(var x=0;x<a;x++)for(var u=0;u<t.length;u++)x<c[u].length&&(T[S++]=c[u][x]);return T};var pW=Sa,Fv={};Object.defineProperty(Fv,"__esModule",{value:!0});var gW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},xW=vk,js=Ak(xW),Sk=v,Fh=Ak(Sk);function Ak(e){return e&&e.__esModule?e:{default:e}}function vW(e,t){var r={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r}var wW={bgColor:js.default.oneOfType([js.default.object,js.default.string]).isRequired,bgD:js.default.string.isRequired,fgColor:js.default.oneOfType([js.default.object,js.default.string]).isRequired,fgD:js.default.string.isRequired,size:js.default.number.isRequired,title:js.default.string,viewBoxSize:js.default.number.isRequired,xmlns:js.default.string},Bv=(0,Sk.forwardRef)(function(e,t){var r=e.bgColor,s=e.bgD,a=e.fgD,o=e.fgColor,c=e.size,u=e.title,f=e.viewBoxSize,p=e.xmlns,x=p===void 0?"http://www.w3.org/2000/svg":p,w=vW(e,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return Fh.default.createElement("svg",gW({},w,{height:c,ref:t,viewBox:"0 0 "+f+" "+f,width:c,xmlns:x}),u?Fh.default.createElement("title",null,u):null,Fh.default.createElement("path",{d:s,fill:r}),Fh.default.createElement("path",{d:a,fill:o}))});Bv.displayName="QRCodeSvg";Bv.propTypes=wW;Fv.default=Bv;Object.defineProperty(dp,"__esModule",{value:!0});dp.QRCode=void 0;var yW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},bW=vk,La=Qu(bW),_W=wk,NW=Qu(_W),jW=pW,CW=Qu(jW),kk=v,EW=Qu(kk),SW=Fv,AW=Qu(SW);function Qu(e){return e&&e.__esModule?e:{default:e}}function kW(e,t){var r={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r}var TW={bgColor:La.default.oneOfType([La.default.object,La.default.string]),fgColor:La.default.oneOfType([La.default.object,La.default.string]),level:La.default.string,size:La.default.number,value:La.default.string.isRequired},up=(0,kk.forwardRef)(function(e,t){var r=e.bgColor,s=r===void 0?"#FFFFFF":r,a=e.fgColor,o=a===void 0?"#000000":a,c=e.level,u=c===void 0?"L":c,f=e.size,p=f===void 0?256:f,x=e.value,w=kW(e,["bgColor","fgColor","level","size","value"]),b=new CW.default(-1,NW.default[u]);b.addData(x),b.make();var j=b.modules;return EW.default.createElement(AW.default,yW({},w,{bgColor:s,bgD:j.map(function(N,C){return N.map(function(T,S){return T?"":"M "+S+" "+C+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:o,fgD:j.map(function(N,C){return N.map(function(T,S){return T?"M "+S+" "+C+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:t,size:p,viewBoxSize:j.length}))});dp.QRCode=up;up.displayName="QRCode";up.propTypes=TW;var Tk=dp.default=up;function IW(){const[e]=W1(),t=_t(),[r,s]=v.useState(!0),[a,o]=v.useState(null),c=e.get("session_id");if(v.useEffect(()=>{(async()=>{var p,x,w,b,j;if(!c){G.error("ID da sessão não encontrado"),t("/");return}try{let N=5,C=null;for(;N>0&&!C;){const{data:_,error:k}=await $.from("ticket_sales").select(`
              id,
              quantity,
              total_amount,
              buyer_name,
              payment_status,
              event_id,
              ticket_type_id
            `).eq("stripe_checkout_session_id",c).maybeSingle();if(_){C=_;break}if(k&&k.code!=="PGRST116")throw k;if(N>1){const D=(6-N)*400+600;await new Promise(L=>setTimeout(L,D))}N--}if(!C)throw new Error("Ingresso não encontrado");const[T,S]=await Promise.all([$.from("events").select("title, event_date, location, image_url").eq("id",C.event_id).single(),$.from("ticket_types").select("name, is_active").eq("id",C.ticket_type_id).maybeSingle()]),E={id:C.id,quantity:C.quantity,total_amount:C.total_amount,buyer_name:C.buyer_name,event:{title:((p=T.data)==null?void 0:p.title)??"Ingresso",event_date:((x=T.data)==null?void 0:x.event_date)??new Date().toISOString(),location:((w=T.data)==null?void 0:w.location)??"",image_url:((b=T.data)==null?void 0:b.image_url)??null},ticket_type:{name:((j=S.data)==null?void 0:j.name)??"Ingresso"}};if(o(E),C.payment_status==="pending")try{const{data:_,error:k}=await $.functions.invoke("verify-ticket-payment",{body:{sessionId:c}});if(k)throw k;_==null||_.payment_status}catch(_){console.warn("Verify payment failed:",_)}}catch(N){console.error("Error fetching ticket details:",N),G.error("Erro ao carregar detalhes do ingresso"),setTimeout(()=>t("/"),2e3)}finally{s(!1)}})()},[c,t]),r)return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:n.jsx(us,{className:"h-8 w-8 animate-spin text-primary"})});if(!a)return null;const u=JSON.stringify({ticketId:a.id,eventTitle:a.event.title,buyerName:a.buyer_name,quantity:a.quantity});return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background to-secondary/20 py-8 px-4",children:n.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("div",{className:"flex justify-center",children:n.jsx(Zr,{className:"h-16 w-16 text-green-500"})}),n.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Compra Finalizada com Sucesso!"}),n.jsx("p",{className:"text-muted-foreground",children:"Seu ingresso foi confirmado. Guarde o QR Code abaixo para apresentar no evento."})]}),n.jsxs(Ne,{className:"overflow-hidden",children:[n.jsx(qe,{className:"bg-primary/5",children:n.jsxs(He,{className:"flex items-center gap-2",children:[n.jsx(Ac,{className:"h-5 w-5"}),"Detalhes do Ingresso"]})}),n.jsxs(Ce,{className:"space-y-6 pt-6",children:[n.jsx("div",{className:"flex justify-center p-6 bg-white rounded-lg",children:n.jsx(Tk,{value:u,size:200})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg text-foreground mb-2",children:a.event.title}),n.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"h-4 w-4"}),n.jsx("span",{children:dn(new Date(a.event.event_date),"dd 'de' MMMM 'de' yyyy 'às' HH:mm",{locale:Ir})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Rt,{className:"h-4 w-4"}),n.jsx("span",{children:a.event.location})]})]})]}),n.jsxs("div",{className:"border-t pt-4",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Tipo de Ingresso:"}),n.jsx("span",{className:"font-medium",children:a.ticket_type.name})]}),n.jsxs("div",{className:"flex justify-between text-sm mt-2",children:[n.jsx("span",{className:"text-muted-foreground",children:"Quantidade:"}),n.jsxs("span",{className:"font-medium",children:[a.quantity,"x"]})]}),n.jsxs("div",{className:"flex justify-between text-sm mt-2",children:[n.jsx("span",{className:"text-muted-foreground",children:"Comprador:"}),n.jsx("span",{className:"font-medium",children:a.buyer_name})]}),n.jsxs("div",{className:"flex justify-between text-lg font-bold mt-4 pt-4 border-t",children:[n.jsx("span",{children:"Total Pago:"}),n.jsxs("span",{className:"text-primary",children:["R$ ",a.total_amount.toFixed(2)]})]})]})]}),n.jsxs("div",{className:"space-y-2 pt-4",children:[n.jsx(K,{onClick:()=>window.print(),variant:"outline",className:"w-full",children:"Imprimir Ingresso"}),n.jsx(K,{onClick:()=>t("/"),className:"w-full",children:"Voltar para Home"})]})]})]}),n.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:[n.jsx("p",{children:"Este QR Code é único e intransferível."}),n.jsx("p",{children:"Guarde-o com segurança para apresentar no dia do evento."})]})]})})}const hp=v.forwardRef(({className:e,...t},r)=>n.jsx("div",{className:"relative w-full overflow-auto",children:n.jsx("table",{ref:r,className:Fe("w-full caption-bottom text-sm",e),...t})}));hp.displayName="Table";const fp=v.forwardRef(({className:e,...t},r)=>n.jsx("thead",{ref:r,className:Fe("[&_tr]:border-b",e),...t}));fp.displayName="TableHeader";const mp=v.forwardRef(({className:e,...t},r)=>n.jsx("tbody",{ref:r,className:Fe("[&_tr:last-child]:border-0",e),...t}));mp.displayName="TableBody";const RW=v.forwardRef(({className:e,...t},r)=>n.jsx("tfoot",{ref:r,className:Fe("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));RW.displayName="TableFooter";const ol=v.forwardRef(({className:e,...t},r)=>n.jsx("tr",{ref:r,className:Fe("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",e),...t}));ol.displayName="TableRow";const hr=v.forwardRef(({className:e,...t},r)=>n.jsx("th",{ref:r,className:Fe("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));hr.displayName="TableHead";const fr=v.forwardRef(({className:e,...t},r)=>n.jsx("td",{ref:r,className:Fe("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));fr.displayName="TableCell";const PW=v.forwardRef(({className:e,...t},r)=>n.jsx("caption",{ref:r,className:Fe("mt-4 text-sm text-muted-foreground",e),...t}));PW.displayName="TableCaption";function OW(){const{eventId:e}=fl(),t=_t(),[r,s]=v.useState(!0),[a,o]=v.useState([]),[c,u]=v.useState(null),[f,p]=v.useState({totalSales:0,totalRevenue:0,totalTickets:0,grossRevenue:0,netRevenue:0});v.useEffect(()=>{(async()=>{if(e)try{const{data:j,error:N}=await $.from("events").select("title, event_date").eq("id",e).single();if(N)throw N;u(j);const{data:C,error:T}=await $.from("ticket_sales").select(`
            id,
            buyer_name,
            buyer_email,
            buyer_phone,
            quantity,
            unit_price,
            total_amount,
            payment_status,
            created_at,
            paid_at,
            ticket_type:ticket_types(name)
          `).eq("event_id",e).order("created_at",{ascending:!1});if(T)throw T;o(C||[]);const S=(C==null?void 0:C.filter(L=>L.payment_status==="completed"))||[],E=S.reduce((L,R)=>L+Number(R.total_amount),0),_=E*.05,k=E*.0399+S.length*.39,D=E-_-k;p({totalSales:S.length,totalRevenue:E,totalTickets:S.reduce((L,R)=>L+R.quantity,0),grossRevenue:E,netRevenue:D})}catch(j){console.error("Error fetching sales data:",j),G.error("Erro ao carregar dados de vendas")}finally{s(!1)}})()},[e]);const x=b=>{switch(b){case"completed":return n.jsx(ct,{className:"bg-green-600",children:"Pago"});case"pending":return n.jsx(ct,{variant:"secondary",children:"Pendente"});case"cancelled":return n.jsx(ct,{variant:"destructive",children:"Cancelado"});default:return n.jsx(ct,{variant:"outline",children:b})}},w=()=>{const b=["Data","Comprador","Email","Telefone","Tipo","Quantidade","Total","Status"],j=a.map(S=>[dn(new Date(S.created_at),"dd/MM/yyyy HH:mm"),S.buyer_name,S.buyer_email,S.buyer_phone||"-",S.ticket_type.name,S.quantity,`R$ ${S.total_amount.toFixed(2)}`,S.payment_status==="completed"?"Pago":S.payment_status]),N=[b,...j].map(S=>S.join(",")).join(`
`),C=new Blob([N],{type:"text/csv;charset=utf-8;"}),T=document.createElement("a");T.href=URL.createObjectURL(C),T.download=`vendas_${e}_${Date.now()}.csv`,T.click(),G.success("Relatório exportado com sucesso!")};return r?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:n.jsx(us,{className:"h-8 w-8 animate-spin text-primary"})}):n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b border-border",children:n.jsxs("div",{className:"flex items-center justify-between p-4 max-w-6xl mx-auto",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>t(-1),children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1 ml-4",children:[n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Vendas de Ingressos"}),c&&n.jsx("p",{className:"text-sm text-muted-foreground",children:c.title})]}),n.jsxs(K,{variant:"outline",size:"sm",onClick:w,children:[n.jsx(Ko,{className:"h-4 w-4 mr-2"}),"Exportar"]})]})}),n.jsxs("div",{className:"p-4 max-w-6xl mx-auto pb-20",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[n.jsxs(Ne,{children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(He,{className:"text-sm font-medium",children:"Total de Vendas"}),n.jsx(er,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ce,{children:[n.jsx("div",{className:"text-2xl font-bold",children:f.totalSales}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"vendas confirmadas"})]})]}),n.jsxs(Ne,{children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(He,{className:"text-sm font-medium",children:"Ingressos Vendidos"}),n.jsx(Ac,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ce,{children:[n.jsx("div",{className:"text-2xl font-bold",children:f.totalTickets}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"ingressos no total"})]})]}),n.jsxs(Ne,{children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(He,{className:"text-sm font-medium",children:"Receita Bruta"}),n.jsx(An,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ce,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:["R$ ",f.grossRevenue.toFixed(2)]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"valor total de vendas"})]})]}),n.jsxs(Ne,{className:"border-primary/50",children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(He,{className:"text-sm font-medium",children:"Valor a Receber"}),n.jsx(An,{className:"h-4 w-4 text-primary"})]}),n.jsxs(Ce,{children:[n.jsxs("div",{className:"text-2xl font-bold text-primary",children:["R$ ",f.netRevenue.toFixed(2)]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"após taxas (5% + Stripe)"})]})]}),n.jsxs(Ne,{className:"bg-muted/50",children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(He,{className:"text-sm font-medium",children:"Taxas Totais"}),n.jsx(An,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ce,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:["R$ ",(f.grossRevenue-f.netRevenue).toFixed(2)]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"plataforma + processamento"})]})]})]}),n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsx(He,{children:"Lista de Vendas"})}),n.jsx(Ce,{children:a.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(Ac,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"Nenhuma venda registrada ainda"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(hp,{children:[n.jsx(fp,{children:n.jsxs(ol,{children:[n.jsx(hr,{children:"Data"}),n.jsx(hr,{children:"Comprador"}),n.jsx(hr,{children:"Contato"}),n.jsx(hr,{children:"Tipo"}),n.jsx(hr,{className:"text-center",children:"Qtd"}),n.jsx(hr,{className:"text-right",children:"Valor"}),n.jsx(hr,{className:"text-center",children:"Status"})]})}),n.jsx(mp,{children:a.map(b=>n.jsxs(ol,{children:[n.jsx(fr,{className:"whitespace-nowrap",children:dn(new Date(b.created_at),"dd/MM/yy HH:mm",{locale:Ir})}),n.jsx(fr,{children:n.jsx("div",{className:"font-medium",children:b.buyer_name})}),n.jsx(fr,{children:n.jsxs("div",{className:"text-sm",children:[n.jsx("div",{className:"text-muted-foreground",children:b.buyer_email}),b.buyer_phone&&n.jsx("div",{className:"text-muted-foreground",children:b.buyer_phone})]})}),n.jsx(fr,{children:b.ticket_type.name}),n.jsxs(fr,{className:"text-center",children:[b.quantity,"x"]}),n.jsxs(fr,{className:"text-right font-medium",children:["R$ ",b.total_amount.toFixed(2)]}),n.jsx(fr,{className:"text-center",children:x(b.payment_status)})]},b.id))})]})})})]})]})]})}function DW(){const e=_t(),[t,r]=v.useState(!0),[s,a]=v.useState([]);v.useEffect(()=>{o()},[]);const o=async()=>{try{const{data:c,error:u}=await $.from("events").select(`
          id,
          title,
          end_date,
          organizer_id,
          organizers!inner (
            id,
            page_title,
            avatar_url
          ),
          event_ticket_settings!inner (
            accepts_platform_payment
          )
        `).eq("event_ticket_settings.accepts_platform_payment",!0);if(u)throw u;const{data:f,error:p}=await $.from("ticket_sales").select("*").eq("payment_status","completed");if(p)throw p;const x=new Map;for(const b of f||[])x.has(b.event_id)||x.set(b.event_id,[]),x.get(b.event_id).push(b);const w=[];for(const b of c||[]){const j=b,N=j.organizers,C=x.get(j.id)||[],T=C.reduce((D,L)=>D+Number(L.total_amount),0),{data:S}=await $.from("organizer_payouts").select("*").eq("event_id",j.id).maybeSingle(),E=(S==null?void 0:S.platform_fee)||(T>0?T*.05:0),_=(S==null?void 0:S.processing_fee)||(T>0?T*.0399+.39:0),k=T-E-_;w.push({event_id:j.id,event_title:j.title,event_end_date:j.end_date,organizer_id:N.id,organizer_name:N.page_title,organizer_avatar:N.avatar_url,total_sales:C.length,gross_amount:T,platform_fee:E,processing_fee:_,net_amount:k,has_payout:!!S,payout_status:(S==null?void 0:S.payout_status)||null,payout_date:(S==null?void 0:S.payout_date)||null})}a(w)}catch(c){console.error("Error fetching events:",c),G.error("Erro ao carregar eventos")}finally{r(!1)}};return t?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:n.jsx(us,{className:"h-8 w-8 animate-spin text-primary"})}):n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b border-border",children:n.jsx("div",{className:"flex items-center justify-between p-4 max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>e("/admin"),children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Repasses de Organizadores"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Gerencie pagamentos dos organizadores"})]})]})})}),n.jsxs("div",{className:"p-4 max-w-7xl mx-auto pb-20",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[n.jsxs(Ne,{children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(He,{className:"text-sm font-medium",children:"Total Eventos"}),n.jsx(Et,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ce,{children:[n.jsx("div",{className:"text-2xl font-bold",children:s.length}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"com vendas"})]})]}),n.jsxs(Ne,{children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(He,{className:"text-sm font-medium",children:"Total Bruto"}),n.jsx(An,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ce,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:["R$ ",s.reduce((c,u)=>c+u.gross_amount,0).toFixed(2)]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"em vendas"})]})]}),n.jsxs(Ne,{children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(He,{className:"text-sm font-medium",children:"Total Líquido"}),n.jsx(An,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ce,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:["R$ ",s.reduce((c,u)=>c+u.net_amount,0).toFixed(2)]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"a repassar"})]})]})]}),n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsx(He,{children:"Eventos com Vendas"})}),n.jsx(Ce,{children:s.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(Et,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"Nenhum evento com vendas"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(hp,{children:[n.jsx(fp,{children:n.jsxs(ol,{children:[n.jsx(hr,{children:"Evento"}),n.jsx(hr,{children:"Organizador"}),n.jsx(hr,{className:"text-center",children:"Vendas"}),n.jsx(hr,{className:"text-right",children:"Bruto"}),n.jsx(hr,{className:"text-right",children:"Líquido"}),n.jsx(hr,{className:"text-center",children:"Status"}),n.jsx(hr,{className:"text-center",children:"Ações"})]})}),n.jsx(mp,{children:s.map(c=>n.jsxs(ol,{children:[n.jsxs(fr,{children:[n.jsx("div",{className:"font-medium",children:c.event_title}),c.event_end_date&&n.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(c.event_end_date).toLocaleDateString("pt-BR")})]}),n.jsx(fr,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[c.organizer_avatar?n.jsx("img",{src:c.organizer_avatar,alt:c.organizer_name,className:"w-8 h-8 rounded-full object-cover"}):n.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx(C1,{className:"h-4 w-4 text-primary"})}),n.jsx("span",{className:"text-sm",children:c.organizer_name})]})}),n.jsx(fr,{className:"text-center",children:n.jsx(ct,{variant:"secondary",children:c.total_sales})}),n.jsxs(fr,{className:"text-right",children:["R$ ",c.gross_amount.toFixed(2)]}),n.jsxs(fr,{className:"text-right font-medium text-primary",children:["R$ ",c.net_amount.toFixed(2)]}),n.jsx(fr,{className:"text-center",children:c.has_payout?n.jsx(ct,{variant:c.payout_status==="completed"?"default":"secondary",children:c.payout_status==="completed"?"Pago":"Pendente"}):n.jsx(ct,{variant:"outline",children:"Sem repasse"})}),n.jsx(fr,{className:"text-center",children:n.jsx(K,{size:"sm",onClick:()=>e(`/admin/organizer-payments/${c.organizer_id}?event=${c.event_id}`),children:"Ver Detalhes"})})]},c.event_id))})]})})})]})]})]})}function MW(){const{organizerId:e}=fl(),t=_t(),[r]=W1(),s=r.get("event"),[a,o]=v.useState(!0),[c,u]=v.useState(null),[f,p]=v.useState([]),[x,w]=v.useState({open:!1,payoutId:null,eventId:""}),[b,j]=v.useState("");v.useEffect(()=>{N()},[e]);const N=async()=>{var k,D;if(e)try{const{data:L,error:R}=await $.from("organizers").select("id, page_title, avatar_url, user_id").eq("id",e).single();if(R)throw R;u(L);const{data:M,error:P}=await $.from("events").select(`
          *,
          event_ticket_settings (
            accepts_platform_payment
          )
        `).eq("organizer_id",e);if(P)throw P;const F=[];for(const U of M||[]){const{data:q}=await $.from("ticket_sales").select("*").eq("event_id",U.id).eq("payment_status","completed"),re=Array.isArray(U.event_ticket_settings)?(k=U.event_ticket_settings[0])==null?void 0:k.accepts_platform_payment:(D=U.event_ticket_settings)==null?void 0:D.accepts_platform_payment,{data:W}=await $.from("organizer_payouts").select("*").eq("event_id",U.id).maybeSingle(),ne=q||[],oe=ne.reduce((ye,H)=>ye+Number(H.total_amount),0),ae=ne.length>0?oe*.05:0,J=ne.length>0?oe*.0399+ne.length*.39:0,he=oe-ae-J;if(ne.length>0||re){const ye=C(new Date(U.end_date));F.push({event_id:U.id,event_title:U.title,event_end_date:U.end_date,gross_amount:oe,platform_fee:ae,processing_fee:J,net_amount:he,payout_due_date:ye,payout_status:(W==null?void 0:W.payout_status)||"pending",payout_id:(W==null?void 0:W.id)||null,bank_name:U.bank_name,bank_account:U.bank_account,bank_agency:U.bank_agency,bank_account_holder:U.bank_account_holder,bank_document:U.bank_document,bank_account_type:U.bank_account_type,pix_key:U.pix_key})}}const Y=s?F.filter(U=>U.event_id===s):F;p(Y)}catch(L){console.error("Error fetching organizer details:",L),G.error("Erro ao carregar detalhes")}finally{o(!1)}},C=k=>{const D=new Date(k);let L=0;for(;L<3;)D.setDate(D.getDate()+1),D.getDay()!==0&&D.getDay()!==6&&L++;return D.toISOString()},T=async()=>{if(!(!x.payoutId&&!x.eventId))try{const k=f.find(D=>D.event_id===x.eventId);if(!k)return;if(x.payoutId){const{error:D}=await $.from("organizer_payouts").update({payout_status:"completed",payout_date:new Date().toISOString(),payout_notes:b}).eq("id",x.payoutId);if(D)throw D}else{const{error:D}=await $.from("organizer_payouts").insert({event_id:k.event_id,organizer_id:e,gross_amount:k.gross_amount,platform_fee:k.platform_fee,processing_fee:k.processing_fee,net_amount:k.net_amount,payout_due_date:k.payout_due_date,payout_status:"completed",payout_date:new Date().toISOString(),payout_notes:b});if(D)throw D}G.success("Repasse marcado como pago!"),w({open:!1,payoutId:null,eventId:""}),j(""),N()}catch(k){console.error("Error marking payout as paid:",k),G.error("Erro ao marcar repasse como pago")}},S=k=>{switch(k){case"completed":return n.jsx(ct,{className:"bg-green-600",children:"Pago"});case"pending":return n.jsx(ct,{variant:"secondary",children:"Pendente"});default:return n.jsx(ct,{variant:"outline",children:k})}};if(a)return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:n.jsx(us,{className:"h-8 w-8 animate-spin text-primary"})});if(!c)return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:n.jsx("p",{children:"Organizador não encontrado"})});const E=f.filter(k=>k.payout_status==="pending").reduce((k,D)=>k+D.net_amount,0),_=f.filter(k=>k.payout_status==="completed").reduce((k,D)=>k+D.net_amount,0);return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b border-border",children:n.jsx("div",{className:"flex items-center justify-between p-4 max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>t("/admin/organizer-payments"),children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex items-center gap-3",children:[c.avatar_url?n.jsx("img",{src:c.avatar_url,alt:c.page_title,className:"w-12 h-12 rounded-full object-cover"}):n.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx(C1,{className:"h-6 w-6 text-primary"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:c.page_title}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Detalhes de repasses"})]})]})]})})}),n.jsxs("div",{className:"p-4 max-w-7xl mx-auto pb-20",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[n.jsxs(Ne,{children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(He,{className:"text-sm font-medium",children:"Total Pendente"}),n.jsx(An,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ce,{children:[n.jsxs("div",{className:"text-2xl font-bold text-primary",children:["R$ ",E.toFixed(2)]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[f.filter(k=>k.payout_status==="pending").length," eventos"]})]})]}),n.jsxs(Ne,{children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(He,{className:"text-sm font-medium",children:"Total Pago"}),n.jsx(Yn,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ce,{children:[n.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["R$ ",_.toFixed(2)]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[f.filter(k=>k.payout_status==="completed").length," eventos"]})]})]}),n.jsxs(Ne,{children:[n.jsxs(qe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(He,{className:"text-sm font-medium",children:"Total de Eventos"}),n.jsx(Et,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Ce,{children:[n.jsx("div",{className:"text-2xl font-bold",children:f.length}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"com vendas"})]})]})]}),n.jsxs(Ne,{className:"mb-6",children:[n.jsx(qe,{children:n.jsx(He,{children:"Repasses por Evento"})}),n.jsx(Ce,{children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(hp,{children:[n.jsx(fp,{children:n.jsxs(ol,{children:[n.jsx(hr,{children:"Evento"}),n.jsx(hr,{children:"Fim do Evento"}),n.jsx(hr,{className:"text-right",children:"Receita Bruta"}),n.jsx(hr,{className:"text-right",children:"Taxa Plataforma"}),n.jsx(hr,{className:"text-right",children:"Taxa Stripe"}),n.jsx(hr,{className:"text-right",children:"Valor Líquido"}),n.jsx(hr,{children:"Data Repasse"}),n.jsx(hr,{className:"text-center",children:"Status"}),n.jsx(hr,{className:"text-center",children:"Ações"})]})}),n.jsx(mp,{children:f.map(k=>n.jsxs(ol,{children:[n.jsx(fr,{className:"font-medium",children:k.event_title}),n.jsx(fr,{children:dn(new Date(k.event_end_date),"dd/MM/yyyy",{locale:Ir})}),n.jsxs(fr,{className:"text-right",children:["R$ ",k.gross_amount.toFixed(2)]}),n.jsxs(fr,{className:"text-right text-red-600",children:["-R$ ",k.platform_fee.toFixed(2)]}),n.jsxs(fr,{className:"text-right text-red-600",children:["-R$ ",k.processing_fee.toFixed(2)]}),n.jsxs(fr,{className:"text-right font-bold text-primary",children:["R$ ",k.net_amount.toFixed(2)]}),n.jsx(fr,{children:dn(new Date(k.payout_due_date),"dd/MM/yyyy",{locale:Ir})}),n.jsx(fr,{className:"text-center",children:S(k.payout_status)}),n.jsx(fr,{className:"text-center",children:k.payout_status==="pending"&&n.jsx(K,{size:"sm",onClick:()=>w({open:!0,payoutId:k.payout_id,eventId:k.event_id}),children:"Marcar como Pago"})})]},k.event_id))})]})})})]}),f.length>0&&n.jsxs(Ne,{children:[n.jsx(qe,{children:n.jsx(He,{children:"Dados para Repasse"})}),n.jsxs(Ce,{className:"space-y-4",children:[f[0].pix_key&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Chave PIX"}),n.jsx("p",{className:"text-sm bg-muted p-3 rounded",children:f[0].pix_key})]}),f[0].bank_name&&n.jsxs(n.Fragment,{children:[n.jsx(la,{}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Dados Bancários"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Banco:"}),n.jsx("p",{className:"font-medium",children:f[0].bank_name})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Tipo de Conta:"}),n.jsx("p",{className:"font-medium",children:f[0].bank_account_type})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Agência:"}),n.jsx("p",{className:"font-medium",children:f[0].bank_agency})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Conta:"}),n.jsx("p",{className:"font-medium",children:f[0].bank_account})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Titular:"}),n.jsx("p",{className:"font-medium",children:f[0].bank_account_holder})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"CPF/CNPJ:"}),n.jsx("p",{className:"font-medium",children:f[0].bank_document})]})]})]})]})]})]})]}),n.jsx(zt,{open:x.open,onOpenChange:k=>!k&&w({open:!1,payoutId:null,eventId:""}),children:n.jsxs(Ft,{children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Confirmar Repasse"}),n.jsx(os,{children:"Tem certeza que deseja marcar este repasse como pago? Esta ação não pode ser desfeita."})]}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Observações (opcional)"}),n.jsx(kn,{value:b,onChange:k=>j(k.target.value),placeholder:"Adicione informações sobre o pagamento...",className:"mt-2"})]})}),n.jsxs($u,{children:[n.jsx(K,{variant:"outline",onClick:()=>w({open:!1,payoutId:null,eventId:""}),children:"Cancelar"}),n.jsx(K,{onClick:T,children:"Confirmar Pagamento"})]})]})})]})}function LW(){const e=_t(),{user:t}=bt(),[r,s]=v.useState(!0),[a,o]=v.useState([]),[c,u]=v.useState([]),[f,p]=v.useState(null),x=v.useRef(null),w=T=>T.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();v.useEffect(()=>{t&&b()},[t]);const b=async()=>{if(t)try{s(!0);const{data:T,error:S}=await $.from("event_registrations").select(`
          id,
          event_id,
          attendance_confirmed,
          created_at,
          events!inner (
            id,
            title,
            event_date,
            location,
            image_url,
            organizers!inner (
              page_title
            )
          )
        `).eq("user_id",t.id).order("created_at",{ascending:!1});if(S)throw S;const{data:E,error:_}=await $.from("ticket_sales").select(`
          id,
          event_id,
          quantity,
          total_amount,
          payment_status,
          created_at,
          buyer_name,
          buyer_email,
          ticket_type_id,
          ticket_types!inner (
            name
          ),
          events!inner (
            id,
            title,
            event_date,
            location,
            image_url,
            organizers!inner (
              page_title
            )
          )
        `).eq("user_id",t.id).eq("payment_status","completed").order("created_at",{ascending:!1});if(_)throw _;o((T||[]).map(k=>({...k,event:{...k.events,organizer:k.events.organizers}}))),u((E||[]).map(k=>({...k,event:{...k.events,organizer:k.events.organizers},ticket_type:k.ticket_types})))}catch(T){console.error("Error fetching user events:",T),G.error("Erro ao carregar eventos")}finally{s(!1)}},j=a.filter(T=>T.attendance_confirmed),N=a.filter(T=>!T.attendance_confirmed),C=({event:T,type:S,registration:E,purchase:_})=>n.jsx(Ne,{className:S==="purchase"?"":"cursor-pointer hover:shadow-lg transition-shadow",onClick:S==="purchase"?void 0:()=>e(`/events/${T.id}`),children:n.jsxs("div",{className:"flex gap-4 p-4",children:[T.image_url&&n.jsx("img",{src:T.image_url,alt:T.title,className:"w-24 h-24 rounded-lg object-cover"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-lg mb-1",children:T.title}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:T.organizer.page_title}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[n.jsx(Et,{className:"h-4 w-4"}),n.jsx("span",{children:dn(new Date(T.event_date),"PPP 'às' HH:mm",{locale:Ir})})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(Rt,{className:"h-4 w-4"}),n.jsx("span",{className:"line-clamp-1",children:T.location})]}),S==="purchase"&&_&&n.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(ct,{variant:"secondary",children:_.ticket_type.name}),n.jsxs("span",{className:"ml-2 text-sm text-muted-foreground",children:[_.quantity,"x - R$ ",_.total_amount.toFixed(2)]})]}),n.jsxs(K,{size:"sm",onClick:()=>p(_),children:[n.jsx(U8,{className:"h-4 w-4 mr-2"}),"Ver Ingresso"]})]}),S==="confirmed"&&n.jsxs(ct,{className:"mt-2 bg-green-600",children:[n.jsx(Zr,{className:"h-3 w-3 mr-1"}),"Presença Confirmada"]})]})]})});return r?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:n.jsx(us,{className:"h-8 w-8 animate-spin text-primary"})}):n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b border-border",children:n.jsx("div",{className:"flex items-center justify-between p-4 max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(K,{variant:"ghost",size:"icon",onClick:()=>e("/",{state:{initialTab:"profile"}}),children:n.jsx(gt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Meus Eventos"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Cadastros, confirmações e ingressos"})]})]})})}),n.jsx("div",{className:"p-4 max-w-7xl mx-auto pb-20",children:n.jsxs(Km,{defaultValue:"purchases",className:"w-full",children:[n.jsxs(qu,{className:"grid w-full grid-cols-3",children:[n.jsxs(ls,{value:"purchases",children:[n.jsx(Ac,{className:"h-4 w-4 mr-2"}),"Ingressos (",c.length,")"]}),n.jsxs(ls,{value:"confirmed",children:[n.jsx(Zr,{className:"h-4 w-4 mr-2"}),"Confirmados (",j.length,")"]}),n.jsxs(ls,{value:"registrations",children:[n.jsx(Et,{className:"h-4 w-4 mr-2"}),"Cadastros (",N.length,")"]})]}),n.jsx(cs,{value:"purchases",className:"space-y-4 mt-6",children:c.length===0?n.jsx(Ne,{children:n.jsxs(Ce,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(Ac,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("p",{className:"text-muted-foreground text-center",children:"Você ainda não comprou nenhum ingresso"})]})}):c.map(T=>n.jsx(C,{event:T.event,type:"purchase",purchase:T},T.id))}),n.jsx(cs,{value:"confirmed",className:"space-y-4 mt-6",children:j.length===0?n.jsx(Ne,{children:n.jsxs(Ce,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(Zr,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("p",{className:"text-muted-foreground text-center",children:"Você ainda não confirmou presença em nenhum evento"})]})}):j.map(T=>n.jsx(C,{event:T.event,type:"confirmed",registration:T},T.id))}),n.jsx(cs,{value:"registrations",className:"space-y-4 mt-6",children:N.length===0?n.jsx(Ne,{children:n.jsxs(Ce,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(Et,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("p",{className:"text-muted-foreground text-center",children:"Você não tem cadastros pendentes em eventos"})]})}):N.map(T=>n.jsx(C,{event:T.event,type:"registration",registration:T},T.id))})]})}),n.jsx(zt,{open:!!f,onOpenChange:()=>p(null),children:n.jsxs(Ft,{className:"sm:max-w-lg max-h-[90vh] overflow-y-auto",children:[n.jsxs(xr,{children:[n.jsx(vr,{children:"Seu Ingresso Digital"}),n.jsx(os,{children:"Apresente este QR Code na entrada do evento"})]}),f&&n.jsxs("div",{className:"space-y-4 pb-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Titular do Ingresso"}),n.jsx("p",{className:"font-semibold",children:f.buyer_name})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Email"}),n.jsx("p",{className:"font-medium text-sm",children:f.buyer_email})]})]}),n.jsx("div",{className:"border-t border-dashed"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Evento"}),n.jsx("p",{className:"font-semibold",children:f.event.title})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Organizador"}),n.jsx("p",{className:"font-medium text-sm",children:f.event.organizer.page_title})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Data"}),n.jsx("p",{className:"font-medium text-sm",children:dn(new Date(f.event.event_date),"dd/MM/yyyy",{locale:Ir})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Horário"}),n.jsx("p",{className:"font-medium text-sm",children:dn(new Date(f.event.event_date),"HH:mm",{locale:Ir})})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Local"}),n.jsx("p",{className:"font-medium text-sm",children:f.event.location})]})]}),n.jsx("div",{className:"border-t border-dashed"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Tipo de Ingresso"}),n.jsx("p",{className:"font-semibold text-sm",children:f.ticket_type.name})]}),n.jsxs(ct,{variant:"secondary",children:[f.quantity,"x"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Valor Total"}),n.jsxs("p",{className:"font-bold text-lg text-primary",children:["R$ ",f.total_amount.toFixed(2)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Data da Compra"}),n.jsx("p",{className:"font-medium text-sm",children:dn(new Date(f.created_at),"dd/MM/yyyy 'às' HH:mm",{locale:Ir})})]})]}),n.jsx("div",{className:"border-t border-dashed"}),n.jsxs("div",{className:"flex flex-col items-center gap-3 py-2",children:[n.jsx("div",{ref:x,className:"bg-white p-4 rounded-lg shadow-sm",children:n.jsx(Tk,{value:f.id,size:200})}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Código do Ingresso"}),n.jsx("p",{className:"text-xs font-mono bg-muted px-2 py-1 rounded",children:f.id})]})]}),n.jsxs("div",{className:"flex gap-2 pt-2",children:[n.jsx(K,{variant:"outline",className:"flex-1",onClick:()=>{var L;const T=(L=x.current)==null?void 0:L.querySelector("svg");if(!T){G.error("Erro ao gerar QR Code");return}const E=new XMLSerializer().serializeToString(T),_=new Blob([E],{type:"image/svg+xml;charset=utf-8"}),k=URL.createObjectURL(_),D=new Image;D.onload=()=>{const R=document.createElement("canvas"),M=R.getContext("2d");if(!M)return;R.width=400,R.height=500,M.fillStyle="white",M.fillRect(0,0,R.width,R.height),M.fillStyle="black",M.textAlign="center",M.font="bold 18px Arial",M.fillText("Ingresso Digital",R.width/2,30),M.font="14px Arial",M.fillText(f.event.title,R.width/2,60),M.drawImage(D,100,80,200,200),M.font="12px Arial",M.fillText(`Tipo: ${f.ticket_type.name}`,R.width/2,300),M.fillText(`Quantidade: ${f.quantity}x`,R.width/2,320),M.fillText(`Titular: ${f.buyer_name}`,R.width/2,340),M.font="10px monospace",M.fillText(f.id,R.width/2,380);const P=R.toDataURL("image/png"),F=document.createElement("a");F.download=`ingresso-${f.event.title.replace(/\s+/g,"-").toLowerCase()}.png`,F.href=P,F.click(),URL.revokeObjectURL(k),G.success("Ingresso baixado com sucesso!")},D.onerror=()=>{URL.revokeObjectURL(k),G.error("Erro ao processar QR Code")},D.src=k},children:"Baixar Ingresso"}),new Date(f.event.event_date)>new Date&&n.jsx(K,{className:"flex-1",onClick:async()=>{var S;if(!f)return;const{data:T}=await $.from("organizers").select("username").eq("id",(S=(await $.from("events").select("organizer_id").eq("id",f.event_id).maybeSingle()).data)==null?void 0:S.organizer_id).maybeSingle();if(T!=null&&T.username){const E=w(f.event.title);p(null),e(`/${T.username}/${E}`)}else G.error("Erro ao abrir evento")},children:"Ver Evento"})]})]})]})})]})}function FW(){const e=_t(),{organizerData:t}=Oa(),{isNativeApp:r}=DA(),[s,a]=v.useState(!1);return v.useEffect(()=>{a(window.innerWidth<768)},[]),t!=null&&t.id?n.jsx("div",{className:"min-h-screen bg-background pb-20",children:n.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 md:px-6 lg:px-8 py-4 md:py-6 lg:py-8",children:[n.jsxs("div",{className:"mb-6 md:mb-8",children:[n.jsxs(K,{variant:"ghost",onClick:()=>{s&&!r?window.close():e(-1)},className:"mb-4 hover:bg-accent",children:[n.jsx(gt,{className:"h-4 w-4 mr-2"}),"Voltar"]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h1",{className:"text-2xl md:text-3xl lg:text-4xl font-bold",children:"Gestão Financeira"}),n.jsx("p",{className:"text-sm md:text-base text-muted-foreground",children:"Gerencie seus dados bancários e acompanhe suas vendas"})]})]}),n.jsxs("div",{className:"grid gap-6 md:gap-8 lg:grid-cols-2 xl:gap-10",children:[n.jsx("div",{className:"space-y-4 md:space-y-6",children:n.jsxs("div",{className:"bg-card rounded-xl border p-4 md:p-6",children:[n.jsxs("div",{className:"mb-4 md:mb-6",children:[n.jsx("h2",{className:"text-xl md:text-2xl font-bold mb-1",children:"Dados Financeiros"}),n.jsx("p",{className:"text-sm md:text-base text-muted-foreground",children:"Configure suas informações bancárias e fiscais"})]}),n.jsx(ZA,{organizerId:t.id})]})}),n.jsx("div",{className:"space-y-4 md:space-y-6",children:n.jsxs("div",{className:"bg-card rounded-xl border p-4 md:p-6",children:[n.jsxs("div",{className:"mb-4 md:mb-6",children:[n.jsx("h2",{className:"text-xl md:text-2xl font-bold mb-1",children:"Vendas de Ingressos"}),n.jsx("p",{className:"text-sm md:text-base text-muted-foreground",children:"Acompanhe suas vendas e repasses"})]}),n.jsx(JA,{organizerId:t.id})]})})]})]})}):n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:n.jsx("div",{className:"text-center",children:n.jsx("p",{className:"text-muted-foreground mb-4",children:"Carregando..."})})})}const BW=new vO,zW=()=>n.jsx(yO,{client:BW,children:n.jsx(W5,{children:n.jsx(Z7,{children:n.jsxs(J7,{children:[n.jsx(k6,{}),n.jsx(oP,{}),n.jsx(gD,{children:n.jsxs(hD,{children:[n.jsx(Wt,{path:"/",element:n.jsx(Iq,{})}),n.jsx(Wt,{path:"/auth",element:n.jsx(Oq,{onLogin:()=>{}})}),n.jsx(Wt,{path:"/organizer-onboarding",element:n.jsx($q,{})}),n.jsx(Wt,{path:"/user-onboarding",element:n.jsx(qq,{})}),n.jsx(Wt,{path:"/notifications",element:n.jsx(rW,{})}),n.jsx(Wt,{path:"/ticket-success",element:n.jsx(IW,{})}),n.jsx(Wt,{path:"/my-events",element:n.jsx(LW,{})}),n.jsx(Wt,{path:"/organizer-financial",element:n.jsx(FW,{})}),n.jsx(Wt,{path:"/event/:eventId/sales",element:n.jsx(OW,{})}),n.jsx(Wt,{path:"/event/:eventId/register",element:n.jsx(lk,{})}),n.jsx(Wt,{path:"/event/:eventId/registrations",element:n.jsx(kv,{})}),n.jsx(Wt,{path:"/event/:eventId/attendances",element:n.jsx(Tv,{})}),n.jsx(Wt,{path:"/event/:eventId/find-friends",element:n.jsx(d0,{})}),n.jsx(Wt,{path:"/e/:eventId",element:n.jsx(b2,{})}),n.jsx(Wt,{path:"/admin",element:n.jsx(Hq,{})}),n.jsx(Wt,{path:"/admin/create-platform-event",element:n.jsx(Gq,{})}),n.jsx(Wt,{path:"/admin/claims",element:n.jsx(Xq,{})}),n.jsx(Wt,{path:"/admin/platform-events",element:n.jsx(Kq,{})}),n.jsx(Wt,{path:"/admin/platform-event/:eventId/edit",element:n.jsx(Yq,{})}),n.jsx(Wt,{path:"/admin/platform-event/:eventId/registrations",element:n.jsx(Qq,{})}),n.jsx(Wt,{path:"/admin/support",element:n.jsx(Zq,{})}),n.jsx(Wt,{path:"/admin/auto-generate-events",element:n.jsx(Jq,{})}),n.jsx(Wt,{path:"/admin/pending-events",element:n.jsx(eW,{})}),n.jsx(Wt,{path:"/admin/pending-event/:eventId/edit",element:n.jsx(tW,{})}),n.jsx(Wt,{path:"/admin/organizer-payments",element:n.jsx(DW,{})}),n.jsx(Wt,{path:"/admin/organizer-payments/:organizerId",element:n.jsx(MW,{})}),n.jsx(Wt,{path:"/:organizerSlug/:eventSlug",element:n.jsx(b2,{})}),n.jsx(Wt,{path:"/:slug",element:n.jsx(Pq,{})}),n.jsx(Wt,{path:"*",element:n.jsx(Wq,{})})]})})]})})})});XN(document.getElementById("root")).render(n.jsx(v.StrictMode,{children:n.jsx(zW,{})}));export{Kb as B,kg as C,Oc as E,Qb as L,sA as W};
